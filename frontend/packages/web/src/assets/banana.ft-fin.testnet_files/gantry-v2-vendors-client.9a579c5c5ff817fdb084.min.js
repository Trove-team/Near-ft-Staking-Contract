(()=>{var ny=Object.defineProperty;var n=(H,l)=>ny(H,"name",{value:l,configurable:!0});(globalThis.webpackChunkwebapp=globalThis.webpackChunkwebapp||[]).push([["gantry-v2-vendors-client","gantry-v2-vendors-workflow-builder"],{4382362497:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0})},539715656:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0})},4318895513:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0})},2936261413:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0})},7132723781:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isMsWindow=void 0;var c=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function u(v){return"MSInputMethodContext"in v&&"msCrypto"in v}n(u,"quacksLikeAnMsWindow");function m(v){if(u(v)&&v.msCrypto.subtle!==void 0){var g=v.msCrypto,s=g.getRandomValues,a=g.subtle;return c.map(function(i){return a[i]}).concat(s).every(function(i){return typeof i=="function"})}return!1}n(m,"isMsWindow"),l.isMsWindow=m},452065043:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var u=c(6789371454);u.__exportStar(c(4382362497),l),u.__exportStar(c(539715656),l),u.__exportStar(c(4318895513),l),u.__exportStar(c(2936261413),l),u.__exportStar(c(7132723781),l)},6789371454:(H,l,c)=>{"use strict";c.r(l),c.d(l,{__assign:()=>v,__asyncDelegator:()=>b,__asyncGenerator:()=>S,__asyncValues:()=>_,__await:()=>y,__awaiter:()=>e,__classPrivateFieldGet:()=>O,__classPrivateFieldSet:()=>D,__createBinding:()=>r,__decorate:()=>s,__exportStar:()=>o,__extends:()=>m,__generator:()=>t,__importDefault:()=>R,__importStar:()=>w,__makeTemplateObject:()=>C,__metadata:()=>i,__param:()=>a,__read:()=>h,__rest:()=>g,__spread:()=>p,__spreadArrays:()=>d,__values:()=>f});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var u=n(function(I,M){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,N){k.__proto__=N}||function(k,N){for(var j in N)N.hasOwnProperty(j)&&(k[j]=N[j])},u(I,M)},"extendStatics");function m(I,M){u(I,M);function k(){this.constructor=I}n(k,"__"),I.prototype=M===null?Object.create(M):(k.prototype=M.prototype,new k)}n(m,"__extends");var v=n(function(){return v=Object.assign||n(function(M){for(var k,N=1,j=arguments.length;N<j;N++){k=arguments[N];for(var B in k)Object.prototype.hasOwnProperty.call(k,B)&&(M[B]=k[B])}return M},"__assign"),v.apply(this,arguments)},"__assign");function g(I,M){var k={};for(var N in I)Object.prototype.hasOwnProperty.call(I,N)&&M.indexOf(N)<0&&(k[N]=I[N]);if(I!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,N=Object.getOwnPropertySymbols(I);j<N.length;j++)M.indexOf(N[j])<0&&Object.prototype.propertyIsEnumerable.call(I,N[j])&&(k[N[j]]=I[N[j]]);return k}n(g,"__rest");function s(I,M,k,N){var j=arguments.length,B=j<3?M:N===null?N=Object.getOwnPropertyDescriptor(M,k):N,J;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(I,M,k,N);else for(var Q=I.length-1;Q>=0;Q--)(J=I[Q])&&(B=(j<3?J(B):j>3?J(M,k,B):J(M,k))||B);return j>3&&B&&Object.defineProperty(M,k,B),B}n(s,"__decorate");function a(I,M){return function(k,N){M(k,N,I)}}n(a,"__param");function i(I,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(I,M)}n(i,"__metadata");function e(I,M,k,N){function j(B){return B instanceof k?B:new k(function(J){J(B)})}return n(j,"adopt"),new(k||(k=Promise))(function(B,J){function Q(he){try{$(N.next(he))}catch(Ae){J(Ae)}}n(Q,"fulfilled");function oe(he){try{$(N.throw(he))}catch(Ae){J(Ae)}}n(oe,"rejected");function $(he){he.done?B(he.value):j(he.value).then(Q,oe)}n($,"step"),$((N=N.apply(I,M||[])).next())})}n(e,"__awaiter");function t(I,M){var k={label:0,sent:function(){if(B[0]&1)throw B[1];return B[1]},trys:[],ops:[]},N,j,B,J;return J={next:Q(0),throw:Q(1),return:Q(2)},typeof Symbol=="function"&&(J[Symbol.iterator]=function(){return this}),J;function Q($){return function(he){return oe([$,he])}}function oe($){if(N)throw new TypeError("Generator is already executing.");for(;k;)try{if(N=1,j&&(B=$[0]&2?j.return:$[0]?j.throw||((B=j.return)&&B.call(j),0):j.next)&&!(B=B.call(j,$[1])).done)return B;switch(j=0,B&&($=[$[0]&2,B.value]),$[0]){case 0:case 1:B=$;break;case 4:return k.label++,{value:$[1],done:!1};case 5:k.label++,j=$[1],$=[0];continue;case 7:$=k.ops.pop(),k.trys.pop();continue;default:if(B=k.trys,!(B=B.length>0&&B[B.length-1])&&($[0]===6||$[0]===2)){k=0;continue}if($[0]===3&&(!B||$[1]>B[0]&&$[1]<B[3])){k.label=$[1];break}if($[0]===6&&k.label<B[1]){k.label=B[1],B=$;break}if(B&&k.label<B[2]){k.label=B[2],k.ops.push($);break}B[2]&&k.ops.pop(),k.trys.pop();continue}$=M.call(I,k)}catch(he){$=[6,he],j=0}finally{N=B=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}}n(t,"__generator");function r(I,M,k,N){N===void 0&&(N=k),I[N]=M[k]}n(r,"__createBinding");function o(I,M){for(var k in I)k!=="default"&&!M.hasOwnProperty(k)&&(M[k]=I[k])}n(o,"__exportStar");function f(I){var M=typeof Symbol=="function"&&Symbol.iterator,k=M&&I[M],N=0;if(k)return k.call(I);if(I&&typeof I.length=="number")return{next:function(){return I&&N>=I.length&&(I=void 0),{value:I&&I[N++],done:!I}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}n(f,"__values");function h(I,M){var k=typeof Symbol=="function"&&I[Symbol.iterator];if(!k)return I;var N=k.call(I),j,B=[],J;try{for(;(M===void 0||M-- >0)&&!(j=N.next()).done;)B.push(j.value)}catch(Q){J={error:Q}}finally{try{j&&!j.done&&(k=N.return)&&k.call(N)}finally{if(J)throw J.error}}return B}n(h,"__read");function p(){for(var I=[],M=0;M<arguments.length;M++)I=I.concat(h(arguments[M]));return I}n(p,"__spread");function d(){for(var I=0,M=0,k=arguments.length;M<k;M++)I+=arguments[M].length;for(var N=Array(I),j=0,M=0;M<k;M++)for(var B=arguments[M],J=0,Q=B.length;J<Q;J++,j++)N[j]=B[J];return N}n(d,"__spreadArrays");function y(I){return this instanceof y?(this.v=I,this):new y(I)}n(y,"__await");function S(I,M,k){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N=k.apply(I,M||[]),j,B=[];return j={},J("next"),J("throw"),J("return"),j[Symbol.asyncIterator]=function(){return this},j;function J(Ee){N[Ee]&&(j[Ee]=function(Oe){return new Promise(function(be,De){B.push([Ee,Oe,be,De])>1||Q(Ee,Oe)})})}function Q(Ee,Oe){try{oe(N[Ee](Oe))}catch(be){Ae(B[0][3],be)}}function oe(Ee){Ee.value instanceof y?Promise.resolve(Ee.value.v).then($,he):Ae(B[0][2],Ee)}function $(Ee){Q("next",Ee)}function he(Ee){Q("throw",Ee)}function Ae(Ee,Oe){Ee(Oe),B.shift(),B.length&&Q(B[0][0],B[0][1])}}n(S,"__asyncGenerator");function b(I){var M,k;return M={},N("next"),N("throw",function(j){throw j}),N("return"),M[Symbol.iterator]=function(){return this},M;function N(j,B){M[j]=I[j]?function(J){return(k=!k)?{value:y(I[j](J)),done:j==="return"}:B?B(J):J}:B}}n(b,"__asyncDelegator");function _(I){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=I[Symbol.asyncIterator],k;return M?M.call(I):(I=typeof f=="function"?f(I):I[Symbol.iterator](),k={},N("next"),N("throw"),N("return"),k[Symbol.asyncIterator]=function(){return this},k);function N(B){k[B]=I[B]&&function(J){return new Promise(function(Q,oe){J=I[B](J),j(Q,oe,J.done,J.value)})}}function j(B,J,Q,oe){Promise.resolve(oe).then(function($){B({value:$,done:Q})},J)}}n(_,"__asyncValues");function C(I,M){return Object.defineProperty?Object.defineProperty(I,"raw",{value:M}):I.raw=M,I}n(C,"__makeTemplateObject");function w(I){if(I&&I.__esModule)return I;var M={};if(I!=null)for(var k in I)Object.hasOwnProperty.call(I,k)&&(M[k]=I[k]);return M.default=I,M}n(w,"__importStar");function R(I){return I&&I.__esModule?I:{default:I}}n(R,"__importDefault");function O(I,M){if(!M.has(I))throw new TypeError("attempted to get private field on non-instance");return M.get(I)}n(O,"__classPrivateFieldGet");function D(I,M,k){if(!M.has(I))throw new TypeError("attempted to set private field on non-instance");return M.set(I,k),k}n(D,"__classPrivateFieldSet")},1725043582:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.EMPTY_DATA_SHA_256=l.SHA_256_HMAC_ALGO=l.SHA_256_HASH=void 0,l.SHA_256_HASH={name:"SHA-256"},l.SHA_256_HMAC_ALGO={name:"HMAC",hash:l.SHA_256_HASH},l.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},7630143991:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var u=c(519406286),m=c(2468359987),v=c(9335813190),g=c(4038070804),s=c(452065043),a=c(6594694778),i=c(6034816005),e=function(){function t(r){(0,g.supportsWebCrypto)((0,a.locateWindow)())?this.hash=new m.Sha256(r):(0,s.isMsWindow)((0,a.locateWindow)())?this.hash=new u.Sha256(r):this.hash=new v.Sha256(r)}return n(t,"Sha256"),t.prototype.update=function(r,o){this.hash.update((0,i.convertToBuffer)(r))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t}();l.Sha256=e},519406286:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var u=c(1539347662),m=c(1725043582),v=c(2412280125),g=c(6594694778),s=function(){function e(t){this.secret=t,this.reset()}return n(e,"Sha256"),e.prototype.update=function(t){var r=this;(0,u.isEmptyData)(t)||(this.operation=this.operation.then(function(o){return o.onerror=function(){r.operation=Promise.reject(new Error("Error encountered updating hash"))},o.process(i(t)),o}),this.operation.catch(function(){}))},e.prototype.digest=function(){return this.operation.then(function(t){return new Promise(function(r,o){t.onerror=function(){o(new Error("Error encountered finalizing hash"))},t.oncomplete=function(){t.result&&r(new Uint8Array(t.result)),o(new Error("Error encountered finalizing hash"))},t.finish()})})},e.prototype.reset=function(){this.secret?(this.operation=a(this.secret).then(function(t){return(0,g.locateWindow)().msCrypto.subtle.sign(m.SHA_256_HMAC_ALGO,t)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,g.locateWindow)().msCrypto.subtle.digest("SHA-256"))},e}();l.Sha256=s;function a(e){return new Promise(function(t,r){var o=(0,g.locateWindow)().msCrypto.subtle.importKey("raw",i(e),m.SHA_256_HMAC_ALGO,!1,["sign"]);o.oncomplete=function(){o.result&&t(o.result),r(new Error("ImportKey completed without importing key."))},o.onerror=function(){r(new Error("ImportKey failed to import key."))}})}n(a,"getKeyPromise");function i(e){return typeof e=="string"?(0,v.fromUtf8)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}n(i,"toArrayBufferView")},3661302631:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.WebCryptoSha256=l.Ie11Sha256=void 0;var u=c(7681227474);u.__exportStar(c(7630143991),l);var m=c(519406286);Object.defineProperty(l,"Ie11Sha256",{enumerable:!0,get:function(){return m.Sha256}});var v=c(2468359987);Object.defineProperty(l,"WebCryptoSha256",{enumerable:!0,get:function(){return v.Sha256}})},1539347662:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isEmptyData=void 0;function c(u){return typeof u=="string"?u.length===0:u.byteLength===0}n(c,"isEmptyData"),l.isEmptyData=c},2468359987:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var u=c(6034816005),m=c(1725043582),v=c(6594694778),g=function(){function s(a){this.toHash=new Uint8Array(0),this.secret=a,this.reset()}return n(s,"Sha256"),s.prototype.update=function(a){if(!(0,u.isEmptyData)(a)){var i=(0,u.convertToBuffer)(a),e=new Uint8Array(this.toHash.byteLength+i.byteLength);e.set(this.toHash,0),e.set(i,this.toHash.byteLength),this.toHash=e}},s.prototype.digest=function(){var a=this;return this.key?this.key.then(function(i){return(0,v.locateWindow)().crypto.subtle.sign(m.SHA_256_HMAC_ALGO,i,a.toHash).then(function(e){return new Uint8Array(e)})}):(0,u.isEmptyData)(this.toHash)?Promise.resolve(m.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,v.locateWindow)().crypto.subtle.digest(m.SHA_256_HASH,a.toHash)}).then(function(i){return Promise.resolve(new Uint8Array(i))})},s.prototype.reset=function(){var a=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(i,e){(0,v.locateWindow)().crypto.subtle.importKey("raw",(0,u.convertToBuffer)(a.secret),m.SHA_256_HMAC_ALGO,!1,["sign"]).then(i,e)}),this.key.catch(function(){}))},s}();l.Sha256=g},7681227474:(H,l,c)=>{"use strict";c.r(l),c.d(l,{__assign:()=>v,__asyncDelegator:()=>b,__asyncGenerator:()=>S,__asyncValues:()=>_,__await:()=>y,__awaiter:()=>e,__classPrivateFieldGet:()=>O,__classPrivateFieldSet:()=>D,__createBinding:()=>r,__decorate:()=>s,__exportStar:()=>o,__extends:()=>m,__generator:()=>t,__importDefault:()=>R,__importStar:()=>w,__makeTemplateObject:()=>C,__metadata:()=>i,__param:()=>a,__read:()=>h,__rest:()=>g,__spread:()=>p,__spreadArrays:()=>d,__values:()=>f});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var u=n(function(I,M){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,N){k.__proto__=N}||function(k,N){for(var j in N)N.hasOwnProperty(j)&&(k[j]=N[j])},u(I,M)},"extendStatics");function m(I,M){u(I,M);function k(){this.constructor=I}n(k,"__"),I.prototype=M===null?Object.create(M):(k.prototype=M.prototype,new k)}n(m,"__extends");var v=n(function(){return v=Object.assign||n(function(M){for(var k,N=1,j=arguments.length;N<j;N++){k=arguments[N];for(var B in k)Object.prototype.hasOwnProperty.call(k,B)&&(M[B]=k[B])}return M},"__assign"),v.apply(this,arguments)},"__assign");function g(I,M){var k={};for(var N in I)Object.prototype.hasOwnProperty.call(I,N)&&M.indexOf(N)<0&&(k[N]=I[N]);if(I!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,N=Object.getOwnPropertySymbols(I);j<N.length;j++)M.indexOf(N[j])<0&&Object.prototype.propertyIsEnumerable.call(I,N[j])&&(k[N[j]]=I[N[j]]);return k}n(g,"__rest");function s(I,M,k,N){var j=arguments.length,B=j<3?M:N===null?N=Object.getOwnPropertyDescriptor(M,k):N,J;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(I,M,k,N);else for(var Q=I.length-1;Q>=0;Q--)(J=I[Q])&&(B=(j<3?J(B):j>3?J(M,k,B):J(M,k))||B);return j>3&&B&&Object.defineProperty(M,k,B),B}n(s,"__decorate");function a(I,M){return function(k,N){M(k,N,I)}}n(a,"__param");function i(I,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(I,M)}n(i,"__metadata");function e(I,M,k,N){function j(B){return B instanceof k?B:new k(function(J){J(B)})}return n(j,"adopt"),new(k||(k=Promise))(function(B,J){function Q(he){try{$(N.next(he))}catch(Ae){J(Ae)}}n(Q,"fulfilled");function oe(he){try{$(N.throw(he))}catch(Ae){J(Ae)}}n(oe,"rejected");function $(he){he.done?B(he.value):j(he.value).then(Q,oe)}n($,"step"),$((N=N.apply(I,M||[])).next())})}n(e,"__awaiter");function t(I,M){var k={label:0,sent:function(){if(B[0]&1)throw B[1];return B[1]},trys:[],ops:[]},N,j,B,J;return J={next:Q(0),throw:Q(1),return:Q(2)},typeof Symbol=="function"&&(J[Symbol.iterator]=function(){return this}),J;function Q($){return function(he){return oe([$,he])}}function oe($){if(N)throw new TypeError("Generator is already executing.");for(;k;)try{if(N=1,j&&(B=$[0]&2?j.return:$[0]?j.throw||((B=j.return)&&B.call(j),0):j.next)&&!(B=B.call(j,$[1])).done)return B;switch(j=0,B&&($=[$[0]&2,B.value]),$[0]){case 0:case 1:B=$;break;case 4:return k.label++,{value:$[1],done:!1};case 5:k.label++,j=$[1],$=[0];continue;case 7:$=k.ops.pop(),k.trys.pop();continue;default:if(B=k.trys,!(B=B.length>0&&B[B.length-1])&&($[0]===6||$[0]===2)){k=0;continue}if($[0]===3&&(!B||$[1]>B[0]&&$[1]<B[3])){k.label=$[1];break}if($[0]===6&&k.label<B[1]){k.label=B[1],B=$;break}if(B&&k.label<B[2]){k.label=B[2],k.ops.push($);break}B[2]&&k.ops.pop(),k.trys.pop();continue}$=M.call(I,k)}catch(he){$=[6,he],j=0}finally{N=B=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}}n(t,"__generator");function r(I,M,k,N){N===void 0&&(N=k),I[N]=M[k]}n(r,"__createBinding");function o(I,M){for(var k in I)k!=="default"&&!M.hasOwnProperty(k)&&(M[k]=I[k])}n(o,"__exportStar");function f(I){var M=typeof Symbol=="function"&&Symbol.iterator,k=M&&I[M],N=0;if(k)return k.call(I);if(I&&typeof I.length=="number")return{next:function(){return I&&N>=I.length&&(I=void 0),{value:I&&I[N++],done:!I}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}n(f,"__values");function h(I,M){var k=typeof Symbol=="function"&&I[Symbol.iterator];if(!k)return I;var N=k.call(I),j,B=[],J;try{for(;(M===void 0||M-- >0)&&!(j=N.next()).done;)B.push(j.value)}catch(Q){J={error:Q}}finally{try{j&&!j.done&&(k=N.return)&&k.call(N)}finally{if(J)throw J.error}}return B}n(h,"__read");function p(){for(var I=[],M=0;M<arguments.length;M++)I=I.concat(h(arguments[M]));return I}n(p,"__spread");function d(){for(var I=0,M=0,k=arguments.length;M<k;M++)I+=arguments[M].length;for(var N=Array(I),j=0,M=0;M<k;M++)for(var B=arguments[M],J=0,Q=B.length;J<Q;J++,j++)N[j]=B[J];return N}n(d,"__spreadArrays");function y(I){return this instanceof y?(this.v=I,this):new y(I)}n(y,"__await");function S(I,M,k){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N=k.apply(I,M||[]),j,B=[];return j={},J("next"),J("throw"),J("return"),j[Symbol.asyncIterator]=function(){return this},j;function J(Ee){N[Ee]&&(j[Ee]=function(Oe){return new Promise(function(be,De){B.push([Ee,Oe,be,De])>1||Q(Ee,Oe)})})}function Q(Ee,Oe){try{oe(N[Ee](Oe))}catch(be){Ae(B[0][3],be)}}function oe(Ee){Ee.value instanceof y?Promise.resolve(Ee.value.v).then($,he):Ae(B[0][2],Ee)}function $(Ee){Q("next",Ee)}function he(Ee){Q("throw",Ee)}function Ae(Ee,Oe){Ee(Oe),B.shift(),B.length&&Q(B[0][0],B[0][1])}}n(S,"__asyncGenerator");function b(I){var M,k;return M={},N("next"),N("throw",function(j){throw j}),N("return"),M[Symbol.iterator]=function(){return this},M;function N(j,B){M[j]=I[j]?function(J){return(k=!k)?{value:y(I[j](J)),done:j==="return"}:B?B(J):J}:B}}n(b,"__asyncDelegator");function _(I){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=I[Symbol.asyncIterator],k;return M?M.call(I):(I=typeof f=="function"?f(I):I[Symbol.iterator](),k={},N("next"),N("throw"),N("return"),k[Symbol.asyncIterator]=function(){return this},k);function N(B){k[B]=I[B]&&function(J){return new Promise(function(Q,oe){J=I[B](J),j(Q,oe,J.done,J.value)})}}function j(B,J,Q,oe){Promise.resolve(oe).then(function($){B({value:$,done:Q})},J)}}n(_,"__asyncValues");function C(I,M){return Object.defineProperty?Object.defineProperty(I,"raw",{value:M}):I.raw=M,I}n(C,"__makeTemplateObject");function w(I){if(I&&I.__esModule)return I;var M={};if(I!=null)for(var k in I)Object.hasOwnProperty.call(I,k)&&(M[k]=I[k]);return M.default=I,M}n(w,"__importStar");function R(I){return I&&I.__esModule?I:{default:I}}n(R,"__importDefault");function O(I,M){if(!M.has(I))throw new TypeError("attempted to get private field on non-instance");return M.get(I)}n(O,"__classPrivateFieldGet");function D(I,M,k){if(!M.has(I))throw new TypeError("attempted to set private field on non-instance");return M.set(I,k),k}n(D,"__classPrivateFieldSet")},74119063:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.RawSha256=void 0;var u=c(173496611),m=function(){function v(){this.state=Int32Array.from(u.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return n(v,"RawSha256"),v.prototype.update=function(g){if(this.finished)throw new Error("Attempted to update an already finished hash.");var s=0,a=g.byteLength;if(this.bytesHashed+=a,this.bytesHashed*8>u.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;a>0;)this.buffer[this.bufferLength++]=g[s++],a--,this.bufferLength===u.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},v.prototype.digest=function(){if(!this.finished){var g=this.bytesHashed*8,s=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),a=this.bufferLength;if(s.setUint8(this.bufferLength++,128),a%u.BLOCK_SIZE>=u.BLOCK_SIZE-8){for(var i=this.bufferLength;i<u.BLOCK_SIZE;i++)s.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<u.BLOCK_SIZE-8;i++)s.setUint8(i,0);s.setUint32(u.BLOCK_SIZE-8,Math.floor(g/4294967296),!0),s.setUint32(u.BLOCK_SIZE-4,g),this.hashBuffer(),this.finished=!0}for(var e=new Uint8Array(u.DIGEST_LENGTH),i=0;i<8;i++)e[i*4]=this.state[i]>>>24&255,e[i*4+1]=this.state[i]>>>16&255,e[i*4+2]=this.state[i]>>>8&255,e[i*4+3]=this.state[i]>>>0&255;return e},v.prototype.hashBuffer=function(){for(var g=this,s=g.buffer,a=g.state,i=a[0],e=a[1],t=a[2],r=a[3],o=a[4],f=a[5],h=a[6],p=a[7],d=0;d<u.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(s[d*4]&255)<<24|(s[d*4+1]&255)<<16|(s[d*4+2]&255)<<8|s[d*4+3]&255;else{var y=this.temp[d-2],S=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10;y=this.temp[d-15];var b=(y>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;this.temp[d]=(S+this.temp[d-7]|0)+(b+this.temp[d-16]|0)}var _=(((o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+(o&f^~o&h)|0)+(p+(u.KEY[d]+this.temp[d]|0)|0)|0,C=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&e^i&t^e&t)|0;p=h,h=f,f=o,o=r+_|0,r=t,t=e,e=i,i=_+C|0}a[0]+=i,a[1]+=e,a[2]+=t,a[3]+=r,a[4]+=o,a[5]+=f,a[6]+=h,a[7]+=p},v}();l.RawSha256=m},173496611:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MAX_HASHABLE_LENGTH=l.INIT=l.KEY=l.DIGEST_LENGTH=l.BLOCK_SIZE=void 0,l.BLOCK_SIZE=64,l.DIGEST_LENGTH=32,l.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],l.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},9335813190:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var u=c(5267011713);u.__exportStar(c(6938232186),l)},6938232186:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var u=c(5267011713),m=c(173496611),v=c(74119063),g=c(6034816005),s=function(){function i(e){this.secret=e,this.hash=new v.RawSha256,this.reset()}return n(i,"Sha256"),i.prototype.update=function(e){if(!((0,g.isEmptyData)(e)||this.error))try{this.hash.update((0,g.convertToBuffer)(e))}catch(t){this.error=t}},i.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},i.prototype.digest=function(){return u.__awaiter(this,void 0,void 0,function(){return u.__generator(this,function(e){return[2,this.digestSync()]})})},i.prototype.reset=function(){if(this.hash=new v.RawSha256,this.secret){this.outer=new v.RawSha256;var e=a(this.secret),t=new Uint8Array(m.BLOCK_SIZE);t.set(e);for(var r=0;r<m.BLOCK_SIZE;r++)e[r]^=54,t[r]^=92;this.hash.update(e),this.outer.update(t);for(var r=0;r<e.byteLength;r++)e[r]=0}},i}();l.Sha256=s;function a(i){var e=(0,g.convertToBuffer)(i);if(e.byteLength>m.BLOCK_SIZE){var t=new v.RawSha256;t.update(e),e=t.digest()}var r=new Uint8Array(m.BLOCK_SIZE);return r.set(e),r}n(a,"bufferFromSecret")},5267011713:(H,l,c)=>{"use strict";c.r(l),c.d(l,{__assign:()=>v,__asyncDelegator:()=>b,__asyncGenerator:()=>S,__asyncValues:()=>_,__await:()=>y,__awaiter:()=>e,__classPrivateFieldGet:()=>O,__classPrivateFieldSet:()=>D,__createBinding:()=>r,__decorate:()=>s,__exportStar:()=>o,__extends:()=>m,__generator:()=>t,__importDefault:()=>R,__importStar:()=>w,__makeTemplateObject:()=>C,__metadata:()=>i,__param:()=>a,__read:()=>h,__rest:()=>g,__spread:()=>p,__spreadArrays:()=>d,__values:()=>f});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var u=n(function(I,M){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,N){k.__proto__=N}||function(k,N){for(var j in N)N.hasOwnProperty(j)&&(k[j]=N[j])},u(I,M)},"extendStatics");function m(I,M){u(I,M);function k(){this.constructor=I}n(k,"__"),I.prototype=M===null?Object.create(M):(k.prototype=M.prototype,new k)}n(m,"__extends");var v=n(function(){return v=Object.assign||n(function(M){for(var k,N=1,j=arguments.length;N<j;N++){k=arguments[N];for(var B in k)Object.prototype.hasOwnProperty.call(k,B)&&(M[B]=k[B])}return M},"__assign"),v.apply(this,arguments)},"__assign");function g(I,M){var k={};for(var N in I)Object.prototype.hasOwnProperty.call(I,N)&&M.indexOf(N)<0&&(k[N]=I[N]);if(I!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,N=Object.getOwnPropertySymbols(I);j<N.length;j++)M.indexOf(N[j])<0&&Object.prototype.propertyIsEnumerable.call(I,N[j])&&(k[N[j]]=I[N[j]]);return k}n(g,"__rest");function s(I,M,k,N){var j=arguments.length,B=j<3?M:N===null?N=Object.getOwnPropertyDescriptor(M,k):N,J;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(I,M,k,N);else for(var Q=I.length-1;Q>=0;Q--)(J=I[Q])&&(B=(j<3?J(B):j>3?J(M,k,B):J(M,k))||B);return j>3&&B&&Object.defineProperty(M,k,B),B}n(s,"__decorate");function a(I,M){return function(k,N){M(k,N,I)}}n(a,"__param");function i(I,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(I,M)}n(i,"__metadata");function e(I,M,k,N){function j(B){return B instanceof k?B:new k(function(J){J(B)})}return n(j,"adopt"),new(k||(k=Promise))(function(B,J){function Q(he){try{$(N.next(he))}catch(Ae){J(Ae)}}n(Q,"fulfilled");function oe(he){try{$(N.throw(he))}catch(Ae){J(Ae)}}n(oe,"rejected");function $(he){he.done?B(he.value):j(he.value).then(Q,oe)}n($,"step"),$((N=N.apply(I,M||[])).next())})}n(e,"__awaiter");function t(I,M){var k={label:0,sent:function(){if(B[0]&1)throw B[1];return B[1]},trys:[],ops:[]},N,j,B,J;return J={next:Q(0),throw:Q(1),return:Q(2)},typeof Symbol=="function"&&(J[Symbol.iterator]=function(){return this}),J;function Q($){return function(he){return oe([$,he])}}function oe($){if(N)throw new TypeError("Generator is already executing.");for(;k;)try{if(N=1,j&&(B=$[0]&2?j.return:$[0]?j.throw||((B=j.return)&&B.call(j),0):j.next)&&!(B=B.call(j,$[1])).done)return B;switch(j=0,B&&($=[$[0]&2,B.value]),$[0]){case 0:case 1:B=$;break;case 4:return k.label++,{value:$[1],done:!1};case 5:k.label++,j=$[1],$=[0];continue;case 7:$=k.ops.pop(),k.trys.pop();continue;default:if(B=k.trys,!(B=B.length>0&&B[B.length-1])&&($[0]===6||$[0]===2)){k=0;continue}if($[0]===3&&(!B||$[1]>B[0]&&$[1]<B[3])){k.label=$[1];break}if($[0]===6&&k.label<B[1]){k.label=B[1],B=$;break}if(B&&k.label<B[2]){k.label=B[2],k.ops.push($);break}B[2]&&k.ops.pop(),k.trys.pop();continue}$=M.call(I,k)}catch(he){$=[6,he],j=0}finally{N=B=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}}n(t,"__generator");function r(I,M,k,N){N===void 0&&(N=k),I[N]=M[k]}n(r,"__createBinding");function o(I,M){for(var k in I)k!=="default"&&!M.hasOwnProperty(k)&&(M[k]=I[k])}n(o,"__exportStar");function f(I){var M=typeof Symbol=="function"&&Symbol.iterator,k=M&&I[M],N=0;if(k)return k.call(I);if(I&&typeof I.length=="number")return{next:function(){return I&&N>=I.length&&(I=void 0),{value:I&&I[N++],done:!I}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}n(f,"__values");function h(I,M){var k=typeof Symbol=="function"&&I[Symbol.iterator];if(!k)return I;var N=k.call(I),j,B=[],J;try{for(;(M===void 0||M-- >0)&&!(j=N.next()).done;)B.push(j.value)}catch(Q){J={error:Q}}finally{try{j&&!j.done&&(k=N.return)&&k.call(N)}finally{if(J)throw J.error}}return B}n(h,"__read");function p(){for(var I=[],M=0;M<arguments.length;M++)I=I.concat(h(arguments[M]));return I}n(p,"__spread");function d(){for(var I=0,M=0,k=arguments.length;M<k;M++)I+=arguments[M].length;for(var N=Array(I),j=0,M=0;M<k;M++)for(var B=arguments[M],J=0,Q=B.length;J<Q;J++,j++)N[j]=B[J];return N}n(d,"__spreadArrays");function y(I){return this instanceof y?(this.v=I,this):new y(I)}n(y,"__await");function S(I,M,k){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N=k.apply(I,M||[]),j,B=[];return j={},J("next"),J("throw"),J("return"),j[Symbol.asyncIterator]=function(){return this},j;function J(Ee){N[Ee]&&(j[Ee]=function(Oe){return new Promise(function(be,De){B.push([Ee,Oe,be,De])>1||Q(Ee,Oe)})})}function Q(Ee,Oe){try{oe(N[Ee](Oe))}catch(be){Ae(B[0][3],be)}}function oe(Ee){Ee.value instanceof y?Promise.resolve(Ee.value.v).then($,he):Ae(B[0][2],Ee)}function $(Ee){Q("next",Ee)}function he(Ee){Q("throw",Ee)}function Ae(Ee,Oe){Ee(Oe),B.shift(),B.length&&Q(B[0][0],B[0][1])}}n(S,"__asyncGenerator");function b(I){var M,k;return M={},N("next"),N("throw",function(j){throw j}),N("return"),M[Symbol.iterator]=function(){return this},M;function N(j,B){M[j]=I[j]?function(J){return(k=!k)?{value:y(I[j](J)),done:j==="return"}:B?B(J):J}:B}}n(b,"__asyncDelegator");function _(I){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=I[Symbol.asyncIterator],k;return M?M.call(I):(I=typeof f=="function"?f(I):I[Symbol.iterator](),k={},N("next"),N("throw"),N("return"),k[Symbol.asyncIterator]=function(){return this},k);function N(B){k[B]=I[B]&&function(J){return new Promise(function(Q,oe){J=I[B](J),j(Q,oe,J.done,J.value)})}}function j(B,J,Q,oe){Promise.resolve(oe).then(function($){B({value:$,done:Q})},J)}}n(_,"__asyncValues");function C(I,M){return Object.defineProperty?Object.defineProperty(I,"raw",{value:M}):I.raw=M,I}n(C,"__makeTemplateObject");function w(I){if(I&&I.__esModule)return I;var M={};if(I!=null)for(var k in I)Object.hasOwnProperty.call(I,k)&&(M[k]=I[k]);return M.default=I,M}n(w,"__importStar");function R(I){return I&&I.__esModule?I:{default:I}}n(R,"__importDefault");function O(I,M){if(!M.has(I))throw new TypeError("attempted to get private field on non-instance");return M.get(I)}n(O,"__classPrivateFieldGet");function D(I,M,k){if(!M.has(I))throw new TypeError("attempted to set private field on non-instance");return M.set(I,k),k}n(D,"__classPrivateFieldSet")},4038070804:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var u=c(4482224279);u.__exportStar(c(9916139971),l)},9916139971:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.supportsZeroByteGCM=l.supportsSubtleCrypto=l.supportsSecureRandom=l.supportsWebCrypto=void 0;var u=c(4482224279),m=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function v(i){if(g(i)&&typeof i.crypto.subtle=="object"){var e=i.crypto.subtle;return s(e)}return!1}n(v,"supportsWebCrypto"),l.supportsWebCrypto=v;function g(i){if(typeof i=="object"&&typeof i.crypto=="object"){var e=i.crypto.getRandomValues;return typeof e=="function"}return!1}n(g,"supportsSecureRandom"),l.supportsSecureRandom=g;function s(i){return i&&m.every(function(e){return typeof i[e]=="function"})}n(s,"supportsSubtleCrypto"),l.supportsSubtleCrypto=s;function a(i){return u.__awaiter(this,void 0,void 0,function(){var e,t,r;return u.__generator(this,function(o){switch(o.label){case 0:if(!s(i))return[2,!1];o.label=1;case 1:return o.trys.push([1,4,,5]),[4,i.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return e=o.sent(),[4,i.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},e,new Uint8Array(0))];case 3:return t=o.sent(),[2,t.byteLength===16];case 4:return r=o.sent(),[2,!1];case 5:return[2]}})})}n(a,"supportsZeroByteGCM"),l.supportsZeroByteGCM=a},4482224279:(H,l,c)=>{"use strict";c.r(l),c.d(l,{__assign:()=>v,__asyncDelegator:()=>b,__asyncGenerator:()=>S,__asyncValues:()=>_,__await:()=>y,__awaiter:()=>e,__classPrivateFieldGet:()=>O,__classPrivateFieldSet:()=>D,__createBinding:()=>r,__decorate:()=>s,__exportStar:()=>o,__extends:()=>m,__generator:()=>t,__importDefault:()=>R,__importStar:()=>w,__makeTemplateObject:()=>C,__metadata:()=>i,__param:()=>a,__read:()=>h,__rest:()=>g,__spread:()=>p,__spreadArrays:()=>d,__values:()=>f});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var u=n(function(I,M){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,N){k.__proto__=N}||function(k,N){for(var j in N)N.hasOwnProperty(j)&&(k[j]=N[j])},u(I,M)},"extendStatics");function m(I,M){u(I,M);function k(){this.constructor=I}n(k,"__"),I.prototype=M===null?Object.create(M):(k.prototype=M.prototype,new k)}n(m,"__extends");var v=n(function(){return v=Object.assign||n(function(M){for(var k,N=1,j=arguments.length;N<j;N++){k=arguments[N];for(var B in k)Object.prototype.hasOwnProperty.call(k,B)&&(M[B]=k[B])}return M},"__assign"),v.apply(this,arguments)},"__assign");function g(I,M){var k={};for(var N in I)Object.prototype.hasOwnProperty.call(I,N)&&M.indexOf(N)<0&&(k[N]=I[N]);if(I!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,N=Object.getOwnPropertySymbols(I);j<N.length;j++)M.indexOf(N[j])<0&&Object.prototype.propertyIsEnumerable.call(I,N[j])&&(k[N[j]]=I[N[j]]);return k}n(g,"__rest");function s(I,M,k,N){var j=arguments.length,B=j<3?M:N===null?N=Object.getOwnPropertyDescriptor(M,k):N,J;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(I,M,k,N);else for(var Q=I.length-1;Q>=0;Q--)(J=I[Q])&&(B=(j<3?J(B):j>3?J(M,k,B):J(M,k))||B);return j>3&&B&&Object.defineProperty(M,k,B),B}n(s,"__decorate");function a(I,M){return function(k,N){M(k,N,I)}}n(a,"__param");function i(I,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(I,M)}n(i,"__metadata");function e(I,M,k,N){function j(B){return B instanceof k?B:new k(function(J){J(B)})}return n(j,"adopt"),new(k||(k=Promise))(function(B,J){function Q(he){try{$(N.next(he))}catch(Ae){J(Ae)}}n(Q,"fulfilled");function oe(he){try{$(N.throw(he))}catch(Ae){J(Ae)}}n(oe,"rejected");function $(he){he.done?B(he.value):j(he.value).then(Q,oe)}n($,"step"),$((N=N.apply(I,M||[])).next())})}n(e,"__awaiter");function t(I,M){var k={label:0,sent:function(){if(B[0]&1)throw B[1];return B[1]},trys:[],ops:[]},N,j,B,J;return J={next:Q(0),throw:Q(1),return:Q(2)},typeof Symbol=="function"&&(J[Symbol.iterator]=function(){return this}),J;function Q($){return function(he){return oe([$,he])}}function oe($){if(N)throw new TypeError("Generator is already executing.");for(;k;)try{if(N=1,j&&(B=$[0]&2?j.return:$[0]?j.throw||((B=j.return)&&B.call(j),0):j.next)&&!(B=B.call(j,$[1])).done)return B;switch(j=0,B&&($=[$[0]&2,B.value]),$[0]){case 0:case 1:B=$;break;case 4:return k.label++,{value:$[1],done:!1};case 5:k.label++,j=$[1],$=[0];continue;case 7:$=k.ops.pop(),k.trys.pop();continue;default:if(B=k.trys,!(B=B.length>0&&B[B.length-1])&&($[0]===6||$[0]===2)){k=0;continue}if($[0]===3&&(!B||$[1]>B[0]&&$[1]<B[3])){k.label=$[1];break}if($[0]===6&&k.label<B[1]){k.label=B[1],B=$;break}if(B&&k.label<B[2]){k.label=B[2],k.ops.push($);break}B[2]&&k.ops.pop(),k.trys.pop();continue}$=M.call(I,k)}catch(he){$=[6,he],j=0}finally{N=B=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}}n(t,"__generator");function r(I,M,k,N){N===void 0&&(N=k),I[N]=M[k]}n(r,"__createBinding");function o(I,M){for(var k in I)k!=="default"&&!M.hasOwnProperty(k)&&(M[k]=I[k])}n(o,"__exportStar");function f(I){var M=typeof Symbol=="function"&&Symbol.iterator,k=M&&I[M],N=0;if(k)return k.call(I);if(I&&typeof I.length=="number")return{next:function(){return I&&N>=I.length&&(I=void 0),{value:I&&I[N++],done:!I}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}n(f,"__values");function h(I,M){var k=typeof Symbol=="function"&&I[Symbol.iterator];if(!k)return I;var N=k.call(I),j,B=[],J;try{for(;(M===void 0||M-- >0)&&!(j=N.next()).done;)B.push(j.value)}catch(Q){J={error:Q}}finally{try{j&&!j.done&&(k=N.return)&&k.call(N)}finally{if(J)throw J.error}}return B}n(h,"__read");function p(){for(var I=[],M=0;M<arguments.length;M++)I=I.concat(h(arguments[M]));return I}n(p,"__spread");function d(){for(var I=0,M=0,k=arguments.length;M<k;M++)I+=arguments[M].length;for(var N=Array(I),j=0,M=0;M<k;M++)for(var B=arguments[M],J=0,Q=B.length;J<Q;J++,j++)N[j]=B[J];return N}n(d,"__spreadArrays");function y(I){return this instanceof y?(this.v=I,this):new y(I)}n(y,"__await");function S(I,M,k){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N=k.apply(I,M||[]),j,B=[];return j={},J("next"),J("throw"),J("return"),j[Symbol.asyncIterator]=function(){return this},j;function J(Ee){N[Ee]&&(j[Ee]=function(Oe){return new Promise(function(be,De){B.push([Ee,Oe,be,De])>1||Q(Ee,Oe)})})}function Q(Ee,Oe){try{oe(N[Ee](Oe))}catch(be){Ae(B[0][3],be)}}function oe(Ee){Ee.value instanceof y?Promise.resolve(Ee.value.v).then($,he):Ae(B[0][2],Ee)}function $(Ee){Q("next",Ee)}function he(Ee){Q("throw",Ee)}function Ae(Ee,Oe){Ee(Oe),B.shift(),B.length&&Q(B[0][0],B[0][1])}}n(S,"__asyncGenerator");function b(I){var M,k;return M={},N("next"),N("throw",function(j){throw j}),N("return"),M[Symbol.iterator]=function(){return this},M;function N(j,B){M[j]=I[j]?function(J){return(k=!k)?{value:y(I[j](J)),done:j==="return"}:B?B(J):J}:B}}n(b,"__asyncDelegator");function _(I){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=I[Symbol.asyncIterator],k;return M?M.call(I):(I=typeof f=="function"?f(I):I[Symbol.iterator](),k={},N("next"),N("throw"),N("return"),k[Symbol.asyncIterator]=function(){return this},k);function N(B){k[B]=I[B]&&function(J){return new Promise(function(Q,oe){J=I[B](J),j(Q,oe,J.done,J.value)})}}function j(B,J,Q,oe){Promise.resolve(oe).then(function($){B({value:$,done:Q})},J)}}n(_,"__asyncValues");function C(I,M){return Object.defineProperty?Object.defineProperty(I,"raw",{value:M}):I.raw=M,I}n(C,"__makeTemplateObject");function w(I){if(I&&I.__esModule)return I;var M={};if(I!=null)for(var k in I)Object.hasOwnProperty.call(I,k)&&(M[k]=I[k]);return M.default=I,M}n(w,"__importStar");function R(I){return I&&I.__esModule?I:{default:I}}n(R,"__importDefault");function O(I,M){if(!M.has(I))throw new TypeError("attempted to get private field on non-instance");return M.get(I)}n(O,"__classPrivateFieldGet");function D(I,M,k){if(!M.has(I))throw new TypeError("attempted to set private field on non-instance");return M.set(I,k),k}n(D,"__classPrivateFieldSet")},4927009193:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertToBuffer=void 0;var u=c(2412280125),m=typeof Buffer<"u"&&Buffer.from?function(g){return Buffer.from(g,"utf8")}:u.fromUtf8;function v(g){return g instanceof Uint8Array?g:typeof g=="string"?m(g):ArrayBuffer.isView(g)?new Uint8Array(g.buffer,g.byteOffset,g.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(g)}n(v,"convertToBuffer"),l.convertToBuffer=v},6034816005:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=l.numToUint8=l.isEmptyData=l.convertToBuffer=void 0;var u=c(4927009193);Object.defineProperty(l,"convertToBuffer",{enumerable:!0,get:function(){return u.convertToBuffer}});var m=c(2723880444);Object.defineProperty(l,"isEmptyData",{enumerable:!0,get:function(){return m.isEmptyData}});var v=c(7171524732);Object.defineProperty(l,"numToUint8",{enumerable:!0,get:function(){return v.numToUint8}});var g=c(3216375755);Object.defineProperty(l,"uint32ArrayFrom",{enumerable:!0,get:function(){return g.uint32ArrayFrom}})},2723880444:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isEmptyData=void 0;function c(u){return typeof u=="string"?u.length===0:u.byteLength===0}n(c,"isEmptyData"),l.isEmptyData=c},7171524732:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.numToUint8=void 0;function c(u){return new Uint8Array([(u&4278190080)>>24,(u&16711680)>>16,(u&65280)>>8,u&255])}n(c,"numToUint8"),l.numToUint8=c},3216375755:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=void 0;function c(u){if(!Uint32Array.from){for(var m=new Uint32Array(u.length),v=0;v<u.length;)m[v]=u[v],v+=1;return m}return Uint32Array.from(u)}n(c,"uint32ArrayFrom"),l.uint32ArrayFrom=c},5244168417:(H,l,c)=>{"use strict";c.r(l),c.d(l,{AiActionType:()=>ki,AutocompleteActions:()=>it,CalloutBackgroundColor:()=>Vo,CalloutModificationProperty:()=>or,CollabApi:()=>hi,CollabPopoverDismissSource:()=>Jt,CollabUrlType:()=>Xn,CommentFocusTarget:()=>Ur,CommentLevel:()=>zr,CommentUIContext:()=>io,DialogContext:()=>kt,DocBlockStyle:()=>Y,DocInlineStyle:()=>Dt,EmbeddedMoveDirection:()=>Bi,EmbeddedObjectType:()=>Zn,EmbeddedUIAttributes:()=>qi,EmbeddedUiAction:()=>Or,EmbeddedUiContext:()=>mr,ErrorSource:()=>ir,Feature:()=>Ke,FullTableModification:()=>Vi,GetSlackObjectFailureReason:()=>Ye,GrafterUrls:()=>i,InlineFormattingType:()=>et,NavigationTypeMetric:()=>xe,PlaceholderInsertionType:()=>pi,RichTextMessageAction:()=>$r,SectionInsertionType:()=>Ni,ShortcutModifier:()=>vt,SlackListContentRenderType:()=>Xt,SlackObjectActionType:()=>pr,SlackObjectType:()=>x,SlackShortcutCommandType:()=>ft,SlackShortcutMetricSource:()=>ge,SlackUnfurlContentRenderType:()=>pn,TablePart:()=>Gn,TablePartModificationType:()=>yo,TableSelectionAction:()=>Zo,TableSelectionModification:()=>no,TemplateControlAction:()=>wo,TemplateType:()=>ur,ToastMessageContext:()=>nn,UnfurlType:()=>Dn});class u{constructor(){this.o=!1,this._=[]}run(){this.o=!0;const we=this._;this._=[];for(let ct=0;ct<we.length;ct++)we[ct]()}add(we){this.o?we():this._.push(we)}}n(u,"t");var m,v;(function(V){var we;(we=V.Op||(V.Op={}))[we.DID_INITIALIZE=8]="DID_INITIALIZE",we[we.DID_FAIL_TO_INITIALIZE=9]="DID_FAIL_TO_INITIALIZE"})(m||(m={})),function(V){var we;(we=V.Op||(V.Op={}))[we.INIT=0]="INIT"}(v||(v={}));class g{constructor(we){this.l=new Map,this.u=null,this.destinationFn=we}setTransportHook(we){this.u=we}tearDown(){}addHandler(we,ct){this.l.has(we)&&this.logError(`Already had handler for op ${we} will overwrite.`),this.l.set(we,ct)}getHandler(we){const ct=this.l.get(we);return ct?this.u?(Wt,On)=>{var fi;return(fi=this.u)===null||fi===void 0||fi.call(this,we,Wt,a.INCOMING),ct(Wt,Li=>{var gi;return(gi=this.u)===null||gi===void 0||gi.call(this,we,Li,a.OUTGOING_REPLY),On(Li)})}:ct:null}invoke(we,ct,Wt){var On;if((On=this.u)===null||On===void 0||On.call(this,we,ct,a.OUTGOING),this.u&&Wt){const gi=Wt;Wt=n(Mi=>{var Oi;(Oi=this.u)===null||Oi===void 0||Oi.call(this,we,Mi,a.INCOMING_REPLY),gi(Mi)},"i")}const fi=this.destinationFn().getHandler(we);if(!fi)return void this.logError(`Bridge transport doesn't have handler for op ${we}`);let Li;try{Li=fi(ct,gi=>{Wt?Wt(gi):this.logError(`Invoke response received without callback for op ${we}`)})}catch{s(we,ct)}Li instanceof Promise&&Li.catch(gi=>s(we,ct))}logError(we){}}n(g,"n");let s=n((V,we,ct)=>{let Wt="";try{Wt=JSON.stringify(we)}catch{Wt="(Unserializable message)"}},"s");var a,i,e;function t(V){return V?`${function(){var we;const ct=(we=new URLSearchParams(location.search).get("quip_js_path"))!==null&&we!==void 0?we:void 0;return ct&&/^remote-dev\d{4}$/.test(ct)?`https://app.${ct.split("-")[1]}.slack.com`:location.origin}()}${i.RDEVS_CONTROLLER_JS_PATH}`:i.CONTROLLER_JS}n(t,"_");function r(V){if(!V)return!1;const we=V.indexOf(location.origin+"/")!=0,ct=V.includes("/canvas-rdev/collab/");return we&&ct}n(r,"l"),function(V){V[V.INCOMING=1]="INCOMING",V[V.INCOMING_REPLY=2]="INCOMING_REPLY",V[V.OUTGOING=3]="OUTGOING",V[V.OUTGOING_REPLY=4]="OUTGOING_REPLY"}(a||(a={})),function(V){V.CONTROLLER_CSS="https://quip.codes/-/static/less/stylesheet/-?retina=True&mode=normal&less=collab%2Fcontroller.less",V.CONTROLLER_JS="https://slackdocs.codes:3000/ts/src/collab/controller/bundle.ts",V.EMBEDDED_JS="https://slackdocs.codes/-/static-script-files?grafted=True&resource_bundle_name=collab_embedded",V.RDEVS_EMBEDDED_JS_PATH="/canvas-rdev/collab/grafted/embedded?grafted=True&resource_bundle_name=collab_embedded",V.RDEVS_CONTROLLER_CSS_PATH="/canvas-rdev/collab/grafted/style?retina=True&mode=normal&less=collab%2Fcontroller.less",V.RDEVS_CONTROLLER_JS_PATH="/canvas-rdev/collab/canvas-remote-dev-vite?path=ts/src/collab/controller/bundle.ts"}(i||(i={})),function(V){V.BRIDGE_TRANSPORT_SET="bridge-transport-set",V.BRIDGE_TRANSPORT_READY="bridge-transport-ready",V.HANDLER_REGISTERED="handler-registered",V.HANDLER_REGISTRATION_FINISHED="handler_registration_finished",V.MESSAGE_SENT="message_sent",V.MESSAGE_HANDLED="message-handled",V.INIT_SENT="init_sent",V.INIT_RECEIVED="init_received",V.DID_INIT_SENT="did_init_sent",V.DID_INIT_RECEIVED="did_init_received",V.BRIDGE_OPEN="bridge-open",V.ERROR="error",V.SYSTEMJS_LOADED="systemjs-loaded",V.CONTROLLER_SYSTEMJS_MODULE_IMPORTED="controller-systemjs-imported",V.CONTROLLER_INIT_DATA_FETCHED="controller-init-data-fetched",V.CONTROLLER_RESOURCE_DATA_FETCHED="controller-resource-data-fetched",V.PROBE="probe",V.OTHER="misc"}(e||(e={}));class o{constructor(we){this.T=we,this.A=[],this.S=[],this.O=[],this.N=[],this.I=[],this.L=Date.now(),this.onlyBefore("Handler registered late",e.HANDLER_REGISTERED,[e.HANDLER_REGISTRATION_FINISHED]),this.onlyAfter("Message sent before bridge open",e.MESSAGE_SENT,[e.BRIDGE_OPEN]),this.onlyAfter("Message handled before bridge open",e.MESSAGE_HANDLED,[e.BRIDGE_OPEN])}getTimeoutForPromise(){return o.TIMEOUT_FOR_PROMISE}fireEvent(we,ct=null){if(this.S.filter(On=>On.beforeEvent==we).forEach(On=>{On.afterEvents.some(fi=>this.A.includes(fi))&&On.message&&this.C(`${this.T}: ${On.message}`)}),this.O.filter(On=>On.afterEvent==we).forEach(On=>{On.beforeEvents.some(fi=>!this.A.includes(fi))&&On.message&&this.C(`${this.T}: ${On.message}`)}),we!=e.HANDLER_REGISTERED&&this.C(ct?Promise.resolve(ct).then(On=>`${we}: ${On}`):we),this.A.includes(we))return;this.A.push(we);const Wt=[];this.N=this.N.filter(On=>!On.events.every(fi=>this.A.includes(fi))||(Wt.push(On),!1)),Wt.forEach(On=>{On.description&&this.C(`${we} -> ${On.description}`),On.callback()})}after(we,ct,Wt=null){we.every(On=>this.A.includes(On))?ct():(Wt&&this.C(`${Wt} deferred`),this.N.push({events:we,description:Wt,callback:ct}))}onlyBefore(we,ct,Wt){this.S.push({beforeEvent:ct,afterEvents:Wt,message:we})}onlyAfter(we,ct,Wt){this.O.push({beforeEvents:Wt,afterEvent:ct,message:we})}C(we){if(this.I.length>o.MAX_INIT_LOG)return;const ct=Date.now()-this.L,Wt=Promise.resolve(we);this.I.push({timestamp:ct,message:Wt}),Wt.then(On=>{console.debug(`${this.T}: ${On}`)})}getInitLog(we){const ct=(we?this.I.slice(0,we):this.I).map(async Wt=>({t:Wt.timestamp,e:await Wt.message}));return Promise.all(ct).then(Wt=>({id:this.T,log:Wt}))}}n(o,"c"),o.MAX_INIT_LOG=50,o.TIMEOUT_FOR_PROMISE=3e4;function f(V,{logCallback:we=n(()=>{},"e"),timeoutMillis:ct=3e4,name:Wt="Unnamed",context:On=""}={}){return new Promise((fi,Li)=>{let gi=window.setTimeout(()=>{gi=null,we(`${Wt} promise timed out: ${On}`),Li(new Error(`${Wt} promise timed out`))},ct);const Mi=n(()=>{gi&&(clearTimeout(gi),gi=null)},"_");V.then(Oi=>{gi?(Mi(),fi(Oi)):we(`${Wt} promise resolved after timeout: ${On}`)}).catch(Oi=>{gi?(Mi(),Li(Oi)):we(`${Wt} promise rejected after timeout: ${On}`)})})}n(f,"a");function h(V,we,ct,Wt,On){const{span:fi,closeSpanFn:Li}=Wt.createBasicTraceSpan(On,ct,{[Ht.URL]:V}),{closeSpanFn:gi}=Wt.createBasicTraceSpan(fi,Ot.HTTP_FETCH_HEADER),Mi=new AbortController,Oi=setTimeout(()=>{Mi.abort()},Wt.bridgeInit.getTimeoutForPromise());return fetch(V,Object.assign({signal:Mi.signal},we)).catch(Yi=>{throw gi(Yi),Error(`${ct} fetch failed: ${Yi}`)}).then(Yi=>{if(clearTimeout(Oi),!Yi.ok)return gi(new Error(`returned ${Yi.status}`)),d(Wt,ct,Yi,fi).then(wr=>{throw Error(wr)});gi();const{closeSpanFn:Cr}=Wt.createBasicTraceSpan(fi,Ot.HTTP_FETCH_CONTENT,{[Ht.URL]:V});return Yi.text().catch(wr=>{throw Cr(wr),wr}).then(wr=>{Cr();const{closeSpanFn:Kr}=Wt.createBasicTraceSpan(fi,Ot.JSON_PARSE);try{const bo=JSON.parse(wr);return Kr(),bo}catch(bo){throw Kr(new Error(`${bo}`)),Wt.bridgeInit.fireEvent(e.ERROR,d(Wt,ct,Yi,null)),bo}})}).finally(()=>{Li()})}n(h,"h");function p(V,we,ct,Wt,On=!1){const fi=new AbortController,Li=setTimeout(()=>{fi.abort()},ct.bridgeInit.getTimeoutForPromise());ct.bridgeInit.fireEvent(e.OTHER,`${we} prefetch start`);const{span:gi,closeSpanFn:Mi}=ct.createBasicTraceSpan(Wt,Ot.MODULE_PREFETCH,{[Ht.URL]:V}),{closeSpanFn:Oi}=ct.createBasicTraceSpan(gi,Ot.HTTP_FETCH_HEADER),Yi={method:"GET",mode:"cors",cache:"default",signal:fi.signal};return On&&(Yi.credentials="include"),fetch(V,Yi).catch(Cr=>{throw Oi(Cr),Error(`${we} fetch failed: ${Cr}`)}).then(Cr=>{if(!Cr.ok)return Oi(new Error(`Returned ${Cr.status}`)),d(ct,we,Cr,gi).then(Kr=>{throw Error(Kr)});Oi();const{closeSpanFn:wr}=ct.createBasicTraceSpan(gi,Ot.HTTP_FETCH_CONTENT);return Cr.text().then(()=>{wr(),ct.bridgeInit.fireEvent(e.OTHER,`${we} prefetch ok`)}).catch(Kr=>{throw wr(Kr),Kr})}).finally(()=>{Mi(),clearTimeout(Li)})}n(p,"d");function d(V,we,ct,Wt){const{closeSpanFn:On}=V.createBasicTraceSpan(Wt,Ot.HTTP_FETCH_CONTENT);return ct.text().then(fi=>{const Li=function(Mi){if(!Mi||Mi.trim().length==0)return"response body empty";try{const Oi=new DOMParser().parseFromString(Mi,"text/html").documentElement.textContent;if(Oi&&Oi.trim().length>0)return Oi.trim().replace(/\s+/g," ").slice(0,50)}catch{}return Mi.trim().slice(0,50)}(fi),gi=`${we} fetch returned ${ct.status}: ${Li}`;return On(new Error(gi)),gi}).catch(fi=>{const Li=`${we} fetch returned ${ct.status}: response body unavailable (${fi})`;return On(new Error(Li)),Li})}n(d,"u");function y(V,we,ct){let Wt=null;const{id:On,promise:fi}=function(Mi){const Oi=Symbol(),Yi=new Promise(Cr=>{N.push({id:Oi,callback:wr=>{Mi(),Cr(wr)}})});return j||(j=!0,window._collabInit=Cr=>{var wr;(wr=N.shift())===null||wr===void 0||wr.callback(Cr)}),{promise:Yi,id:Oi}}(()=>{var Mi,Oi;(Oi=(Mi=V==null?void 0:V.platformDelegate)===null||Mi===void 0?void 0:Mi.endTraceOrSpan)===null||Oi===void 0||Oi.call(Mi,Wt)}),Li=fi.then(Mi=>(V.bridgeInit.fireEvent(e.OTHER,"_collabInit called"),Mi));return function(Mi,Oi,Yi){return Oi.then(Cr=>{if(Cr.module_loader_url==null)throw Error("No module loader URL.  Server likely isn't in SystemJS mode.");const{span:wr,closeSpanFn:Kr}=Mi.createBasicTraceSpan(Yi,Ot.LOAD_CONTROLLER),bo=Mi.config.useGraftedMode?t(Mi.config.isRemoteGraftingMode):Cr.controller_entry_module_url;return function(ia,Fo,zi,co){zi&&(k=zi);const Zr=ia.bridgeInit;if(R){const qo=w;return Zr.fireEvent(e.OTHER,`Collab ${qo} is loading systemjs, reusing the promise`),R.then(()=>{Zr.fireEvent(e.OTHER,`Systemjs promise reused from collab ${qo} succeeded`)}).catch(ca=>{throw Zr.fireEvent(e.ERROR,`Systemjs promise reused from collab ${qo} failed: ${ca}`),ca})}let Ao,No=null;if(O())Zr.fireEvent(e.OTHER,"systemjs already loaded, running prepareImport"),No="System.prepareImport() promise resolved",Ao=f(System.prepareImport(!0),{name:"System.prepareImport",timeoutMillis:Zr.getTimeoutForPromise()});else{Zr.fireEvent(e.OTHER,"No SystemJS found, loading it");const{span:qo,closeSpanFn:ca}=ia.createBasicTraceSpan(co,Ot.LOAD_SYSTEMJS,{[Ht.JS_PREFETCH_ENABLED]:"true",[Ht.URL]:Fo});No="systemjs script tag onload fired",Ao=function(Bo,ba,Ho){return p(ba,"systemjs-module-loader",Bo,Ho,r(ba)).then(()=>{const Fe=document.createElement("script");return new Promise((tt,It)=>{const{closeSpanFn:Qt}=Bo.createBasicTraceSpan(Ho,Ot.SCRIPT_TAG);Fe.src=ba,Fe.defer=!0,Fe.crossOrigin="anonymous",Fe.onload=()=>{Qt(),tt()},Fe.onerror=cn=>{const fn=Error(`systemjs onerror called: ${cn}`);Qt(fn),It(fn)},document.body.appendChild(Fe)}).then(()=>{if(!O())throw Error("SystemJS not found after it was loaded")}).catch(tt=>{throw typeof System=="object"&&(delete window.System,Bo.bridgeInit.fireEvent(e.OTHER,"Cleaned up systemjs global object")),Fe.onload=null,Fe.onerror=null,Fe.parentNode&&(Fe.parentNode.removeChild(Fe),Bo.bridgeInit.fireEvent(e.OTHER,"Cleaned up systemjs loader script tag")),tt})})}(ia,Fo,qo).finally(()=>{ca()})}return w=ia.id,R=Ao.then(()=>{Zr.fireEvent(e.SYSTEMJS_LOADED,No)}).finally(()=>{R=null,w=null}),R}(Mi,Cr.module_loader_url,Cr.import_map,wr).then(()=>{var ia,Fo;return _(bo,(Fo=(ia=Cr.import_map)===null||ia===void 0?void 0:ia.imports)!==null&&Fo!==void 0?Fo:{},Mi,wr)}).finally(()=>{Kr()})})}(V,we,ct).then(()=>{var Mi,Oi,Yi;return Wt=(Yi=(Oi=(Mi=V==null?void 0:V.platformDelegate)===null||Mi===void 0?void 0:Mi.startSpan)===null||Oi===void 0?void 0:Oi.call(Mi,ct,Ot.AWAIT_CALLBACK))!==null&&Yi!==void 0?Yi:null,f(Li,{name:"_collabInit callback",timeoutMillis:V.bridgeInit.getTimeoutForPromise()}).catch(Cr=>{var wr,Kr;throw(Kr=(wr=V==null?void 0:V.platformDelegate)===null||wr===void 0?void 0:wr.endTraceOrSpan)===null||Kr===void 0||Kr.call(wr,Wt,{[Ht.ERROR]:`${Cr}`}),Cr})}).catch(Mi=>{var Oi;throw Oi=On,N=N.filter(Yi=>Yi.id!==Oi),Mi})}n(y,"T");let S=null,b=null;function _(V,we,ct,Wt){var On;const fi=ct.bridgeInit;if(b){const Oi=S;return fi.fireEvent(e.OTHER,`Collab ${Oi} is loading the controller, waiting for it to finish...`),b.then(()=>(fi.fireEvent(e.OTHER,`Collab ${Oi} module loading complete`),_(V,we,ct,Wt))).catch(Yi=>(fi.fireEvent(e.OTHER,`Collab ${Oi} module loading failed`),_(V,we,ct,Wt)))}if(fi.fireEvent(e.OTHER,"Loading controller module"),System.fork===void 0)return Promise.reject(Error("SystemJS is missing the fork() method"));if(ct.config.useSystemJsSharedFork&&!M){const Oi=((On=Object.entries(we).find(([Yi])=>Yi.endsWith("-ancillary.js")))===null||On===void 0?void 0:On[1])||null;M=Oi?System.sharedFork([Oi]):null}const Li=System.fork(we,M);fi.fireEvent(e.OTHER,`controller module${System.isAlreadyLoaded(V)?" ":" not "}in systemjs cache`);const{span:gi,closeSpanFn:Mi}=ct.createBasicTraceSpan(Wt,Ot.LOAD_CONTROLLER_MODULE,{[Ht.JS_PREFETCH_ENABLED]:"true",[Ht.URL]:V});return b=p(V,"controller-module",ct,gi,r(V)).then(()=>{const{closeSpanFn:Oi}=ct.createBasicTraceSpan(gi,Ot.SYSTEMJS_IMPORT_MODULE,{[Ht.URL]:V}),Yi=[],Cr=new MutationObserver(wr=>{Yi.push(...C(wr))});return Cr.observe(document.head,{childList:!0}),Li.import(V).then(()=>{Oi(),fi.fireEvent(e.CONTROLLER_SYSTEMJS_MODULE_IMPORTED)}).catch(wr=>{Oi(wr),Yi.push(...C(Cr.takeRecords()));let Kr=0;throw Yi.forEach(bo=>{bo.onload=null,bo.onerror=null,bo.parentNode&&(bo.parentNode.removeChild(bo),Kr++)}),Kr>0&&fi.fireEvent(e.OTHER,`Cleaned up ${Kr} SystemJS script tags`),System.resetInstantiationCache()&&fi.fireEvent(e.OTHER,"SystemJS cache cleared"),wr}).finally(()=>{Cr.disconnect()})}).finally(()=>{Mi(),S=null,b=null}),S=ct.id,b}n(_,"O");function C(V){const we=[];return V.forEach(ct=>{ct.addedNodes.forEach(Wt=>{Wt instanceof HTMLScriptElement&&Wt.getAttribute("systemjs")==="1"&&we.push(Wt)})}),we}n(C,"N");let w=null,R=null;function O(){return typeof System=="object"&&typeof System.register=="function"}n(O,"C");function D(){if(!k)return console.warn("No import map data found"),[];const V=k.imports;return!V||typeof V!="object"?(console.warn("Imports property missing from importMapsData"),[]):Object.values(V).filter(we=>typeof we=="string"||we instanceof String)}n(D,"R");const I={};let M,k,N=[],j=!1,B=null;class J extends g{constructor(we,ct){super(ct),this.R=we,this.D=we.bridgeInit,this.m()}tearDown(){super.tearDown()}M(we){var ct,Wt;console.error("EmbeddedSameOriginBridgeTransport did not load",we),we&&console.error(we.stack),this.D.fireEvent(e.ERROR,`Failure constructing EmbeddedSameOriginBridgeTransport: ${we}`),(Wt=(ct=this.R.config.delegate)===null||ct===void 0?void 0:ct.didFailToInitialize)===null||Wt===void 0||Wt.call(ct,"exception",we)}m(){var we,ct,Wt;const On=(Wt=(ct=(we=this.R.platformDelegate)===null||we===void 0?void 0:we.startTrace)===null||ct===void 0?void 0:ct.call(we,Ot.COLLAB_INIT,{[Ht.CONTROLLER_ID]:`${this.R.id}`}))!==null&&Wt!==void 0?Wt:null,fi=function(gi,Mi){const Oi=new FormData,{authToken:Yi,userJwt:Cr,getSlackToken:wr,isGov:Kr,isPreload:bo}=gi.config;Yi&&Oi.append("oauth_token",Yi),Cr&&Oi.append("user_jwt",Cr),wr&&Oi.append("token",wr()),bo&&Oi.append("canvas_loadshed_priority","low");const ia=gi.config.xhrWithCredentials===!0?"include":void 0,Fo=h(`${Mt(gi)}/collab/controller-init?format=map`,{method:"POST",body:Oi,credentials:ia},Ot.CONTROLLER_INIT,gi,Mi).then(Zr=>(gi.bridgeInit.fireEvent(e.CONTROLLER_INIT_DATA_FETCHED),Zr)),zi=window.QUIP_VERSION_NAME||"server",co=new URLSearchParams([["version-name",zi]]);return gi.config.language&&co.append("language-code",gi.config.language),co.append("cdn_fallback",`${gi.getAttemptNumber()}`),Kr&&co.append("serve_gov","1"),B=h(`${Mt(gi)}/collab/controller-resources?${co.toString()}`,{method:"GET",credentials:ia},Ot.CONTROLLER_RESORCES,gi,Mi).then(Zr=>(gi.bridgeInit.fireEvent(e.CONTROLLER_RESOURCE_DATA_FETCHED),Zr)).catch(Zr=>(B=null,gi.bridgeInit.fireEvent(e.ERROR,`controller-resources request failed: ${Zr}`),{module_loader_url:null,controller_entry_module_url:null,import_map:null})),Promise.all([Fo,B]).then(Zr=>{const[Ao,No]=Zr;return Object.assign(Object.assign({},Ao),No)})}(this.R,On),Li=y(this.R,fi,On);Promise.all([Li,fi]).then(gi=>{var Mi;const Oi=gi[0],Yi=gi[1];Oi.main(Yi.init_options,Yi.preserialized,this.R.config.getSlackToken?null:Yi.oauth_token,this.R.config.getSlackToken?null:Yi.oauth_token_expiry,(Mi=this.R.config.getSlackToken)!==null&&Mi!==void 0?Mi:null,Mt(this.R),this.destinationFn(),Yi.js_initializer,Yi.user_id,this.R.config.xhrWithCredentials,this.R.config.enableWebCaching?Yi.web_cache_key:void 0,this.R.config.enableWebCaching?Yi.web_cache_key_version:void 0,this.R.config.requestsAreCors,Yi.body_classes,Yi.css_url,!!this.R.config.useGraftedMode,this.R.config.pathRewriteHook,!!this.R.config.isRemoteGraftingMode),this.D.fireEvent(e.BRIDGE_TRANSPORT_READY)}).catch(gi=>this.M(gi)).finally(()=>{var gi,Mi;(Mi=(gi=this.R.platformDelegate)===null||gi===void 0?void 0:gi.endTraceOrSpan)===null||Mi===void 0||Mi.call(gi,On)})}logError(we){this.D.fireEvent(e.ERROR,we)}}n(J,"P");class Q{constructor(we){this.embeddedSide=new J(we,()=>this.controllerSide),this.controllerSide=new g(()=>this.embeddedSide)}}n(Q,"U");function oe(V,we){let ct=null;for(const Wt of function(On){const fi=[];for(const Li of Object.keys(On))isNaN(Number(Li))&&fi.push(Li);return fi}(V))V[Wt]===we&&(ct=Wt);return ct||(ct=String(we)),ct+=` (${we})`,ct}n(oe,"g");const $={[a.INCOMING]:"ToEmbedded",[a.OUTGOING]:"FromEmbedded",[a.INCOMING_REPLY]:"ReplyToEmbedded",[a.OUTGOING_REPLY]:"ReplyFromEmbedded"},he=[m.Op.DID_INITIALIZE,m.Op.DID_FAIL_TO_INITIALIZE],Ae=[];class Ee{constructor(we,ct){this.p=we,this.v=ct,this.I=[],this.P=[],this.U={[$[a.INCOMING]]:{},[$[a.OUTGOING_REPLY]]:{},[$[a.OUTGOING]]:{},[$[a.INCOMING_REPLY]]:{}}}getHook(){const we=this.I,ct=this.P,Wt=this.U;return(On,fi,Li)=>{var gi,Mi;const Oi={ts:Date.now(),op:On,message:fi,type:Li},Yi=be(Li,On);if((gi=(Mi=Wt[$[Li]])[Yi])!==null&&gi!==void 0||(Mi[Yi]=0),Wt[$[Li]][Yi]+=1,we.length>=30)for(ct.push(Oi);ct.length>20;)ct.shift();else we.push(Oi)}}getReport(we=!0){var ct;return{collabInstanceId:this.p,collabInstanceTeamId:(ct=this.v)!==null&&ct!==void 0?ct:"not_provided",reportTimestamp:Date.now(),messageCounts:this.U,startupLog:Oe(this.I,we),recentLog:Oe(this.P,we)}}}n(Ee,"G");function Oe(V,we=!0){return V.map(ct=>{const Wt={op:be(ct.type,ct.op),type:$[ct.type]};var On,fi;return we&&(On=ct.type,fi=ct.op,!([a.INCOMING,a.OUTGOING_REPLY].includes(On)?he.includes(fi):Ae.includes(fi)))||(Wt.message=ct.message),we||(Wt.ts=ct.ts),Wt})}n(Oe,"B");function be(V,we){return[a.INCOMING,a.OUTGOING_REPLY].includes(V)?oe(m.Op,we):oe(v.Op,we)}n(be,"H");class De{constructor(we){this.D=we.bridgeInit,this.F=function(ct){return new Q(ct).embeddedSide}(we),this.G=new Ee(we.id,we.config.teamId),this.D.fireEvent(e.BRIDGE_TRANSPORT_SET),this.F.setTransportHook(this.G.getHook())}init(we){this.D.after([e.BRIDGE_TRANSPORT_SET,e.BRIDGE_TRANSPORT_READY,e.HANDLER_REGISTRATION_FINISHED],()=>{this.invoke(v.Op.INIT,we),this.D.fireEvent(e.INIT_SENT)})}tearDown(){this.F.tearDown()}invoke(we,ct){const Wt=we==v.Op.INIT,On=n(()=>{this.F.invoke(we,ct),Wt||this.D.fireEvent(e.MESSAGE_SENT,`Op ${we}`)},"s");Wt?On():this.D.after([e.BRIDGE_OPEN],On,`Send op ${we}`)}addHandler(we,ct){this.F.addHandler(we,we===m.Op.DID_INITIALIZE?ct:Wt=>{this.D.after([e.BRIDGE_OPEN],()=>{ct(Wt),this.D.fireEvent(e.MESSAGE_HANDLED,`Op ${we}`)},`Handle op ${we}`)})}getDebugReport(we=!0){return this.G.getReport(we)}}n(De,"y");class ut{constructor(we,ct){this.B=new WeakMap,this.H=we,this.V=ct}get(){const we=this.H.get();return this.K(we)}getAsync(){return this.H.getAsync().then(we=>this.K(we))}listen(we){let ct=this.B.get(we);ct||(ct=n((Wt,On)=>{we(this.K(Wt),this.V(On))},"e"),this.B.set(we,ct)),this.H.listen(ct)}once(we){let ct=this.B.get(we);ct||(ct=n((Wt,On)=>{we(this.K(Wt),this.V(On))},"e"),this.B.set(we,ct)),this.H.once(ct)}unlisten(we){const ct=this.B.get(we);ct&&this.H.unlisten(ct)}K(we){if(we!==void 0)return this.V(we)}}n(ut,"V");class St{constructor(we,ct){this.H=we,this.$=ct}get(){return this.H.get()}getAsync(){const we=this.H.getAsync();return new Promise((ct,Wt)=>{we.then(On=>{On?ct(On):this.H.once((fi,Li)=>{ct(Li??this.$)})}).catch(Wt)})}listen(we){this.H.listen(we)}unlisten(we){this.H.unlisten(we)}once(we){this.H.once(we)}}n(St,"K");var Rt;(function(V){V[V.DOC_DISPLAY_TITLE=0]="DOC_DISPLAY_TITLE",V[V.DOC_UPDATED_USEC=1]="DOC_UPDATED_USEC",V[V.DOC_EMBED_SCROLL_POSITION=2]="DOC_EMBED_SCROLL_POSITION",V[V.DOC_BLOCK_KIT_THUMBNAIL=3]="DOC_BLOCK_KIT_THUMBNAIL",V[V.SECTION_SNIPPET=4]="SECTION_SNIPPET",V[V.CANNED_DOC_NAME=5]="CANNED_DOC_NAME",V[V.DOC_IS_EMPTY=6]="DOC_IS_EMPTY",V[V.DOC_LAST_UPDATED_USER_ID=8]="DOC_LAST_UPDATED_USER_ID",V[V.A11Y_READ_ONLY_MODE=9]="A11Y_READ_ONLY_MODE",V[V.DOC_EMBED_FOCUS_STATE=10]="DOC_EMBED_FOCUS_STATE",V[V.DOC_EMBED_SELECTION_STATE=11]="DOC_EMBED_SELECTION_STATE",V[V.TEXT_SECTION_OVERLAY_SHOWING=12]="TEXT_SECTION_OVERLAY_SHOWING",V[V.DOC_HAS_FILE_UNFURLS=13]="DOC_HAS_FILE_UNFURLS",V[V.TEMPLATE_CONTROLS_BE=14]="TEMPLATE_CONTROLS_BE",V[V.DOC_NEW_SECTION_USEC=15]="DOC_NEW_SECTION_USEC",V[V.TEMPLATE_CONTROLS_FE=16]="TEMPLATE_CONTROLS_FE",V[V.DOC_HAS_HEADER_IMAGE=17]="DOC_HAS_HEADER_IMAGE",V[V.PLACEHOLDERS_INFO=18]="PLACEHOLDERS_INFO"})(Rt||(Rt={}));const Ze=new WeakMap;class mt{constructor(we={}){this.Y=new Set,this.W=we}add(we,ct){if(!this.Y.has(we)&&(this.Y.add(we),ct&&Ze.set(we,ct),this.Y.size===1)){const{didStartHavingListeners:Wt}=this.W;Wt&&Wt()}}addOneShot(we,ct){const Wt=n((...On)=>{this.remove(Wt),we.apply(window,On)},"i");this.add(Wt,ct)}remove(we){if(this.Y.delete(we)&&this.Y.size===0){const{didStopHavingListeners:ct}=this.W;ct&&ct()}}removeAll(){this.Y.forEach(we=>this.remove(we))}empty(){return this.Y.size===0}notify(...we){if(this.Y.size===0)return;const{notifyDecorator:ct,catchError:Wt}=this.W;let On;ct&&(On=ct());const fi=Array.from(this.Y);for(let Li=0;Li<fi.length;Li++)if(Wt)try{fi[Li].apply(window,we)}catch(gi){Wt(gi)}else fi[Li].apply(window,we);On&&On.clear()}debugGetDescriptions(){return Array.from(this.Y,(we,ct)=>Ze.get(we)||`<anonymous-${ct}>`)}}n(mt,"j");class At{constructor(we,ct,Wt,On=!1){this.X=we,this.J=ct,this.Z=Wt,this.q=On;const fi=n((Li,gi)=>{this.Y.notify(Li,gi)},"s");this.Y=new mt({didStartHavingListeners:()=>this.Z.addListener(we,ct,fi),didStopHavingListeners:()=>{this.Z.removeListener(we,ct,fi),this.q||this.Z.cleanupStorage(we,ct)}})}get(){return this.Z.getValue(this.X,this.J)}getAsync(){return this.Z.getValueAsync(this.X,this.J)}listen(we){this.Y.add(we)}unlisten(we){this.Y.remove(we)}unlistenAll(){this.Y.removeAll()}once(we){this.Y.addOneShot(we)}}n(At,"Y");class Vt{constructor(we){this.Y=new mt,this.tt=we}set(we){const ct=this.tt;this.tt=we,this.Y.notify(ct,we)}get(){return this.tt}getAsync(){return Promise.resolve(this.get())}listen(we){this.Y.add(we)}unlisten(we){this.Y.remove(we)}once(we){this.Y.addOneShot(we)}}n(Vt,"W");class dt{constructor(we){this.et=new Map,this.R=we}didCreateDoc(we,ct){const Wt=this.et.get(we);Wt?(this.et.set(ct,Wt),Wt.idInternal.set(ct)):console.warn(`Could not find doc mapped to ID ${we}`)}didDeleteDoc(we){const ct=this.et.get(we);ct==null||ct.deletedInternal.set(!0)}didTryToLoadWithTempId(we){const ct=this.et.get(we);ct==null||ct.didTryToLoadWithTempIdInternal.set(!0)}create(we={}){const{title:ct,cannedDoc:Wt,context:On,usesOnlyInlineTextComments:fi,content:Li}=we;return this.controllerAccess.docs.createDoc(ct,Wt,On,fi,Li).then(gi=>this.get(gi))}get(we){let ct=this.et.get(we);return ct||(ct=new Cn(we,this.R),this.et.set(we,ct)),ct}get controllerAccess(){return this.R.controllerAccess}setEditsDisabled(we,ct){for(const Wt of Ut.values())Wt.doc().id.get()===we&&Wt.docEditor.setEditsDisabled(ct);this.controllerAccess.docs.reloadThread(we)}getBlockKitThumbnail(we,ct=!0,Wt){const On=ui(this.R),fi=Wt?`${we}/${Wt}`:we;return new St(new At(Rt.DOC_BLOCK_KIT_THUMBNAIL,fi,On,!0),'{"blocks": []}').getAsync().then(JSON.parse).then(Li=>(ct&&Li.blocks.length>0&&Li.blocks.shift(),Li))}getCannedDocName(we){const ct=ui(this.R);return new St(new At(Rt.CANNED_DOC_NAME,we,ct,!0),"").getAsync().then(Wt=>Wt.length===0?null:Wt)}getSectionSnippet(we){const ct=ui(this.R);return new St(new At(Rt.SECTION_SNIPPET,we,ct,!0),"").getAsync()}setDebugOption(we,ct){this.controllerAccess.docs.setDebugOption(we,ct)}findSlackObject(we,ct,Wt){return this.controllerAccess.docs.findSlackObject(we,ct,Wt)}insertSlackObject(we,ct,Wt,On,fi){return this.controllerAccess.docs.insertSlackObject(we,ct,Wt,On,fi)}editLink(we,ct,Wt){this.controllerAccess.docs.editLink(we,ct,Wt)}loadData(we,ct){return this.controllerAccess.docs.loadData([we],ct)}it(){return Ln(this.R)}}n(dt,"X");class Cn{constructor(we,ct){this.nt=null,this.id=this.idInternal=new Vt(we),this.R=ct;const Wt=ui(this.R);this.title=new At(Rt.DOC_DISPLAY_TITLE,we,Wt),this.lastUpdated=new ut(new At(Rt.DOC_UPDATED_USEC,we,Wt,!0),On=>new Date(On/1e3)),this.lastUpdatedUsec=new At(Rt.DOC_UPDATED_USEC,we,Wt,!0),this.lastUpdatedSlackUserId=new At(Rt.DOC_LAST_UPDATED_USER_ID,we,Wt,!0),this.deleted=this.deletedInternal=new Vt(!1),this.isEmpty=new At(Rt.DOC_IS_EMPTY,we,Wt,!0),this.hasPerformedEditingAction=new Vt(!1),this.hasFileUnfurls=new At(Rt.DOC_HAS_FILE_UNFURLS,we,Wt,!0),this.templateControlsInfo=new At(Rt.TEMPLATE_CONTROLS_BE,we,Wt,!0),this.lastNewSectionUpdated=new ut(new At(Rt.DOC_NEW_SECTION_USEC,we,Wt,!0),On=>new Date(On/1e3)),this.hasHeaderImage=new At(Rt.DOC_HAS_HEADER_IMAGE,we,Wt,!0),this.didTryToLoadWithTempIdInternal=new Vt(!1),this.placeholdersInfo=new At(Rt.PLACEHOLDERS_INFO,we,Wt,!0)}getBlockKitThumbnailValue(){if(!this.nt&&this.isCreated()){const we=ui(this.R);this.nt=new ut(new At(Rt.DOC_BLOCK_KIT_THUMBNAIL,this.idInternal.get(),we,!0),JSON.parse)}return this.nt}embed(we,ct={mode:"editor"}){let Wt=gt.get(we);return Wt||(Wt=new sn(this,we,ct,this.R),gt.set(we,Wt),Wt.mount()),Wt.doc()!==this&&console.error("There was a different document embedded in the container",we),Wt}isCreated(){return!this.idInternal.get().startsWith("temp:")}failedToCreate(){return!this.isCreated()&&this.deletedInternal.get()}triedToLoadTempId(){return this.didTryToLoadWithTempIdInternal.get()}}n(Cn,"J");const gt=new WeakMap,Ut=new Map,en={mode:"editor"};class sn{constructor(we,ct,Wt,On){this.rendered=new Vt(!1),this.incrementalRendered=new Vt(!1),this.failedToLoad=new Vt(!1),this.loadInfo=new Vt(void 0),this.editingActionPerformed=new Vt(!1),this.loadError=new Vt(void 0),this.editorContainer=new Vt(void 0),this.st=!1,this.ot=!1,this.rt=[],this.Et=we,this._t=ct,this.W=Object.assign(Object.assign({},en),Wt),this.R=On,this.lt=`${Rn}-${this.R.id}-${di++}`,this.ct=function(){const fi=document.createElement("div");return fi.classList.add("collab-root"),fi}(),this.at(Rt.DOC_EMBED_SCROLL_POSITION),this.scrollPosition=this.at(Rt.DOC_EMBED_SCROLL_POSITION),this.focusState=this.at(Rt.DOC_EMBED_FOCUS_STATE),this.selectionState=this.at(Rt.DOC_EMBED_SELECTION_STATE),this.a11yReadOnlyMode=this.at(Rt.A11Y_READ_ONLY_MODE),this.textSectionOverlayShowing=this.at(Rt.TEXT_SECTION_OVERLAY_SHOWING),this.templateControls=this.ht(Rt.TEMPLATE_CONTROLS_FE,new Map),this.hasHeaderImage=this.at(Rt.DOC_HAS_HEADER_IMAGE),this.placeholdersInfo=this.at(Rt.PLACEHOLDERS_INFO),this.title=this.Et.title,this.controllerAccess.run(()=>{this.dt=this.controllerAccess.docs.getDocEditor(this.lt)})}get docEditor(){if(!this.dt)throw new Error("DocEditor object not set");return this.dt}get controllerAccess(){return this.R.controllerAccess}at(we){const ct=ui(this.R),Wt=new At(we,this.lt,ct,!1);return this.rt.push(Wt),Wt}ht(we,ct){return new St(this.at(we),ct)}onEditorLoadError(we){console.info("[QUIP] Editor load error",we),this.failedToLoad.set(!0),this.loadError.set(we),this.ut()}didLoadModel(we){this.loadInfo.set(we)}didRender(we){this.rendered.set(!0),this.failedToLoad.set(!1),this.loadError.set(void 0),this.editorContainer.set(we)}didFinishIncrementalRender(){this.incrementalRendered.set(!0)}didPerformEditingAction(){this.editingActionPerformed.set(!0)}doc(){return this.Et}docId(){return this.Et.id.get()}containerElement(){return this._t}frameName(){return this.lt}mount(){if(Ut.set(this.lt,this),!this.ot){const we=this.ct;we.style.visibility="hidden",this._t.appendChild(we);let ct=we.ownerDocument.defaultView;ct||(console.warn(`Mounting ${this.lt} into element with no window`),ct=window),this.st=!0,this.controllerAccess.run(()=>{this.docEditor.createdViewFrame(we)}),we.style.visibility="visible",this.ot&&this.Tt(),this.ot=!0}this.st&&this.Tt()}unmount(){try{console.info(`[Quip] unmount doc with frame name ${this.lt}. Frame loaded ${this.st}`),this.st&&(this.ut(),this.rendered.set(!1),this.incrementalRendered.set(!1),this.failedToLoad.set(!1),this.loadError.set(void 0),this.st=!1),this.ot&&(gt.delete(this._t),this.ct.remove(),this.ot=!1),this.rt.forEach(we=>we.unlistenAll()),Ut.delete(this.lt)}catch(we){console.warn("[Quip] Error thrown in unmount",we)}}it(){return Ln(this.R)}Tt(){this.controllerAccess.run(()=>{this.docEditor.renderDoc(this.Et.id.get(),this.W)})}ut(){this.controllerAccess.run(()=>{this.docEditor.cleanupViewFrame()})}setCommentsUiProvider(we){this.commentsUiProvider=we,we==null||we.setDelegate(this.docEditor)}setAutocompleteUiProvider(we){this.autocompleteUiProvider=we,we==null||we.setDelegate(this.docEditor)}setPermalinkUiProvider(we){this.permalinkUiProvider=we}setEmbeddedUiProvider(we){this.embeddedUiProvider=we}setErrorUiProvider(we){this.errorUiProvider=we}setEditorUiConnector(we){this.editorUiConnector=we,we==null||we.setDelegate(this.docEditor)}}n(sn,"Q");class $t{constructor(we){this.At=we}getFrameByName(we){return this.At.get(we)}withFrame(we,ct){const Wt=this.getFrameByName(we);Wt||console.warn(`Could not find a frame with name ${we}.`),ct(Wt)}}n($t,"z");const Rn=`collab-doc-${(1e3*Math.random()).toString(36)}`;let di=0;class ii{constructor(){this.St=[],this.Ot=!1}get docs(){return this.Nt}get settings(){return this.It}get providers(){return this.Lt}run(we){this.Ot?we():this.St.push(we)}setObjects({docs:we,settings:ct,providers:Wt}){this.Ot=!0,this.Nt=we,this.It=ct,this.Lt=Wt;for(const On of this.St)On();this.St=[]}}n(ii,"it");let Kn=0;class hi{constructor(we){this.id=Kn++,this.o=!1,this.Ct=!1,this.config=we,this.platformDelegate=we.delegate,this.bridgeInit=hi.Rt(`embedded ${this.id}`);const ct=new De(this);Hn.set(this,ct),this.controllerAccess=new ii,this.docs=new dt(this),this.failedToInitialize=new Vt(!1),this.initializationError=new Vt(void 0),this.Dt()}Dt(){if(this.o)return void this.bridgeInit.fireEvent(e.ERROR,"Collab instance initialized more than once");const{appearance:we,language:ct,delegate:Wt,commentsDataProvider:On,bookmarksDataProvider:fi,fileDataProvider:Li,slackListDataProvider:gi,slackObjectProvider:Mi,features:Oi,documentEventProvider:Yi,underlineAllLinks:Cr,enableAnimations:wr,displayEmojiAsPlainText:Kr,spellcheckEnabled:bo,embeddedConfigProvider:ia,embeddedUiProvider:Fo,topLevelTeamId:zi,anchorLinkProvider:co,slackObjectUIProvider:Zr,slackTextyHtmlConversionProvider:Ao,useSmartQuotesAndDashes:No,atomStorageProvider:qo}=this.config,ca=this.it();ca.init({features:Oi,delegate:Wt,anchorLinkProvider:co,bookmarksDataProvider:fi,commentsDataProvider:On,documentEventProvider:Yi,fileDataProvider:Li,slackListDataProvider:gi,slackObjectProvider:Mi,slackObjectUIProvider:Zr,slackTextyHtmlConversionProvider:Ao,mountedFrameProvider:new $t(Ut),embeddedAccessDelegate:this.controllerAccess,docs:this.docs}),this.controllerAccess.run(()=>{this.atomClient=this.controllerAccess.providers.getAtomClient(qo)});const Bo=new u;var ba,Ho;Bo.add(()=>{we&&this.ft(we),ct&&this.Mt(ct),Cr!==void 0&&this.setUnderlineAllLinks(Cr),wr!==void 0&&this.setEnableAnimations(wr),Kr!==void 0&&this.setDisplayEmojiAsPlainText(Kr),bo!==void 0&&this.setSpellcheckEnabled(bo),zi&&this.vt(zi),No!==void 0&&this.setUseSmartQuotesAndDashes(No)}),function(Fe,tt,It){if(!It)return;const Qt=It.supportedAutocompleteTypes;Qt&&tt.add(()=>{Fe.providers.registerAutocompleteTypes(Qt)}),Fe.run(()=>It.setDelegate(Fe.providers.getSlackObjectProviderDelegate()))}(this.controllerAccess,Bo,Mi),function(Fe,tt={},It,Qt,cn=fn=>{}){Fe.addHandler(m.Op.DID_INITIALIZE,()=>{var fn;(fn=tt.didInitialize)===null||fn===void 0||fn.call(tt),It.run(),Qt.fireEvent(e.DID_INIT_RECEIVED)}),Fe.addHandler(m.Op.DID_FAIL_TO_INITIALIZE,({initError:fn})=>{var ci;cn(fn),(ci=tt.didFailToInitialize)===null||ci===void 0||ci.call(tt,fn)})}(ca,Wt,Bo,this.bridgeInit,Fe=>{this.Pt(!0,Fe)}),ba=this.controllerAccess,Ho=On,ba.run(()=>{Ho==null||Ho.setDelegate(ba.providers.getCommentsDataProviderDelegate())}),function(Fe,tt){Fe.run(()=>{tt==null||tt.setDelegate(Fe.providers.getBookmarksDataProviderDelegate())})}(this.controllerAccess,fi),function(Fe,tt){Fe.run(()=>tt==null?void 0:tt.setDelegate(Fe.providers.getDocumentEventProviderDelegate()))}(this.controllerAccess,Yi),function(Fe,tt,It){It&&tt.add(()=>{Fe.providers.registerEmbeddedUiProvider(It.config())})}(this.controllerAccess,Bo,ia||Fo),this.o=!0,this.bridgeInit.fireEvent(e.HANDLER_REGISTRATION_FINISHED)}Pt(we,ct){const Wt=this.failedToInitialize,On=this.initializationError;Wt.set(we),On.set(ct)}static Rt(we){const ct=new o(we);return ct.after([e.BRIDGE_TRANSPORT_SET,e.BRIDGE_TRANSPORT_READY,e.INIT_SENT,e.DID_INIT_RECEIVED,e.HANDLER_REGISTRATION_FINISHED],()=>{ct.fireEvent(e.BRIDGE_OPEN)}),ct}controllerModuleUrls(){return D()}preload(){return!this.Ct&&(D().forEach(we=>{if(!I[we]){const ct=document.createElement("link");ct.rel="preload",ct.as="script",ct.href=we,ct.crossOrigin="anonymous",I[we]=ct,document.head.appendChild(ct)}}),this.Ct=!0,!0)}tearDown(){this.it().tearDown(),Hn.delete(this),this.Pt(!1),this.o=!1}createBasicTraceSpan(we,ct,Wt){var On,fi,Li;const gi=(Li=(fi=(On=this.platformDelegate)===null||On===void 0?void 0:On.startSpan)===null||fi===void 0?void 0:fi.call(On,we,ct,Wt))!==null&&Li!==void 0?Li:null;return gi?{span:gi,closeSpanFn:Mi=>{var Oi,Yi;(Yi=(Oi=this.platformDelegate)===null||Oi===void 0?void 0:Oi.endTraceOrSpan)===null||Yi===void 0||Yi.call(Oi,gi,Mi?{[Ht.ERROR]:`${Mi}`}:{})}}:{span:null,closeSpanFn:()=>{}}}getAttemptNumber(){var we;return(we=this.config.attemptNumber)!==null&&we!==void 0?we:0}preloadThreads(we,ct){this.controllerAccess.run(()=>this.controllerAccess.docs.preloadData(we,ct))}setAppearance(we){this.config.appearance=we,this.ft(we)}setLanguage(we){this.config.language=we}setAppKeyboardFocusModeEnabled(we,ct){this.Ut(we,ct)}ft(we){this.controllerAccess.settings.setAppearance(we)}Mt(we){this.controllerAccess.settings.setLanguage(we)}Ut(we,ct){this.controllerAccess.settings.setAppKeyboardFocusModeEnabled(we,ct)}vt(we){this.controllerAccess.settings.setDefaultTeamId(we)}setUnderlineAllLinks(we){this.controllerAccess.settings.setUnderlineLinks(we)}setEnableAnimations(we){this.controllerAccess.settings.setEnableAnimations(we)}setDisplayEmojiAsPlainText(we){this.controllerAccess.settings.setDisplayEmojiAsPlainText(we)}setSpellcheckEnabled(we){this.controllerAccess.settings.setSpellcheckEnabled(we)}setUseSmartQuotesAndDashes(we){this.controllerAccess.settings.setUseSmartQuotesAndDashes(we)}async getInitLog(we){return Object.assign(Object.assign({},await this.bridgeInit.getInitLog(we)),{lm:"SYSTEMJS_SCRIPT_CONTROLLER",dr:!0})}async getInitLogStr(we){for(let ct=o.MAX_INIT_LOG;ct>=0;ct--){const Wt=JSON.stringify(await this.getInitLog(ct));if(Wt.length<=we)return Wt}return"Failed to generate"}getDebugReport(we){return this.getBridgeDebugReport(we)}getBridgeDebugReport(we=!0){return this.it().getDebugReport(we)}it(){return Hn.get(this)}}n(hi,"st");function Ln(V){return Hn.get(V)}n(Ln,"ot");const Hn=new Map;function ui(V){return V.atomClient}n(ui,"Et");const jn=document.querySelector("script[src*='/collab/embedded.js']"),ri=jn==null?void 0:jn.src,ie=ri?new URL(ri).origin:"https://prod.slack.quip.systems";function Mt(V){return V.config.origin||ie}n(Mt,"at");var Ot,Ht;(function(V){V.COLLAB_INIT="collab-init",V.CONTROLLER_INIT="controller-init",V.CONTROLLER_RESORCES="controller-resources",V.HTTP_FETCH_HEADER="http-fetch-header",V.HTTP_FETCH_CONTENT="http-fetch-content",V.JSON_PARSE="json-parse",V.LOAD_CONTROLLER="load-controller",V.AWAIT_CALLBACK="await-callback",V.LOAD_SYSTEMJS="load-systemjs",V.MODULE_PREFETCH="module-prefetch",V.SCRIPT_TAG="script-tag",V.LOAD_CONTROLLER_MODULE="load-controller-module",V.SYSTEMJS_IMPORT_MODULE="systemjs-import-module"})(Ot||(Ot={})),function(V){V.CONTROLLER_ID="controller-id",V.ERROR="error",V.JS_PREFETCH_ENABLED="js-prefetch-enabled",V.URL="url"}(Ht||(Ht={}));const hn=(()=>{if(typeof c.g=="object")return c.g;if(typeof window=="object")return window;if(typeof self=="object")return self;throw new Error("Cannot find global")})();function tn(V,we,ct){const Wt=V.split(".");let On=ct||hn;for(let fi=0;fi<Wt.length;fi++){const Li=Wt[fi];fi===Wt.length-1?On[Li]=we:(Li in On||(On[Li]={}),On=On[Li])}}n(tn,"Tt");var xe,Dt,Y,fe,et,nt,nn,kt,Jt,Ke,vt,x,Ye,it,ft,ge,Zn,Xt,pn,Bi,Gn,yo,no,Vi,or,ki,qi,Or,Zo,Xn,Dn,Ni,pi,ir,br,zr,pr,mr,Ur,io,ur,wo,$r,Vo;(function(V){V[V.IN_APP_USER_INITIATED=0]="IN_APP_USER_INITIATED",V[V.PERMALINK=1]="PERMALINK",V[V.POPOUT=2]="POPOUT"})(xe||(xe={})),function(V){V.BOLD="bold",V.ITALIC="italic",V.UNDERLINE="underline",V.STRIKETHROUGH="strikethrough",V.CODE="code",V.SUBSCRIPT="subscript",V.SUPERSCRIPT="superscript",V.LINK="link"}(Dt||(Dt={})),function(V){V.PLAIN="plain",V.H1="h1",V.H2="h2",V.H3="h3",V.CODE="code",V.BLOCKQUOTE="blockquote",V.LIST_BULLET="list_bullet",V.LIST_NUMBERED="list_numbered",V.LIST_CHECKLIST="list_checklist"}(Y||(Y={})),function(V){V.CACHE="cache",V.MEMORY="memory",V.NETWORK="network"}(fe||(fe={})),function(V){V.LINK="link",V.COMMENT="comment",V.REACTION="reaction"}(et||(et={})),function(V){V.NONE="none",V.SCROLL_TO_SECTION="scroll_to_section",V.FOCUS_SECTION="focus_section"}(nt||(nt={})),function(V){V[V.LINK_COPIED=0]="LINK_COPIED",V[V.LINK_FILE_SHARE_BLOCKED=1]="LINK_FILE_SHARE_BLOCKED",V[V.TABLE_SIZE_LIMIT_REACHED=2]="TABLE_SIZE_LIMIT_REACHED"}(nn||(nn={})),function(V){V[V.UNSUPPORTED_FILE_TYPE=0]="UNSUPPORTED_FILE_TYPE"}(kt||(kt={})),function(V){V[V.ANY=1]="ANY",V[V.ON_MOUSE_LEAVE=2]="ON_MOUSE_LEAVE"}(Jt||(Jt={})),function(V){V[V.COMMENTS=0]="COMMENTS",V[V.FILE_UPLOADS=1]="FILE_UPLOADS",V[V.DOCUMENT_EVENTS=2]="DOCUMENT_EVENTS",V[V.SPREADSHEETS=3]="SPREADSHEETS",V[V.HOVERCARDS=4]="HOVERCARDS",V[V.LINK_UNFURL=5]="LINK_UNFURL",V[V.UNREAD_COMMENTS=6]="UNREAD_COMMENTS",V[V.REMINDERS=7]="REMINDERS",V[V.DOCUMENT_UPDATE=8]="DOCUMENT_UPDATE",V[V.FLEXBOX_COLLAB=9]="FLEXBOX_COLLAB",V[V.SLACK_WORKFLOW_BUTTON_PROTOTYPE=10]="SLACK_WORKFLOW_BUTTON_PROTOTYPE",V[V.DOPE_TABLE=11]="DOPE_TABLE",V[V.UI_PARITY=12]="UI_PARITY",V[V.MOBILE_DOCUMENT_EDITING=13]="MOBILE_DOCUMENT_EDITING",V[V.MOBILE_IMAGE_LOADING=14]="MOBILE_IMAGE_LOADING",V[V.GALLERY_LAYOUT=15]="GALLERY_LAYOUT",V[V.ANCHOR_LINKS=16]="ANCHOR_LINKS",V[V.IMAGE_EMBEDS=17]="IMAGE_EMBEDS",V[V.IMAGE_CAPTION=18]="IMAGE_CAPTION",V[V.EMBEDS_DRAG_HANDLE=19]="EMBEDS_DRAG_HANDLE",V[V.SLACK_AUTOCOMPLETE=20]="SLACK_AUTOCOMPLETE",V[V.DOCUMENT_SLASH_COMMANDS=23]="DOCUMENT_SLASH_COMMANDS",V[V.DRAG_AND_DROP_MAX_DISTANCE=24]="DRAG_AND_DROP_MAX_DISTANCE",V[V.APP_UNFURL_NON_IFRAME_RENDERS=25]="APP_UNFURL_NON_IFRAME_RENDERS",V[V.A11Y_KEYBOARD_NAVIGATION=28]="A11Y_KEYBOARD_NAVIGATION",V[V.INSERT_TOOLBAR=29]="INSERT_TOOLBAR",V[V.MENTIONS_SHARE=30]="MENTIONS_SHARE",V[V.TEXT_IN_GALLERY_LAYOUT=31]="TEXT_IN_GALLERY_LAYOUT",V[V.AUTOSIZE_FLEXBOX=32]="AUTOSIZE_FLEXBOX",V[V.FORMATTING_TOOLBAR=33]="FORMATTING_TOOLBAR",V[V.UI_PARITY_SLACK_LINK_INSPECTOR=34]="UI_PARITY_SLACK_LINK_INSPECTOR",V[V.PREVENT_OBJECTS_IN_LISTS=35]="PREVENT_OBJECTS_IN_LISTS",V[V.DISALLOW_SECTION_COMMENTS=37]="DISALLOW_SECTION_COMMENTS",V[V.SECTION_TOOLBAR_ON_LEFT=38]="SECTION_TOOLBAR_ON_LEFT",V[V.MOBILE_WEBVIEW_UNFURLS=39]="MOBILE_WEBVIEW_UNFURLS",V[V.INLINE_COMMENTS=40]="INLINE_COMMENTS",V[V.UNIVERSAL_DRAG_PREVIEW=41]="UNIVERSAL_DRAG_PREVIEW",V[V.DISABLE_GLOBAL_SHORTCUTS=42]="DISABLE_GLOBAL_SHORTCUTS",V[V.NARROW_COLLAB_INDENTATION=43]="NARROW_COLLAB_INDENTATION",V[V.EXPANDED_FLEXBOX_MARGIN=44]="EXPANDED_FLEXBOX_MARGIN",V[V.ADD_COLUMN_FROM_SECTION_MENU=45]="ADD_COLUMN_FROM_SECTION_MENU",V[V.REQUEST_COMPLETION_HOOK=46]="REQUEST_COMPLETION_HOOK",V[V.A11Y_CARET=47]="A11Y_CARET",V[V.BOOKMARKS=48]="BOOKMARKS",V[V.GRIDLIKE_DRAG_AND_DROP_PLACEMENT=50]="GRIDLIKE_DRAG_AND_DROP_PLACEMENT",V[V.SLACK_MESSAGE_TITLE=51]="SLACK_MESSAGE_TITLE",V[V.LENIENT_STARTUP=52]="LENIENT_STARTUP",V[V.ALLOW_SELECTING_ARCHIVED_COMMENTS=53]="ALLOW_SELECTING_ARCHIVED_COMMENTS",V[V.ANIMATE_LAYOUT_DRAG=54]="ANIMATE_LAYOUT_DRAG",V[V.STATIC_TITLES=55]="STATIC_TITLES",V[V.PROFILE_UNFURLS=56]="PROFILE_UNFURLS",V[V.DISABLE_PERSISTING_CLIENT_USER_DOCUMENT_OVERLAY_UPDATES=57]="DISABLE_PERSISTING_CLIENT_USER_DOCUMENT_OVERLAY_UPDATES",V[V.MOBILE_NATIVE_UNFURLS=58]="MOBILE_NATIVE_UNFURLS",V[V.DEFAULT_UNFURLS_ON_PASTE=59]="DEFAULT_UNFURLS_ON_PASTE",V[V.SAVED_FOR_LATER=60]="SAVED_FOR_LATER",V[V.COMMENTS_REDESIGN=61]="COMMENTS_REDESIGN",V[V.SLACK_USER_CONTEXT_MENU=62]="SLACK_USER_CONTEXT_MENU",V[V.SLACK_OBJECT_CONTROL_CONTEXT_MENUS=63]="SLACK_OBJECT_CONTROL_CONTEXT_MENUS",V[V.JS_MODULE_PREFETCH=64]="JS_MODULE_PREFETCH",V[V.SLACK_SECTION_MENUS=65]="SLACK_SECTION_MENUS",V[V.PADDING_RESIZING=66]="PADDING_RESIZING",V[V.HOVERABLE_SECTION_MENU=68]="HOVERABLE_SECTION_MENU",V[V.SLACK_PRESENCE_UPDATES=69]="SLACK_PRESENCE_UPDATES",V[V.HIDE_INLINE_COMMENT_BUBBLES=70]="HIDE_INLINE_COMMENT_BUBBLES",V[V.HIDE_ADD_COMMENT_BUBBLE=71]="HIDE_ADD_COMMENT_BUBBLE",V[V.HYPERLINK_CONTEXT_MENU=72]="HYPERLINK_CONTEXT_MENU",V[V.UNIVERSAL_DRAG_PREVIEW_EMBEDDED_UI=73]="UNIVERSAL_DRAG_PREVIEW_EMBEDDED_UI",V[V.LOCK_SECTION_FOR_INLINE_ANNOTATION=74]="LOCK_SECTION_FOR_INLINE_ANNOTATION",V[V.EDITABLE_CONTROL=75]="EDITABLE_CONTROL",V[V.OPEN_ANNOTATION_TAB_IN_FOCUSED_SECTION=76]="OPEN_ANNOTATION_TAB_IN_FOCUSED_SECTION",V[V.MOVE_CARET_WHEN_OPENING_ANNOTATION=77]="MOVE_CARET_WHEN_OPENING_ANNOTATION",V[V.DISABLE_TITLE_UNFURL=79]="DISABLE_TITLE_UNFURL",V[V.HIDE_STUB_ANNOTATIONS=80]="HIDE_STUB_ANNOTATIONS",V[V.OBSERVE_CONTENT_OUTSIDE_SECTION_MUTATIONS=81]="OBSERVE_CONTENT_OUTSIDE_SECTION_MUTATIONS",V[V.USE_EXTERNAL_EDITOR_SAVE=82]="USE_EXTERNAL_EDITOR_SAVE",V[V.IMPROVED_WORD_WRAPPING=83]="IMPROVED_WORD_WRAPPING",V[V.HIGHLIGHT_TEXT_WITH_SECTION_LEVEL_COMMENTS=84]="HIGHLIGHT_TEXT_WITH_SECTION_LEVEL_COMMENTS",V[V.USE_NEW_FIND_MODAL=85]="USE_NEW_FIND_MODAL",V[V.DISPLAY_COMMENT_TOOLTIP=86]="DISPLAY_COMMENT_TOOLTIP",V[V.HIDE_SLACK_SECTION_HIGHLIGHT_FOR_OPEN_COMMENT=87]="HIDE_SLACK_SECTION_HIGHLIGHT_FOR_OPEN_COMMENT",V[V.SLACK_FILE_UNFURL_PLACEHOLDER=88]="SLACK_FILE_UNFURL_PLACEHOLDER",V[V.PRIORITIZE_OPENING_ANNOTATIONS_OVER_LINKS=89]="PRIORITIZE_OPENING_ANNOTATIONS_OVER_LINKS",V[V.CLEANUP_SENTINEL=90]="CLEANUP_SENTINEL",V[V.OPEN_COMMENTS_HIGHLIGHT_TEMPORARY=91]="OPEN_COMMENTS_HIGHLIGHT_TEMPORARY",V[V.UNFURL_PRIVATE_MESSAGES=92]="UNFURL_PRIVATE_MESSAGES",V[V.MOBILE_DISABLE_PRESENCE_MENU_POPOVER=93]="MOBILE_DISABLE_PRESENCE_MENU_POPOVER",V[V.CANVAS_GA_FAST_FOLLOW=95]="CANVAS_GA_FAST_FOLLOW",V[V.BRIDGE_REFACTORING=96]="BRIDGE_REFACTORING",V[V.SIMPLE_TABLES=97]="SIMPLE_TABLES",V[V.ALLOW_LARGE_SIZE_FILE_IMAGE_UPLOADS=98]="ALLOW_LARGE_SIZE_FILE_IMAGE_UPLOADS",V[V.ALLOW_SLACK_OBJECT_TITLE_UNFURL=99]="ALLOW_SLACK_OBJECT_TITLE_UNFURL",V[V.ALLOW_SLACK_WEB_OR_APP_LINKS_TITLE_UNFURL=100]="ALLOW_SLACK_WEB_OR_APP_LINKS_TITLE_UNFURL",V[V.CANVAS_GA_FAST_FOLLOW_2=101]="CANVAS_GA_FAST_FOLLOW_2",V[V.USE_LEFT_GUTTER_DISPLAY=102]="USE_LEFT_GUTTER_DISPLAY",V[V.USE_PRIVATE_MESSAGE_SPEEDBUMP_IN_CARD=103]="USE_PRIVATE_MESSAGE_SPEEDBUMP_IN_CARD",V[V.TITLE_BLOCK_KIT_FORMAT=104]="TITLE_BLOCK_KIT_FORMAT",V[V.USE_LIST_ITEM_MARKER_CONTAINER=105]="USE_LIST_ITEM_MARKER_CONTAINER",V[V.ALLOW_SLACK_TEMPLATE_PLACEHOLDER=106]="ALLOW_SLACK_TEMPLATE_PLACEHOLDER",V[V.USE_INLINE_TOOLBAR_PERF_IMPROVEMENTS=107]="USE_INLINE_TOOLBAR_PERF_IMPROVEMENTS",V[V.IMAGE_RESIZING=108]="IMAGE_RESIZING",V[V.PRIVATE_MESSAGE_SPEEDBUMP_MODAL=109]="PRIVATE_MESSAGE_SPEEDBUMP_MODAL",V[V.ALLOW_HEADER_IMAGE=110]="ALLOW_HEADER_IMAGE",V[V.PRIVATE_MESSAGE_SPEEDBUMP_FOR_TITLE_UNFURLS=111]="PRIVATE_MESSAGE_SPEEDBUMP_FOR_TITLE_UNFURLS",V[V.USE_NEW_SECTION_HIGHLIGHT=112]="USE_NEW_SECTION_HIGHLIGHT",V[V.MODEL_INTEGRITY_PROBE=113]="MODEL_INTEGRITY_PROBE",V[V.MODEL_INTEGRITY_CHANGES_CHECK=114]="MODEL_INTEGRITY_CHANGES_CHECK",V[V.MODEL_FSCK_PROBE=115]="MODEL_FSCK_PROBE",V[V.MODEL_UPDATES_PROBE=116]="MODEL_UPDATES_PROBE",V[V.SIMPLE_TABLES_FULL_BLEED=117]="SIMPLE_TABLES_FULL_BLEED",V[V.IMAGE_MIN_DIMENSIONS=118]="IMAGE_MIN_DIMENSIONS",V[V.SIMPLE_TABLES_MOBILE_DISPLAY_SCALE=119]="SIMPLE_TABLES_MOBILE_DISPLAY_SCALE",V[V.SLACK_TEXTY_CLIPBOARD=120]="SLACK_TEXTY_CLIPBOARD",V[V.ONLY_OPEN_ANNOTATION_WHEN_CARET_IS_INSIDE=121]="ONLY_OPEN_ANNOTATION_WHEN_CARET_IS_INSIDE",V[V.SINGLE_HOVERABLE_SECTION_MENU=122]="SINGLE_HOVERABLE_SECTION_MENU",V[V.SIMPLE_TABLES_FIT_TO_PAGE=123]="SIMPLE_TABLES_FIT_TO_PAGE",V[V.TRANSIENT_SECTION_HIGHLIGHTING=124]="TRANSIENT_SECTION_HIGHLIGHTING",V[V.OPTIMIZE_CONTROLS_RENDERING=125]="OPTIMIZE_CONTROLS_RENDERING",V[V.SIMPLE_TABLES_MOBILE_EDITING=126]="SIMPLE_TABLES_MOBILE_EDITING",V[V.OPTIMIZE_EMBEDS_RENDERING=127]="OPTIMIZE_EMBEDS_RENDERING",V[V.CONTENT_REACTION_BAR=128]="CONTENT_REACTION_BAR",V[V.GUTTER_REDESIGN=129]="GUTTER_REDESIGN",V[V.USE_NATIVE_LINK_INSPECTOR=131]="USE_NATIVE_LINK_INSPECTOR",V[V.SECTION_UPDATE_PILL_ENABLED=132]="SECTION_UPDATE_PILL_ENABLED",V[V.SIMPLE_TABLES_CELL_MERGING=133]="SIMPLE_TABLES_CELL_MERGING",V[V.HIGHLIGHT_IN_STANDALONE_CANVASES=134]="HIGHLIGHT_IN_STANDALONE_CANVASES",V[V.BLUE_GREY_MENTIONS=135]="BLUE_GREY_MENTIONS",V[V.SLASH_SHORTCUT_COMMANDS_NUX=136]="SLASH_SHORTCUT_COMMANDS_NUX",V[V.OPTIMIZE_SECTION_STATUS=137]="OPTIMIZE_SECTION_STATUS",V[V.UNFURL_EMBED=138]="UNFURL_EMBED",V[V.SLACK_REACT_17=139]="SLACK_REACT_17",V[V.ENABLE_REACT_18=140]="ENABLE_REACT_18",V[V.PAUSE_PRIVATE_MESSAGE_UNFURL_SNAPSHOTS=141]="PAUSE_PRIVATE_MESSAGE_UNFURL_SNAPSHOTS",V[V.DRAGGABLE_CONTROL=142]="DRAGGABLE_CONTROL",V[V.NEW_COLUMN_PLACEHOLDERS=143]="NEW_COLUMN_PLACEHOLDERS",V[V.CANVAS_LISTS_GA=144]="CANVAS_LISTS_GA",V[V.DOCUMENT_AUTOCOMPLETE=145]="DOCUMENT_AUTOCOMPLETE",V[V.CANVAS_DYNAMIC_LISTS=146]="CANVAS_DYNAMIC_LISTS",V[V.CANVAS_LISTS_CARDS=147]="CANVAS_LISTS_CARDS",V[V.MULTI_SECTION_DRAG=148]="MULTI_SECTION_DRAG",V[V.SMOOTHER_MARGIN_SELECTION=149]="SMOOTHER_MARGIN_SELECTION",V[V.WFB_BACK_TO_BASIC_APRIL_RELEASE=150]="WFB_BACK_TO_BASIC_APRIL_RELEASE",V[V.CANVAS_HEADER_IMAGE=151]="CANVAS_HEADER_IMAGE",V[V.AUTOSLUG_SLACK_CHANNELS=152]="AUTOSLUG_SLACK_CHANNELS",V[V.CANVAS_TITLE_UNFURL_DEFAULT=153]="CANVAS_TITLE_UNFURL_DEFAULT",V[V.CURSOR_AWARENESS=154]="CURSOR_AWARENESS",V[V.CANVAS_LISTS_EMBEDS=155]="CANVAS_LISTS_EMBEDS",V[V.CANVAS_DATE_MENTIONS=156]="CANVAS_DATE_MENTIONS",V[V.CANVAS_MOBILE_GENERIC_PLACEHOLDERS=157]="CANVAS_MOBILE_GENERIC_PLACEHOLDERS",V[V.SELECTION_AWARENESS=158]="SELECTION_AWARENESS",V[V.CANVAS_GROUP_MENTIONS=159]="CANVAS_GROUP_MENTIONS",V[V.CANVAS_SALES_TEMPLATES=160]="CANVAS_SALES_TEMPLATES",V[V.CALLOUTS=161]="CALLOUTS",V[V.CANVAS_LINK_HOVERCARD=162]="CANVAS_LINK_HOVERCARD",V[V.CANVAS_NATIVE_LIST_EMBED=163]="CANVAS_NATIVE_LIST_EMBED",V[V.MESSAGE_TO_CANVAS_BUTTON=165]="MESSAGE_TO_CANVAS_BUTTON",V[V.CANVAS_DYNAMIC_GUTTER=166]="CANVAS_DYNAMIC_GUTTER",V[V.TRANSIENT_SECTION_ENHANCEMENTS=167]="TRANSIENT_SECTION_ENHANCEMENTS",V[V.CANVAS_DATE_HOVERCARD=168]="CANVAS_DATE_HOVERCARD",V[V.MOBILE_COMMENT_ICON_UPDATE=169]="MOBILE_COMMENT_ICON_UPDATE",V[V.CRDTS_CLIENT=170]="CRDTS_CLIENT",V[V.MOBILE_CONTENT_REACTIONS=171]="MOBILE_CONTENT_REACTIONS"}(Ke||(Ke={})),function(V){V[V.NONE=0]="NONE",V[V.SHIFT=1]="SHIFT",V[V.ALT=2]="ALT",V[V.META=4]="META",V[V.CTRL=8]="CTRL",V[V.MOD=16]="MOD"}(vt||(vt={})),function(V){V[V.CHANNEL=0]="CHANNEL",V[V.USER=1]="USER",V[V.EMOJI=2]="EMOJI",V[V.FILE=4]="FILE",V[V.UNFURL=5]="UNFURL",V[V.DOCUMENT=6]="DOCUMENT",V[V.LINK=7]="LINK",V[V.DOCUMENT_USER_ACCESS=9]="DOCUMENT_USER_ACCESS",V[V.PENDING_URL=10]="PENDING_URL",V[V.GENERIC=11]="GENERIC",V[V.TEMPLATE=12]="TEMPLATE",V[V.BACKGROUND=13]="BACKGROUND",V[V.WIDGET=14]="WIDGET",V[V.LIST=15]="LIST",V[V.LIST_RECORD=16]="LIST_RECORD",V[V.HEADER_IMAGE=17]="HEADER_IMAGE",V[V.SALESFORCE_RECORD=18]="SALESFORCE_RECORD",V[V.GROUP_MEMBERSHIP=19]="GROUP_MEMBERSHIP"}(x||(x={})),function(V){V[V.NOT_FOUND=0]="NOT_FOUND"}(Ye||(Ye={})),function(V){V[V.CLOSE=0]="CLOSE",V[V.SELECT=1]="SELECT",V[V.MOVE_SELECTION_DOWN=2]="MOVE_SELECTION_DOWN",V[V.MOVE_SELECTION_UP=3]="MOVE_SELECTION_UP"}(it||(it={})),function(V){V.CANVAS="insert-canvas",V.AUDIO="insert-audio",V.VIDEO="insert-video",V.FILE="insert-file",V.WORKFLOW="insert-workflow",V.PROFILE="insert-profile",V.LIST="insert-list",V.CODE="inline-code",V.CHANNEL="ac-trigger-channel",V.CODEBLOCK="insert-codeblock",V.BLOCKQUOTE="insert-blockquote",V.PLAIN="insert-plain",V.H1="insert-h1",V.H2="insert-h2",V.H3="insert-h3",V.IMAGE="insert-image",V.TABLE="insert-table",V.CHECKLIST="insert-checklist",V.BULLET_LIST="insert-bullet-list",V.ORDERED_LIST="insert-ordered-list",V.DIVIDER="insert-divider",V.TWO_COLUMNS="layout-two-columns",V.THREE_COLUMNS="layout-three-columns",V.DATE_GENERIC="date-generic",V.DATE_TODAY="date-today",V.DATE_TOMORROW="date-tomorrow",V.DATE_YESTERDAY="date-yesterday"}(ft||(ft={})),function(V){V.DEFAULT_SOURCE="canvas-shortcut-command"}(ge||(ge={})),function(V){V[V.SLACK_OBJECT=0]="SLACK_OBJECT",V[V.LINK=1]="LINK",V[V.HEADER=2]="HEADER",V[V.TEXT=3]="TEXT",V[V.DIVIDER=4]="DIVIDER",V[V.HYPERLINK=5]="HYPERLINK",V[V.TITLE=6]="TITLE",V[V.TABLE=7]="TABLE",V[V.DRAG_OVERLAY=8]="DRAG_OVERLAY",V[V.COMMENT_METADATA=9]="COMMENT_METADATA",V[V.INVITED_USER=10]="INVITED_USER",V[V.DATE=11]="DATE",V[V.BACKDROP=12]="BACKDROP",V[V.CALLOUT=13]="CALLOUT",V[V.AI_ASSISTANT=14]="AI_ASSISTANT"}(Zn||(Zn={})),function(V){V.STATIC="list-static",V.EMBED="list-embed"}(Xt||(Xt={})),function(V){V.STATIC="unfurl-static",V.EMBED="unfurl-embed",V.BUTTON="unfurl-button"}(pn||(pn={})),function(V){V[V.PREVIOUS=0]="PREVIOUS",V[V.NEXT=1]="NEXT"}(Bi||(Bi={})),function(V){V.ROW="row",V.COLUMN="column"}(Gn||(Gn={})),function(V){V.INSERT_BEFORE="insert_before",V.INSERT_AFTER="insert_after",V.DELETE="delete"}(yo||(yo={})),function(V){V.CLEAR_CONTENTS="clear_contents",V.MERGE_CELLS="merge_cells",V.UNMERGE_CELLS="unmerge_cells"}(no||(no={})),function(V){V.TOGGLE_HAS_HEADER_ROW="toggle_has_header_row",V.TOGGLE_HAS_HEADER_COLUMN="toggle_has_header_column",V.DISTRIBUTE_COLUMNS="distribute_columns",V.TOGGLE_FIT_TO_PAGE="toggle_fit_to_page"}(Vi||(Vi={})),function(V){V.BACKGROUND_COLOR="background_color"}(or||(or={})),function(V){V.INSERT_CONTENT="insert_content",V.ACCEPT_DRAFT="accept_draft",V.CANCEL_DRAFT="cancel_draft"}(ki||(ki={})),function(V){V.NO_FOCUS_ON_CLICK="data-no-focus-section-on-click",V.NO_DRAG_ON_MOUSE_MOVE="data-no-drag-on-mouse-move",V.EMBEDDED_FILE_CARD_CLASSNAME="card-view__file_card",V.EMBEDDED_IMAGE_CARD_CLASSNAME="card-view__image_card"}(qi||(qi={})),function(V){V[V.DISMISS_POPOVER=0]="DISMISS_POPOVER",V[V.REMOVE_ASSOCIATED_CONTENT=1]="REMOVE_ASSOCIATED_CONTENT",V[V.COPY_OBJECT=2]="COPY_OBJECT",V[V.CREATE_OR_VIEW_COMMENT=3]="CREATE_OR_VIEW_COMMENT",V[V.REPLACE_FILE=4]="REPLACE_FILE",V[V.SWITCH_UNFURL_TYPE=5]="SWITCH_UNFURL_TYPE",V[V.PREVENT_POPOVER_DISMISS=6]="PREVENT_POPOVER_DISMISS",V[V.SYNC_METADATA=7]="SYNC_METADATA",V[V.COPY_SECTION_LINK=8]="COPY_SECTION_LINK",V[V.SET_BLOCK_STYLE=9]="SET_BLOCK_STYLE",V[V.ADD_COLUMN=10]="ADD_COLUMN",V[V.MOVE_LINE=11]="MOVE_LINE",V[V.TOGGLE_COLLAPSE=12]="TOGGLE_COLLAPSE",V[V.CHECK_ALL=13]="CHECK_ALL",V[V.UNCHECK_ALL=14]="UNCHECK_ALL",V[V.REMOVE_CHECKED=15]="REMOVE_CHECKED",V[V.MOVE_CHECKED_TO_BOTTOM=16]="MOVE_CHECKED_TO_BOTTOM",V[V.SORT_ALPHA=17]="SORT_ALPHA",V[V.TAKE_OVER_EDITING=18]="TAKE_OVER_EDITING",V[V.ADD_TEXT_BELOW=19]="ADD_TEXT_BELOW",V[V.UPDATE_INLINE_ENTITY_DISPLAY_INFO=20]="UPDATE_INLINE_ENTITY_DISPLAY_INFO",V[V.ON_LINK_INSPECTOR_INPUT_CHANGE=21]="ON_LINK_INSPECTOR_INPUT_CHANGE",V[V.FOCUS_ASSOCIATED_SECTION=22]="FOCUS_ASSOCIATED_SECTION",V[V.UNFURL_URL=23]="UNFURL_URL",V[V.MODIFY_TABLE=24]="MODIFY_TABLE",V[V.RESUME_SNAPSHOTS=25]="RESUME_SNAPSHOTS",V[V.OPEN_POPOVER=26]="OPEN_POPOVER",V[V.CANCEL_HEADER_IMAGE=27]="CANCEL_HEADER_IMAGE",V[V.PREVIEW_HEADER_IMAGE=28]="PREVIEW_HEADER_IMAGE",V[V.SAVE_HEADER_IMAGE=29]="SAVE_HEADER_IMAGE",V[V.MESSAGE_UNFURL_CONFIRMATION=30]="MESSAGE_UNFURL_CONFIRMATION",V[V.UNFURL_URLS=31]="UNFURL_URLS",V[V.ADD_INVITED_USER_CARDS=32]="ADD_INVITED_USER_CARDS",V[V.SYNC_CONTENT_WIDTH=33]="SYNC_CONTENT_WIDTH",V[V.SET_DATE_MS=34]="SET_DATE_MS",V[V.SWITCH_LIST_VIEW=35]="SWITCH_LIST_VIEW",V[V.CONVERT_TABLE_TO_LIST=36]="CONVERT_TABLE_TO_LIST",V[V.HANDLE_MODAL_STATE_CHANGE=37]="HANDLE_MODAL_STATE_CHANGE",V[V.MODIFY_CALLOUT=38]="MODIFY_CALLOUT",V[V.AI_INSERTION_ACTION=40]="AI_INSERTION_ACTION"}(Or||(Or={})),function(V){V.MERGE="merge",V.UNMERGE="unmerge",V.CLEAR_CONTENTS="clear_contents"}(Zo||(Zo={})),function(V){V[V.SLACK_MESSAGE=0]="SLACK_MESSAGE",V[V.SLACK_FILE=1]="SLACK_FILE",V[V.SLACK_IMAGE_FILE=8]="SLACK_IMAGE_FILE",V[V.SLACK_DOCUMENT=2]="SLACK_DOCUMENT",V[V.SLACK_DOCUMENT_SECTION=3]="SLACK_DOCUMENT_SECTION",V[V.SLACK_PUBLIC_LINK=4]="SLACK_PUBLIC_LINK",V[V.SLACK_USER=5]="SLACK_USER",V[V.SLACK_CHANNEL=6]="SLACK_CHANNEL",V[V.SLACK_WORKFLOW=7]="SLACK_WORKFLOW",V[V.SLACK_WIDGET=9]="SLACK_WIDGET",V[V.SLACK_EMBED=10]="SLACK_EMBED",V[V.SLACK_LIST=11]="SLACK_LIST",V[V.SLACK_LIST_RECORD=12]="SLACK_LIST_RECORD",V[V.SLACK_SALESFORCE_RECORD=13]="SLACK_SALESFORCE_RECORD"}(Xn||(Xn={})),function(V){V[V.CARD=0]="CARD",V[V.INLINE=1]="INLINE",V[V.LINK=2]="LINK",V[V.WIDGET=3]="WIDGET"}(Dn||(Dn={})),function(V){V.IMAGE="image",V.HORIZONTAL_RULE="horizontal-rule",V.CHECKLIST="checklist",V.NUMBERED_LIST="numbered-list",V.BULLETED_LIST="bullet-list",V.TABLE="table",V.CODE="code",V.TEXT_H1_STYLE="large-heading",V.TEXT_H2_STYLE="medium-heading",V.TEXT_H3_STYLE="small-heading",V.TEXT_PLAIN_STYLE="plain",V.BLOCKQUOTE="blockquote",V.LAYOUT="layout",V.EMOJI="emoji",V.DATE_MENTION="date-mention",V.CALLOUT="callout"}(Ni||(Ni={})),function(V){V.PROFILE="profile",V.WORKFLOW="workflow",V.LINK="link",V.IMAGE="image",V.CANVAS="canvas",V.VIDEO="video",V.AUDIO="audio",V.FILE="file",V.LIST="list",V.SALESFORCE_RECORD="sfrecord"}(pi||(pi={})),function(V){V[V.DOCUMENT_SAVING=1]="DOCUMENT_SAVING",V[V.IO=2]="IO",V[V.LISTENER=3]="LISTENER",V[V.ELEMENT=4]="ELEMENT"}(ir||(ir={})),function(V){V[V.NONE=0]="NONE",V[V.DOCUMENT_FAILED_TO_LOAD=1]="DOCUMENT_FAILED_TO_LOAD",V[V.DOCUMENT_SAVE_FAILED=2]="DOCUMENT_SAVE_FAILED",V[V.DOCUMENT_SAVE_FAILED_CONNECTION_OFFLINE=3]="DOCUMENT_SAVE_FAILED_CONNECTION_OFFLINE",V[V.DOCUMENT_SAVE_FAILED_SERVER_NOT_REACHABLE=4]="DOCUMENT_SAVE_FAILED_SERVER_NOT_REACHABLE",V[V.DOCUMENT_TOO_LARGE_TO_SAVE=5]="DOCUMENT_TOO_LARGE_TO_SAVE",V[V.SESSION_EXPIRED=6]="SESSION_EXPIRED",V[V.THREAD_CLOSED=7]="THREAD_CLOSED",V[V.DOCUMENT_SAVE_FAILED_TO_COMPLETE=8]="DOCUMENT_SAVE_FAILED_TO_COMPLETE",V[V.DOCUMENT_SAVE_FAILED_DUE_TO_PREVIOUS_FAILURES=9]="DOCUMENT_SAVE_FAILED_DUE_TO_PREVIOUS_FAILURES",V[V.DOCUMENT_SAVE_FAILED_DUE_TO_THREAD_READ_ONLY=10]="DOCUMENT_SAVE_FAILED_DUE_TO_THREAD_READ_ONLY"}(br||(br={})),function(V){V[V.WRITE=0]="WRITE",V[V.READ=1]="READ",V[V.NONE=2]="NONE"}(zr||(zr={})),function(V){V.DOWNLOAD="download",V.EDIT_FILE="edit-file",V.OPEN_IN_NEW_WINDOW="open-in-new-window",V.PREVIEW_FILE="preview-file",V.VIEW_FULL_SCREEN="view-full-screen",V.SHARE="share"}(pr||(pr={})),function(V){V[V.HOVERCARD=0]="HOVERCARD",V[V.CARD=1]="CARD",V[V.HEADER=2]="HEADER",V[V.CONTROL_CONTEXT_MENU=3]="CONTROL_CONTEXT_MENU",V[V.SECTION_MENU=4]="SECTION_MENU",V[V.HYPERLINK_CONTEXT_MENU=5]="HYPERLINK_CONTEXT_MENU",V[V.HYPERLINK_INSPECTOR_TOOLBAR=6]="HYPERLINK_INSPECTOR_TOOLBAR",V[V.CONTROL_OBJECT_OBSERVER=7]="CONTROL_OBJECT_OBSERVER",V[V.TABLE_SELECTION_MENU=8]="TABLE_SELECTION_MENU",V[V.FILE_UPLOAD_BLOCKED_OVERLAY=9]="FILE_UPLOAD_BLOCKED_OVERLAY",V[V.EPHEMERAL_MESSAGE_MODAL_TRIGGER=10]="EPHEMERAL_MESSAGE_MODAL_TRIGGER",V[V.VARIABLE_EDIT_POPOVER=11]="VARIABLE_EDIT_POPOVER",V[V.CONTENT_REACTION_BAR=12]="CONTENT_REACTION_BAR",V[V.GUTTER_REACTION_ICON=13]="GUTTER_REACTION_ICON",V[V.HEADER_IMAGE_PICKER=14]="HEADER_IMAGE_PICKER",V[V.DATE_PICKER=15]="DATE_PICKER",V[V.MODAL_STATE_OBSERVER=16]="MODAL_STATE_OBSERVER",V[V.AI_ASSISTANT_OVERLAY=17]="AI_ASSISTANT_OVERLAY",V[V.EMOJI_PICKER=18]="EMOJI_PICKER"}(mr||(mr={})),function(V){V.NONE="none",V.THREAD_ROOT="thread_root",V.THREAD_COMPOSER="thread_composer"}(Ur||(Ur={})),function(V){V[V.COMMENT=1]="COMMENT",V[V.REACTION=2]="REACTION"}(io||(io={})),function(V){V.TEXT="text",V.USER="user",V.CHANNEL="channel",V.DATE="date"}(ur||(ur={})),function(V){V.INSERT="insert",V.EDIT="edit",V.REMOVE="remove",V.SHOW_CREATION_POPOVER="show_creation_popover",V.HIGHLIGHT="highlight"}(wo||(wo={})),function(V){V.INSERT="insert",V.INITIATE_DRAG="initiate_drag"}($r||($r={})),function(V){V.GREEN="green",V.JADE="jade",V.BLUE="blue",V.INDIGO="indigo",V.PURPLE="purple",V.PINK="pink",V.ORANGE="orange",V.BROWN="brown",V.GRAY="gray"}(Vo||(Vo={})),tn("Collab",hi),tn("dumpCollabDebugReport",function(){Hn.forEach((V,we)=>{we.getInitLog().then(ct=>{console.log(`Collab instance ${we.id} debug report:`,we.getBridgeDebugReport(!1),ct)})})}),window.JS_CLIENT_HASH="RKyjwRuh7Nqg_slA-Gn9Jg",window.QUIP_VERSION_NAME="quipbuild_2024_09_26T17_24_8dc89e5"},7492298763:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;l.DEBUG_BUILD=c},3778408185:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(1514424064),m=c(285364620),v=c(5625132121),g=c(5640133965),s=c(5283324899),a=c(5368312762);l.addClsInstrumentationHandler=u.addClsInstrumentationHandler,l.addFidInstrumentationHandler=u.addFidInstrumentationHandler,l.addLcpInstrumentationHandler=u.addLcpInstrumentationHandler,l.addPerformanceInstrumentationHandler=u.addPerformanceInstrumentationHandler,l.addTtfbInstrumentationHandler=u.addTtfbInstrumentationHandler,l.addPerformanceEntries=m.addPerformanceEntries,l.startTrackingInteractions=m.startTrackingInteractions,l.startTrackingLongTasks=m.startTrackingLongTasks,l.startTrackingWebVitals=m.startTrackingWebVitals,l.addClickKeypressInstrumentationHandler=v.addClickKeypressInstrumentationHandler,l.addHistoryInstrumentationHandler=g.addHistoryInstrumentationHandler,l.SENTRY_XHR_DATA_KEY=s.SENTRY_XHR_DATA_KEY,l.addXhrInstrumentationHandler=s.addXhrInstrumentationHandler,l.startTrackingINP=a.startTrackingINP},5625132121:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(6496036490),v=1e3;let g,s,a;function i(h){const p="dom";u.addHandler(p,h),u.maybeInstrument(p,e)}n(i,"addClickKeypressInstrumentationHandler");function e(){if(!m.WINDOW.document)return;const h=u.triggerHandlers.bind(null,"dom"),p=o(h,!0);m.WINDOW.document.addEventListener("click",p,!1),m.WINDOW.document.addEventListener("keypress",p,!1),["EventTarget","Node"].forEach(d=>{const y=m.WINDOW[d]&&m.WINDOW[d].prototype;!y||!y.hasOwnProperty||!y.hasOwnProperty("addEventListener")||(u.fill(y,"addEventListener",function(S){return function(b,_,C){if(b==="click"||b=="keypress")try{const w=this,R=w.__sentry_instrumentation_handlers__=w.__sentry_instrumentation_handlers__||{},O=R[b]=R[b]||{refCount:0};if(!O.handler){const D=o(h);O.handler=D,S.call(this,b,D,C)}O.refCount++}catch{}return S.call(this,b,_,C)}}),u.fill(y,"removeEventListener",function(S){return function(b,_,C){if(b==="click"||b=="keypress")try{const w=this,R=w.__sentry_instrumentation_handlers__||{},O=R[b];O&&(O.refCount--,O.refCount<=0&&(S.call(this,b,O.handler,C),O.handler=void 0,delete R[b]),Object.keys(R).length===0&&delete w.__sentry_instrumentation_handlers__)}catch{}return S.call(this,b,_,C)}}))})}n(e,"instrumentDOM");function t(h){if(h.type!==s)return!1;try{if(!h.target||h.target._sentryId!==a)return!1}catch{}return!0}n(t,"isSimilarToLastCapturedEvent");function r(h,p){return h!=="keypress"?!1:!p||!p.tagName?!0:!(p.tagName==="INPUT"||p.tagName==="TEXTAREA"||p.isContentEditable)}n(r,"shouldSkipDOMEvent");function o(h,p=!1){return d=>{if(!d||d._sentryCaptured)return;const y=f(d);if(r(d.type,y))return;u.addNonEnumerableProperty(d,"_sentryCaptured",!0),y&&!y._sentryId&&u.addNonEnumerableProperty(y,"_sentryId",u.uuid4());const S=d.type==="keypress"?"input":d.type;t(d)||(h({event:d,name:S,global:p}),s=d.type,a=y?y._sentryId:void 0),clearTimeout(g),g=m.WINDOW.setTimeout(()=>{a=void 0,s=void 0},v)}}n(o,"makeDOMEventHandler");function f(h){try{return h.target}catch{return null}}n(f,"getEventTarget"),l.addClickKeypressInstrumentationHandler=i,l.instrumentDOM=e},5640133965:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(6496036490);let v;function g(a){const i="history";u.addHandler(i,a),u.maybeInstrument(i,s)}n(g,"addHistoryInstrumentationHandler");function s(){if(!u.supportsHistory())return;const a=m.WINDOW.onpopstate;m.WINDOW.onpopstate=function(...e){const t=m.WINDOW.location.href,r=v;v=t;const o={from:r,to:t};if(u.triggerHandlers("history",o),a)try{return a.apply(this,e)}catch{}};function i(e){return function(...t){const r=t.length>2?t[2]:void 0;if(r){const o=v,f=String(r);v=f;const h={from:o,to:f};u.triggerHandlers("history",h)}return e.apply(this,t)}}n(i,"historyReplacementFunction"),u.fill(m.WINDOW.history,"pushState",i),u.fill(m.WINDOW.history,"replaceState",i)}n(s,"instrumentHistory"),l.addHistoryInstrumentationHandler=g},5283324899:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(6496036490),v="__sentry_xhr_v3__";function g(i){const e="xhr";u.addHandler(e,i),u.maybeInstrument(e,s)}n(g,"addXhrInstrumentationHandler");function s(){if(!m.WINDOW.XMLHttpRequest)return;const i=XMLHttpRequest.prototype;u.fill(i,"open",function(e){return function(...t){const r=u.timestampInSeconds()*1e3,o=u.isString(t[0])?t[0].toUpperCase():void 0,f=a(t[1]);if(!o||!f)return e.apply(this,t);this[v]={method:o,url:f,request_headers:{}},o==="POST"&&f.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const h=n(()=>{const p=this[v];if(p&&this.readyState===4){try{p.status_code=this.status}catch{}const d={endTimestamp:u.timestampInSeconds()*1e3,startTimestamp:r,xhr:this};u.triggerHandlers("xhr",d)}},"onreadystatechangeHandler");return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?u.fill(this,"onreadystatechange",function(p){return function(...d){return h(),p.apply(this,d)}}):this.addEventListener("readystatechange",h),u.fill(this,"setRequestHeader",function(p){return function(...d){const[y,S]=d,b=this[v];return b&&u.isString(y)&&u.isString(S)&&(b.request_headers[y.toLowerCase()]=S),p.apply(this,d)}}),e.apply(this,t)}}),u.fill(i,"send",function(e){return function(...t){const r=this[v];if(!r)return e.apply(this,t);t[0]!==void 0&&(r.body=t[0]);const o={startTimestamp:u.timestampInSeconds()*1e3,xhr:this};return u.triggerHandlers("xhr",o),e.apply(this,t)}})}n(s,"instrumentXHR");function a(i){if(u.isString(i))return i;try{return i.toString()}catch{}}n(a,"parseUrl"),l.SENTRY_XHR_DATA_KEY=v,l.addXhrInstrumentationHandler=g,l.instrumentXHR=s},285364620:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8482989710),m=c(7563271614),v=c(7492298763),g=c(1514424064),s=c(6496036490),a=c(2929564606),i=c(2273798110),e=c(8451898068),t=2147483647;let r=0,o={},f,h;function p(){const J=a.getBrowserPerformanceAPI();if(J&&m.browserPerformanceTimeOrigin){J.mark&&s.WINDOW.performance.mark("sentry-tracing-init");const Q=_(),oe=S(),$=b(),he=C();return()=>{Q(),oe(),$(),he()}}return()=>{}}n(p,"startTrackingWebVitals");function d(){g.addPerformanceInstrumentationHandler("longtask",({entries:J})=>{for(const Q of J){if(!u.getActiveSpan())return;const oe=a.msToSec(m.browserPerformanceTimeOrigin+Q.startTime),$=a.msToSec(Q.duration),he=u.startInactiveSpan({name:"Main UI thread blocked",op:"ui.long-task",startTime:oe,attributes:{[u.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}});he&&he.end(oe+$)}})}n(d,"startTrackingLongTasks");function y(){g.addPerformanceInstrumentationHandler("event",({entries:J})=>{for(const Q of J){if(!u.getActiveSpan())return;if(Q.name==="click"){const oe=a.msToSec(m.browserPerformanceTimeOrigin+Q.startTime),$=a.msToSec(Q.duration),he={name:m.htmlTreeAsString(Q.target),op:`ui.interaction.${Q.name}`,startTime:oe,attributes:{[u.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}},Ae=m.getComponentName(Q.target);Ae&&(he.attributes["ui.component_name"]=Ae);const Ee=u.startInactiveSpan(he);Ee&&Ee.end(oe+$)}}})}n(y,"startTrackingInteractions");function S(){return g.addClsInstrumentationHandler(({metric:J})=>{const Q=J.entries[J.entries.length-1];Q&&(v.DEBUG_BUILD&&m.logger.log("[Measurements] Adding CLS"),o.cls={value:J.value,unit:""},h=Q)},!0)}n(S,"_trackCLS");function b(){return g.addLcpInstrumentationHandler(({metric:J})=>{const Q=J.entries[J.entries.length-1];Q&&(v.DEBUG_BUILD&&m.logger.log("[Measurements] Adding LCP"),o.lcp={value:J.value,unit:"millisecond"},f=Q)},!0)}n(b,"_trackLCP");function _(){return g.addFidInstrumentationHandler(({metric:J})=>{const Q=J.entries[J.entries.length-1];if(!Q)return;const oe=a.msToSec(m.browserPerformanceTimeOrigin),$=a.msToSec(Q.startTime);v.DEBUG_BUILD&&m.logger.log("[Measurements] Adding FID"),o.fid={value:J.value,unit:"millisecond"},o["mark.fid"]={value:oe+$,unit:"second"}})}n(_,"_trackFID");function C(){return g.addTtfbInstrumentationHandler(({metric:J})=>{J.entries[J.entries.length-1]&&(v.DEBUG_BUILD&&m.logger.log("[Measurements] Adding TTFB"),o.ttfb={value:J.value,unit:"millisecond"})})}n(C,"_trackTtfb");function w(J){const Q=a.getBrowserPerformanceAPI();if(!Q||!s.WINDOW.performance.getEntries||!m.browserPerformanceTimeOrigin)return;v.DEBUG_BUILD&&m.logger.log("[Tracing] Adding & adjusting spans using Performance API");const oe=a.msToSec(m.browserPerformanceTimeOrigin),$=Q.getEntries(),{op:he,start_timestamp:Ae}=u.spanToJSON(J);if($.slice(r).forEach(Ee=>{const Oe=a.msToSec(Ee.startTime),be=a.msToSec(Ee.duration);if(!(he==="navigation"&&Ae&&oe+Oe<Ae))switch(Ee.entryType){case"navigation":{O(J,Ee,oe);break}case"mark":case"paint":case"measure":{R(J,Ee,Oe,be,oe);const De=e.getVisibilityWatcher(),ut=Ee.startTime<De.firstHiddenTime;Ee.name==="first-paint"&&ut&&(v.DEBUG_BUILD&&m.logger.log("[Measurements] Adding FP"),o.fp={value:Ee.startTime,unit:"millisecond"}),Ee.name==="first-contentful-paint"&&ut&&(v.DEBUG_BUILD&&m.logger.log("[Measurements] Adding FCP"),o.fcp={value:Ee.startTime,unit:"millisecond"});break}case"resource":{M(J,Ee,Ee.name,Oe,be,oe);break}}}),r=Math.max($.length-1,0),k(J),he==="pageload"){B(o),["fcp","fp","lcp"].forEach(Oe=>{if(!o[Oe]||!Ae||oe>=Ae)return;const be=o[Oe].value,De=oe+a.msToSec(be),ut=Math.abs((De-Ae)*1e3),St=ut-be;v.DEBUG_BUILD&&m.logger.log(`[Measurements] Normalized ${Oe} from ${be} to ${ut} (${St})`),o[Oe].value=ut});const Ee=o["mark.fid"];Ee&&o.fid&&(a.startAndEndSpan(J,Ee.value,Ee.value+a.msToSec(o.fid.value),{name:"first input delay",op:"ui.action",attributes:{[u.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}),delete o["mark.fid"]),"fcp"in o||delete o.cls,Object.keys(o).forEach(Oe=>{u.setMeasurement(Oe,o[Oe].value,o[Oe].unit)}),N(J)}f=void 0,h=void 0,o={}}n(w,"addPerformanceEntries");function R(J,Q,oe,$,he){const Ae=he+oe,Ee=Ae+$;return a.startAndEndSpan(J,Ae,Ee,{name:Q.name,op:Q.entryType,attributes:{[u.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.resource.browser.metrics"}}),Ae}n(R,"_addMeasureSpans");function O(J,Q,oe){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach($=>{D(J,Q,$,oe)}),D(J,Q,"secureConnection",oe,"TLS/SSL","connectEnd"),D(J,Q,"fetch",oe,"cache","domainLookupStart"),D(J,Q,"domainLookup",oe,"DNS"),I(J,Q,oe)}n(O,"_addNavigationSpans");function D(J,Q,oe,$,he,Ae){const Ee=Ae?Q[Ae]:Q[`${oe}End`],Oe=Q[`${oe}Start`];!Oe||!Ee||a.startAndEndSpan(J,$+a.msToSec(Oe),$+a.msToSec(Ee),{op:"browser",name:he||oe,attributes:{[u.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}})}n(D,"_addPerformanceNavigationTiming");function I(J,Q,oe){Q.responseEnd&&(a.startAndEndSpan(J,oe+a.msToSec(Q.requestStart),oe+a.msToSec(Q.responseEnd),{op:"browser",name:"request",attributes:{[u.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}),a.startAndEndSpan(J,oe+a.msToSec(Q.responseStart),oe+a.msToSec(Q.responseEnd),{op:"browser",name:"response",attributes:{[u.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}))}n(I,"_addRequest");function M(J,Q,oe,$,he,Ae){if(Q.initiatorType==="xmlhttprequest"||Q.initiatorType==="fetch")return;const Ee=m.parseUrl(oe),Oe={[u.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.resource.browser.metrics"};j(Oe,Q,"transferSize","http.response_transfer_size"),j(Oe,Q,"encodedBodySize","http.response_content_length"),j(Oe,Q,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in Q&&(Oe["resource.render_blocking_status"]=Q.renderBlockingStatus),Ee.protocol&&(Oe["url.scheme"]=Ee.protocol.split(":").pop()),Ee.host&&(Oe["server.address"]=Ee.host),Oe["url.same_origin"]=oe.includes(s.WINDOW.location.origin);const be=Ae+$,De=be+he;a.startAndEndSpan(J,be,De,{name:oe.replace(s.WINDOW.location.origin,""),op:Q.initiatorType?`resource.${Q.initiatorType}`:"resource.other",attributes:Oe})}n(M,"_addResourceSpans");function k(J){const Q=s.WINDOW.navigator;if(!Q)return;const oe=Q.connection;oe&&(oe.effectiveType&&J.setAttribute("effectiveConnectionType",oe.effectiveType),oe.type&&J.setAttribute("connectionType",oe.type),a.isMeasurementValue(oe.rtt)&&(o["connection.rtt"]={value:oe.rtt,unit:"millisecond"})),a.isMeasurementValue(Q.deviceMemory)&&J.setAttribute("deviceMemory",`${Q.deviceMemory} GB`),a.isMeasurementValue(Q.hardwareConcurrency)&&J.setAttribute("hardwareConcurrency",String(Q.hardwareConcurrency))}n(k,"_trackNavigator");function N(J){f&&(v.DEBUG_BUILD&&m.logger.log("[Measurements] Adding LCP Data"),f.element&&J.setAttribute("lcp.element",m.htmlTreeAsString(f.element)),f.id&&J.setAttribute("lcp.id",f.id),f.url&&J.setAttribute("lcp.url",f.url.trim().slice(0,200)),J.setAttribute("lcp.size",f.size)),h&&h.sources&&(v.DEBUG_BUILD&&m.logger.log("[Measurements] Adding CLS Data"),h.sources.forEach((Q,oe)=>J.setAttribute(`cls.source.${oe+1}`,m.htmlTreeAsString(Q.node))))}n(N,"_tagMetricInfo");function j(J,Q,oe,$){const he=Q[oe];he!=null&&he<t&&(J[$]=he)}n(j,"setResourceEntrySizeData");function B(J){const Q=i.getNavigationEntry();if(!Q)return;const{responseStart:oe,requestStart:$}=Q;$<=oe&&(v.DEBUG_BUILD&&m.logger.log("[Measurements] Adding TTFB Request Time"),J["ttfb.requestTime"]={value:oe-$,unit:"millisecond"})}n(B,"_addTtfbRequestTimeToMeasurements"),l._addMeasureSpans=R,l._addResourceSpans=M,l.addPerformanceEntries=w,l.startTrackingInteractions=y,l.startTrackingLongTasks=d,l.startTrackingWebVitals=p},5368312762:(H,l,c)=>{var{_optionalChain:u}=c(7563271614);Object.defineProperty(l,"__esModule",{value:!0});const m=c(8482989710),v=c(7563271614),g=c(1514424064),s=c(2929564606);function a(){if(s.getBrowserPerformanceAPI()&&v.browserPerformanceTimeOrigin){const r=e();return()=>{r()}}return()=>{}}n(a,"startTrackingINP");const i={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function e(){return g.addInpInstrumentationHandler(({metric:t})=>{const r=m.getClient();if(!r||t.value==null)return;const o=t.entries.find(N=>N.duration===t.value&&i[N.name]);if(!o)return;const f=i[o.name],h=r.getOptions(),p=s.msToSec(v.browserPerformanceTimeOrigin+o.startTime),d=s.msToSec(t.value),y=m.getCurrentScope(),S=m.getActiveSpan(),b=S?m.getRootSpan(S):void 0,_=b?m.spanToJSON(b).description:void 0,C=y.getUser(),w=r.getIntegrationByName("Replay"),R=w&&w.getReplayId(),O=C!==void 0?C.email||C.id||C.ip_address:void 0,D=u([y,"access",N=>N.getScopeData,"call",N=>N(),"access",N=>N.contexts,"optionalAccess",N=>N.profile,"optionalAccess",N=>N.profile_id]),I=v.htmlTreeAsString(o.target),M=v.dropUndefinedKeys({release:h.release,environment:h.environment,transaction:_,[m.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME]:t.value,user:O||void 0,profile_id:D||void 0,replay_id:R||void 0}),k=m.startInactiveSpan({name:I,op:`ui.interaction.${f}`,attributes:M,startTime:p,experimental:{standalone:!0}});k.addEvent("inp",{[m.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]:"millisecond",[m.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]:t.value}),k.end(p+d)})}n(e,"_trackINP"),l.startTrackingINP=a},1514424064:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(7492298763),v=c(8724048708),g=c(5639023535),s=c(2086611485),a=c(5927711655),i=c(9526061972),e=c(1514170081),t={},r={};let o,f,h,p,d;function y(Q,oe=!1){return N("cls",Q,O,o,oe)}n(y,"addClsInstrumentationHandler");function S(Q,oe=!1){return N("lcp",Q,I,h,oe)}n(S,"addLcpInstrumentationHandler");function b(Q){return N("fid",Q,D,f)}n(b,"addFidInstrumentationHandler");function _(Q){return N("ttfb",Q,M,p)}n(_,"addTtfbInstrumentationHandler");function C(Q){return N("inp",Q,k,d)}n(C,"addInpInstrumentationHandler");function w(Q,oe){return B(Q,oe),r[Q]||(j(Q),r[Q]=!0),J(Q,oe)}n(w,"addPerformanceInstrumentationHandler");function R(Q,oe){const $=t[Q];if(!(!$||!$.length))for(const he of $)try{he(oe)}catch(Ae){m.DEBUG_BUILD&&u.logger.error(`Error while triggering instrumentation handler.
Type: ${Q}
Name: ${u.getFunctionName(he)}
Error:`,Ae)}}n(R,"triggerHandlers");function O(){return v.onCLS(Q=>{R("cls",{metric:Q}),o=Q},{reportAllChanges:!0})}n(O,"instrumentCls");function D(){return g.onFID(Q=>{R("fid",{metric:Q}),f=Q})}n(D,"instrumentFid");function I(){return a.onLCP(Q=>{R("lcp",{metric:Q}),h=Q})}n(I,"instrumentLcp");function M(){return e.onTTFB(Q=>{R("ttfb",{metric:Q}),p=Q})}n(M,"instrumentTtfb");function k(){return s.onINP(Q=>{R("inp",{metric:Q}),d=Q})}n(k,"instrumentInp");function N(Q,oe,$,he,Ae=!1){B(Q,oe);let Ee;return r[Q]||(Ee=$(),r[Q]=!0),he&&oe({metric:he}),J(Q,oe,Ae?Ee:void 0)}n(N,"addMetricObserver");function j(Q){const oe={};Q==="event"&&(oe.durationThreshold=0),i.observe(Q,$=>{R(Q,{entries:$})},oe)}n(j,"instrumentPerformanceObserver");function B(Q,oe){t[Q]=t[Q]||[],t[Q].push(oe)}n(B,"addHandler");function J(Q,oe,$){return()=>{$&&$();const he=t[Q];if(!he)return;const Ae=he.indexOf(oe);Ae!==-1&&he.splice(Ae,1)}}n(J,"getCleanupCallback"),l.addClsInstrumentationHandler=y,l.addFidInstrumentationHandler=b,l.addInpInstrumentationHandler=C,l.addLcpInstrumentationHandler=S,l.addPerformanceInstrumentationHandler=w,l.addTtfbInstrumentationHandler=_},6496036490:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const m=c(7563271614).GLOBAL_OBJ;l.WINDOW=m},2929564606:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8482989710),m=c(6496036490);function v(i){return typeof i=="number"&&isFinite(i)}n(v,"isMeasurementValue");function g(i,e,t,{...r}){const o=u.spanToJSON(i).start_timestamp;return o&&o>e&&typeof i.updateStartTime=="function"&&i.updateStartTime(e),u.withActiveSpan(i,()=>{const f=u.startInactiveSpan({startTime:e,...r});return f&&f.end(t),f})}n(g,"startAndEndSpan");function s(){return m.WINDOW&&m.WINDOW.addEventListener&&m.WINDOW.performance}n(s,"getBrowserPerformanceAPI");function a(i){return i/1e3}n(a,"msToSec"),l.getBrowserPerformanceAPI=s,l.isMeasurementValue=v,l.msToSec=a,l.startAndEndSpan=g},8724048708:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(9035861842),m=c(4479988250),v=c(9526061972),g=c(7603883117),s=c(7841494492),a=c(2741739498),i=[.1,.25],e=n((t,r={})=>{a.onFCP(s.runOnce(()=>{const o=m.initMetric("CLS",0);let f,h=0,p=[];const d=n(S=>{S.forEach(b=>{if(!b.hadRecentInput){const _=p[0],C=p[p.length-1];h&&b.startTime-C.startTime<1e3&&b.startTime-_.startTime<5e3?(h+=b.value,p.push(b)):(h=b.value,p=[b])}}),h>o.value&&(o.value=h,o.entries=p,f())},"handleEntries"),y=v.observe("layout-shift",d);y&&(f=u.bindReporter(t,o,i,r.reportAllChanges),g.onHidden(()=>{d(y.takeRecords()),f(!0)}),setTimeout(f,0))}))},"onCLS");l.CLSThresholds=i,l.onCLS=e},5639023535:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(9035861842),m=c(8451898068),v=c(4479988250),g=c(9526061972),s=c(7603883117),a=c(7841494492),i=c(3420582863),e=[100,300],t=n((r,o={})=>{i.whenActivated(()=>{const f=m.getVisibilityWatcher(),h=v.initMetric("FID");let p;const d=n(b=>{b.startTime<f.firstHiddenTime&&(h.value=b.processingStart-b.startTime,h.entries.push(b),p(!0))},"handleEntry"),y=n(b=>{b.forEach(d)},"handleEntries"),S=g.observe("first-input",y);p=u.bindReporter(r,h,e,o.reportAllChanges),S&&s.onHidden(a.runOnce(()=>{y(S.takeRecords()),S.disconnect()}))})},"onFID");l.FIDThresholds=e,l.onFID=t},2086611485:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(6496036490),m=c(9035861842),v=c(4479988250),g=c(9526061972),s=c(7603883117),a=c(6842089089),i=c(3420582863),e=[200,500],t=0,r=n(()=>a.getInteractionCount()-t,"getInteractionCountForNavigation"),o=10,f=[],h={},p=n(S=>{const b=f[f.length-1],_=h[S.interactionId];if(_||f.length<o||S.duration>b.latency){if(_)_.entries.push(S),_.latency=Math.max(_.latency,S.duration);else{const C={id:S.interactionId,latency:S.duration,entries:[S]};h[C.id]=C,f.push(C)}f.sort((C,w)=>w.latency-C.latency),f.splice(o).forEach(C=>{delete h[C.id]})}},"processEntry"),d=n(()=>{const S=Math.min(f.length-1,Math.floor(r()/50));return f[S]},"estimateP98LongestInteraction"),y=n((S,b={})=>{i.whenActivated(()=>{a.initInteractionCountPolyfill();const _=v.initMetric("INP");let C;const w=n(O=>{O.forEach(I=>{I.interactionId&&p(I),I.entryType==="first-input"&&!f.some(k=>k.entries.some(N=>I.duration===N.duration&&I.startTime===N.startTime))&&p(I)});const D=d();D&&D.latency!==_.value&&(_.value=D.latency,_.entries=D.entries,C())},"handleEntries"),R=g.observe("event",w,{durationThreshold:b.durationThreshold!=null?b.durationThreshold:40});C=m.bindReporter(S,_,e,b.reportAllChanges),R&&("PerformanceEventTiming"in u.WINDOW&&"interactionId"in PerformanceEventTiming.prototype&&R.observe({type:"first-input",buffered:!0}),s.onHidden(()=>{w(R.takeRecords()),_.value<0&&r()>0&&(_.value=0,_.entries=[]),C(!0)}))})},"onINP");l.INPThresholds=e,l.onINP=y},5927711655:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(6496036490),m=c(9035861842),v=c(2520992508),g=c(8451898068),s=c(4479988250),a=c(9526061972),i=c(7603883117),e=c(7841494492),t=c(3420582863),r=[2500,4e3],o={},f=n((h,p={})=>{t.whenActivated(()=>{const d=g.getVisibilityWatcher(),y=s.initMetric("LCP");let S;const b=n(C=>{const w=C[C.length-1];w&&w.startTime<d.firstHiddenTime&&(y.value=Math.max(w.startTime-v.getActivationStart(),0),y.entries=[w],S())},"handleEntries"),_=a.observe("largest-contentful-paint",b);if(_){S=m.bindReporter(h,y,r,p.reportAllChanges);const C=e.runOnce(()=>{o[y.id]||(b(_.takeRecords()),_.disconnect(),o[y.id]=!0,S(!0))});["keydown","click"].forEach(w=>{u.WINDOW.document&&addEventListener(w,()=>setTimeout(C,0),!0)}),i.onHidden(C)}})},"onLCP");l.LCPThresholds=r,l.onLCP=f},9035861842:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=n((m,v)=>m>v[1]?"poor":m>v[0]?"needs-improvement":"good","getRating"),u=n((m,v,g,s)=>{let a,i;return e=>{v.value>=0&&(e||s)&&(i=v.value-(a||0),(i||a===void 0)&&(a=v.value,v.delta=i,v.rating=c(v.value,g),m(v)))}},"bindReporter");l.bindReporter=u},8117347597:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=n(()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,"generateUniqueID");l.generateUniqueID=c},2520992508:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(2273798110),m=n(()=>{const v=u.getNavigationEntry();return v&&v.activationStart||0},"getActivationStart");l.getActivationStart=m},2273798110:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(6496036490),m=n(()=>u.WINDOW.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],"getNavigationEntry");l.getNavigationEntry=m},8451898068:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(6496036490);let m=-1;const v=n(()=>{m=u.WINDOW.document.visibilityState==="hidden"&&!u.WINDOW.document.prerendering?0:1/0},"initHiddenTime"),g=n(i=>{u.WINDOW.document.visibilityState==="hidden"&&m>-1&&(m=i.type==="visibilitychange"?i.timeStamp:0,removeEventListener("visibilitychange",g,!0),removeEventListener("prerenderingchange",g,!0))},"onVisibilityUpdate"),s=n(()=>{addEventListener("visibilitychange",g,!0),addEventListener("prerenderingchange",g,!0)},"addChangeListeners"),a=n(()=>(u.WINDOW.document&&m<0&&(v(),s()),{get firstHiddenTime(){return m}}),"getVisibilityWatcher");l.getVisibilityWatcher=a},4479988250:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(6496036490),m=c(8117347597),v=c(2520992508),g=c(2273798110),s=n((a,i)=>{const e=g.getNavigationEntry();let t="navigate";return e&&(u.WINDOW.document&&u.WINDOW.document.prerendering||v.getActivationStart()>0?t="prerender":u.WINDOW.document&&u.WINDOW.document.wasDiscarded?t="restore":e.type&&(t=e.type.replace(/_/g,"-"))),{name:a,value:typeof i>"u"?-1:i,rating:"good",delta:0,entries:[],id:m.generateUniqueID(),navigationType:t}},"initMetric");l.initMetric=s},9526061972:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=n((u,m,v)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(u)){const g=new PerformanceObserver(s=>{Promise.resolve().then(()=>{m(s.getEntries())})});return g.observe(Object.assign({type:u,buffered:!0},v||{})),g}}catch{}},"observe");l.observe=c},7603883117:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(6496036490),m=n(v=>{const g=n(s=>{(s.type==="pagehide"||u.WINDOW.document&&u.WINDOW.document.visibilityState==="hidden")&&v(s)},"onHiddenOrPageHide");u.WINDOW.document&&(addEventListener("visibilitychange",g,!0),addEventListener("pagehide",g,!0))},"onHidden");l.onHidden=m},6842089089:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(9526061972);let m=0,v=1/0,g=0;const s=n(t=>{t.forEach(r=>{r.interactionId&&(v=Math.min(v,r.interactionId),g=Math.max(g,r.interactionId),m=g?(g-v)/7+1:0)})},"updateEstimate");let a;const i=n(()=>a?m:performance.interactionCount||0,"getInteractionCount"),e=n(()=>{"interactionCount"in performance||a||(a=u.observe("event",s,{type:"event",buffered:!0,durationThreshold:0}))},"initInteractionCountPolyfill");l.getInteractionCount=i,l.initInteractionCountPolyfill=e},7841494492:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=n(u=>{let m=!1;return v=>{m||(u(v),m=!0)}},"runOnce");l.runOnce=c},3420582863:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(6496036490),m=n(v=>{u.WINDOW.document&&u.WINDOW.document.prerendering?addEventListener("prerenderingchange",()=>v(),!0):v()},"whenActivated");l.whenActivated=m},2741739498:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(9035861842),m=c(2520992508),v=c(8451898068),g=c(4479988250),s=c(9526061972),a=c(3420582863),i=[1800,3e3],e=n((t,r={})=>{a.whenActivated(()=>{const o=v.getVisibilityWatcher(),f=g.initMetric("FCP");let h;const p=n(y=>{y.forEach(S=>{S.name==="first-contentful-paint"&&(d.disconnect(),S.startTime<o.firstHiddenTime&&(f.value=Math.max(S.startTime-m.getActivationStart(),0),f.entries.push(S),h(!0)))})},"handleEntries"),d=s.observe("paint",p);d&&(h=u.bindReporter(t,f,i,r.reportAllChanges))})},"onFCP");l.FCPThresholds=i,l.onFCP=e},1514170081:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(6496036490),m=c(9035861842),v=c(2520992508),g=c(2273798110),s=c(4479988250),a=c(3420582863),i=[800,1800],e=n(r=>{u.WINDOW.document&&u.WINDOW.document.prerendering?a.whenActivated(()=>e(r)):u.WINDOW.document&&u.WINDOW.document.readyState!=="complete"?addEventListener("load",()=>e(r),!0):setTimeout(r,0)},"whenReady"),t=n((r,o={})=>{const f=s.initMetric("TTFB"),h=m.bindReporter(r,f,i,o.reportAllChanges);e(()=>{const p=g.getNavigationEntry();if(p){const d=p.responseStart;if(d<=0||d>performance.now())return;f.value=Math.max(d-v.getActivationStart(),0),f.entries=[p],h(!0)}})},"onTTFB");l.TTFBThresholds=i,l.onTTFB=t},6049995776:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8482989710),m=c(7563271614),v=m.GLOBAL_OBJ,g=v.document,s=v.navigator,a="Report a Bug",i="Cancel",e="Send Bug Report",t="Confirm",r="Report a Bug",o="your.email@example.org",f="Email",h="What's the bug? What did you expect?",p="Description",d="Your Name",y="Name",S="Thank you for your report!",b="(required)",_="Add a screenshot",C="Remove screenshot",w="widget",R="api",O=5e3,D=n((Fe,tt={includeReplay:!0})=>{if(!Fe.message)throw new Error("Unable to submit feedback with empty message");const It=u.getClient();if(!It)throw new Error("No client setup, cannot send feedback.");const Qt=u.captureFeedback({source:R,url:m.getLocationHref(),...Fe},tt);return new Promise((cn,fn)=>{const ci=setTimeout(()=>fn("Unable to determine if Feedback was correctly sent."),5e3);It.on("afterSendEvent",(_i,bi)=>{if(_i.event_id===Qt){if(clearTimeout(ci),bi&&typeof bi.statusCode=="number"&&(bi.statusCode<200||bi.statusCode>=300))return bi.statusCode===0?fn("Unable to send Feedback. This is because of network issues, or because you are using an ad-blocker."):fn("Unable to send Feedback. Invalid response from server.");cn(Qt)}})})},"sendFeedback"),I=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function M(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(s.userAgent)||!isSecureContext)}n(M,"isScreenshotSupported");function k(Fe,tt){return{...Fe,...tt,onFormOpen:()=>{tt.onFormOpen&&tt.onFormOpen(),Fe.onFormOpen&&Fe.onFormOpen()},onFormClose:()=>{tt.onFormClose&&tt.onFormClose(),Fe.onFormClose&&Fe.onFormClose()},onSubmitSuccess:It=>{tt.onSubmitSuccess&&tt.onSubmitSuccess(It),Fe.onSubmitSuccess&&Fe.onSubmitSuccess(It)},onSubmitError:It=>{tt.onSubmitError&&tt.onSubmitError(It),Fe.onSubmitError&&Fe.onSubmitError(It)},onFormSubmitted:()=>{tt.onFormSubmitted&&tt.onFormSubmitted(),Fe.onFormSubmitted&&Fe.onFormSubmitted()},themeDark:{...Fe.themeDark,...tt.themeDark},themeLight:{...Fe.themeLight,...tt.themeLight}}}n(k,"mergeOptions");function N(){const Fe=g.createElement("style");return Fe.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,Fe}n(N,"createActorStyles");function j(Fe,tt){return Object.entries(tt).forEach(([It,Qt])=>{Fe.setAttributeNS(null,It,Qt)}),Fe}n(j,"setAttributesNS");const B=20,J="http://www.w3.org/2000/svg";function Q(){const Fe=n(_i=>v.document.createElementNS(J,_i),"createElementNS"),tt=j(Fe("svg"),{width:`${B}`,height:`${B}`,viewBox:`0 0 ${B} ${B}`,fill:"var(--foreground)"}),It=j(Fe("g"),{clipPath:"url(#clip0_57_80)"}),Qt=j(Fe("path"),{["fill-rule"]:"evenodd",["clip-rule"]:"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});tt.appendChild(It).appendChild(Qt);const cn=Fe("defs"),fn=j(Fe("clipPath"),{id:"clip0_57_80"}),ci=j(Fe("rect"),{width:`${B}`,height:`${B}`,fill:"white"});return fn.appendChild(ci),cn.appendChild(fn),tt.appendChild(cn).appendChild(fn).appendChild(ci),tt}n(Q,"FeedbackIcon");function oe({triggerLabel:Fe,shadow:tt}){const It=g.createElement("button");if(It.type="button",It.className="widget__actor",It.ariaHidden="false",It.ariaLabel=Fe,It.appendChild(Q()),Fe){const cn=g.createElement("span");cn.appendChild(g.createTextNode(Fe)),It.appendChild(cn)}const Qt=N();return{el:It,appendToDom(){tt.appendChild(Qt),tt.appendChild(It)},removeFromDom(){tt.removeChild(It),tt.removeChild(Qt)},show(){It.ariaHidden="false"},hide(){It.ariaHidden="true"}}}n(oe,"Actor");const $="rgba(88, 74, 192, 1)",he={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:$,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},Ae={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:$,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(41, 35, 47, 0.5)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function Ee(Fe){return`
  --foreground: ${Fe.foreground};
  --background: ${Fe.background};
  --accent-foreground: ${Fe.accentForeground};
  --accent-background: ${Fe.accentBackground};
  --success-color: ${Fe.successColor};
  --error-color: ${Fe.errorColor};
  --border: ${Fe.border};
  --box-shadow: ${Fe.boxShadow};
  --outline: ${Fe.outline};
  --interactive-filter: ${Fe.interactiveFilter};
  `}n(Ee,"getThemedCssVariables");function Oe({colorScheme:Fe,themeDark:tt,themeLight:It}){const Qt=g.createElement("style");return Qt.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${Ee(Fe==="dark"?{...Ae,...tt}:{...he,...It})}
}

${Fe==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${Ee({...Ae,...tt})}
  }
}`:""}
}
`,Qt}n(Oe,"createMainStyles");const be=n(({lazyLoadIntegration:Fe,getModalIntegration:tt,getScreenshotIntegration:It})=>n(({id:cn="sentry-feedback",showBranding:fn=!0,autoInject:ci=!0,showEmail:_i=!0,showName:bi=!0,enableScreenshot:si=!0,useSentryUser:Ui={email:"email",name:"username"},isNameRequired:Nn=!1,isEmailRequired:Sr=!1,colorScheme:wi="system",themeLight:qr={},themeDark:uo={},addScreenshotButtonLabel:go=_,cancelButtonLabel:ji=i,confirmButtonLabel:Qi=t,emailLabel:_r=f,emailPlaceholder:Jr=o,formTitle:jo=r,isRequiredLabel:ea=b,messageLabel:gr=p,messagePlaceholder:ua=h,nameLabel:so=y,namePlaceholder:Jo=d,removeScreenshotButtonLabel:$a=C,submitButtonLabel:Qa=e,successMessageText:_a=S,triggerLabel:Wa=a,onFormOpen:za,onFormClose:Na,onSubmitSuccess:sa,onSubmitError:pa,onFormSubmitted:Ka}={})=>{const Lo={id:cn,autoInject:ci,showBranding:fn,isEmailRequired:Sr,isNameRequired:Nn,showEmail:_i,showName:bi,enableScreenshot:si,useSentryUser:Ui,colorScheme:wi,themeDark:uo,themeLight:qr,triggerLabel:Wa,cancelButtonLabel:ji,submitButtonLabel:Qa,confirmButtonLabel:Qi,formTitle:jo,emailLabel:_r,emailPlaceholder:Jr,messageLabel:gr,messagePlaceholder:ua,nameLabel:so,namePlaceholder:Jo,successMessageText:_a,isRequiredLabel:ea,addScreenshotButtonLabel:go,removeScreenshotButtonLabel:$a,onFormClose:Na,onFormOpen:za,onSubmitError:pa,onSubmitSuccess:sa,onFormSubmitted:Ka};let ma=null,Ja=[];const Ta=n(So=>{if(!ma){const Wo=g.createElement("div");Wo.id=String(So.id),g.body.appendChild(Wo),ma=Wo.attachShadow({mode:"open"}),ma.appendChild(Oe(So))}return ma},"_createShadow"),ns=n(async(So,Wo,Uo)=>{const ra=u.getClient(),oa=ra&&ra.getIntegrationByName(So);if(oa)return oa;const me=(Wo&&Wo()||await Fe(Uo))();return ra&&ra.addIntegration(me),me},"_findIntegration"),bs=n(async So=>{const Wo=So.enableScreenshot&&M(),[Uo,ra]=await Promise.all([ns("FeedbackModal",tt,"feedbackModalIntegration"),Wo?ns("FeedbackScreenshot",It,"feedbackScreenshotIntegration"):void 0]);if(!Uo)throw I&&m.logger.error("[Feedback] Missing feedback modal integration. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!");return Wo&&!ra&&I&&m.logger.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots."),Uo.createDialog({options:So,screenshotIntegration:Wo?ra:void 0,sendFeedback:D,shadow:Ta(So)})},"_loadAndRenderDialog"),da=n((So,Wo={})=>{const Uo=k(Lo,Wo),ra=typeof So=="string"?g.querySelector(So):typeof So.addEventListener=="function"?So:null;if(!ra)throw I&&m.logger.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let oa=null;const hs=n(async()=>{oa||(oa=await bs({...Uo,onFormClose:()=>{oa&&oa.close(),Uo.onFormClose&&Uo.onFormClose()},onFormSubmitted:()=>{oa&&oa.removeFromDom(),Uo.onFormSubmitted&&Uo.onFormSubmitted()}})),oa.appendToDom(),oa.open()},"handleClick");ra.addEventListener("click",hs);const me=n(()=>{Ja=Ja.filter(Ie=>Ie!==me),oa&&oa.removeFromDom(),oa=null,ra.removeEventListener("click",hs)},"unsubscribe");return Ja.push(me),me},"_attachTo"),fs=n((So={})=>{const Wo=Ta(Lo),Uo=oe({triggerLabel:Lo.triggerLabel,shadow:Wo}),ra=k(Lo,{...So,onFormOpen(){Uo.hide()},onFormClose(){Uo.show()},onFormSubmitted(){Uo.show()}});return da(Uo.el,ra),Uo},"_createActor");return{name:"Feedback",setupOnce(){!m.isBrowser()||!Lo.autoInject||fs().appendToDom()},attachTo:da,createWidget(So={}){const Wo=fs(k(Lo,So));return Wo.appendToDom(),Wo},async createForm(So={}){return bs(k(Lo,So))},remove(){ma&&(ma.parentElement&&ma.parentElement.remove(),ma=null),Ja.forEach(So=>So()),Ja=[]}}},"feedbackIntegration"),"buildFeedbackIntegration");function De(){const Fe=u.getClient();return Fe&&Fe.getIntegrationByName("Feedback")}n(De,"getFeedback");var ut,St,Rt,Ze,mt,At,Vt,dt={},Cn=[],gt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ut=Array.isArray;function en(Fe,tt){for(var It in tt)Fe[It]=tt[It];return Fe}n(en,"v$1");function sn(Fe){var tt=Fe.parentNode;tt&&tt.removeChild(Fe)}n(sn,"p$1");function $t(Fe,tt,It){var Qt,cn,fn,ci={};for(fn in tt)fn=="key"?Qt=tt[fn]:fn=="ref"?cn=tt[fn]:ci[fn]=tt[fn];if(arguments.length>2&&(ci.children=arguments.length>3?ut.call(arguments,2):It),typeof Fe=="function"&&Fe.defaultProps!=null)for(fn in Fe.defaultProps)ci[fn]===void 0&&(ci[fn]=Fe.defaultProps[fn]);return Rn(Fe,ci,Qt,cn,null)}n($t,"y$1");function Rn(Fe,tt,It,Qt,cn){var fn={type:Fe,props:tt,key:It,ref:Qt,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:cn??++Rt,__i:-1,__u:0};return cn==null&&St.vnode!=null&&St.vnode(fn),fn}n(Rn,"d$1");function di(Fe){return Fe.children}n(di,"g");function ii(Fe,tt){this.props=Fe,this.context=tt}n(ii,"b");function Kn(Fe,tt){if(tt==null)return Fe.__?Kn(Fe.__,Fe.__i+1):null;for(var It;tt<Fe.__k.length;tt++)if((It=Fe.__k[tt])!=null&&It.__e!=null)return It.__e;return typeof Fe.type=="function"?Kn(Fe):null}n(Kn,"m$1");function hi(Fe,tt,It){var Qt,cn=Fe.__v,fn=cn.__e,ci=Fe.__P;if(ci)return(Qt=en({},cn)).__v=cn.__v+1,St.vnode&&St.vnode(Qt),xe(ci,Qt,cn,Fe.__n,ci.ownerSVGElement!==void 0,32&cn.__u?[fn]:null,tt,fn??Kn(cn),!!(32&cn.__u),It),Qt.__.__k[Qt.__i]=Qt,Qt.__d=void 0,Qt.__e!=fn&&Ln(Qt),Qt}n(hi,"w$1");function Ln(Fe){var tt,It;if((Fe=Fe.__)!=null&&Fe.__c!=null){for(Fe.__e=Fe.__c.base=null,tt=0;tt<Fe.__k.length;tt++)if((It=Fe.__k[tt])!=null&&It.__e!=null){Fe.__e=Fe.__c.base=It.__e;break}return Ln(Fe)}}n(Ln,"k$1");function Hn(Fe){(!Fe.__d&&(Fe.__d=!0)&&Ze.push(Fe)&&!ui.__r++||mt!==St.debounceRendering)&&((mt=St.debounceRendering)||At)(ui)}n(Hn,"x$1");function ui(){var Fe,tt,It,Qt=[],cn=[];for(Ze.sort(Vt);Fe=Ze.shift();)Fe.__d&&(It=Ze.length,tt=hi(Fe,Qt,cn)||tt,It===0||Ze.length>It?(Dt(Qt,tt,cn),cn.length=Qt.length=0,tt=void 0,Ze.sort(Vt)):tt&&St.__c&&St.__c(tt,Cn));tt&&Dt(Qt,tt,cn),ui.__r=0}n(ui,"C$1");function jn(Fe,tt,It,Qt,cn,fn,ci,_i,bi,si,Ui){var Nn,Sr,wi,qr,uo,go=Qt&&Qt.__k||Cn,ji=tt.length;for(It.__d=bi,ri(It,tt,go),bi=It.__d,Nn=0;Nn<ji;Nn++)(wi=It.__k[Nn])!=null&&typeof wi!="boolean"&&typeof wi!="function"&&(Sr=wi.__i===-1?dt:go[wi.__i]||dt,wi.__i=Nn,xe(Fe,wi,Sr,cn,fn,ci,_i,bi,si,Ui),qr=wi.__e,wi.ref&&Sr.ref!=wi.ref&&(Sr.ref&&fe(Sr.ref,null,wi),Ui.push(wi.ref,wi.__c||qr,wi)),uo==null&&qr!=null&&(uo=qr),65536&wi.__u||Sr.__k===wi.__k?bi=ie(wi,bi,Fe):typeof wi.type=="function"&&wi.__d!==void 0?bi=wi.__d:qr&&(bi=qr.nextSibling),wi.__d=void 0,wi.__u&=-196609);It.__d=bi,It.__e=uo}n(jn,"P");function ri(Fe,tt,It){var Qt,cn,fn,ci,_i,bi=tt.length,si=It.length,Ui=si,Nn=0;for(Fe.__k=[],Qt=0;Qt<bi;Qt++)(cn=Fe.__k[Qt]=(cn=tt[Qt])==null||typeof cn=="boolean"||typeof cn=="function"?null:typeof cn=="string"||typeof cn=="number"||typeof cn=="bigint"||cn.constructor==String?Rn(null,cn,null,null,cn):Ut(cn)?Rn(di,{children:cn},null,null,null):cn.constructor===void 0&&cn.__b>0?Rn(cn.type,cn.props,cn.key,cn.ref?cn.ref:null,cn.__v):cn)!=null?(cn.__=Fe,cn.__b=Fe.__b+1,_i=Mt(cn,It,ci=Qt+Nn,Ui),cn.__i=_i,fn=null,_i!==-1&&(Ui--,(fn=It[_i])&&(fn.__u|=131072)),fn==null||fn.__v===null?(_i==-1&&Nn--,typeof cn.type!="function"&&(cn.__u|=65536)):_i!==ci&&(_i===ci+1?Nn++:_i>ci?Ui>bi-ci?Nn+=_i-ci:Nn--:Nn=_i<ci&&_i==ci-1?_i-ci:0,_i!==Qt+Nn&&(cn.__u|=65536))):(fn=It[Qt])&&fn.key==null&&fn.__e&&(fn.__e==Fe.__d&&(Fe.__d=Kn(fn)),et(fn,fn,!1),It[Qt]=null,Ui--);if(Ui)for(Qt=0;Qt<si;Qt++)(fn=It[Qt])!=null&&!(131072&fn.__u)&&(fn.__e==Fe.__d&&(Fe.__d=Kn(fn)),et(fn,fn))}n(ri,"S");function ie(Fe,tt,It){var Qt,cn;if(typeof Fe.type=="function"){for(Qt=Fe.__k,cn=0;Qt&&cn<Qt.length;cn++)Qt[cn]&&(Qt[cn].__=Fe,tt=ie(Qt[cn],tt,It));return tt}Fe.__e!=tt&&(It.insertBefore(Fe.__e,tt||null),tt=Fe.__e);do tt=tt&&tt.nextSibling;while(tt!=null&&tt.nodeType===8);return tt}n(ie,"$");function Mt(Fe,tt,It,Qt){var cn=Fe.key,fn=Fe.type,ci=It-1,_i=It+1,bi=tt[It];if(bi===null||bi&&cn==bi.key&&fn===bi.type)return It;if(Qt>(bi!=null&&!(131072&bi.__u)?1:0))for(;ci>=0||_i<tt.length;){if(ci>=0){if((bi=tt[ci])&&!(131072&bi.__u)&&cn==bi.key&&fn===bi.type)return ci;ci--}if(_i<tt.length){if((bi=tt[_i])&&!(131072&bi.__u)&&cn==bi.key&&fn===bi.type)return _i;_i++}}return-1}n(Mt,"I");function Ot(Fe,tt,It){tt[0]==="-"?Fe.setProperty(tt,It??""):Fe[tt]=It==null?"":typeof It!="number"||gt.test(tt)?It:It+"px"}n(Ot,"T");function Ht(Fe,tt,It,Qt,cn){var fn;e:if(tt==="style")if(typeof It=="string")Fe.style.cssText=It;else{if(typeof Qt=="string"&&(Fe.style.cssText=Qt=""),Qt)for(tt in Qt)It&&tt in It||Ot(Fe.style,tt,"");if(It)for(tt in It)Qt&&It[tt]===Qt[tt]||Ot(Fe.style,tt,It[tt])}else if(tt[0]==="o"&&tt[1]==="n")fn=tt!==(tt=tt.replace(/(PointerCapture)$|Capture$/i,"$1")),tt=tt.toLowerCase()in Fe?tt.toLowerCase().slice(2):tt.slice(2),Fe.l||(Fe.l={}),Fe.l[tt+fn]=It,It?Qt?It.u=Qt.u:(It.u=Date.now(),Fe.addEventListener(tt,fn?tn:hn,fn)):Fe.removeEventListener(tt,fn?tn:hn,fn);else{if(cn)tt=tt.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(tt!=="width"&&tt!=="height"&&tt!=="href"&&tt!=="list"&&tt!=="form"&&tt!=="tabIndex"&&tt!=="download"&&tt!=="rowSpan"&&tt!=="colSpan"&&tt!=="role"&&tt in Fe)try{Fe[tt]=It??"";break e}catch{}typeof It=="function"||(It==null||It===!1&&tt[4]!=="-"?Fe.removeAttribute(tt):Fe.setAttribute(tt,It))}}n(Ht,"A");function hn(Fe){if(this.l){var tt=this.l[Fe.type+!1];if(Fe.t){if(Fe.t<=tt.u)return}else Fe.t=Date.now();return tt(St.event?St.event(Fe):Fe)}}n(hn,"D$1");function tn(Fe){if(this.l)return this.l[Fe.type+!0](St.event?St.event(Fe):Fe)}n(tn,"L");function xe(Fe,tt,It,Qt,cn,fn,ci,_i,bi,si){var Ui,Nn,Sr,wi,qr,uo,go,ji,Qi,_r,Jr,jo,ea,gr,ua,so=tt.type;if(tt.constructor!==void 0)return null;128&It.__u&&(bi=!!(32&It.__u),fn=[_i=tt.__e=It.__e]),(Ui=St.__b)&&Ui(tt);e:if(typeof so=="function")try{if(ji=tt.props,Qi=(Ui=so.contextType)&&Qt[Ui.__c],_r=Ui?Qi?Qi.props.value:Ui.__:Qt,It.__c?go=(Nn=tt.__c=It.__c).__=Nn.__E:("prototype"in so&&so.prototype.render?tt.__c=Nn=new so(ji,_r):(tt.__c=Nn=new ii(ji,_r),Nn.constructor=so,Nn.render=nt),Qi&&Qi.sub(Nn),Nn.props=ji,Nn.state||(Nn.state={}),Nn.context=_r,Nn.__n=Qt,Sr=Nn.__d=!0,Nn.__h=[],Nn._sb=[]),Nn.__s==null&&(Nn.__s=Nn.state),so.getDerivedStateFromProps!=null&&(Nn.__s==Nn.state&&(Nn.__s=en({},Nn.__s)),en(Nn.__s,so.getDerivedStateFromProps(ji,Nn.__s))),wi=Nn.props,qr=Nn.state,Nn.__v=tt,Sr)so.getDerivedStateFromProps==null&&Nn.componentWillMount!=null&&Nn.componentWillMount(),Nn.componentDidMount!=null&&Nn.__h.push(Nn.componentDidMount);else{if(so.getDerivedStateFromProps==null&&ji!==wi&&Nn.componentWillReceiveProps!=null&&Nn.componentWillReceiveProps(ji,_r),!Nn.__e&&(Nn.shouldComponentUpdate!=null&&Nn.shouldComponentUpdate(ji,Nn.__s,_r)===!1||tt.__v===It.__v)){for(tt.__v!==It.__v&&(Nn.props=ji,Nn.state=Nn.__s,Nn.__d=!1),tt.__e=It.__e,tt.__k=It.__k,tt.__k.forEach(function(Jo){Jo&&(Jo.__=tt)}),Jr=0;Jr<Nn._sb.length;Jr++)Nn.__h.push(Nn._sb[Jr]);Nn._sb=[],Nn.__h.length&&ci.push(Nn);break e}Nn.componentWillUpdate!=null&&Nn.componentWillUpdate(ji,Nn.__s,_r),Nn.componentDidUpdate!=null&&Nn.__h.push(function(){Nn.componentDidUpdate(wi,qr,uo)})}if(Nn.context=_r,Nn.props=ji,Nn.__P=Fe,Nn.__e=!1,jo=St.__r,ea=0,"prototype"in so&&so.prototype.render){for(Nn.state=Nn.__s,Nn.__d=!1,jo&&jo(tt),Ui=Nn.render(Nn.props,Nn.state,Nn.context),gr=0;gr<Nn._sb.length;gr++)Nn.__h.push(Nn._sb[gr]);Nn._sb=[]}else do Nn.__d=!1,jo&&jo(tt),Ui=Nn.render(Nn.props,Nn.state,Nn.context),Nn.state=Nn.__s;while(Nn.__d&&++ea<25);Nn.state=Nn.__s,Nn.getChildContext!=null&&(Qt=en(en({},Qt),Nn.getChildContext())),Sr||Nn.getSnapshotBeforeUpdate==null||(uo=Nn.getSnapshotBeforeUpdate(wi,qr)),jn(Fe,Ut(ua=Ui!=null&&Ui.type===di&&Ui.key==null?Ui.props.children:Ui)?ua:[ua],tt,It,Qt,cn,fn,ci,_i,bi,si),Nn.base=tt.__e,tt.__u&=-161,Nn.__h.length&&ci.push(Nn),go&&(Nn.__E=Nn.__=null)}catch(Jo){tt.__v=null,bi||fn!=null?(tt.__e=_i,tt.__u|=bi?160:32,fn[fn.indexOf(_i)]=null):(tt.__e=It.__e,tt.__k=It.__k),St.__e(Jo,tt,It)}else fn==null&&tt.__v===It.__v?(tt.__k=It.__k,tt.__e=It.__e):tt.__e=Y(It.__e,tt,It,Qt,cn,fn,ci,bi,si);(Ui=St.diffed)&&Ui(tt)}n(xe,"M");function Dt(Fe,tt,It){for(var Qt=0;Qt<It.length;Qt++)fe(It[Qt],It[++Qt],It[++Qt]);St.__c&&St.__c(tt,Fe),Fe.some(function(cn){try{Fe=cn.__h,cn.__h=[],Fe.some(function(fn){fn.call(cn)})}catch(fn){St.__e(fn,cn.__v)}})}n(Dt,"j$1");function Y(Fe,tt,It,Qt,cn,fn,ci,_i,bi){var si,Ui,Nn,Sr,wi,qr,uo,go=It.props,ji=tt.props,Qi=tt.type;if(Qi==="svg"&&(cn=!0),fn!=null){for(si=0;si<fn.length;si++)if((wi=fn[si])&&"setAttribute"in wi==!!Qi&&(Qi?wi.localName===Qi:wi.nodeType===3)){Fe=wi,fn[si]=null;break}}if(Fe==null){if(Qi===null)return document.createTextNode(ji);Fe=cn?document.createElementNS("http://www.w3.org/2000/svg",Qi):document.createElement(Qi,ji.is&&ji),fn=null,_i=!1}if(Qi===null)go===ji||_i&&Fe.data===ji||(Fe.data=ji);else{if(fn=fn&&ut.call(Fe.childNodes),go=It.props||dt,!_i&&fn!=null)for(go={},si=0;si<Fe.attributes.length;si++)go[(wi=Fe.attributes[si]).name]=wi.value;for(si in go)wi=go[si],si=="children"||(si=="dangerouslySetInnerHTML"?Nn=wi:si==="key"||si in ji||Ht(Fe,si,null,wi,cn));for(si in ji)wi=ji[si],si=="children"?Sr=wi:si=="dangerouslySetInnerHTML"?Ui=wi:si=="value"?qr=wi:si=="checked"?uo=wi:si==="key"||_i&&typeof wi!="function"||go[si]===wi||Ht(Fe,si,wi,go[si],cn);if(Ui)_i||Nn&&(Ui.__html===Nn.__html||Ui.__html===Fe.innerHTML)||(Fe.innerHTML=Ui.__html),tt.__k=[];else if(Nn&&(Fe.innerHTML=""),jn(Fe,Ut(Sr)?Sr:[Sr],tt,It,Qt,cn&&Qi!=="foreignObject",fn,ci,fn?fn[0]:It.__k&&Kn(It,0),_i,bi),fn!=null)for(si=fn.length;si--;)fn[si]!=null&&sn(fn[si]);_i||(si="value",qr!==void 0&&(qr!==Fe[si]||Qi==="progress"&&!qr||Qi==="option"&&qr!==go[si])&&Ht(Fe,si,qr,go[si],!1),si="checked",uo!==void 0&&uo!==Fe[si]&&Ht(Fe,si,uo,go[si],!1))}return Fe}n(Y,"z$1");function fe(Fe,tt,It){try{typeof Fe=="function"?Fe(tt):Fe.current=tt}catch(Qt){St.__e(Qt,It)}}n(fe,"N");function et(Fe,tt,It){var Qt,cn;if(St.unmount&&St.unmount(Fe),(Qt=Fe.ref)&&(Qt.current&&Qt.current!==Fe.__e||fe(Qt,null,tt)),(Qt=Fe.__c)!=null){if(Qt.componentWillUnmount)try{Qt.componentWillUnmount()}catch(fn){St.__e(fn,tt)}Qt.base=Qt.__P=null,Fe.__c=void 0}if(Qt=Fe.__k)for(cn=0;cn<Qt.length;cn++)Qt[cn]&&et(Qt[cn],tt,It||typeof Fe.type!="function");It||Fe.__e==null||sn(Fe.__e),Fe.__=Fe.__e=Fe.__d=void 0}n(et,"O");function nt(Fe,tt,It){return this.constructor(Fe,It)}n(nt,"q$1");function nn(Fe,tt,It){var Qt,cn,fn,ci;St.__&&St.__(Fe,tt),cn=(Qt=typeof It=="function")?null:It&&It.__k||tt.__k,fn=[],ci=[],xe(tt,Fe=(!Qt&&It||tt).__k=$t(di,null,[Fe]),cn||dt,dt,tt.ownerSVGElement!==void 0,!Qt&&It?[It]:cn?null:tt.firstChild?ut.call(tt.childNodes):null,fn,!Qt&&It?It:cn?cn.__e:tt.firstChild,Qt,ci),Fe.__d=void 0,Dt(fn,Fe,ci)}n(nn,"B$1"),ut=Cn.slice,St={__e:function(Fe,tt,It,Qt){for(var cn,fn,ci;tt=tt.__;)if((cn=tt.__c)&&!cn.__)try{if((fn=cn.constructor)&&fn.getDerivedStateFromError!=null&&(cn.setState(fn.getDerivedStateFromError(Fe)),ci=cn.__d),cn.componentDidCatch!=null&&(cn.componentDidCatch(Fe,Qt||{}),ci=cn.__d),ci)return cn.__E=cn}catch(_i){Fe=_i}throw Fe}},Rt=0,ii.prototype.setState=function(Fe,tt){var It;It=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=en({},this.state),typeof Fe=="function"&&(Fe=Fe(en({},It),this.props)),Fe&&en(It,Fe),Fe!=null&&this.__v&&(tt&&this._sb.push(tt),Hn(this))},ii.prototype.forceUpdate=function(Fe){this.__v&&(this.__e=!0,Fe&&this.__h.push(Fe),Hn(this))},ii.prototype.render=di,Ze=[],At=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Vt=n(function(Fe,tt){return Fe.__v.__b-tt.__v.__b},"f$1"),ui.__r=0;var kt,Jt,Ke,vt,x=0,Ye=[],it=[],ft=St,ge=ft.__b,Zn=ft.__r,Xt=ft.diffed,pn=ft.__c,Bi=ft.unmount,Gn=ft.__;function yo(Fe,tt){ft.__h&&ft.__h(Jt,Fe,x||tt),x=0;var It=Jt.__H||(Jt.__H={__:[],__h:[]});return Fe>=It.__.length&&It.__.push({__V:it}),It.__[Fe]}n(yo,"h");function no(Fe){return x=1,Vi(br,Fe)}n(no,"p");function Vi(Fe,tt,It){var Qt=yo(kt++,2);if(Qt.t=Fe,!Qt.__c&&(Qt.__=[It?It(tt):br(void 0,tt),function(_i){var bi=Qt.__N?Qt.__N[0]:Qt.__[0],si=Qt.t(bi,_i);bi!==si&&(Qt.__N=[si,Qt.__[1]],Qt.__c.setState({}))}],Qt.__c=Jt,!Jt.u)){var cn=n(function(_i,bi,si){if(!Qt.__c.__H)return!0;var Ui=Qt.__c.__H.__.filter(function(Sr){return!!Sr.__c});if(Ui.every(function(Sr){return!Sr.__N}))return!fn||fn.call(this,_i,bi,si);var Nn=!1;return Ui.forEach(function(Sr){if(Sr.__N){var wi=Sr.__[0];Sr.__=Sr.__N,Sr.__N=void 0,wi!==Sr.__[0]&&(Nn=!0)}}),!(!Nn&&Qt.__c.props===_i)&&(!fn||fn.call(this,_i,bi,si))},"f");Jt.u=!0;var fn=Jt.shouldComponentUpdate,ci=Jt.componentWillUpdate;Jt.componentWillUpdate=function(_i,bi,si){if(this.__e){var Ui=fn;fn=void 0,cn(_i,bi,si),fn=Ui}ci&&ci.call(this,_i,bi,si)},Jt.shouldComponentUpdate=cn}return Qt.__N||Qt.__}n(Vi,"y");function or(Fe,tt){var It=yo(kt++,3);!ft.__s&&ir(It.__H,tt)&&(It.__=Fe,It.i=tt,Jt.__H.__h.push(It))}n(or,"_");function ki(Fe){return x=5,qi(function(){return{current:Fe}},[])}n(ki,"F");function qi(Fe,tt){var It=yo(kt++,7);return ir(It.__H,tt)?(It.__V=Fe(),It.i=tt,It.__h=Fe,It.__V):It.__}n(qi,"q");function Or(Fe,tt){return x=8,qi(function(){return Fe},tt)}n(Or,"x");function Zo(){for(var Fe;Fe=Ye.shift();)if(Fe.__P&&Fe.__H)try{Fe.__H.__h.forEach(Ni),Fe.__H.__h.forEach(pi),Fe.__H.__h=[]}catch(tt){Fe.__H.__h=[],ft.__e(tt,Fe.__v)}}n(Zo,"j"),ft.__b=function(Fe){Jt=null,ge&&ge(Fe)},ft.__=function(Fe,tt){tt.__k&&tt.__k.__m&&(Fe.__m=tt.__k.__m),Gn&&Gn(Fe,tt)},ft.__r=function(Fe){Zn&&Zn(Fe),kt=0;var tt=(Jt=Fe.__c).__H;tt&&(Ke===Jt?(tt.__h=[],Jt.__h=[],tt.__.forEach(function(It){It.__N&&(It.__=It.__N),It.__V=it,It.__N=It.i=void 0})):(tt.__h.forEach(Ni),tt.__h.forEach(pi),tt.__h=[],kt=0)),Ke=Jt},ft.diffed=function(Fe){Xt&&Xt(Fe);var tt=Fe.__c;tt&&tt.__H&&(tt.__H.__h.length&&(Ye.push(tt)!==1&&vt===ft.requestAnimationFrame||((vt=ft.requestAnimationFrame)||Dn)(Zo)),tt.__H.__.forEach(function(It){It.i&&(It.__H=It.i),It.__V!==it&&(It.__=It.__V),It.i=void 0,It.__V=it})),Ke=Jt=null},ft.__c=function(Fe,tt){tt.some(function(It){try{It.__h.forEach(Ni),It.__h=It.__h.filter(function(Qt){return!Qt.__||pi(Qt)})}catch(Qt){tt.some(function(cn){cn.__h&&(cn.__h=[])}),tt=[],ft.__e(Qt,It.__v)}}),pn&&pn(Fe,tt)},ft.unmount=function(Fe){Bi&&Bi(Fe);var tt,It=Fe.__c;It&&It.__H&&(It.__H.__.forEach(function(Qt){try{Ni(Qt)}catch(cn){tt=cn}}),It.__H=void 0,tt&&ft.__e(tt,It.__v))};var Xn=typeof requestAnimationFrame=="function";function Dn(Fe){var tt,It=n(function(){clearTimeout(Qt),Xn&&cancelAnimationFrame(tt),setTimeout(Fe)},"r"),Qt=setTimeout(It,100);Xn&&(tt=requestAnimationFrame(It))}n(Dn,"w");function Ni(Fe){var tt=Jt,It=Fe.__c;typeof It=="function"&&(Fe.__c=void 0,It()),Jt=tt}n(Ni,"z");function pi(Fe){var tt=Jt;Fe.__c=Fe.__(),Jt=tt}n(pi,"B");function ir(Fe,tt){return!Fe||Fe.length!==tt.length||tt.some(function(It,Qt){return It!==Fe[Qt]})}n(ir,"C");function br(Fe,tt){return typeof tt=="function"?tt(Fe):tt}n(br,"D");const zr="http://www.w3.org/2000/svg";function pr(){const Fe=n(Qt=>g.createElementNS(zr,Qt),"createElementNS"),tt=j(Fe("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),It=j(Fe("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return tt.appendChild(It),tt}n(pr,"SentryLogo");const mr="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/DialogHeader.tsx";function Ur({options:Fe}){const tt=qi(()=>({__html:pr().outerHTML}),[]);return $t("h2",{class:"dialog__header",__self:this,__source:{fileName:mr,lineNumber:16}},Fe.formTitle,Fe.showBranding?$t("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:tt,__self:this,__source:{fileName:mr,lineNumber:19}}):null)}n(Ur,"DialogHeader");function io(Fe,tt){const It=[];return tt.isNameRequired&&!Fe.name&&It.push(tt.nameLabel),tt.isEmailRequired&&!Fe.email&&It.push(tt.emailLabel),Fe.message||It.push(tt.messageLabel),It}n(io,"getMissingFields");const ur="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx";function wo(Fe,tt){const It=Fe.get(tt);return typeof It=="string"?It.trim():""}n(wo,"retrieveStringValue");function $r({options:Fe,defaultEmail:tt,defaultName:It,onFormClose:Qt,onSubmit:cn,onSubmitSuccess:fn,onSubmitError:ci,showEmail:_i,showName:bi,screenshotInput:si}){const{addScreenshotButtonLabel:Ui,removeScreenshotButtonLabel:Nn,cancelButtonLabel:Sr,emailLabel:wi,emailPlaceholder:qr,isEmailRequired:uo,isNameRequired:go,messageLabel:ji,messagePlaceholder:Qi,nameLabel:_r,namePlaceholder:Jr,submitButtonLabel:jo,isRequiredLabel:ea}=Fe,[gr,ua]=no(null),[so,Jo]=no(!1),$a=si&&si.input,[Qa,_a]=no(null),Wa=Or(sa=>{_a(sa),Jo(!1)},[]),za=Or(sa=>{const pa=io(sa,{emailLabel:wi,isEmailRequired:uo,isNameRequired:go,messageLabel:ji,nameLabel:_r});return pa.length>0?ua(`Please enter in the following required fields: ${pa.join(", ")}`):ua(null),pa.length===0},[wi,uo,go,ji,_r]),Na=Or(async sa=>{try{if(sa.preventDefault(),!(sa.target instanceof HTMLFormElement))return;const pa=new FormData(sa.target),Ka=await(si&&so?si.value():void 0),Lo={name:wo(pa,"name"),email:wo(pa,"email"),message:wo(pa,"message"),attachments:Ka?[Ka]:void 0};if(!za(Lo))return;try{await cn({name:Lo.name,email:Lo.email,message:Lo.message,source:w},{attachments:Lo.attachments}),fn(Lo)}catch(ma){I&&m.logger.error(ma),ua("There was a problem submitting feedback, please wait and try again."),ci(ma)}}catch{}},[si&&so,fn,ci]);return $t("form",{class:"form",onSubmit:Na,__self:this,__source:{fileName:ur,lineNumber:142}},$a&&so?$t($a,{onError:Wa,__self:this,__source:{fileName:ur,lineNumber:144}}):null,$t("div",{class:"form__right","data-sentry-feedback":!0,__self:this,__source:{fileName:ur,lineNumber:147}},$t("div",{class:"form__top",__self:this,__source:{fileName:ur,lineNumber:148}},gr?$t("div",{class:"form__error-container",__self:this,__source:{fileName:ur,lineNumber:149}},gr):null,bi?$t("label",{for:"name",class:"form__label",__self:this,__source:{fileName:ur,lineNumber:152}},$t(Vo,{label:_r,isRequiredLabel:ea,isRequired:go,__self:this,__source:{fileName:ur,lineNumber:153}}),$t("input",{class:"form__input",defaultValue:It,id:"name",name:"name",placeholder:Jr,required:go,type:"text",__self:this,__source:{fileName:ur,lineNumber:154}})):$t("input",{"aria-hidden":!0,value:It,name:"name",type:"hidden",__self:this,__source:{fileName:ur,lineNumber:165}}),_i?$t("label",{for:"email",class:"form__label",__self:this,__source:{fileName:ur,lineNumber:169}},$t(Vo,{label:wi,isRequiredLabel:ea,isRequired:uo,__self:this,__source:{fileName:ur,lineNumber:170}}),$t("input",{class:"form__input",defaultValue:tt,id:"email",name:"email",placeholder:qr,required:uo,type:"email",__self:this,__source:{fileName:ur,lineNumber:171}})):$t("input",{"aria-hidden":!0,value:tt,name:"email",type:"hidden",__self:this,__source:{fileName:ur,lineNumber:182}}),$t("label",{for:"message",class:"form__label",__self:this,__source:{fileName:ur,lineNumber:185}},$t(Vo,{label:ji,isRequiredLabel:ea,isRequired:!0,__self:this,__source:{fileName:ur,lineNumber:186}}),$t("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:Qi,required:!0,rows:5,__self:this,__source:{fileName:ur,lineNumber:187}})),$a?$t("label",{for:"screenshot",class:"form__label",__self:this,__source:{fileName:ur,lineNumber:199}},$t("button",{class:"btn btn--default",type:"button",onClick:()=>{_a(null),Jo(sa=>!sa)},__self:this,__source:{fileName:ur,lineNumber:200}},so?Nn:Ui),Qa?$t("div",{class:"form__error-container",__self:this,__source:{fileName:ur,lineNumber:210}},Qa.message):null):null),$t("div",{class:"btn-group",__self:this,__source:{fileName:ur,lineNumber:214}},$t("button",{class:"btn btn--primary",type:"submit",__self:this,__source:{fileName:ur,lineNumber:215}},jo),$t("button",{class:"btn btn--default",type:"button",onClick:Qt,__self:this,__source:{fileName:ur,lineNumber:218}},Sr))))}n($r,"Form");function Vo({label:Fe,isRequired:tt,isRequiredLabel:It}){return $t("span",{class:"form__label__text",__self:this,__source:{fileName:ur,lineNumber:233}},Fe,tt&&$t("span",{class:"form__label__text--required",__self:this,__source:{fileName:ur,lineNumber:235}},It))}n(Vo,"LabelText");const V=16,we=17,ct="http://www.w3.org/2000/svg";function Wt(){const Fe=n(bi=>v.document.createElementNS(ct,bi),"createElementNS"),tt=j(Fe("svg"),{width:`${V}`,height:`${we}`,viewBox:`0 0 ${V} ${we}`,fill:"inherit"}),It=j(Fe("g"),{clipPath:"url(#clip0_57_156)"}),Qt=j(Fe("path"),{["fill-rule"]:"evenodd",["clip-rule"]:"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),cn=j(Fe("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});tt.appendChild(It).append(cn,Qt);const fn=Fe("defs"),ci=j(Fe("clipPath"),{id:"clip0_57_156"}),_i=j(Fe("rect"),{width:`${V}`,height:`${V}`,fill:"white",transform:"translate(0 0.5)"});return ci.appendChild(_i),fn.appendChild(ci),tt.appendChild(fn).appendChild(ci).appendChild(_i),tt}n(Wt,"SuccessIcon");const On="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Dialog.tsx";function fi({open:Fe,onFormSubmitted:tt,...It}){const Qt=It.options,cn=qi(()=>({__html:Wt().outerHTML}),[]),[fn,ci]=no(null),_i=Or(()=>{fn&&(clearTimeout(fn),ci(null)),tt()},[fn]),bi=Or(si=>{It.onSubmitSuccess(si),ci(setTimeout(()=>{tt(),ci(null)},O))},[tt]);return $t(di,{__self:this,__source:{fileName:On,lineNumber:47}},fn?$t("div",{class:"success__position",onClick:_i,__self:this,__source:{fileName:On,lineNumber:49}},$t("div",{class:"success__content",__self:this,__source:{fileName:On,lineNumber:50}},Qt.successMessageText,$t("span",{class:"success__icon",dangerouslySetInnerHTML:cn,__self:this,__source:{fileName:On,lineNumber:52}}))):$t("dialog",{class:"dialog",onClick:Qt.onFormClose,open:Fe,__self:this,__source:{fileName:On,lineNumber:56}},$t("div",{class:"dialog__position",__self:this,__source:{fileName:On,lineNumber:57}},$t("div",{class:"dialog__content",onClick:si=>{si.stopPropagation()},__self:this,__source:{fileName:On,lineNumber:58}},$t(Ur,{options:Qt,__self:this,__source:{fileName:On,lineNumber:65}}),$t($r,{...It,onSubmitSuccess:bi,__self:this,__source:{fileName:On,lineNumber:66}})))))}n(fi,"Dialog");const Li=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}
`,gi=`
.dialog__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}

.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,Mi=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form__right {
  width: var(--form-width, 272px);
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  flex: 1 0 auto;
}

@media (max-width: 600px) {
  .form__right {
    width: auto;
  }
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-foreground);
  fill: var(--error-foreground);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,Oi=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,Yi=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function Cr(){const Fe=g.createElement("style");return Fe.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${Li}
${gi}
${Mi}
${Oi}
${Yi}
`,Fe}n(Cr,"createDialogStyles");const wr="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/integration.tsx";function Kr(){const Fe=u.getCurrentScope().getUser(),tt=u.getIsolationScope().getUser(),It=u.getGlobalScope().getUser();return Fe&&Object.keys(Fe).length?Fe:tt&&Object.keys(tt).length?tt:It}n(Kr,"getUser");const bo=n(()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:Fe,screenshotIntegration:tt,sendFeedback:It,shadow:Qt})=>{const cn=Qt,fn=Fe.useSentryUser,ci=Kr(),_i=g.createElement("div"),bi=Cr();let si="";const Ui={get el(){return _i},appendToDom(){!cn.contains(bi)&&!cn.contains(_i)&&(cn.appendChild(bi),cn.appendChild(_i))},removeFromDom(){cn.removeChild(_i),cn.removeChild(bi)},open(){Sr(!0),Fe.onFormOpen&&Fe.onFormOpen(),si=g.body.style.overflow,g.body.style.overflow="hidden"},close(){Sr(!1),g.body.style.overflow=si}},Nn=tt&&tt.createInput($t,Ui,Fe),Sr=n(wi=>{nn($t(fi,{options:Fe,screenshotInput:Nn,showName:Fe.showName||Fe.isNameRequired,showEmail:Fe.showEmail||Fe.isEmailRequired,defaultName:fn&&ci&&ci[fn.name]||"",defaultEmail:fn&&ci&&ci[fn.email]||"",onFormClose:()=>{Sr(!1),Fe.onFormClose&&Fe.onFormClose()},onSubmit:It,onSubmitSuccess:qr=>{Sr(!1),Fe.onSubmitSuccess&&Fe.onSubmitSuccess(qr)},onSubmitError:qr=>{Fe.onSubmitError&&Fe.onSubmitError(qr)},onFormSubmitted:()=>{Fe.onFormSubmitted&&Fe.onFormSubmitted()},open:wi,__self:void 0,__source:{fileName:wr,lineNumber:72}}),_i)},"renderContent");return Ui}}),"feedbackModalIntegration");function ia(){const Fe=g.createElement("style"),tt="#1A141F",It="#302735";return Fe.textContent=`
.editor {
  padding: 10px;
  padding-top: 65px;
  padding-bottom: 65px;
  flex-grow: 1;

  background-color: ${tt};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${tt} 8px,
      ${tt} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${It} 15px,
      ${It} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
}

.editor__canvas-container canvas {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.editor__crop-btn-group {
  padding: 8px;
  gap: 8px;
  border-radius: var(--menu-border-radius, 6px);
  background: var(--button-primary-background, var(--background));
  width: 175px;
  position: absolute;
}

.editor__crop-corner {
  width: 30px;
  height: 30px;
  position: absolute;
  background: none;
  border: 3px solid #ffffff;
}

.editor__crop-corner--top-left {
  cursor: nwse-resize;
  border-right: none;
  border-bottom: none;
}
.editor__crop-corner--top-right {
  cursor: nesw-resize;
  border-left: none;
  border-bottom: none;
}
.editor__crop-corner--bottom-left {
  cursor: nesw-resize;
  border-right: none;
  border-top: none;
}
.editor__crop-corner--bottom-right {
  cursor: nwse-resize;
  border-left: none;
  border-top: none;
}
`,Fe}n(ia,"createScreenshotInputStyles");const Fo=n(({onBeforeScreenshot:Fe,onScreenshot:tt,onAfterScreenshot:It,onError:Qt})=>{or(()=>{n(async()=>{Fe();const fn=await s.mediaDevices.getDisplayMedia({video:{width:v.innerWidth*v.devicePixelRatio,height:v.innerHeight*v.devicePixelRatio},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),ci=g.createElement("video");await new Promise((_i,bi)=>{ci.srcObject=fn,ci.onloadedmetadata=()=>{tt(ci),fn.getTracks().forEach(si=>si.stop()),_i()},ci.play().catch(bi)}),It()},"takeScreenshot")().catch(Qt)},[])},"useTakeScreenshot"),zi="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",co=30,Zr=3,Ao=co+Zr,No=v.devicePixelRatio,qo=n(Fe=>({x:Math.min(Fe.startX,Fe.endX),y:Math.min(Fe.startY,Fe.endY),width:Math.abs(Fe.startX-Fe.endX),height:Math.abs(Fe.startY-Fe.endY)}),"constructRect"),ca=n(Fe=>{const tt=Fe.clientHeight,It=Fe.clientWidth,Qt=Fe.width/Fe.height;let cn=tt*Qt,fn=tt;cn>It&&(cn=It,fn=It/Qt);const ci=(It-cn)/2,_i=(tt-fn)/2;return{startX:ci,startY:_i,endX:cn+ci,endY:fn+_i}},"getContainedSize");function Bo({imageBuffer:Fe,dialog:tt,options:It}){return n(function({onError:cn}){const fn=qi(()=>({__html:ia().innerText}),[]),ci=ki(null),_i=ki(null),bi=ki(null),[si,Ui]=no({startX:0,startY:0,endX:0,endY:0}),[Nn,Sr]=no(!1);or(()=>{v.addEventListener("resize",wi,!1)},[]);function wi(){const ji=bi.current,Qi=qo(ca(Fe));if(ji){ji.width=Qi.width*No,ji.height=Qi.height*No,ji.style.width=`${Qi.width}px`,ji.style.height=`${Qi.height}px`;const Jr=ji.getContext("2d");Jr&&Jr.scale(No,No)}const _r=_i.current;_r&&(_r.style.width=`${Qi.width}px`,_r.style.height=`${Qi.height}px`,_r.style.left=`${Qi.x}px`,_r.style.top=`${Qi.y}px`),Ui({startX:0,startY:0,endX:Qi.width,endY:Qi.height})}n(wi,"resizeCropper"),or(()=>{const ji=bi.current;if(!ji)return;const Qi=ji.getContext("2d");if(!Qi)return;const _r=qo(ca(Fe)),Jr=qo(si);Qi.clearRect(0,0,_r.width,_r.height),Qi.fillStyle="rgba(0, 0, 0, 0.5)",Qi.fillRect(0,0,_r.width,_r.height),Qi.clearRect(Jr.x,Jr.y,Jr.width,Jr.height),Qi.strokeStyle="#ffffff",Qi.lineWidth=3,Qi.strokeRect(Jr.x+1,Jr.y+1,Jr.width-2,Jr.height-2),Qi.strokeStyle="#000000",Qi.lineWidth=1,Qi.strokeRect(Jr.x+3,Jr.y+3,Jr.width-6,Jr.height-6)},[si]);function qr(ji,Qi){Sr(!1);const _r=uo(Qi),Jr=n(()=>{g.removeEventListener("mousemove",_r),g.removeEventListener("mouseup",Jr),Sr(!0)},"handleMouseUp");g.addEventListener("mouseup",Jr),g.addEventListener("mousemove",_r)}n(qr,"onGrabButton");const uo=Or(ji=>function(Qi){if(!bi.current)return;const _r=bi.current,Jr=_r.getBoundingClientRect(),jo=Qi.clientX-Jr.x,ea=Qi.clientY-Jr.y;switch(ji){case"top-left":Ui(gr=>({...gr,startX:Math.min(Math.max(0,jo),gr.endX-Ao),startY:Math.min(Math.max(0,ea),gr.endY-Ao)}));break;case"top-right":Ui(gr=>({...gr,endX:Math.max(Math.min(jo,_r.width/No),gr.startX+Ao),startY:Math.min(Math.max(0,ea),gr.endY-Ao)}));break;case"bottom-left":Ui(gr=>({...gr,startX:Math.min(Math.max(0,jo),gr.endX-Ao),endY:Math.max(Math.min(ea,_r.height/No),gr.startY+Ao)}));break;case"bottom-right":Ui(gr=>({...gr,endX:Math.max(Math.min(jo,_r.width/No),gr.startX+Ao),endY:Math.max(Math.min(ea,_r.height/No),gr.startY+Ao)}));break}},[]);function go(){const ji=g.createElement("canvas"),Qi=qo(ca(Fe)),_r=qo(si);ji.width=_r.width,ji.height=_r.height;const Jr=ji.getContext("2d");Jr&&Fe&&Jr.drawImage(Fe,_r.x/Qi.width*Fe.width,_r.y/Qi.height*Fe.height,_r.width/Qi.width*Fe.width,_r.height/Qi.height*Fe.height,0,0,_r.width,_r.height);const jo=Fe.getContext("2d");jo&&(jo.clearRect(0,0,Fe.width,Fe.height),Fe.width=ji.width,Fe.height=ji.height,jo.drawImage(ji,0,0),wi())}return n(go,"submit"),Fo({onBeforeScreenshot:Or(()=>{tt.el.style.display="none"},[]),onScreenshot:Or(ji=>{const Qi=Fe.getContext("2d");if(!Qi)throw new Error("Could not get canvas context");Fe.width=ji.videoWidth,Fe.height=ji.videoHeight,Qi.drawImage(ji,0,0)},[Fe]),onAfterScreenshot:Or(()=>{tt.el.style.display="block";const ji=ci.current;ji&&ji.appendChild(Fe),wi()},[]),onError:Or(ji=>{tt.el.style.display="block",cn(ji)},[])}),$t("div",{class:"editor",__self:this,__source:{fileName:zi,lineNumber:249}},$t("style",{dangerouslySetInnerHTML:fn,__self:this,__source:{fileName:zi,lineNumber:250}}),$t("div",{class:"editor__canvas-container",ref:ci,__self:this,__source:{fileName:zi,lineNumber:251}},$t("div",{class:"editor__crop-container",style:{position:"absolute"},ref:_i,__self:this,__source:{fileName:zi,lineNumber:252}},$t("canvas",{style:{position:"absolute"},ref:bi,__self:this,__source:{fileName:zi,lineNumber:253}}),$t(ba,{left:si.startX-Zr,top:si.startY-Zr,onGrabButton:qr,corner:"top-left",__self:this,__source:{fileName:zi,lineNumber:254}}),$t(ba,{left:si.endX-co+Zr,top:si.startY-Zr,onGrabButton:qr,corner:"top-right",__self:this,__source:{fileName:zi,lineNumber:260}}),$t(ba,{left:si.startX-Zr,top:si.endY-co+Zr,onGrabButton:qr,corner:"bottom-left",__self:this,__source:{fileName:zi,lineNumber:266}}),$t(ba,{left:si.endX-co+Zr,top:si.endY-co+Zr,onGrabButton:qr,corner:"bottom-right",__self:this,__source:{fileName:zi,lineNumber:272}}),$t("div",{style:{left:Math.max(0,si.endX-191),top:Math.max(0,si.endY+8),display:Nn?"flex":"none"},class:"editor__crop-btn-group",__self:this,__source:{fileName:zi,lineNumber:278}},$t("button",{onClick:ji=>{ji.preventDefault(),bi.current&&Ui({startX:0,startY:0,endX:bi.current.width/No,endY:bi.current.height/No}),Sr(!1)},class:"btn btn--default",__self:this,__source:{fileName:zi,lineNumber:286}},It.cancelButtonLabel),$t("button",{onClick:ji=>{ji.preventDefault(),go(),Sr(!1)},class:"btn btn--primary",__self:this,__source:{fileName:zi,lineNumber:303}},It.confirmButtonLabel)))))},"ScreenshotEditor")}n(Bo,"makeScreenshotEditorComponent");function ba({top:Fe,left:tt,corner:It,onGrabButton:Qt}){return $t("button",{class:`editor__crop-corner editor__crop-corner--${It} `,style:{top:Fe,left:tt},onMouseDown:cn=>{cn.preventDefault(),Qt(cn,It)},onClick:cn=>{cn.preventDefault()},__self:this,__source:{fileName:zi,lineNumber:333}})}n(ba,"CropCorner");const Ho=n(()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:(Fe,tt,It)=>{const Qt=g.createElement("canvas");return{input:Bo({h:Fe,imageBuffer:Qt,dialog:tt,options:It}),value:async()=>{const cn=await new Promise(fn=>{Qt.toBlob(fn,"image/png")});if(cn)return{data:new Uint8Array(await cn.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}),"feedbackScreenshotIntegration");l.buildFeedbackIntegration=be,l.feedbackModalIntegration=bo,l.feedbackScreenshotIntegration=Ho,l.getFeedback=De,l.sendFeedback=D},4947629935:(H,l,c)=>{var{_optionalChain:u}=c(7563271614);Object.defineProperty(l,"__esModule",{value:!0});const m=c(8482989710);var v;(function(Ze){Ze[Ze.Document=0]="Document",Ze[Ze.DocumentType=1]="DocumentType",Ze[Ze.Element=2]="Element",Ze[Ze.Text=3]="Text",Ze[Ze.CDATA=4]="CDATA",Ze[Ze.Comment=5]="Comment"})(v||(v={}));function g(Ze,mt){for(let At=Ze.classList.length;At--;){const Vt=Ze.classList[At];if(mt.test(Vt))return!0}return!1}n(g,"elementClassMatchesRegex");function s(Ze,mt,At=1/0,Vt=0){return!Ze||Ze.nodeType!==Ze.ELEMENT_NODE||Vt>At?-1:mt(Ze)?Vt:s(Ze.parentNode,mt,At,Vt+1)}n(s,"distanceToMatch");function a(Ze,mt){return At=>{const Vt=At;if(Vt===null)return!1;try{if(Ze){if(typeof Ze=="string"){if(Vt.matches(`.${Ze}`))return!0}else if(g(Vt,Ze))return!0}return!!(mt&&Vt.matches(mt))}catch{return!1}}}n(a,"createMatchPredicate");const i=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let e={map:{},getId(){return console.error(i),-1},getNode(){return console.error(i),null},removeNodeFromMap(){console.error(i)},has(){return console.error(i),!1},reset(){console.error(i)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(e=new Proxy(e,{get(Ze,mt,At){return mt==="map"&&console.error(i),Reflect.get(Ze,mt,At)}}));function t(Ze,mt,At,Vt,dt=window){const Cn=dt.Object.getOwnPropertyDescriptor(Ze,mt);return dt.Object.defineProperty(Ze,mt,Vt?At:{set(gt){y(()=>{At.set.call(this,gt)},0),Cn&&Cn.set&&Cn.set.call(this,gt)}}),()=>t(Ze,mt,Cn||{},!0)}n(t,"hookSetter");function r(Ze,mt,At){try{if(!(mt in Ze))return()=>{};const Vt=Ze[mt],dt=At(Vt);return typeof dt=="function"&&(dt.prototype=dt.prototype||{},Object.defineProperties(dt,{__rrweb_original__:{enumerable:!1,value:Vt}})),Ze[mt]=dt,()=>{Ze[mt]=Vt}}catch{return()=>{}}}n(r,"patch"),/[1-9][0-9]{12}/.test(Date.now().toString());function o(Ze){return Ze?Ze.nodeType===Ze.ELEMENT_NODE?Ze:Ze.parentElement:null}n(o,"closestElementOfNode");function f(Ze,mt,At,Vt,dt){if(!Ze)return!1;const Cn=o(Ze);if(!Cn)return!1;const gt=a(mt,At);if(!dt){const sn=Vt&&Cn.matches(Vt);return gt(Cn)&&!sn}const Ut=s(Cn,gt);let en=-1;return Ut<0?!1:(Vt&&(en=s(Cn,a(null,Vt))),Ut>-1&&en<0?!0:Ut<en)}n(f,"isBlocked");const h={};function p(Ze){const mt=h[Ze];if(mt)return mt;const At=window.document;let Vt=window[Ze];if(At&&typeof At.createElement=="function")try{const dt=At.createElement("iframe");dt.hidden=!0,At.head.appendChild(dt);const Cn=dt.contentWindow;Cn&&Cn[Ze]&&(Vt=Cn[Ze]),At.head.removeChild(dt)}catch{}return h[Ze]=Vt.bind(window)}n(p,"getImplementation");function d(...Ze){return p("requestAnimationFrame")(...Ze)}n(d,"onRequestAnimationFrame");function y(...Ze){return p("setTimeout")(...Ze)}n(y,"setTimeout");var S=(Ze=>(Ze[Ze["2D"]=0]="2D",Ze[Ze.WebGL=1]="WebGL",Ze[Ze.WebGL2=2]="WebGL2",Ze))(S||{});let b;function _(Ze){b=Ze}n(_,"registerErrorHandler");const C=n(Ze=>b?n((...At)=>{try{return Ze(...At)}catch(Vt){if(b&&b(Vt)===!0)return()=>{};throw Vt}},"rrwebWrapped"):Ze,"callbackWrapper");for(var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R=typeof Uint8Array>"u"?[]:new Uint8Array(256),O=0;O<w.length;O++)R[w.charCodeAt(O)]=O;var D=n(function(Ze){var mt=new Uint8Array(Ze),At,Vt=mt.length,dt="";for(At=0;At<Vt;At+=3)dt+=w[mt[At]>>2],dt+=w[(mt[At]&3)<<4|mt[At+1]>>4],dt+=w[(mt[At+1]&15)<<2|mt[At+2]>>6],dt+=w[mt[At+2]&63];return Vt%3===2?dt=dt.substring(0,dt.length-1)+"=":Vt%3===1&&(dt=dt.substring(0,dt.length-2)+"=="),dt},"encode");const I=new Map;function M(Ze,mt){let At=I.get(Ze);return At||(At=new Map,I.set(Ze,At)),At.has(mt)||At.set(mt,[]),At.get(mt)}n(M,"variableListFor");const k=n((Ze,mt,At)=>{if(!Ze||!(B(Ze,mt)||typeof Ze=="object"))return;const Vt=Ze.constructor.name,dt=M(At,Vt);let Cn=dt.indexOf(Ze);return Cn===-1&&(Cn=dt.length,dt.push(Ze)),Cn},"saveWebGLVar");function N(Ze,mt,At){if(Ze instanceof Array)return Ze.map(Vt=>N(Vt,mt,At));if(Ze===null)return Ze;if(Ze instanceof Float32Array||Ze instanceof Float64Array||Ze instanceof Int32Array||Ze instanceof Uint32Array||Ze instanceof Uint8Array||Ze instanceof Uint16Array||Ze instanceof Int16Array||Ze instanceof Int8Array||Ze instanceof Uint8ClampedArray)return{rr_type:Ze.constructor.name,args:[Object.values(Ze)]};if(Ze instanceof ArrayBuffer){const Vt=Ze.constructor.name,dt=D(Ze);return{rr_type:Vt,base64:dt}}else{if(Ze instanceof DataView)return{rr_type:Ze.constructor.name,args:[N(Ze.buffer,mt,At),Ze.byteOffset,Ze.byteLength]};if(Ze instanceof HTMLImageElement){const Vt=Ze.constructor.name,{src:dt}=Ze;return{rr_type:Vt,src:dt}}else if(Ze instanceof HTMLCanvasElement){const Vt="HTMLImageElement",dt=Ze.toDataURL();return{rr_type:Vt,src:dt}}else{if(Ze instanceof ImageData)return{rr_type:Ze.constructor.name,args:[N(Ze.data,mt,At),Ze.width,Ze.height]};if(B(Ze,mt)||typeof Ze=="object"){const Vt=Ze.constructor.name,dt=k(Ze,mt,At);return{rr_type:Vt,index:dt}}}}return Ze}n(N,"serializeArg");const j=n((Ze,mt,At)=>Ze.map(Vt=>N(Vt,mt,At)),"serializeArgs"),B=n((Ze,mt)=>{const Vt=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(dt=>typeof mt[dt]=="function");return Boolean(Vt.find(dt=>Ze instanceof mt[dt]))},"isInstanceOfWebGLObject");function J(Ze,mt,At,Vt,dt){const Cn=[],gt=Object.getOwnPropertyNames(mt.CanvasRenderingContext2D.prototype);for(const Ut of gt)try{if(typeof mt.CanvasRenderingContext2D.prototype[Ut]!="function")continue;const en=r(mt.CanvasRenderingContext2D.prototype,Ut,function(sn){return function(...$t){return f(this.canvas,At,Vt,dt,!0)||y(()=>{const Rn=j($t,mt,this);Ze(this.canvas,{type:S["2D"],property:Ut,args:Rn})},0),sn.apply(this,$t)}});Cn.push(en)}catch{const sn=t(mt.CanvasRenderingContext2D.prototype,Ut,{set($t){Ze(this.canvas,{type:S["2D"],property:Ut,args:[$t],setter:!0})}});Cn.push(sn)}return()=>{Cn.forEach(Ut=>Ut())}}n(J,"initCanvas2DMutationObserver");function Q(Ze){return Ze==="experimental-webgl"?"webgl":Ze}n(Q,"getNormalizedContextName");function oe(Ze,mt,At,Vt,dt){const Cn=[];try{const gt=r(Ze.HTMLCanvasElement.prototype,"getContext",function(Ut){return function(en,...sn){if(!f(this,mt,At,Vt,!0)){const $t=Q(en);if("__context"in this||(this.__context=$t),dt&&["webgl","webgl2"].includes($t))if(sn[0]&&typeof sn[0]=="object"){const Rn=sn[0];Rn.preserveDrawingBuffer||(Rn.preserveDrawingBuffer=!0)}else sn.splice(0,1,{preserveDrawingBuffer:!0})}return Ut.apply(this,[en,...sn])}});Cn.push(gt)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{Cn.forEach(gt=>gt())}}n(oe,"initCanvasContextObserver");function $(Ze,mt,At,Vt,dt,Cn,gt,Ut){const en=[],sn=Object.getOwnPropertyNames(Ze);for(const $t of sn)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes($t))try{if(typeof Ze[$t]!="function")continue;const Rn=r(Ze,$t,function(di){return function(...ii){const Kn=di.apply(this,ii);if(k(Kn,Ut,this),"tagName"in this.canvas&&!f(this.canvas,Vt,dt,Cn,!0)){const hi=j(ii,Ut,this),Ln={type:mt,property:$t,args:hi};At(this.canvas,Ln)}return Kn}});en.push(Rn)}catch{const di=t(Ze,$t,{set(ii){At(this.canvas,{type:mt,property:$t,args:[ii],setter:!0})}});en.push(di)}return en}n($,"patchGLPrototype");function he(Ze,mt,At,Vt,dt,Cn){const gt=[];return gt.push(...$(mt.WebGLRenderingContext.prototype,S.WebGL,Ze,At,Vt,dt,Cn,mt)),typeof mt.WebGL2RenderingContext<"u"&&gt.push(...$(mt.WebGL2RenderingContext.prototype,S.WebGL2,Ze,At,Vt,dt,Cn,mt)),()=>{gt.forEach(Ut=>Ut())}}n(he,"initCanvasWebGLMutationObserver");var Ae='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function Ee(){const Ze=new Blob([Ae]);return URL.createObjectURL(Ze)}n(Ee,"t");class Oe{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(mt){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(Rn,di)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(Rn)||this.pendingCanvasMutations.set(Rn,[]),this.pendingCanvasMutations.get(Rn).push(di)};const{sampling:At="all",win:Vt,blockClass:dt,blockSelector:Cn,unblockSelector:gt,maxCanvasSize:Ut,recordCanvas:en,dataURLOptions:sn,errorHandler:$t}=mt;this.mutationCb=mt.mutationCb,this.mirror=mt.mirror,this.options=mt,$t&&_($t),!mt.enableManualSnapshot&&C(()=>{en&&At==="all"&&this.initCanvasMutationObserver(Vt,dt,Cn,gt),en&&typeof At=="number"&&this.initCanvasFPSObserver(At,Vt,dt,Cn,gt,Ut,{dataURLOptions:sn})})()}initCanvasFPSObserver(mt,At,Vt,dt,Cn,gt,Ut){const en=oe(At,Vt,dt,Cn,!0),sn=this.takeSnapshot(!1,mt,At,Vt,dt,Cn,gt,Ut.dataURLOptions);this.resetObservers=()=>{en(),cancelAnimationFrame(sn)}}initCanvasMutationObserver(mt,At,Vt,dt){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const Cn=oe(mt,At,Vt,dt,!1),gt=J(this.processMutation.bind(this),mt,At,Vt,dt),Ut=he(this.processMutation.bind(this),mt,At,Vt,dt,this.mirror);this.resetObservers=()=>{Cn(),gt(),Ut()}}snapshot(mt){const{options:At}=this,Vt=this.takeSnapshot(!0,At.sampling==="all"?2:At.sampling||2,At.win,At.blockClass,At.blockSelector,At.unblockSelector,At.maxCanvasSize,At.dataURLOptions,mt);this.resetObservers=()=>{cancelAnimationFrame(Vt)}}takeSnapshot(mt,At,Vt,dt,Cn,gt,Ut,en,sn){const $t=new Map,Rn=new Worker(Ee());Rn.onmessage=Hn=>{const ui=Hn.data,{id:jn}=ui;if($t.set(jn,!1),!("base64"in ui))return;const{base64:ri,type:ie,width:Mt,height:Ot}=ui;this.mutationCb({id:jn,type:S["2D"],commands:[{property:"clearRect",args:[0,0,Mt,Ot]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:ri}],type:ie}]},0,0,Mt,Ot]}]})};const di=1e3/At;let ii=0,Kn;const hi=n(Hn=>{if(Hn)return[Hn];const ui=[];return Vt.document.querySelectorAll("canvas").forEach(jn=>{f(jn,dt,Cn,gt,!0)||ui.push(jn)}),ui},"getCanvas"),Ln=n(Hn=>{if(ii&&Hn-ii<di){Kn=d(Ln);return}ii=Hn,hi(sn).forEach(ui=>{const jn=this.mirror.getId(ui);if(!$t.get(jn)&&!(!ui.width||!ui.height)){if($t.set(jn,!0),!mt&&["webgl","webgl2"].includes(ui.__context)){const ri=ui.getContext(ui.__context);u([ri,"optionalAccess",ie=>ie.getContextAttributes,"call",ie=>ie(),"optionalAccess",ie=>ie.preserveDrawingBuffer])===!1&&ri.clear(ri.COLOR_BUFFER_BIT)}createImageBitmap(ui).then(ri=>{Rn.postMessage({id:jn,bitmap:ri,width:ui.width,height:ui.height,dataURLOptions:en,maxCanvasSize:Ut},[ri])}).catch(ri=>{C(()=>{throw ri})()})}}),Kn=d(Ln)},"takeCanvasSnapshots");return Kn=d(Ln),Kn}startPendingCanvasMutationFlusher(){d(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const mt=n(At=>{this.rafStamps.latestId=At,d(mt)},"setLatestRAFTimestamp");d(mt)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((mt,At)=>{const Vt=this.mirror.getId(At);this.flushPendingCanvasMutationFor(At,Vt)}),d(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(mt,At){if(this.frozen||this.locked)return;const Vt=this.pendingCanvasMutations.get(mt);if(!Vt||At===-1)return;const dt=Vt.map(gt=>{const{type:Ut,...en}=gt;return en}),{type:Cn}=Vt[0];this.mutationCb({id:At,type:Cn,commands:dt}),this.pendingCanvasMutations.delete(mt)}}n(Oe,"CanvasManager");const be={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},De="ReplayCanvas",ut=1280,St=n((Ze={})=>{const[mt,At]=Ze.maxCanvasSize||[],Vt={quality:Ze.quality||"medium",enableManualSnapshot:Ze.enableManualSnapshot,maxCanvasSize:[mt?Math.min(mt,ut):ut,At?Math.min(At,ut):ut]};let dt;const Cn=new Promise(gt=>dt=gt);return{name:De,getOptions(){const{quality:gt,enableManualSnapshot:Ut,maxCanvasSize:en}=Vt;return{enableManualSnapshot:Ut,recordCanvas:!0,getCanvasManager:sn=>{const $t=new Oe({...sn,enableManualSnapshot:Ut,maxCanvasSize:en,errorHandler:Rn=>{try{typeof Rn=="object"&&(Rn.__rrweb__=!0)}catch{}}});return dt($t),$t},...be[gt||"medium"]||be.medium}},async snapshot(gt){(await Cn).snapshot(gt)}}},"_replayCanvasIntegration"),Rt=m.defineIntegration(St);l.replayCanvasIntegration=Rt},6979168052:(H,l,c)=>{var{_nullishCoalesce:u,_optionalChain:m}=c(7563271614);Object.defineProperty(l,"__esModule",{value:!0});const v=c(8482989710),g=c(7563271614),s=c(3778408185),a=g.GLOBAL_OBJ,i="sentryReplaySession",e="replay_event",t="Unable to send Replay",r=3e5,o=9e5,f=5e3,h=5500,p=6e4,d=5e3,y=3,S=15e4,b=5e3,_=3e3,C=300,w=2e7,R=4999,O=15e3,D=36e5;function I(L,F){return L??F()}n(I,"_nullishCoalesce$1");function M(L){let F,K=L[0],pe=1;for(;pe<L.length;){const je=L[pe],ht=L[pe+1];if(pe+=2,(je==="optionalAccess"||je==="optionalCall")&&K==null)return;je==="access"||je==="optionalAccess"?(F=K,K=ht(K)):(je==="call"||je==="optionalCall")&&(K=ht((...Lt)=>K.call(F,...Lt)),F=void 0)}return K}n(M,"_optionalChain$5");var k;(function(L){L[L.Document=0]="Document",L[L.DocumentType=1]="DocumentType",L[L.Element=2]="Element",L[L.Text=3]="Text",L[L.CDATA=4]="CDATA",L[L.Comment=5]="Comment"})(k||(k={}));function N(L){return L.nodeType===L.ELEMENT_NODE}n(N,"isElement$1");function j(L){const F=M([L,"optionalAccess",K=>K.host]);return Boolean(M([F,"optionalAccess",K=>K.shadowRoot])===L)}n(j,"isShadowRoot");function B(L){return Object.prototype.toString.call(L)==="[object ShadowRoot]"}n(B,"isNativeShadowDom");function J(L){return L.includes(" background-clip: text;")&&!L.includes(" -webkit-background-clip: text;")&&(L=L.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),L}n(J,"fixBrowserCompatibilityIssuesInCSS");function Q(L){const{cssText:F}=L;if(F.split('"').length<3)return F;const K=["@import",`url(${JSON.stringify(L.href)})`];return L.layerName===""?K.push("layer"):L.layerName&&K.push(`layer(${L.layerName})`),L.supportsText&&K.push(`supports(${L.supportsText})`),L.media.length&&K.push(L.media.mediaText),K.join(" ")+";"}n(Q,"escapeImportStatement");function oe(L){try{const F=L.rules||L.cssRules;return F?J(Array.from(F,$).join("")):null}catch{return null}}n(oe,"stringifyStylesheet");function $(L){let F;if(Ae(L))try{F=oe(L.styleSheet)||Q(L)}catch{}else if(Ee(L)&&L.selectorText.includes(":"))return he(L.cssText);return F||L.cssText}n($,"stringifyRule");function he(L){const F=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return L.replace(F,"$1\\$2")}n(he,"fixSafariColons");function Ae(L){return"styleSheet"in L}n(Ae,"isCSSImportRule");function Ee(L){return"selectorText"in L}n(Ee,"isCSSStyleRule");class Oe{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(F){if(!F)return-1;const K=M([this,"access",pe=>pe.getMeta,"call",pe=>pe(F),"optionalAccess",pe=>pe.id]);return I(K,()=>-1)}getNode(F){return this.idNodeMap.get(F)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(F){return this.nodeMetaMap.get(F)||null}removeNodeFromMap(F){const K=this.getId(F);this.idNodeMap.delete(K),F.childNodes&&F.childNodes.forEach(pe=>this.removeNodeFromMap(pe))}has(F){return this.idNodeMap.has(F)}hasNode(F){return this.nodeMetaMap.has(F)}add(F,K){const pe=K.id;this.idNodeMap.set(pe,F),this.nodeMetaMap.set(F,K)}replace(F,K){const pe=this.getNode(F);if(pe){const je=this.nodeMetaMap.get(pe);je&&this.nodeMetaMap.set(K,je)}this.idNodeMap.set(F,K)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}n(Oe,"Mirror");function be(){return new Oe}n(be,"createMirror");function De({maskInputOptions:L,tagName:F,type:K}){return F==="OPTION"&&(F="SELECT"),Boolean(L[F.toLowerCase()]||K&&L[K]||K==="password"||F==="INPUT"&&!K&&L.text)}n(De,"shouldMaskInput");function ut({isMasked:L,element:F,value:K,maskInputFn:pe}){let je=K||"";return L?(pe&&(je=pe(je,F)),"*".repeat(je.length)):je}n(ut,"maskInputValue");function St(L){return L.toLowerCase()}n(St,"toLowerCase");function Rt(L){return L.toUpperCase()}n(Rt,"toUpperCase");const Ze="__rrweb_original__";function mt(L){const F=L.getContext("2d");if(!F)return!0;const K=50;for(let pe=0;pe<L.width;pe+=K)for(let je=0;je<L.height;je+=K){const ht=F.getImageData,Lt=Ze in ht?ht[Ze]:ht;if(new Uint32Array(Lt.call(F,pe,je,Math.min(K,L.width-pe),Math.min(K,L.height-je)).data.buffer).some(Tt=>Tt!==0))return!1}return!0}n(mt,"is2DCanvasBlank");function At(L){const F=L.type;return L.hasAttribute("data-rr-is-password")?"password":F?St(F):null}n(At,"getInputType");function Vt(L,F,K){return F==="INPUT"&&(K==="radio"||K==="checkbox")?L.getAttribute("value")||"":L.value}n(Vt,"getInputValue");let dt=1;const Cn=new RegExp("[^a-z0-9-_:]"),gt=-2;function Ut(){return dt++}n(Ut,"genId");function en(L){if(L instanceof HTMLFormElement)return"form";const F=St(L.tagName);return Cn.test(F)?"div":F}n(en,"getValidTagName");function sn(L){let F="";return L.indexOf("//")>-1?F=L.split("/").slice(0,3).join("/"):F=L.split("/")[0],F=F.split("?")[0],F}n(sn,"extractOrigin");let $t,Rn;const di=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,ii=/^(?:[a-z+]+:)?\/\//i,Kn=/^www\..*/i,hi=/^(data:)([^,]*),(.*)/i;function Ln(L,F){return(L||"").replace(di,(K,pe,je,ht,Lt,Bt)=>{const Tt=je||Lt||Bt,bn=pe||ht||"";if(!Tt)return K;if(ii.test(Tt)||Kn.test(Tt))return`url(${bn}${Tt}${bn})`;if(hi.test(Tt))return`url(${bn}${Tt}${bn})`;if(Tt[0]==="/")return`url(${bn}${sn(F)+Tt}${bn})`;const zn=F.split("/"),Vn=Tt.split("/");zn.pop();for(const Qn of Vn)Qn!=="."&&(Qn===".."?zn.pop():zn.push(Qn));return`url(${bn}${zn.join("/")}${bn})`})}n(Ln,"absoluteToStylesheet");const Hn=/^[^ \t\n\r\u000c]+/,ui=/^[, \t\n\r\u000c]+/;function jn(L,F){if(F.trim()==="")return F;let K=0;function pe(ht){let Lt;const Bt=ht.exec(F.substring(K));return Bt?(Lt=Bt[0],K+=Lt.length,Lt):""}n(pe,"collectCharacters");const je=[];for(;pe(ui),!(K>=F.length);){let ht=pe(Hn);if(ht.slice(-1)===",")ht=ri(L,ht.substring(0,ht.length-1)),je.push(ht);else{let Lt="";ht=ri(L,ht);let Bt=!1;for(;;){const Tt=F.charAt(K);if(Tt===""){je.push((ht+Lt).trim());break}else if(Bt)Tt===")"&&(Bt=!1);else if(Tt===","){K+=1,je.push((ht+Lt).trim());break}else Tt==="("&&(Bt=!0);Lt+=Tt,K+=1}}}return je.join(", ")}n(jn,"getAbsoluteSrcsetString");function ri(L,F){if(!F||F.trim()==="")return F;const K=L.createElement("a");return K.href=F,K.href}n(ri,"absoluteToDoc");function ie(L){return Boolean(L.tagName==="svg"||L.ownerSVGElement)}n(ie,"isSVGElement");function Mt(){const L=document.createElement("a");return L.href="",L.href}n(Mt,"getHref");function Ot(L,F,K,pe,je,ht){return pe&&(K==="src"||K==="href"&&!(F==="use"&&pe[0]==="#")||K==="xlink:href"&&pe[0]!=="#"||K==="background"&&(F==="table"||F==="td"||F==="th")?ri(L,pe):K==="srcset"?jn(L,pe):K==="style"?Ln(pe,Mt()):F==="object"&&K==="data"?ri(L,pe):typeof ht=="function"?ht(K,pe,je):pe)}n(Ot,"transformAttribute");function Ht(L,F,K){return(L==="video"||L==="audio")&&F==="autoplay"}n(Ht,"ignoreAttribute");function hn(L,F,K,pe){try{if(pe&&L.matches(pe))return!1;if(typeof F=="string"){if(L.classList.contains(F))return!0}else for(let je=L.classList.length;je--;){const ht=L.classList[je];if(F.test(ht))return!0}if(K)return L.matches(K)}catch{}return!1}n(hn,"_isBlockedElement");function tn(L,F){for(let K=L.classList.length;K--;){const pe=L.classList[K];if(F.test(pe))return!0}return!1}n(tn,"elementClassMatchesRegex");function xe(L,F,K=1/0,pe=0){return!L||L.nodeType!==L.ELEMENT_NODE||pe>K?-1:F(L)?pe:xe(L.parentNode,F,K,pe+1)}n(xe,"distanceToMatch");function Dt(L,F){return K=>{const pe=K;if(pe===null)return!1;try{if(L){if(typeof L=="string"){if(pe.matches(`.${L}`))return!0}else if(tn(pe,L))return!0}return!!(F&&pe.matches(F))}catch{return!1}}}n(Dt,"createMatchPredicate");function Y(L,F,K,pe,je,ht){try{const Lt=L.nodeType===L.ELEMENT_NODE?L:L.parentElement;if(Lt===null)return!1;if(Lt.tagName==="INPUT"){const bn=Lt.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(bn))return!0}let Bt=-1,Tt=-1;if(ht){if(Tt=xe(Lt,Dt(pe,je)),Tt<0)return!0;Bt=xe(Lt,Dt(F,K),Tt>=0?Tt:1/0)}else{if(Bt=xe(Lt,Dt(F,K)),Bt<0)return!1;Tt=xe(Lt,Dt(pe,je),Bt>=0?Bt:1/0)}return Bt>=0?Tt>=0?Bt<=Tt:!0:Tt>=0?!1:!!ht}catch{}return!!ht}n(Y,"needMaskingText");function fe(L,F,K){const pe=L.contentWindow;if(!pe)return;let je=!1,ht;try{ht=pe.document.readyState}catch{return}if(ht!=="complete"){const Bt=setTimeout(()=>{je||(F(),je=!0)},K);L.addEventListener("load",()=>{clearTimeout(Bt),je=!0,F()});return}const Lt="about:blank";if(pe.location.href!==Lt||L.src===Lt||L.src==="")return setTimeout(F,0),L.addEventListener("load",F);L.addEventListener("load",F)}n(fe,"onceIframeLoaded");function et(L,F,K){let pe=!1,je;try{je=L.sheet}catch{return}if(je)return;const ht=setTimeout(()=>{pe||(F(),pe=!0)},K);L.addEventListener("load",()=>{clearTimeout(ht),pe=!0,F()})}n(et,"onceStylesheetLoaded");function nt(L,F){const{doc:K,mirror:pe,blockClass:je,blockSelector:ht,unblockSelector:Lt,maskAllText:Bt,maskAttributeFn:Tt,maskTextClass:bn,unmaskTextClass:zn,maskTextSelector:Vn,unmaskTextSelector:Qn,inlineStylesheet:Ii,maskInputOptions:Ti={},maskTextFn:Zi,maskInputFn:yr,dataURLOptions:tr={},inlineImages:Gr,recordCanvas:Co,keepIframeSrcFn:Io,newlyAddedElement:Go=!1}=F,Xr=nn(K,pe);switch(L.nodeType){case L.DOCUMENT_NODE:return L.compatMode!=="CSS1Compat"?{type:k.Document,childNodes:[],compatMode:L.compatMode}:{type:k.Document,childNodes:[]};case L.DOCUMENT_TYPE_NODE:return{type:k.DocumentType,name:L.name,publicId:L.publicId,systemId:L.systemId,rootId:Xr};case L.ELEMENT_NODE:return Jt(L,{doc:K,blockClass:je,blockSelector:ht,unblockSelector:Lt,inlineStylesheet:Ii,maskAttributeFn:Tt,maskInputOptions:Ti,maskInputFn:yr,dataURLOptions:tr,inlineImages:Gr,recordCanvas:Co,keepIframeSrcFn:Io,newlyAddedElement:Go,rootId:Xr,maskAllText:Bt,maskTextClass:bn,unmaskTextClass:zn,maskTextSelector:Vn,unmaskTextSelector:Qn});case L.TEXT_NODE:return kt(L,{maskAllText:Bt,maskTextClass:bn,unmaskTextClass:zn,maskTextSelector:Vn,unmaskTextSelector:Qn,maskTextFn:Zi,maskInputOptions:Ti,maskInputFn:yr,rootId:Xr});case L.CDATA_SECTION_NODE:return{type:k.CDATA,textContent:"",rootId:Xr};case L.COMMENT_NODE:return{type:k.Comment,textContent:L.textContent||"",rootId:Xr};default:return!1}}n(nt,"serializeNode");function nn(L,F){if(!F.hasNode(L))return;const K=F.getId(L);return K===1?void 0:K}n(nn,"getRootId");function kt(L,F){const{maskAllText:K,maskTextClass:pe,unmaskTextClass:je,maskTextSelector:ht,unmaskTextSelector:Lt,maskTextFn:Bt,maskInputOptions:Tt,maskInputFn:bn,rootId:zn}=F,Vn=L.parentNode&&L.parentNode.tagName;let Qn=L.textContent;const Ii=Vn==="STYLE"?!0:void 0,Ti=Vn==="SCRIPT"?!0:void 0,Zi=Vn==="TEXTAREA"?!0:void 0;if(Ii&&Qn){try{L.nextSibling||L.previousSibling||M([L,"access",tr=>tr.parentNode,"access",tr=>tr.sheet,"optionalAccess",tr=>tr.cssRules])&&(Qn=oe(L.parentNode.sheet))}catch(tr){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${tr}`,L)}Qn=Ln(Qn,Mt())}Ti&&(Qn="SCRIPT_PLACEHOLDER");const yr=Y(L,pe,ht,je,Lt,K);if(!Ii&&!Ti&&!Zi&&Qn&&yr&&(Qn=Bt?Bt(Qn,L.parentElement):Qn.replace(/[\S]/g,"*")),Zi&&Qn&&(Tt.textarea||yr)&&(Qn=bn?bn(Qn,L.parentNode):Qn.replace(/[\S]/g,"*")),Vn==="OPTION"&&Qn){const tr=De({type:null,tagName:Vn,maskInputOptions:Tt});Qn=ut({isMasked:Y(L,pe,ht,je,Lt,tr),element:L,value:Qn,maskInputFn:bn})}return{type:k.Text,textContent:Qn||"",isStyle:Ii,rootId:zn}}n(kt,"serializeTextNode");function Jt(L,F){const{doc:K,blockClass:pe,blockSelector:je,unblockSelector:ht,inlineStylesheet:Lt,maskInputOptions:Bt={},maskAttributeFn:Tt,maskInputFn:bn,dataURLOptions:zn={},inlineImages:Vn,recordCanvas:Qn,keepIframeSrcFn:Ii,newlyAddedElement:Ti=!1,rootId:Zi,maskAllText:yr,maskTextClass:tr,unmaskTextClass:Gr,maskTextSelector:Co,unmaskTextSelector:Io}=F,Go=hn(L,pe,je,ht),Xr=en(L);let ar={};const ho=L.attributes.length;for(let cr=0;cr<ho;cr++){const Qr=L.attributes[cr];Qr.name&&!Ht(Xr,Qr.name,Qr.value)&&(ar[Qr.name]=Ot(K,Xr,St(Qr.name),Qr.value,L,Tt))}if(Xr==="link"&&Lt){const cr=Array.from(K.styleSheets).find($o=>$o.href===L.href);let Qr=null;cr&&(Qr=oe(cr)),Qr&&(delete ar.rel,delete ar.href,ar._cssText=Ln(Qr,cr.href))}if(Xr==="style"&&L.sheet&&!(L.innerText||L.textContent||"").trim().length){const cr=oe(L.sheet);cr&&(ar._cssText=Ln(cr,Mt()))}if(Xr==="input"||Xr==="textarea"||Xr==="select"||Xr==="option"){const cr=L,Qr=At(cr),$o=Vt(cr,Rt(Xr),Qr),va=cr.checked;if(Qr!=="submit"&&Qr!=="button"&&$o){const ha=Y(cr,tr,Co,Gr,Io,De({type:Qr,tagName:Rt(Xr),maskInputOptions:Bt}));ar.value=ut({isMasked:ha,element:cr,value:$o,maskInputFn:bn})}va&&(ar.checked=va)}if(Xr==="option"&&(L.selected&&!Bt.select?ar.selected=!0:delete ar.selected),Xr==="canvas"&&Qn){if(L.__context==="2d")mt(L)||(ar.rr_dataURL=L.toDataURL(zn.type,zn.quality));else if(!("__context"in L)){const cr=L.toDataURL(zn.type,zn.quality),Qr=document.createElement("canvas");Qr.width=L.width,Qr.height=L.height;const $o=Qr.toDataURL(zn.type,zn.quality);cr!==$o&&(ar.rr_dataURL=cr)}}if(Xr==="img"&&Vn){$t||($t=K.createElement("canvas"),Rn=$t.getContext("2d"));const cr=L,Qr=cr.crossOrigin;cr.crossOrigin="anonymous";const $o=n(()=>{cr.removeEventListener("load",$o);try{$t.width=cr.naturalWidth,$t.height=cr.naturalHeight,Rn.drawImage(cr,0,0),ar.rr_dataURL=$t.toDataURL(zn.type,zn.quality)}catch(va){console.warn(`Cannot inline img src=${cr.currentSrc}! Error: ${va}`)}Qr?ar.crossOrigin=Qr:cr.removeAttribute("crossorigin")},"recordInlineImage");cr.complete&&cr.naturalWidth!==0?$o():cr.addEventListener("load",$o)}if((Xr==="audio"||Xr==="video")&&(ar.rr_mediaState=L.paused?"paused":"played",ar.rr_mediaCurrentTime=L.currentTime),Ti||(L.scrollLeft&&(ar.rr_scrollLeft=L.scrollLeft),L.scrollTop&&(ar.rr_scrollTop=L.scrollTop)),Go){const{width:cr,height:Qr}=L.getBoundingClientRect();ar={class:ar.class,rr_width:`${cr}px`,rr_height:`${Qr}px`}}Xr==="iframe"&&!Ii(ar.src)&&(L.contentDocument||(ar.rr_src=ar.src),delete ar.src);let ta;try{customElements.get(Xr)&&(ta=!0)}catch{}return{type:k.Element,tagName:Xr,attributes:ar,childNodes:[],isSVG:ie(L)||void 0,needBlock:Go,rootId:Zi,isCustom:ta}}n(Jt,"serializeElementNode");function Ke(L){return L==null?"":L.toLowerCase()}n(Ke,"lowerIfExists");function vt(L,F){if(F.comment&&L.type===k.Comment)return!0;if(L.type===k.Element){if(F.script&&(L.tagName==="script"||L.tagName==="link"&&(L.attributes.rel==="preload"||L.attributes.rel==="modulepreload")&&L.attributes.as==="script"||L.tagName==="link"&&L.attributes.rel==="prefetch"&&typeof L.attributes.href=="string"&&L.attributes.href.endsWith(".js")))return!0;if(F.headFavicon&&(L.tagName==="link"&&L.attributes.rel==="shortcut icon"||L.tagName==="meta"&&(Ke(L.attributes.name).match(/^msapplication-tile(image|color)$/)||Ke(L.attributes.name)==="application-name"||Ke(L.attributes.rel)==="icon"||Ke(L.attributes.rel)==="apple-touch-icon"||Ke(L.attributes.rel)==="shortcut icon")))return!0;if(L.tagName==="meta"){if(F.headMetaDescKeywords&&Ke(L.attributes.name).match(/^description|keywords$/))return!0;if(F.headMetaSocial&&(Ke(L.attributes.property).match(/^(og|twitter|fb):/)||Ke(L.attributes.name).match(/^(og|twitter):/)||Ke(L.attributes.name)==="pinterest"))return!0;if(F.headMetaRobots&&(Ke(L.attributes.name)==="robots"||Ke(L.attributes.name)==="googlebot"||Ke(L.attributes.name)==="bingbot"))return!0;if(F.headMetaHttpEquiv&&L.attributes["http-equiv"]!==void 0)return!0;if(F.headMetaAuthorship&&(Ke(L.attributes.name)==="author"||Ke(L.attributes.name)==="generator"||Ke(L.attributes.name)==="framework"||Ke(L.attributes.name)==="publisher"||Ke(L.attributes.name)==="progid"||Ke(L.attributes.property).match(/^article:/)||Ke(L.attributes.property).match(/^product:/)))return!0;if(F.headMetaVerification&&(Ke(L.attributes.name)==="google-site-verification"||Ke(L.attributes.name)==="yandex-verification"||Ke(L.attributes.name)==="csrf-token"||Ke(L.attributes.name)==="p:domain_verify"||Ke(L.attributes.name)==="verify-v1"||Ke(L.attributes.name)==="verification"||Ke(L.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}n(vt,"slimDOMExcluded");function x(L,F){const{doc:K,mirror:pe,blockClass:je,blockSelector:ht,unblockSelector:Lt,maskAllText:Bt,maskTextClass:Tt,unmaskTextClass:bn,maskTextSelector:zn,unmaskTextSelector:Vn,skipChild:Qn=!1,inlineStylesheet:Ii=!0,maskInputOptions:Ti={},maskAttributeFn:Zi,maskTextFn:yr,maskInputFn:tr,slimDOMOptions:Gr,dataURLOptions:Co={},inlineImages:Io=!1,recordCanvas:Go=!1,onSerialize:Xr,onIframeLoad:ar,iframeLoadTimeout:ho=5e3,onStylesheetLoad:ta,stylesheetLoadTimeout:cr=5e3,keepIframeSrcFn:Qr=n(()=>!1,"keepIframeSrcFn"),newlyAddedElement:$o=!1}=F;let{preserveWhiteSpace:va=!0}=F;const ha=nt(L,{doc:K,mirror:pe,blockClass:je,blockSelector:ht,maskAllText:Bt,unblockSelector:Lt,maskTextClass:Tt,unmaskTextClass:bn,maskTextSelector:zn,unmaskTextSelector:Vn,inlineStylesheet:Ii,maskInputOptions:Ti,maskAttributeFn:Zi,maskTextFn:yr,maskInputFn:tr,dataURLOptions:Co,inlineImages:Io,recordCanvas:Go,keepIframeSrcFn:Qr,newlyAddedElement:$o});if(!ha)return console.warn(L,"not serialized"),null;let ja;pe.hasNode(L)?ja=pe.getId(L):vt(ha,Gr)||!va&&ha.type===k.Text&&!ha.isStyle&&!ha.textContent.replace(/^\s+|\s+$/gm,"").length?ja=gt:ja=Ut();const ko=Object.assign(ha,{id:ja});if(pe.add(L,ko),ja===gt)return null;Xr&&Xr(L);let Za=!Qn;if(ko.type===k.Element){Za=Za&&!ko.needBlock,delete ko.needBlock;const ya=L.shadowRoot;ya&&B(ya)&&(ko.isShadowHost=!0)}if((ko.type===k.Document||ko.type===k.Element)&&Za){Gr.headWhitespace&&ko.type===k.Element&&ko.tagName==="head"&&(va=!1);const ya={doc:K,mirror:pe,blockClass:je,blockSelector:ht,maskAllText:Bt,unblockSelector:Lt,maskTextClass:Tt,unmaskTextClass:bn,maskTextSelector:zn,unmaskTextSelector:Vn,skipChild:Qn,inlineStylesheet:Ii,maskInputOptions:Ti,maskAttributeFn:Zi,maskTextFn:yr,maskInputFn:tr,slimDOMOptions:Gr,dataURLOptions:Co,inlineImages:Io,recordCanvas:Go,preserveWhiteSpace:va,onSerialize:Xr,onIframeLoad:ar,iframeLoadTimeout:ho,onStylesheetLoad:ta,stylesheetLoadTimeout:cr,keepIframeSrcFn:Qr};for(const Xa of Array.from(L.childNodes)){const Aa=x(Xa,ya);Aa&&ko.childNodes.push(Aa)}if(N(L)&&L.shadowRoot)for(const Xa of Array.from(L.shadowRoot.childNodes)){const Aa=x(Xa,ya);Aa&&(B(L.shadowRoot)&&(Aa.isShadow=!0),ko.childNodes.push(Aa))}}return L.parentNode&&j(L.parentNode)&&B(L.parentNode)&&(ko.isShadow=!0),ko.type===k.Element&&ko.tagName==="iframe"&&fe(L,()=>{const ya=L.contentDocument;if(ya&&ar){const Xa=x(ya,{doc:ya,mirror:pe,blockClass:je,blockSelector:ht,unblockSelector:Lt,maskAllText:Bt,maskTextClass:Tt,unmaskTextClass:bn,maskTextSelector:zn,unmaskTextSelector:Vn,skipChild:!1,inlineStylesheet:Ii,maskInputOptions:Ti,maskAttributeFn:Zi,maskTextFn:yr,maskInputFn:tr,slimDOMOptions:Gr,dataURLOptions:Co,inlineImages:Io,recordCanvas:Go,preserveWhiteSpace:va,onSerialize:Xr,onIframeLoad:ar,iframeLoadTimeout:ho,onStylesheetLoad:ta,stylesheetLoadTimeout:cr,keepIframeSrcFn:Qr});Xa&&ar(L,Xa)}},ho),ko.type===k.Element&&ko.tagName==="link"&&ko.attributes.rel==="stylesheet"&&et(L,()=>{if(ta){const ya=x(L,{doc:K,mirror:pe,blockClass:je,blockSelector:ht,unblockSelector:Lt,maskAllText:Bt,maskTextClass:Tt,unmaskTextClass:bn,maskTextSelector:zn,unmaskTextSelector:Vn,skipChild:!1,inlineStylesheet:Ii,maskInputOptions:Ti,maskAttributeFn:Zi,maskTextFn:yr,maskInputFn:tr,slimDOMOptions:Gr,dataURLOptions:Co,inlineImages:Io,recordCanvas:Go,preserveWhiteSpace:va,onSerialize:Xr,onIframeLoad:ar,iframeLoadTimeout:ho,onStylesheetLoad:ta,stylesheetLoadTimeout:cr,keepIframeSrcFn:Qr});ya&&ta(L,ya)}},cr),ko}n(x,"serializeNodeWithId");function Ye(L,F){const{mirror:K=new Oe,blockClass:pe="rr-block",blockSelector:je=null,unblockSelector:ht=null,maskAllText:Lt=!1,maskTextClass:Bt="rr-mask",unmaskTextClass:Tt=null,maskTextSelector:bn=null,unmaskTextSelector:zn=null,inlineStylesheet:Vn=!0,inlineImages:Qn=!1,recordCanvas:Ii=!1,maskAllInputs:Ti=!1,maskAttributeFn:Zi,maskTextFn:yr,maskInputFn:tr,slimDOM:Gr=!1,dataURLOptions:Co,preserveWhiteSpace:Io,onSerialize:Go,onIframeLoad:Xr,iframeLoadTimeout:ar,onStylesheetLoad:ho,stylesheetLoadTimeout:ta,keepIframeSrcFn:cr=n(()=>!1,"keepIframeSrcFn")}=F||{};return x(L,{doc:L,mirror:K,blockClass:pe,blockSelector:je,unblockSelector:ht,maskAllText:Lt,maskTextClass:Bt,unmaskTextClass:Tt,maskTextSelector:bn,unmaskTextSelector:zn,skipChild:!1,inlineStylesheet:Vn,maskInputOptions:Ti===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:Ti===!1?{}:Ti,maskAttributeFn:Zi,maskTextFn:yr,maskInputFn:tr,slimDOMOptions:Gr===!0||Gr==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:Gr==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:Gr===!1?{}:Gr,dataURLOptions:Co,inlineImages:Qn,recordCanvas:Ii,preserveWhiteSpace:Io,onSerialize:Go,onIframeLoad:Xr,iframeLoadTimeout:ar,onStylesheetLoad:ho,stylesheetLoadTimeout:ta,keepIframeSrcFn:cr,newlyAddedElement:!1})}n(Ye,"snapshot");function it(L){let F,K=L[0],pe=1;for(;pe<L.length;){const je=L[pe],ht=L[pe+1];if(pe+=2,(je==="optionalAccess"||je==="optionalCall")&&K==null)return;je==="access"||je==="optionalAccess"?(F=K,K=ht(K)):(je==="call"||je==="optionalCall")&&(K=ht((...Lt)=>K.call(F,...Lt)),F=void 0)}return K}n(it,"_optionalChain$4");function ft(L,F,K=document){const pe={capture:!0,passive:!0};return K.addEventListener(L,F,pe),()=>K.removeEventListener(L,F,pe)}n(ft,"on");const ge=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Zn={map:{},getId(){return console.error(ge),-1},getNode(){return console.error(ge),null},removeNodeFromMap(){console.error(ge)},has(){return console.error(ge),!1},reset(){console.error(ge)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Zn=new Proxy(Zn,{get(L,F,K){return F==="map"&&console.error(ge),Reflect.get(L,F,K)}}));function Xt(L,F,K={}){let pe=null,je=0;return function(...ht){const Lt=Date.now();!je&&K.leading===!1&&(je=Lt);const Bt=F-(Lt-je),Tt=this;Bt<=0||Bt>F?(pe&&(Vo(pe),pe=null),je=Lt,L.apply(Tt,ht)):!pe&&K.trailing!==!1&&(pe=$r(()=>{je=K.leading===!1?0:Date.now(),pe=null,L.apply(Tt,ht)},Bt))}}n(Xt,"throttle$1");function pn(L,F,K,pe,je=window){const ht=je.Object.getOwnPropertyDescriptor(L,F);return je.Object.defineProperty(L,F,pe?K:{set(Lt){$r(()=>{K.set.call(this,Lt)},0),ht&&ht.set&&ht.set.call(this,Lt)}}),()=>pn(L,F,ht||{},!0)}n(pn,"hookSetter");function Bi(L,F,K){try{if(!(F in L))return()=>{};const pe=L[F],je=K(pe);return typeof je=="function"&&(je.prototype=je.prototype||{},Object.defineProperties(je,{__rrweb_original__:{enumerable:!1,value:pe}})),L[F]=je,()=>{L[F]=pe}}catch{return()=>{}}}n(Bi,"patch");let Gn=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Gn=n(()=>new Date().getTime(),"nowTimestamp"));function yo(L){const F=L.document;return{left:F.scrollingElement?F.scrollingElement.scrollLeft:L.pageXOffset!==void 0?L.pageXOffset:it([F,"optionalAccess",K=>K.documentElement,"access",K=>K.scrollLeft])||it([F,"optionalAccess",K=>K.body,"optionalAccess",K=>K.parentElement,"optionalAccess",K=>K.scrollLeft])||it([F,"optionalAccess",K=>K.body,"optionalAccess",K=>K.scrollLeft])||0,top:F.scrollingElement?F.scrollingElement.scrollTop:L.pageYOffset!==void 0?L.pageYOffset:it([F,"optionalAccess",K=>K.documentElement,"access",K=>K.scrollTop])||it([F,"optionalAccess",K=>K.body,"optionalAccess",K=>K.parentElement,"optionalAccess",K=>K.scrollTop])||it([F,"optionalAccess",K=>K.body,"optionalAccess",K=>K.scrollTop])||0}}n(yo,"getWindowScroll");function no(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}n(no,"getWindowHeight");function Vi(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}n(Vi,"getWindowWidth");function or(L){return L?L.nodeType===L.ELEMENT_NODE?L:L.parentElement:null}n(or,"closestElementOfNode");function ki(L,F,K,pe,je){if(!L)return!1;const ht=or(L);if(!ht)return!1;const Lt=Dt(F,K);if(!je){const bn=pe&&ht.matches(pe);return Lt(ht)&&!bn}const Bt=xe(ht,Lt);let Tt=-1;return Bt<0?!1:(pe&&(Tt=xe(ht,Dt(null,pe))),Bt>-1&&Tt<0?!0:Bt<Tt)}n(ki,"isBlocked");function qi(L,F){return F.getId(L)!==-1}n(qi,"isSerialized");function Or(L,F){return F.getId(L)===gt}n(Or,"isIgnored");function Zo(L,F){if(j(L))return!1;const K=F.getId(L);return F.has(K)?L.parentNode&&L.parentNode.nodeType===L.DOCUMENT_NODE?!1:L.parentNode?Zo(L.parentNode,F):!0:!0}n(Zo,"isAncestorRemoved");function Xn(L){return Boolean(L.changedTouches)}n(Xn,"legacy_isTouchEvent");function Dn(L=window){"NodeList"in L&&!L.NodeList.prototype.forEach&&(L.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in L&&!L.DOMTokenList.prototype.forEach&&(L.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...F)=>{let K=F[0];if(!(0 in F))throw new TypeError("1 argument is required");do if(this===K)return!0;while(K=K&&K.parentNode);return!1})}n(Dn,"polyfill");function Ni(L,F){return Boolean(L.nodeName==="IFRAME"&&F.getMeta(L))}n(Ni,"isSerializedIframe");function pi(L,F){return Boolean(L.nodeName==="LINK"&&L.nodeType===L.ELEMENT_NODE&&L.getAttribute&&L.getAttribute("rel")==="stylesheet"&&F.getMeta(L))}n(pi,"isSerializedStylesheet");function ir(L){return Boolean(it([L,"optionalAccess",F=>F.shadowRoot]))}n(ir,"hasShadowRoot");class br{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(F){return u(this.styleIDMap.get(F),()=>-1)}has(F){return this.styleIDMap.has(F)}add(F,K){if(this.has(F))return this.getId(F);let pe;return K===void 0?pe=this.id++:pe=K,this.styleIDMap.set(F,pe),this.idStyleMap.set(pe,F),pe}getStyle(F){return this.idStyleMap.get(F)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}n(br,"StyleSheetMirror");function zr(L){let F=null;return it([L,"access",K=>K.getRootNode,"optionalCall",K=>K(),"optionalAccess",K=>K.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&L.getRootNode().host&&(F=L.getRootNode().host),F}n(zr,"getShadowHost");function pr(L){let F=L,K;for(;K=zr(F);)F=K;return F}n(pr,"getRootShadowHost");function mr(L){const F=L.ownerDocument;if(!F)return!1;const K=pr(L);return F.contains(K)}n(mr,"shadowHostInDom");function Ur(L){const F=L.ownerDocument;return F?F.contains(L)||mr(L):!1}n(Ur,"inDom");const io={};function ur(L){const F=io[L];if(F)return F;const K=window.document;let pe=window[L];if(K&&typeof K.createElement=="function")try{const je=K.createElement("iframe");je.hidden=!0,K.head.appendChild(je);const ht=je.contentWindow;ht&&ht[L]&&(pe=ht[L]),K.head.removeChild(je)}catch{}return io[L]=pe.bind(window)}n(ur,"getImplementation");function wo(...L){return ur("requestAnimationFrame")(...L)}n(wo,"onRequestAnimationFrame");function $r(...L){return ur("setTimeout")(...L)}n($r,"setTimeout$1");function Vo(...L){return ur("clearTimeout")(...L)}n(Vo,"clearTimeout$1");var V=(L=>(L[L.DomContentLoaded=0]="DomContentLoaded",L[L.Load=1]="Load",L[L.FullSnapshot=2]="FullSnapshot",L[L.IncrementalSnapshot=3]="IncrementalSnapshot",L[L.Meta=4]="Meta",L[L.Custom=5]="Custom",L[L.Plugin=6]="Plugin",L))(V||{}),we=(L=>(L[L.Mutation=0]="Mutation",L[L.MouseMove=1]="MouseMove",L[L.MouseInteraction=2]="MouseInteraction",L[L.Scroll=3]="Scroll",L[L.ViewportResize=4]="ViewportResize",L[L.Input=5]="Input",L[L.TouchMove=6]="TouchMove",L[L.MediaInteraction=7]="MediaInteraction",L[L.StyleSheetRule=8]="StyleSheetRule",L[L.CanvasMutation=9]="CanvasMutation",L[L.Font=10]="Font",L[L.Log=11]="Log",L[L.Drag=12]="Drag",L[L.StyleDeclaration=13]="StyleDeclaration",L[L.Selection=14]="Selection",L[L.AdoptedStyleSheet=15]="AdoptedStyleSheet",L[L.CustomElement=16]="CustomElement",L))(we||{}),ct=(L=>(L[L.MouseUp=0]="MouseUp",L[L.MouseDown=1]="MouseDown",L[L.Click=2]="Click",L[L.ContextMenu=3]="ContextMenu",L[L.DblClick=4]="DblClick",L[L.Focus=5]="Focus",L[L.Blur=6]="Blur",L[L.TouchStart=7]="TouchStart",L[L.TouchMove_Departed=8]="TouchMove_Departed",L[L.TouchEnd=9]="TouchEnd",L[L.TouchCancel=10]="TouchCancel",L))(ct||{}),Wt=(L=>(L[L.Mouse=0]="Mouse",L[L.Pen=1]="Pen",L[L.Touch=2]="Touch",L))(Wt||{});function On(L){let F,K=L[0],pe=1;for(;pe<L.length;){const je=L[pe],ht=L[pe+1];if(pe+=2,(je==="optionalAccess"||je==="optionalCall")&&K==null)return;je==="access"||je==="optionalAccess"?(F=K,K=ht(K)):(je==="call"||je==="optionalCall")&&(K=ht((...Lt)=>K.call(F,...Lt)),F=void 0)}return K}n(On,"_optionalChain$3");function fi(L){return"__ln"in L}n(fi,"isNodeInLinkedList");class Li{constructor(){this.length=0,this.head=null,this.tail=null}get(F){if(F>=this.length)throw new Error("Position outside of list range");let K=this.head;for(let pe=0;pe<F;pe++)K=On([K,"optionalAccess",je=>je.next])||null;return K}addNode(F){const K={value:F,previous:null,next:null};if(F.__ln=K,F.previousSibling&&fi(F.previousSibling)){const pe=F.previousSibling.__ln.next;K.next=pe,K.previous=F.previousSibling.__ln,F.previousSibling.__ln.next=K,pe&&(pe.previous=K)}else if(F.nextSibling&&fi(F.nextSibling)&&F.nextSibling.__ln.previous){const pe=F.nextSibling.__ln.previous;K.previous=pe,K.next=F.nextSibling.__ln,F.nextSibling.__ln.previous=K,pe&&(pe.next=K)}else this.head&&(this.head.previous=K),K.next=this.head,this.head=K;K.next===null&&(this.tail=K),this.length++}removeNode(F){const K=F.__ln;this.head&&(K.previous?(K.previous.next=K.next,K.next?K.next.previous=K.previous:this.tail=K.previous):(this.head=K.next,this.head?this.head.previous=null:this.tail=null),F.__ln&&delete F.__ln,this.length--)}}n(Li,"DoubleLinkedList");const gi=n((L,F)=>`${L}@${F}`,"moveKey");class Mi{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=F=>{F.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const F=[],K=new Set,pe=new Li,je=n(Tt=>{let bn=Tt,zn=gt;for(;zn===gt;)bn=bn&&bn.nextSibling,zn=bn&&this.mirror.getId(bn);return zn},"getNextId"),ht=n(Tt=>{if(!Tt.parentNode||!Ur(Tt))return;const bn=j(Tt.parentNode)?this.mirror.getId(zr(Tt)):this.mirror.getId(Tt.parentNode),zn=je(Tt);if(bn===-1||zn===-1)return pe.addNode(Tt);const Vn=x(Tt,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:Qn=>{Ni(Qn,this.mirror)&&this.iframeManager.addIframe(Qn),pi(Qn,this.mirror)&&this.stylesheetManager.trackLinkElement(Qn),ir(Tt)&&this.shadowDomManager.addShadowRoot(Tt.shadowRoot,this.doc)},onIframeLoad:(Qn,Ii)=>{this.iframeManager.attachIframe(Qn,Ii),this.shadowDomManager.observeAttachShadow(Qn)},onStylesheetLoad:(Qn,Ii)=>{this.stylesheetManager.attachLinkElement(Qn,Ii)}});Vn&&(F.push({parentId:bn,nextId:zn,node:Vn}),K.add(Vn.id))},"pushAdd");for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const Tt of this.movedSet)Yi(this.removes,Tt,this.mirror)&&!this.movedSet.has(Tt.parentNode)||ht(Tt);for(const Tt of this.addedSet)!wr(this.droppedSet,Tt)&&!Yi(this.removes,Tt,this.mirror)||wr(this.movedSet,Tt)?ht(Tt):this.droppedSet.add(Tt);let Lt=null;for(;pe.length;){let Tt=null;if(Lt){const bn=this.mirror.getId(Lt.value.parentNode),zn=je(Lt.value);bn!==-1&&zn!==-1&&(Tt=Lt)}if(!Tt){let bn=pe.tail;for(;bn;){const zn=bn;if(bn=bn.previous,zn){const Vn=this.mirror.getId(zn.value.parentNode);if(je(zn.value)===-1)continue;if(Vn!==-1){Tt=zn;break}else{const Ii=zn.value;if(Ii.parentNode&&Ii.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const Ti=Ii.parentNode.host;if(this.mirror.getId(Ti)!==-1){Tt=zn;break}}}}}}if(!Tt){for(;pe.head;)pe.removeNode(pe.head.value);break}Lt=Tt.previous,pe.removeNode(Tt.value),ht(Tt.value)}const Bt={texts:this.texts.map(Tt=>({id:this.mirror.getId(Tt.node),value:Tt.value})).filter(Tt=>!K.has(Tt.id)).filter(Tt=>this.mirror.has(Tt.id)),attributes:this.attributes.map(Tt=>{const{attributes:bn}=Tt;if(typeof bn.style=="string"){const zn=JSON.stringify(Tt.styleDiff),Vn=JSON.stringify(Tt._unchangedStyles);zn.length<bn.style.length&&(zn+Vn).split("var(").length===bn.style.split("var(").length&&(bn.style=Tt.styleDiff)}return{id:this.mirror.getId(Tt.node),attributes:bn}}).filter(Tt=>!K.has(Tt.id)).filter(Tt=>this.mirror.has(Tt.id)),removes:this.removes,adds:F};!Bt.texts.length&&!Bt.attributes.length&&!Bt.removes.length&&!Bt.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(Bt))},this.processMutation=F=>{if(!Or(F.target,this.mirror))switch(F.type){case"characterData":{const K=F.target.textContent;!ki(F.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&K!==F.oldValue&&this.texts.push({value:Y(F.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&K?this.maskTextFn?this.maskTextFn(K,or(F.target)):K.replace(/[\S]/g,"*"):K,node:F.target});break}case"attributes":{const K=F.target;let pe=F.attributeName,je=F.target.getAttribute(pe);if(pe==="value"){const Lt=At(K),Bt=K.tagName;je=Vt(K,Bt,Lt);const Tt=De({maskInputOptions:this.maskInputOptions,tagName:Bt,type:Lt}),bn=Y(F.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,Tt);je=ut({isMasked:bn,element:K,value:je,maskInputFn:this.maskInputFn})}if(ki(F.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||je===F.oldValue)return;let ht=this.attributeMap.get(F.target);if(K.tagName==="IFRAME"&&pe==="src"&&!this.keepIframeSrcFn(je))if(!K.contentDocument)pe="rr_src";else return;if(ht||(ht={node:F.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(ht),this.attributeMap.set(F.target,ht)),pe==="type"&&K.tagName==="INPUT"&&(F.oldValue||"").toLowerCase()==="password"&&K.setAttribute("data-rr-is-password","true"),!Ht(K.tagName,pe)&&(ht.attributes[pe]=Ot(this.doc,St(K.tagName),St(pe),je,K,this.maskAttributeFn),pe==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const Lt=this.unattachedDoc.createElement("span");F.oldValue&&Lt.setAttribute("style",F.oldValue);for(const Bt of Array.from(K.style)){const Tt=K.style.getPropertyValue(Bt),bn=K.style.getPropertyPriority(Bt);Tt!==Lt.style.getPropertyValue(Bt)||bn!==Lt.style.getPropertyPriority(Bt)?bn===""?ht.styleDiff[Bt]=Tt:ht.styleDiff[Bt]=[Tt,bn]:ht._unchangedStyles[Bt]=[Tt,bn]}for(const Bt of Array.from(Lt.style))K.style.getPropertyValue(Bt)===""&&(ht.styleDiff[Bt]=!1)}break}case"childList":{if(ki(F.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;F.addedNodes.forEach(K=>this.genAdds(K,F.target)),F.removedNodes.forEach(K=>{const pe=this.mirror.getId(K),je=j(F.target)?this.mirror.getId(F.target.host):this.mirror.getId(F.target);ki(F.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Or(K,this.mirror)||!qi(K,this.mirror)||(this.addedSet.has(K)?(Oi(this.addedSet,K),this.droppedSet.add(K)):this.addedSet.has(F.target)&&pe===-1||Zo(F.target,this.mirror)||(this.movedSet.has(K)&&this.movedMap[gi(pe,je)]?Oi(this.movedSet,K):this.removes.push({parentId:je,id:pe,isShadow:j(F.target)&&B(F.target)?!0:void 0})),this.mapRemoves.push(K))});break}}},this.genAdds=(F,K)=>{if(!this.processedNodeManager.inOtherBuffer(F,this)&&!(this.addedSet.has(F)||this.movedSet.has(F))){if(this.mirror.hasNode(F)){if(Or(F,this.mirror))return;this.movedSet.add(F);let pe=null;K&&this.mirror.hasNode(K)&&(pe=this.mirror.getId(K)),pe&&pe!==-1&&(this.movedMap[gi(this.mirror.getId(F),pe)]=!0)}else this.addedSet.add(F),this.droppedSet.delete(F);ki(F,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(F.childNodes.forEach(pe=>this.genAdds(pe)),ir(F)&&F.shadowRoot.childNodes.forEach(pe=>{this.processedNodeManager.add(pe,this),this.genAdds(pe,F)}))}}}init(F){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(K=>{this[K]=F[K]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}n(Mi,"MutationBuffer");function Oi(L,F){L.delete(F),F.childNodes.forEach(K=>Oi(L,K))}n(Oi,"deepDelete");function Yi(L,F,K){return L.length===0?!1:Cr(L,F,K)}n(Yi,"isParentRemoved");function Cr(L,F,K){const{parentNode:pe}=F;if(!pe)return!1;const je=K.getId(pe);return L.some(ht=>ht.id===je)?!0:Cr(L,pe,K)}n(Cr,"_isParentRemoved");function wr(L,F){return L.size===0?!1:Kr(L,F)}n(wr,"isAncestorInSet");function Kr(L,F){const{parentNode:K}=F;return K?L.has(K)?!0:Kr(L,K):!1}n(Kr,"_isAncestorInSet");let bo;function ia(L){bo=L}n(ia,"registerErrorHandler");function Fo(){bo=void 0}n(Fo,"unregisterErrorHandler");const zi=n(L=>bo?n((...K)=>{try{return L(...K)}catch(pe){if(bo&&bo(pe)===!0)return()=>{};throw pe}},"rrwebWrapped"):L,"callbackWrapper");function co(L){let F,K=L[0],pe=1;for(;pe<L.length;){const je=L[pe],ht=L[pe+1];if(pe+=2,(je==="optionalAccess"||je==="optionalCall")&&K==null)return;je==="access"||je==="optionalAccess"?(F=K,K=ht(K)):(je==="call"||je==="optionalCall")&&(K=ht((...Lt)=>K.call(F,...Lt)),F=void 0)}return K}n(co,"_optionalChain$2");const Zr=[];function Ao(L){try{if("composedPath"in L){const F=L.composedPath();if(F.length)return F[0]}else if("path"in L&&L.path.length)return L.path[0]}catch{}return L&&L.target}n(Ao,"getEventTarget");function No(L,F){const K=new Mi;Zr.push(K),K.init(L);let pe=window.MutationObserver||window.__rrMutationObserver;const je=co([window,"optionalAccess",Lt=>Lt.Zone,"optionalAccess",Lt=>Lt.__symbol__,"optionalCall",Lt=>Lt("MutationObserver")]);je&&window[je]&&(pe=window[je]);const ht=new pe(zi(Lt=>{L.onMutation&&L.onMutation(Lt)===!1||K.processMutations.bind(K)(Lt)}));return ht.observe(F,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),ht}n(No,"initMutationObserver");function qo({mousemoveCb:L,sampling:F,doc:K,mirror:pe}){if(F.mousemove===!1)return()=>{};const je=typeof F.mousemove=="number"?F.mousemove:50,ht=typeof F.mousemoveCallback=="number"?F.mousemoveCallback:500;let Lt=[],Bt;const Tt=Xt(zi(Vn=>{const Qn=Date.now()-Bt;L(Lt.map(Ii=>(Ii.timeOffset-=Qn,Ii)),Vn),Lt=[],Bt=null}),ht),bn=zi(Xt(zi(Vn=>{const Qn=Ao(Vn),{clientX:Ii,clientY:Ti}=Xn(Vn)?Vn.changedTouches[0]:Vn;Bt||(Bt=Gn()),Lt.push({x:Ii,y:Ti,id:pe.getId(Qn),timeOffset:Gn()-Bt}),Tt(typeof DragEvent<"u"&&Vn instanceof DragEvent?we.Drag:Vn instanceof MouseEvent?we.MouseMove:we.TouchMove)}),je,{trailing:!1})),zn=[ft("mousemove",bn,K),ft("touchmove",bn,K),ft("drag",bn,K)];return zi(()=>{zn.forEach(Vn=>Vn())})}n(qo,"initMoveObserver");function ca({mouseInteractionCb:L,doc:F,mirror:K,blockClass:pe,blockSelector:je,unblockSelector:ht,sampling:Lt}){if(Lt.mouseInteraction===!1)return()=>{};const Bt=Lt.mouseInteraction===!0||Lt.mouseInteraction===void 0?{}:Lt.mouseInteraction,Tt=[];let bn=null;const zn=n(Vn=>Qn=>{const Ii=Ao(Qn);if(ki(Ii,pe,je,ht,!0))return;let Ti=null,Zi=Vn;if("pointerType"in Qn){switch(Qn.pointerType){case"mouse":Ti=Wt.Mouse;break;case"touch":Ti=Wt.Touch;break;case"pen":Ti=Wt.Pen;break}Ti===Wt.Touch?ct[Vn]===ct.MouseDown?Zi="TouchStart":ct[Vn]===ct.MouseUp&&(Zi="TouchEnd"):Wt.Pen}else Xn(Qn)&&(Ti=Wt.Touch);Ti!==null?(bn=Ti,(Zi.startsWith("Touch")&&Ti===Wt.Touch||Zi.startsWith("Mouse")&&Ti===Wt.Mouse)&&(Ti=null)):ct[Vn]===ct.Click&&(Ti=bn,bn=null);const yr=Xn(Qn)?Qn.changedTouches[0]:Qn;if(!yr)return;const tr=K.getId(Ii),{clientX:Gr,clientY:Co}=yr;zi(L)({type:ct[Zi],id:tr,x:Gr,y:Co,...Ti!==null&&{pointerType:Ti}})},"getHandler");return Object.keys(ct).filter(Vn=>Number.isNaN(Number(Vn))&&!Vn.endsWith("_Departed")&&Bt[Vn]!==!1).forEach(Vn=>{let Qn=St(Vn);const Ii=zn(Vn);if(window.PointerEvent)switch(ct[Vn]){case ct.MouseDown:case ct.MouseUp:Qn=Qn.replace("mouse","pointer");break;case ct.TouchStart:case ct.TouchEnd:return}Tt.push(ft(Qn,Ii,F))}),zi(()=>{Tt.forEach(Vn=>Vn())})}n(ca,"initMouseInteractionObserver");function Bo({scrollCb:L,doc:F,mirror:K,blockClass:pe,blockSelector:je,unblockSelector:ht,sampling:Lt}){const Bt=zi(Xt(zi(Tt=>{const bn=Ao(Tt);if(!bn||ki(bn,pe,je,ht,!0))return;const zn=K.getId(bn);if(bn===F&&F.defaultView){const Vn=yo(F.defaultView);L({id:zn,x:Vn.left,y:Vn.top})}else L({id:zn,x:bn.scrollLeft,y:bn.scrollTop})}),Lt.scroll||100));return ft("scroll",Bt,F)}n(Bo,"initScrollObserver");function ba({viewportResizeCb:L},{win:F}){let K=-1,pe=-1;const je=zi(Xt(zi(()=>{const ht=no(),Lt=Vi();(K!==ht||pe!==Lt)&&(L({width:Number(Lt),height:Number(ht)}),K=ht,pe=Lt)}),200));return ft("resize",je,F)}n(ba,"initViewportResizeObserver");const Ho=["INPUT","TEXTAREA","SELECT"],Fe=new WeakMap;function tt({inputCb:L,doc:F,mirror:K,blockClass:pe,blockSelector:je,unblockSelector:ht,ignoreClass:Lt,ignoreSelector:Bt,maskInputOptions:Tt,maskInputFn:bn,sampling:zn,userTriggeredOnInput:Vn,maskTextClass:Qn,unmaskTextClass:Ii,maskTextSelector:Ti,unmaskTextSelector:Zi}){function yr(ar){let ho=Ao(ar);const ta=ar.isTrusted,cr=ho&&Rt(ho.tagName);if(cr==="OPTION"&&(ho=ho.parentElement),!ho||!cr||Ho.indexOf(cr)<0||ki(ho,pe,je,ht,!0))return;const Qr=ho;if(Qr.classList.contains(Lt)||Bt&&Qr.matches(Bt))return;const $o=At(ho);let va=Vt(Qr,cr,$o),ha=!1;const ja=De({maskInputOptions:Tt,tagName:cr,type:$o}),ko=Y(ho,Qn,Ti,Ii,Zi,ja);($o==="radio"||$o==="checkbox")&&(ha=ho.checked),va=ut({isMasked:ko,element:ho,value:va,maskInputFn:bn}),tr(ho,Vn?{text:va,isChecked:ha,userTriggered:ta}:{text:va,isChecked:ha});const Za=ho.name;$o==="radio"&&Za&&ha&&F.querySelectorAll(`input[type="radio"][name="${Za}"]`).forEach(ya=>{if(ya!==ho){const Xa=ut({isMasked:ko,element:ya,value:Vt(ya,cr,$o),maskInputFn:bn});tr(ya,Vn?{text:Xa,isChecked:!ha,userTriggered:!1}:{text:Xa,isChecked:!ha})}})}n(yr,"eventHandler");function tr(ar,ho){const ta=Fe.get(ar);if(!ta||ta.text!==ho.text||ta.isChecked!==ho.isChecked){Fe.set(ar,ho);const cr=K.getId(ar);zi(L)({...ho,id:cr})}}n(tr,"cbWithDedup");const Co=(zn.input==="last"?["change"]:["input","change"]).map(ar=>ft(ar,zi(yr),F)),Io=F.defaultView;if(!Io)return()=>{Co.forEach(ar=>ar())};const Go=Io.Object.getOwnPropertyDescriptor(Io.HTMLInputElement.prototype,"value"),Xr=[[Io.HTMLInputElement.prototype,"value"],[Io.HTMLInputElement.prototype,"checked"],[Io.HTMLSelectElement.prototype,"value"],[Io.HTMLTextAreaElement.prototype,"value"],[Io.HTMLSelectElement.prototype,"selectedIndex"],[Io.HTMLOptionElement.prototype,"selected"]];return Go&&Go.set&&Co.push(...Xr.map(ar=>pn(ar[0],ar[1],{set(){zi(yr)({target:this,isTrusted:!1})}},!1,Io))),zi(()=>{Co.forEach(ar=>ar())})}n(tt,"initInputObserver");function It(L){const F=[];function K(pe,je){if(Sr("CSSGroupingRule")&&pe.parentRule instanceof CSSGroupingRule||Sr("CSSMediaRule")&&pe.parentRule instanceof CSSMediaRule||Sr("CSSSupportsRule")&&pe.parentRule instanceof CSSSupportsRule||Sr("CSSConditionRule")&&pe.parentRule instanceof CSSConditionRule){const Lt=Array.from(pe.parentRule.cssRules).indexOf(pe);je.unshift(Lt)}else if(pe.parentStyleSheet){const Lt=Array.from(pe.parentStyleSheet.cssRules).indexOf(pe);je.unshift(Lt)}return je}return n(K,"recurse"),K(L,F)}n(It,"getNestedCSSRulePositions");function Qt(L,F,K){let pe,je;return L?(L.ownerNode?pe=F.getId(L.ownerNode):je=K.getId(L),{styleId:je,id:pe}):{}}n(Qt,"getIdAndStyleId");function cn({styleSheetRuleCb:L,mirror:F,stylesheetManager:K},{win:pe}){if(!pe.CSSStyleSheet||!pe.CSSStyleSheet.prototype)return()=>{};const je=pe.CSSStyleSheet.prototype.insertRule;pe.CSSStyleSheet.prototype.insertRule=new Proxy(je,{apply:zi((zn,Vn,Qn)=>{const[Ii,Ti]=Qn,{id:Zi,styleId:yr}=Qt(Vn,F,K.styleMirror);return(Zi&&Zi!==-1||yr&&yr!==-1)&&L({id:Zi,styleId:yr,adds:[{rule:Ii,index:Ti}]}),zn.apply(Vn,Qn)})});const ht=pe.CSSStyleSheet.prototype.deleteRule;pe.CSSStyleSheet.prototype.deleteRule=new Proxy(ht,{apply:zi((zn,Vn,Qn)=>{const[Ii]=Qn,{id:Ti,styleId:Zi}=Qt(Vn,F,K.styleMirror);return(Ti&&Ti!==-1||Zi&&Zi!==-1)&&L({id:Ti,styleId:Zi,removes:[{index:Ii}]}),zn.apply(Vn,Qn)})});let Lt;pe.CSSStyleSheet.prototype.replace&&(Lt=pe.CSSStyleSheet.prototype.replace,pe.CSSStyleSheet.prototype.replace=new Proxy(Lt,{apply:zi((zn,Vn,Qn)=>{const[Ii]=Qn,{id:Ti,styleId:Zi}=Qt(Vn,F,K.styleMirror);return(Ti&&Ti!==-1||Zi&&Zi!==-1)&&L({id:Ti,styleId:Zi,replace:Ii}),zn.apply(Vn,Qn)})}));let Bt;pe.CSSStyleSheet.prototype.replaceSync&&(Bt=pe.CSSStyleSheet.prototype.replaceSync,pe.CSSStyleSheet.prototype.replaceSync=new Proxy(Bt,{apply:zi((zn,Vn,Qn)=>{const[Ii]=Qn,{id:Ti,styleId:Zi}=Qt(Vn,F,K.styleMirror);return(Ti&&Ti!==-1||Zi&&Zi!==-1)&&L({id:Ti,styleId:Zi,replaceSync:Ii}),zn.apply(Vn,Qn)})}));const Tt={};wi("CSSGroupingRule")?Tt.CSSGroupingRule=pe.CSSGroupingRule:(wi("CSSMediaRule")&&(Tt.CSSMediaRule=pe.CSSMediaRule),wi("CSSConditionRule")&&(Tt.CSSConditionRule=pe.CSSConditionRule),wi("CSSSupportsRule")&&(Tt.CSSSupportsRule=pe.CSSSupportsRule));const bn={};return Object.entries(Tt).forEach(([zn,Vn])=>{bn[zn]={insertRule:Vn.prototype.insertRule,deleteRule:Vn.prototype.deleteRule},Vn.prototype.insertRule=new Proxy(bn[zn].insertRule,{apply:zi((Qn,Ii,Ti)=>{const[Zi,yr]=Ti,{id:tr,styleId:Gr}=Qt(Ii.parentStyleSheet,F,K.styleMirror);return(tr&&tr!==-1||Gr&&Gr!==-1)&&L({id:tr,styleId:Gr,adds:[{rule:Zi,index:[...It(Ii),yr||0]}]}),Qn.apply(Ii,Ti)})}),Vn.prototype.deleteRule=new Proxy(bn[zn].deleteRule,{apply:zi((Qn,Ii,Ti)=>{const[Zi]=Ti,{id:yr,styleId:tr}=Qt(Ii.parentStyleSheet,F,K.styleMirror);return(yr&&yr!==-1||tr&&tr!==-1)&&L({id:yr,styleId:tr,removes:[{index:[...It(Ii),Zi]}]}),Qn.apply(Ii,Ti)})})}),zi(()=>{pe.CSSStyleSheet.prototype.insertRule=je,pe.CSSStyleSheet.prototype.deleteRule=ht,Lt&&(pe.CSSStyleSheet.prototype.replace=Lt),Bt&&(pe.CSSStyleSheet.prototype.replaceSync=Bt),Object.entries(Tt).forEach(([zn,Vn])=>{Vn.prototype.insertRule=bn[zn].insertRule,Vn.prototype.deleteRule=bn[zn].deleteRule})})}n(cn,"initStyleSheetObserver");function fn({mirror:L,stylesheetManager:F},K){let pe=null;K.nodeName==="#document"?pe=L.getId(K):pe=L.getId(K.host);const je=K.nodeName==="#document"?co([K,"access",Lt=>Lt.defaultView,"optionalAccess",Lt=>Lt.Document]):co([K,"access",Lt=>Lt.ownerDocument,"optionalAccess",Lt=>Lt.defaultView,"optionalAccess",Lt=>Lt.ShadowRoot]),ht=co([je,"optionalAccess",Lt=>Lt.prototype])?Object.getOwnPropertyDescriptor(co([je,"optionalAccess",Lt=>Lt.prototype]),"adoptedStyleSheets"):void 0;return pe===null||pe===-1||!je||!ht?()=>{}:(Object.defineProperty(K,"adoptedStyleSheets",{configurable:ht.configurable,enumerable:ht.enumerable,get(){return co([ht,"access",Lt=>Lt.get,"optionalAccess",Lt=>Lt.call,"call",Lt=>Lt(this)])},set(Lt){const Bt=co([ht,"access",Tt=>Tt.set,"optionalAccess",Tt=>Tt.call,"call",Tt=>Tt(this,Lt)]);if(pe!==null&&pe!==-1)try{F.adoptStyleSheets(Lt,pe)}catch{}return Bt}}),zi(()=>{Object.defineProperty(K,"adoptedStyleSheets",{configurable:ht.configurable,enumerable:ht.enumerable,get:ht.get,set:ht.set})}))}n(fn,"initAdoptedStyleSheetObserver");function ci({styleDeclarationCb:L,mirror:F,ignoreCSSAttributes:K,stylesheetManager:pe},{win:je}){const ht=je.CSSStyleDeclaration.prototype.setProperty;je.CSSStyleDeclaration.prototype.setProperty=new Proxy(ht,{apply:zi((Bt,Tt,bn)=>{const[zn,Vn,Qn]=bn;if(K.has(zn))return ht.apply(Tt,[zn,Vn,Qn]);const{id:Ii,styleId:Ti}=Qt(co([Tt,"access",Zi=>Zi.parentRule,"optionalAccess",Zi=>Zi.parentStyleSheet]),F,pe.styleMirror);return(Ii&&Ii!==-1||Ti&&Ti!==-1)&&L({id:Ii,styleId:Ti,set:{property:zn,value:Vn,priority:Qn},index:It(Tt.parentRule)}),Bt.apply(Tt,bn)})});const Lt=je.CSSStyleDeclaration.prototype.removeProperty;return je.CSSStyleDeclaration.prototype.removeProperty=new Proxy(Lt,{apply:zi((Bt,Tt,bn)=>{const[zn]=bn;if(K.has(zn))return Lt.apply(Tt,[zn]);const{id:Vn,styleId:Qn}=Qt(co([Tt,"access",Ii=>Ii.parentRule,"optionalAccess",Ii=>Ii.parentStyleSheet]),F,pe.styleMirror);return(Vn&&Vn!==-1||Qn&&Qn!==-1)&&L({id:Vn,styleId:Qn,remove:{property:zn},index:It(Tt.parentRule)}),Bt.apply(Tt,bn)})}),zi(()=>{je.CSSStyleDeclaration.prototype.setProperty=ht,je.CSSStyleDeclaration.prototype.removeProperty=Lt})}n(ci,"initStyleDeclarationObserver");function _i({mediaInteractionCb:L,blockClass:F,blockSelector:K,unblockSelector:pe,mirror:je,sampling:ht,doc:Lt}){const Bt=zi(bn=>Xt(zi(zn=>{const Vn=Ao(zn);if(!Vn||ki(Vn,F,K,pe,!0))return;const{currentTime:Qn,volume:Ii,muted:Ti,playbackRate:Zi}=Vn;L({type:bn,id:je.getId(Vn),currentTime:Qn,volume:Ii,muted:Ti,playbackRate:Zi})}),ht.media||500)),Tt=[ft("play",Bt(0),Lt),ft("pause",Bt(1),Lt),ft("seeked",Bt(2),Lt),ft("volumechange",Bt(3),Lt),ft("ratechange",Bt(4),Lt)];return zi(()=>{Tt.forEach(bn=>bn())})}n(_i,"initMediaInteractionObserver");function bi({fontCb:L,doc:F}){const K=F.defaultView;if(!K)return()=>{};const pe=[],je=new WeakMap,ht=K.FontFace;K.FontFace=n(function(Tt,bn,zn){const Vn=new ht(Tt,bn,zn);return je.set(Vn,{family:Tt,buffer:typeof bn!="string",descriptors:zn,fontSource:typeof bn=="string"?bn:JSON.stringify(Array.from(new Uint8Array(bn)))}),Vn},"FontFace");const Lt=Bi(F.fonts,"add",function(Bt){return function(Tt){return $r(zi(()=>{const bn=je.get(Tt);bn&&(L(bn),je.delete(Tt))}),0),Bt.apply(this,[Tt])}});return pe.push(()=>{K.FontFace=ht}),pe.push(Lt),zi(()=>{pe.forEach(Bt=>Bt())})}n(bi,"initFontObserver");function si(L){const{doc:F,mirror:K,blockClass:pe,blockSelector:je,unblockSelector:ht,selectionCb:Lt}=L;let Bt=!0;const Tt=zi(()=>{const bn=F.getSelection();if(!bn||Bt&&co([bn,"optionalAccess",Qn=>Qn.isCollapsed]))return;Bt=bn.isCollapsed||!1;const zn=[],Vn=bn.rangeCount||0;for(let Qn=0;Qn<Vn;Qn++){const Ii=bn.getRangeAt(Qn),{startContainer:Ti,startOffset:Zi,endContainer:yr,endOffset:tr}=Ii;ki(Ti,pe,je,ht,!0)||ki(yr,pe,je,ht,!0)||zn.push({start:K.getId(Ti),startOffset:Zi,end:K.getId(yr),endOffset:tr})}Lt({ranges:zn})});return Tt(),ft("selectionchange",Tt)}n(si,"initSelectionObserver");function Ui({doc:L,customElementCb:F}){const K=L.defaultView;return!K||!K.customElements?()=>{}:Bi(K.customElements,"define",function(je){return function(ht,Lt,Bt){try{F({define:{name:ht}})}catch{}return je.apply(this,[ht,Lt,Bt])}})}n(Ui,"initCustomElementObserver");function Nn(L,F={}){const K=L.doc.defaultView;if(!K)return()=>{};const pe=No(L,L.doc),je=qo(L),ht=ca(L),Lt=Bo(L),Bt=ba(L,{win:K}),Tt=tt(L),bn=_i(L),zn=cn(L,{win:K}),Vn=fn(L,L.doc),Qn=ci(L,{win:K}),Ii=L.collectFonts?bi(L):()=>{},Ti=si(L),Zi=Ui(L),yr=[];for(const tr of L.plugins)yr.push(tr.observer(tr.callback,K,tr.options));return zi(()=>{Zr.forEach(tr=>tr.reset()),pe.disconnect(),je(),ht(),Lt(),Bt(),Tt(),bn(),zn(),Vn(),Qn(),Ii(),Ti(),Zi(),yr.forEach(tr=>tr())})}n(Nn,"initObservers");function Sr(L){return typeof window[L]<"u"}n(Sr,"hasNestedCSSRule");function wi(L){return Boolean(typeof window[L]<"u"&&window[L].prototype&&"insertRule"in window[L].prototype&&"deleteRule"in window[L].prototype)}n(wi,"canMonkeyPatchNestedCSSRule");class qr{constructor(F){this.generateIdFn=F,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(F,K,pe,je){const ht=pe||this.getIdToRemoteIdMap(F),Lt=je||this.getRemoteIdToIdMap(F);let Bt=ht.get(K);return Bt||(Bt=this.generateIdFn(),ht.set(K,Bt),Lt.set(Bt,K)),Bt}getIds(F,K){const pe=this.getIdToRemoteIdMap(F),je=this.getRemoteIdToIdMap(F);return K.map(ht=>this.getId(F,ht,pe,je))}getRemoteId(F,K,pe){const je=pe||this.getRemoteIdToIdMap(F);if(typeof K!="number")return K;const ht=je.get(K);return ht||-1}getRemoteIds(F,K){const pe=this.getRemoteIdToIdMap(F);return K.map(je=>this.getRemoteId(F,je,pe))}reset(F){if(!F){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(F),this.iframeRemoteIdToIdMap.delete(F)}getIdToRemoteIdMap(F){let K=this.iframeIdToRemoteIdMap.get(F);return K||(K=new Map,this.iframeIdToRemoteIdMap.set(F,K)),K}getRemoteIdToIdMap(F){let K=this.iframeRemoteIdToIdMap.get(F);return K||(K=new Map,this.iframeRemoteIdToIdMap.set(F,K)),K}}n(qr,"CrossOriginIframeMirror");function uo(L){let F,K=L[0],pe=1;for(;pe<L.length;){const je=L[pe],ht=L[pe+1];if(pe+=2,(je==="optionalAccess"||je==="optionalCall")&&K==null)return;je==="access"||je==="optionalAccess"?(F=K,K=ht(K)):(je==="call"||je==="optionalCall")&&(K=ht((...Lt)=>K.call(F,...Lt)),F=void 0)}return K}n(uo,"_optionalChain$1");class go{constructor(){this.crossOriginIframeMirror=new qr(Ut),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}n(go,"IframeManagerNoop");class ji{constructor(F){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new qr(Ut),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=F.mutationCb,this.wrappedEmit=F.wrappedEmit,this.stylesheetManager=F.stylesheetManager,this.recordCrossOriginIframes=F.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new qr(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=F.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(F){this.iframes.set(F,!0),F.contentWindow&&this.crossOriginIframeMap.set(F.contentWindow,F)}addLoadListener(F){this.loadListener=F}attachIframe(F,K){this.mutationCb({adds:[{parentId:this.mirror.getId(F),nextId:null,node:K}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),uo([this,"access",pe=>pe.loadListener,"optionalCall",pe=>pe(F)]),F.contentDocument&&F.contentDocument.adoptedStyleSheets&&F.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(F.contentDocument.adoptedStyleSheets,this.mirror.getId(F.contentDocument))}handleMessage(F){const K=F;if(K.data.type!=="rrweb"||K.origin!==K.data.origin||!F.source)return;const je=this.crossOriginIframeMap.get(F.source);if(!je)return;const ht=this.transformCrossOriginEvent(je,K.data.event);ht&&this.wrappedEmit(ht,K.data.isCheckout)}transformCrossOriginEvent(F,K){switch(K.type){case V.FullSnapshot:{this.crossOriginIframeMirror.reset(F),this.crossOriginIframeStyleMirror.reset(F),this.replaceIdOnNode(K.data.node,F);const pe=K.data.node.id;return this.crossOriginIframeRootIdMap.set(F,pe),this.patchRootIdOnNode(K.data.node,pe),{timestamp:K.timestamp,type:V.IncrementalSnapshot,data:{source:we.Mutation,adds:[{parentId:this.mirror.getId(F),nextId:null,node:K.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case V.Meta:case V.Load:case V.DomContentLoaded:return!1;case V.Plugin:return K;case V.Custom:return this.replaceIds(K.data.payload,F,["id","parentId","previousId","nextId"]),K;case V.IncrementalSnapshot:switch(K.data.source){case we.Mutation:return K.data.adds.forEach(pe=>{this.replaceIds(pe,F,["parentId","nextId","previousId"]),this.replaceIdOnNode(pe.node,F);const je=this.crossOriginIframeRootIdMap.get(F);je&&this.patchRootIdOnNode(pe.node,je)}),K.data.removes.forEach(pe=>{this.replaceIds(pe,F,["parentId","id"])}),K.data.attributes.forEach(pe=>{this.replaceIds(pe,F,["id"])}),K.data.texts.forEach(pe=>{this.replaceIds(pe,F,["id"])}),K;case we.Drag:case we.TouchMove:case we.MouseMove:return K.data.positions.forEach(pe=>{this.replaceIds(pe,F,["id"])}),K;case we.ViewportResize:return!1;case we.MediaInteraction:case we.MouseInteraction:case we.Scroll:case we.CanvasMutation:case we.Input:return this.replaceIds(K.data,F,["id"]),K;case we.StyleSheetRule:case we.StyleDeclaration:return this.replaceIds(K.data,F,["id"]),this.replaceStyleIds(K.data,F,["styleId"]),K;case we.Font:return K;case we.Selection:return K.data.ranges.forEach(pe=>{this.replaceIds(pe,F,["start","end"])}),K;case we.AdoptedStyleSheet:return this.replaceIds(K.data,F,["id"]),this.replaceStyleIds(K.data,F,["styleIds"]),uo([K,"access",pe=>pe.data,"access",pe=>pe.styles,"optionalAccess",pe=>pe.forEach,"call",pe=>pe(je=>{this.replaceStyleIds(je,F,["styleId"])})]),K}}return!1}replace(F,K,pe,je){for(const ht of je)!Array.isArray(K[ht])&&typeof K[ht]!="number"||(Array.isArray(K[ht])?K[ht]=F.getIds(pe,K[ht]):K[ht]=F.getId(pe,K[ht]));return K}replaceIds(F,K,pe){return this.replace(this.crossOriginIframeMirror,F,K,pe)}replaceStyleIds(F,K,pe){return this.replace(this.crossOriginIframeStyleMirror,F,K,pe)}replaceIdOnNode(F,K){this.replaceIds(F,K,["id","rootId"]),"childNodes"in F&&F.childNodes.forEach(pe=>{this.replaceIdOnNode(pe,K)})}patchRootIdOnNode(F,K){F.type!==k.Document&&!F.rootId&&(F.rootId=K),"childNodes"in F&&F.childNodes.forEach(pe=>{this.patchRootIdOnNode(pe,K)})}}n(ji,"IframeManager");class Qi{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}n(Qi,"ShadowDomManagerNoop");class _r{constructor(F){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=F.mutationCb,this.scrollCb=F.scrollCb,this.bypassOptions=F.bypassOptions,this.mirror=F.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(F,K){if(!B(F)||this.shadowDoms.has(F))return;this.shadowDoms.add(F);const pe=No({...this.bypassOptions,doc:K,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},F);this.restoreHandlers.push(()=>pe.disconnect()),this.restoreHandlers.push(Bo({...this.bypassOptions,scrollCb:this.scrollCb,doc:F,mirror:this.mirror})),$r(()=>{F.adoptedStyleSheets&&F.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(F.adoptedStyleSheets,this.mirror.getId(F.host)),this.restoreHandlers.push(fn({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},F))},0)}observeAttachShadow(F){!F.contentWindow||!F.contentDocument||this.patchAttachShadow(F.contentWindow.Element,F.contentDocument)}patchAttachShadow(F,K){const pe=this;this.restoreHandlers.push(Bi(F.prototype,"attachShadow",function(je){return function(ht){const Lt=je.call(this,ht);return this.shadowRoot&&Ur(this)&&pe.addShadowRoot(this.shadowRoot,K),Lt}}))}reset(){this.restoreHandlers.forEach(F=>{try{F()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}n(_r,"ShadowDomManager");class Jr{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}n(Jr,"CanvasManagerNoop");class jo{constructor(F){this.trackedLinkElements=new WeakSet,this.styleMirror=new br,this.mutationCb=F.mutationCb,this.adoptedStyleSheetCb=F.adoptedStyleSheetCb}attachLinkElement(F,K){"_cssText"in K.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:K.id,attributes:K.attributes}]}),this.trackLinkElement(F)}trackLinkElement(F){this.trackedLinkElements.has(F)||(this.trackedLinkElements.add(F),this.trackStylesheetInLinkElement(F))}adoptStyleSheets(F,K){if(F.length===0)return;const pe={id:K,styleIds:[]},je=[];for(const ht of F){let Lt;this.styleMirror.has(ht)?Lt=this.styleMirror.getId(ht):(Lt=this.styleMirror.add(ht),je.push({styleId:Lt,rules:Array.from(ht.rules||CSSRule,(Bt,Tt)=>({rule:$(Bt),index:Tt}))})),pe.styleIds.push(Lt)}je.length>0&&(pe.styles=je),this.adoptedStyleSheetCb(pe)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(F){}}n(jo,"StylesheetManager");class ea{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){wo(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(F,K){const pe=this.nodeMap.get(F);return pe&&Array.from(pe).some(je=>je!==K)}add(F,K){this.nodeMap.set(F,(this.nodeMap.get(F)||new Set).add(K))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}n(ea,"ProcessedNodeManager");let gr,ua;const so=be();function Jo(L={}){const{emit:F,checkoutEveryNms:K,checkoutEveryNth:pe,blockClass:je="rr-block",blockSelector:ht=null,unblockSelector:Lt=null,ignoreClass:Bt="rr-ignore",ignoreSelector:Tt=null,maskAllText:bn=!1,maskTextClass:zn="rr-mask",unmaskTextClass:Vn=null,maskTextSelector:Qn=null,unmaskTextSelector:Ii=null,inlineStylesheet:Ti=!0,maskAllInputs:Zi,maskInputOptions:yr,slimDOMOptions:tr,maskAttributeFn:Gr,maskInputFn:Co,maskTextFn:Io,maxCanvasSize:Go=null,packFn:Xr,sampling:ar={},dataURLOptions:ho={},mousemoveWait:ta,recordCanvas:cr=!1,recordCrossOriginIframes:Qr=!1,recordAfter:$o=L.recordAfter==="DOMContentLoaded"?L.recordAfter:"load",userTriggeredOnInput:va=!1,collectFonts:ha=!1,inlineImages:ja=!1,plugins:ko,keepIframeSrcFn:Za=n(()=>!1,"keepIframeSrcFn"),ignoreCSSAttributes:ya=new Set([]),errorHandler:Xa,onMutation:Aa,getCanvasManager:Is}=L;ia(Xa);const Ns=Qr?window.parent===window:!0;let _l=!1;if(!Ns)try{window.parent.document&&(_l=!1)}catch{_l=!0}if(Ns&&!F)throw new Error("emit function is required");ta!==void 0&&ar.mousemove===void 0&&(ar.mousemove=ta),so.reset();const Da=Zi===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:yr!==void 0?yr:{},Ls=tr===!0||tr==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:tr==="all",headMetaDescKeywords:tr==="all"}:tr||{};Dn();let qs,Tl=0;const sc=n(Mo=>{for(const ls of ko||[])ls.eventProcessor&&(Mo=ls.eventProcessor(Mo));return Xr&&!_l&&(Mo=Xr(Mo)),Mo},"eventProcessor");gr=n((Mo,ls)=>{const Oo=Mo;if(Oo.timestamp=Gn(),m([Zr,"access",Ko=>Ko[0],"optionalAccess",Ko=>Ko.isFrozen,"call",Ko=>Ko()])&&Oo.type!==V.FullSnapshot&&!(Oo.type===V.IncrementalSnapshot&&Oo.data.source===we.Mutation)&&Zr.forEach(Ko=>Ko.unfreeze()),Ns)m([F,"optionalCall",Ko=>Ko(sc(Oo),ls)]);else if(_l){const Ko={type:"rrweb",event:sc(Oo),origin:window.location.origin,isCheckout:ls};window.parent.postMessage(Ko,"*")}if(Oo.type===V.FullSnapshot)qs=Oo,Tl=0;else if(Oo.type===V.IncrementalSnapshot){if(Oo.data.source===we.Mutation&&Oo.data.isAttachIframe)return;Tl++;const Ko=pe&&Tl>=pe,Eo=K&&qs&&Oo.timestamp-qs.timestamp>K;(Ko||Eo)&&$l(!0)}},"wrappedEmit");const Cl=n(Mo=>{gr({type:V.IncrementalSnapshot,data:{source:we.Mutation,...Mo}})},"wrappedMutationEmit"),lc=n(Mo=>gr({type:V.IncrementalSnapshot,data:{source:we.Scroll,...Mo}}),"wrappedScrollEmit"),au=n(Mo=>gr({type:V.IncrementalSnapshot,data:{source:we.CanvasMutation,...Mo}}),"wrappedCanvasMutationEmit"),su=n(Mo=>gr({type:V.IncrementalSnapshot,data:{source:we.AdoptedStyleSheet,...Mo}}),"wrappedAdoptedStyleSheetEmit"),xa=new jo({mutationCb:Cl,adoptedStyleSheetCb:su}),xs=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new go:new ji({mirror:so,mutationCb:Cl,stylesheetManager:xa,recordCrossOriginIframes:Qr,wrappedEmit:gr});for(const Mo of ko||[])Mo.getMirror&&Mo.getMirror({nodeMirror:so,crossOriginIframeMirror:xs.crossOriginIframeMirror,crossOriginIframeStyleMirror:xs.crossOriginIframeStyleMirror});const Gl=new ea,cc=Qa(Is,{mirror:so,win:window,mutationCb:Mo=>gr({type:V.IncrementalSnapshot,data:{source:we.CanvasMutation,...Mo}}),recordCanvas:cr,blockClass:je,blockSelector:ht,unblockSelector:Lt,maxCanvasSize:Go,sampling:ar.canvas,dataURLOptions:ho,errorHandler:Xa}),Il=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Qi:new _r({mutationCb:Cl,scrollCb:lc,bypassOptions:{onMutation:Aa,blockClass:je,blockSelector:ht,unblockSelector:Lt,maskAllText:bn,maskTextClass:zn,unmaskTextClass:Vn,maskTextSelector:Qn,unmaskTextSelector:Ii,inlineStylesheet:Ti,maskInputOptions:Da,dataURLOptions:ho,maskAttributeFn:Gr,maskTextFn:Io,maskInputFn:Co,recordCanvas:cr,inlineImages:ja,sampling:ar,slimDOMOptions:Ls,iframeManager:xs,stylesheetManager:xa,canvasManager:cc,keepIframeSrcFn:Za,processedNodeManager:Gl},mirror:so}),$l=n((Mo=!1)=>{gr({type:V.Meta,data:{href:window.location.href,width:Vi(),height:no()}},Mo),xa.reset(),Il.init(),Zr.forEach(Oo=>Oo.lock());const ls=Ye(document,{mirror:so,blockClass:je,blockSelector:ht,unblockSelector:Lt,maskAllText:bn,maskTextClass:zn,unmaskTextClass:Vn,maskTextSelector:Qn,unmaskTextSelector:Ii,inlineStylesheet:Ti,maskAllInputs:Da,maskAttributeFn:Gr,maskInputFn:Co,maskTextFn:Io,slimDOM:Ls,dataURLOptions:ho,recordCanvas:cr,inlineImages:ja,onSerialize:Oo=>{Ni(Oo,so)&&xs.addIframe(Oo),pi(Oo,so)&&xa.trackLinkElement(Oo),ir(Oo)&&Il.addShadowRoot(Oo.shadowRoot,document)},onIframeLoad:(Oo,Ko)=>{xs.attachIframe(Oo,Ko),Il.observeAttachShadow(Oo)},onStylesheetLoad:(Oo,Ko)=>{xa.attachLinkElement(Oo,Ko)},keepIframeSrcFn:Za});if(!ls)return console.warn("Failed to snapshot the document");gr({type:V.FullSnapshot,data:{node:ls,initialOffset:yo(window)}}),Zr.forEach(Oo=>Oo.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&xa.adoptStyleSheets(document.adoptedStyleSheets,so.getId(document))},"takeFullSnapshot");ua=$l;try{const Mo=[],ls=n(Ko=>zi(Nn)({onMutation:Aa,mutationCb:Cl,mousemoveCb:(Eo,Os)=>gr({type:V.IncrementalSnapshot,data:{source:Os,positions:Eo}}),mouseInteractionCb:Eo=>gr({type:V.IncrementalSnapshot,data:{source:we.MouseInteraction,...Eo}}),scrollCb:lc,viewportResizeCb:Eo=>gr({type:V.IncrementalSnapshot,data:{source:we.ViewportResize,...Eo}}),inputCb:Eo=>gr({type:V.IncrementalSnapshot,data:{source:we.Input,...Eo}}),mediaInteractionCb:Eo=>gr({type:V.IncrementalSnapshot,data:{source:we.MediaInteraction,...Eo}}),styleSheetRuleCb:Eo=>gr({type:V.IncrementalSnapshot,data:{source:we.StyleSheetRule,...Eo}}),styleDeclarationCb:Eo=>gr({type:V.IncrementalSnapshot,data:{source:we.StyleDeclaration,...Eo}}),canvasMutationCb:au,fontCb:Eo=>gr({type:V.IncrementalSnapshot,data:{source:we.Font,...Eo}}),selectionCb:Eo=>{gr({type:V.IncrementalSnapshot,data:{source:we.Selection,...Eo}})},customElementCb:Eo=>{gr({type:V.IncrementalSnapshot,data:{source:we.CustomElement,...Eo}})},blockClass:je,ignoreClass:Bt,ignoreSelector:Tt,maskAllText:bn,maskTextClass:zn,unmaskTextClass:Vn,maskTextSelector:Qn,unmaskTextSelector:Ii,maskInputOptions:Da,inlineStylesheet:Ti,sampling:ar,recordCanvas:cr,inlineImages:ja,userTriggeredOnInput:va,collectFonts:ha,doc:Ko,maskAttributeFn:Gr,maskInputFn:Co,maskTextFn:Io,keepIframeSrcFn:Za,blockSelector:ht,unblockSelector:Lt,slimDOMOptions:Ls,dataURLOptions:ho,mirror:so,iframeManager:xs,stylesheetManager:xa,shadowDomManager:Il,processedNodeManager:Gl,canvasManager:cc,ignoreCSSAttributes:ya,plugins:m([ko,"optionalAccess",Eo=>Eo.filter,"call",Eo=>Eo(Os=>Os.observer),"optionalAccess",Eo=>Eo.map,"call",Eo=>Eo(Os=>({observer:Os.observer,options:Os.options,callback:uc=>gr({type:V.Plugin,data:{plugin:Os.name,payload:uc}})}))])||[]},{}),"observe");xs.addLoadListener(Ko=>{try{Mo.push(ls(Ko.contentDocument))}catch(Eo){console.warn(Eo)}});const Oo=n(()=>{$l(),Mo.push(ls(document))},"init");return document.readyState==="interactive"||document.readyState==="complete"?Oo():(Mo.push(ft("DOMContentLoaded",()=>{gr({type:V.DomContentLoaded,data:{}}),$o==="DOMContentLoaded"&&Oo()})),Mo.push(ft("load",()=>{gr({type:V.Load,data:{}}),$o==="load"&&Oo()},window))),()=>{Mo.forEach(Ko=>Ko()),Gl.destroy(),ua=void 0,Fo()}}catch(Mo){console.warn(Mo)}}n(Jo,"record");function $a(L){if(!ua)throw new Error("please take full snapshot after start recording");ua(L)}n($a,"takeFullSnapshot"),Jo.mirror=so,Jo.takeFullSnapshot=$a;function Qa(L,F){try{return L?L(F):new Jr}catch{return console.warn("Unable to initialize CanvasManager"),new Jr}}n(Qa,"_getCanvasManager");const _a=3,Wa=5;function za(L){return L>9999999999?L:L*1e3}n(za,"timestampToMs");function Na(L){return L>9999999999?L/1e3:L}n(Na,"timestampToS");function sa(L,F){F.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(F.category)?L.triggerUserActivity():L.checkAndHandleExpiredSession(),L.addUpdate(()=>(L.throttledAddEvent({type:V.Custom,timestamp:(F.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:g.normalize(F,10,1e3)}}),F.category==="console")))}n(sa,"addBreadcrumbEvent");const pa="button,a";function Ka(L){return L.closest(pa)||L}n(Ka,"getClosestInteractive");function Lo(L){const F=ma(L);return!F||!(F instanceof Element)?F:Ka(F)}n(Lo,"getClickTargetNode");function ma(L){return Ja(L)?L.target:L}n(ma,"getTargetNode");function Ja(L){return typeof L=="object"&&!!L&&"target"in L}n(Ja,"isEventWithTarget");let Ta;function ns(L){return Ta||(Ta=[],bs()),Ta.push(L),()=>{const F=Ta?Ta.indexOf(L):-1;F>-1&&Ta.splice(F,1)}}n(ns,"onWindowOpen");function bs(){g.fill(a,"open",function(L){return function(...F){if(Ta)try{Ta.forEach(K=>K())}catch{}return L.apply(a,F)}})}n(bs,"monkeyPatchWindowOpen");function da(L,F,K){L.handleClick(F,K)}n(da,"handleClick");class fs{constructor(F,K,pe=sa){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=K.timeout/1e3,this._threshold=K.threshold/1e3,this._scollTimeout=K.scrollTimeout/1e3,this._replay=F,this._ignoreSelector=K.ignoreSelector,this._addBreadcrumbEvent=pe}addListeners(){const F=ns(()=>{this._lastMutation=ra()});this._teardown=()=>{F(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(F,K){if(Wo(K,this._ignoreSelector)||!Uo(F))return;const pe={timestamp:Na(F.timestamp),clickBreadcrumb:F,clickCount:0,node:K};this._clicks.some(je=>je.node===pe.node&&Math.abs(je.timestamp-pe.timestamp)<1)||(this._clicks.push(pe),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(F=Date.now()){this._lastMutation=Na(F)}registerScroll(F=Date.now()){this._lastScroll=Na(F)}registerClick(F){const K=Ka(F);this._handleMultiClick(K)}_handleMultiClick(F){this._getClicks(F).forEach(K=>{K.clickCount++})}_getClicks(F){return this._clicks.filter(K=>K.node===F)}_checkClicks(){const F=[],K=ra();this._clicks.forEach(pe=>{!pe.mutationAfter&&this._lastMutation&&(pe.mutationAfter=pe.timestamp<=this._lastMutation?this._lastMutation-pe.timestamp:void 0),!pe.scrollAfter&&this._lastScroll&&(pe.scrollAfter=pe.timestamp<=this._lastScroll?this._lastScroll-pe.timestamp:void 0),pe.timestamp+this._timeout<=K&&F.push(pe)});for(const pe of F){const je=this._clicks.indexOf(pe);je>-1&&(this._generateBreadcrumbs(pe),this._clicks.splice(je,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(F){const K=this._replay,pe=F.scrollAfter&&F.scrollAfter<=this._scollTimeout,je=F.mutationAfter&&F.mutationAfter<=this._threshold,ht=!pe&&!je,{clickCount:Lt,clickBreadcrumb:Bt}=F;if(ht){const Tt=Math.min(F.mutationAfter||this._timeout,this._timeout)*1e3,bn=Tt<this._timeout*1e3?"mutation":"timeout",zn={type:"default",message:Bt.message,timestamp:Bt.timestamp,category:"ui.slowClickDetected",data:{...Bt.data,url:a.location.href,route:K.getCurrentRoute(),timeAfterClickMs:Tt,endReason:bn,clickCount:Lt||1}};this._addBreadcrumbEvent(K,zn);return}if(Lt>1){const Tt={type:"default",message:Bt.message,timestamp:Bt.timestamp,category:"ui.multiClick",data:{...Bt.data,url:a.location.href,route:K.getCurrentRoute(),clickCount:Lt,metric:!0}};this._addBreadcrumbEvent(K,Tt)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout(()=>this._checkClicks(),1e3)}}n(fs,"ClickDetector");const So=["A","BUTTON","INPUT"];function Wo(L,F){return!!(!So.includes(L.tagName)||L.tagName==="INPUT"&&!["submit","button"].includes(L.getAttribute("type")||"")||L.tagName==="A"&&(L.hasAttribute("download")||L.hasAttribute("target")&&L.getAttribute("target")!=="_self")||F&&L.matches(F))}n(Wo,"ignoreElement");function Uo(L){return!!(L.data&&typeof L.data.nodeId=="number"&&L.timestamp)}n(Uo,"isClickBreadcrumb");function ra(){return Date.now()/1e3}n(ra,"nowInSeconds");function oa(L,F){try{if(!hs(F))return;const{source:K}=F.data;if(K===we.Mutation&&L.registerMutation(F.timestamp),K===we.Scroll&&L.registerScroll(F.timestamp),me(F)){const{type:pe,id:je}=F.data,ht=Jo.mirror.getNode(je);ht instanceof HTMLElement&&pe===ct.Click&&L.registerClick(ht)}}catch{}}n(oa,"updateClickDetectorForRecordingEvent");function hs(L){return L.type===_a}n(hs,"isIncrementalEvent");function me(L){return L.data.source===we.MouseInteraction}n(me,"isIncrementalMouseInteraction");function Ie(L){return{timestamp:Date.now()/1e3,type:"default",...L}}n(Ie,"createBreadcrumb");var $e;(function(L){L[L.Document=0]="Document",L[L.DocumentType=1]="DocumentType",L[L.Element=2]="Element",L[L.Text=3]="Text",L[L.CDATA=4]="CDATA",L[L.Comment=5]="Comment"})($e||($e={}));const ot=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function Et(L){const F={};!L["data-sentry-component"]&&L["data-sentry-element"]&&(L["data-sentry-component"]=L["data-sentry-element"]);for(const K in L)if(ot.has(K)){let pe=K;(K==="data-testid"||K==="data-test-id")&&(pe="testId"),F[pe]=L[K]}return F}n(Et,"getAttributesToRecord");const Yt=n(L=>F=>{if(!L.isEnabled())return;const K=yn(F);if(!K)return;const pe=F.name==="click",je=pe?F.event:void 0;pe&&L.clickDetector&&je&&je.target&&!je.altKey&&!je.metaKey&&!je.ctrlKey&&!je.shiftKey&&da(L.clickDetector,K,Lo(F.event)),sa(L,K)},"handleDomListener");function jt(L,F){const K=Jo.mirror.getId(L),pe=K&&Jo.mirror.getNode(K),je=pe&&Jo.mirror.getMeta(pe),ht=je&&Pn(je)?je:null;return{message:F,data:ht?{nodeId:K,node:{id:K,tagName:ht.tagName,textContent:Array.from(ht.childNodes).map(Lt=>Lt.type===$e.Text&&Lt.textContent).filter(Boolean).map(Lt=>Lt.trim()).join(""),attributes:Et(ht.attributes)}}:{}}}n(jt,"getBaseDomBreadcrumb");function yn(L){const{target:F,message:K}=Sn(L);return Ie({category:`ui.${L.name}`,...jt(F,K)})}n(yn,"handleDom");function Sn(L){const F=L.name==="click";let K,pe=null;try{pe=F?Lo(L.event):ma(L.event),K=g.htmlTreeAsString(pe,{maxStringLength:200})||"<unknown>"}catch{K="<unknown>"}return{target:pe,message:K}}n(Sn,"getDomTarget");function Pn(L){return L.type===$e.Element}n(Pn,"isElement");function In(L,F){if(!L.isEnabled())return;L.updateUserActivity();const K=Jn(F);K&&sa(L,K)}n(In,"handleKeyboardEvent");function Jn(L){const{metaKey:F,shiftKey:K,ctrlKey:pe,altKey:je,key:ht,target:Lt}=L;if(!Lt||ei(Lt)||!ht)return null;const Bt=F||pe||je,Tt=ht.length===1;if(!Bt&&Tt)return null;const bn=g.htmlTreeAsString(Lt,{maxStringLength:200})||"<unknown>",zn=jt(Lt,bn);return Ie({category:"ui.keyDown",message:bn,data:{...zn.data,metaKey:F,shiftKey:K,ctrlKey:pe,altKey:je,key:ht}})}n(Jn,"getKeyboardBreadcrumb");function ei(L){return L.tagName==="INPUT"||L.tagName==="TEXTAREA"||L.isContentEditable}n(ei,"isInputElement");const oi={resource:Wr,paint:Yn,navigation:Gi};function Si(L){return L.map(yi).filter(Boolean)}n(Si,"createPerformanceEntries");function yi(L){return oi[L.entryType]?oi[L.entryType](L):null}n(yi,"createPerformanceEntry");function li(L){return((g.browserPerformanceTimeOrigin||a.performance.timeOrigin)+L)/1e3}n(li,"getAbsoluteTime");function Yn(L){const{duration:F,entryType:K,name:pe,startTime:je}=L,ht=li(je);return{type:K,name:pe,start:ht,end:ht+F,data:void 0}}n(Yn,"createPaintEntry");function Gi(L){const{entryType:F,name:K,decodedBodySize:pe,duration:je,domComplete:ht,encodedBodySize:Lt,domContentLoadedEventStart:Bt,domContentLoadedEventEnd:Tt,domInteractive:bn,loadEventStart:zn,loadEventEnd:Vn,redirectCount:Qn,startTime:Ii,transferSize:Ti,type:Zi}=L;return je===0?null:{type:`${F}.${Zi}`,start:li(Ii),end:li(ht),name:K,data:{size:Ti,decodedBodySize:pe,encodedBodySize:Lt,duration:je,domInteractive:bn,domContentLoadedEventStart:Bt,domContentLoadedEventEnd:Tt,loadEventStart:zn,loadEventEnd:Vn,domComplete:ht,redirectCount:Qn}}}n(Gi,"createNavigationEntry");function Wr(L){const{entryType:F,initiatorType:K,name:pe,responseEnd:je,startTime:ht,decodedBodySize:Lt,encodedBodySize:Bt,responseStatus:Tt,transferSize:bn}=L;return["fetch","xmlhttprequest"].includes(K)?null:{type:`${F}.${K}`,start:li(ht),end:li(je),name:pe,data:{size:bn,statusCode:Tt,decodedBodySize:Lt,encodedBodySize:Bt}}}n(Wr,"createResourceEntry");function oo(L){const F=L.entries,K=F[F.length-1],pe=K?K.element:void 0,je=L.value,ht=li(je);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:ht,end:ht,data:{value:je,size:je,nodeId:pe?Jo.mirror.getId(pe):void 0}}}n(oo,"getLargestContentfulPaint");function lo(L){function F(je){L.performanceEntries.includes(je)||L.performanceEntries.push(je)}n(F,"addPerformanceEntry");function K({entries:je}){je.forEach(F)}n(K,"onEntries");const pe=[];return["navigation","paint","resource"].forEach(je=>{pe.push(s.addPerformanceInstrumentationHandler(je,K))}),pe.push(s.addLcpInstrumentationHandler(({metric:je})=>{L.replayPerformanceEntries.push(oo(je))})),()=>{pe.forEach(je=>je())}}n(lo,"setupPerformanceObserver");const dn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,fo='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(J)return J.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),a=i.length;return q(i,n),j(i,a-8,r.d()),j(i,a-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function to(){const L=new Blob([fo]);return URL.createObjectURL(L)}n(to,"e");function fr(L,F){dn&&(g.logger.info(L),F&&_o(L))}n(fr,"logInfo");function xo(L,F){dn&&(g.logger.info(L),F&&setTimeout(()=>{_o(L)},0))}n(xo,"logInfoNextTick");function _o(L){v.addBreadcrumb({category:"console",data:{logger:"replay"},level:"info",message:L},{level:"info"})}n(_o,"addLogBreadcrumb");class fa extends Error{constructor(){super(`Event buffer exceeded maximum size of ${w}.`)}}n(fa,"EventBufferSizeExceededError");class la{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(F){const K=JSON.stringify(F).length;if(this._totalSize+=K,this._totalSize>w)throw new fa;this.events.push(F)}finish(){return new Promise(F=>{const K=this.events;this.clear(),F(JSON.stringify(K))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const F=this.events.map(K=>K.timestamp).sort()[0];return F?za(F):null}}n(la,"EventBufferArray");class ps{constructor(F){this._worker=F,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((F,K)=>{this._worker.addEventListener("message",({data:pe})=>{pe.success?F():K()},{once:!0}),this._worker.addEventListener("error",pe=>{K(pe)},{once:!0})}),this._ensureReadyPromise)}destroy(){fr("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(F,K){const pe=this._getAndIncrementId();return new Promise((je,ht)=>{const Lt=n(({data:Bt})=>{const Tt=Bt;if(Tt.method===F&&Tt.id===pe){if(this._worker.removeEventListener("message",Lt),!Tt.success){dn&&g.logger.error("[Replay]",Tt.response),ht(new Error("Error in compression worker"));return}je(Tt.response)}},"listener");this._worker.addEventListener("message",Lt),this._worker.postMessage({id:pe,method:F,arg:K})})}_getAndIncrementId(){return this._id++}}n(ps,"WorkerHandler");class _s{constructor(F){this._worker=new ps(F),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(F){const K=za(F.timestamp);(!this._earliestTimestamp||K<this._earliestTimestamp)&&(this._earliestTimestamp=K);const pe=JSON.stringify(F);return this._totalSize+=pe.length,this._totalSize>w?Promise.reject(new fa):this._sendEventToWorker(pe)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,F=>{dn&&g.logger.warn('[Replay] Sending "clear" message to worker failed',F)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(F){return this._worker.postMessage("addEvent",F)}async _finishRequest(){const F=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,F}}n(_s,"EventBufferCompressionWorker");class As{constructor(F){this._fallback=new la,this._compression=new _s(F),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(F){this._used.hasCheckout=F}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(F){return this._used.addEvent(F)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch{fr("[Replay] Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:F,hasCheckout:K}=this._fallback,pe=[];for(const je of F)pe.push(this._compression.addEvent(je));this._compression.hasCheckout=K,this._used=this._compression;try{await Promise.all(pe)}catch(je){dn&&g.logger.warn("[Replay] Failed to add events when switching buffers.",je)}}}n(As,"EventBufferProxy");function aa({useCompression:L,workerUrl:F}){if(L&&window.Worker){const K=il(F);if(K)return K}return fr("[Replay] Using simple buffer"),new la}n(aa,"createEventBuffer");function il(L){try{const F=L||Ws();if(!F)return;fr(`[Replay] Using compression worker${L?` from ${L}`:""}`);const K=new Worker(F);return new As(K)}catch{fr("[Replay] Failed to create compression worker")}}n(il,"_loadWorker");function Ws(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?to():""}n(Ws,"_getWorkerUrl");function is(){try{return"sessionStorage"in a&&!!a.sessionStorage}catch{return!1}}n(is,"hasSessionStorage");function rs(L){Ds(),L.session=void 0}n(rs,"clearSession");function Ds(){if(is())try{a.sessionStorage.removeItem(i)}catch{}}n(Ds,"deleteSession");function Ts(L){return L===void 0?!1:Math.random()<L}n(Ts,"isSampled");function Ya(L){const F=Date.now(),K=L.id||g.uuid4(),pe=L.started||F,je=L.lastActivity||F,ht=L.segmentId||0,Lt=L.sampled,Bt=L.previousSessionId;return{id:K,started:pe,lastActivity:je,segmentId:ht,sampled:Lt,previousSessionId:Bt}}n(Ya,"makeSession");function Ua(L){if(is())try{a.sessionStorage.setItem(i,JSON.stringify(L))}catch{}}n(Ua,"saveSession");function ms(L,F){return Ts(L)?"session":F?"buffer":!1}n(ms,"getSessionSampleType");function Rs({sessionSampleRate:L,allowBuffering:F,stickySession:K=!1},{previousSessionId:pe}={}){const je=ms(L,F),ht=Ya({sampled:je,previousSessionId:pe});return K&&Ua(ht),ht}n(Rs,"createSession");function ql(L){if(!is())return null;try{const F=a.sessionStorage.getItem(i);if(!F)return null;const K=JSON.parse(F);return xo("[Replay] Loading existing session",L),Ya(K)}catch{return null}}n(ql,"fetchSession");function pl(L,F,K=+new Date){return L===null||F===void 0||F<0?!0:F===0?!1:L+F<=K}n(pl,"isExpired");function Rl(L,{maxReplayDuration:F,sessionIdleExpire:K,targetTime:pe=Date.now()}){return pl(L.started,F,pe)||pl(L.lastActivity,K,pe)}n(Rl,"isSessionExpired");function La(L,{sessionIdleExpire:F,maxReplayDuration:K}){return!(!Rl(L,{sessionIdleExpire:F,maxReplayDuration:K})||L.sampled==="buffer"&&L.segmentId===0)}n(La,"shouldRefreshSession");function gs({traceInternals:L,sessionIdleExpire:F,maxReplayDuration:K,previousSessionId:pe},je){const ht=je.stickySession&&ql(L);return ht?La(ht,{sessionIdleExpire:F,maxReplayDuration:K})?(xo("[Replay] Session in sessionStorage is expired, creating new one..."),Rs(je,{previousSessionId:ht.id})):ht:(xo("[Replay] Creating new session",L),Rs(je,{previousSessionId:pe}))}n(gs,"loadOrCreateSession");function Ml(L){return L.type===V.Custom}n(Ml,"isCustomEvent");function Ms(L,F,K){return rl(L,F)?(Pl(L,F,K),!0):!1}n(Ms,"addEventSync");function vs(L,F,K){return rl(L,F)?Pl(L,F,K):Promise.resolve(null)}n(vs,"addEvent");async function Pl(L,F,K){if(!L.eventBuffer)return null;try{K&&L.recordingMode==="buffer"&&L.eventBuffer.clear(),K&&(L.eventBuffer.hasCheckout=!0);const pe=L.getOptions(),je=ec(F,pe.beforeAddRecordingEvent);return je?await L.eventBuffer.addEvent(je):void 0}catch(pe){const je=pe&&pe instanceof fa?"addEventSizeExceeded":"addEvent";dn&&g.logger.error(pe),await L.stop({reason:je});const ht=v.getClient();ht&&ht.recordDroppedEvent("internal_sdk_error","replay")}}n(Pl,"_addEvent");function rl(L,F){if(!L.eventBuffer||L.isPaused()||!L.isEnabled())return!1;const K=za(F.timestamp);return K+L.timeouts.sessionIdlePause<Date.now()?!1:K>L.getContext().initialTimestamp+L.getOptions().maxReplayDuration?(fr(`[Replay] Skipping event with timestamp ${K} because it is after maxReplayDuration`,L.getOptions()._experiments.traceInternals),!1):!0}n(rl,"shouldAddEvent");function ec(L,F){try{if(typeof F=="function"&&Ml(L))return F(L)}catch(K){return dn&&g.logger.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",K),null}return L}n(ec,"maybeApplyCallback");function ol(L){return!L.type}n(ol,"isErrorEvent");function al(L){return L.type==="transaction"}n(al,"isTransactionEvent");function zs(L){return L.type==="replay_event"}n(zs,"isReplayEvent");function ml(L){return L.type==="feedback"}n(ml,"isFeedbackEvent");function gl(L){return(F,K)=>{if(!L.isEnabled()||!ol(F)&&!al(F))return;const pe=K&&K.statusCode;if(!(!pe||pe<200||pe>=300)){if(al(F)){ys(L,F);return}Ps(L,F)}}}n(gl,"handleAfterSendEvent");function ys(L,F){const K=L.getContext();F.contexts&&F.contexts.trace&&F.contexts.trace.trace_id&&K.traceIds.size<100&&K.traceIds.add(F.contexts.trace.trace_id)}n(ys,"handleTransactionEvent");function Ps(L,F){const K=L.getContext();if(F.event_id&&K.errorIds.size<100&&K.errorIds.add(F.event_id),L.recordingMode!=="buffer"||!F.tags||!F.tags.replayId)return;const{beforeErrorSampling:pe}=L.getOptions();typeof pe=="function"&&!pe(F)||setTimeout(()=>{L.sendBufferedReplayOrFlush()})}n(Ps,"handleErrorEvent");function kl(L){return F=>{!L.isEnabled()||!ol(F)||Gs(L,F)}}n(kl,"handleBeforeSendEvent");function Gs(L,F){const K=F.exception&&F.exception.values&&F.exception.values[0].value;if(typeof K=="string"&&(K.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||K.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const pe=Ie({category:"replay.hydrate-error"});sa(L,pe)}}n(Gs,"handleHydrationError");function vl(L){const F=v.getClient();F&&F.on("beforeAddBreadcrumb",K=>os(L,K))}n(vl,"handleBreadcrumbs");function os(L,F){if(!L.isEnabled()||!$s(F))return;const K=Nl(F);K&&sa(L,K)}n(os,"beforeAddBreadcrumb");function Nl(L){return!$s(L)||["fetch","xhr","sentry.event","sentry.transaction"].includes(L.category)||L.category.startsWith("ui.")?null:L.category==="console"?Ll(L):Ie(L)}n(Nl,"normalizeBreadcrumb");function Ll(L){const F=L.data&&L.data.arguments;if(!Array.isArray(F)||F.length===0)return Ie(L);let K=!1;const pe=F.map(je=>{if(!je)return je;if(typeof je=="string")return je.length>b?(K=!0,`${je.slice(0,b)}\u2026`):je;if(typeof je=="object")try{const ht=g.normalize(je,7);return JSON.stringify(ht).length>b?(K=!0,`${JSON.stringify(ht,null,2).slice(0,b)}\u2026`):ht}catch{}return je});return Ie({...L,data:{...L.data,arguments:pe,...K?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}n(Ll,"normalizeConsoleBreadcrumb");function $s(L){return!!L.category}n($s,"isBreadcrumbWithCategory");function tc(L,F){return L.type||!L.exception||!L.exception.values||!L.exception.values.length?!1:!!(F.originalException&&F.originalException.__rrweb__)}n(tc,"isRrwebError");function xl(L,F){L.triggerUserActivity(),L.addUpdate(()=>F.timestamp?(L.throttledAddEvent({type:V.Custom,timestamp:F.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:F.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:F.event_id}}}}),!1):!0)}n(xl,"addFeedbackBreadcrumb");function Ks(L,F){return L.recordingMode!=="buffer"||F.message===t||!F.exception||F.type?!1:Ts(L.getOptions().errorSampleRate)}n(Ks,"shouldSampleForBufferEvent");function Js(L){return Object.assign((F,K)=>L.isEnabled()?zs(F)?(delete F.breadcrumbs,F):!ol(F)&&!al(F)&&!ml(F)||!L.checkAndHandleExpiredSession()?F:ml(F)?(L.flush(),F.contexts.feedback.replay_id=L.getSessionId(),xl(L,F),F):tc(F,K)&&!L.getOptions()._experiments.captureExceptions?(dn&&g.logger.log("[Replay] Ignoring error from rrweb internals",F),null):((Ks(L,F)||L.recordingMode==="session")&&(F.tags={...F.tags,replayId:L.getSessionId()}),F):F,{id:"Replay"})}n(Js,"handleGlobalEventListener");function Cs(L,F){return F.map(({type:K,start:pe,end:je,name:ht,data:Lt})=>{const Bt=L.throttledAddEvent({type:V.Custom,timestamp:pe,data:{tag:"performanceSpan",payload:{op:K,description:ht,startTimestamp:pe,endTimestamp:je,data:Lt}}});return typeof Bt=="string"?Promise.resolve(null):Bt})}n(Cs,"createPerformanceSpans");function Fl(L){const{from:F,to:K}=L,pe=Date.now()/1e3;return{type:"navigation.push",start:pe,end:pe,name:K,data:{previous:F}}}n(Fl,"handleHistory");function sl(L){return F=>{if(!L.isEnabled())return;const K=Fl(F);K!==null&&(L.getContext().urls.push(K.name),L.triggerUserActivity(),L.addUpdate(()=>(Cs(L,[K]),!1)))}}n(sl,"handleHistorySpanListener");function hr(L,F){return dn&&L.getOptions()._experiments.traceInternals?!1:v.isSentryRequestUrl(F,v.getClient())}n(hr,"shouldFilterRequest");function Wi(L,F){L.isEnabled()&&F!==null&&(hr(L,F.name)||L.addUpdate(()=>(Cs(L,[F]),!0)))}n(Wi,"addNetworkBreadcrumb");function ll(L){if(!L)return;const F=new TextEncoder;try{if(typeof L=="string")return F.encode(L).length;if(L instanceof URLSearchParams)return F.encode(L.toString()).length;if(L instanceof FormData){const K=vr(L);return F.encode(K).length}if(L instanceof Blob)return L.size;if(L instanceof ArrayBuffer)return L.byteLength}catch{}}n(ll,"getBodySize");function rn(L){if(!L)return;const F=parseInt(L,10);return isNaN(F)?void 0:F}n(rn,"parseContentLengthHeader");function gn(L){try{if(typeof L=="string")return[L];if(L instanceof URLSearchParams)return[L.toString()];if(L instanceof FormData)return[vr(L)];if(!L)return[void 0]}catch{return dn&&g.logger.warn("[Replay] Failed to serialize body",L),[void 0,"BODY_PARSE_ERROR"]}return dn&&g.logger.info("[Replay] Skipping network body because of body type",L),[void 0,"UNPARSEABLE_BODY_TYPE"]}n(gn,"getBodyString");function Tn(L,F){if(!L)return{headers:{},size:void 0,_meta:{warnings:[F]}};const K={...L._meta},pe=K.warnings||[];return K.warnings=[...pe,F],L._meta=K,L}n(Tn,"mergeWarning");function Ai(L,F){if(!F)return null;const{startTimestamp:K,endTimestamp:pe,url:je,method:ht,statusCode:Lt,request:Bt,response:Tt}=F;return{type:L,start:K/1e3,end:pe/1e3,name:je,data:g.dropUndefinedKeys({method:ht,statusCode:Lt,request:Bt,response:Tt})}}n(Ai,"makeNetworkReplayBreadcrumb");function $i(L){return{headers:{},size:L,_meta:{warnings:["URL_SKIPPED"]}}}n($i,"buildSkippedNetworkRequestOrResponse");function Ar(L,F,K){if(!F&&Object.keys(L).length===0)return;if(!F)return{headers:L};if(!K)return{headers:L,size:F};const pe={headers:L,size:F},{body:je,warnings:ht}=dr(K);return pe.body=je,ht&&ht.length>0&&(pe._meta={warnings:ht}),pe}n(Ar,"buildNetworkRequestOrResponse");function Dr(L,F){return Object.keys(L).reduce((K,pe)=>{const je=pe.toLowerCase();return F.includes(je)&&L[pe]&&(K[je]=L[pe]),K},{})}n(Dr,"getAllowedHeaders");function vr(L){return new URLSearchParams(L).toString()}n(vr,"_serializeFormData");function dr(L){if(!L||typeof L!="string")return{body:L};const F=L.length>S,K=ao(L);if(F){const pe=L.slice(0,S);return K?{body:pe,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${pe}\u2026`,warnings:["TEXT_TRUNCATED"]}}if(K)try{return{body:JSON.parse(L)}}catch{}return{body:L}}n(dr,"normalizeNetworkBody");function ao(L){const F=L[0],K=L[L.length-1];return F==="["&&K==="]"||F==="{"&&K==="}"}n(ao,"_strIsProbablyJson");function zo(L,F){const K=Yr(L);return g.stringMatchesSomePattern(K,F)}n(zo,"urlMatches");function Yr(L,F=a.document.baseURI){if(L.startsWith("http://")||L.startsWith("https://")||L.startsWith(a.location.origin))return L;const K=new URL(L,F);if(K.origin!==new URL(F).origin)return L;const pe=K.href;return!L.endsWith("/")&&pe.endsWith("/")?pe.slice(0,-1):pe}n(Yr,"getFullUrl");async function mi(L,F,K){try{const pe=await ti(L,F,K),je=Ai("resource.fetch",pe);Wi(K.replay,je)}catch(pe){dn&&g.logger.error("[Replay] Failed to capture fetch breadcrumb",pe)}}n(mi,"captureFetchBreadcrumbToReplay");function rr(L,F){const{input:K,response:pe}=F,je=K?as(K):void 0,ht=ll(je),Lt=pe?rn(pe.headers.get("content-length")):void 0;ht!==void 0&&(L.data.request_body_size=ht),Lt!==void 0&&(L.data.response_body_size=Lt)}n(rr,"enrichFetchBreadcrumb");async function ti(L,F,K){const pe=Date.now(),{startTimestamp:je=pe,endTimestamp:ht=pe}=F,{url:Lt,method:Bt,status_code:Tt=0,request_body_size:bn,response_body_size:zn}=L.data,Vn=zo(Lt,K.networkDetailAllowUrls)&&!zo(Lt,K.networkDetailDenyUrls),Qn=Vn?ga(K,F.input,bn):$i(bn),Ii=await ks(Vn,K,F.response,zn);return{startTimestamp:je,endTimestamp:ht,url:Lt,method:Bt,statusCode:Tt,request:Qn,response:Ii}}n(ti,"_prepareFetchData");function ga({networkCaptureBodies:L,networkRequestHeaders:F},K,pe){const je=K?Ul(K,F):{};if(!L)return Ar(je,pe,void 0);const ht=as(K),[Lt,Bt]=gn(ht),Tt=Ar(je,pe,Lt);return Bt?Tn(Tt,Bt):Tt}n(ga,"_getRequestInfo");async function ks(L,{networkCaptureBodies:F,networkResponseHeaders:K},pe,je){if(!L&&je!==void 0)return $i(je);const ht=pe?Va(pe.headers,K):{};if(!pe||!F&&je!==void 0)return Ar(ht,je,void 0);const[Lt,Bt]=await Ys(pe),Tt=Bl(Lt,{networkCaptureBodies:F,responseBodySize:je,captureDetails:L,headers:ht});return Bt?Tn(Tt,Bt):Tt}n(ks,"_getResponseInfo");function Bl(L,{networkCaptureBodies:F,responseBodySize:K,captureDetails:pe,headers:je}){try{const ht=L&&L.length&&K===void 0?ll(L):K;return pe?F?Ar(je,ht,L):Ar(je,ht,void 0):$i(ht)}catch(ht){return dn&&g.logger.warn("[Replay] Failed to serialize response body",ht),Ar(je,K,void 0)}}n(Bl,"getResponseData");async function Ys(L){const F=Vl(L);if(!F)return[void 0,"BODY_PARSE_ERROR"];try{return[await Qs(F)]}catch(K){return dn&&g.logger.warn("[Replay] Failed to get text body from response",K),[void 0,"BODY_PARSE_ERROR"]}}n(Ys,"_parseFetchResponseBody");function as(L=[]){if(!(L.length!==2||typeof L[1]!="object"))return L[1].body}n(as,"_getFetchRequestArgBody");function Va(L,F){const K={};return F.forEach(pe=>{L.get(pe)&&(K[pe]=L.get(pe))}),K}n(Va,"getAllHeaders");function Ul(L,F){return L.length===1&&typeof L[0]!="string"?Xs(L[0],F):L.length===2?Xs(L[1],F):{}}n(Ul,"getRequestHeaders");function Xs(L,F){if(!L)return{};const K=L.headers;return K?K instanceof Headers?Va(K,F):Array.isArray(K)?{}:Dr(K,F):{}}n(Xs,"getHeadersFromOptions");function Vl(L){try{return L.clone()}catch(F){dn&&g.logger.warn("[Replay] Failed to clone response body",F)}}n(Vl,"_tryCloneResponse");function Qs(L){return new Promise((F,K)=>{const pe=setTimeout(()=>K(new Error("Timeout while trying to read response body")),500);Zs(L).then(je=>F(je),je=>K(je)).finally(()=>clearTimeout(pe))})}n(Qs,"_tryGetResponseText");async function Zs(L){return await L.text()}n(Zs,"_getResponseText");async function To(L,F,K){try{const pe=Ha(L,F,K),je=Ai("resource.xhr",pe);Wi(K.replay,je)}catch(pe){dn&&g.logger.error("[Replay] Failed to capture xhr breadcrumb",pe)}}n(To,"captureXhrBreadcrumbToReplay");function Po(L,F){const{xhr:K,input:pe}=F;if(!K)return;const je=ll(pe),ht=K.getResponseHeader("content-length")?rn(K.getResponseHeader("content-length")):jl(K.response,K.responseType);je!==void 0&&(L.data.request_body_size=je),ht!==void 0&&(L.data.response_body_size=ht)}n(Po,"enrichXhrBreadcrumb");function Ha(L,F,K){const pe=Date.now(),{startTimestamp:je=pe,endTimestamp:ht=pe,input:Lt,xhr:Bt}=F,{url:Tt,method:bn,status_code:zn=0,request_body_size:Vn,response_body_size:Qn}=L.data;if(!Tt)return null;if(!Bt||!zo(Tt,K.networkDetailAllowUrls)||zo(Tt,K.networkDetailDenyUrls)){const Xr=$i(Vn),ar=$i(Qn);return{startTimestamp:je,endTimestamp:ht,url:Tt,method:bn,statusCode:zn,request:Xr,response:ar}}const Ii=Bt[s.SENTRY_XHR_DATA_KEY],Ti=Ii?Dr(Ii.request_headers,K.networkRequestHeaders):{},Zi=Dr(yl(Bt),K.networkResponseHeaders),[yr,tr]=K.networkCaptureBodies?gn(Lt):[void 0],[Gr,Co]=K.networkCaptureBodies?iu(Bt):[void 0],Io=Ar(Ti,Vn,yr),Go=Ar(Zi,Qn,Gr);return{startTimestamp:je,endTimestamp:ht,url:Tt,method:bn,statusCode:zn,request:tr?Tn(Io,tr):Io,response:Co?Tn(Go,Co):Go}}n(Ha,"_prepareXhrData");function yl(L){const F=L.getAllResponseHeaders();return F?F.split(`\r
`).reduce((K,pe)=>{const[je,ht]=pe.split(": ");return K[je.toLowerCase()]=ht,K},{}):{}}n(yl,"getResponseHeaders");function iu(L){const F=[];try{return[L.responseText]}catch(K){F.push(K)}try{return Hl(L.response,L.responseType)}catch(K){F.push(K)}return dn&&g.logger.warn("[Replay] Failed to get xhr response body",...F),[void 0]}n(iu,"_getXhrResponseBody");function Hl(L,F){try{if(typeof L=="string")return[L];if(L instanceof Document)return[L.body.outerHTML];if(F==="json"&&L&&typeof L=="object")return[JSON.stringify(L)];if(!L)return[void 0]}catch{return dn&&g.logger.warn("[Replay] Failed to serialize body",L),[void 0,"BODY_PARSE_ERROR"]}return dn&&g.logger.info("[Replay] Skipping network body because of body type",L),[void 0,"UNPARSEABLE_BODY_TYPE"]}n(Hl,"_parseXhrResponse");function jl(L,F){try{const K=F==="json"&&L&&typeof L=="object"?JSON.stringify(L):L;return ll(K)}catch{return}}n(jl,"_getBodySize");function Tu(L){const F=v.getClient();try{const{networkDetailAllowUrls:K,networkDetailDenyUrls:pe,networkCaptureBodies:je,networkRequestHeaders:ht,networkResponseHeaders:Lt}=L.getOptions(),Bt={replay:L,networkDetailAllowUrls:K,networkDetailDenyUrls:pe,networkCaptureBodies:je,networkRequestHeaders:ht,networkResponseHeaders:Lt};F&&F.on("beforeAddBreadcrumb",(Tt,bn)=>nc(Bt,Tt,bn))}catch{}}n(Tu,"handleNetworkBreadcrumbs");function nc(L,F,K){if(F.data)try{sd(F)&&ld(K)&&(Po(F,K),To(F,K,L)),Cu(F)&&Iu(K)&&(rr(F,K),mi(F,K,L))}catch{dn&&g.logger.warn("Error when enriching network breadcrumb")}}n(nc,"beforeAddNetworkBreadcrumb");function sd(L){return L.category==="xhr"}n(sd,"_isXhrBreadcrumb");function Cu(L){return L.category==="fetch"}n(Cu,"_isFetchBreadcrumb");function ld(L){return L&&L.xhr}n(ld,"_isXhrHint");function Iu(L){return L&&L.response}n(Iu,"_isFetchHint");function cd(L){const F=v.getClient();s.addClickKeypressInstrumentationHandler(Yt(L)),s.addHistoryInstrumentationHandler(sl(L)),vl(L),Tu(L);const K=Js(L);v.addEventProcessor(K),F&&(F.on("beforeSendEvent",kl(L)),F.on("afterSendEvent",gl(L)),F.on("createDsc",pe=>{const je=L.getSessionId();je&&L.isEnabled()&&L.recordingMode==="session"&&L.checkAndHandleExpiredSession()&&(pe.replay_id=je)}),F.on("spanStart",pe=>{L.lastActiveSpan=pe}),F.on("spanEnd",pe=>{L.lastActiveSpan=pe}),F.on("beforeSendFeedback",(pe,je)=>{const ht=L.getSessionId();je&&je.includeReplay&&L.isEnabled()&&ht&&pe.contexts&&pe.contexts.feedback&&(pe.contexts.feedback.replay_id=ht)}))}n(cd,"addGlobalListeners");async function Ou(L){try{return Promise.all(Cs(L,[wu(a.performance.memory)]))}catch{return[]}}n(Ou,"addMemoryEntry");function wu(L){const{jsHeapSizeLimit:F,totalJSHeapSize:K,usedJSHeapSize:pe}=L,je=Date.now()/1e3;return{type:"memory",name:"memory",start:je,end:je,data:{memory:{jsHeapSizeLimit:F,totalJSHeapSize:K,usedJSHeapSize:pe}}}}n(wu,"createMemoryEntry");function Au(L,F,K){let pe,je,ht;const Lt=K&&K.maxWait?Math.max(K.maxWait,F):0;function Bt(){return Tt(),pe=L(),pe}n(Bt,"invokeFunc");function Tt(){je!==void 0&&clearTimeout(je),ht!==void 0&&clearTimeout(ht),je=ht=void 0}n(Tt,"cancelTimers");function bn(){return je!==void 0||ht!==void 0?Bt():pe}n(bn,"flush");function zn(){return je&&clearTimeout(je),je=setTimeout(Bt,F),Lt&&ht===void 0&&(ht=setTimeout(Bt,Lt)),pe}return n(zn,"debounced"),zn.cancel=Tt,zn.flush=bn,zn}n(Au,"debounce");function ud(L){let F=!1;return(K,pe)=>{if(!L.checkAndHandleExpiredSession()){dn&&g.logger.warn("[Replay] Received replay event after session expired.");return}const je=pe||!F;F=!0,L.clickDetector&&oa(L.clickDetector,K),L.addUpdate(()=>{if(L.recordingMode==="buffer"&&je&&L.setInitialState(),!Ms(L,K,je))return!0;if(!je)return!1;if(Sl(L,je),L.session&&L.session.previousSessionId)return!0;if(L.recordingMode==="buffer"&&L.session&&L.eventBuffer){const ht=L.eventBuffer.getEarliestTimestamp();ht&&(fr(`[Replay] Updating session start time to earliest event in buffer to ${new Date(ht)}`,L.getOptions()._experiments.traceInternals),L.session.started=ht,L.getOptions().stickySession&&Ua(L.session))}return L.recordingMode==="session"&&L.flush(),!0})}}n(ud,"getHandleRecordingEmit");function wa(L){const F=L.getOptions();return{type:V.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:L.isRecordingCanvas(),sessionSampleRate:F.sessionSampleRate,errorSampleRate:F.errorSampleRate,useCompressionOption:F.useCompression,blockAllMedia:F.blockAllMedia,maskAllText:F.maskAllText,maskAllInputs:F.maskAllInputs,useCompression:L.eventBuffer?L.eventBuffer.type==="worker":!1,networkDetailHasUrls:F.networkDetailAllowUrls.length>0,networkCaptureBodies:F.networkCaptureBodies,networkRequestHasHeaders:F.networkRequestHeaders.length>0,networkResponseHasHeaders:F.networkResponseHeaders.length>0}}}}n(wa,"createOptionsEvent");function Sl(L,F){!F||!L.session||L.session.segmentId!==0||Ms(L,wa(L),!1)}n(Sl,"addSettingsEvent");function Du(L,F,K,pe){return g.createEnvelope(g.createEventEnvelopeHeaders(L,g.getSdkMetadataForEnvelopeHeader(L),pe,K),[[{type:"replay_event"},L],[{type:"replay_recording",length:typeof F=="string"?new TextEncoder().encode(F).length:F.length},F]])}n(Du,"createReplayEnvelope");function Ru({recordingData:L,headers:F}){let K;const pe=`${JSON.stringify(F)}
`;if(typeof L=="string")K=`${pe}${L}`;else{const ht=new TextEncoder().encode(pe);K=new Uint8Array(ht.length+L.length),K.set(ht),K.set(L,ht.length)}return K}n(Ru,"prepareRecordingData");async function Mu({client:L,scope:F,replayId:K,event:pe}){const je=typeof L._integrations=="object"&&L._integrations!==null&&!Array.isArray(L._integrations)?Object.keys(L._integrations):void 0,ht={event_id:K,integrations:je};L.emit("preprocessEvent",pe,ht);const Lt=await v.prepareEvent(L.getOptions(),pe,ht,F,L,v.getIsolationScope());if(!Lt)return null;Lt.platform=Lt.platform||"javascript";const Bt=L.getSdkMetadata(),{name:Tt,version:bn}=Bt&&Bt.sdk||{};return Lt.sdk={...Lt.sdk,name:Tt||"sentry.javascript.unknown",version:bn||"0.0.0"},Lt}n(Mu,"prepareReplayEvent");async function Wl({recordingData:L,replayId:F,segmentId:K,eventContext:pe,timestamp:je,session:ht}){const Lt=Ru({recordingData:L,headers:{segment_id:K}}),{urls:Bt,errorIds:Tt,traceIds:bn,initialTimestamp:zn}=pe,Vn=v.getClient(),Qn=v.getCurrentScope(),Ii=Vn&&Vn.getTransport(),Ti=Vn&&Vn.getDsn();if(!Vn||!Ii||!Ti||!ht.sampled)return g.resolvedSyncPromise({});const Zi={type:e,replay_start_timestamp:zn/1e3,timestamp:je/1e3,error_ids:Tt,trace_ids:bn,urls:Bt,replay_id:F,segment_id:K,replay_type:ht.sampled},yr=await Mu({scope:Qn,client:Vn,replayId:F,event:Zi});if(!yr)return Vn.recordDroppedEvent("event_processor","replay",Zi),fr("An event processor returned `null`, will not send event."),g.resolvedSyncPromise({});delete yr.sdkProcessingMetadata;const tr=Du(yr,Lt,Ti,Vn.getOptions().tunnel);let Gr;try{Gr=await Ii.send(tr)}catch(Io){const Go=new Error(t);try{Go.cause=Io}catch{}throw Go}if(typeof Gr.statusCode=="number"&&(Gr.statusCode<200||Gr.statusCode>=300))throw new ic(Gr.statusCode);const Co=g.updateRateLimits({},Gr);if(g.isRateLimited(Co,"replay"))throw new rc(Co);return Gr}n(Wl,"sendReplayRequest");class ic extends Error{constructor(F){super(`Transport returned status code ${F}`)}}n(ic,"TransportStatusCodeError");class rc extends Error{constructor(F){super("Rate limit hit"),this.rateLimits=F}}n(rc,"RateLimitError");async function ru(L,F={count:0,interval:d}){const{recordingData:K,options:pe}=L;if(K.length)try{return await Wl(L),!0}catch(je){if(je instanceof ic||je instanceof rc)throw je;if(v.setContext("Replays",{_retryCount:F.count}),dn&&pe._experiments&&pe._experiments.captureExceptions&&v.captureException(je),F.count>=y){const ht=new Error(`${t} - max retries exceeded`);try{ht.cause=je}catch{}throw ht}return F.interval*=++F.count,new Promise((ht,Lt)=>{setTimeout(async()=>{try{await ru(L,F),ht(!0)}catch(Bt){Lt(Bt)}},F.interval)})}}n(ru,"sendReplay");const ss="__THROTTLED",El="__SKIPPED";function Pu(L,F,K){const pe=new Map,je=n(Bt=>{const Tt=Bt-K;pe.forEach((bn,zn)=>{zn<Tt&&pe.delete(zn)})},"_cleanup"),ht=n(()=>[...pe.values()].reduce((Bt,Tt)=>Bt+Tt,0),"_getTotalCount");let Lt=!1;return(...Bt)=>{const Tt=Math.floor(Date.now()/1e3);if(je(Tt),ht()>=F){const zn=Lt;return Lt=!0,zn?El:ss}Lt=!1;const bn=pe.get(Tt)||0;return pe.set(Tt,bn+1),L(...Bt)}}n(Pu,"throttle");class Ga{constructor({options:F,recordingOptions:K}){Ga.prototype.__init.call(this),Ga.prototype.__init2.call(this),Ga.prototype.__init3.call(this),Ga.prototype.__init4.call(this),Ga.prototype.__init5.call(this),Ga.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:r,sessionIdleExpire:o},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=K,this._options=F,this._debouncedFlush=Au(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Pu((Lt,Bt)=>vs(this,Lt,Bt),300,5);const{slowClickTimeout:pe,slowClickIgnoreSelectors:je}=this.getOptions(),ht=pe?{threshold:Math.min(_,pe),timeout:pe,scrollTimeout:C,ignoreSelector:je?je.join(","):""}:void 0;ht&&(this.clickDetector=new fs(this,ht))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(F){const{errorSampleRate:K,sessionSampleRate:pe}=this._options;if(!(K<=0&&pe<=0)){if(this._initializeSessionForSampling(F),!this.session){this._handleException(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",xo(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session")throw new Error("Replay recording is already in progress");if(this._isEnabled&&this.recordingMode==="buffer")throw new Error("Replay buffering is in progress, call `flush()` to save the replay");xo("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const F=gs({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=F,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");xo("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const F=gs({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=F,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const F=this._canvas;this._stopRecording=Jo({...this._recordingOptions,...this.recordingMode==="buffer"&&{checkoutEveryNms:p},emit:ud(this),onMutation:this._onMutationHandler,...F?{recordCanvas:F.recordCanvas,getCanvasManager:F.getCanvasManager,sampling:F.sampling,dataURLOptions:F.dataURLOptions}:{}})}catch(F){this._handleException(F)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(F){return this._handleException(F),!1}}async stop({forceFlush:F=!1,reason:K}={}){if(this._isEnabled){this._isEnabled=!1;try{fr(`[Replay] Stopping Replay${K?` triggered by ${K}`:""}`,this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),F&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,rs(this)}catch(pe){this._handleException(pe)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),fr("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),fr("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:F=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const K=Date.now();fr("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const pe=this.stopRecording();!F||!pe||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(K),this._updateSessionActivity(K),this._maybeSaveSession()),this.startRecording())}addUpdate(F){const K=F();this.recordingMode!=="buffer"&&K!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&pl(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const F=`${a.location.pathname}${a.location.hash}${a.location.search}`,K=`${a.location.origin}${F}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=K,this._context.initialTimestamp=Date.now(),this._context.urls.push(K)}throttledAddEvent(F,K){const pe=this._throttledAddEvent(F,K);if(pe===ss){const je=Ie({category:"replay.throttled"});this.addUpdate(()=>!Ms(this,{type:Wa,timestamp:je.timestamp||0,data:{tag:"breadcrumb",payload:je,metric:!0}}))}return pe}getCurrentRoute(){const F=this.lastActiveSpan||v.getActiveSpan(),K=F&&v.getRootSpan(F),je=(K&&v.spanToJSON(K).data||{})[v.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];if(!(!K||!je||!["route","custom"].includes(je)))return v.spanToJSON(K).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=aa({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(F){dn&&g.logger.error("[Replay]",F),dn&&this._options._experiments&&this._options._experiments.captureExceptions&&v.captureException(F)}_initializeSessionForSampling(F){const K=this._options.errorSampleRate>0,pe=gs({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:F},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:K});this.session=pe}_checkSession(){if(!this.session)return!1;const F=this.session;return La(F,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(F),!1):!0}async _refreshSession(F){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(F.id))}_addListeners(){try{a.document.addEventListener("visibilitychange",this._handleVisibilityChange),a.addEventListener("blur",this._handleWindowBlur),a.addEventListener("focus",this._handleWindowFocus),a.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(cd(this),this._hasInitializedCoreListeners=!0)}catch(F){this._handleException(F)}this._performanceCleanupCallback=lo(this)}_removeListeners(){try{a.document.removeEventListener("visibilitychange",this._handleVisibilityChange),a.removeEventListener("blur",this._handleWindowBlur),a.removeEventListener("focus",this._handleWindowFocus),a.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(F){this._handleException(F)}}__init(){this._handleVisibilityChange=()=>{a.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const F=Ie({category:"ui.blur"});this._doChangeToBackgroundTasks(F)}}__init3(){this._handleWindowFocus=()=>{const F=Ie({category:"ui.focus"});this._doChangeToForegroundTasks(F)}}__init4(){this._handleKeyboardEvent=F=>{In(this,F)}}_doChangeToBackgroundTasks(F){!this.session||Rl(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(F&&this._createCustomBreadcrumb(F),this.conditionalFlush())}_doChangeToForegroundTasks(F){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){fr("[Replay] Document has become active, but session has expired");return}F&&this._createCustomBreadcrumb(F)}_updateUserActivity(F=Date.now()){this._lastActivity=F}_updateSessionActivity(F=Date.now()){this.session&&(this.session.lastActivity=F,this._maybeSaveSession())}_createCustomBreadcrumb(F){this.addUpdate(()=>{this.throttledAddEvent({type:V.Custom,timestamp:F.timestamp||0,data:{tag:"breadcrumb",payload:F}})})}_addPerformanceEntries(){const F=Si(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(Cs(this,F))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:F,eventBuffer:K}=this;if(!F||!K||F.segmentId)return;const pe=K.getEarliestTimestamp();pe&&pe<this._context.initialTimestamp&&(this._context.initialTimestamp=pe)}_popEventContext(){const F={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),F}async _runFlush(){const F=this.getSessionId();if(!this.session||!this.eventBuffer||!F){dn&&g.logger.error("[Replay] No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await Ou(this),!!this.eventBuffer&&F===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const K=Date.now();if(K-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const pe=this._popEventContext(),je=this.session.segmentId++;this._maybeSaveSession();const ht=await this.eventBuffer.finish();await ru({replayId:F,recordingData:ht,segmentId:je,eventContext:pe,session:this.session,options:this.getOptions(),timestamp:K})}catch(K){this._handleException(K),this.stop({reason:"sendReplay"});const pe=v.getClient();pe&&pe.recordDroppedEvent("send_error","replay")}}__init5(){this._flush=async({force:F=!1}={})=>{if(!this._isEnabled&&!F)return;if(!this.checkAndHandleExpiredSession()){dn&&g.logger.error("[Replay] Attempting to finish replay event after session expired.");return}if(!this.session)return;const K=this.session.started,je=Date.now()-K;this._debouncedFlush.cancel();const ht=je<this._options.minReplayDuration,Lt=je>this._options.maxReplayDuration+5e3;if(ht||Lt){fr(`[Replay] Session duration (${Math.floor(je/1e3)}s) is too ${ht?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),ht&&this._debouncedFlush();return}const Bt=this.eventBuffer;if(Bt&&this.session.segmentId===0&&!Bt.hasCheckout&&fr("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock){this._flushLock=this._runFlush(),await this._flushLock,this._flushLock=void 0;return}try{await this._flushLock}catch(Tt){dn&&g.logger.error(Tt)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Ua(this.session)}__init6(){this._onMutationHandler=F=>{const K=F.length,pe=this._options.mutationLimit,je=this._options.mutationBreadcrumbLimit,ht=pe&&K>pe;if(K>je||ht){const Lt=Ie({category:"replay.mutations",data:{count:K,limit:ht}});this._createCustomBreadcrumb(Lt)}return ht?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}}n(Ga,"ReplayContainer");function Yo(L,F){return[...L,...F].join(",")}n(Yo,"getOption");function Ss({mask:L,unmask:F,block:K,unblock:pe,ignore:je}){const ht=['base[href="/"]'],Lt=Yo(L,[".sentry-mask","[data-sentry-mask]"]),Bt=Yo(F,[]);return{maskTextSelector:Lt,unmaskTextSelector:Bt,blockSelector:Yo(K,[".sentry-block","[data-sentry-block]",...ht]),unblockSelector:Yo(pe,[]),ignoreSelector:Yo(je,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}n(Ss,"getPrivacyOptions");function ku({el:L,key:F,maskAttributes:K,maskAllText:pe,privacyOptions:je,value:ht}){return!pe||je.unmaskTextSelector&&L.matches(je.unmaskTextSelector)?ht:K.includes(F)||F==="value"&&L.tagName==="INPUT"&&["submit","button"].includes(L.getAttribute("type")||"")?ht.replace(/[\S]/g,"*"):ht}n(ku,"maskAttribute");const ou='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',oc=["content-length","content-type","accept"];let zl=!1;const Nu=n(L=>new bl(L),"replayIntegration");class bl{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:F=f,flushMaxDelay:K=h,minReplayDuration:pe=R,maxReplayDuration:je=D,stickySession:ht=!0,useCompression:Lt=!0,workerUrl:Bt,_experiments:Tt={},maskAllText:bn=!0,maskAllInputs:zn=!0,blockAllMedia:Vn=!0,mutationBreadcrumbLimit:Qn=750,mutationLimit:Ii=1e4,slowClickTimeout:Ti=7e3,slowClickIgnoreSelectors:Zi=[],networkDetailAllowUrls:yr=[],networkDetailDenyUrls:tr=[],networkCaptureBodies:Gr=!0,networkRequestHeaders:Co=[],networkResponseHeaders:Io=[],mask:Go=[],maskAttributes:Xr=["title","placeholder"],unmask:ar=[],block:ho=[],unblock:ta=[],ignore:cr=[],maskFn:Qr,beforeAddRecordingEvent:$o,beforeErrorSampling:va}={}){this.name=bl.id;const ha=Ss({mask:Go,unmask:ar,block:ho,unblock:ta,ignore:cr});if(this._recordingOptions={maskAllInputs:zn,maskAllText:bn,maskInputOptions:{password:!0},maskTextFn:Qr,maskInputFn:Qr,maskAttributeFn:(ja,ko,Za)=>ku({maskAttributes:Xr,maskAllText:bn,privacyOptions:ha,key:ja,value:ko,el:Za}),...ha,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:ja=>{try{ja.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:F,flushMaxDelay:K,minReplayDuration:Math.min(pe,O),maxReplayDuration:Math.min(je,D),stickySession:ht,useCompression:Lt,workerUrl:Bt,blockAllMedia:Vn,maskAllInputs:zn,maskAllText:bn,mutationBreadcrumbLimit:Qn,mutationLimit:Ii,slowClickTimeout:Ti,slowClickIgnoreSelectors:Zi,networkDetailAllowUrls:yr,networkDetailDenyUrls:tr,networkCaptureBodies:Gr,networkRequestHeaders:cl(Co),networkResponseHeaders:cl(Io),beforeAddRecordingEvent:$o,beforeErrorSampling:va,_experiments:Tt},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${ou}`:ou),this._isInitialized&&g.isBrowser())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return zl}set _isInitialized(F){zl=F}setupOnce(){g.isBrowser()&&(this._setup(),setTimeout(()=>this._initialize()))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(F){return!this._replay||!this._replay.isEnabled()?Promise.resolve():this._replay.sendBufferedReplayOrFlush(F)}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const F=ac(this._initialOptions);this._replay=new Ga({options:F,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const K=v.getClient().getIntegrationByName("ReplayCanvas");if(!K)return;this._replay._canvas=K.getOptions()}catch{}}}n(bl,"Replay"),bl.__initStatic();function ac(L){const F=v.getClient(),K=F&&F.getOptions(),pe={sessionSampleRate:0,errorSampleRate:0,...g.dropUndefinedKeys(L)};if(!K)return g.consoleSandbox(()=>{console.warn("SDK client is not available.")}),pe;const je=v.parseSampleRate(K.replaysSessionSampleRate),ht=v.parseSampleRate(K.replaysOnErrorSampleRate);return je==null&&ht==null&&g.consoleSandbox(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),je!=null&&(pe.sessionSampleRate=je),ht!=null&&(pe.errorSampleRate=ht),pe}n(ac,"loadReplayOptionsFromClient");function cl(L){return[...oc,...L.map(F=>F.toLowerCase())]}n(cl,"_getMergedNetworkHeaders");function Bn(){const L=v.getClient();return L&&L.getIntegrationByName("Replay")}n(Bn,"getReplay"),l.getReplay=Bn,l.replayIntegration=Nu},8151162894:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8482989710),m=c(7563271614),v=c(3345899401),g=c(375537670),s=c(9046403702),a=c(7738910413);class i extends u.BaseClient{constructor(t){const r={parentSpanIsAlwaysRootSpan:!0,...t},o=s.WINDOW.SENTRY_SDK_SOURCE||m.getSDKSource();u.applySdkMetadata(r,"browser",["browser"],o),super(r),r.sendClientReports&&s.WINDOW.document&&s.WINDOW.document.addEventListener("visibilitychange",()=>{s.WINDOW.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,r){return g.eventFromException(this._options.stackParser,t,r,this._options.attachStacktrace)}eventFromMessage(t,r="info",o){return g.eventFromMessage(this._options.stackParser,t,r,o,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled()){v.DEBUG_BUILD&&m.logger.warn("SDK not enabled, will not capture user feedback.");return}const r=a.createUserFeedbackEnvelope(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(r)}_prepareEvent(t,r,o){return t.platform=t.platform||"javascript",super._prepareEvent(t,r,o)}_flushOutcomes(){const t=this._clearOutcomes();if(t.length===0){v.DEBUG_BUILD&&m.logger.log("No outcomes to send");return}if(!this._dsn){v.DEBUG_BUILD&&m.logger.log("No dsn provided, will not send outcomes");return}v.DEBUG_BUILD&&m.logger.log("Sending outcomes:",t);const r=m.createClientReportEnvelope(t,this._options.tunnel&&m.dsnToString(this._dsn));this.sendEnvelope(r)}}n(i,"BrowserClient"),l.BrowserClient=i},3345899401:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;l.DEBUG_BUILD=c},375537670:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8482989710),m=c(7563271614);function v(b,_){const C=a(b,_),w={type:_&&_.name,value:r(_)};return C.length&&(w.stacktrace={frames:C}),w.type===void 0&&w.value===""&&(w.value="Unrecoverable error caught"),w}n(v,"exceptionFromError");function g(b,_,C,w){const R=u.getClient(),O=R&&R.getOptions().normalizeDepth,D=S(_),I={__serialized__:m.normalizeToSize(_,O)};if(D)return{exception:{values:[v(b,D)]},extra:I};const M={exception:{values:[{type:m.isEvent(_)?_.constructor.name:w?"UnhandledRejection":"Error",value:d(_,{isUnhandledRejection:w})}]},extra:I};if(C){const k=a(b,C);k.length&&(M.exception.values[0].stacktrace={frames:k})}return M}n(g,"eventFromPlainObject");function s(b,_){return{exception:{values:[v(b,_)]}}}n(s,"eventFromError");function a(b,_){const C=_.stacktrace||_.stack||"",w=e(_),R=t(_);try{return b(C,w,R)}catch{}return[]}n(a,"parseStackFrames");const i=/Minified React error #\d+;/i;function e(b){return b&&i.test(b.message)?1:0}n(e,"getSkipFirstStackStringLines");function t(b){return typeof b.framesToPop=="number"?b.framesToPop:0}n(t,"getPopFirstTopFrames");function r(b){const _=b&&b.message;return _?_.error&&typeof _.error.message=="string"?_.error.message:_:"No error message"}n(r,"extractMessage");function o(b,_,C,w){const R=C&&C.syntheticException||void 0,O=h(b,_,R,w);return m.addExceptionMechanism(O),O.level="error",C&&C.event_id&&(O.event_id=C.event_id),m.resolvedSyncPromise(O)}n(o,"eventFromException");function f(b,_,C="info",w,R){const O=w&&w.syntheticException||void 0,D=p(b,_,O,R);return D.level=C,w&&w.event_id&&(D.event_id=w.event_id),m.resolvedSyncPromise(D)}n(f,"eventFromMessage");function h(b,_,C,w,R){let O;if(m.isErrorEvent(_)&&_.error)return s(b,_.error);if(m.isDOMError(_)||m.isDOMException(_)){const D=_;if("stack"in _)O=s(b,_);else{const I=D.name||(m.isDOMError(D)?"DOMError":"DOMException"),M=D.message?`${I}: ${D.message}`:I;O=p(b,M,C,w),m.addExceptionTypeValue(O,M)}return"code"in D&&(O.tags={...O.tags,"DOMException.code":`${D.code}`}),O}return m.isError(_)?s(b,_):m.isPlainObject(_)||m.isEvent(_)?(O=g(b,_,C,R),m.addExceptionMechanism(O,{synthetic:!0}),O):(O=p(b,_,C,w),m.addExceptionTypeValue(O,`${_}`,void 0),m.addExceptionMechanism(O,{synthetic:!0}),O)}n(h,"eventFromUnknownInput");function p(b,_,C,w){const R={};if(w&&C){const O=a(b,C);O.length&&(R.exception={values:[{value:_,stacktrace:{frames:O}}]})}if(m.isParameterizedString(_)){const{__sentry_template_string__:O,__sentry_template_values__:D}=_;return R.logentry={message:O,params:D},R}return R.message=_,R}n(p,"eventFromString");function d(b,{isUnhandledRejection:_}){const C=m.extractExceptionKeysForMessage(b),w=_?"promise rejection":"exception";return m.isErrorEvent(b)?`Event \`ErrorEvent\` captured as ${w} with message \`${b.message}\``:m.isEvent(b)?`Event \`${y(b)}\` (type=${b.type}) captured as ${w}`:`Object captured as ${w} with keys: ${C}`}n(d,"getNonErrorObjectExceptionValue");function y(b){try{const _=Object.getPrototypeOf(b);return _?_.constructor.name:void 0}catch{}}n(y,"getObjectClassName");function S(b){for(const _ in b)if(Object.prototype.hasOwnProperty.call(b,_)){const C=b[_];if(C instanceof Error)return C}}n(S,"getErrorPropertyFromObject"),l.eventFromException=o,l.eventFromMessage=f,l.eventFromUnknownInput=h,l.exceptionFromError=v},2915497046:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(6049995776),m=c(1076637753),v=u.buildFeedbackIntegration({lazyLoadIntegration:m.lazyLoadIntegration});l.feedbackAsyncIntegration=v},9038494489:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(6049995776),m=c(1076637753),v=u.buildFeedbackIntegration({lazyLoadIntegration:m.lazyLoadIntegration,getModalIntegration:()=>u.feedbackModalIntegration,getScreenshotIntegration:()=>u.feedbackScreenshotIntegration});l.feedbackSyncIntegration=v},9046403702:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8482989710),m=c(7563271614),v=m.GLOBAL_OBJ;let g=0;function s(){return g>0}n(s,"shouldIgnoreOnError");function a(){g++,setTimeout(()=>{g--})}n(a,"ignoreNextOnError");function i(e,t={},r){if(typeof e!="function")return e;try{const f=e.__sentry_wrapped__;if(f)return f;if(m.getOriginalFunction(e))return e}catch{return e}const o=n(function(){const f=Array.prototype.slice.call(arguments);try{r&&typeof r=="function"&&r.apply(this,arguments);const h=f.map(p=>i(p,t));return e.apply(this,h)}catch(h){throw a(),u.withScope(p=>{p.addEventProcessor(d=>(t.mechanism&&(m.addExceptionTypeValue(d,void 0,void 0),m.addExceptionMechanism(d,t.mechanism)),d.extra={...d.extra,arguments:f},d)),u.captureException(h)}),h}},"sentryWrapped");try{for(const f in e)Object.prototype.hasOwnProperty.call(e,f)&&(o[f]=e[f])}catch{}m.markFunctionWrapped(o,e),m.addNonEnumerableProperty(e,"__sentry_wrapped__",o);try{Object.getOwnPropertyDescriptor(o,"name").configurable&&Object.defineProperty(o,"name",{get(){return e.name}})}catch{}return o}n(i,"wrap"),l.WINDOW=v,l.ignoreNextOnError=a,l.shouldIgnoreOnError=s,l.wrap=i},8904626639:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8482989710),m=c(1114790286),v=c(9046403702),g=c(8151162894),s=c(8685600704),a=c(4795369790),i=c(375537670),e=c(7738910413),t=c(7672786771),r=c(3985552739),o=c(2334015581),f=c(7098914998),h=c(4305747877),p=c(9919948800),d=c(1076637753),y=c(918703877),S=c(328044736),b=c(4269444637),_=c(6979168052),C=c(4947629935),w=c(2915497046),R=c(9038494489),O=c(6049995776),D=c(6520656099),I=c(5559796378),M=c(7824548363),k=c(5380267868);l.SDK_VERSION=u.SDK_VERSION,l.SEMANTIC_ATTRIBUTE_SENTRY_OP=u.SEMANTIC_ATTRIBUTE_SENTRY_OP,l.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=u.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,l.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=u.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,l.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=u.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,l.Scope=u.Scope,l.addBreadcrumb=u.addBreadcrumb,l.addEventProcessor=u.addEventProcessor,l.addIntegration=u.addIntegration,l.addTracingExtensions=u.addTracingExtensions,l.captureConsoleIntegration=u.captureConsoleIntegration,l.captureEvent=u.captureEvent,l.captureException=u.captureException,l.captureFeedback=u.captureFeedback,l.captureMessage=u.captureMessage,l.captureSession=u.captureSession,l.close=u.close,l.continueTrace=u.continueTrace,l.createTransport=u.createTransport,l.debugIntegration=u.debugIntegration,l.dedupeIntegration=u.dedupeIntegration,l.endSession=u.endSession,l.extraErrorDataIntegration=u.extraErrorDataIntegration,l.flush=u.flush,l.functionToStringIntegration=u.functionToStringIntegration,l.getActiveSpan=u.getActiveSpan,l.getClient=u.getClient,l.getCurrentHub=u.getCurrentHub,l.getCurrentScope=u.getCurrentScope,l.getGlobalScope=u.getGlobalScope,l.getIsolationScope=u.getIsolationScope,l.getRootSpan=u.getRootSpan,l.getSpanDescendants=u.getSpanDescendants,l.getSpanStatusFromHttpCode=u.getSpanStatusFromHttpCode,l.inboundFiltersIntegration=u.inboundFiltersIntegration,l.isInitialized=u.isInitialized,l.lastEventId=u.lastEventId,l.makeMultiplexedTransport=u.makeMultiplexedTransport,l.moduleMetadataIntegration=u.moduleMetadataIntegration,l.parameterize=u.parameterize,l.registerSpanErrorInstrumentation=u.registerSpanErrorInstrumentation,l.rewriteFramesIntegration=u.rewriteFramesIntegration,l.sessionTimingIntegration=u.sessionTimingIntegration,l.setContext=u.setContext,l.setCurrentClient=u.setCurrentClient,l.setExtra=u.setExtra,l.setExtras=u.setExtras,l.setHttpStatus=u.setHttpStatus,l.setMeasurement=u.setMeasurement,l.setTag=u.setTag,l.setTags=u.setTags,l.setUser=u.setUser,l.spanToBaggageHeader=u.spanToBaggageHeader,l.spanToJSON=u.spanToJSON,l.spanToTraceHeader=u.spanToTraceHeader,l.startInactiveSpan=u.startInactiveSpan,l.startSession=u.startSession,l.startSpan=u.startSpan,l.startSpanManual=u.startSpanManual,l.withActiveSpan=u.withActiveSpan,l.withIsolationScope=u.withIsolationScope,l.withScope=u.withScope,l.zodErrorsIntegration=u.zodErrorsIntegration,l.metrics=m.metrics,l.WINDOW=v.WINDOW,l.BrowserClient=g.BrowserClient,l.makeFetchTransport=s.makeFetchTransport,l.chromeStackLineParser=a.chromeStackLineParser,l.defaultStackLineParsers=a.defaultStackLineParsers,l.defaultStackParser=a.defaultStackParser,l.geckoStackLineParser=a.geckoStackLineParser,l.opera10StackLineParser=a.opera10StackLineParser,l.opera11StackLineParser=a.opera11StackLineParser,l.winjsStackLineParser=a.winjsStackLineParser,l.eventFromException=i.eventFromException,l.eventFromMessage=i.eventFromMessage,l.exceptionFromError=i.exceptionFromError,l.createUserFeedbackEnvelope=e.createUserFeedbackEnvelope,l.captureUserFeedback=t.captureUserFeedback,l.forceLoad=t.forceLoad,l.getDefaultIntegrations=t.getDefaultIntegrations,l.init=t.init,l.onLoad=t.onLoad,l.showReportDialog=t.showReportDialog,l.breadcrumbsIntegration=r.breadcrumbsIntegration,l.globalHandlersIntegration=o.globalHandlersIntegration,l.httpContextIntegration=f.httpContextIntegration,l.linkedErrorsIntegration=h.linkedErrorsIntegration,l.browserApiErrorsIntegration=p.browserApiErrorsIntegration,l.lazyLoadIntegration=d.lazyLoadIntegration,l.reportingObserverIntegration=y.reportingObserverIntegration,l.httpClientIntegration=S.httpClientIntegration,l.contextLinesIntegration=b.contextLinesIntegration,l.getReplay=_.getReplay,l.replayIntegration=_.replayIntegration,l.replayCanvasIntegration=C.replayCanvasIntegration,l.feedbackAsyncIntegration=w.feedbackAsyncIntegration,l.feedbackIntegration=R.feedbackSyncIntegration,l.feedbackSyncIntegration=R.feedbackSyncIntegration,l.getFeedback=O.getFeedback,l.sendFeedback=O.sendFeedback,l.defaultRequestInstrumentationOptions=D.defaultRequestInstrumentationOptions,l.instrumentOutgoingRequests=D.instrumentOutgoingRequests,l.browserTracingIntegration=I.browserTracingIntegration,l.startBrowserTracingNavigationSpan=I.startBrowserTracingNavigationSpan,l.startBrowserTracingPageLoadSpan=I.startBrowserTracingPageLoadSpan,l.makeBrowserOfflineTransport=M.makeBrowserOfflineTransport,l.browserProfilingIntegration=k.browserProfilingIntegration},3985552739:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(3778408185),m=c(8482989710),v=c(7563271614),g=c(3345899401),s=c(9046403702),a=1024,i="Breadcrumbs",e=n((S={})=>{const b={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...S};return{name:i,setup(_){b.console&&v.addConsoleInstrumentationHandler(f(_)),b.dom&&u.addClickKeypressInstrumentationHandler(o(_,b.dom)),b.xhr&&u.addXhrInstrumentationHandler(h(_)),b.fetch&&v.addFetchInstrumentationHandler(p(_)),b.history&&u.addHistoryInstrumentationHandler(d(_)),b.sentry&&_.on("beforeSendEvent",r(_))}}},"_breadcrumbsIntegration"),t=m.defineIntegration(e);function r(S){return n(function(_){m.getClient()===S&&m.addBreadcrumb({category:`sentry.${_.type==="transaction"?"transaction":"event"}`,event_id:_.event_id,level:_.level,message:v.getEventDescription(_)},{event:_})},"addSentryBreadcrumb")}n(r,"_getSentryBreadcrumbHandler");function o(S,b){return n(function(C){if(m.getClient()!==S)return;let w,R,O=typeof b=="object"?b.serializeAttribute:void 0,D=typeof b=="object"&&typeof b.maxStringLength=="number"?b.maxStringLength:void 0;D&&D>a&&(g.DEBUG_BUILD&&v.logger.warn(`\`dom.maxStringLength\` cannot exceed ${a}, but a value of ${D} was configured. Sentry will use ${a} instead.`),D=a),typeof O=="string"&&(O=[O]);try{const M=C.event,k=y(M)?M.target:M;w=v.htmlTreeAsString(k,{keyAttrs:O,maxStringLength:D}),R=v.getComponentName(k)}catch{w="<unknown>"}if(w.length===0)return;const I={category:`ui.${C.name}`,message:w};R&&(I.data={"ui.component_name":R}),m.addBreadcrumb(I,{event:C.event,name:C.name,global:C.global})},"_innerDomBreadcrumb")}n(o,"_getDomBreadcrumbHandler");function f(S){return n(function(_){if(m.getClient()!==S)return;const C={category:"console",data:{arguments:_.args,logger:"console"},level:v.severityLevelFromString(_.level),message:v.safeJoin(_.args," ")};if(_.level==="assert")if(_.args[0]===!1)C.message=`Assertion failed: ${v.safeJoin(_.args.slice(1)," ")||"console.assert"}`,C.data.arguments=_.args.slice(1);else return;m.addBreadcrumb(C,{input:_.args,level:_.level})},"_consoleBreadcrumb")}n(f,"_getConsoleBreadcrumbHandler");function h(S){return n(function(_){if(m.getClient()!==S)return;const{startTimestamp:C,endTimestamp:w}=_,R=_.xhr[u.SENTRY_XHR_DATA_KEY];if(!C||!w||!R)return;const{method:O,url:D,status_code:I,body:M}=R,k={method:O,url:D,status_code:I},N={xhr:_.xhr,input:M,startTimestamp:C,endTimestamp:w};m.addBreadcrumb({category:"xhr",data:k,type:"http"},N)},"_xhrBreadcrumb")}n(h,"_getXhrBreadcrumbHandler");function p(S){return n(function(_){if(m.getClient()!==S)return;const{startTimestamp:C,endTimestamp:w}=_;if(w&&!(_.fetchData.url.match(/sentry_key/)&&_.fetchData.method==="POST"))if(_.error){const R=_.fetchData,O={data:_.error,input:_.args,startTimestamp:C,endTimestamp:w};m.addBreadcrumb({category:"fetch",data:R,level:"error",type:"http"},O)}else{const R=_.response,O={..._.fetchData,status_code:R&&R.status},D={input:_.args,response:R,startTimestamp:C,endTimestamp:w};m.addBreadcrumb({category:"fetch",data:O,type:"http"},D)}},"_fetchBreadcrumb")}n(p,"_getFetchBreadcrumbHandler");function d(S){return n(function(_){if(m.getClient()!==S)return;let C=_.from,w=_.to;const R=v.parseUrl(s.WINDOW.location.href);let O=C?v.parseUrl(C):void 0;const D=v.parseUrl(w);(!O||!O.path)&&(O=R),R.protocol===D.protocol&&R.host===D.host&&(w=D.relative),R.protocol===O.protocol&&R.host===O.host&&(C=O.relative),m.addBreadcrumb({category:"navigation",data:{from:C,to:w}})},"_historyBreadcrumb")}n(d,"_getHistoryBreadcrumbHandler");function y(S){return!!S&&!!S.target}n(y,"_isEvent"),l.breadcrumbsIntegration=t},9919948800:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8482989710),m=c(7563271614),v=c(9046403702),g=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],s="BrowserApiErrors",a=n((f={})=>{const h={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...f};return{name:s,setupOnce(){h.setTimeout&&m.fill(v.WINDOW,"setTimeout",e),h.setInterval&&m.fill(v.WINDOW,"setInterval",e),h.requestAnimationFrame&&m.fill(v.WINDOW,"requestAnimationFrame",t),h.XMLHttpRequest&&"XMLHttpRequest"in v.WINDOW&&m.fill(XMLHttpRequest.prototype,"send",r);const p=h.eventTarget;p&&(Array.isArray(p)?p:g).forEach(o)}}},"_browserApiErrorsIntegration"),i=u.defineIntegration(a);function e(f){return function(...h){const p=h[0];return h[0]=v.wrap(p,{mechanism:{data:{function:m.getFunctionName(f)},handled:!1,type:"instrument"}}),f.apply(this,h)}}n(e,"_wrapTimeFunction");function t(f){return function(h){return f.apply(this,[v.wrap(h,{mechanism:{data:{function:"requestAnimationFrame",handler:m.getFunctionName(f)},handled:!1,type:"instrument"}})])}}n(t,"_wrapRAF");function r(f){return function(...h){const p=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(y=>{y in p&&typeof p[y]=="function"&&m.fill(p,y,function(S){const b={mechanism:{data:{function:y,handler:m.getFunctionName(S)},handled:!1,type:"instrument"}},_=m.getOriginalFunction(S);return _&&(b.mechanism.data.handler=m.getFunctionName(_)),v.wrap(S,b)})}),f.apply(this,h)}}n(r,"_wrapXHR");function o(f){const h=v.WINDOW,p=h[f]&&h[f].prototype;!p||!p.hasOwnProperty||!p.hasOwnProperty("addEventListener")||(m.fill(p,"addEventListener",function(d){return function(y,S,b){try{typeof S.handleEvent=="function"&&(S.handleEvent=v.wrap(S.handleEvent,{mechanism:{data:{function:"handleEvent",handler:m.getFunctionName(S),target:f},handled:!1,type:"instrument"}}))}catch{}return d.apply(this,[y,v.wrap(S,{mechanism:{data:{function:"addEventListener",handler:m.getFunctionName(S),target:f},handled:!1,type:"instrument"}}),b])}}),m.fill(p,"removeEventListener",function(d){return function(y,S,b){const _=S;try{const C=_&&_.__sentry_wrapped__;C&&d.call(this,y,C,b)}catch{}return d.call(this,y,_,b)}}))}n(o,"_wrapEventTarget"),l.browserApiErrorsIntegration=i},4269444637:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8482989710),m=c(7563271614),v=m.GLOBAL_OBJ,g=7,s="ContextLines",a=n((r={})=>{const o=r.frameContextLines!=null?r.frameContextLines:g;return{name:s,processEvent(f){return e(f,o)}}},"_contextLinesIntegration"),i=u.defineIntegration(a);function e(r,o){const f=v.document,h=v.location&&m.stripUrlQueryAndFragment(v.location.href);if(!f||!h)return r;const p=r.exception&&r.exception.values;if(!p||!p.length)return r;const d=f.documentElement.innerHTML;if(!d)return r;const y=["<!DOCTYPE html>","<html>",...d.split(`
`),"</html>"];return p.forEach(S=>{const b=S.stacktrace;b&&b.frames&&(b.frames=b.frames.map(_=>t(_,y,h,o)))}),r}n(e,"addSourceContext");function t(r,o,f,h){return r.filename!==f||!r.lineno||!o.length||m.addContextToFrame(o,r,h),r}n(t,"applySourceContextToFrame"),l.applySourceContextToFrame=t,l.contextLinesIntegration=i},2334015581:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8482989710),m=c(7563271614),v=c(3345899401),g=c(375537670),s=c(9046403702),a="GlobalHandlers",i=n((y={})=>{const S={onerror:!0,onunhandledrejection:!0,...y};return{name:a,setupOnce(){Error.stackTraceLimit=50},setup(b){S.onerror&&(t(b),p("onerror")),S.onunhandledrejection&&(r(b),p("onunhandledrejection"))}}},"_globalHandlersIntegration"),e=u.defineIntegration(i);function t(y){m.addGlobalErrorInstrumentationHandler(S=>{const{stackParser:b,attachStacktrace:_}=d();if(u.getClient()!==y||s.shouldIgnoreOnError())return;const{msg:C,url:w,line:R,column:O,error:D}=S,I=h(g.eventFromUnknownInput(b,D||C,void 0,_,!1),w,R,O);I.level="error",u.captureEvent(I,{originalException:D,mechanism:{handled:!1,type:"onerror"}})})}n(t,"_installGlobalOnErrorHandler");function r(y){m.addGlobalUnhandledRejectionInstrumentationHandler(S=>{const{stackParser:b,attachStacktrace:_}=d();if(u.getClient()!==y||s.shouldIgnoreOnError())return;const C=o(S),w=m.isPrimitive(C)?f(C):g.eventFromUnknownInput(b,C,void 0,_,!0);w.level="error",u.captureEvent(w,{originalException:C,mechanism:{handled:!1,type:"onunhandledrejection"}})})}n(r,"_installGlobalOnUnhandledRejectionHandler");function o(y){if(m.isPrimitive(y))return y;try{if("reason"in y)return y.reason;if("detail"in y&&"reason"in y.detail)return y.detail.reason}catch{}return y}n(o,"_getUnhandledRejectionError");function f(y){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(y)}`}]}}}n(f,"_eventFromRejectionWithPrimitive");function h(y,S,b,_){const C=y.exception=y.exception||{},w=C.values=C.values||[],R=w[0]=w[0]||{},O=R.stacktrace=R.stacktrace||{},D=O.frames=O.frames||[],I=isNaN(parseInt(_,10))?void 0:_,M=isNaN(parseInt(b,10))?void 0:b,k=m.isString(S)&&S.length>0?S:m.getLocationHref();return D.length===0&&D.push({colno:I,filename:k,function:m.UNKNOWN_FUNCTION,in_app:!0,lineno:M}),y}n(h,"_enhanceEventWithInitialFrame");function p(y){v.DEBUG_BUILD&&m.logger.log(`Global Handler attached: ${y}`)}n(p,"globalHandlerLog");function d(){const y=u.getClient();return y&&y.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}n(d,"getOptions"),l.globalHandlersIntegration=e},328044736:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(3778408185),m=c(8482989710),v=c(7563271614),g=c(3345899401),s="HttpClient",a=n((R={})=>{const O={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...R};return{name:s,setup(D){y(D,O),S(D,O)}}},"_httpClientIntegration"),i=m.defineIntegration(a);function e(R,O,D,I){if(b(R,D.status,D.url)){const M=C(O,I);let k,N,j,B;w()&&([{headers:k,cookies:j},{headers:N,cookies:B}]=[{cookieHeader:"Cookie",obj:M},{cookieHeader:"Set-Cookie",obj:D}].map(({cookieHeader:Q,obj:oe})=>{const $=f(oe.headers);let he;try{const Ae=$[Q]||$[Q.toLowerCase()]||void 0;Ae&&(he=o(Ae))}catch{g.DEBUG_BUILD&&v.logger.log(`Could not extract cookies from header ${Q}`)}return{headers:$,cookies:he}}));const J=_({url:M.url,method:M.method,status:D.status,requestHeaders:k,responseHeaders:N,requestCookies:j,responseCookies:B});m.captureEvent(J)}}n(e,"_fetchResponseHandler");function t(R,O,D,I){if(b(R,O.status,O.responseURL)){let M,k,N;if(w()){try{const B=O.getResponseHeader("Set-Cookie")||O.getResponseHeader("set-cookie")||void 0;B&&(k=o(B))}catch{g.DEBUG_BUILD&&v.logger.log("Could not extract cookies from response headers")}try{N=h(O)}catch{g.DEBUG_BUILD&&v.logger.log("Could not extract headers from response")}M=I}const j=_({url:O.responseURL,method:D,status:O.status,requestHeaders:M,responseHeaders:N,responseCookies:k});m.captureEvent(j)}}n(t,"_xhrResponseHandler");function r(R){if(R){const O=R["Content-Length"]||R["content-length"];if(O)return parseInt(O,10)}}n(r,"_getResponseSizeFromHeaders");function o(R){return R.split("; ").reduce((O,D)=>{const[I,M]=D.split("=");return O[I]=M,O},{})}n(o,"_parseCookieString");function f(R){const O={};return R.forEach((D,I)=>{O[I]=D}),O}n(f,"_extractFetchHeaders");function h(R){const O=R.getAllResponseHeaders();return O?O.split(`\r
`).reduce((D,I)=>{const[M,k]=I.split(": ");return D[M]=k,D},{}):{}}n(h,"_getXHRResponseHeaders");function p(R,O){return R.some(D=>typeof D=="string"?O.includes(D):D.test(O))}n(p,"_isInGivenRequestTargets");function d(R,O){return R.some(D=>typeof D=="number"?D===O:O>=D[0]&&O<=D[1])}n(d,"_isInGivenStatusRanges");function y(R,O){v.supportsNativeFetch()&&v.addFetchInstrumentationHandler(D=>{if(m.getClient()!==R)return;const{response:I,args:M}=D,[k,N]=M;I&&e(O,k,I,N)})}n(y,"_wrapFetch");function S(R,O){"XMLHttpRequest"in v.GLOBAL_OBJ&&u.addXhrInstrumentationHandler(D=>{if(m.getClient()!==R)return;const I=D.xhr,M=I[u.SENTRY_XHR_DATA_KEY];if(!M)return;const{method:k,request_headers:N}=M;try{t(O,I,k,N)}catch(j){g.DEBUG_BUILD&&v.logger.warn("Error while extracting response event form XHR response",j)}})}n(S,"_wrapXHR");function b(R,O,D){return d(R.failedRequestStatusCodes,O)&&p(R.failedRequestTargets,D)&&!m.isSentryRequestUrl(D,m.getClient())}n(b,"_shouldCaptureResponse");function _(R){const O=`HTTP Client Error with status code: ${R.status}`,D={message:O,exception:{values:[{type:"Error",value:O}]},request:{url:R.url,method:R.method,headers:R.requestHeaders,cookies:R.requestCookies},contexts:{response:{status_code:R.status,headers:R.responseHeaders,cookies:R.responseCookies,body_size:r(R.responseHeaders)}}};return v.addExceptionMechanism(D,{type:"http.client",handled:!1}),D}n(_,"_createEvent");function C(R,O){return!O&&R instanceof Request||R instanceof Request&&R.bodyUsed?R:new Request(R,O)}n(C,"_getRequest");function w(){const R=m.getClient();return R?Boolean(R.getOptions().sendDefaultPii):!1}n(w,"_shouldSendDefaultPii"),l.httpClientIntegration=i},7098914998:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8482989710),m=c(9046403702),v=u.defineIntegration(()=>({name:"HttpContext",preprocessEvent(g){if(!m.WINDOW.navigator&&!m.WINDOW.location&&!m.WINDOW.document)return;const s=g.request&&g.request.url||m.WINDOW.location&&m.WINDOW.location.href,{referrer:a}=m.WINDOW.document||{},{userAgent:i}=m.WINDOW.navigator||{},e={...g.request&&g.request.headers,...a&&{Referer:a},...i&&{"User-Agent":i}},t={...g.request,...s&&{url:s},headers:e};g.request=t}}));l.httpContextIntegration=v},4305747877:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8482989710),m=c(7563271614),v=c(375537670),g="cause",s=5,a="LinkedErrors",i=n((t={})=>{const r=t.limit||s,o=t.key||g;return{name:a,preprocessEvent(f,h,p){const d=p.getOptions();m.applyAggregateErrorsToEvent(v.exceptionFromError,d.stackParser,d.maxValueLength,o,r,f,h)}}},"_linkedErrorsIntegration"),e=u.defineIntegration(i);l.linkedErrorsIntegration=e},918703877:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8482989710),m=c(7563271614),v=m.GLOBAL_OBJ,g="ReportingObserver",s=new WeakMap,a=n((e={})=>{const t=e.types||["crash","deprecation","intervention"];function r(o){if(s.has(u.getClient()))for(const f of o)u.withScope(h=>{h.setExtra("url",f.url);const p=`ReportingObserver [${f.type}]`;let d="No details available";if(f.body){const y={};for(const S in f.body)y[S]=f.body[S];if(h.setExtra("body",y),f.type==="crash"){const S=f.body;d=[S.crashId||"",S.reason||""].join(" ").trim()||d}else d=f.body.message||d}u.captureMessage(`${p}: ${d}`)})}return n(r,"handler"),{name:g,setupOnce(){if(!m.supportsReportingObserver())return;new v.ReportingObserver(r,{buffered:!0,types:t}).observe()},setup(o){s.set(o,!0)}}},"_reportingObserverIntegration"),i=u.defineIntegration(a);l.reportingObserverIntegration=i},1114790286:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8482989710);function m(i,e=1,t){u.metrics.increment(u.BrowserMetricsAggregator,i,e,t)}n(m,"increment");function v(i,e,t){u.metrics.distribution(u.BrowserMetricsAggregator,i,e,t)}n(v,"distribution");function g(i,e,t){u.metrics.set(u.BrowserMetricsAggregator,i,e,t)}n(g,"set");function s(i,e,t){u.metrics.gauge(u.BrowserMetricsAggregator,i,e,t)}n(s,"gauge");const a={increment:m,distribution:v,set:g,gauge:s};l.metrics=a},5380267868:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8482989710),m=c(7563271614),v=c(3345899401),g=c(3423034766),s=c(9596377211),a="BrowserProfiling",i=n(()=>({name:a,setup(t){const r=u.getActiveSpan(),o=r&&u.getRootSpan(r);o&&s.isAutomatedPageLoadSpan(o)&&s.shouldProfileSpan(o)&&g.startProfileForSpan(o),t.on("spanStart",f=>{f===u.getRootSpan(f)&&s.shouldProfileSpan(f)&&g.startProfileForSpan(f)}),t.on("beforeEnvelope",f=>{if(!s.getActiveProfilesCount())return;const h=s.findProfiledTransactionsFromEnvelope(f);if(!h.length)return;const p=[];for(const d of h){const y=d&&d.contexts,S=y&&y.profile&&y.profile.profile_id,b=y&&y.profile&&y.profile.start_timestamp;if(typeof S!="string"){v.DEBUG_BUILD&&m.logger.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!S){v.DEBUG_BUILD&&m.logger.log("[Profiling] cannot find profile for a span without a profile context");continue}y&&y.profile&&delete y.profile;const _=s.takeProfileFromGlobalCache(S);if(!_){v.DEBUG_BUILD&&m.logger.log(`[Profiling] Could not retrieve profile for span: ${S}`);continue}const C=s.createProfilingEvent(S,b,_,d);C&&p.push(C)}s.addProfilesToEnvelope(f,p)})}}),"_browserProfilingIntegration"),e=u.defineIntegration(i);l.browserProfilingIntegration=e},3423034766:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8482989710),m=c(7563271614),v=c(3345899401),g=c(9046403702),s=c(9596377211);function a(i){let e;s.isAutomatedPageLoadSpan(i)&&(e=m.timestampInSeconds()*1e3);const t=s.startJSSelfProfile();if(!t)return;v.DEBUG_BUILD&&m.logger.log(`[Profiling] started profiling span: ${u.spanToJSON(i).description}`);const r=m.uuid4();u.getCurrentScope().setContext("profile",{profile_id:r,start_timestamp:e});async function o(){if(i&&t)return t.stop().then(d=>{if(f&&(g.WINDOW.clearTimeout(f),f=void 0),v.DEBUG_BUILD&&m.logger.log(`[Profiling] stopped profiling of span: ${u.spanToJSON(i).description}`),!d){v.DEBUG_BUILD&&m.logger.log(`[Profiling] profiler returned null profile for: ${u.spanToJSON(i).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}s.addProfileToGlobalCache(r,d)}).catch(d=>{v.DEBUG_BUILD&&m.logger.log("[Profiling] error while stopping profiler:",d)})}n(o,"onProfileHandler");let f=g.WINDOW.setTimeout(()=>{v.DEBUG_BUILD&&m.logger.log("[Profiling] max profile duration elapsed, stopping profiling for:",u.spanToJSON(i).description),o()},s.MAX_PROFILE_DURATION_MS);const h=i.end.bind(i);function p(){return i?(o().then(()=>{h()},()=>{h()}),i):h()}n(p,"profilingWrappedSpanEnd"),i.end=p}n(a,"startProfileForSpan"),l.startProfileForSpan=a},9596377211:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8482989710),m=c(7563271614),v=c(3345899401),g=c(9046403702),s=1e6,a=String(0),i="main";let e="",t="",r="",o=g.WINDOW.navigator&&g.WINDOW.navigator.userAgent||"",f="";const h=g.WINDOW.navigator&&g.WINDOW.navigator.language||g.WINDOW.navigator&&g.WINDOW.navigator.languages&&g.WINDOW.navigator.languages[0]||"";function p(Oe){return typeof Oe=="object"&&Oe!==null&&"getHighEntropyValues"in Oe}n(p,"isUserAgentData");const d=g.WINDOW.navigator&&g.WINDOW.navigator.userAgentData;p(d)&&d.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(Oe=>{if(e=Oe.platform||"",r=Oe.architecture||"",f=Oe.model||"",t=Oe.platformVersion||"",Oe.fullVersionList&&Oe.fullVersionList.length>0){const be=Oe.fullVersionList[Oe.fullVersionList.length-1];o=`${be.brand} ${be.version}`}}).catch(Oe=>{});function y(Oe){return!("thread_metadata"in Oe)}n(y,"isProcessedJSSelfProfile");function S(Oe){return y(Oe)?w(Oe):Oe}n(S,"enrichWithThreadInformation");function b(Oe){const be=Oe&&Oe.contexts&&Oe.contexts.trace&&Oe.contexts.trace.trace_id;return typeof be=="string"&&be.length!==32&&v.DEBUG_BUILD&&m.logger.log(`[Profiling] Invalid traceId: ${be} on profiled event`),typeof be!="string"?"":be}n(b,"getTraceId");function _(Oe,be,De,ut){if(ut.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(De==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${De} instead.`);const St=b(ut),Rt=S(De),Ze=be||(typeof ut.start_timestamp=="number"?ut.start_timestamp*1e3:m.timestampInSeconds()*1e3),mt=typeof ut.timestamp=="number"?ut.timestamp*1e3:m.timestampInSeconds()*1e3;return{event_id:Oe,timestamp:new Date(Ze).toISOString(),platform:"javascript",version:"1",release:ut.release||"",environment:ut.environment||u.DEFAULT_ENVIRONMENT,runtime:{name:"javascript",version:g.WINDOW.navigator.userAgent},os:{name:e,version:t,build_number:o},device:{locale:h,model:f,manufacturer:o,architecture:r,is_emulator:!1},debug_meta:{images:I(De.resources)},profile:Rt,transactions:[{name:ut.transaction||"",id:ut.event_id||m.uuid4(),trace_id:St,active_thread_id:a,relative_start_ns:"0",relative_end_ns:((mt-Ze)*1e6).toFixed(0)}]}}n(_,"createProfilePayload");function C(Oe){return u.spanToJSON(Oe).op==="pageload"}n(C,"isAutomatedPageLoadSpan");function w(Oe){let be,De=0;const ut={samples:[],stacks:[],frames:[],thread_metadata:{[a]:{name:i}}};if(!Oe.samples.length)return ut;const St=Oe.samples[0].timestamp,Rt=typeof performance.timeOrigin=="number"?performance.timeOrigin:m.browserPerformanceTimeOrigin||0,Ze=Rt-(m.browserPerformanceTimeOrigin||Rt);for(let mt=0;mt<Oe.samples.length;mt++){const At=Oe.samples[mt];if(At.stackId===void 0){be===void 0&&(be=De,ut.stacks[be]=[],De++),ut.samples[mt]={elapsed_since_start_ns:((At.timestamp+Ze-St)*s).toFixed(0),stack_id:be,thread_id:a};continue}let Vt=Oe.stacks[At.stackId];const dt=[];for(;Vt;){dt.push(Vt.frameId);const gt=Oe.frames[Vt.frameId];ut.frames[Vt.frameId]===void 0&&(ut.frames[Vt.frameId]={function:gt.name,abs_path:typeof gt.resourceId=="number"?Oe.resources[gt.resourceId]:void 0,lineno:gt.line,colno:gt.column}),Vt=Vt.parentId===void 0?void 0:Oe.stacks[Vt.parentId]}const Cn={elapsed_since_start_ns:((At.timestamp+Ze-St)*s).toFixed(0),stack_id:De,thread_id:a};ut.stacks[De]=dt,ut.samples[mt]=Cn,De++}return ut}n(w,"convertJSSelfProfileToSampledFormat");function R(Oe,be){if(!be.length)return Oe;for(const De of be)Oe[1].push([{type:"profile"},De]);return Oe}n(R,"addProfilesToEnvelope");function O(Oe){const be=[];return m.forEachEnvelopeItem(Oe,(De,ut)=>{if(ut==="transaction")for(let St=1;St<De.length;St++){const Rt=De[St];Rt&&Rt.contexts&&Rt.contexts.profile&&Rt.contexts.profile.profile_id&&be.push(De[St])}}),be}n(O,"findProfiledTransactionsFromEnvelope");const D=new WeakMap;function I(Oe){const be=m.GLOBAL_OBJ._sentryDebugIds;if(!be)return[];const De=u.getClient(),ut=De&&De.getOptions(),St=ut&&ut.stackParser;if(!St)return[];let Rt;const Ze=D.get(St);Ze?Rt=Ze:(Rt=new Map,D.set(St,Rt));const mt=Object.keys(be).reduce((Vt,dt)=>{let Cn;const gt=Rt.get(dt);gt?Cn=gt:(Cn=St(dt),Rt.set(dt,Cn));for(let Ut=Cn.length-1;Ut>=0;Ut--){const en=Cn[Ut],sn=en&&en.filename;if(en&&sn){Vt[sn]=be[dt];break}}return Vt},{}),At=[];for(const Vt of Oe)Vt&&mt[Vt]&&At.push({type:"sourcemap",code_file:Vt,debug_id:mt[Vt]});return At}n(I,"applyDebugMetadata");function M(Oe){return typeof Oe!="number"&&typeof Oe!="boolean"||typeof Oe=="number"&&isNaN(Oe)?(v.DEBUG_BUILD&&m.logger.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(Oe)} of type ${JSON.stringify(typeof Oe)}.`),!1):Oe===!0||Oe===!1?!0:Oe<0||Oe>1?(v.DEBUG_BUILD&&m.logger.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${Oe}.`),!1):!0}n(M,"isValidSampleRate");function k(Oe){return Oe.samples.length<2?(v.DEBUG_BUILD&&m.logger.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):Oe.frames.length?!0:(v.DEBUG_BUILD&&m.logger.log("[Profiling] Discarding profile because it contains no frames"),!1)}n(k,"isValidProfile");let N=!1;const j=3e4;function B(Oe){return typeof Oe=="function"}n(B,"isJSProfilerSupported");function J(){const Oe=g.WINDOW.Profiler;if(!B(Oe)){v.DEBUG_BUILD&&m.logger.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const be=10,De=Math.floor(j/be);try{return new Oe({sampleInterval:be,maxBufferSize:De})}catch{v.DEBUG_BUILD&&(m.logger.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),m.logger.log("[Profiling] Disabling profiling for current user session.")),N=!0}}n(J,"startJSSelfProfile");function Q(Oe){if(N)return v.DEBUG_BUILD&&m.logger.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!Oe.isRecording())return v.DEBUG_BUILD&&m.logger.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const be=u.getClient(),De=be&&be.getOptions();if(!De)return v.DEBUG_BUILD&&m.logger.log("[Profiling] Profiling disabled, no options found."),!1;const ut=De.profilesSampleRate;return M(ut)?ut?(ut===!0?!0:Math.random()<ut)?!0:(v.DEBUG_BUILD&&m.logger.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(ut)})`),!1):(v.DEBUG_BUILD&&m.logger.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(v.DEBUG_BUILD&&m.logger.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}n(Q,"shouldProfileSpan");function oe(Oe,be,De,ut){return k(De)?_(Oe,be,De,ut):null}n(oe,"createProfilingEvent");const $=new Map;function he(){return $.size}n(he,"getActiveProfilesCount");function Ae(Oe){const be=$.get(Oe);return be&&$.delete(Oe),be}n(Ae,"takeProfileFromGlobalCache");function Ee(Oe,be){if($.set(Oe,be),$.size>30){const De=$.keys().next().value;$.delete(De)}}n(Ee,"addProfileToGlobalCache"),l.MAX_PROFILE_DURATION_MS=j,l.addProfileToGlobalCache=Ee,l.addProfilesToEnvelope=R,l.applyDebugMetadata=I,l.convertJSSelfProfileToSampledFormat=w,l.createProfilePayload=_,l.createProfilingEvent=oe,l.enrichWithThreadInformation=S,l.findProfiledTransactionsFromEnvelope=O,l.getActiveProfilesCount=he,l.isAutomatedPageLoadSpan=C,l.isValidSampleRate=M,l.shouldProfileSpan=Q,l.startJSSelfProfile=J,l.takeProfileFromGlobalCache=Ae},7672786771:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8482989710),m=c(7563271614),v=c(3778408185),g=c(8151162894),s=c(3345899401),a=c(9046403702),i=c(3985552739),e=c(9919948800),t=c(2334015581),r=c(7098914998),o=c(4305747877),f=c(4795369790),h=c(8685600704);function p(O){return[u.inboundFiltersIntegration(),u.functionToStringIntegration(),e.browserApiErrorsIntegration(),i.breadcrumbsIntegration(),t.globalHandlersIntegration(),o.linkedErrorsIntegration(),u.dedupeIntegration(),r.httpContextIntegration()]}n(p,"getDefaultIntegrations");function d(O={}){return{...{defaultIntegrations:p(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:a.WINDOW.SENTRY_RELEASE&&a.WINDOW.SENTRY_RELEASE.id?a.WINDOW.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0},...O}}n(d,"applyDefaultOptions");function y(){const O=a.WINDOW,D=O&&O.chrome&&O.chrome.runtime&&O.chrome.runtime.id,I=a.WINDOW;return!!(I&&I.browser&&I.browser.runtime&&I.browser.runtime.id)||!!D}n(y,"shouldShowBrowserExtensionError");function S(O={}){const D=d(O);if(y()){m.consoleSandbox(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}s.DEBUG_BUILD&&(m.supportsFetch()||m.logger.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));const I={...D,stackParser:m.stackParserFromStackParserOptions(D.stackParser||f.defaultStackParser),integrations:u.getIntegrationsToSetup(D),transport:D.transport||h.makeFetchTransport};u.initAndBind(g.BrowserClient,I),D.autoSessionTracking&&w()}n(S,"init");function b(O={}){if(!a.WINDOW.document){s.DEBUG_BUILD&&m.logger.error("Global document not defined in showReportDialog call");return}const D=u.getCurrentScope(),I=D.getClient(),M=I&&I.getDsn();if(!M){s.DEBUG_BUILD&&m.logger.error("DSN not configured for showReportDialog call");return}if(D&&(O.user={...D.getUser(),...O.user}),!O.eventId){const B=u.lastEventId();B&&(O.eventId=B)}const k=a.WINDOW.document.createElement("script");k.async=!0,k.crossOrigin="anonymous",k.src=u.getReportDialogEndpoint(M,O),O.onLoad&&(k.onload=O.onLoad);const{onClose:N}=O;if(N){const B=n(J=>{if(J.data==="__sentry_reportdialog_closed__")try{N()}finally{a.WINDOW.removeEventListener("message",B)}},"reportDialogClosedMessageHandler");a.WINDOW.addEventListener("message",B)}const j=a.WINDOW.document.head||a.WINDOW.document.body;j?j.appendChild(k):s.DEBUG_BUILD&&m.logger.error("Not injecting report dialog. No injection point found in HTML")}n(b,"showReportDialog");function _(){}n(_,"forceLoad");function C(O){O()}n(C,"onLoad");function w(){if(typeof a.WINDOW.document>"u"){s.DEBUG_BUILD&&m.logger.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}u.startSession({ignoreDuration:!0}),u.captureSession(),v.addHistoryInstrumentationHandler(({from:O,to:D})=>{O!==void 0&&O!==D&&(u.startSession({ignoreDuration:!0}),u.captureSession())})}n(w,"startSessionTracking");function R(O){const D=u.getClient();D&&D.captureUserFeedback(O)}n(R,"captureUserFeedback"),l.captureUserFeedback=R,l.forceLoad=_,l.getDefaultIntegrations=p,l.init=S,l.onLoad=C,l.showReportDialog=b},4795369790:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=10,v=20,g=30,s=40,a=50;function i(N,j,B,J){const Q={filename:N,function:j==="<anonymous>"?u.UNKNOWN_FUNCTION:j,in_app:!0};return B!==void 0&&(Q.lineno=B),J!==void 0&&(Q.colno=J),Q}n(i,"createFrame");const e=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,t=/\((\S*)(?::(\d+))(?::(\d+))\)/,o=[g,n(N=>{const j=e.exec(N);if(j){if(j[2]&&j[2].indexOf("eval")===0){const oe=t.exec(j[2]);oe&&(j[2]=oe[1],j[3]=oe[2],j[4]=oe[3])}const[J,Q]=k(j[1]||u.UNKNOWN_FUNCTION,j[2]);return i(Q,J,j[3]?+j[3]:void 0,j[4]?+j[4]:void 0)}},"chromeStackParserFn")],f=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,h=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,d=[a,n(N=>{const j=f.exec(N);if(j){if(j[3]&&j[3].indexOf(" > eval")>-1){const oe=h.exec(j[3]);oe&&(j[1]=j[1]||"eval",j[3]=oe[1],j[4]=oe[2],j[5]="")}let J=j[3],Q=j[1]||u.UNKNOWN_FUNCTION;return[Q,J]=k(Q,J),i(J,Q,j[4]?+j[4]:void 0,j[5]?+j[5]:void 0)}},"gecko")],y=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,b=[s,n(N=>{const j=y.exec(N);return j?i(j[2],j[1]||u.UNKNOWN_FUNCTION,+j[3],j[4]?+j[4]:void 0):void 0},"winjs")],_=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,w=[m,n(N=>{const j=_.exec(N);return j?i(j[2],j[3]||u.UNKNOWN_FUNCTION,+j[1]):void 0},"opera10")],R=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,D=[v,n(N=>{const j=R.exec(N);return j?i(j[5],j[3]||j[4]||u.UNKNOWN_FUNCTION,+j[1],+j[2]):void 0},"opera11")],I=[o,d],M=u.createStackParser(...I),k=n((N,j)=>{const B=N.indexOf("safari-extension")!==-1,J=N.indexOf("safari-web-extension")!==-1;return B||J?[N.indexOf("@")!==-1?N.split("@")[0]:u.UNKNOWN_FUNCTION,B?`safari-extension:${j}`:`safari-web-extension:${j}`]:[N,j]},"extractSafariExtensionDetails");l.chromeStackLineParser=o,l.defaultStackLineParsers=I,l.defaultStackParser=M,l.geckoStackLineParser=d,l.opera10StackLineParser=w,l.opera11StackLineParser=D,l.winjsStackLineParser=b},3372334685:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8482989710),m=c(7563271614),v=c(3345899401),g=c(9046403702);function s(){g.WINDOW&&g.WINDOW.document?g.WINDOW.document.addEventListener("visibilitychange",()=>{const a=u.getActiveSpan();if(!a)return;const i=u.getRootSpan(a);if(g.WINDOW.document.hidden&&i){const e="cancelled",{op:t,status:r}=u.spanToJSON(i);v.DEBUG_BUILD&&m.logger.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${t}`),r||i.setStatus({code:u.SPAN_STATUS_ERROR,message:e}),i.setAttribute("sentry.cancellation_reason","document.hidden"),i.end()}}):v.DEBUG_BUILD&&m.logger.warn("[Tracing] Could not set up background tab detection due to lack of global document")}n(s,"registerBackgroundTabDetection"),l.registerBackgroundTabDetection=s},5559796378:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(3778408185),m=c(8482989710),v=c(7563271614),g=c(3345899401),s=c(9046403702),a=c(3372334685),i=c(6520656099),e="BrowserTracing",t={...m.TRACING_DEFAULTS,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!0,_experiments:{},...i.defaultRequestInstrumentationOptions},r=n((y={})=>{m.registerSpanErrorInstrumentation();const{enableInp:S,enableLongTask:b,_experiments:{enableInteractions:_},beforeStartSpan:C,idleTimeout:w,finalTimeout:R,childSpanTimeout:O,markBackgroundSpan:D,traceFetch:I,traceXHR:M,shouldCreateSpanForRequest:k,enableHTTPTimings:N,instrumentPageLoad:j,instrumentNavigation:B}={...t,...y},J=u.startTrackingWebVitals();S&&u.startTrackingINP(),b&&u.startTrackingLongTasks(),_&&u.startTrackingInteractions();const Q={name:void 0,source:void 0};function oe($,he){const Ae=he.op==="pageload",Ee=C?C(he):he,Oe=Ee.attributes||{};he.name!==Ee.name&&(Oe[m.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]="custom",Ee.attributes=Oe),Q.name=Ee.name,Q.source=Oe[m.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];const be=m.startIdleSpan(Ee,{idleTimeout:w,finalTimeout:R,childSpanTimeout:O,disableAutoFinish:Ae,beforeSpanEnd:ut=>{J(),u.addPerformanceEntries(ut)}});function De(){["interactive","complete"].includes(s.WINDOW.document.readyState)&&$.emit("idleSpanEnableAutoFinish",be)}return n(De,"emitFinish"),Ae&&s.WINDOW.document&&(s.WINDOW.document.addEventListener("readystatechange",()=>{De()}),De()),be}return n(oe,"_createRouteSpan"),{name:e,afterAllSetup($){let he,Ae=s.WINDOW.location&&s.WINDOW.location.href;$.on("startNavigationSpan",Ee=>{m.getClient()===$&&(he&&(g.DEBUG_BUILD&&v.logger.log(`[Tracing] Finishing current root span with op: ${m.spanToJSON(he).op}`),he.end()),he=oe($,{op:"navigation",...Ee}))}),$.on("startPageLoadSpan",(Ee,Oe={})=>{if(m.getClient()!==$)return;he&&(g.DEBUG_BUILD&&v.logger.log(`[Tracing] Finishing current root span with op: ${m.spanToJSON(he).op}`),he.end());const be=Oe.sentryTrace||h("sentry-trace"),De=Oe.baggage||h("baggage"),ut=v.propagationContextFromHeaders(be,De);m.getCurrentScope().setPropagationContext(ut),he=oe($,{op:"pageload",...Ee})}),$.on("spanEnd",Ee=>{const Oe=m.spanToJSON(Ee).op;if(Ee!==m.getRootSpan(Ee)||Oe!=="navigation"&&Oe!=="pageload")return;const be=m.getCurrentScope(),De=be.getPropagationContext();be.setPropagationContext({...De,sampled:De.sampled!==void 0?De.sampled:m.spanIsSampled(Ee),dsc:De.dsc||m.getDynamicSamplingContextFromSpan(Ee)})}),s.WINDOW.location&&(j&&o($,{name:s.WINDOW.location.pathname,startTime:v.browserPerformanceTimeOrigin?v.browserPerformanceTimeOrigin/1e3:void 0,attributes:{[m.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"url",[m.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.pageload.browser"}}),B&&u.addHistoryInstrumentationHandler(({to:Ee,from:Oe})=>{if(Oe===void 0&&Ae&&Ae.indexOf(Ee)!==-1){Ae=void 0;return}Oe!==Ee&&(Ae=void 0,f($,{name:s.WINDOW.location.pathname,attributes:{[m.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"url",[m.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.navigation.browser"}}))})),D&&a.registerBackgroundTabDetection(),_&&p(w,R,O,Q),i.instrumentOutgoingRequests({traceFetch:I,traceXHR:M,tracePropagationTargets:$.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:k,enableHTTPTimings:N})}}},"browserTracingIntegration");function o(y,S,b){y.emit("startPageLoadSpan",S,b),m.getCurrentScope().setTransactionName(S.name);const _=m.getActiveSpan();return(_&&m.spanToJSON(_).op)==="pageload"?_:void 0}n(o,"startBrowserTracingPageLoadSpan");function f(y,S){m.getCurrentScope().setPropagationContext(d()),m.getIsolationScope().setPropagationContext(d()),y.emit("startNavigationSpan",S),m.getCurrentScope().setTransactionName(S.name);const b=m.getActiveSpan();return(b&&m.spanToJSON(b).op)==="navigation"?b:void 0}n(f,"startBrowserTracingNavigationSpan");function h(y){const S=v.getDomElement(`meta[name=${y}]`);return S?S.getAttribute("content"):void 0}n(h,"getMetaContent");function p(y,S,b,_){let C;const w=n(()=>{const R="ui.action.click",O=m.getActiveSpan(),D=O&&m.getRootSpan(O);if(D){const I=m.spanToJSON(D).op;if(["navigation","pageload"].includes(I)){g.DEBUG_BUILD&&v.logger.warn(`[Tracing] Did not create ${R} span because a pageload or navigation span is in progress.`);return}}if(C&&(C.setAttribute(m.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,"interactionInterrupted"),C.end(),C=void 0),!_.name){g.DEBUG_BUILD&&v.logger.warn(`[Tracing] Did not create ${R} transaction because _latestRouteName is missing.`);return}C=m.startIdleSpan({name:_.name,op:R,attributes:{[m.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:_.source||"url"}},{idleTimeout:y,finalTimeout:S,childSpanTimeout:b})},"registerInteractionTransaction");s.WINDOW.document&&addEventListener("click",w,{once:!1,capture:!0})}n(p,"registerInteractionListener");function d(){return{traceId:v.uuid4(),spanId:v.uuid4().substring(16)}}n(d,"generatePropagationContext"),l.BROWSER_TRACING_INTEGRATION_ID=e,l.browserTracingIntegration=r,l.getMetaContent=h,l.startBrowserTracingNavigationSpan=f,l.startBrowserTracingPageLoadSpan=o},6520656099:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(3778408185),m=c(8482989710),v=c(7563271614),g=c(9046403702),s={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0};function a(S){const{traceFetch:b,traceXHR:_,shouldCreateSpanForRequest:C,enableHTTPTimings:w,tracePropagationTargets:R}={traceFetch:s.traceFetch,traceXHR:s.traceXHR,...S},O=typeof C=="function"?C:M=>!0,D=n(M=>f(M,R),"shouldAttachHeadersWithTargets"),I={};b&&v.addFetchInstrumentationHandler(M=>{const k=m.instrumentFetchRequest(M,O,D,I);if(k){const N=y(M.fetchData.url),j=N?v.parseUrl(N).host:void 0;k.setAttributes({"http.url":N,"server.address":j})}w&&k&&e(k)}),_&&u.addXhrInstrumentationHandler(M=>{const k=h(M,O,D,I);w&&k&&e(k)})}n(a,"instrumentOutgoingRequests");function i(S){return S.entryType==="resource"&&"initiatorType"in S&&typeof S.nextHopProtocol=="string"&&(S.initiatorType==="fetch"||S.initiatorType==="xmlhttprequest")}n(i,"isPerformanceResourceTiming");function e(S){const{url:b}=m.spanToJSON(S).data||{};if(!b||typeof b!="string")return;const _=u.addPerformanceInstrumentationHandler("resource",({entries:C})=>{C.forEach(w=>{i(w)&&w.name.endsWith(b)&&(o(w).forEach(O=>S.setAttribute(...O)),setTimeout(_))})})}n(e,"addHTTPTimings");function t(S){let b="unknown",_="unknown",C="";for(const w of S){if(w==="/"){[b,_]=S.split("/");break}if(!isNaN(Number(w))){b=C==="h"?"http":C,_=S.split(C)[1];break}C+=w}return C===S&&(b=C),{name:b,version:_}}n(t,"extractNetworkProtocol");function r(S=0){return((v.browserPerformanceTimeOrigin||performance.timeOrigin)+S)/1e3}n(r,"getAbsoluteTime");function o(S){const{name:b,version:_}=t(S.nextHopProtocol),C=[];return C.push(["network.protocol.version",_],["network.protocol.name",b]),v.browserPerformanceTimeOrigin?[...C,["http.request.redirect_start",r(S.redirectStart)],["http.request.fetch_start",r(S.fetchStart)],["http.request.domain_lookup_start",r(S.domainLookupStart)],["http.request.domain_lookup_end",r(S.domainLookupEnd)],["http.request.connect_start",r(S.connectStart)],["http.request.secure_connection_start",r(S.secureConnectionStart)],["http.request.connection_end",r(S.connectEnd)],["http.request.request_start",r(S.requestStart)],["http.request.response_start",r(S.responseStart)],["http.request.response_end",r(S.responseEnd)]]:C}n(o,"resourceTimingEntryToSpanData");function f(S,b){const _=g.WINDOW.location&&g.WINDOW.location.href;if(_){let C,w;try{C=new URL(S,_),w=new URL(_).origin}catch{return!1}const R=C.origin===w;return b?v.stringMatchesSomePattern(C.toString(),b)||R&&v.stringMatchesSomePattern(C.pathname,b):R}else{const C=!!S.match(/^\/(?!\/)/);return b?v.stringMatchesSomePattern(S,b):C}}n(f,"shouldAttachHeaders");function h(S,b,_,C){const w=S.xhr,R=w&&w[u.SENTRY_XHR_DATA_KEY];if(!w||w.__sentry_own_request__||!R)return;const O=m.hasTracingEnabled()&&b(R.url);if(S.endTimestamp&&O){const j=w.__sentry_xhr_span_id__;if(!j)return;const B=C[j];B&&R.status_code!==void 0&&(m.setHttpStatus(B,R.status_code),B.end(),delete C[j]);return}const D=y(R.url),I=D?v.parseUrl(D).host:void 0,M=!!m.getActiveSpan(),k=O&&M?m.startInactiveSpan({name:`${R.method} ${R.url}`,attributes:{type:"xhr","http.method":R.method,"http.url":D,url:R.url,"server.address":I,[m.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.http.browser",[m.SEMANTIC_ATTRIBUTE_SENTRY_OP]:"http.client"}}):new m.SentryNonRecordingSpan;w.__sentry_xhr_span_id__=k.spanContext().spanId,C[w.__sentry_xhr_span_id__]=k;const N=m.getClient();return w.setRequestHeader&&_(R.url)&&N&&p(w,N,m.hasTracingEnabled()&&M?k:void 0),k}n(h,"xhrCallback");function p(S,b,_){const C=m.getCurrentScope(),w=m.getIsolationScope(),{traceId:R,spanId:O,sampled:D,dsc:I}={...w.getPropagationContext(),...C.getPropagationContext()},M=_&&m.hasTracingEnabled()?m.spanToTraceHeader(_):v.generateSentryTraceHeader(R,O,D),k=v.dynamicSamplingContextToSentryBaggageHeader(I||(_?m.getDynamicSamplingContextFromSpan(_):m.getDynamicSamplingContextFromClient(R,b)));d(S,M,k)}n(p,"addTracingHeadersToXhrRequest");function d(S,b,_){try{S.setRequestHeader("sentry-trace",b),_&&S.setRequestHeader(v.BAGGAGE_HEADER_NAME,_)}catch{}}n(d,"setHeaderOnXhr");function y(S){try{return new URL(S,g.WINDOW.location.origin).href}catch{return}}n(y,"getFullURL"),l.defaultRequestInstrumentationOptions=s,l.extractNetworkProtocol=t,l.instrumentOutgoingRequests=a,l.shouldAttachHeaders=f,l.xhrCallback=h},8685600704:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8482989710),m=c(7563271614),v=c(8475594045);function g(s,a=v.getNativeFetchImplementation()){let i=0,e=0;function t(r){const o=r.body.length;i+=o,e++;const f={body:r.body,method:"POST",referrerPolicy:"origin",headers:s.headers,keepalive:i<=6e4&&e<15,...s.fetchOptions};if(!a)return v.clearCachedFetchImplementation(),m.rejectedSyncPromise("No fetch implementation available");try{return a(s.url,f).then(h=>(i-=o,e--,{statusCode:h.status,headers:{"x-sentry-rate-limits":h.headers.get("X-Sentry-Rate-Limits"),"retry-after":h.headers.get("Retry-After")}}))}catch(h){return v.clearCachedFetchImplementation(),i-=o,e--,m.rejectedSyncPromise(h)}}return n(t,"makeRequest"),u.createTransport(s,t)}n(g,"makeFetchTransport"),l.makeFetchTransport=g},7824548363:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8482989710),m=c(7563271614),v=c(8685600704);function g(h){return new Promise((p,d)=>{h.oncomplete=h.onsuccess=()=>p(h.result),h.onabort=h.onerror=()=>d(h.error)})}n(g,"promisifyRequest");function s(h,p){const d=indexedDB.open(h);d.onupgradeneeded=()=>d.result.createObjectStore(p);const y=g(d);return S=>y.then(b=>S(b.transaction(p,"readwrite").objectStore(p)))}n(s,"createStore");function a(h){return g(h.getAllKeys())}n(a,"keys");function i(h,p,d){return h(y=>a(y).then(S=>{if(!(S.length>=d))return y.put(p,Math.max(...S,0)+1),g(y.transaction)}))}n(i,"push");function e(h,p,d){return h(y=>a(y).then(S=>{if(!(S.length>=d))return y.put(p,Math.min(...S,0)-1),g(y.transaction)}))}n(e,"unshift");function t(h){return h(p=>a(p).then(d=>{if(d.length!==0)return g(p.get(d[0])).then(y=>(p.delete(d[0]),g(p.transaction).then(()=>y)))}))}n(t,"shift");function r(h){let p;function d(){return p==null&&(p=s(h.dbName||"sentry-offline",h.storeName||"queue")),p}return n(d,"getStore"),{push:async y=>{try{const S=await m.serializeEnvelope(y);await i(d(),S,h.maxQueueSize||30)}catch{}},unshift:async y=>{try{const S=await m.serializeEnvelope(y);await e(d(),S,h.maxQueueSize||30)}catch{}},shift:async()=>{try{const y=await t(d());if(y)return m.parseEnvelope(y)}catch{}}}}n(r,"createIndexedDbStore");function o(h){return p=>h({...p,createStore:r})}n(o,"makeIndexedDbOfflineTransport");function f(h=v.makeFetchTransport){return o(u.makeOfflineTransport(h))}n(f,"makeBrowserOfflineTransport"),l.createStore=s,l.makeBrowserOfflineTransport=f,l.push=i,l.shift=t,l.unshift=e},8475594045:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(3345899401),v=c(9046403702);let g;function s(){if(g)return g;if(u.isNativeFetch(v.WINDOW.fetch))return g=v.WINDOW.fetch.bind(v.WINDOW);const i=v.WINDOW.document;let e=v.WINDOW.fetch;if(i&&typeof i.createElement=="function")try{const t=i.createElement("iframe");t.hidden=!0,i.head.appendChild(t);const r=t.contentWindow;r&&r.fetch&&(e=r.fetch),i.head.removeChild(t)}catch(t){m.DEBUG_BUILD&&u.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}try{return g=e.bind(v.WINDOW)}catch{}}n(s,"getNativeFetchImplementation");function a(){g=void 0}n(a,"clearCachedFetchImplementation"),l.clearCachedFetchImplementation=a,l.getNativeFetchImplementation=s},7738910413:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614);function m(g,{metadata:s,tunnel:a,dsn:i}){const e={event_id:g.event_id,sent_at:new Date().toISOString(),...s&&s.sdk&&{sdk:{name:s.sdk.name,version:s.sdk.version}},...!!a&&!!i&&{dsn:u.dsnToString(i)}},t=v(g);return u.createEnvelope(e,[t])}n(m,"createUserFeedbackEnvelope");function v(g){return[{type:"user_report"},g]}n(v,"createUserFeedbackEnvelopeItem"),l.createUserFeedbackEnvelope=m},1076637753:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8482989710),m=c(9046403702),v={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",debugIntegration:"debug",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",sessionTimingIntegration:"sessiontiming"},g=m.WINDOW;async function s(i){const e=v[i],t=g.Sentry=g.Sentry||{};if(!e)throw new Error(`Cannot lazy load integration: ${i}`);const r=t[i];if(typeof r=="function")return r;const o=a(e),f=m.WINDOW.document.createElement("script");f.src=o,f.crossOrigin="anonymous";const h=new Promise((d,y)=>{f.addEventListener("load",()=>d()),f.addEventListener("error",y)});m.WINDOW.document.body.appendChild(f);try{await h}catch{throw new Error(`Error when loading integration: ${i}`)}const p=t[i];if(typeof p!="function")throw new Error(`Could not load integration: ${i}`);return p}n(s,"lazyLoadIntegration");function a(i){const e=u.getClient(),t=e&&e.getOptions(),r=t&&t.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${u.SDK_VERSION}/${i}.min.js`,r).toString()}n(a,"getScriptURL"),l.lazyLoadIntegration=s},9857059330:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m="7";function v(e){const t=e.protocol?`${e.protocol}:`:"",r=e.port?`:${e.port}`:"";return`${t}//${e.host}${r}${e.path?`/${e.path}`:""}/api/`}n(v,"getBaseApiEndpoint");function g(e){return`${v(e)}${e.projectId}/envelope/`}n(g,"_getIngestEndpoint");function s(e,t){return u.urlEncode({sentry_key:e.publicKey,sentry_version:m,...t&&{sentry_client:`${t.name}/${t.version}`}})}n(s,"_encodedAuth");function a(e,t,r){return t||`${g(e)}?${s(e,r)}`}n(a,"getEnvelopeEndpointWithUrlEncodedAuth");function i(e,t){const r=u.makeDsn(e);if(!r)return"";const o=`${v(r)}embed/error-page/`;let f=`dsn=${u.dsnToString(r)}`;for(const h in t)if(h!=="dsn"&&h!=="onClose")if(h==="user"){const p=t.user;if(!p)continue;p.name&&(f+=`&name=${encodeURIComponent(p.name)}`),p.email&&(f+=`&email=${encodeURIComponent(p.email)}`)}else f+=`&${encodeURIComponent(h)}=${encodeURIComponent(t[h])}`;return`${o}?${f}`}n(i,"getReportDialogEndpoint"),l.getEnvelopeEndpointWithUrlEncodedAuth=a,l.getReportDialogEndpoint=i},897859094:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(2685322190),m=c(3752312155);function v(s){const a=u.getMainCarrier(),i=u.getSentryCarrier(a);i.acs=s}n(v,"setAsyncContextStrategy");function g(s){const a=u.getSentryCarrier(s);return a.acs?a.acs:m.getStackAsyncContextStrategy()}n(g,"getAsyncContextStrategy"),l.getAsyncContextStrategy=g,l.setAsyncContextStrategy=v},3752312155:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(8438156026),v=c(2158524366),g=c(2685322190);class s{constructor(f,h){let p;f?p=f:p=new v.Scope;let d;h?d=h:d=new v.Scope,this._stack=[{scope:p}],this._isolationScope=d}withScope(f){const h=this._pushScope();let p;try{p=f(h)}catch(d){throw this._popScope(),d}return u.isThenable(p)?p.then(d=>(this._popScope(),d),d=>{throw this._popScope(),d}):(this._popScope(),p)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const f=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:f}),f}_popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}}n(s,"AsyncContextStack");function a(){const o=g.getMainCarrier(),f=g.getSentryCarrier(o);return f.hub||(f.hub=new s(m.getDefaultCurrentScope(),m.getDefaultIsolationScope())),f.hub}n(a,"getAsyncContextStack");function i(o){return a().withScope(o)}n(i,"withScope");function e(o,f){const h=a();return h.withScope(()=>(h.getStackTop().scope=o,f(o)))}n(e,"withSetScope");function t(o){return a().withScope(()=>o(a().getIsolationScope()))}n(t,"withIsolationScope");function r(){return{withIsolationScope:t,withScope:i,withSetScope:e,withSetIsolationScope:(o,f)=>t(f),getCurrentScope:()=>a().getScope(),getIsolationScope:()=>a().getIsolationScope()}}n(r,"getStackAsyncContextStrategy"),l.AsyncContextStack=s,l.getStackAsyncContextStrategy=r},4936960144:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(9857059330),v=c(8438156026),g=c(8844511336),s=c(5297268390),a=c(1927145604),i=c(5234873710),e=c(9064881818),t=c(1119532287),r=c(9877103701),o="Not capturing exception because it's already been captured.";class f{constructor(b){if(this._options=b,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],b.dsn?this._dsn=u.makeDsn(b.dsn):g.DEBUG_BUILD&&u.logger.warn("No DSN provided, client will not send events."),this._dsn){const _=m.getEnvelopeEndpointWithUrlEncodedAuth(this._dsn,b.tunnel,b._metadata?b._metadata.sdk:void 0);this._transport=b.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...b.transportOptions,url:_})}}captureException(b,_,C){const w=u.uuid4();if(u.checkOrSetAlreadyCaught(b))return g.DEBUG_BUILD&&u.logger.log(o),w;const R={event_id:w,..._};return this._process(this.eventFromException(b,R).then(O=>this._captureEvent(O,R,C))),R.event_id}captureMessage(b,_,C,w){const R={event_id:u.uuid4(),...C},O=u.isParameterizedString(b)?b:String(b),D=u.isPrimitive(b)?this.eventFromMessage(O,_,R):this.eventFromException(b,R);return this._process(D.then(I=>this._captureEvent(I,R,w))),R.event_id}captureEvent(b,_,C){const w=u.uuid4();if(_&&_.originalException&&u.checkOrSetAlreadyCaught(_.originalException))return g.DEBUG_BUILD&&u.logger.log(o),w;const R={event_id:w,..._},D=(b.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(b,R,D||C)),R.event_id}captureSession(b){typeof b.release!="string"?g.DEBUG_BUILD&&u.logger.warn("Discarded session because of missing or non-string release"):(this.sendSession(b),i.updateSession(b,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(b){const _=this._transport;return _?(this.emit("flush"),this._isClientDoneProcessing(b).then(C=>_.flush(b).then(w=>C&&w))):u.resolvedSyncPromise(!0)}close(b){return this.flush(b).then(_=>(this.getOptions().enabled=!1,this.emit("close"),_))}getEventProcessors(){return this._eventProcessors}addEventProcessor(b){this._eventProcessors.push(b)}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationByName(b){return this._integrations[b]}addIntegration(b){const _=this._integrations[b.name];a.setupIntegration(this,b,this._integrations),_||a.afterSetupIntegrations(this,[b])}sendEvent(b,_={}){this.emit("beforeSendEvent",b,_);let C=s.createEventEnvelope(b,this._dsn,this._options._metadata,this._options.tunnel);for(const R of _.attachments||[])C=u.addItemToEnvelope(C,u.createAttachmentEnvelopeItem(R));const w=this.sendEnvelope(C);w&&w.then(R=>this.emit("afterSendEvent",b,R),null)}sendSession(b){const _=s.createSessionEnvelope(b,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(_)}recordDroppedEvent(b,_,C){if(this._options.sendClientReports){const w=`${b}:${_}`;g.DEBUG_BUILD&&u.logger.log(`Adding outcome: "${w}"`),this._outcomes[w]=this._outcomes[w]+1||1}}on(b,_){this._hooks[b]||(this._hooks[b]=[]),this._hooks[b].push(_)}emit(b,..._){this._hooks[b]&&this._hooks[b].forEach(C=>C(..._))}sendEnvelope(b){return this.emit("beforeEnvelope",b),this._isEnabled()&&this._transport?this._transport.send(b).then(null,_=>(g.DEBUG_BUILD&&u.logger.error("Error while sending event:",_),_)):(g.DEBUG_BUILD&&u.logger.error("Transport disabled"),u.resolvedSyncPromise({}))}_setupIntegrations(){const{integrations:b}=this._options;this._integrations=a.setupIntegrations(this,b),a.afterSetupIntegrations(this,b)}_updateSessionFromEvent(b,_){let C=!1,w=!1;const R=_.exception&&_.exception.values;if(R){w=!0;for(const I of R){const M=I.mechanism;if(M&&M.handled===!1){C=!0;break}}}const O=b.status==="ok";(O&&b.errors===0||O&&C)&&(i.updateSession(b,{...C&&{status:"crashed"},errors:b.errors||Number(w||C)}),this.captureSession(b))}_isClientDoneProcessing(b){return new u.SyncPromise(_=>{let C=0;const w=1,R=setInterval(()=>{this._numProcessing==0?(clearInterval(R),_(!0)):(C+=w,b&&C>=b&&(clearInterval(R),_(!1)))},w)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(b,_,C,w=v.getIsolationScope()){const R=this.getOptions(),O=Object.keys(this._integrations);return!_.integrations&&O.length>0&&(_.integrations=O),this.emit("preprocessEvent",b,_),b.type||w.setLastEventId(b.event_id||_.event_id),r.prepareEvent(R,b,_,C,this,w).then(D=>{if(D===null)return D;const I={...w.getPropagationContext(),...C?C.getPropagationContext():void 0};if(!(D.contexts&&D.contexts.trace)&&I){const{traceId:k,spanId:N,parentSpanId:j,dsc:B}=I;D.contexts={trace:u.dropUndefinedKeys({trace_id:k,span_id:N,parent_span_id:j}),...D.contexts};const J=B||e.getDynamicSamplingContextFromClient(k,this);D.sdkProcessingMetadata={dynamicSamplingContext:J,...D.sdkProcessingMetadata}}return D})}_captureEvent(b,_={},C){return this._processEvent(b,_,C).then(w=>w.event_id,w=>{if(g.DEBUG_BUILD){const R=w;R.logLevel==="log"?u.logger.log(R.message):u.logger.warn(R)}})}_processEvent(b,_,C){const w=this.getOptions(),{sampleRate:R}=w,O=y(b),D=d(b),I=b.type||"error",M=`before send for type \`${I}\``,k=typeof R>"u"?void 0:t.parseSampleRate(R);if(D&&typeof k=="number"&&Math.random()>k)return this.recordDroppedEvent("sample_rate","error",b),u.rejectedSyncPromise(new u.SentryError(`Discarding event because it's not included in the random sample (sampling rate = ${R})`,"log"));const N=I==="replay_event"?"replay":I,B=(b.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(b,_,C,B).then(J=>{if(J===null)throw this.recordDroppedEvent("event_processor",N,b),new u.SentryError("An event processor returned `null`, will not send event.","log");if(_.data&&_.data.__sentry__===!0)return J;const oe=p(w,J,_);return h(oe,M)}).then(J=>{if(J===null)throw this.recordDroppedEvent("before_send",N,b),new u.SentryError(`${M} returned \`null\`, will not send event.`,"log");const Q=C&&C.getSession();!O&&Q&&this._updateSessionFromEvent(Q,J);const oe=J.transaction_info;if(O&&oe&&J.transaction!==b.transaction){const $="custom";J.transaction_info={...oe,source:$}}return this.sendEvent(J,_),J}).then(null,J=>{throw J instanceof u.SentryError?J:(this.captureException(J,{data:{__sentry__:!0},originalException:J}),new u.SentryError(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${J}`))})}_process(b){this._numProcessing++,b.then(_=>(this._numProcessing--,_),_=>(this._numProcessing--,_))}_clearOutcomes(){const b=this._outcomes;return this._outcomes={},Object.keys(b).map(_=>{const[C,w]=_.split(":");return{reason:C,category:w,quantity:b[_]}})}}n(f,"BaseClient");function h(S,b){const _=`${b} must return \`null\` or a valid event.`;if(u.isThenable(S))return S.then(C=>{if(!u.isPlainObject(C)&&C!==null)throw new u.SentryError(_);return C},C=>{throw new u.SentryError(`${b} rejected with ${C}`)});if(!u.isPlainObject(S)&&S!==null)throw new u.SentryError(_);return S}n(h,"_validateBeforeSendResult");function p(S,b,_){const{beforeSend:C,beforeSendTransaction:w,beforeSendSpan:R}=S;if(d(b)&&C)return C(b,_);if(y(b)){if(b.spans&&R){const O=[];for(const D of b.spans){const I=R(D);I&&O.push(I)}b.spans=O}if(w)return w(b,_)}return b}n(p,"processBeforeSend");function d(S){return S.type===void 0}n(d,"isErrorEvent");function y(S){return S.type==="transaction"}n(y,"isTransactionEvent"),l.BaseClient=f},4433801832:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(8438156026),v=100;function g(s,a){const i=m.getClient(),e=m.getIsolationScope();if(!i)return;const{beforeBreadcrumb:t=null,maxBreadcrumbs:r=v}=i.getOptions();if(r<=0)return;const f={timestamp:u.dateTimestampInSeconds(),...s},h=t?u.consoleSandbox(()=>t(f,a)):f;h!==null&&(i.emit&&i.emit("beforeAddBreadcrumb",h,a),e.addBreadcrumb(h,r))}n(g,"addBreadcrumb"),l.addBreadcrumb=g},2685322190:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614);function m(){return v(u.GLOBAL_OBJ),u.GLOBAL_OBJ}n(m,"getMainCarrier");function v(g){return g.__SENTRY__||(g.__SENTRY__={extensions:{}}),g.__SENTRY__}n(v,"getSentryCarrier"),l.getMainCarrier=m,l.getSentryCarrier=v},7584701501:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614);function m(g,s,a,i,e){const t={sent_at:new Date().toISOString()};a&&a.sdk&&(t.sdk={name:a.sdk.name,version:a.sdk.version}),i&&e&&(t.dsn=u.dsnToString(e)),s&&(t.trace=u.dropUndefinedKeys(s));const r=v(g);return u.createEnvelope(t,[r])}n(m,"createCheckInEnvelope");function v(g){return[{type:"check_in"},g]}n(v,"createCheckInEnvelopeItem"),l.createCheckInEnvelope=m},4834620523:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const c="production";l.DEFAULT_ENVIRONMENT=c},8438156026:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(897859094),v=c(2685322190),g=c(2158524366);function s(){return u.getGlobalSingleton("defaultCurrentScope",()=>new g.Scope)}n(s,"getDefaultCurrentScope");function a(){return u.getGlobalSingleton("defaultIsolationScope",()=>new g.Scope)}n(a,"getDefaultIsolationScope");function i(){const h=v.getMainCarrier();return m.getAsyncContextStrategy(h).getCurrentScope()}n(i,"getCurrentScope");function e(){const h=v.getMainCarrier();return m.getAsyncContextStrategy(h).getIsolationScope()}n(e,"getIsolationScope");function t(){return u.getGlobalSingleton("globalScope",()=>new g.Scope)}n(t,"getGlobalScope");function r(...h){const p=v.getMainCarrier(),d=m.getAsyncContextStrategy(p);if(h.length===2){const[y,S]=h;return y?d.withSetScope(y,S):d.withScope(S)}return d.withScope(h[0])}n(r,"withScope");function o(...h){const p=v.getMainCarrier(),d=m.getAsyncContextStrategy(p);if(h.length===2){const[y,S]=h;return y?d.withSetIsolationScope(y,S):d.withIsolationScope(S)}return d.withIsolationScope(h[0])}n(o,"withIsolationScope");function f(){return i().getClient()}n(f,"getClient"),l.getClient=f,l.getCurrentScope=i,l.getDefaultCurrentScope=s,l.getDefaultIsolationScope=a,l.getGlobalScope=t,l.getIsolationScope=e,l.withIsolationScope=o,l.withScope=r},8844511336:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;l.DEBUG_BUILD=c},5297268390:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614);c(2206474662),c(8844511336);const m=c(5475300505),v=c(9064881818);function g(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}n(g,"enhanceEventWithSdkInfo");function s(e,t,r,o){const f=u.getSdkMetadataForEnvelopeHeader(r),h={sent_at:new Date().toISOString(),...f&&{sdk:f},...!!o&&t&&{dsn:u.dsnToString(t)}},p="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return u.createEnvelope(h,[p])}n(s,"createSessionEnvelope");function a(e,t,r,o){const f=u.getSdkMetadataForEnvelopeHeader(r),h=e.type&&e.type!=="replay_event"?e.type:"event";g(e,r&&r.sdk);const p=u.createEventEnvelopeHeaders(e,f,o,t);delete e.sdkProcessingMetadata;const d=[{type:h},e];return u.createEnvelope(p,[d])}n(a,"createEventEnvelope");function i(e,t){function r(y){return!!y.trace_id&&!!y.public_key}n(r,"dscHasRequiredProps");const o=v.getDynamicSamplingContextFromSpan(e[0]),f={sent_at:new Date().toISOString(),...r(o)&&{trace:o}},h=t&&t.getOptions().beforeSendSpan,p=h?y=>h(m.spanToJSON(y)):y=>m.spanToJSON(y),d=[];for(const y of e){const S=p(y);S&&d.push(u.createSpanEnvelopeItem(S))}return u.createEnvelope(f,d)}n(i,"createSpanEnvelope"),l.createEventEnvelope=a,l.createSessionEnvelope=s,l.createSpanEnvelope=i},5911348835:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(8844511336);function v(g,s,a,i=0){return new u.SyncPromise((e,t)=>{const r=g[i];if(s===null||typeof r!="function")e(s);else{const o=r({...s},a);m.DEBUG_BUILD&&r.id&&o===null&&u.logger.log(`Event processor "${r.id}" dropped event`),u.isThenable(o)?o.then(f=>v(g,f,a,i+1).then(e)).then(null,t):v(g,o,a,i+1).then(e).then(null,t)}})}n(v,"notifyEventProcessors"),l.notifyEventProcessors=v},5015065869:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(4834620523),v=c(8438156026),g=c(8844511336),s=c(5234873710),a=c(9877103701);function i(N,j){return v.getCurrentScope().captureException(N,a.parseEventHintOrCaptureContext(j))}n(i,"captureException");function e(N,j){const B=typeof j=="string"?j:void 0,J=typeof j!="string"?{captureContext:j}:void 0;return v.getCurrentScope().captureMessage(N,B,J)}n(e,"captureMessage");function t(N,j){return v.getCurrentScope().captureEvent(N,j)}n(t,"captureEvent");function r(N,j){v.getIsolationScope().setContext(N,j)}n(r,"setContext");function o(N){v.getIsolationScope().setExtras(N)}n(o,"setExtras");function f(N,j){v.getIsolationScope().setExtra(N,j)}n(f,"setExtra");function h(N){v.getIsolationScope().setTags(N)}n(h,"setTags");function p(N,j){v.getIsolationScope().setTag(N,j)}n(p,"setTag");function d(N){v.getIsolationScope().setUser(N)}n(d,"setUser");function y(){return v.getIsolationScope().lastEventId()}n(y,"lastEventId");function S(N,j){const B=v.getCurrentScope(),J=v.getClient();if(!J)g.DEBUG_BUILD&&u.logger.warn("Cannot capture check-in. No client defined.");else if(!J.captureCheckIn)g.DEBUG_BUILD&&u.logger.warn("Cannot capture check-in. Client does not support sending check-ins.");else return J.captureCheckIn(N,j,B);return u.uuid4()}n(S,"captureCheckIn");function b(N,j,B){const J=S({monitorSlug:N,status:"in_progress"},B),Q=u.timestampInSeconds();function oe($){S({monitorSlug:N,status:$,checkInId:J,duration:u.timestampInSeconds()-Q})}return n(oe,"finishCheckIn"),v.withIsolationScope(()=>{let $;try{$=j()}catch(he){throw oe("error"),he}return u.isThenable($)?Promise.resolve($).then(()=>{oe("ok")},()=>{oe("error")}):oe("ok"),$})}n(b,"withMonitor");async function _(N){const j=v.getClient();return j?j.flush(N):(g.DEBUG_BUILD&&u.logger.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}n(_,"flush");async function C(N){const j=v.getClient();return j?j.close(N):(g.DEBUG_BUILD&&u.logger.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}n(C,"close");function w(){return!!v.getClient()}n(w,"isInitialized");function R(){const N=v.getClient();return!!N&&N.getOptions().enabled!==!1&&!!N.getTransport()}n(R,"isEnabled");function O(N){v.getIsolationScope().addEventProcessor(N)}n(O,"addEventProcessor");function D(N){const j=v.getClient(),B=v.getIsolationScope(),J=v.getCurrentScope(),{release:Q,environment:oe=m.DEFAULT_ENVIRONMENT}=j&&j.getOptions()||{},{userAgent:$}=u.GLOBAL_OBJ.navigator||{},he=s.makeSession({release:Q,environment:oe,user:J.getUser()||B.getUser(),...$&&{userAgent:$},...N}),Ae=B.getSession();return Ae&&Ae.status==="ok"&&s.updateSession(Ae,{status:"exited"}),I(),B.setSession(he),J.setSession(he),he}n(D,"startSession");function I(){const N=v.getIsolationScope(),j=v.getCurrentScope(),B=j.getSession()||N.getSession();B&&s.closeSession(B),M(),N.setSession(),j.setSession()}n(I,"endSession");function M(){const N=v.getIsolationScope(),j=v.getCurrentScope(),B=v.getClient(),J=j.getSession()||N.getSession();J&&B&&B.captureSession(J)}n(M,"_sendSessionUpdate");function k(N=!1){if(N){I();return}M()}n(k,"captureSession"),l.addEventProcessor=O,l.captureCheckIn=S,l.captureEvent=t,l.captureException=i,l.captureMessage=e,l.captureSession=k,l.close=C,l.endSession=I,l.flush=_,l.isEnabled=R,l.isInitialized=w,l.lastEventId=y,l.setContext=r,l.setExtra=f,l.setExtras=o,l.setTag=p,l.setTags=h,l.setUser=d,l.startSession=D,l.withMonitor=b},7983636933:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(8438156026);function v(g,s={}){const{message:a,name:i,email:e,url:t,source:r,associatedEventId:o}=g,f=m.getClient(),h={contexts:{feedback:u.dropUndefinedKeys({contact_email:e,name:i,message:a,url:t,source:r,associated_event_id:o})},type:"feedback",level:"info"};return f&&f.emit("beforeSendFeedback",h,s),m.getCurrentScope().captureEvent(h,s)}n(v,"captureFeedback"),l.captureFeedback=v},296812610:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(8438156026),v=c(2332127203);c(2206474662),c(8844511336);const g=c(8645141291),s=c(5475300505),a=c(8167549304),i=c(1150305139),e=c(4530391782),t=c(9064881818);function r(p,d,y,S,b="auto.http.browser"){if(!p.fetchData)return;const _=g.hasTracingEnabled()&&d(p.fetchData.url);if(p.endTimestamp&&_){const N=p.fetchData.__span;if(!N)return;const j=S[N];j&&(h(j,p),delete S[N]);return}const C=m.getCurrentScope(),w=m.getClient(),{method:R,url:O}=p.fetchData,D=f(O),I=D?u.parseUrl(D).host:void 0,M=!!s.getActiveSpan(),k=_&&M?e.startInactiveSpan({name:`${R} ${O}`,attributes:{url:O,type:"fetch","http.method":R,"http.url":D,"server.address":I,[v.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:b,[v.SEMANTIC_ATTRIBUTE_SENTRY_OP]:"http.client"}}):new a.SentryNonRecordingSpan;if(p.fetchData.__span=k.spanContext().spanId,S[k.spanContext().spanId]=k,y(p.fetchData.url)&&w){const N=p.args[0];p.args[1]=p.args[1]||{};const j=p.args[1];j.headers=o(N,w,C,j,g.hasTracingEnabled()&&M?k:void 0)}return k}n(r,"instrumentFetchRequest");function o(p,d,y,S,b){const _=m.getIsolationScope(),{traceId:C,spanId:w,sampled:R,dsc:O}={..._.getPropagationContext(),...y.getPropagationContext()},D=b?s.spanToTraceHeader(b):u.generateSentryTraceHeader(C,w,R),I=u.dynamicSamplingContextToSentryBaggageHeader(O||(b?t.getDynamicSamplingContextFromSpan(b):t.getDynamicSamplingContextFromClient(C,d))),M=S.headers||(typeof Request<"u"&&u.isInstanceOf(p,Request)?p.headers:void 0);if(M)if(typeof Headers<"u"&&u.isInstanceOf(M,Headers)){const k=new Headers(M);return k.append("sentry-trace",D),I&&k.append(u.BAGGAGE_HEADER_NAME,I),k}else if(Array.isArray(M)){const k=[...M,["sentry-trace",D]];return I&&k.push([u.BAGGAGE_HEADER_NAME,I]),k}else{const k="baggage"in M?M.baggage:void 0,N=[];return Array.isArray(k)?N.push(...k):k&&N.push(k),I&&N.push(I),{...M,"sentry-trace":D,baggage:N.length>0?N.join(","):void 0}}else return{"sentry-trace":D,baggage:I}}n(o,"addTracingHeadersToFetchRequest");function f(p){try{return new URL(p).href}catch{return}}n(f,"getFullURL");function h(p,d){if(d.response){i.setHttpStatus(p,d.response.status);const y=d.response&&d.response.headers&&d.response.headers.get("content-length");if(y){const S=parseInt(y);S>0&&p.setAttribute("http.response_content_length",S)}}else d.error&&p.setStatus({code:i.SPAN_STATUS_ERROR,message:"internal_error"});p.end()}n(h,"endSpan"),l.addTracingHeadersToFetchRequest=o,l.instrumentFetchRequest=r},6649284951:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(4433801832),m=c(8438156026),v=c(5015065869);function g(){return{bindClient(i){m.getCurrentScope().setClient(i)},withScope:m.withScope,getClient:()=>m.getClient(),getScope:m.getCurrentScope,getIsolationScope:m.getIsolationScope,captureException:(i,e)=>m.getCurrentScope().captureException(i,e),captureMessage:(i,e,t)=>m.getCurrentScope().captureMessage(i,e,t),captureEvent:v.captureEvent,addBreadcrumb:u.addBreadcrumb,setUser:v.setUser,setTags:v.setTags,setTag:v.setTag,setExtra:v.setExtra,setExtras:v.setExtras,setContext:v.setContext,getIntegration(i){const e=m.getClient();return e&&e.getIntegrationByName(i.id)||null},startSession:v.startSession,endSession:v.endSession,captureSession(i){if(i)return v.endSession();a()}}}n(g,"getCurrentHubShim");const s=g;function a(){const i=m.getCurrentScope(),e=m.getClient(),t=i.getSession();e&&t&&e.captureSession(t)}n(a,"_sendSessionUpdate"),l.getCurrentHub=s,l.getCurrentHubShim=g},8482989710:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(2206474662),m=c(9578383602),v=c(5618891990),g=c(7265722327),s=c(6720678066),a=c(8167549304),i=c(1150305139),e=c(4530391782),t=c(9064881818),r=c(3345259075),o=c(6939919536),f=c(8482601586),h=c(2332127203),p=c(5297268390),d=c(5015065869),y=c(8438156026),S=c(897859094),b=c(2685322190),_=c(5234873710),C=c(7083316483),w=c(2158524366),R=c(5911348835),O=c(9857059330),D=c(4936960144),I=c(1817668688),M=c(9483783910),k=c(306863924),N=c(3178226440),j=c(2843166954),B=c(639277478),J=c(1927145604),Q=c(8969228363),oe=c(9877103701),$=c(7584701501),he=c(8645141291),Ae=c(175966809),Ee=c(5800525242),Oe=c(4718881455),be=c(5475300505),De=c(1119532287),ut=c(3433863337),St=c(4834620523),Rt=c(4433801832),Ze=c(3620727810),mt=c(3514394122),At=c(8947681608),Vt=c(2133507327),dt=c(4474256835),Cn=c(8953708405),gt=c(1072936841),Ut=c(1794376169),en=c(6437106406),sn=c(8435832800),$t=c(3496361636),Rn=c(3005223956),di=c(6342793611),ii=c(6431460707),Kn=c(5988719990),hi=c(1243296801),Ln=c(296812610),Hn=c(2117263085),ui=c(7983636933),jn=c(6649284951);l.registerSpanErrorInstrumentation=u.registerSpanErrorInstrumentation,l.getCapturedScopesOnSpan=m.getCapturedScopesOnSpan,l.setCapturedScopesOnSpan=m.setCapturedScopesOnSpan,l.addTracingExtensions=v.addTracingExtensions,l.TRACING_DEFAULTS=g.TRACING_DEFAULTS,l.startIdleSpan=g.startIdleSpan,l.SentrySpan=s.SentrySpan,l.SentryNonRecordingSpan=a.SentryNonRecordingSpan,l.SPAN_STATUS_ERROR=i.SPAN_STATUS_ERROR,l.SPAN_STATUS_OK=i.SPAN_STATUS_OK,l.SPAN_STATUS_UNSET=i.SPAN_STATUS_UNSET,l.getSpanStatusFromHttpCode=i.getSpanStatusFromHttpCode,l.setHttpStatus=i.setHttpStatus,l.continueTrace=e.continueTrace,l.startInactiveSpan=e.startInactiveSpan,l.startSpan=e.startSpan,l.startSpanManual=e.startSpanManual,l.suppressTracing=e.suppressTracing,l.withActiveSpan=e.withActiveSpan,l.getDynamicSamplingContextFromClient=t.getDynamicSamplingContextFromClient,l.getDynamicSamplingContextFromSpan=t.getDynamicSamplingContextFromSpan,l.setMeasurement=r.setMeasurement,l.timedEventsToMeasurements=r.timedEventsToMeasurements,l.sampleSpan=o.sampleSpan,l.logSpanEnd=f.logSpanEnd,l.logSpanStart=f.logSpanStart,l.SEMANTIC_ATTRIBUTE_CACHE_HIT=h.SEMANTIC_ATTRIBUTE_CACHE_HIT,l.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE=h.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE,l.SEMANTIC_ATTRIBUTE_CACHE_KEY=h.SEMANTIC_ATTRIBUTE_CACHE_KEY,l.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME=h.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME,l.SEMANTIC_ATTRIBUTE_PROFILE_ID=h.SEMANTIC_ATTRIBUTE_PROFILE_ID,l.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON=h.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,l.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT=h.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT,l.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE=h.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE,l.SEMANTIC_ATTRIBUTE_SENTRY_OP=h.SEMANTIC_ATTRIBUTE_SENTRY_OP,l.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=h.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,l.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=h.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,l.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=h.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,l.createEventEnvelope=p.createEventEnvelope,l.createSessionEnvelope=p.createSessionEnvelope,l.createSpanEnvelope=p.createSpanEnvelope,l.addEventProcessor=d.addEventProcessor,l.captureCheckIn=d.captureCheckIn,l.captureEvent=d.captureEvent,l.captureException=d.captureException,l.captureMessage=d.captureMessage,l.captureSession=d.captureSession,l.close=d.close,l.endSession=d.endSession,l.flush=d.flush,l.isEnabled=d.isEnabled,l.isInitialized=d.isInitialized,l.lastEventId=d.lastEventId,l.setContext=d.setContext,l.setExtra=d.setExtra,l.setExtras=d.setExtras,l.setTag=d.setTag,l.setTags=d.setTags,l.setUser=d.setUser,l.startSession=d.startSession,l.withMonitor=d.withMonitor,l.getClient=y.getClient,l.getCurrentScope=y.getCurrentScope,l.getDefaultCurrentScope=y.getDefaultCurrentScope,l.getDefaultIsolationScope=y.getDefaultIsolationScope,l.getGlobalScope=y.getGlobalScope,l.getIsolationScope=y.getIsolationScope,l.withIsolationScope=y.withIsolationScope,l.withScope=y.withScope,l.setAsyncContextStrategy=S.setAsyncContextStrategy,l.getMainCarrier=b.getMainCarrier,l.closeSession=_.closeSession,l.makeSession=_.makeSession,l.updateSession=_.updateSession,l.SessionFlusher=C.SessionFlusher,l.Scope=w.Scope,l.notifyEventProcessors=R.notifyEventProcessors,l.getEnvelopeEndpointWithUrlEncodedAuth=O.getEnvelopeEndpointWithUrlEncodedAuth,l.getReportDialogEndpoint=O.getReportDialogEndpoint,l.BaseClient=D.BaseClient,l.ServerRuntimeClient=I.ServerRuntimeClient,l.initAndBind=M.initAndBind,l.setCurrentClient=M.setCurrentClient,l.createTransport=k.createTransport,l.makeOfflineTransport=N.makeOfflineTransport,l.makeMultiplexedTransport=j.makeMultiplexedTransport,l.SDK_VERSION=B.SDK_VERSION,l.addIntegration=J.addIntegration,l.defineIntegration=J.defineIntegration,l.getIntegrationsToSetup=J.getIntegrationsToSetup,l.applyScopeDataToEvent=Q.applyScopeDataToEvent,l.mergeScopeData=Q.mergeScopeData,l.prepareEvent=oe.prepareEvent,l.createCheckInEnvelope=$.createCheckInEnvelope,l.hasTracingEnabled=he.hasTracingEnabled,l.isSentryRequestUrl=Ae.isSentryRequestUrl,l.handleCallbackErrors=Ee.handleCallbackErrors,l.parameterize=Oe.parameterize,l.addChildSpanToSpan=be.addChildSpanToSpan,l.getActiveSpan=be.getActiveSpan,l.getRootSpan=be.getRootSpan,l.getSpanDescendants=be.getSpanDescendants,l.getStatusMessage=be.getStatusMessage,l.spanIsSampled=be.spanIsSampled,l.spanToBaggageHeader=be.spanToBaggageHeader,l.spanToJSON=be.spanToJSON,l.spanToTraceContext=be.spanToTraceContext,l.spanToTraceHeader=be.spanToTraceHeader,l.parseSampleRate=De.parseSampleRate,l.applySdkMetadata=ut.applySdkMetadata,l.DEFAULT_ENVIRONMENT=St.DEFAULT_ENVIRONMENT,l.addBreadcrumb=Rt.addBreadcrumb,l.functionToStringIntegration=Ze.functionToStringIntegration,l.inboundFiltersIntegration=mt.inboundFiltersIntegration,l.linkedErrorsIntegration=At.linkedErrorsIntegration,l.moduleMetadataIntegration=Vt.moduleMetadataIntegration,l.requestDataIntegration=dt.requestDataIntegration,l.captureConsoleIntegration=Cn.captureConsoleIntegration,l.debugIntegration=gt.debugIntegration,l.dedupeIntegration=Ut.dedupeIntegration,l.extraErrorDataIntegration=en.extraErrorDataIntegration,l.rewriteFramesIntegration=sn.rewriteFramesIntegration,l.sessionTimingIntegration=$t.sessionTimingIntegration,l.zodErrorsIntegration=Rn.zodErrorsIntegration,l.metrics=di.metrics,l.metricsDefault=ii.metricsDefault,l.BrowserMetricsAggregator=Kn.BrowserMetricsAggregator,l.getMetricSummaryJsonForSpan=hi.getMetricSummaryJsonForSpan,l.addTracingHeadersToFetchRequest=Ln.addTracingHeadersToFetchRequest,l.instrumentFetchRequest=Ln.instrumentFetchRequest,l.trpcMiddleware=Hn.trpcMiddleware,l.captureFeedback=ui.captureFeedback,l.getCurrentHub=jn.getCurrentHub,l.getCurrentHubShim=jn.getCurrentHubShim},1927145604:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(8438156026),v=c(8844511336),g=[];function s(h){const p={};return h.forEach(d=>{const{name:y}=d,S=p[y];S&&!S.isDefaultInstance&&d.isDefaultInstance||(p[y]=d)}),Object.keys(p).map(d=>p[d])}n(s,"filterDuplicates");function a(h){const p=h.defaultIntegrations||[],d=h.integrations;p.forEach(_=>{_.isDefaultInstance=!0});let y;Array.isArray(d)?y=[...p,...d]:typeof d=="function"?y=u.arrayify(d(p)):y=p;const S=s(y),b=o(S,_=>_.name==="Debug");if(b!==-1){const[_]=S.splice(b,1);S.push(_)}return S}n(a,"getIntegrationsToSetup");function i(h,p){const d={};return p.forEach(y=>{y&&t(h,y,d)}),d}n(i,"setupIntegrations");function e(h,p){for(const d of p)d&&d.afterAllSetup&&d.afterAllSetup(h)}n(e,"afterSetupIntegrations");function t(h,p,d){if(d[p.name]){v.DEBUG_BUILD&&u.logger.log(`Integration skipped because it was already installed: ${p.name}`);return}if(d[p.name]=p,g.indexOf(p.name)===-1&&typeof p.setupOnce=="function"&&(p.setupOnce(),g.push(p.name)),p.setup&&typeof p.setup=="function"&&p.setup(h),typeof p.preprocessEvent=="function"){const y=p.preprocessEvent.bind(p);h.on("preprocessEvent",(S,b)=>y(S,b,h))}if(typeof p.processEvent=="function"){const y=p.processEvent.bind(p),S=Object.assign((b,_)=>y(b,_,h),{id:p.name});h.addEventProcessor(S)}v.DEBUG_BUILD&&u.logger.log(`Integration installed: ${p.name}`)}n(t,"setupIntegration");function r(h){const p=m.getClient();if(!p){v.DEBUG_BUILD&&u.logger.warn(`Cannot add integration "${h.name}" because no SDK Client is available.`);return}p.addIntegration(h)}n(r,"addIntegration");function o(h,p){for(let d=0;d<h.length;d++)if(p(h[d])===!0)return d;return-1}n(o,"findIndex");function f(h){return h}n(f,"defineIntegration"),l.addIntegration=r,l.afterSetupIntegrations=e,l.defineIntegration=f,l.getIntegrationsToSetup=a,l.installedIntegrations=g,l.setupIntegration=t,l.setupIntegrations=i},8953708405:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(8438156026),v=c(5015065869),g=c(1927145604),s="CaptureConsole",a=n((t={})=>{const r=t.levels||u.CONSOLE_LEVELS;return{name:s,setup(o){"console"in u.GLOBAL_OBJ&&u.addConsoleInstrumentationHandler(({args:f,level:h})=>{m.getClient()!==o||!r.includes(h)||e(f,h)})}}},"_captureConsoleIntegration"),i=g.defineIntegration(a);function e(t,r){const o={level:u.severityLevelFromString(r),extra:{arguments:t}};m.withScope(f=>{if(f.addEventProcessor(d=>(d.logger="console",u.addExceptionMechanism(d,{handled:!1,type:"console"}),d)),r==="assert"){if(!t[0]){const d=`Assertion failed: ${u.safeJoin(t.slice(1)," ")||"console.assert"}`;f.setExtra("arguments",t.slice(1)),v.captureMessage(d,o)}return}const h=t.find(d=>d instanceof Error);if(h){v.captureException(h,o);return}const p=u.safeJoin(t," ");v.captureMessage(p,o)})}n(e,"consoleHandler"),l.captureConsoleIntegration=i},1072936841:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(1927145604),v="Debug",g=n((a={})=>{const i={debugger:!1,stringify:!1,...a};return{name:v,setup(e){e.on("beforeSendEvent",(t,r)=>{if(i.debugger)debugger;u.consoleSandbox(()=>{i.stringify?(console.log(JSON.stringify(t,null,2)),r&&Object.keys(r).length&&console.log(JSON.stringify(r,null,2))):(console.log(t),r&&Object.keys(r).length&&console.log(r))})})}}},"_debugIntegration"),s=m.defineIntegration(g);l.debugIntegration=s},1794376169:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(1927145604),v=c(8844511336),g="Dedupe",s=n(()=>{let p;return{name:g,processEvent(d){if(d.type)return d;try{if(i(d,p))return v.DEBUG_BUILD&&u.logger.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return p=d}}},"_dedupeIntegration"),a=m.defineIntegration(s);function i(p,d){return d?!!(e(p,d)||t(p,d)):!1}n(i,"_shouldDropEvent");function e(p,d){const y=p.message,S=d.message;return!(!y&&!S||y&&!S||!y&&S||y!==S||!o(p,d)||!r(p,d))}n(e,"_isSameMessageEvent");function t(p,d){const y=f(d),S=f(p);return!(!y||!S||y.type!==S.type||y.value!==S.value||!o(p,d)||!r(p,d))}n(t,"_isSameExceptionEvent");function r(p,d){let y=h(p),S=h(d);if(!y&&!S)return!0;if(y&&!S||!y&&S||(y=y,S=S,S.length!==y.length))return!1;for(let b=0;b<S.length;b++){const _=S[b],C=y[b];if(_.filename!==C.filename||_.lineno!==C.lineno||_.colno!==C.colno||_.function!==C.function)return!1}return!0}n(r,"_isSameStacktrace");function o(p,d){let y=p.fingerprint,S=d.fingerprint;if(!y&&!S)return!0;if(y&&!S||!y&&S)return!1;y=y,S=S;try{return y.join("")===S.join("")}catch{return!1}}n(o,"_isSameFingerprint");function f(p){return p.exception&&p.exception.values&&p.exception.values[0]}n(f,"_getExceptionFromEvent");function h(p){const d=p.exception;if(d)try{return d.values[0].stacktrace.frames}catch{return}}n(h,"_getFramesFromEvent"),l._shouldDropEvent=i,l.dedupeIntegration=a},6437106406:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(1927145604),v=c(8844511336),g="ExtraErrorData",s=n((t={})=>{const{depth:r=3,captureErrorCause:o=!0}=t;return{name:g,processEvent(f,h){return i(f,h,r,o)}}},"_extraErrorDataIntegration"),a=m.defineIntegration(s);function i(t,r={},o,f){if(!r.originalException||!u.isError(r.originalException))return t;const h=r.originalException.name||r.originalException.constructor.name,p=e(r.originalException,f);if(p){const d={...t.contexts},y=u.normalize(p,o);return u.isPlainObject(y)&&(u.addNonEnumerableProperty(y,"__sentry_skip_normalization__",!0),d[h]=y),{...t,contexts:d}}return t}n(i,"_enhanceEventWithErrorData");function e(t,r){try{const o=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],f={};for(const h of Object.keys(t)){if(o.indexOf(h)!==-1)continue;const p=t[h];f[h]=u.isError(p)?p.toString():p}if(r&&t.cause!==void 0&&(f.cause=u.isError(t.cause)?t.cause.toString():t.cause),typeof t.toJSON=="function"){const h=t.toJSON();for(const p of Object.keys(h)){const d=h[p];f[p]=u.isError(d)?d.toString():d}}return f}catch(o){v.DEBUG_BUILD&&u.logger.error("Unable to extract extra data from the Error object:",o)}return null}n(e,"_extractErrorData"),l.extraErrorDataIntegration=a},3620727810:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(8438156026),v=c(1927145604);let g;const s="FunctionToString",a=new WeakMap,i=n(()=>({name:s,setupOnce(){g=Function.prototype.toString;try{Function.prototype.toString=function(...t){const r=u.getOriginalFunction(this),o=a.has(m.getClient())&&r!==void 0?r:this;return g.apply(o,t)}}catch{}},setup(t){a.set(t,!0)}}),"_functionToStringIntegration"),e=v.defineIntegration(i);l.functionToStringIntegration=e},3514394122:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(8844511336),v=c(1927145604),g=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],s="InboundFilters",a=n((b={})=>({name:s,processEvent(_,C,w){const R=w.getOptions(),O=e(b,R);return t(_,O)?null:_}}),"_inboundFiltersIntegration"),i=v.defineIntegration(a);function e(b={},_={}){return{allowUrls:[...b.allowUrls||[],..._.allowUrls||[]],denyUrls:[...b.denyUrls||[],..._.denyUrls||[]],ignoreErrors:[...b.ignoreErrors||[],..._.ignoreErrors||[],...b.disableErrorDefaults?[]:g],ignoreTransactions:[...b.ignoreTransactions||[],..._.ignoreTransactions||[]],ignoreInternal:b.ignoreInternal!==void 0?b.ignoreInternal:!0}}n(e,"_mergeOptions");function t(b,_){return _.ignoreInternal&&d(b)?(m.DEBUG_BUILD&&u.logger.warn(`Event dropped due to being internal Sentry Error.
Event: ${u.getEventDescription(b)}`),!0):r(b,_.ignoreErrors)?(m.DEBUG_BUILD&&u.logger.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${u.getEventDescription(b)}`),!0):o(b,_.ignoreTransactions)?(m.DEBUG_BUILD&&u.logger.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${u.getEventDescription(b)}`),!0):f(b,_.denyUrls)?(m.DEBUG_BUILD&&u.logger.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${u.getEventDescription(b)}.
Url: ${S(b)}`),!0):h(b,_.allowUrls)?!1:(m.DEBUG_BUILD&&u.logger.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${u.getEventDescription(b)}.
Url: ${S(b)}`),!0)}n(t,"_shouldDropEvent");function r(b,_){return b.type||!_||!_.length?!1:p(b).some(C=>u.stringMatchesSomePattern(C,_))}n(r,"_isIgnoredError");function o(b,_){if(b.type!=="transaction"||!_||!_.length)return!1;const C=b.transaction;return C?u.stringMatchesSomePattern(C,_):!1}n(o,"_isIgnoredTransaction");function f(b,_){if(!_||!_.length)return!1;const C=S(b);return C?u.stringMatchesSomePattern(C,_):!1}n(f,"_isDeniedUrl");function h(b,_){if(!_||!_.length)return!0;const C=S(b);return C?u.stringMatchesSomePattern(C,_):!0}n(h,"_isAllowedUrl");function p(b){const _=[];b.message&&_.push(b.message);let C;try{C=b.exception.values[b.exception.values.length-1]}catch{}return C&&C.value&&(_.push(C.value),C.type&&_.push(`${C.type}: ${C.value}`)),_}n(p,"_getPossibleEventMessages");function d(b){try{return b.exception.values[0].type==="SentryError"}catch{}return!1}n(d,"_isSentryError");function y(b=[]){for(let _=b.length-1;_>=0;_--){const C=b[_];if(C&&C.filename!=="<anonymous>"&&C.filename!=="[native code]")return C.filename||null}return null}n(y,"_getLastValidUrl");function S(b){try{let _;try{_=b.exception.values[0].stacktrace.frames}catch{}return _?y(_):null}catch{return m.DEBUG_BUILD&&u.logger.error(`Cannot extract url for event ${u.getEventDescription(b)}`),null}}n(S,"_getEventFilterUrl"),l.inboundFiltersIntegration=i},8947681608:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(1927145604),v="cause",g=5,s="LinkedErrors",a=n((e={})=>{const t=e.limit||g,r=e.key||v;return{name:s,preprocessEvent(o,f,h){const p=h.getOptions();u.applyAggregateErrorsToEvent(u.exceptionFromError,p.stackParser,p.maxValueLength,r,t,o,f)}}},"_linkedErrorsIntegration"),i=m.defineIntegration(a);l.linkedErrorsIntegration=i},2133507327:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(1927145604),v=c(2247716195),g="ModuleMetadata",s=n(()=>({name:g,setup(i){i.on("beforeEnvelope",e=>{u.forEachEnvelopeItem(e,(t,r)=>{if(r==="event"){const o=Array.isArray(t)?t[1]:void 0;o&&(v.stripMetadataFromStackFrames(o),t[1]=o)}})})},processEvent(i,e,t){const r=t.getOptions().stackParser;return v.addMetadataToStackFrames(r,i),i}}),"_moduleMetadataIntegration"),a=m.defineIntegration(s);l.moduleMetadataIntegration=a},4474256835:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(1927145604),v={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"},g="RequestData",s=n((e={})=>{const t={...v,...e,include:{...v.include,...e.include,user:e.include&&typeof e.include.user=="boolean"?e.include.user:{...v.include.user,...(e.include||{}).user}}};return{name:g,processEvent(r){const{sdkProcessingMetadata:o={}}=r,f=o.request;if(!f)return r;const h=i(t);return u.addRequestDataToEvent(r,f,h)}}},"_requestDataIntegration"),a=m.defineIntegration(s);function i(e){const{transactionNamingScheme:t,include:{ip:r,user:o,...f}}=e,h=["method"];for(const[d,y]of Object.entries(f))y&&h.push(d);let p;if(o===void 0)p=!0;else if(typeof o=="boolean")p=o;else{const d=[];for(const[y,S]of Object.entries(o))S&&d.push(y);p=d}return{include:{ip:r,user:p,request:h.length!==0?h:void 0,transaction:t}}}n(i,"convertReqDataIntegrationOptsToAddReqDataOpts"),l.requestDataIntegration=a},8435832800:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(1927145604),v="RewriteFrames",g=m.defineIntegration((a={})=>{const i=a.root,e=a.prefix||"app:///",t="window"in u.GLOBAL_OBJ&&u.GLOBAL_OBJ.window!==void 0,r=a.iteratee||s({isBrowser:t,root:i,prefix:e});function o(h){try{return{...h,exception:{...h.exception,values:h.exception.values.map(p=>({...p,...p.stacktrace&&{stacktrace:f(p.stacktrace)}}))}}}catch{return h}}n(o,"_processExceptionsEvent");function f(h){return{...h,frames:h&&h.frames&&h.frames.map(p=>r(p))}}return n(f,"_processStacktrace"),{name:v,processEvent(h){let p=h;return h.exception&&Array.isArray(h.exception.values)&&(p=o(p)),p}}});function s({isBrowser:a,root:i,prefix:e}){return t=>{if(!t.filename)return t;const r=/^[a-zA-Z]:\\/.test(t.filename)||t.filename.includes("\\")&&!t.filename.includes("/"),o=/^\//.test(t.filename);if(a){if(i){const f=t.filename;f.indexOf(i)===0&&(t.filename=f.replace(i,e))}}else if(r||o){const f=r?t.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):t.filename,h=i?u.relative(i,f):u.basename(f);t.filename=`${e}${h}`}return t}}n(s,"generateIteratee"),l.generateIteratee=s,l.rewriteFramesIntegration=g},3496361636:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(1927145604),v="SessionTiming",g=n(()=>{const a=u.timestampInSeconds()*1e3;return{name:v,processEvent(i){const e=u.timestampInSeconds()*1e3;return{...i,extra:{...i.extra,["session:start"]:a,["session:duration"]:e-a,["session:end"]:e}}}}},"_sessionTimingIntegration"),s=m.defineIntegration(g);l.sessionTimingIntegration=s},3005223956:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(1927145604),v=10,g="ZodErrors";function s(o){return u.isError(o)&&o.name==="ZodError"&&Array.isArray(o.errors)}n(s,"originalExceptionIsZodError");function a(o){return{...o,path:"path"in o&&Array.isArray(o.path)?o.path.join("."):void 0,keys:"keys"in o?JSON.stringify(o.keys):void 0,unionErrors:"unionErrors"in o?JSON.stringify(o.unionErrors):void 0}}n(a,"formatIssueTitle");function i(o){const f=new Set;for(const p of o.issues)p.path&&f.add(p.path[0]);const h=Array.from(f);return`Failed to validate keys: ${u.truncate(h.join(", "),100)}`}n(i,"formatIssueMessage");function e(o,f,h){return!f.exception||!f.exception.values||!h||!h.originalException||!s(h.originalException)||h.originalException.issues.length===0?f:{...f,exception:{...f.exception,values:[{...f.exception.values[0],value:i(h.originalException)},...f.exception.values.slice(1)]},extra:{...f.extra,"zoderror.issues":h.originalException.errors.slice(0,o).map(a)}}}n(e,"applyZodErrorsToEvent");const t=n((o={})=>{const f=o.limit||v;return{name:g,processEvent(h,p){return e(f,h,p)}}},"_zodErrorsIntegration"),r=m.defineIntegration(t);l.applyZodErrorsToEvent=e,l.zodErrorsIntegration=r},2247716195:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=new Map,v=new Set;function g(e){if(u.GLOBAL_OBJ._sentryModuleMetadata)for(const t of Object.keys(u.GLOBAL_OBJ._sentryModuleMetadata)){const r=u.GLOBAL_OBJ._sentryModuleMetadata[t];if(v.has(t))continue;v.add(t);const o=e(t);for(const f of o.reverse())if(f.filename){m.set(f.filename,r);break}}}n(g,"ensureMetadataStacksAreParsed");function s(e,t){return g(e),m.get(t)}n(s,"getMetadataForUrl");function a(e,t){try{t.exception.values.forEach(r=>{if(r.stacktrace)for(const o of r.stacktrace.frames||[]){if(!o.filename)continue;const f=s(e,o.filename);f&&(o.module_metadata=f)}})}catch{}}n(a,"addMetadataToStackFrames");function i(e){try{e.exception.values.forEach(t=>{if(t.stacktrace)for(const r of t.stacktrace.frames||[])delete r.module_metadata})}catch{}}n(i,"stripMetadataFromStackFrames"),l.addMetadataToStackFrames=a,l.getMetadataForUrl=s,l.stripMetadataFromStackFrames=i},7604170301:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(5475300505),v=c(9622876717),g=c(5663957480),s=c(8672240743),a=c(5227316865);class i{constructor(t){this._client=t,this._buckets=new Map,this._bucketsTotalWeight=0,this._interval=setInterval(()=>this._flush(),v.DEFAULT_FLUSH_INTERVAL),this._interval.unref&&this._interval.unref(),this._flushShift=Math.floor(Math.random()*v.DEFAULT_FLUSH_INTERVAL/1e3),this._forceFlush=!1}add(t,r,o,f="none",h={},p=u.timestampInSeconds()){const d=Math.floor(p),y=a.sanitizeMetricKey(r),S=a.sanitizeTags(h),b=a.sanitizeUnit(f),_=a.getBucketKey(t,y,b,S);let C=this._buckets.get(_);const w=C&&t===v.SET_METRIC_TYPE?C.metric.weight:0;C?(C.metric.add(o),C.timestamp<d&&(C.timestamp=d)):(C={metric:new s.METRIC_MAP[t](o),timestamp:d,metricType:t,name:y,unit:b,tags:S},this._buckets.set(_,C));const R=typeof o=="string"?C.metric.weight-w:o;m.updateMetricSummaryOnActiveSpan(t,y,R,b,h,_),this._bucketsTotalWeight+=C.metric.weight,this._bucketsTotalWeight>=v.MAX_WEIGHT&&this.flush()}flush(){this._forceFlush=!0,this._flush()}close(){this._forceFlush=!0,clearInterval(this._interval),this._flush()}_flush(){if(this._forceFlush){this._forceFlush=!1,this._bucketsTotalWeight=0,this._captureMetrics(this._buckets),this._buckets.clear();return}const t=Math.floor(u.timestampInSeconds())-v.DEFAULT_FLUSH_INTERVAL/1e3-this._flushShift,r=new Map;for(const[o,f]of this._buckets)f.timestamp<=t&&(r.set(o,f),this._bucketsTotalWeight-=f.metric.weight);for(const[o]of r)this._buckets.delete(o);this._captureMetrics(r)}_captureMetrics(t){if(t.size>0){const r=Array.from(t).map(([,o])=>o);g.captureAggregateMetrics(this._client,r)}}}n(i,"MetricsAggregator"),l.MetricsAggregator=i},5988719990:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(5475300505),v=c(9622876717),g=c(5663957480),s=c(8672240743),a=c(5227316865);class i{constructor(t){this._client=t,this._buckets=new Map,this._interval=setInterval(()=>this.flush(),v.DEFAULT_BROWSER_FLUSH_INTERVAL)}add(t,r,o,f="none",h={},p=u.timestampInSeconds()){const d=Math.floor(p),y=a.sanitizeMetricKey(r),S=a.sanitizeTags(h),b=a.sanitizeUnit(f),_=a.getBucketKey(t,y,b,S);let C=this._buckets.get(_);const w=C&&t===v.SET_METRIC_TYPE?C.metric.weight:0;C?(C.metric.add(o),C.timestamp<d&&(C.timestamp=d)):(C={metric:new s.METRIC_MAP[t](o),timestamp:d,metricType:t,name:y,unit:b,tags:S},this._buckets.set(_,C));const R=typeof o=="string"?C.metric.weight-w:o;m.updateMetricSummaryOnActiveSpan(t,y,R,b,h,_)}flush(){if(this._buckets.size===0)return;const t=Array.from(this._buckets.values());g.captureAggregateMetrics(this._client,t),this._buckets.clear()}close(){clearInterval(this._interval),this.flush()}}n(i,"BrowserMetricsAggregator"),l.BrowserMetricsAggregator=i},9622876717:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const c="c",u="g",m="s",v="d",g=5e3,s=1e4,a=1e4;l.COUNTER_METRIC_TYPE=c,l.DEFAULT_BROWSER_FLUSH_INTERVAL=g,l.DEFAULT_FLUSH_INTERVAL=s,l.DISTRIBUTION_METRIC_TYPE=v,l.GAUGE_METRIC_TYPE=u,l.MAX_WEIGHT=a,l.SET_METRIC_TYPE=m},5663957480:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(5227316865);function v(a,i){u.logger.log(`Flushing aggregated metrics, number of metrics: ${i.length}`);const e=a.getDsn(),t=a.getSdkMetadata(),r=a.getOptions().tunnel,o=g(i,e,t,r);a.sendEnvelope(o)}n(v,"captureAggregateMetrics");function g(a,i,e,t){const r={sent_at:new Date().toISOString()};e&&e.sdk&&(r.sdk={name:e.sdk.name,version:e.sdk.version}),t&&i&&(r.dsn=u.dsnToString(i));const o=s(a);return u.createEnvelope(r,[o])}n(g,"createMetricEnvelope");function s(a){const i=m.serializeMetricBuckets(a);return[{type:"statsd",length:i.length},i]}n(s,"createMetricEnvelopeItem"),l.captureAggregateMetrics=v,l.createMetricEnvelope=g},6431460707:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7604170301),m=c(6342793611);function v(t,r=1,o){m.metrics.increment(u.MetricsAggregator,t,r,o)}n(v,"increment");function g(t,r,o){m.metrics.distribution(u.MetricsAggregator,t,r,o)}n(g,"distribution");function s(t,r,o){m.metrics.set(u.MetricsAggregator,t,r,o)}n(s,"set");function a(t,r,o){m.metrics.gauge(u.MetricsAggregator,t,r,o)}n(a,"gauge");function i(t){return m.metrics.getMetricsAggregatorForClient(t,u.MetricsAggregator)}n(i,"getMetricsAggregatorForClient");const e={increment:v,distribution:g,set:s,gauge:a,getMetricsAggregatorForClient:i};l.metricsDefault=e},6342793611:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(8438156026),v=c(8844511336),g=c(5475300505),s=c(9622876717);function a(h,p){const d=u.getGlobalSingleton("globalMetricsAggregators",()=>new WeakMap),y=d.get(h);if(y)return y;const S=new p(h);return h.on("flush",()=>S.flush()),h.on("close",()=>S.close()),d.set(h,S),S}n(a,"getMetricsAggregatorForClient");function i(h,p,d,y,S={}){const b=S.client||m.getClient();if(!b)return;const _=g.getActiveSpan(),C=_?g.getRootSpan(_):void 0,{unit:w,tags:R,timestamp:O}=S,{release:D,environment:I}=b.getOptions(),M={};D&&(M.release=D),I&&(M.environment=I),C&&(M.transaction=g.spanToJSON(C).description||""),v.DEBUG_BUILD&&u.logger.log(`Adding value of ${y} to ${p} metric ${d}`),a(b,h).add(p,d,y,w,{...M,...R},O)}n(i,"addToMetricsAggregator");function e(h,p,d=1,y){i(h,s.COUNTER_METRIC_TYPE,p,d,y)}n(e,"increment");function t(h,p,d,y){i(h,s.DISTRIBUTION_METRIC_TYPE,p,d,y)}n(t,"distribution");function r(h,p,d,y){i(h,s.SET_METRIC_TYPE,p,d,y)}n(r,"set");function o(h,p,d,y){i(h,s.GAUGE_METRIC_TYPE,p,d,y)}n(o,"gauge");const f={increment:e,distribution:t,set:r,gauge:o,getMetricsAggregatorForClient:a};l.metrics=f},8672240743:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(9622876717),m=c(5227316865);class v{constructor(t){this._value=t}get weight(){return 1}add(t){this._value+=t}toString(){return`${this._value}`}}n(v,"CounterMetric");class g{constructor(t){this._last=t,this._min=t,this._max=t,this._sum=t,this._count=1}get weight(){return 5}add(t){this._last=t,t<this._min&&(this._min=t),t>this._max&&(this._max=t),this._sum+=t,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}}n(g,"GaugeMetric");class s{constructor(t){this._value=[t]}get weight(){return this._value.length}add(t){this._value.push(t)}toString(){return this._value.join(":")}}n(s,"DistributionMetric");class a{constructor(t){this.first=t,this._value=new Set([t])}get weight(){return this._value.size}add(t){this._value.add(t)}toString(){return Array.from(this._value).map(t=>typeof t=="string"?m.simpleHash(t):t).join(":")}}n(a,"SetMetric");const i={[u.COUNTER_METRIC_TYPE]:v,[u.GAUGE_METRIC_TYPE]:g,[u.DISTRIBUTION_METRIC_TYPE]:s,[u.SET_METRIC_TYPE]:a};l.CounterMetric=v,l.DistributionMetric=s,l.GaugeMetric=g,l.METRIC_MAP=i,l.SetMetric=a},1243296801:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614);let m;function v(a){return m?m.get(a):void 0}n(v,"getMetricStorageForSpan");function g(a){const i=v(a);if(!i)return;const e={};for(const[,[t,r]]of i)e[t]||(e[t]=[]),e[t].push(u.dropUndefinedKeys(r));return e}n(g,"getMetricSummaryJsonForSpan");function s(a,i,e,t,r,o,f){const h=v(a)||new Map,p=`${i}:${e}@${r}`,d=h.get(f);if(d){const[,y]=d;h.set(f,[p,{min:Math.min(y.min,t),max:Math.max(y.max,t),count:y.count+=1,sum:y.sum+=t,tags:y.tags}])}else h.set(f,[p,{min:t,max:t,count:1,sum:t,tags:o}]);m||(m=new WeakMap),m.set(a,h)}n(s,"updateMetricSummaryOnSpan"),l.getMetricSummaryJsonForSpan=g,l.updateMetricSummaryOnSpan=s},5227316865:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614);function m(f,h,p,d){const y=Object.entries(u.dropUndefinedKeys(d)).sort((S,b)=>S[0].localeCompare(b[0]));return`${f}${h}${p}${y}`}n(m,"getBucketKey");function v(f){let h=0;for(let p=0;p<f.length;p++){const d=f.charCodeAt(p);h=(h<<5)-h+d,h&=h}return h>>>0}n(v,"simpleHash");function g(f){let h="";for(const p of f){const d=Object.entries(p.tags),y=d.length>0?`|#${d.map(([S,b])=>`${S}:${b}`).join(",")}`:"";h+=`${p.name}@${p.unit}:${p.metric}|${p.metricType}${y}|T${p.timestamp}
`}return h}n(g,"serializeMetricBuckets");function s(f){return f.replace(/[^\w]+/gi,"_")}n(s,"sanitizeUnit");function a(f){return f.replace(/[^\w\-.]+/gi,"_")}n(a,"sanitizeMetricKey");function i(f){return f.replace(/[^\w\-./]+/gi,"")}n(i,"sanitizeTagKey");const e=[[`
`,"\\n"],["\r","\\r"],["	","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function t(f){for(const[h,p]of e)if(f===h)return p;return f}n(t,"getCharOrReplacement");function r(f){return[...f].reduce((h,p)=>h+t(p),"")}n(r,"sanitizeTagValue");function o(f){const h={};for(const p in f)if(Object.prototype.hasOwnProperty.call(f,p)){const d=i(p);h[d]=r(String(f[p]))}return h}n(o,"sanitizeTags"),l.getBucketKey=m,l.sanitizeMetricKey=a,l.sanitizeTags=o,l.sanitizeUnit=s,l.serializeMetricBuckets=g,l.simpleHash=v},2158524366:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(5234873710),v=c(9972015035),g=100;class s{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=i()}clone(){const t=new s;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,v._setSpanForScope(t,v._getSpanForScope(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&m.updateSession(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,r){return this._tags={...this._tags,[t]:r},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,r){return this._extra={...this._extra,[t]:r},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,r){return r===null?delete this._contexts[t]:this._contexts[t]=r,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const r=typeof t=="function"?t(this):t,[o,f]=r instanceof a?[r.getScopeData(),r.getRequestSession()]:u.isPlainObject(r)?[t,t.requestSession]:[],{tags:h,extra:p,user:d,contexts:y,level:S,fingerprint:b=[],propagationContext:_}=o||{};return this._tags={...this._tags,...h},this._extra={...this._extra,...p},this._contexts={...this._contexts,...y},d&&Object.keys(d).length&&(this._user=d),S&&(this._level=S),b.length&&(this._fingerprint=b),_&&(this._propagationContext=_),f&&(this._requestSession=f),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,v._setSpanForScope(this,void 0),this._attachments=[],this._propagationContext=i(),this._notifyScopeListeners(),this}addBreadcrumb(t,r){const o=typeof r=="number"?r:g;if(o<=0)return this;const f={timestamp:u.dateTimestampInSeconds(),...t},h=this._breadcrumbs;return h.push(f),this._breadcrumbs=h.length>o?h.slice(-o):h,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:v._getSpanForScope(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,r){const o=r&&r.event_id?r.event_id:u.uuid4();if(!this._client)return u.logger.warn("No client configured on scope - will not capture exception!"),o;const f=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:f,...r,event_id:o},this),o}captureMessage(t,r,o){const f=o&&o.event_id?o.event_id:u.uuid4();if(!this._client)return u.logger.warn("No client configured on scope - will not capture message!"),f;const h=new Error(t);return this._client.captureMessage(t,r,{originalException:t,syntheticException:h,...o,event_id:f},this),f}captureEvent(t,r){const o=r&&r.event_id?r.event_id:u.uuid4();return this._client?(this._client.captureEvent(t,{...r,event_id:o},this),o):(u.logger.warn("No client configured on scope - will not capture event!"),o)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}n(s,"ScopeClass");const a=s;function i(){return{traceId:u.uuid4(),spanId:u.uuid4().substring(16)}}n(i,"generatePropagationContext"),l.Scope=a},9483783910:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(8438156026),v=c(2685322190),g=c(8844511336);function s(e,t){t.debug===!0&&(g.DEBUG_BUILD?u.logger.enable():u.consoleSandbox(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),m.getCurrentScope().update(t.initialScope);const o=new e(t);a(o),o.init()}n(s,"initAndBind");function a(e){m.getCurrentScope().setClient(e),i(e)}n(a,"setCurrentClient");function i(e){const t=v.getSentryCarrier(v.getMainCarrier());t.hub&&typeof t.hub.getStackTop=="function"&&(t.hub.getStackTop().client=e)}n(i,"registerClientOnGlobalHub"),l.initAndBind=s,l.setCurrentClient=a},2332127203:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const c="sentry.source",u="sentry.sample_rate",m="sentry.op",v="sentry.origin",g="sentry.idle_span_finish_reason",s="sentry.measurement_unit",a="sentry.measurement_value",i="sentry.profile_id",e="sentry.exclusive_time",t="cache.hit",r="cache.key",o="cache.item_size";l.SEMANTIC_ATTRIBUTE_CACHE_HIT=t,l.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE=o,l.SEMANTIC_ATTRIBUTE_CACHE_KEY=r,l.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME=e,l.SEMANTIC_ATTRIBUTE_PROFILE_ID=i,l.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON=g,l.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT=s,l.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE=a,l.SEMANTIC_ATTRIBUTE_SENTRY_OP=m,l.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=v,l.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=u,l.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=c},1817668688:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(4936960144),v=c(7584701501),g=c(8438156026),s=c(8844511336),a=c(7083316483),i=c(2206474662),e=c(9972015035),t=c(5475300505),r=c(9064881818);class o extends m.BaseClient{constructor(h){i.registerSpanErrorInstrumentation(),super(h)}eventFromException(h,p){return u.resolvedSyncPromise(u.eventFromUnknownInput(this,this._options.stackParser,h,p))}eventFromMessage(h,p="info",d){return u.resolvedSyncPromise(u.eventFromMessage(this._options.stackParser,h,p,d,this._options.attachStacktrace))}captureException(h,p,d){if(this._options.autoSessionTracking&&this._sessionFlusher){const y=g.getIsolationScope().getRequestSession();y&&y.status==="ok"&&(y.status="errored")}return super.captureException(h,p,d)}captureEvent(h,p,d){if(this._options.autoSessionTracking&&this._sessionFlusher&&(h.type||"exception")==="exception"&&h.exception&&h.exception.values&&h.exception.values.length>0){const b=g.getIsolationScope().getRequestSession();b&&b.status==="ok"&&(b.status="errored")}return super.captureEvent(h,p,d)}close(h){return this._sessionFlusher&&this._sessionFlusher.close(),super.close(h)}initSessionFlusher(){const{release:h,environment:p}=this._options;h?this._sessionFlusher=new a.SessionFlusher(this,{release:h,environment:p}):s.DEBUG_BUILD&&u.logger.warn("Cannot initialise an instance of SessionFlusher if no release is provided!")}captureCheckIn(h,p,d){const y="checkInId"in h&&h.checkInId?h.checkInId:u.uuid4();if(!this._isEnabled())return s.DEBUG_BUILD&&u.logger.warn("SDK not enabled, will not capture checkin."),y;const S=this.getOptions(),{release:b,environment:_,tunnel:C}=S,w={check_in_id:y,monitor_slug:h.monitorSlug,status:h.status,release:b,environment:_};"duration"in h&&(w.duration=h.duration),p&&(w.monitor_config={schedule:p.schedule,checkin_margin:p.checkinMargin,max_runtime:p.maxRuntime,timezone:p.timezone});const[R,O]=this._getTraceInfoFromScope(d);O&&(w.contexts={trace:O});const D=v.createCheckInEnvelope(w,R,this.getSdkMetadata(),C,this.getDsn());return s.DEBUG_BUILD&&u.logger.info("Sending checkin:",h.monitorSlug,h.status),this.sendEnvelope(D),y}_captureRequestSession(){this._sessionFlusher?this._sessionFlusher.incrementSessionStatusCount():s.DEBUG_BUILD&&u.logger.warn("Discarded request mode session because autoSessionTracking option was disabled")}_prepareEvent(h,p,d,y){return this._options.platform&&(h.platform=h.platform||this._options.platform),this._options.runtime&&(h.contexts={...h.contexts,runtime:(h.contexts||{}).runtime||this._options.runtime}),this._options.serverName&&(h.server_name=h.server_name||this._options.serverName),super._prepareEvent(h,p,d,y)}_getTraceInfoFromScope(h){if(!h)return[void 0,void 0];const p=e._getSpanForScope(h);if(p){const C=t.getRootSpan(p);return[r.getDynamicSamplingContextFromSpan(C),t.spanToTraceContext(C)]}const{traceId:d,spanId:y,parentSpanId:S,dsc:b}=h.getPropagationContext(),_={trace_id:d,span_id:y,parent_span_id:S};return b?[b,_]:[r.getDynamicSamplingContextFromClient(d,this),_]}}n(o,"ServerRuntimeClient"),l.ServerRuntimeClient=o},5234873710:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614);function m(a){const i=u.timestampInSeconds(),e={sid:u.uuid4(),init:!0,timestamp:i,started:i,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>s(e)};return a&&v(e,a),e}n(m,"makeSession");function v(a,i={}){if(i.user&&(!a.ipAddress&&i.user.ip_address&&(a.ipAddress=i.user.ip_address),!a.did&&!i.did&&(a.did=i.user.id||i.user.email||i.user.username)),a.timestamp=i.timestamp||u.timestampInSeconds(),i.abnormal_mechanism&&(a.abnormal_mechanism=i.abnormal_mechanism),i.ignoreDuration&&(a.ignoreDuration=i.ignoreDuration),i.sid&&(a.sid=i.sid.length===32?i.sid:u.uuid4()),i.init!==void 0&&(a.init=i.init),!a.did&&i.did&&(a.did=`${i.did}`),typeof i.started=="number"&&(a.started=i.started),a.ignoreDuration)a.duration=void 0;else if(typeof i.duration=="number")a.duration=i.duration;else{const e=a.timestamp-a.started;a.duration=e>=0?e:0}i.release&&(a.release=i.release),i.environment&&(a.environment=i.environment),!a.ipAddress&&i.ipAddress&&(a.ipAddress=i.ipAddress),!a.userAgent&&i.userAgent&&(a.userAgent=i.userAgent),typeof i.errors=="number"&&(a.errors=i.errors),i.status&&(a.status=i.status)}n(v,"updateSession");function g(a,i){let e={};i?e={status:i}:a.status==="ok"&&(e={status:"exited"}),v(a,e)}n(g,"closeSession");function s(a){return u.dropUndefinedKeys({sid:`${a.sid}`,init:a.init,started:new Date(a.started*1e3).toISOString(),timestamp:new Date(a.timestamp*1e3).toISOString(),status:a.status,errors:a.errors,did:typeof a.did=="number"||typeof a.did=="string"?`${a.did}`:void 0,duration:a.duration,abnormal_mechanism:a.abnormal_mechanism,attrs:{release:a.release,environment:a.environment,ip_address:a.ipAddress,user_agent:a.userAgent}})}n(s,"sessionToJSON"),l.closeSession=g,l.makeSession=m,l.updateSession=v},7083316483:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(8438156026);class v{constructor(s,a){this._client=s,this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._intervalId=setInterval(()=>this.flush(),this.flushTimeout*1e3),this._intervalId.unref&&this._intervalId.unref(),this._sessionAttrs=a}flush(){const s=this.getSessionAggregates();s.aggregates.length!==0&&(this._pendingAggregates={},this._client.sendSession(s))}getSessionAggregates(){const s=Object.keys(this._pendingAggregates).map(i=>this._pendingAggregates[parseInt(i)]),a={attrs:this._sessionAttrs,aggregates:s};return u.dropUndefinedKeys(a)}close(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()}incrementSessionStatusCount(){if(!this._isEnabled)return;const s=m.getIsolationScope(),a=s.getRequestSession();a&&a.status&&(this._incrementSessionStatusCount(a.status,new Date),s.setRequestSession(void 0))}_incrementSessionStatusCount(s,a){const i=new Date(a).setSeconds(0,0);this._pendingAggregates[i]=this._pendingAggregates[i]||{};const e=this._pendingAggregates[i];switch(e.started||(e.started=new Date(i).toISOString()),s){case"errored":return e.errored=(e.errored||0)+1,e.errored;case"ok":return e.exited=(e.exited||0)+1,e.exited;default:return e.crashed=(e.crashed||0)+1,e.crashed}}}n(v,"SessionFlusher"),l.SessionFlusher=v},9064881818:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(4834620523),v=c(8438156026),g=c(2332127203),s=c(5475300505),a="_frozenDsc";function i(r,o){const f=r;u.addNonEnumerableProperty(f,a,o)}n(i,"freezeDscOnSpan");function e(r,o){const f=o.getOptions(),{publicKey:h}=o.getDsn()||{},p=u.dropUndefinedKeys({environment:f.environment||m.DEFAULT_ENVIRONMENT,release:f.release,public_key:h,trace_id:r});return o.emit("createDsc",p),p}n(e,"getDynamicSamplingContextFromClient");function t(r){const o=v.getClient();if(!o)return{};const f=e(s.spanToJSON(r).trace_id||"",o),h=s.getRootSpan(r);if(!h)return f;const p=h[a];if(p)return p;const d=s.spanToJSON(h),y=d.data||{},S=y[g.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE];S!=null&&(f.sample_rate=`${S}`);const b=y[g.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];return b&&b!=="url"&&(f.transaction=d.description),f.sampled=String(s.spanIsSampled(h)),o.emit("createDsc",f),f}n(t,"getDynamicSamplingContextFromSpan"),l.freezeDscOnSpan=i,l.getDynamicSamplingContextFromClient=e,l.getDynamicSamplingContextFromSpan=t},2206474662:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(8844511336),v=c(5475300505),g=c(1150305139);let s=!1;function a(){s||(s=!0,u.addGlobalErrorInstrumentationHandler(i),u.addGlobalUnhandledRejectionInstrumentationHandler(i))}n(a,"registerSpanErrorInstrumentation");function i(){const e=v.getActiveSpan(),t=e&&v.getRootSpan(e);if(t){const r="internal_error";m.DEBUG_BUILD&&u.logger.log(`[Tracing] Root span: ${r} -> Global error occured`),t.setStatus({code:g.SPAN_STATUS_ERROR,message:r})}}n(i,"errorCallback"),i.tag="sentry_tracingErrorCallback",l.registerSpanErrorInstrumentation=a},5618891990:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(2206474662);function m(){u.registerSpanErrorInstrumentation()}n(m,"addTracingExtensions"),l.addTracingExtensions=m},7265722327:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(8438156026),v=c(8844511336),g=c(2332127203),s=c(8645141291),a=c(9972015035),i=c(5475300505),e=c(8167549304),t=c(1150305139),r=c(4530391782),o={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},f="heartbeatFailed",h="idleTimeout",p="finalTimeout",d="externalFinish";function y(b,_={}){const C=new Map;let w=!1,R,O=d,D=!_.disableAutoFinish;const{idleTimeout:I=o.idleTimeout,finalTimeout:M=o.finalTimeout,childSpanTimeout:k=o.childSpanTimeout,beforeSpanEnd:N}=_,j=m.getClient();if(!j||!s.hasTracingEnabled())return new e.SentryNonRecordingSpan;const B=m.getCurrentScope(),J=i.getActiveSpan(),Q=S(b);function oe(De=u.timestampInSeconds()){const ut=i.getSpanDescendants(Q).filter(Vt=>Vt!==Q);if(!ut.length){Q.end(De);return}const St=ut.map(Vt=>i.spanToJSON(Vt).timestamp).filter(Vt=>!!Vt),Rt=St.length?Math.max(...St):void 0,Ze=i.spanTimeInputToSeconds(De),mt=i.spanToJSON(Q).start_timestamp,At=Math.min(mt?mt+M/1e3:1/0,Math.max(mt||-1/0,Math.min(Ze,Rt||1/0)));Q.end(At)}n(oe,"_endSpan");function $(){R&&(clearTimeout(R),R=void 0)}n($,"_cancelIdleTimeout");function he(De){$(),R=setTimeout(()=>{!w&&C.size===0&&D&&(O=h,oe(De))},I)}n(he,"_restartIdleTimeout");function Ae(De){R=setTimeout(()=>{!w&&D&&(O=f,oe(De))},k)}n(Ae,"_restartChildSpanTimeout");function Ee(De){$(),C.set(De,!0);const ut=u.timestampInSeconds();Ae(ut+k/1e3)}n(Ee,"_pushActivity");function Oe(De){if(C.has(De)&&C.delete(De),C.size===0){const ut=u.timestampInSeconds();he(ut+I/1e3)}}n(Oe,"_popActivity");function be(){w=!0,C.clear(),N&&N(Q),a._setSpanForScope(B,J);const De=i.spanToJSON(Q),{timestamp:ut,start_timestamp:St}=De;if(!ut||!St)return;(De.data||{})[g.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON]||Q.setAttribute(g.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,O),u.logger.log(`[Tracing] Idle span "${De.op}" finished`);const Ze=i.getSpanDescendants(Q).filter(At=>At!==Q);let mt=0;Ze.forEach(At=>{At.isRecording()&&(At.setStatus({code:t.SPAN_STATUS_ERROR,message:"cancelled"}),At.end(ut),v.DEBUG_BUILD&&u.logger.log("[Tracing] Cancelling span since span ended early",JSON.stringify(At,void 0,2)));const Vt=i.spanToJSON(At),{timestamp:dt=0,start_timestamp:Cn=0}=Vt,gt=Cn<=ut,Ut=(M+I)/1e3,en=dt-Cn<Ut;if(v.DEBUG_BUILD){const sn=JSON.stringify(At,void 0,2);gt?en||u.logger.log("[Tracing] Discarding span since it finished after idle span final timeout",sn):u.logger.log("[Tracing] Discarding span since it happened after idle span was finished",sn)}(!en||!gt)&&(i.removeChildSpanFromSpan(Q,At),mt++)}),mt>0&&Q.setAttribute("sentry.idle_span_discarded_spans",mt)}return n(be,"onIdleSpanEnded"),j.on("spanStart",De=>{if(w||De===Q||i.spanToJSON(De).timestamp)return;i.getSpanDescendants(Q).includes(De)&&Ee(De.spanContext().spanId)}),j.on("spanEnd",De=>{w||(Oe(De.spanContext().spanId),De===Q&&be())}),j.on("idleSpanEnableAutoFinish",De=>{De===Q&&(D=!0,he(),C.size&&Ae())}),_.disableAutoFinish||he(),setTimeout(()=>{w||(Q.setStatus({code:t.SPAN_STATUS_ERROR,message:"deadline_exceeded"}),O=p,oe())},M),Q}n(y,"startIdleSpan");function S(b){const _=r.startInactiveSpan(b);return a._setSpanForScope(m.getCurrentScope(),_),v.DEBUG_BUILD&&u.logger.log("[Tracing] Started span is an idle span"),_}n(S,"_startIdleSpan"),l.TRACING_DEFAULTS=o,l.startIdleSpan=y},8482601586:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(8844511336),v=c(5475300505);function g(a){if(!m.DEBUG_BUILD)return;const{description:i="< unknown name >",op:e="< unknown op >",parent_span_id:t}=v.spanToJSON(a),{spanId:r}=a.spanContext(),o=v.spanIsSampled(a),f=v.getRootSpan(a),h=f===a,p=`[Tracing] Starting ${o?"sampled":"unsampled"} ${h?"root ":""}span`,d=[`op: ${e}`,`name: ${i}`,`ID: ${r}`];if(t&&d.push(`parent ID: ${t}`),!h){const{op:y,description:S}=v.spanToJSON(f);d.push(`root ID: ${f.spanContext().spanId}`),y&&d.push(`root op: ${y}`),S&&d.push(`root description: ${S}`)}u.logger.log(`${p}
  ${d.join(`
  `)}`)}n(g,"logSpanStart");function s(a){if(!m.DEBUG_BUILD)return;const{description:i="< unknown name >",op:e="< unknown op >"}=v.spanToJSON(a),{spanId:t}=a.spanContext(),o=v.getRootSpan(a)===a,f=`[Tracing] Finishing "${e}" ${o?"root ":""}span "${i}" with ID ${t}`;u.logger.log(f)}n(s,"logSpanEnd"),l.logSpanEnd=s,l.logSpanStart=g},3345259075:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(2332127203),m=c(5475300505);function v(s,a,i){const e=m.getActiveSpan(),t=e&&m.getRootSpan(e);t&&t.addEvent(s,{[u.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]:a,[u.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]:i})}n(v,"setMeasurement");function g(s){if(!s||s.length===0)return;const a={};return s.forEach(i=>{const e=i.attributes||{},t=e[u.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT],r=e[u.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE];typeof t=="string"&&typeof r=="number"&&(a[i.name]={value:r,unit:t})}),a}n(g,"timedEventsToMeasurements"),l.setMeasurement=v,l.timedEventsToMeasurements=g},6939919536:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(8844511336),v=c(8645141291),g=c(1119532287);function s(a,i){if(!v.hasTracingEnabled(a))return[!1];let e;typeof a.tracesSampler=="function"?e=a.tracesSampler(i):i.parentSampled!==void 0?e=i.parentSampled:typeof a.tracesSampleRate<"u"?e=a.tracesSampleRate:e=1;const t=g.parseSampleRate(e);return t===void 0?(m.DEBUG_BUILD&&u.logger.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):t?Math.random()<t?[!0,t]:(m.DEBUG_BUILD&&u.logger.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(e)})`),[!1,t]):(m.DEBUG_BUILD&&u.logger.log(`[Tracing] Discarding transaction because ${typeof a.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,t])}n(s,"sampleSpan"),l.sampleSpan=s},8167549304:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(5475300505);class v{constructor(s={}){this._traceId=s.traceId||u.uuid4(),this._spanId=s.spanId||u.uuid4().substring(16)}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:m.TRACE_FLAG_NONE}}end(s){}setAttribute(s,a){return this}setAttributes(s){return this}setStatus(s){return this}updateName(s){return this}isRecording(){return!1}addEvent(s,a,i){return this}}n(v,"SentryNonRecordingSpan"),l.SentryNonRecordingSpan=v},6720678066:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(8438156026),v=c(8844511336),g=c(5297268390),s=c(1243296801),a=c(2332127203),i=c(5475300505),e=c(9064881818),t=c(8482601586),r=c(3345259075),o=c(9578383602);class f{constructor(b={}){this._traceId=b.traceId||u.uuid4(),this._spanId=b.spanId||u.uuid4().substring(16),this._startTime=b.startTimestamp||u.timestampInSeconds(),this._attributes={},this.setAttributes({[a.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"manual",[a.SEMANTIC_ATTRIBUTE_SENTRY_OP]:b.op,...b.attributes}),this._name=b.name,b.parentSpanId&&(this._parentSpanId=b.parentSpanId),"sampled"in b&&(this._sampled=b.sampled),b.endTimestamp&&(this._endTime=b.endTimestamp),this._events=[],this._isStandaloneSpan=b.isStandalone,this._endTime&&this._onSpanEnded()}spanContext(){const{_spanId:b,_traceId:_,_sampled:C}=this;return{spanId:b,traceId:_,traceFlags:C?i.TRACE_FLAG_SAMPLED:i.TRACE_FLAG_NONE}}setAttribute(b,_){_===void 0?delete this._attributes[b]:this._attributes[b]=_}setAttributes(b){Object.keys(b).forEach(_=>this.setAttribute(_,b[_]))}updateStartTime(b){this._startTime=i.spanTimeInputToSeconds(b)}setStatus(b){return this._status=b,this}updateName(b){return this._name=b,this}end(b){this._endTime||(this._endTime=i.spanTimeInputToSeconds(b),t.logSpanEnd(this),this._onSpanEnded())}getSpanJSON(){return u.dropUndefinedKeys({data:this._attributes,description:this._name,op:this._attributes[a.SEMANTIC_ATTRIBUTE_SENTRY_OP],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:i.getStatusMessage(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[a.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],_metrics_summary:s.getMetricSummaryJsonForSpan(this),profile_id:this._attributes[a.SEMANTIC_ATTRIBUTE_PROFILE_ID],exclusive_time:this._attributes[a.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME],measurements:r.timedEventsToMeasurements(this._events),is_segment:this._isStandaloneSpan&&i.getRootSpan(this)===this||void 0,segment_id:this._isStandaloneSpan?i.getRootSpan(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(b,_,C){v.DEBUG_BUILD&&u.logger.log("[Tracing] Adding an event to span:",b);const w=h(_)?_:C||u.timestampInSeconds(),R=h(_)?{}:_||{},O={name:b,time:i.spanTimeInputToSeconds(w),attributes:R};return this._events.push(O),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const b=m.getClient();if(b&&b.emit("spanEnd",this),!(this._isStandaloneSpan||this===i.getRootSpan(this)))return;if(this._isStandaloneSpan){y(g.createSpanEnvelope([this],b));return}const C=this._convertSpanToTransaction();C&&(o.getCapturedScopesOnSpan(this).scope||m.getCurrentScope()).captureEvent(C)}_convertSpanToTransaction(){if(!p(i.spanToJSON(this)))return;this._name||(v.DEBUG_BUILD&&u.logger.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:b,isolationScope:_}=o.getCapturedScopesOnSpan(this),w=(b||m.getCurrentScope()).getClient()||m.getClient();if(this._sampled!==!0){v.DEBUG_BUILD&&u.logger.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),w&&w.recordDroppedEvent("sample_rate","transaction");return}const O=i.getSpanDescendants(this).filter(N=>N!==this&&!d(N)).map(N=>i.spanToJSON(N)).filter(p),D=this._attributes[a.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE],I={contexts:{trace:i.spanToTransactionTraceContext(this)},spans:O,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:b,capturedSpanIsolationScope:_,...u.dropUndefinedKeys({dynamicSamplingContext:e.getDynamicSamplingContextFromSpan(this)})},_metrics_summary:s.getMetricSummaryJsonForSpan(this),...D&&{transaction_info:{source:D}}},M=r.timedEventsToMeasurements(this._events);return M&&Object.keys(M).length&&(v.DEBUG_BUILD&&u.logger.log("[Measurements] Adding measurements to transaction",JSON.stringify(M,void 0,2)),I.measurements=M),I}}n(f,"SentrySpan");function h(S){return S&&typeof S=="number"||S instanceof Date||Array.isArray(S)}n(h,"isSpanTimeInput");function p(S){return!!S.start_timestamp&&!!S.timestamp&&!!S.span_id&&!!S.trace_id}n(p,"isFullFinishedSpan");function d(S){return S instanceof f&&S.isStandaloneSpan()}n(d,"isStandaloneSpan");function y(S){const b=m.getClient();if(!b)return;const _=S[1];if(!_||_.length===0){b.recordDroppedEvent("before_send","span");return}const C=b.getTransport();C&&C.send(S).then(null,w=>{v.DEBUG_BUILD&&u.logger.error("Error while sending span:",w)})}n(y,"sendSpanEnvelope"),l.SentrySpan=f},1150305139:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=0,u=1,m=2;function v(s){if(s<400&&s>=100)return{code:u};if(s>=400&&s<500)switch(s){case 401:return{code:m,message:"unauthenticated"};case 403:return{code:m,message:"permission_denied"};case 404:return{code:m,message:"not_found"};case 409:return{code:m,message:"already_exists"};case 413:return{code:m,message:"failed_precondition"};case 429:return{code:m,message:"resource_exhausted"};case 499:return{code:m,message:"cancelled"};default:return{code:m,message:"invalid_argument"}}if(s>=500&&s<600)switch(s){case 501:return{code:m,message:"unimplemented"};case 503:return{code:m,message:"unavailable"};case 504:return{code:m,message:"deadline_exceeded"};default:return{code:m,message:"internal_error"}}return{code:m,message:"unknown_error"}}n(v,"getSpanStatusFromHttpCode");function g(s,a){s.setAttribute("http.response.status_code",a);const i=v(a);i.message!=="unknown_error"&&s.setStatus(i)}n(g,"setHttpStatus"),l.SPAN_STATUS_ERROR=m,l.SPAN_STATUS_OK=u,l.SPAN_STATUS_UNSET=c,l.getSpanStatusFromHttpCode=v,l.setHttpStatus=g},4530391782:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(2685322190),v=c(8438156026),g=c(897859094),s=c(2332127203),a=c(5800525242),i=c(8645141291),e=c(9972015035),t=c(5475300505),r=c(9064881818),o=c(8482601586),f=c(6939919536),h=c(8167549304),p=c(6720678066),d=c(1150305139),y=c(9578383602),S="__SENTRY_SUPPRESS_TRACING__";function b(B,J){const Q=M();if(Q.startSpan)return Q.startSpan(B,J);const oe=I(B);return v.withScope(B.scope,$=>{const he=j($),Ee=B.onlyIfParent&&!he?new h.SentryNonRecordingSpan:D({parentSpan:he,spanContext:oe,forceTransaction:B.forceTransaction,scope:$});return e._setSpanForScope($,Ee),a.handleCallbackErrors(()=>J(Ee),()=>{const{status:Oe}=t.spanToJSON(Ee);Ee.isRecording()&&(!Oe||Oe==="ok")&&Ee.setStatus({code:d.SPAN_STATUS_ERROR,message:"internal_error"})},()=>Ee.end())})}n(b,"startSpan");function _(B,J){const Q=M();if(Q.startSpanManual)return Q.startSpanManual(B,J);const oe=I(B);return v.withScope(B.scope,$=>{const he=j($),Ee=B.onlyIfParent&&!he?new h.SentryNonRecordingSpan:D({parentSpan:he,spanContext:oe,forceTransaction:B.forceTransaction,scope:$});e._setSpanForScope($,Ee);function Oe(){Ee.end()}return n(Oe,"finishAndSetSpan"),a.handleCallbackErrors(()=>J(Ee,Oe),()=>{const{status:be}=t.spanToJSON(Ee);Ee.isRecording()&&(!be||be==="ok")&&Ee.setStatus({code:d.SPAN_STATUS_ERROR,message:"internal_error"})})})}n(_,"startSpanManual");function C(B){const J=M();if(J.startInactiveSpan)return J.startInactiveSpan(B);const Q=I(B),oe=B.scope||v.getCurrentScope(),$=j(oe);return B.onlyIfParent&&!$?new h.SentryNonRecordingSpan:D({parentSpan:$,spanContext:Q,forceTransaction:B.forceTransaction,scope:oe})}n(C,"startInactiveSpan");const w=n(({sentryTrace:B,baggage:J},Q)=>v.withScope(oe=>{const $=u.propagationContextFromHeaders(B,J);return oe.setPropagationContext($),Q()}),"continueTrace");function R(B,J){const Q=M();return Q.withActiveSpan?Q.withActiveSpan(B,J):v.withScope(oe=>(e._setSpanForScope(oe,B||void 0),J(oe)))}n(R,"withActiveSpan");function O(B){const J=M();return J.suppressTracing?J.suppressTracing(B):v.withScope(Q=>(Q.setSDKProcessingMetadata({[S]:!0}),B()))}n(O,"suppressTracing");function D({parentSpan:B,spanContext:J,forceTransaction:Q,scope:oe}){if(!i.hasTracingEnabled())return new h.SentryNonRecordingSpan;const $=v.getIsolationScope();let he;if(B&&!Q)he=N(B,oe,J),t.addChildSpanToSpan(B,he);else if(B){const Ae=r.getDynamicSamplingContextFromSpan(B),{traceId:Ee,spanId:Oe}=B.spanContext(),be=t.spanIsSampled(B);he=k({traceId:Ee,parentSpanId:Oe,...J},oe,be),r.freezeDscOnSpan(he,Ae)}else{const{traceId:Ae,dsc:Ee,parentSpanId:Oe,sampled:be}={...$.getPropagationContext(),...oe.getPropagationContext()};he=k({traceId:Ae,parentSpanId:Oe,...J},oe,be),Ee&&r.freezeDscOnSpan(he,Ee)}return o.logSpanStart(he),y.setCapturedScopesOnSpan(he,oe,$),he}n(D,"createChildOrRootSpan");function I(B){const Q={isStandalone:(B.experimental||{}).standalone,...B};if(B.startTime){const oe={...Q};return oe.startTimestamp=t.spanTimeInputToSeconds(B.startTime),delete oe.startTime,oe}return Q}n(I,"normalizeContext");function M(){const B=m.getMainCarrier();return g.getAsyncContextStrategy(B)}n(M,"getAcs");function k(B,J,Q){const oe=v.getClient(),$=oe&&oe.getOptions()||{},{name:he="",attributes:Ae}=B,[Ee,Oe]=J.getScopeData().sdkProcessingMetadata[S]?[!1]:f.sampleSpan($,{name:he,parentSampled:Q,attributes:Ae,transactionContext:{name:he,parentSampled:Q}}),be=new p.SentrySpan({...B,attributes:{[s.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"custom",...B.attributes},sampled:Ee});return Oe!==void 0&&be.setAttribute(s.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,Oe),oe&&oe.emit("spanStart",be),be}n(k,"_startRootSpan");function N(B,J,Q){const{spanId:oe,traceId:$}=B.spanContext(),he=J.getScopeData().sdkProcessingMetadata[S]?!1:t.spanIsSampled(B),Ae=he?new p.SentrySpan({...Q,parentSpanId:oe,traceId:$,sampled:he}):new h.SentryNonRecordingSpan({traceId:$});t.addChildSpanToSpan(B,Ae);const Ee=v.getClient();return Ee&&(Ee.emit("spanStart",Ae),Q.endTimestamp&&Ee.emit("spanEnd",Ae)),Ae}n(N,"_startChildSpan");function j(B){const J=e._getSpanForScope(B);if(!J)return;const Q=v.getClient();return(Q?Q.getOptions():{}).parentSpanIsAlwaysRootSpan?t.getRootSpan(J):J}n(j,"getParentSpan"),l.continueTrace=w,l.startInactiveSpan=C,l.startSpan=b,l.startSpanManual=_,l.suppressTracing=O,l.withActiveSpan=R},9578383602:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m="_sentryScope",v="_sentryIsolationScope";function g(a,i,e){a&&(u.addNonEnumerableProperty(a,v,e),u.addNonEnumerableProperty(a,m,i))}n(g,"setCapturedScopesOnSpan");function s(a){return{scope:a[m],isolationScope:a[v]}}n(s,"getCapturedScopesOnSpan"),l.stripUrlQueryAndFragment=u.stripUrlQueryAndFragment,l.getCapturedScopesOnSpan=s,l.setCapturedScopesOnSpan=g},306863924:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(8844511336),v=64;function g(a,i,e=u.makePromiseBuffer(a.bufferSize||v)){let t={};const r=n(f=>e.drain(f),"flush");function o(f){const h=[];if(u.forEachEnvelopeItem(f,(S,b)=>{const _=u.envelopeItemTypeToDataCategory(b);if(u.isRateLimited(t,_)){const C=s(S,b);a.recordDroppedEvent("ratelimit_backoff",_,C)}else h.push(S)}),h.length===0)return u.resolvedSyncPromise({});const p=u.createEnvelope(f[0],h),d=n(S=>{u.forEachEnvelopeItem(p,(b,_)=>{const C=s(b,_);a.recordDroppedEvent(S,u.envelopeItemTypeToDataCategory(_),C)})},"recordEnvelopeLoss"),y=n(()=>i({body:u.serializeEnvelope(p)}).then(S=>(S.statusCode!==void 0&&(S.statusCode<200||S.statusCode>=300)&&m.DEBUG_BUILD&&u.logger.warn(`Sentry responded with status code ${S.statusCode} to sent event.`),t=u.updateRateLimits(t,S),S),S=>{throw d("network_error"),S}),"requestTask");return e.add(y).then(S=>S,S=>{if(S instanceof u.SentryError)return m.DEBUG_BUILD&&u.logger.error("Skipped sending event because buffer is full."),d("queue_overflow"),u.resolvedSyncPromise({});throw S})}return n(o,"send"),{send:o,flush:r}}n(g,"createTransport");function s(a,i){if(!(i!=="event"&&i!=="transaction"))return Array.isArray(a)?a[1]:void 0}n(s,"getEventForEnvelopeItem"),l.DEFAULT_TRANSPORT_BUFFER_SIZE=v,l.createTransport=g},2843166954:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(9857059330);function v(i,e){let t;return u.forEachEnvelopeItem(i,(r,o)=>(e.includes(o)&&(t=Array.isArray(r)?r[1]:void 0),!!t)),t}n(v,"eventFromEnvelope");function g(i,e){return t=>{const r=i(t);return{...r,send:async o=>{const f=v(o,["event","transaction","profile","replay_event"]);return f&&(f.release=e),r.send(o)}}}}n(g,"makeOverrideReleaseTransport");function s(i,e){return u.createEnvelope(e?{...i[0],dsn:e}:i[0],i[1])}n(s,"overrideDsn");function a(i,e){return t=>{const r=i(t),o=new Map;function f(d,y){const S=y?`${d}:${y}`:d;let b=o.get(S);if(!b){const _=u.dsnFromString(d);if(!_)return;const C=m.getEnvelopeEndpointWithUrlEncodedAuth(_,t.tunnel);b=y?g(i,y)({...t,url:C}):i({...t,url:C}),o.set(S,b)}return[d,b]}n(f,"getTransport");async function h(d){function y(_){const C=_&&_.length?_:["event"];return v(d,C)}n(y,"getEvent");const S=e({envelope:d,getEvent:y}).map(_=>typeof _=="string"?f(_,void 0):f(_.dsn,_.release)).filter(_=>!!_);return S.length===0&&S.push(["",r]),(await Promise.all(S.map(([_,C])=>C.send(s(d,_)))))[0]}n(h,"send");async function p(d){const y=[...o.values(),r];return(await Promise.all(y.map(b=>b.flush(d)))).every(b=>b)}return n(p,"flush"),{send:h,flush:p}}}n(a,"makeMultiplexedTransport"),l.eventFromEnvelope=v,l.makeMultiplexedTransport=a},3178226440:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(8844511336),v=100,g=5e3,s=36e5;function a(i){function e(...t){m.DEBUG_BUILD&&u.logger.info("[Offline]:",...t)}return n(e,"log"),t=>{const r=i(t);if(!t.createStore)throw new Error("No `createStore` function was provided");const o=t.createStore(t);let f=g,h;function p(b,_,C){return u.envelopeContainsItemType(b,["client_report"])?!1:t.shouldStore?t.shouldStore(b,_,C):!0}n(p,"shouldQueue");function d(b){h&&clearTimeout(h),h=setTimeout(async()=>{h=void 0;const _=await o.shift();_&&(e("Attempting to send previously queued event"),_[0].sent_at=new Date().toISOString(),S(_,!0).catch(C=>{e("Failed to retry sending",C)}))},b),typeof h!="number"&&h.unref&&h.unref()}n(d,"flushIn");function y(){h||(d(f),f=Math.min(f*2,s))}n(y,"flushWithBackOff");async function S(b,_=!1){if(!_&&u.envelopeContainsItemType(b,["replay_event","replay_recording"]))return await o.push(b),d(v),{};try{const C=await r.send(b);let w=v;if(C){if(C.headers&&C.headers["retry-after"])w=u.parseRetryAfterHeader(C.headers["retry-after"]);else if(C.headers&&C.headers["x-sentry-rate-limits"])w=6e4;else if((C.statusCode||0)>=400)return C}return d(w),f=g,C}catch(C){if(await p(b,C,f))return _?await o.unshift(b):await o.push(b),y(),e("Error sending. Event queued.",C),{};throw C}}return n(S,"send"),t.flushAtStartup&&y(),{send:S,flush:b=>r.flush(b)}}}n(a,"makeOfflineTransport"),l.MIN_DELAY=v,l.START_DELAY=g,l.makeOfflineTransport=a},2117263085:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(8438156026),v=c(5015065869),g=c(2332127203);c(2206474662),c(8844511336);const s=c(4530391782),a={mechanism:{handled:!1,data:{function:"trpcMiddleware"}}};function i(e={}){return function(t){const{path:r,type:o,next:f,rawInput:h}=t,p=m.getClient(),d=p&&p.getOptions(),y={procedure_type:o};(e.attachRpcInput!==void 0?e.attachRpcInput:d&&d.sendDefaultPii)&&(y.input=u.normalize(h)),v.setContext("trpc",y);function S(b){typeof b=="object"&&b!==null&&"ok"in b&&!b.ok&&"error"in b&&v.captureException(b.error,a)}return n(S,"captureIfError"),s.startSpanManual({name:`trpc/${r}`,op:"rpc.server",attributes:{[g.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"route",[g.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.rpc.trpc"}},b=>{let _;try{_=f()}catch(C){throw v.captureException(C,a),b.end(),C}return u.isThenable(_)?_.then(C=>(S(C),b.end(),C),C=>{throw v.captureException(C,a),b.end(),C}):(S(_),b.end(),_)})}}n(i,"trpcMiddleware"),l.trpcMiddleware=i},8969228363:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(9064881818),v=c(5475300505);function g(f,h){const{fingerprint:p,span:d,breadcrumbs:y,sdkProcessingMetadata:S}=h;i(f,h),d&&r(f,d),o(f,p),e(f,y),t(f,S)}n(g,"applyScopeDataToEvent");function s(f,h){const{extra:p,tags:d,user:y,contexts:S,level:b,sdkProcessingMetadata:_,breadcrumbs:C,fingerprint:w,eventProcessors:R,attachments:O,propagationContext:D,transactionName:I,span:M}=h;a(f,"extra",p),a(f,"tags",d),a(f,"user",y),a(f,"contexts",S),a(f,"sdkProcessingMetadata",_),b&&(f.level=b),I&&(f.transactionName=I),M&&(f.span=M),C.length&&(f.breadcrumbs=[...f.breadcrumbs,...C]),w.length&&(f.fingerprint=[...f.fingerprint,...w]),R.length&&(f.eventProcessors=[...f.eventProcessors,...R]),O.length&&(f.attachments=[...f.attachments,...O]),f.propagationContext={...f.propagationContext,...D}}n(s,"mergeScopeData");function a(f,h,p){if(p&&Object.keys(p).length){f[h]={...f[h]};for(const d in p)Object.prototype.hasOwnProperty.call(p,d)&&(f[h][d]=p[d])}}n(a,"mergeAndOverwriteScopeData");function i(f,h){const{extra:p,tags:d,user:y,contexts:S,level:b,transactionName:_}=h,C=u.dropUndefinedKeys(p);C&&Object.keys(C).length&&(f.extra={...C,...f.extra});const w=u.dropUndefinedKeys(d);w&&Object.keys(w).length&&(f.tags={...w,...f.tags});const R=u.dropUndefinedKeys(y);R&&Object.keys(R).length&&(f.user={...R,...f.user});const O=u.dropUndefinedKeys(S);O&&Object.keys(O).length&&(f.contexts={...O,...f.contexts}),b&&(f.level=b),_&&f.type!=="transaction"&&(f.transaction=_)}n(i,"applyDataToEvent");function e(f,h){const p=[...f.breadcrumbs||[],...h];f.breadcrumbs=p.length?p:void 0}n(e,"applyBreadcrumbsToEvent");function t(f,h){f.sdkProcessingMetadata={...f.sdkProcessingMetadata,...h}}n(t,"applySdkMetadataToEvent");function r(f,h){f.contexts={trace:v.spanToTraceContext(h),...f.contexts},f.sdkProcessingMetadata={dynamicSamplingContext:m.getDynamicSamplingContextFromSpan(h),...f.sdkProcessingMetadata};const p=v.getRootSpan(h),d=v.spanToJSON(p).description;d&&!f.transaction&&f.type==="transaction"&&(f.transaction=d)}n(r,"applySpanToEvent");function o(f,h){f.fingerprint=f.fingerprint?u.arrayify(f.fingerprint):[],h&&(f.fingerprint=f.fingerprint.concat(h)),f.fingerprint&&!f.fingerprint.length&&delete f.fingerprint}n(o,"applyFingerprintToEvent"),l.applyScopeDataToEvent=g,l.mergeAndOverwriteScopeData=a,l.mergeScopeData=s},5800525242:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614);function m(g,s,a=()=>{}){let i;try{i=g()}catch(e){throw s(e),a(),e}return v(i,s,a)}n(m,"handleCallbackErrors");function v(g,s,a){return u.isThenable(g)?g.then(i=>(a(),i),i=>{throw s(i),a(),i}):(a(),g)}n(v,"maybeHandlePromiseRejection"),l.handleCallbackErrors=m},8645141291:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8438156026);function m(g){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const s=g||v();return!!s&&(s.enableTracing||"tracesSampleRate"in s||"tracesSampler"in s)}n(m,"hasTracingEnabled");function v(){const g=u.getClient();return g&&g.getOptions()}n(v,"getClientOptions"),l.hasTracingEnabled=m},175966809:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function c(g,s){const a=s&&s.getDsn(),i=s&&s.getOptions().tunnel;return m(g,a)||u(g,i)}n(c,"isSentryRequestUrl");function u(g,s){return s?v(g)===v(s):!1}n(u,"checkTunnel");function m(g,s){return s?g.includes(s.host):!1}n(m,"checkDsn");function v(g){return g[g.length-1]==="/"?g.slice(0,-1):g}n(v,"removeTrailingSlash"),l.isSentryRequestUrl=c},4718881455:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function c(u,...m){const v=new String(String.raw(u,...m));return v.__sentry_template_string__=u.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),v.__sentry_template_values__=m,v}n(c,"parameterize"),l.parameterize=c},1119532287:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(8844511336);function v(g){if(typeof g=="boolean")return Number(g);const s=typeof g=="string"?parseFloat(g):g;if(typeof s!="number"||isNaN(s)||s<0||s>1){m.DEBUG_BUILD&&u.logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(g)} of type ${JSON.stringify(typeof g)}.`);return}return s}n(v,"parseSampleRate"),l.parseSampleRate=v},9877103701:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(4834620523),v=c(8438156026),g=c(5911348835),s=c(2158524366),a=c(8969228363);function i(_,C,w,R,O,D){const{normalizeDepth:I=3,normalizeMaxBreadth:M=1e3}=_,k={...C,event_id:C.event_id||w.event_id||u.uuid4(),timestamp:C.timestamp||u.dateTimestampInSeconds()},N=w.integrations||_.integrations.map(he=>he.name);e(k,_),f(k,N),C.type===void 0&&r(k,_.stackParser);const j=p(R,w.captureContext);w.mechanism&&u.addExceptionMechanism(k,w.mechanism);const B=O?O.getEventProcessors():[],J=v.getGlobalScope().getScopeData();if(D){const he=D.getScopeData();a.mergeScopeData(J,he)}if(j){const he=j.getScopeData();a.mergeScopeData(J,he)}const Q=[...w.attachments||[],...J.attachments];Q.length&&(w.attachments=Q),a.applyScopeDataToEvent(k,J);const oe=[...B,...J.eventProcessors];return g.notifyEventProcessors(oe,k,w).then(he=>(he&&o(he),typeof I=="number"&&I>0?h(he,I,M):he))}n(i,"prepareEvent");function e(_,C){const{environment:w,release:R,dist:O,maxValueLength:D=250}=C;"environment"in _||(_.environment="environment"in C?w:m.DEFAULT_ENVIRONMENT),_.release===void 0&&R!==void 0&&(_.release=R),_.dist===void 0&&O!==void 0&&(_.dist=O),_.message&&(_.message=u.truncate(_.message,D));const I=_.exception&&_.exception.values&&_.exception.values[0];I&&I.value&&(I.value=u.truncate(I.value,D));const M=_.request;M&&M.url&&(M.url=u.truncate(M.url,D))}n(e,"applyClientOptions");const t=new WeakMap;function r(_,C){const w=u.GLOBAL_OBJ._sentryDebugIds;if(!w)return;let R;const O=t.get(C);O?R=O:(R=new Map,t.set(C,R));const D=Object.keys(w).reduce((I,M)=>{let k;const N=R.get(M);N?k=N:(k=C(M),R.set(M,k));for(let j=k.length-1;j>=0;j--){const B=k[j];if(B.filename){I[B.filename]=w[M];break}}return I},{});try{_.exception.values.forEach(I=>{I.stacktrace.frames.forEach(M=>{M.filename&&(M.debug_id=D[M.filename])})})}catch{}}n(r,"applyDebugIds");function o(_){const C={};try{_.exception.values.forEach(R=>{R.stacktrace.frames.forEach(O=>{O.debug_id&&(O.abs_path?C[O.abs_path]=O.debug_id:O.filename&&(C[O.filename]=O.debug_id),delete O.debug_id)})})}catch{}if(Object.keys(C).length===0)return;_.debug_meta=_.debug_meta||{},_.debug_meta.images=_.debug_meta.images||[];const w=_.debug_meta.images;Object.keys(C).forEach(R=>{w.push({type:"sourcemap",code_file:R,debug_id:C[R]})})}n(o,"applyDebugMeta");function f(_,C){C.length>0&&(_.sdk=_.sdk||{},_.sdk.integrations=[..._.sdk.integrations||[],...C])}n(f,"applyIntegrationsMetadata");function h(_,C,w){if(!_)return null;const R={..._,..._.breadcrumbs&&{breadcrumbs:_.breadcrumbs.map(O=>({...O,...O.data&&{data:u.normalize(O.data,C,w)}}))},..._.user&&{user:u.normalize(_.user,C,w)},..._.contexts&&{contexts:u.normalize(_.contexts,C,w)},..._.extra&&{extra:u.normalize(_.extra,C,w)}};return _.contexts&&_.contexts.trace&&R.contexts&&(R.contexts.trace=_.contexts.trace,_.contexts.trace.data&&(R.contexts.trace.data=u.normalize(_.contexts.trace.data,C,w))),_.spans&&(R.spans=_.spans.map(O=>({...O,...O.data&&{data:u.normalize(O.data,C,w)}}))),R}n(h,"normalizeEvent");function p(_,C){if(!C)return _;const w=_?_.clone():new s.Scope;return w.update(C),w}n(p,"getFinalScope");function d(_){if(_)return y(_)?{captureContext:_}:b(_)?{captureContext:_}:_}n(d,"parseEventHintOrCaptureContext");function y(_){return _ instanceof s.Scope||typeof _=="function"}n(y,"hintIsScopeOrFunction");const S=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function b(_){return Object.keys(_).some(C=>S.includes(C))}n(b,"hintIsScopeContext"),l.applyDebugIds=r,l.applyDebugMeta=o,l.parseEventHintOrCaptureContext=d,l.prepareEvent=i},3433863337:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(639277478);function m(v,g,s=[g],a="npm"){const i=v._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${g}`,packages:s.map(e=>({name:`${a}:@sentry/${e}`,version:u.SDK_VERSION})),version:u.SDK_VERSION}),v._metadata=i}n(m,"applySdkMetadata"),l.applySdkMetadata=m},9972015035:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m="_sentrySpan";function v(s,a){a?u.addNonEnumerableProperty(s,m,a):delete s[m]}n(v,"_setSpanForScope");function g(s){return s[m]}n(g,"_getSpanForScope"),l._getSpanForScope=g,l._setSpanForScope=v},5475300505:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(7563271614),m=c(897859094),v=c(2685322190),g=c(8438156026),s=c(1243296801),a=c(2332127203);c(2206474662),c(8844511336);const i=c(9972015035),e=c(1150305139),t=c(9064881818),r=0,o=1;function f(J){const{spanId:Q,traceId:oe}=J.spanContext(),{data:$,op:he,parent_span_id:Ae,status:Ee,origin:Oe}=b(J);return u.dropUndefinedKeys({parent_span_id:Ae,span_id:Q,trace_id:oe,data:$,op:he,status:Ee,origin:Oe})}n(f,"spanToTransactionTraceContext");function h(J){const{spanId:Q,traceId:oe}=J.spanContext(),{parent_span_id:$}=b(J);return u.dropUndefinedKeys({parent_span_id:$,span_id:Q,trace_id:oe})}n(h,"spanToTraceContext");function p(J){const{traceId:Q,spanId:oe}=J.spanContext(),$=w(J);return u.generateSentryTraceHeader(Q,oe,$)}n(p,"spanToTraceHeader");function d(J){const Q=t.getDynamicSamplingContextFromSpan(J);return u.dynamicSamplingContextToSentryBaggageHeader(Q)}n(d,"spanToBaggageHeader");function y(J){return typeof J=="number"?S(J):Array.isArray(J)?J[0]+J[1]/1e9:J instanceof Date?S(J.getTime()):u.timestampInSeconds()}n(y,"spanTimeInputToSeconds");function S(J){return J>9999999999?J/1e3:J}n(S,"ensureTimestampInSeconds");function b(J){if(C(J))return J.getSpanJSON();try{const{spanId:Q,traceId:oe}=J.spanContext();if(_(J)){const{attributes:$,startTime:he,name:Ae,endTime:Ee,parentSpanId:Oe,status:be}=J;return u.dropUndefinedKeys({span_id:Q,trace_id:oe,data:$,description:Ae,parent_span_id:Oe,start_timestamp:y(he),timestamp:y(Ee)||void 0,status:R(be),op:$[a.SEMANTIC_ATTRIBUTE_SENTRY_OP],origin:$[a.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],_metrics_summary:s.getMetricSummaryJsonForSpan(J)})}return{span_id:Q,trace_id:oe}}catch{return{}}}n(b,"spanToJSON");function _(J){const Q=J;return!!Q.attributes&&!!Q.startTime&&!!Q.name&&!!Q.endTime&&!!Q.status}n(_,"spanIsOpenTelemetrySdkTraceBaseSpan");function C(J){return typeof J.getSpanJSON=="function"}n(C,"spanIsSentrySpan");function w(J){const{traceFlags:Q}=J.spanContext();return Q===o}n(w,"spanIsSampled");function R(J){if(!(!J||J.code===e.SPAN_STATUS_UNSET))return J.code===e.SPAN_STATUS_OK?"ok":J.message||"unknown_error"}n(R,"getStatusMessage");const O="_sentryChildSpans",D="_sentryRootSpan";function I(J,Q){const oe=J[D]||J;u.addNonEnumerableProperty(Q,D,oe),J[O]&&J[O].size<1e3?J[O].add(Q):u.addNonEnumerableProperty(J,O,new Set([Q]))}n(I,"addChildSpanToSpan");function M(J,Q){J[O]&&J[O].delete(Q)}n(M,"removeChildSpanFromSpan");function k(J){const Q=new Set;function oe($){if(!Q.has($)&&w($)){Q.add($);const he=$[O]?Array.from($[O]):[];for(const Ae of he)oe(Ae)}}return n(oe,"addSpanChildren"),oe(J),Array.from(Q)}n(k,"getSpanDescendants");function N(J){return J[D]||J}n(N,"getRootSpan");function j(){const J=v.getMainCarrier(),Q=m.getAsyncContextStrategy(J);return Q.getActiveSpan?Q.getActiveSpan():i._getSpanForScope(g.getCurrentScope())}n(j,"getActiveSpan");function B(J,Q,oe,$,he,Ae){const Ee=j();Ee&&s.updateMetricSummaryOnSpan(Ee,J,Q,oe,$,he,Ae)}n(B,"updateMetricSummaryOnActiveSpan"),l.TRACE_FLAG_NONE=r,l.TRACE_FLAG_SAMPLED=o,l.addChildSpanToSpan=I,l.getActiveSpan=j,l.getRootSpan=N,l.getSpanDescendants=k,l.getStatusMessage=R,l.removeChildSpanFromSpan=M,l.spanIsSampled=w,l.spanTimeInputToSeconds=y,l.spanToBaggageHeader=d,l.spanToJSON=b,l.spanToTraceContext=h,l.spanToTraceHeader=p,l.spanToTransactionTraceContext=f,l.updateMetricSummaryOnActiveSpan=B},639277478:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const c="8.2.1";l.SDK_VERSION=c},4916261515:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(5330804994),m=c(9996838991);function v(e,t,r=250,o,f,h,p){if(!h.exception||!h.exception.values||!p||!u.isInstanceOf(p.originalException,Error))return;const d=h.exception.values.length>0?h.exception.values[h.exception.values.length-1]:void 0;d&&(h.exception.values=i(g(e,t,f,p.originalException,o,h.exception.values,d,0),r))}n(v,"applyAggregateErrorsToEvent");function g(e,t,r,o,f,h,p,d){if(h.length>=r+1)return h;let y=[...h];if(u.isInstanceOf(o[f],Error)){s(p,d);const S=e(t,o[f]),b=y.length;a(S,f,b,d),y=g(e,t,r,o[f],f,[S,...y],S,b)}return Array.isArray(o.errors)&&o.errors.forEach((S,b)=>{if(u.isInstanceOf(S,Error)){s(p,d);const _=e(t,S),C=y.length;a(_,`errors[${b}]`,C,d),y=g(e,t,r,S,f,[_,...y],_,C)}}),y}n(g,"aggregateExceptionsFromError");function s(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}n(s,"applyExceptionGroupFieldsForParentException");function a(e,t,r,o){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:r,parent_id:o}}n(a,"applyExceptionGroupFieldsForChildException");function i(e,t){return e.map(r=>(r.value&&(r.value=m.truncate(r.value,t)),r))}n(i,"truncateAggregateExceptions"),l.applyAggregateErrorsToEvent=v},999571021:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(6005876151),m=c(5247061117),v=c(9955566551);function g(a,i,e,t){const r=a();let o=!1,f=!0;return setInterval(()=>{const h=r.getTimeMs();o===!1&&h>i+e&&(o=!0,f&&t()),h<i+e&&(o=!1)},20),{poll:()=>{r.reset()},enabled:h=>{f=h}}}n(g,"watchdogTimer");function s(a,i,e){const t=i?i.replace(/^file:\/\//,""):void 0,r=a.location.columnNumber?a.location.columnNumber+1:void 0,o=a.location.lineNumber?a.location.lineNumber+1:void 0;return m.dropUndefinedKeys({filename:t,module:e(t),function:a.functionName||v.UNKNOWN_FUNCTION,colno:r,lineno:o,in_app:t?u.filenameIsInApp(t):void 0})}n(s,"callFrameToStackFrame"),l.callFrameToStackFrame=s,l.watchdogTimer=g},8666696284:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(1795624184),m=c(5330804994),v=c(3610150206),g="baggage",s="sentry-",a=/^sentry-/,i=8192;function e(h){const p=r(h);if(!p)return;const d=Object.entries(p).reduce((y,[S,b])=>{if(S.match(a)){const _=S.slice(s.length);y[_]=b}return y},{});if(Object.keys(d).length>0)return d}n(e,"baggageHeaderToDynamicSamplingContext");function t(h){if(!h)return;const p=Object.entries(h).reduce((d,[y,S])=>(S&&(d[`${s}${y}`]=S),d),{});return f(p)}n(t,"dynamicSamplingContextToSentryBaggageHeader");function r(h){if(!(!h||!m.isString(h)&&!Array.isArray(h)))return Array.isArray(h)?h.reduce((p,d)=>{const y=o(d);for(const S of Object.keys(y))p[S]=y[S];return p},{}):o(h)}n(r,"parseBaggageHeader");function o(h){return h.split(",").map(p=>p.split("=").map(d=>decodeURIComponent(d.trim()))).reduce((p,[d,y])=>(p[d]=y,p),{})}n(o,"baggageHeaderToObject");function f(h){if(Object.keys(h).length!==0)return Object.entries(h).reduce((p,[d,y],S)=>{const b=`${encodeURIComponent(d)}=${encodeURIComponent(y)}`,_=S===0?b:`${p},${b}`;return _.length>i?(u.DEBUG_BUILD&&v.logger.warn(`Not adding key: ${d} with val: ${y} to baggage header due to exceeding baggage size limits.`),p):_},"")}n(f,"objectToBaggageHeader"),l.BAGGAGE_HEADER_NAME=g,l.MAX_BAGGAGE_STRING_LENGTH=i,l.SENTRY_BAGGAGE_KEY_PREFIX=s,l.SENTRY_BAGGAGE_KEY_PREFIX_REGEX=a,l.baggageHeaderToDynamicSamplingContext=e,l.dynamicSamplingContextToSentryBaggageHeader=t,l.parseBaggageHeader=r},9550996546:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(5330804994),v=c(1108286465).GLOBAL_OBJ,g=80;function s(r,o={}){if(!r)return"<unknown>";try{let f=r;const h=5,p=[];let d=0,y=0;const S=" > ",b=S.length;let _;const C=Array.isArray(o)?o:o.keyAttrs,w=!Array.isArray(o)&&o.maxStringLength||g;for(;f&&d++<h&&(_=a(f,C),!(_==="html"||d>1&&y+p.length*b+_.length>=w));)p.push(_),y+=_.length,f=f.parentNode;return p.reverse().join(S)}catch{return"<unknown>"}}n(s,"htmlTreeAsString");function a(r,o){const f=r,h=[];let p,d,y,S,b;if(!f||!f.tagName)return"";if(v.HTMLElement&&f instanceof HTMLElement&&f.dataset){if(f.dataset.sentryComponent)return f.dataset.sentryComponent;if(f.dataset.sentryElement)return f.dataset.sentryElement}h.push(f.tagName.toLowerCase());const _=o&&o.length?o.filter(w=>f.getAttribute(w)).map(w=>[w,f.getAttribute(w)]):null;if(_&&_.length)_.forEach(w=>{h.push(`[${w[0]}="${w[1]}"]`)});else if(f.id&&h.push(`#${f.id}`),p=f.className,p&&u.isString(p))for(d=p.split(/\s+/),b=0;b<d.length;b++)h.push(`.${d[b]}`);const C=["aria-label","type","name","title","alt"];for(b=0;b<C.length;b++)y=C[b],S=f.getAttribute(y),S&&h.push(`[${y}="${S}"]`);return h.join("")}n(a,"_htmlElementAsString");function i(){try{return v.document.location.href}catch{return""}}n(i,"getLocationHref");function e(r){return v.document&&v.document.querySelector?v.document.querySelector(r):null}n(e,"getDomElement");function t(r){if(!v.HTMLElement)return null;let o=r;const f=5;for(let h=0;h<f;h++){if(!o)return null;if(o instanceof HTMLElement){if(o.dataset.sentryComponent)return o.dataset.sentryComponent;if(o.dataset.sentryElement)return o.dataset.sentryElement}o=o.parentNode}return null}n(t,"getComponentName"),l.getComponentName=t,l.getDomElement=e,l.getLocationHref=i,l.htmlTreeAsString=s},7961093924:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(9137969200);async function m(v,g){return u._nullishCoalesce(v,g)}n(m,"_asyncNullishCoalesce"),l._asyncNullishCoalesce=m},6639909989:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});async function c(u){let m,v=u[0],g=1;for(;g<u.length;){const s=u[g],a=u[g+1];if(g+=2,(s==="optionalAccess"||s==="optionalCall")&&v==null)return;s==="access"||s==="optionalAccess"?(m=v,v=await a(v)):(s==="call"||s==="optionalCall")&&(v=await a((...i)=>v.call(m,...i)),m=void 0)}return v}n(c,"_asyncOptionalChain"),l._asyncOptionalChain=c},8823822214:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(6639909989);async function m(v){const g=await u._asyncOptionalChain(v);return g??!0}n(m,"_asyncOptionalChainDelete"),l._asyncOptionalChainDelete=m},9137969200:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function c(u,m){return u??m()}n(c,"_nullishCoalesce"),l._nullishCoalesce=c},3683597617:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function c(u){let m,v=u[0],g=1;for(;g<u.length;){const s=u[g],a=u[g+1];if(g+=2,(s==="optionalAccess"||s==="optionalCall")&&v==null)return;s==="access"||s==="optionalAccess"?(m=v,v=a(v)):(s==="call"||s==="optionalCall")&&(v=a((...i)=>v.call(m,...i)),m=void 0)}return v}n(c,"_optionalChain"),l._optionalChain=c},2677927218:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(3683597617);function m(v){const g=u._optionalChain(v);return g??!0}n(m,"_optionalChainDelete"),l._optionalChainDelete=m},4308130348:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function c(u){let m=[],v={};return{add(g,s){for(;m.length>=u;){const a=m.shift();a!==void 0&&delete v[a]}v[g]&&this.delete(g),m.push(g),v[g]=s},clear(){v={},m=[]},get(g){return v[g]},size(){return m.length},delete(g){if(!v[g])return!1;delete v[g];for(let s=0;s<m.length;s++)if(m[s]===g){m.splice(s,1);break}return!0}}}n(c,"makeFifoCache"),l.makeFifoCache=c},738620759:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(688958166),m=c(2174399055);function v(g,s,a){const i=[{type:"client_report"},{timestamp:a||m.dateTimestampInSeconds(),discarded_events:g}];return u.createEnvelope(s?{dsn:s}:{},[i])}n(v,"createClientReportEnvelope"),l.createClientReportEnvelope=v},9687986872:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function c(u){const m={};let v=0;for(;v<u.length;){const g=u.indexOf("=",v);if(g===-1)break;let s=u.indexOf(";",v);if(s===-1)s=u.length;else if(s<g){v=u.lastIndexOf(";",g-1)+1;continue}const a=u.slice(v,g).trim();if(m[a]===void 0){let i=u.slice(g+1,s).trim();i.charCodeAt(0)===34&&(i=i.slice(1,-1));try{m[a]=i.indexOf("%")!==-1?decodeURIComponent(i):i}catch{m[a]=i}}v=s+1}return m}n(c,"parseCookie"),l.parseCookie=c},1795624184:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;l.DEBUG_BUILD=c},8314282351:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(1795624184),m=c(3610150206),v=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function g(r){return r==="http"||r==="https"}n(g,"isValidProtocol");function s(r,o=!1){const{host:f,path:h,pass:p,port:d,projectId:y,protocol:S,publicKey:b}=r;return`${S}://${b}${o&&p?`:${p}`:""}@${f}${d?`:${d}`:""}/${h&&`${h}/`}${y}`}n(s,"dsnToString");function a(r){const o=v.exec(r);if(!o){m.consoleSandbox(()=>{console.error(`Invalid Sentry Dsn: ${r}`)});return}const[f,h,p="",d,y="",S]=o.slice(1);let b="",_=S;const C=_.split("/");if(C.length>1&&(b=C.slice(0,-1).join("/"),_=C.pop()),_){const w=_.match(/^\d+/);w&&(_=w[0])}return i({host:d,pass:p,path:b,projectId:_,port:y,protocol:f,publicKey:h})}n(a,"dsnFromString");function i(r){return{protocol:r.protocol,publicKey:r.publicKey||"",pass:r.pass||"",host:r.host,port:r.port||"",path:r.path||"",projectId:r.projectId}}n(i,"dsnFromComponents");function e(r){if(!u.DEBUG_BUILD)return!0;const{port:o,projectId:f,protocol:h}=r;return["protocol","publicKey","host","projectId"].find(y=>r[y]?!1:(m.logger.error(`Invalid Sentry Dsn: ${y} missing`),!0))?!1:f.match(/^\d+$/)?g(h)?o&&isNaN(parseInt(o,10))?(m.logger.error(`Invalid Sentry Dsn: Invalid port ${o}`),!1):!0:(m.logger.error(`Invalid Sentry Dsn: Invalid protocol ${h}`),!1):(m.logger.error(`Invalid Sentry Dsn: Invalid projectId ${f}`),!1)}n(e,"validateDsn");function t(r){const o=typeof r=="string"?a(r):i(r);if(!(!o||!e(o)))return o}n(t,"makeDsn"),l.dsnFromString=a,l.dsnToString=s,l.makeDsn=t},1390308333:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function c(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}n(c,"isBrowserBundle");function u(){return"npm"}n(u,"getSDKSource"),l.getSDKSource=u,l.isBrowserBundle=c},688958166:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8314282351),m=c(6371465633),v=c(5247061117),g=c(1108286465);function s(C,w=[]){return[C,w]}n(s,"createEnvelope");function a(C,w){const[R,O]=C;return[R,[...O,w]]}n(a,"addItemToEnvelope");function i(C,w){const R=C[1];for(const O of R){const D=O[0].type;if(w(O,D))return!0}return!1}n(i,"forEachEnvelopeItem");function e(C,w){return i(C,(R,O)=>w.includes(O))}n(e,"envelopeContainsItemType");function t(C){return g.GLOBAL_OBJ.__SENTRY__&&g.GLOBAL_OBJ.__SENTRY__.encodePolyfill?g.GLOBAL_OBJ.__SENTRY__.encodePolyfill(C):new TextEncoder().encode(C)}n(t,"encodeUTF8");function r(C){return g.GLOBAL_OBJ.__SENTRY__&&g.GLOBAL_OBJ.__SENTRY__.decodePolyfill?g.GLOBAL_OBJ.__SENTRY__.decodePolyfill(C):new TextDecoder().decode(C)}n(r,"decodeUTF8");function o(C){const[w,R]=C;let O=JSON.stringify(w);function D(I){typeof O=="string"?O=typeof I=="string"?O+I:[t(O),I]:O.push(typeof I=="string"?t(I):I)}n(D,"append");for(const I of R){const[M,k]=I;if(D(`
${JSON.stringify(M)}
`),typeof k=="string"||k instanceof Uint8Array)D(k);else{let N;try{N=JSON.stringify(k)}catch{N=JSON.stringify(m.normalize(k))}D(N)}}return typeof O=="string"?O:f(O)}n(o,"serializeEnvelope");function f(C){const w=C.reduce((D,I)=>D+I.length,0),R=new Uint8Array(w);let O=0;for(const D of C)R.set(D,O),O+=D.length;return R}n(f,"concatBuffers");function h(C){let w=typeof C=="string"?t(C):C;function R(M){const k=w.subarray(0,M);return w=w.subarray(M+1),k}n(R,"readBinary");function O(){let M=w.indexOf(10);return M<0&&(M=w.length),JSON.parse(r(R(M)))}n(O,"readJson");const D=O(),I=[];for(;w.length;){const M=O(),k=typeof M.length=="number"?M.length:void 0;I.push([M,k?R(k):O()])}return[D,I]}n(h,"parseEnvelope");function p(C){return[{type:"span"},C]}n(p,"createSpanEnvelopeItem");function d(C){const w=typeof C.data=="string"?t(C.data):C.data;return[v.dropUndefinedKeys({type:"attachment",length:w.length,filename:C.filename,content_type:C.contentType,attachment_type:C.attachmentType}),w]}n(d,"createAttachmentEnvelopeItem");const y={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function S(C){return y[C]}n(S,"envelopeItemTypeToDataCategory");function b(C){if(!C||!C.sdk)return;const{name:w,version:R}=C.sdk;return{name:w,version:R}}n(b,"getSdkMetadataForEnvelopeHeader");function _(C,w,R,O){const D=C.sdkProcessingMetadata&&C.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:C.event_id,sent_at:new Date().toISOString(),...w&&{sdk:w},...!!R&&O&&{dsn:u.dsnToString(O)},...D&&{trace:v.dropUndefinedKeys({...D})}}}n(_,"createEventEnvelopeHeaders"),l.addItemToEnvelope=a,l.createAttachmentEnvelopeItem=d,l.createEnvelope=s,l.createEventEnvelopeHeaders=_,l.createSpanEnvelopeItem=p,l.envelopeContainsItemType=e,l.envelopeItemTypeToDataCategory=S,l.forEachEnvelopeItem=i,l.getSdkMetadataForEnvelopeHeader=b,l.parseEnvelope=h,l.serializeEnvelope=o},4759164024:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});class c extends Error{constructor(m,v="warn"){super(m),this.message=m,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=v}}n(c,"SentryError"),l.SentryError=c},1705974933:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(5330804994),m=c(4360077466),v=c(6371465633),g=c(5247061117);function s(h,p){return h(p.stack||"",1)}n(s,"parseStackFrames");function a(h,p){const d={type:p.name||p.constructor.name,value:p.message},y=s(h,p);return y.length&&(d.stacktrace={frames:y}),d}n(a,"exceptionFromError");function i(h){for(const p in h)if(Object.prototype.hasOwnProperty.call(h,p)){const d=h[p];if(d instanceof Error)return d}}n(i,"getErrorPropertyFromObject");function e(h){if("name"in h&&typeof h.name=="string"){let y=`'${h.name}' captured as exception`;return"message"in h&&typeof h.message=="string"&&(y+=` with message '${h.message}'`),y}else if("message"in h&&typeof h.message=="string")return h.message;const p=g.extractExceptionKeysForMessage(h);if(u.isErrorEvent(h))return`Event \`ErrorEvent\` captured as exception with message \`${h.message}\``;const d=t(h);return`${d&&d!=="Object"?`'${d}'`:"Object"} captured as exception with keys: ${p}`}n(e,"getMessageForObject");function t(h){try{const p=Object.getPrototypeOf(h);return p?p.constructor.name:void 0}catch{}}n(t,"getObjectClassName");function r(h,p,d,y){if(u.isError(d))return[d,void 0];if(p.synthetic=!0,u.isPlainObject(d)){const b=h&&h.getOptions().normalizeDepth,_={__serialized__:v.normalizeToSize(d,b)},C=i(d);if(C)return[C,_];const w=e(d),R=y&&y.syntheticException||new Error(w);return R.message=w,[R,_]}const S=y&&y.syntheticException||new Error(d);return S.message=`${d}`,[S,void 0]}n(r,"getException");function o(h,p,d,y){const b=y&&y.data&&y.data.mechanism||{handled:!0,type:"generic"},[_,C]=r(h,b,d,y),w={exception:{values:[a(p,_)]}};return C&&(w.extra=C),m.addExceptionTypeValue(w,void 0,void 0),m.addExceptionMechanism(w,b),{...w,event_id:y&&y.event_id}}n(o,"eventFromUnknownInput");function f(h,p,d="info",y,S){const b={event_id:y&&y.event_id,level:d};if(S&&y&&y.syntheticException){const _=s(h,y.syntheticException);_.length&&(b.exception={values:[{value:p,stacktrace:{frames:_}}]})}if(u.isParameterizedString(p)){const{__sentry_template_string__:_,__sentry_template_values__:C}=p;return b.logentry={message:_,params:C},b}return b.message=p,b}n(f,"eventFromMessage"),l.eventFromMessage=f,l.eventFromUnknownInput=o,l.exceptionFromError=a,l.parseStackFrames=s},7563271614:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(4916261515),m=c(9550996546),v=c(8314282351),g=c(4759164024),s=c(1108286465),a=c(3619233697),i=c(3178410512),e=c(5878142463),t=c(5817852989),r=c(7839211009),o=c(5330804994),f=c(4304701770),h=c(3610150206),p=c(47787884),d=c(4360077466),y=c(1552363198),S=c(6371465633),b=c(5247061117),_=c(4764604189),C=c(3193811597),w=c(4846555271),R=c(5043703765),O=c(9955566551),D=c(6005876151),I=c(9996838991),M=c(8265793926),k=c(2435760602),N=c(2174399055),j=c(6123212092),B=c(1390308333),J=c(688958166),Q=c(738620759),oe=c(277240735),$=c(8666696284),he=c(7216756807),Ae=c(4308130348),Ee=c(1705974933),Oe=c(999571021),be=c(6852308275),De=c(7961093924),ut=c(6639909989),St=c(8823822214),Rt=c(9137969200),Ze=c(3683597617),mt=c(2677927218),At=c(6250807085),Vt=c(7384544743);l.applyAggregateErrorsToEvent=u.applyAggregateErrorsToEvent,l.getComponentName=m.getComponentName,l.getDomElement=m.getDomElement,l.getLocationHref=m.getLocationHref,l.htmlTreeAsString=m.htmlTreeAsString,l.dsnFromString=v.dsnFromString,l.dsnToString=v.dsnToString,l.makeDsn=v.makeDsn,l.SentryError=g.SentryError,l.GLOBAL_OBJ=s.GLOBAL_OBJ,l.getGlobalSingleton=s.getGlobalSingleton,l.addConsoleInstrumentationHandler=a.addConsoleInstrumentationHandler,l.addFetchInstrumentationHandler=i.addFetchInstrumentationHandler,l.addGlobalErrorInstrumentationHandler=e.addGlobalErrorInstrumentationHandler,l.addGlobalUnhandledRejectionInstrumentationHandler=t.addGlobalUnhandledRejectionInstrumentationHandler,l.addHandler=r.addHandler,l.maybeInstrument=r.maybeInstrument,l.resetInstrumentationHandlers=r.resetInstrumentationHandlers,l.triggerHandlers=r.triggerHandlers,l.isDOMError=o.isDOMError,l.isDOMException=o.isDOMException,l.isElement=o.isElement,l.isError=o.isError,l.isErrorEvent=o.isErrorEvent,l.isEvent=o.isEvent,l.isInstanceOf=o.isInstanceOf,l.isParameterizedString=o.isParameterizedString,l.isPlainObject=o.isPlainObject,l.isPrimitive=o.isPrimitive,l.isRegExp=o.isRegExp,l.isString=o.isString,l.isSyntheticEvent=o.isSyntheticEvent,l.isThenable=o.isThenable,l.isVueViewModel=o.isVueViewModel,l.isBrowser=f.isBrowser,l.CONSOLE_LEVELS=h.CONSOLE_LEVELS,l.consoleSandbox=h.consoleSandbox,l.logger=h.logger,l.originalConsoleMethods=h.originalConsoleMethods,l.memoBuilder=p.memoBuilder,l.addContextToFrame=d.addContextToFrame,l.addExceptionMechanism=d.addExceptionMechanism,l.addExceptionTypeValue=d.addExceptionTypeValue,l.arrayify=d.arrayify,l.checkOrSetAlreadyCaught=d.checkOrSetAlreadyCaught,l.getEventDescription=d.getEventDescription,l.parseSemver=d.parseSemver,l.uuid4=d.uuid4,l.dynamicRequire=y.dynamicRequire,l.isNodeEnv=y.isNodeEnv,l.loadModule=y.loadModule,l.normalize=S.normalize,l.normalizeToSize=S.normalizeToSize,l.normalizeUrlToBase=S.normalizeUrlToBase,l.addNonEnumerableProperty=b.addNonEnumerableProperty,l.convertToPlainObject=b.convertToPlainObject,l.dropUndefinedKeys=b.dropUndefinedKeys,l.extractExceptionKeysForMessage=b.extractExceptionKeysForMessage,l.fill=b.fill,l.getOriginalFunction=b.getOriginalFunction,l.markFunctionWrapped=b.markFunctionWrapped,l.objectify=b.objectify,l.urlEncode=b.urlEncode,l.basename=_.basename,l.dirname=_.dirname,l.isAbsolute=_.isAbsolute,l.join=_.join,l.normalizePath=_.normalizePath,l.relative=_.relative,l.resolve=_.resolve,l.makePromiseBuffer=C.makePromiseBuffer,l.DEFAULT_USER_INCLUDES=w.DEFAULT_USER_INCLUDES,l.addRequestDataToEvent=w.addRequestDataToEvent,l.extractPathForTransaction=w.extractPathForTransaction,l.extractRequestData=w.extractRequestData,l.winterCGHeadersToDict=w.winterCGHeadersToDict,l.winterCGRequestToRequestData=w.winterCGRequestToRequestData,l.severityLevelFromString=R.severityLevelFromString,l.validSeverityLevels=R.validSeverityLevels,l.UNKNOWN_FUNCTION=O.UNKNOWN_FUNCTION,l.createStackParser=O.createStackParser,l.getFunctionName=O.getFunctionName,l.stackParserFromStackParserOptions=O.stackParserFromStackParserOptions,l.stripSentryFramesAndReverse=O.stripSentryFramesAndReverse,l.filenameIsInApp=D.filenameIsInApp,l.node=D.node,l.nodeStackLineParser=D.nodeStackLineParser,l.isMatchingPattern=I.isMatchingPattern,l.safeJoin=I.safeJoin,l.snipLine=I.snipLine,l.stringMatchesSomePattern=I.stringMatchesSomePattern,l.truncate=I.truncate,l.isNativeFetch=M.isNativeFetch,l.supportsDOMError=M.supportsDOMError,l.supportsDOMException=M.supportsDOMException,l.supportsErrorEvent=M.supportsErrorEvent,l.supportsFetch=M.supportsFetch,l.supportsNativeFetch=M.supportsNativeFetch,l.supportsReferrerPolicy=M.supportsReferrerPolicy,l.supportsReportingObserver=M.supportsReportingObserver,l.SyncPromise=k.SyncPromise,l.rejectedSyncPromise=k.rejectedSyncPromise,l.resolvedSyncPromise=k.resolvedSyncPromise,Object.defineProperty(l,"_browserPerformanceTimeOriginMode",{enumerable:!0,get:()=>N._browserPerformanceTimeOriginMode}),l.browserPerformanceTimeOrigin=N.browserPerformanceTimeOrigin,l.dateTimestampInSeconds=N.dateTimestampInSeconds,l.timestampInSeconds=N.timestampInSeconds,l.TRACEPARENT_REGEXP=j.TRACEPARENT_REGEXP,l.extractTraceparentData=j.extractTraceparentData,l.generateSentryTraceHeader=j.generateSentryTraceHeader,l.propagationContextFromHeaders=j.propagationContextFromHeaders,l.getSDKSource=B.getSDKSource,l.isBrowserBundle=B.isBrowserBundle,l.addItemToEnvelope=J.addItemToEnvelope,l.createAttachmentEnvelopeItem=J.createAttachmentEnvelopeItem,l.createEnvelope=J.createEnvelope,l.createEventEnvelopeHeaders=J.createEventEnvelopeHeaders,l.createSpanEnvelopeItem=J.createSpanEnvelopeItem,l.envelopeContainsItemType=J.envelopeContainsItemType,l.envelopeItemTypeToDataCategory=J.envelopeItemTypeToDataCategory,l.forEachEnvelopeItem=J.forEachEnvelopeItem,l.getSdkMetadataForEnvelopeHeader=J.getSdkMetadataForEnvelopeHeader,l.parseEnvelope=J.parseEnvelope,l.serializeEnvelope=J.serializeEnvelope,l.createClientReportEnvelope=Q.createClientReportEnvelope,l.DEFAULT_RETRY_AFTER=oe.DEFAULT_RETRY_AFTER,l.disabledUntil=oe.disabledUntil,l.isRateLimited=oe.isRateLimited,l.parseRetryAfterHeader=oe.parseRetryAfterHeader,l.updateRateLimits=oe.updateRateLimits,l.BAGGAGE_HEADER_NAME=$.BAGGAGE_HEADER_NAME,l.MAX_BAGGAGE_STRING_LENGTH=$.MAX_BAGGAGE_STRING_LENGTH,l.SENTRY_BAGGAGE_KEY_PREFIX=$.SENTRY_BAGGAGE_KEY_PREFIX,l.SENTRY_BAGGAGE_KEY_PREFIX_REGEX=$.SENTRY_BAGGAGE_KEY_PREFIX_REGEX,l.baggageHeaderToDynamicSamplingContext=$.baggageHeaderToDynamicSamplingContext,l.dynamicSamplingContextToSentryBaggageHeader=$.dynamicSamplingContextToSentryBaggageHeader,l.parseBaggageHeader=$.parseBaggageHeader,l.getNumberOfUrlSegments=he.getNumberOfUrlSegments,l.getSanitizedUrlString=he.getSanitizedUrlString,l.parseUrl=he.parseUrl,l.stripUrlQueryAndFragment=he.stripUrlQueryAndFragment,l.makeFifoCache=Ae.makeFifoCache,l.eventFromMessage=Ee.eventFromMessage,l.eventFromUnknownInput=Ee.eventFromUnknownInput,l.exceptionFromError=Ee.exceptionFromError,l.parseStackFrames=Ee.parseStackFrames,l.callFrameToStackFrame=Oe.callFrameToStackFrame,l.watchdogTimer=Oe.watchdogTimer,l.LRUMap=be.LRUMap,l._asyncNullishCoalesce=De._asyncNullishCoalesce,l._asyncOptionalChain=ut._asyncOptionalChain,l._asyncOptionalChainDelete=St._asyncOptionalChainDelete,l._nullishCoalesce=Rt._nullishCoalesce,l._optionalChain=Ze._optionalChain,l._optionalChainDelete=mt._optionalChainDelete,l.escapeStringForRegex=At.escapeStringForRegex,l.supportsHistory=Vt.supportsHistory},3619233697:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(3610150206),m=c(5247061117),v=c(1108286465),g=c(7839211009);function s(i){const e="console";g.addHandler(e,i),g.maybeInstrument(e,a)}n(s,"addConsoleInstrumentationHandler");function a(){"console"in v.GLOBAL_OBJ&&u.CONSOLE_LEVELS.forEach(function(i){i in v.GLOBAL_OBJ.console&&m.fill(v.GLOBAL_OBJ.console,i,function(e){return u.originalConsoleMethods[i]=e,function(...t){const r={args:t,level:i};g.triggerHandlers("console",r);const o=u.originalConsoleMethods[i];o&&o.apply(v.GLOBAL_OBJ.console,t)}})})}n(a,"instrumentConsole"),l.addConsoleInstrumentationHandler=s},3178410512:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(5247061117),m=c(8265793926),v=c(2174399055),g=c(1108286465),s=c(7839211009);function a(o){const f="fetch";s.addHandler(f,o),s.maybeInstrument(f,i)}n(a,"addFetchInstrumentationHandler");function i(){m.supportsNativeFetch()&&u.fill(g.GLOBAL_OBJ,"fetch",function(o){return function(...f){const{method:h,url:p}=r(f),d={args:f,fetchData:{method:h,url:p},startTimestamp:v.timestampInSeconds()*1e3};return s.triggerHandlers("fetch",{...d}),o.apply(g.GLOBAL_OBJ,f).then(y=>{const S={...d,endTimestamp:v.timestampInSeconds()*1e3,response:y};return s.triggerHandlers("fetch",S),y},y=>{const S={...d,endTimestamp:v.timestampInSeconds()*1e3,error:y};throw s.triggerHandlers("fetch",S),y})}})}n(i,"instrumentFetch");function e(o,f){return!!o&&typeof o=="object"&&!!o[f]}n(e,"hasProp");function t(o){return typeof o=="string"?o:o?e(o,"url")?o.url:o.toString?o.toString():"":""}n(t,"getUrlFromResource");function r(o){if(o.length===0)return{method:"GET",url:""};if(o.length===2){const[h,p]=o;return{url:t(h),method:e(p,"method")?String(p.method).toUpperCase():"GET"}}const f=o[0];return{url:t(f),method:e(f,"method")?String(f.method).toUpperCase():"GET"}}n(r,"parseFetchArgs"),l.addFetchInstrumentationHandler=a,l.parseFetchArgs=r},5878142463:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(1108286465),m=c(7839211009);let v=null;function g(a){const i="error";m.addHandler(i,a),m.maybeInstrument(i,s)}n(g,"addGlobalErrorInstrumentationHandler");function s(){v=u.GLOBAL_OBJ.onerror,u.GLOBAL_OBJ.onerror=function(a,i,e,t,r){const o={column:t,error:r,line:e,msg:a,url:i};return m.triggerHandlers("error",o),v&&!v.__SENTRY_LOADER__?v.apply(this,arguments):!1},u.GLOBAL_OBJ.onerror.__SENTRY_INSTRUMENTED__=!0}n(s,"instrumentError"),l.addGlobalErrorInstrumentationHandler=g},5817852989:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(1108286465),m=c(7839211009);let v=null;function g(a){const i="unhandledrejection";m.addHandler(i,a),m.maybeInstrument(i,s)}n(g,"addGlobalUnhandledRejectionInstrumentationHandler");function s(){v=u.GLOBAL_OBJ.onunhandledrejection,u.GLOBAL_OBJ.onunhandledrejection=function(a){const i=a;return m.triggerHandlers("unhandledrejection",i),v&&!v.__SENTRY_LOADER__?v.apply(this,arguments):!0},u.GLOBAL_OBJ.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}n(s,"instrumentUnhandledRejection"),l.addGlobalUnhandledRejectionInstrumentationHandler=g},7839211009:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(1795624184),m=c(3610150206),v=c(9955566551),g={},s={};function a(r,o){g[r]=g[r]||[],g[r].push(o)}n(a,"addHandler");function i(){Object.keys(g).forEach(r=>{g[r]=void 0})}n(i,"resetInstrumentationHandlers");function e(r,o){s[r]||(o(),s[r]=!0)}n(e,"maybeInstrument");function t(r,o){const f=r&&g[r];if(f)for(const h of f)try{h(o)}catch(p){u.DEBUG_BUILD&&m.logger.error(`Error while triggering instrumentation handler.
Type: ${r}
Name: ${v.getFunctionName(h)}
Error:`,p)}}n(t,"triggerHandlers"),l.addHandler=a,l.maybeInstrument=e,l.resetInstrumentationHandlers=i,l.triggerHandlers=t},5330804994:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=Object.prototype.toString;function u(S){switch(c.call(S)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return d(S,Error)}}n(u,"isError");function m(S,b){return c.call(S)===`[object ${b}]`}n(m,"isBuiltin");function v(S){return m(S,"ErrorEvent")}n(v,"isErrorEvent");function g(S){return m(S,"DOMError")}n(g,"isDOMError");function s(S){return m(S,"DOMException")}n(s,"isDOMException");function a(S){return m(S,"String")}n(a,"isString");function i(S){return typeof S=="object"&&S!==null&&"__sentry_template_string__"in S&&"__sentry_template_values__"in S}n(i,"isParameterizedString");function e(S){return S===null||i(S)||typeof S!="object"&&typeof S!="function"}n(e,"isPrimitive");function t(S){return m(S,"Object")}n(t,"isPlainObject");function r(S){return typeof Event<"u"&&d(S,Event)}n(r,"isEvent");function o(S){return typeof Element<"u"&&d(S,Element)}n(o,"isElement");function f(S){return m(S,"RegExp")}n(f,"isRegExp");function h(S){return Boolean(S&&S.then&&typeof S.then=="function")}n(h,"isThenable");function p(S){return t(S)&&"nativeEvent"in S&&"preventDefault"in S&&"stopPropagation"in S}n(p,"isSyntheticEvent");function d(S,b){try{return S instanceof b}catch{return!1}}n(d,"isInstanceOf");function y(S){return!!(typeof S=="object"&&S!==null&&(S.__isVue||S._isVue))}n(y,"isVueViewModel"),l.isDOMError=g,l.isDOMException=s,l.isElement=o,l.isError=u,l.isErrorEvent=v,l.isEvent=r,l.isInstanceOf=d,l.isParameterizedString=i,l.isPlainObject=t,l.isPrimitive=e,l.isRegExp=f,l.isString=a,l.isSyntheticEvent=p,l.isThenable=h,l.isVueViewModel=y},4304701770:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(1552363198),m=c(1108286465);function v(){return typeof window<"u"&&(!u.isNodeEnv()||g())}n(v,"isBrowser");function g(){return m.GLOBAL_OBJ.process!==void 0&&m.GLOBAL_OBJ.process.type==="renderer"}n(g,"isElectronNodeRenderer"),l.isBrowser=v},3610150206:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(1795624184),m=c(1108286465),v="Sentry Logger ",g=["debug","info","warn","error","log","assert","trace"],s={};function a(t){if(!("console"in m.GLOBAL_OBJ))return t();const r=m.GLOBAL_OBJ.console,o={},f=Object.keys(s);f.forEach(h=>{const p=s[h];o[h]=r[h],r[h]=p});try{return t()}finally{f.forEach(h=>{r[h]=o[h]})}}n(a,"consoleSandbox");function i(){let t=!1;const r={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return u.DEBUG_BUILD?g.forEach(o=>{r[o]=(...f)=>{t&&a(()=>{m.GLOBAL_OBJ.console[o](`${v}[${o}]:`,...f)})}}):g.forEach(o=>{r[o]=()=>{}}),r}n(i,"makeLogger");const e=i();l.CONSOLE_LEVELS=g,l.consoleSandbox=a,l.logger=e,l.originalConsoleMethods=s},6852308275:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});class c{constructor(m){this._maxSize=m,this._cache=new Map}get size(){return this._cache.size}get(m){const v=this._cache.get(m);if(v!==void 0)return this._cache.delete(m),this._cache.set(m,v),v}set(m,v){this._cache.size>=this._maxSize&&this._cache.delete(this._cache.keys().next().value),this._cache.set(m,v)}remove(m){const v=this._cache.get(m);return v&&this._cache.delete(m),v}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){const m=[];return this._cache.forEach(v=>m.push(v)),m}}n(c,"LRUMap"),l.LRUMap=c},47787884:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function c(){const u=typeof WeakSet=="function",m=u?new WeakSet:[];function v(s){if(u)return m.has(s)?!0:(m.add(s),!1);for(let a=0;a<m.length;a++)if(m[a]===s)return!0;return m.push(s),!1}n(v,"memoize");function g(s){if(u)m.delete(s);else for(let a=0;a<m.length;a++)if(m[a]===s){m.splice(a,1);break}}return n(g,"unmemoize"),[v,g]}n(c,"memoBuilder"),l.memoBuilder=c},4360077466:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(5247061117),m=c(9996838991),v=c(1108286465);function g(){const p=v.GLOBAL_OBJ,d=p.crypto||p.msCrypto;let y=n(()=>Math.random()*16,"getRandomByte");try{if(d&&d.randomUUID)return d.randomUUID().replace(/-/g,"");d&&d.getRandomValues&&(y=n(()=>{const S=new Uint8Array(1);return d.getRandomValues(S),S[0]},"getRandomByte"))}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,S=>(S^(y()&15)>>S/4).toString(16))}n(g,"uuid4");function s(p){return p.exception&&p.exception.values?p.exception.values[0]:void 0}n(s,"getFirstException");function a(p){const{message:d,event_id:y}=p;if(d)return d;const S=s(p);return S?S.type&&S.value?`${S.type}: ${S.value}`:S.type||S.value||y||"<unknown>":y||"<unknown>"}n(a,"getEventDescription");function i(p,d,y){const S=p.exception=p.exception||{},b=S.values=S.values||[],_=b[0]=b[0]||{};_.value||(_.value=d||""),_.type||(_.type=y||"Error")}n(i,"addExceptionTypeValue");function e(p,d){const y=s(p);if(!y)return;const S={type:"generic",handled:!0},b=y.mechanism;if(y.mechanism={...S,...b,...d},d&&"data"in d){const _={...b&&b.data,...d.data};y.mechanism.data=_}}n(e,"addExceptionMechanism");const t=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function r(p){const d=p.match(t)||[],y=parseInt(d[1],10),S=parseInt(d[2],10),b=parseInt(d[3],10);return{buildmetadata:d[5],major:isNaN(y)?void 0:y,minor:isNaN(S)?void 0:S,patch:isNaN(b)?void 0:b,prerelease:d[4]}}n(r,"parseSemver");function o(p,d,y=5){if(d.lineno===void 0)return;const S=p.length,b=Math.max(Math.min(S-1,d.lineno-1),0);d.pre_context=p.slice(Math.max(0,b-y),b).map(_=>m.snipLine(_,0)),d.context_line=m.snipLine(p[Math.min(S-1,b)],d.colno||0),d.post_context=p.slice(Math.min(b+1,S),b+1+y).map(_=>m.snipLine(_,0))}n(o,"addContextToFrame");function f(p){if(p&&p.__sentry_captured__)return!0;try{u.addNonEnumerableProperty(p,"__sentry_captured__",!0)}catch{}return!1}n(f,"checkOrSetAlreadyCaught");function h(p){return Array.isArray(p)?p:[p]}n(h,"arrayify"),l.addContextToFrame=o,l.addExceptionMechanism=e,l.addExceptionTypeValue=i,l.arrayify=h,l.checkOrSetAlreadyCaught=f,l.getEventDescription=a,l.parseSemver=r,l.uuid4=g},6005876151:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(9955566551);function m(s,a=!1){return!(a||s&&!s.startsWith("/")&&!s.match(/^[A-Z]:/)&&!s.startsWith(".")&&!s.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&s!==void 0&&!s.includes("node_modules/")}n(m,"filenameIsInApp");function v(s){const a=/^\s*[-]{4,}$/,i=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return e=>{const t=e.match(i);if(t){let r,o,f,h,p;if(t[1]){f=t[1];let S=f.lastIndexOf(".");if(f[S-1]==="."&&S--,S>0){r=f.slice(0,S),o=f.slice(S+1);const b=r.indexOf(".Module");b>0&&(f=f.slice(b+1),r=r.slice(0,b))}h=void 0}o&&(h=r,p=o),o==="<anonymous>"&&(p=void 0,f=void 0),f===void 0&&(p=p||u.UNKNOWN_FUNCTION,f=h?`${h}.${p}`:p);let d=t[2]&&t[2].startsWith("file://")?t[2].slice(7):t[2];const y=t[5]==="native";return d&&d.match(/\/[A-Z]:/)&&(d=d.slice(1)),!d&&t[5]&&!y&&(d=t[5]),{filename:d,module:s?s(d):void 0,function:f,lineno:parseInt(t[3],10)||void 0,colno:parseInt(t[4],10)||void 0,in_app:m(d,y)}}if(e.match(a))return{filename:e}}}n(v,"node");function g(s){return[90,v(s)]}n(g,"nodeStackLineParser"),l.filenameIsInApp=m,l.node=v,l.nodeStackLineParser=g},1552363198:(H,l,c)=>{H=c.nmd(H),Object.defineProperty(l,"__esModule",{value:!0});const u=c(1390308333);function m(){return!u.isBrowserBundle()&&Object.prototype.toString.call(0)==="[object process]"}n(m,"isNodeEnv");function v(s,a){return s.require(a)}n(v,"dynamicRequire");function g(s){let a;try{a=v(H,s)}catch{}try{const{cwd:i}=v(H,"process");a=v(H,`${i()}/node_modules/${s}`)}catch{}return a}n(g,"loadModule"),l.dynamicRequire=v,l.isNodeEnv=m,l.loadModule=g},6371465633:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(5330804994),m=c(47787884),v=c(5247061117),g=c(9955566551);function s(h,p=100,d=1/0){try{return i("",h,p,d)}catch(y){return{ERROR:`**non-serializable** (${y})`}}}n(s,"normalize");function a(h,p=3,d=100*1024){const y=s(h,p);return o(y)>d?a(h,p-1,d):y}n(a,"normalizeToSize");function i(h,p,d=1/0,y=1/0,S=m.memoBuilder()){const[b,_]=S;if(p==null||["number","boolean","string"].includes(typeof p)&&!Number.isNaN(p))return p;const C=e(h,p);if(!C.startsWith("[object "))return C;if(p.__sentry_skip_normalization__)return p;const w=typeof p.__sentry_override_normalization_depth__=="number"?p.__sentry_override_normalization_depth__:d;if(w===0)return C.replace("object ","");if(b(p))return"[Circular ~]";const R=p;if(R&&typeof R.toJSON=="function")try{const M=R.toJSON();return i("",M,w-1,y,S)}catch{}const O=Array.isArray(p)?[]:{};let D=0;const I=v.convertToPlainObject(p);for(const M in I){if(!Object.prototype.hasOwnProperty.call(I,M))continue;if(D>=y){O[M]="[MaxProperties ~]";break}const k=I[M];O[M]=i(M,k,w-1,y,S),D++}return _(p),O}n(i,"visit");function e(h,p){try{if(h==="domain"&&p&&typeof p=="object"&&p._events)return"[Domain]";if(h==="domainEmitter")return"[DomainEmitter]";if(typeof c.g<"u"&&p===c.g)return"[Global]";if(typeof window<"u"&&p===window)return"[Window]";if(typeof document<"u"&&p===document)return"[Document]";if(u.isVueViewModel(p))return"[VueViewModel]";if(u.isSyntheticEvent(p))return"[SyntheticEvent]";if(typeof p=="number"&&p!==p)return"[NaN]";if(typeof p=="function")return`[Function: ${g.getFunctionName(p)}]`;if(typeof p=="symbol")return`[${String(p)}]`;if(typeof p=="bigint")return`[BigInt: ${String(p)}]`;const d=t(p);return/^HTML(\w*)Element$/.test(d)?`[HTMLElement: ${d}]`:`[object ${d}]`}catch(d){return`**non-serializable** (${d})`}}n(e,"stringifyValue");function t(h){const p=Object.getPrototypeOf(h);return p?p.constructor.name:"null prototype"}n(t,"getConstructorName");function r(h){return~-encodeURI(h).split(/%..|./).length}n(r,"utf8Length");function o(h){return r(JSON.stringify(h))}n(o,"jsonSize");function f(h,p){const d=p.replace(/\\/g,"/").replace(/[|\\{}()[\]^$+*?.]/g,"\\$&");let y=h;try{y=decodeURI(h)}catch{}return y.replace(/\\/g,"/").replace(/webpack:\/?/g,"").replace(new RegExp(`(file://)?/*${d}/*`,"ig"),"app:///")}n(f,"normalizeUrlToBase"),l.normalize=s,l.normalizeToSize=a,l.normalizeUrlToBase=f},5247061117:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(9550996546),m=c(1795624184),v=c(5330804994),g=c(3610150206),s=c(9996838991);function a(_,C,w){if(!(C in _))return;const R=_[C],O=w(R);typeof O=="function"&&e(O,R),_[C]=O}n(a,"fill");function i(_,C,w){try{Object.defineProperty(_,C,{value:w,writable:!0,configurable:!0})}catch{m.DEBUG_BUILD&&g.logger.log(`Failed to add non-enumerable property "${C}" to object`,_)}}n(i,"addNonEnumerableProperty");function e(_,C){try{const w=C.prototype||{};_.prototype=C.prototype=w,i(_,"__sentry_original__",C)}catch{}}n(e,"markFunctionWrapped");function t(_){return _.__sentry_original__}n(t,"getOriginalFunction");function r(_){return Object.keys(_).map(C=>`${encodeURIComponent(C)}=${encodeURIComponent(_[C])}`).join("&")}n(r,"urlEncode");function o(_){if(v.isError(_))return{message:_.message,name:_.name,stack:_.stack,...h(_)};if(v.isEvent(_)){const C={type:_.type,target:f(_.target),currentTarget:f(_.currentTarget),...h(_)};return typeof CustomEvent<"u"&&v.isInstanceOf(_,CustomEvent)&&(C.detail=_.detail),C}else return _}n(o,"convertToPlainObject");function f(_){try{return v.isElement(_)?u.htmlTreeAsString(_):Object.prototype.toString.call(_)}catch{return"<unknown>"}}n(f,"serializeEventTarget");function h(_){if(typeof _=="object"&&_!==null){const C={};for(const w in _)Object.prototype.hasOwnProperty.call(_,w)&&(C[w]=_[w]);return C}else return{}}n(h,"getOwnProperties");function p(_,C=40){const w=Object.keys(o(_));if(w.sort(),!w.length)return"[object has no keys]";if(w[0].length>=C)return s.truncate(w[0],C);for(let R=w.length;R>0;R--){const O=w.slice(0,R).join(", ");if(!(O.length>C))return R===w.length?O:s.truncate(O,C)}return""}n(p,"extractExceptionKeysForMessage");function d(_){return y(_,new Map)}n(d,"dropUndefinedKeys");function y(_,C){if(S(_)){const w=C.get(_);if(w!==void 0)return w;const R={};C.set(_,R);for(const O of Object.keys(_))typeof _[O]<"u"&&(R[O]=y(_[O],C));return R}if(Array.isArray(_)){const w=C.get(_);if(w!==void 0)return w;const R=[];return C.set(_,R),_.forEach(O=>{R.push(y(O,C))}),R}return _}n(y,"_dropUndefinedKeys");function S(_){if(!v.isPlainObject(_))return!1;try{const C=Object.getPrototypeOf(_).constructor.name;return!C||C==="Object"}catch{return!0}}n(S,"isPojo");function b(_){let C;switch(!0){case _==null:C=new String(_);break;case(typeof _=="symbol"||typeof _=="bigint"):C=Object(_);break;case v.isPrimitive(_):C=new _.constructor(_);break;default:C=_;break}return C}n(b,"objectify"),l.addNonEnumerableProperty=i,l.convertToPlainObject=o,l.dropUndefinedKeys=d,l.extractExceptionKeysForMessage=p,l.fill=a,l.getOriginalFunction=t,l.markFunctionWrapped=e,l.objectify=b,l.urlEncode=r},4764604189:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function c(o,f){let h=0;for(let p=o.length-1;p>=0;p--){const d=o[p];d==="."?o.splice(p,1):d===".."?(o.splice(p,1),h++):h&&(o.splice(p,1),h--)}if(f)for(;h--;h)o.unshift("..");return o}n(c,"normalizeArray");const u=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function m(o){const f=o.length>1024?`<truncated>${o.slice(-1024)}`:o,h=u.exec(f);return h?h.slice(1):[]}n(m,"splitPath");function v(...o){let f="",h=!1;for(let p=o.length-1;p>=-1&&!h;p--){const d=p>=0?o[p]:"/";d&&(f=`${d}/${f}`,h=d.charAt(0)==="/")}return f=c(f.split("/").filter(p=>!!p),!h).join("/"),(h?"/":"")+f||"."}n(v,"resolve");function g(o){let f=0;for(;f<o.length&&o[f]==="";f++);let h=o.length-1;for(;h>=0&&o[h]==="";h--);return f>h?[]:o.slice(f,h-f+1)}n(g,"trim");function s(o,f){o=v(o).slice(1),f=v(f).slice(1);const h=g(o.split("/")),p=g(f.split("/")),d=Math.min(h.length,p.length);let y=d;for(let b=0;b<d;b++)if(h[b]!==p[b]){y=b;break}let S=[];for(let b=y;b<h.length;b++)S.push("..");return S=S.concat(p.slice(y)),S.join("/")}n(s,"relative");function a(o){const f=i(o),h=o.slice(-1)==="/";let p=c(o.split("/").filter(d=>!!d),!f).join("/");return!p&&!f&&(p="."),p&&h&&(p+="/"),(f?"/":"")+p}n(a,"normalizePath");function i(o){return o.charAt(0)==="/"}n(i,"isAbsolute");function e(...o){return a(o.join("/"))}n(e,"join");function t(o){const f=m(o),h=f[0];let p=f[1];return!h&&!p?".":(p&&(p=p.slice(0,p.length-1)),h+p)}n(t,"dirname");function r(o,f){let h=m(o)[2];return f&&h.slice(f.length*-1)===f&&(h=h.slice(0,h.length-f.length)),h}n(r,"basename"),l.basename=r,l.dirname=t,l.isAbsolute=i,l.join=e,l.normalizePath=a,l.relative=s,l.resolve=v},3193811597:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(4759164024),m=c(2435760602);function v(g){const s=[];function a(){return g===void 0||s.length<g}n(a,"isReady");function i(r){return s.splice(s.indexOf(r),1)[0]}n(i,"remove");function e(r){if(!a())return m.rejectedSyncPromise(new u.SentryError("Not adding Promise because buffer limit was reached."));const o=r();return s.indexOf(o)===-1&&s.push(o),o.then(()=>i(o)).then(null,()=>i(o).then(null,()=>{})),o}n(e,"add");function t(r){return new m.SyncPromise((o,f)=>{let h=s.length;if(!h)return o(!0);const p=setTimeout(()=>{r&&r>0&&o(!1)},r);s.forEach(d=>{m.resolvedSyncPromise(d).then(()=>{--h||(clearTimeout(p),o(!0))},f)})})}return n(t,"drain"),{$:s,add:e,drain:t}}n(v,"makePromiseBuffer"),l.makePromiseBuffer=v},277240735:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=60*1e3;function u(s,a=Date.now()){const i=parseInt(`${s}`,10);if(!isNaN(i))return i*1e3;const e=Date.parse(`${s}`);return isNaN(e)?c:e-a}n(u,"parseRetryAfterHeader");function m(s,a){return s[a]||s.all||0}n(m,"disabledUntil");function v(s,a,i=Date.now()){return m(s,a)>i}n(v,"isRateLimited");function g(s,{statusCode:a,headers:i},e=Date.now()){const t={...s},r=i&&i["x-sentry-rate-limits"],o=i&&i["retry-after"];if(r)for(const f of r.trim().split(",")){const[h,p,,,d]=f.split(":",5),y=parseInt(h,10),S=(isNaN(y)?60:y)*1e3;if(!p)t.all=e+S;else for(const b of p.split(";"))b==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(t[b]=e+S):t[b]=e+S}else o?t.all=e+u(o,e):a===429&&(t.all=e+60*1e3);return t}n(g,"updateRateLimits"),l.DEFAULT_RETRY_AFTER=c,l.disabledUntil=m,l.isRateLimited=v,l.parseRetryAfterHeader=u,l.updateRateLimits=g},4846555271:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(9687986872),m=c(1795624184),v=c(5330804994),g=c(3610150206),s=c(6371465633),a=c(7216756807),i={ip:!1,request:!0,transaction:!0,user:!0},e=["cookies","data","headers","method","query_string","url"],t=["id","username","email"];function r(b,_={}){const C=b.method&&b.method.toUpperCase();let w="",R="url";_.customRoute||b.route?(w=_.customRoute||`${b.baseUrl||""}${b.route&&b.route.path}`,R="route"):(b.originalUrl||b.url)&&(w=a.stripUrlQueryAndFragment(b.originalUrl||b.url||""));let O="";return _.method&&C&&(O+=C),_.method&&_.path&&(O+=" "),_.path&&w&&(O+=w),[O,R]}n(r,"extractPathForTransaction");function o(b,_){switch(_){case"path":return r(b,{path:!0})[0];case"handler":return b.route&&b.route.stack&&b.route.stack[0]&&b.route.stack[0].name||"<anonymous>";case"methodPath":default:{const C=b._reconstructedRoute?b._reconstructedRoute:void 0;return r(b,{path:!0,method:!0,customRoute:C})[0]}}}n(o,"extractTransaction");function f(b,_){const C={};return(Array.isArray(_)?_:t).forEach(R=>{b&&R in b&&(C[R]=b[R])}),C}n(f,"extractUserData");function h(b,_){const{include:C=e}=_||{},w={},R=b.headers||{},O=b.method,D=R.host||b.hostname||b.host||"<no host>",I=b.protocol==="https"||b.socket&&b.socket.encrypted?"https":"http",M=b.originalUrl||b.url||"",k=M.startsWith(I)?M:`${I}://${D}${M}`;return C.forEach(N=>{switch(N){case"headers":{w.headers=R,C.includes("cookies")||delete w.headers.cookie;break}case"method":{w.method=O;break}case"url":{w.url=k;break}case"cookies":{w.cookies=b.cookies||R.cookie&&u.parseCookie(R.cookie)||{};break}case"query_string":{w.query_string=d(b);break}case"data":{if(O==="GET"||O==="HEAD")break;b.body!==void 0&&(w.data=v.isString(b.body)?b.body:JSON.stringify(s.normalize(b.body)));break}default:({}).hasOwnProperty.call(b,N)&&(w[N]=b[N])}}),w}n(h,"extractRequestData");function p(b,_,C){const w={...i,...C&&C.include};if(w.request){const R=Array.isArray(w.request)?h(_,{include:w.request}):h(_);b.request={...b.request,...R}}if(w.user){const R=_.user&&v.isPlainObject(_.user)?f(_.user,w.user):{};Object.keys(R).length&&(b.user={...b.user,...R})}if(w.ip){const R=_.ip||_.socket&&_.socket.remoteAddress;R&&(b.user={...b.user,ip_address:R})}return w.transaction&&!b.transaction&&b.type==="transaction"&&(b.transaction=o(_,w.transaction)),b}n(p,"addRequestDataToEvent");function d(b){let _=b.originalUrl||b.url||"";if(_){_.startsWith("/")&&(_=`http://dogs.are.great${_}`);try{const C=b.query||new URL(_).search.slice(1);return C.length?C:void 0}catch{return}}}n(d,"extractQueryParams");function y(b){const _={};try{b.forEach((C,w)=>{typeof C=="string"&&(_[w]=C)})}catch{m.DEBUG_BUILD&&g.logger.warn("Sentry failed extracting headers from a request object. If you see this, please file an issue.")}return _}n(y,"winterCGHeadersToDict");function S(b){const _=y(b.headers);return{method:b.method,url:b.url,headers:_}}n(S,"winterCGRequestToRequestData"),l.DEFAULT_USER_INCLUDES=t,l.addRequestDataToEvent=p,l.extractPathForTransaction=r,l.extractRequestData=h,l.winterCGHeadersToDict=y,l.winterCGRequestToRequestData=S},5043703765:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=["fatal","error","warning","log","info","debug"];function u(m){return m==="warn"?"warning":c.includes(m)?m:"log"}n(u,"severityLevelFromString"),l.severityLevelFromString=u,l.validSeverityLevels=c},9955566551:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=50,u="?",m=/\(error: (.*)\)/,v=/captureMessage|captureException/;function g(...t){const r=t.sort((o,f)=>o[0]-f[0]).map(o=>o[1]);return(o,f=0,h=0)=>{const p=[],d=o.split(`
`);for(let y=f;y<d.length;y++){const S=d[y];if(S.length>1024)continue;const b=m.test(S)?S.replace(m,"$1"):S;if(!b.match(/\S*Error: /)){for(const _ of r){const C=_(b);if(C){p.push(C);break}}if(p.length>=c+h)break}}return a(p.slice(h))}}n(g,"createStackParser");function s(t){return Array.isArray(t)?g(...t):t}n(s,"stackParserFromStackParserOptions");function a(t){if(!t.length)return[];const r=Array.from(t);return/sentryWrapped/.test(r[r.length-1].function||"")&&r.pop(),r.reverse(),v.test(r[r.length-1].function||"")&&(r.pop(),v.test(r[r.length-1].function||"")&&r.pop()),r.slice(0,c).map(o=>({...o,filename:o.filename||r[r.length-1].filename,function:o.function||u}))}n(a,"stripSentryFramesAndReverse");const i="<anonymous>";function e(t){try{return!t||typeof t!="function"?i:t.name||i}catch{return i}}n(e,"getFunctionName"),l.UNKNOWN_FUNCTION=u,l.createStackParser=g,l.getFunctionName=e,l.stackParserFromStackParserOptions=s,l.stripSentryFramesAndReverse=a},9996838991:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(5330804994);function m(i,e=0){return typeof i!="string"||e===0||i.length<=e?i:`${i.slice(0,e)}...`}n(m,"truncate");function v(i,e){let t=i;const r=t.length;if(r<=150)return t;e>r&&(e=r);let o=Math.max(e-60,0);o<5&&(o=0);let f=Math.min(o+140,r);return f>r-5&&(f=r),f===r&&(o=Math.max(f-140,0)),t=t.slice(o,f),o>0&&(t=`'{snip} ${t}`),f<r&&(t+=" {snip}"),t}n(v,"snipLine");function g(i,e){if(!Array.isArray(i))return"";const t=[];for(let r=0;r<i.length;r++){const o=i[r];try{u.isVueViewModel(o)?t.push("[VueViewModel]"):t.push(String(o))}catch{t.push("[value cannot be serialized]")}}return t.join(e)}n(g,"safeJoin");function s(i,e,t=!1){return u.isString(i)?u.isRegExp(e)?e.test(i):u.isString(e)?t?i===e:i.includes(e):!1:!1}n(s,"isMatchingPattern");function a(i,e=[],t=!1){return e.some(r=>s(i,r,t))}n(a,"stringMatchesSomePattern"),l.isMatchingPattern=s,l.safeJoin=g,l.snipLine=v,l.stringMatchesSomePattern=a,l.truncate=m},8265793926:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(1795624184),m=c(3610150206),g=c(1108286465).GLOBAL_OBJ;function s(){try{return new ErrorEvent(""),!0}catch{return!1}}n(s,"supportsErrorEvent");function a(){try{return new DOMError(""),!0}catch{return!1}}n(a,"supportsDOMError");function i(){try{return new DOMException(""),!0}catch{return!1}}n(i,"supportsDOMException");function e(){if(!("fetch"in g))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}n(e,"supportsFetch");function t(h){return h&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(h.toString())}n(t,"isNativeFetch");function r(){if(typeof EdgeRuntime=="string")return!0;if(!e())return!1;if(t(g.fetch))return!0;let h=!1;const p=g.document;if(p&&typeof p.createElement=="function")try{const d=p.createElement("iframe");d.hidden=!0,p.head.appendChild(d),d.contentWindow&&d.contentWindow.fetch&&(h=t(d.contentWindow.fetch)),p.head.removeChild(d)}catch(d){u.DEBUG_BUILD&&m.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",d)}return h}n(r,"supportsNativeFetch");function o(){return"ReportingObserver"in g}n(o,"supportsReportingObserver");function f(){if(!e())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch{return!1}}n(f,"supportsReferrerPolicy"),l.isNativeFetch=t,l.supportsDOMError=a,l.supportsDOMException=i,l.supportsErrorEvent=s,l.supportsFetch=e,l.supportsNativeFetch=r,l.supportsReferrerPolicy=f,l.supportsReportingObserver=o},2435760602:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(5330804994);var m;(function(a){a[a.PENDING=0]="PENDING";const e=1;a[a.RESOLVED=e]="RESOLVED";const t=2;a[a.REJECTED=t]="REJECTED"})(m||(m={}));function v(a){return new s(i=>{i(a)})}n(v,"resolvedSyncPromise");function g(a){return new s((i,e)=>{e(a)})}n(g,"rejectedSyncPromise");class s{constructor(i){s.prototype.__init.call(this),s.prototype.__init2.call(this),s.prototype.__init3.call(this),s.prototype.__init4.call(this),this._state=m.PENDING,this._handlers=[];try{i(this._resolve,this._reject)}catch(e){this._reject(e)}}then(i,e){return new s((t,r)=>{this._handlers.push([!1,o=>{if(!i)t(o);else try{t(i(o))}catch(f){r(f)}},o=>{if(!e)r(o);else try{t(e(o))}catch(f){r(f)}}]),this._executeHandlers()})}catch(i){return this.then(e=>e,i)}finally(i){return new s((e,t)=>{let r,o;return this.then(f=>{o=!1,r=f,i&&i()},f=>{o=!0,r=f,i&&i()}).then(()=>{if(o){t(r);return}e(r)})})}__init(){this._resolve=i=>{this._setResult(m.RESOLVED,i)}}__init2(){this._reject=i=>{this._setResult(m.REJECTED,i)}}__init3(){this._setResult=(i,e)=>{if(this._state===m.PENDING){if(u.isThenable(e)){e.then(this._resolve,this._reject);return}this._state=i,this._value=e,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===m.PENDING)return;const i=this._handlers.slice();this._handlers=[],i.forEach(e=>{e[0]||(this._state===m.RESOLVED&&e[1](this._value),this._state===m.REJECTED&&e[2](this._value),e[0]=!0)})}}}n(s,"SyncPromise"),l.SyncPromise=s,l.rejectedSyncPromise=g,l.resolvedSyncPromise=v},2174399055:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(1108286465),m=1e3;function v(){return Date.now()/m}n(v,"dateTimestampInSeconds");function g(){const{performance:i}=u.GLOBAL_OBJ;if(!i||!i.now)return v;const e=Date.now()-i.now(),t=i.timeOrigin==null?e:i.timeOrigin;return()=>(t+i.now())/m}n(g,"createUnixTimestampInSecondsFunc");const s=g();l._browserPerformanceTimeOriginMode=void 0;const a=(()=>{const{performance:i}=u.GLOBAL_OBJ;if(!i||!i.now){l._browserPerformanceTimeOriginMode="none";return}const e=3600*1e3,t=i.now(),r=Date.now(),o=i.timeOrigin?Math.abs(i.timeOrigin+t-r):e,f=o<e,h=i.timing&&i.timing.navigationStart,d=typeof h=="number"?Math.abs(h+t-r):e,y=d<e;return f||y?o<=d?(l._browserPerformanceTimeOriginMode="timeOrigin",i.timeOrigin):(l._browserPerformanceTimeOriginMode="navigationStart",h):(l._browserPerformanceTimeOriginMode="dateNow",r)})();l.browserPerformanceTimeOrigin=a,l.dateTimestampInSeconds=v,l.timestampInSeconds=s},6123212092:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const u=c(8666696284),m=c(4360077466),v=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function g(i){if(!i)return;const e=i.match(v);if(!e)return;let t;return e[3]==="1"?t=!0:e[3]==="0"&&(t=!1),{traceId:e[1],parentSampled:t,parentSpanId:e[2]}}n(g,"extractTraceparentData");function s(i,e){const t=g(i),r=u.baggageHeaderToDynamicSamplingContext(e),{traceId:o,parentSpanId:f,parentSampled:h}=t||{};return t?{traceId:o||m.uuid4(),parentSpanId:f||m.uuid4().substring(16),spanId:m.uuid4().substring(16),sampled:h,dsc:r||{}}:{traceId:o||m.uuid4(),spanId:m.uuid4().substring(16)}}n(s,"propagationContextFromHeaders");function a(i=m.uuid4(),e=m.uuid4().substring(16),t){let r="";return t!==void 0&&(r=t?"-1":"-0"),`${i}-${e}${r}`}n(a,"generateSentryTraceHeader"),l.TRACEPARENT_REGEXP=v,l.extractTraceparentData=g,l.generateSentryTraceHeader=a,l.propagationContextFromHeaders=s},7216756807:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function c(g){if(!g)return{};const s=g.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!s)return{};const a=s[6]||"",i=s[8]||"";return{host:s[4],path:s[5],protocol:s[2],search:a,hash:i,relative:s[5]+a+i}}n(c,"parseUrl");function u(g){return g.split(/[\?#]/,1)[0]}n(u,"stripUrlQueryAndFragment");function m(g){return g.split(/\\?\//).filter(s=>s.length>0&&s!==",").length}n(m,"getNumberOfUrlSegments");function v(g){const{protocol:s,host:a,path:i}=g,e=a&&a.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||"";return`${s?`${s}://`:""}${e}${i}`}n(v,"getSanitizedUrlString"),l.getNumberOfUrlSegments=m,l.getSanitizedUrlString=v,l.parseUrl=c,l.stripUrlQueryAndFragment=u},6250807085:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});function c(u){return u.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}n(c,"escapeStringForRegex"),l.escapeStringForRegex=c},7384544743:(H,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});const m=c(1108286465).GLOBAL_OBJ;function v(){const g=m.chrome,s=g&&g.app&&g.app.runtime,a="history"in m&&!!m.history.pushState&&!!m.history.replaceState;return!s&&a}n(v,"supportsHistory"),l.supportsHistory=v},1108286465:(H,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=globalThis;function u(m,v,g){const s=g||c,a=s.__SENTRY__=s.__SENTRY__||{};return a[m]||(a[m]=v())}n(u,"getGlobalSingleton"),l.GLOBAL_OBJ=c,l.getGlobalSingleton=u},7010795574:(H,l)=>{var c,u,m;H.exports=function(Z){var g={},s={exports:g},a=Z.AbortController,i=Z.AbortSignal,e=Z.addEventListener,t=Z.alert,r=Z.AnalyserNode,o=Z.Animation,f=Z.AnimationEffectReadOnly,h=Z.AnimationEffectTiming,p=Z.AnimationEffectTimingReadOnly,d=Z.AnimationEvent,y=Z.AnimationPlaybackEvent,S=Z.AnimationTimeline,b=Z.applicationCache,_=Z.ApplicationCache,C=Z.ApplicationCacheErrorEvent,w=Z.atob,R=Z.Attr,O=Z.Audio,D=Z.AudioBuffer,I=Z.AudioBufferSourceNode,M=Z.AudioContext,k=Z.AudioDestinationNode,N=Z.AudioListener,j=Z.AudioNode,B=Z.AudioParam,J=Z.AudioProcessingEvent,Q=Z.AudioScheduledSourceNode,oe=Z.AudioWorkletGlobalScope,$=Z.AudioWorkletNode,he=Z.AudioWorkletProcessor,Ae=Z.BarProp,Ee=Z.BaseAudioContext,Oe=Z.BatteryManager,be=Z.BeforeUnloadEvent,De=Z.BiquadFilterNode,ut=Z.Blob,St=Z.BlobEvent,Rt=Z.blur,Ze=Z.BroadcastChannel,mt=Z.btoa,At=Z.BudgetService,Vt=Z.ByteLengthQueuingStrategy,dt=Z.Cache,Cn=Z.CacheStorage,gt=Z.cancelAnimationFrame,Ut=Z.cancelIdleCallback,en=Z.CanvasCaptureMediaStreamTrack,sn=Z.CanvasGradient,$t=Z.CanvasPattern,Rn=Z.CanvasRenderingContext2D,di=Z.ChannelMergerNode,ii=Z.ChannelSplitterNode,Kn=Z.CharacterData,hi=Z.clearInterval,Ln=Z.clearTimeout,Hn=Z.clientInformation,ui=Z.ClipboardEvent,jn=Z.close,ri=Z.closed,ie=Z.CloseEvent,Mt=Z.Comment,Ot=Z.CompositionEvent,Ht=Z.confirm,hn=Z.console,tn=Z.ConstantSourceNode,xe=Z.ConvolverNode,Dt=Z.CountQueuingStrategy,Y=Z.createImageBitmap,fe=Z.Credential,et=Z.CredentialsContainer,nt=Z.crypto,nn=Z.Crypto,kt=Z.CryptoKey,Jt=Z.CSS,Ke=Z.CSSConditionRule,vt=Z.CSSFontFaceRule,x=Z.CSSGroupingRule,Ye=Z.CSSImportRule,it=Z.CSSKeyframeRule,ft=Z.CSSKeyframesRule,ge=Z.CSSMatrixComponent,Zn=Z.CSSMediaRule,Xt=Z.CSSNamespaceRule,pn=Z.CSSPageRule,Bi=Z.CSSPerspective,Gn=Z.CSSRotate,yo=Z.CSSRule,no=Z.CSSRuleList,Vi=Z.CSSScale,or=Z.CSSSkew,ki=Z.CSSSkewX,qi=Z.CSSSkewY,Or=Z.CSSStyleDeclaration,Zo=Z.CSSStyleRule,Xn=Z.CSSStyleSheet,Dn=Z.CSSSupportsRule,Ni=Z.CSSTransformValue,pi=Z.CSSTranslate,ir=Z.CustomElementRegistry,br=Z.customElements,zr=Z.CustomEvent,pr=Z.DataTransfer,mr=Z.DataTransferItem,Ur=Z.DataTransferItemList,io=Z.defaultstatus,ur=Z.defaultStatus,wo=Z.DelayNode,$r=Z.DeviceMotionEvent,Vo=Z.DeviceOrientationEvent,V=Z.devicePixelRatio,we=Z.dispatchEvent,ct=Z.document,Wt=Z.Document,On=Z.DocumentFragment,fi=Z.DocumentType,Li=Z.DOMError,gi=Z.DOMException,Mi=Z.DOMImplementation,Oi=Z.DOMMatrix,Yi=Z.DOMMatrixReadOnly,Cr=Z.DOMParser,wr=Z.DOMPoint,Kr=Z.DOMPointReadOnly,bo=Z.DOMQuad,ia=Z.DOMRect,Fo=Z.DOMRectList,zi=Z.DOMRectReadOnly,co=Z.DOMStringList,Zr=Z.DOMStringMap,Ao=Z.DOMTokenList,No=Z.DragEvent,qo=Z.DynamicsCompressorNode,ca=Z.Element,Bo=Z.ErrorEvent,ba=Z.event,Ho=Z.Event,Fe=Z.EventSource,tt=Z.EventTarget,It=Z.external,Qt=Z.fetch,cn=Z.File,fn=Z.FileList,ci=Z.FileReader,_i=Z.find,bi=Z.focus,si=Z.FocusEvent,Ui=Z.FontFace,Nn=Z.FontFaceSetLoadEvent,Sr=Z.FormData,wi=Z.frameElement,qr=Z.frames,uo=Z.GainNode,go=Z.Gamepad,ji=Z.GamepadButton,Qi=Z.GamepadEvent,_r=Z.getComputedStyle,Jr=Z.getSelection,jo=Z.HashChangeEvent,ea=Z.Headers,gr=Z.history,ua=Z.History,so=Z.HTMLAllCollection,Jo=Z.HTMLAnchorElement,$a=Z.HTMLAreaElement,Qa=Z.HTMLAudioElement,_a=Z.HTMLBaseElement,Wa=Z.HTMLBodyElement,za=Z.HTMLBRElement,Na=Z.HTMLButtonElement,sa=Z.HTMLCanvasElement,pa=Z.HTMLCollection,Ka=Z.HTMLContentElement,Lo=Z.HTMLDataElement,ma=Z.HTMLDataListElement,Ja=Z.HTMLDetailsElement,Ta=Z.HTMLDialogElement,ns=Z.HTMLDirectoryElement,bs=Z.HTMLDivElement,da=Z.HTMLDListElement,fs=Z.HTMLDocument,So=Z.HTMLElement,Wo=Z.HTMLEmbedElement,Uo=Z.HTMLFieldSetElement,ra=Z.HTMLFontElement,oa=Z.HTMLFormControlsCollection,hs=Z.HTMLFormElement,me=Z.HTMLFrameElement,Ie=Z.HTMLFrameSetElement,$e=Z.HTMLHeadElement,ot=Z.HTMLHeadingElement,Et=Z.HTMLHRElement,Yt=Z.HTMLHtmlElement,jt=Z.HTMLIFrameElement,yn=Z.HTMLImageElement,Sn=Z.HTMLInputElement,Pn=Z.HTMLLabelElement,In=Z.HTMLLegendElement,Jn=Z.HTMLLIElement,ei=Z.HTMLLinkElement,oi=Z.HTMLMapElement,Si=Z.HTMLMarqueeElement,yi=Z.HTMLMediaElement,li=Z.HTMLMenuElement,Yn=Z.HTMLMetaElement,Gi=Z.HTMLMeterElement,Wr=Z.HTMLModElement,oo=Z.HTMLObjectElement,lo=Z.HTMLOListElement,dn=Z.HTMLOptGroupElement,fo=Z.HTMLOptionElement,to=Z.HTMLOptionsCollection,fr=Z.HTMLOutputElement,xo=Z.HTMLParagraphElement,_o=Z.HTMLParamElement,fa=Z.HTMLPictureElement,la=Z.HTMLPreElement,ps=Z.HTMLProgressElement,_s=Z.HTMLQuoteElement,As=Z.HTMLScriptElement,aa=Z.HTMLSelectElement,il=Z.HTMLShadowElement,Ws=Z.HTMLSlotElement,is=Z.HTMLSourceElement,rs=Z.HTMLSpanElement,Ds=Z.HTMLStyleElement,Ts=Z.HTMLTableCaptionElement,Ya=Z.HTMLTableCellElement,Ua=Z.HTMLTableColElement,ms=Z.HTMLTableElement,Rs=Z.HTMLTableRowElement,ql=Z.HTMLTableSectionElement,pl=Z.HTMLTemplateElement,Rl=Z.HTMLTextAreaElement,La=Z.HTMLTimeElement,gs=Z.HTMLTitleElement,Ml=Z.HTMLTrackElement,Ms=Z.HTMLUListElement,vs=Z.HTMLUnknownElement,Pl=Z.HTMLVideoElement,rl=Z.IDBCursor,ec=Z.IDBCursorWithValue,ol=Z.IDBDatabase,al=Z.IDBFactory,zs=Z.IDBIndex,ml=Z.IDBKeyRange,gl=Z.IDBObjectStore,ys=Z.IDBOpenDBRequest,Ps=Z.IDBRequest,kl=Z.IDBTransaction,Gs=Z.IDBVersionChangeEvent,vl=Z.IdleDeadline,os=Z.IIRFilterNode,Nl=Z.Image,Ll=Z.ImageBitmap,$s=Z.ImageBitmapRenderingContext,tc=Z.ImageCapture,xl=Z.ImageData,Ks=Z.indexedDB,Js=Z.innerHeight,Cs=Z.innerWidth,Fl=Z.InputEvent,sl=Z.IntersectionObserver,hr=Z.IntersectionObserverEntry,Wi=Z.Intl,ll=Z.isSecureContext,rn=Z.KeyboardEvent,gn=Z.KeyframeEffect,Tn=Z.KeyframeEffectReadOnly,Ai=Z.length,$i=Z.localStorage,Ar=Z.location,Dr=Z.Location,vr=Z.locationbar,dr=Z.matchMedia,ao=Z.MediaDeviceInfo,zo=Z.MediaDevices,Yr=Z.MediaElementAudioSourceNode,mi=Z.MediaEncryptedEvent,rr=Z.MediaError,ti=Z.MediaKeyMessageEvent,ga=Z.MediaKeySession,ks=Z.MediaKeyStatusMap,Bl=Z.MediaKeySystemAccess,Ys=Z.MediaList,as=Z.MediaMetadata,Va=Z.MediaQueryList,Ul=Z.MediaQueryListEvent,Xs=Z.MediaRecorder,Vl=Z.MediaSettingsRange,Qs=Z.MediaSource,Zs=Z.MediaStream,To=Z.MediaStreamAudioDestinationNode,Po=Z.MediaStreamAudioSourceNode,Ha=Z.MediaStreamEvent,yl=Z.MediaStreamTrack,iu=Z.MediaStreamTrackEvent,Hl=Z.menubar,jl=Z.MessageChannel,Tu=Z.MessageEvent,nc=Z.MessagePort,sd=Z.MIDIAccess,Cu=Z.MIDIConnectionEvent,ld=Z.MIDIInput,Iu=Z.MIDIInputMap,cd=Z.MIDIMessageEvent,Ou=Z.MIDIOutput,wu=Z.MIDIOutputMap,Au=Z.MIDIPort,ud=Z.MimeType,wa=Z.MimeTypeArray,Sl=Z.MouseEvent,Du=Z.moveBy,Ru=Z.moveTo,Mu=Z.MutationEvent,Wl=Z.MutationObserver,ic=Z.MutationRecord,rc=Z.name,ru=Z.NamedNodeMap,ss=Z.NavigationPreloadManager,El=Z.navigator,Pu=Z.Navigator,Ga=Z.NetworkInformation,Yo=Z.Node,Ss=Z.NodeFilter,ku=Z.NodeIterator,ou=Z.NodeList,oc=Z.Notification,zl=Z.OfflineAudioCompletionEvent,Nu=Z.OfflineAudioContext,bl=Z.offscreenBuffering,ac=Z.OffscreenCanvas,cl=Z.OffscreenCanvasRenderingContext2D,Bn=Z.onabort,L=Z.onafterprint,F=Z.onanimationend,K=Z.onanimationiteration,pe=Z.onanimationstart,je=Z.onappinstalled,ht=Z.onauxclick,Lt=Z.onbeforeinstallprompt,Bt=Z.onbeforeprint,Tt=Z.onbeforeunload,bn=Z.onblur,zn=Z.oncancel,Vn=Z.oncanplay,Qn=Z.oncanplaythrough,Ii=Z.onchange,Ti=Z.onclick,Zi=Z.onclose,yr=Z.oncontextmenu,tr=Z.oncuechange,Gr=Z.ondblclick,Co=Z.ondevicemotion,Io=Z.ondeviceorientation,Go=Z.ondeviceorientationabsolute,Xr=Z.ondrag,ar=Z.ondragend,ho=Z.ondragenter,ta=Z.ondragleave,cr=Z.ondragover,Qr=Z.ondragstart,$o=Z.ondrop,va=Z.ondurationchange,ha=Z.onemptied,ja=Z.onended,ko=Z.onerror,Za=Z.onfocus,ya=Z.ongotpointercapture,Xa=Z.onhashchange,Aa=Z.oninput,Is=Z.oninvalid,Ns=Z.onkeydown,_l=Z.onkeypress,Da=Z.onkeyup,Ls=Z.onlanguagechange,qs=Z.onload,Tl=Z.onloadeddata,sc=Z.onloadedmetadata,Cl=Z.onloadstart,lc=Z.onlostpointercapture,au=Z.onmessage,su=Z.onmessageerror,xa=Z.onmousedown,xs=Z.onmouseenter,Gl=Z.onmouseleave,cc=Z.onmousemove,Il=Z.onmouseout,$l=Z.onmouseover,Mo=Z.onmouseup,ls=Z.onmousewheel,Oo=Z.onoffline,Ko=Z.ononline,Eo=Z.onpagehide,Os=Z.onpageshow,uc=Z.onpause,Lu=Z.onplay,xu=Z.onplaying,Fu=Z.onpointercancel,Bu=Z.onpointerdown,Uu=Z.onpointerenter,zf=Z.onpointerleave,Gf=Z.onpointermove,$f=Z.onpointerout,Kf=Z.onpointerover,Jf=Z.onpointerup,qa=Z.onpopstate,dd=Z.onprogress,Yf=Z.onratechange,Er=Z.onrejectionhandled,Xf=Z.onreset,es=Z.onresize,Qf=Z.onscroll,Zf=Z.onsearch,qf=Z.onseeked,dc=Z.onseeking,fc=Z.onselect,hc=Z.onstalled,pc=Z.onstorage,mc=Z.onsubmit,gc=Z.onsuspend,vc=Z.ontimeupdate,yc=Z.ontoggle,Sc=Z.ontransitionend,eh=Z.onunhandledrejection,th=Z.onunload,nh=Z.onvolumechange,ih=Z.onwaiting,rh=Z.onwheel,oh=Z.open,ah=Z.openDatabase,sh=Z.opener,lh=Z.Option,ch=Z.origin,uh=Z.OscillatorNode,dh=Z.outerHeight,fh=Z.outerWidth,Ca=Z.OverconstrainedError,fd=Z.PageTransitionEvent,hd=Z.pageXOffset,pd=Z.pageYOffset,md=Z.PannerNode,gd=Z.parent,vd=Z.Path2D,Ec=Z.PaymentAddress,yd=Z.PaymentRequest,bc=Z.PaymentRequestUpdateEvent,Vu=Z.PaymentResponse,Sd=Z.performance,Ed=Z.Performance,bd=Z.PerformanceEntry,_d=Z.PerformanceLongTaskTiming,_c=Z.PerformanceMark,Hu=Z.PerformanceMeasure,Td=Z.PerformanceNavigation,lu=Z.PerformanceNavigationTiming,Cd=Z.PerformanceObserver,Id=Z.PerformanceObserverEntryList,Od=Z.PerformancePaintTiming,ju=Z.PerformanceResourceTiming,wd=Z.PerformanceTiming,Ad=Z.PeriodicWave,Tc=Z.Permissions,Dd=Z.PermissionStatus,Rd=Z.personalbar,Md=Z.PhotoCapabilities,Pd=Z.Plugin,kd=Z.PluginArray,Nd=Z.PointerEvent,Ld=Z.PopStateEvent,xd=Z.postMessage,Fd=Z.Presentation,Bd=Z.PresentationAvailability,Ud=Z.PresentationConnection,Vd=Z.PresentationConnectionAvailableEvent,Hd=Z.PresentationConnectionCloseEvent,jd=Z.PresentationConnectionList,Wd=Z.PresentationReceiver,zd=Z.PresentationRequest,Gd=Z.print,$d=Z.ProcessingInstruction,Kd=Z.ProgressEvent,Jd=Z.PromiseRejectionEvent,cu=Z.prompt,Yd=Z.PushManager,Xd=Z.PushSubscription,Qd=Z.PushSubscriptionOptions,Zd=Z.queueMicrotask,qd=Z.RadioNodeList,ef=Z.Range,tf=Z.ReadableStream,nf=Z.registerProcessor,rf=Z.RemotePlayback,of=Z.removeEventListener,af=Z.Request,sf=Z.requestAnimationFrame,lf=Z.requestIdleCallback,cf=Z.resizeBy,uf=Z.ResizeObserver,df=Z.ResizeObserverEntry,ff=Z.resizeTo,hf=Z.Response,pf=Z.RTCCertificate,mf=Z.RTCDataChannel,gf=Z.RTCDataChannelEvent,vf=Z.RTCDtlsTransport,yf=Z.RTCIceCandidate,Sf=Z.RTCIceGatherer,hh=Z.RTCIceTransport,ph=Z.RTCPeerConnection,mh=Z.RTCPeerConnectionIceEvent,gh=Z.RTCRtpContributingSource,vh=Z.RTCRtpReceiver,yh=Z.RTCRtpSender,Sh=Z.RTCSctpTransport,Eh=Z.RTCSessionDescription,bh=Z.RTCStatsReport,_h=Z.RTCTrackEvent,Th=Z.screen,Ch=Z.Screen,Ih=Z.screenLeft,Oh=Z.ScreenOrientation,wh=Z.screenTop,Ah=Z.screenX,Dh=Z.screenY,Rh=Z.ScriptProcessorNode,Mh=Z.scroll,Ph=Z.scrollbars,kh=Z.scrollBy,Nh=Z.scrollTo,Lh=Z.scrollX,xh=Z.scrollY,Fh=Z.SecurityPolicyViolationEvent,Bh=Z.Selection,Wu=Z.self,Cc=Z.ServiceWorker,Uh=Z.ServiceWorkerContainer,Vh=Z.ServiceWorkerRegistration,Hh=Z.sessionStorage,jh=Z.setInterval,Ol=Z.setTimeout,Ef=Z.ShadowRoot,Wh=Z.SharedWorker,zh=Z.SourceBuffer,Gh=Z.SourceBufferList,$h=Z.speechSynthesis,Kh=Z.SpeechSynthesisEvent,Jh=Z.SpeechSynthesisUtterance,Yh=Z.StaticRange,Xh=Z.status,Qh=Z.statusbar,Zh=Z.StereoPannerNode,qh=Z.stop,ep=Z.Storage,tp=Z.StorageEvent,np=Z.StorageManager,ip=Z.styleMedia,rp=Z.StyleSheet,op=Z.StyleSheetList,ap=Z.SubtleCrypto,sp=Z.SVGAElement,lp=Z.SVGAngle,cp=Z.SVGAnimatedAngle,up=Z.SVGAnimatedBoolean,dp=Z.SVGAnimatedEnumeration,fp=Z.SVGAnimatedInteger,hp=Z.SVGAnimatedLength,pp=Z.SVGAnimatedLengthList,mp=Z.SVGAnimatedNumber,gp=Z.SVGAnimatedNumberList,vp=Z.SVGAnimatedPreserveAspectRatio,yp=Z.SVGAnimatedRect,Sp=Z.SVGAnimatedString,Ep=Z.SVGAnimatedTransformList,bp=Z.SVGAnimateElement,_p=Z.SVGAnimateMotionElement,Tp=Z.SVGAnimateTransformElement,Cp=Z.SVGAnimationElement,Ip=Z.SVGCircleElement,Op=Z.SVGClipPathElement,wp=Z.SVGComponentTransferFunctionElement,Ap=Z.SVGDefsElement,Dp=Z.SVGDescElement,Rp=Z.SVGDiscardElement,Mp=Z.SVGElement,Pp=Z.SVGEllipseElement,kp=Z.SVGFEBlendElement,Np=Z.SVGFEColorMatrixElement,Lp=Z.SVGFEComponentTransferElement,xp=Z.SVGFECompositeElement,Fp=Z.SVGFEConvolveMatrixElement,Bp=Z.SVGFEDiffuseLightingElement,Up=Z.SVGFEDisplacementMapElement,Vp=Z.SVGFEDistantLightElement,Hp=Z.SVGFEDropShadowElement,jp=Z.SVGFEFloodElement,Wp=Z.SVGFEFuncAElement,zp=Z.SVGFEFuncBElement,Gp=Z.SVGFEFuncGElement,$p=Z.SVGFEFuncRElement,Kp=Z.SVGFEGaussianBlurElement,Jp=Z.SVGFEImageElement,Yp=Z.SVGFEMergeElement,Xp=Z.SVGFEMergeNodeElement,Qp=Z.SVGFEMorphologyElement,Zp=Z.SVGFEOffsetElement,qp=Z.SVGFEPointLightElement,em=Z.SVGFESpecularLightingElement,tm=Z.SVGFESpotLightElement,nm=Z.SVGFETileElement,im=Z.SVGFETurbulenceElement,rm=Z.SVGFilterElement,om=Z.SVGForeignObjectElement,am=Z.SVGGElement,sm=Z.SVGGeometryElement,lm=Z.SVGGradientElement,cm=Z.SVGGraphicsElement,um=Z.SVGImageElement,dm=Z.SVGLength,fm=Z.SVGLengthList,hm=Z.SVGLinearGradientElement,pm=Z.SVGLineElement,mm=Z.SVGMarkerElement,gm=Z.SVGMaskElement,vm=Z.SVGMatrix,ym=Z.SVGMetadataElement,Sm=Z.SVGMPathElement,Em=Z.SVGNumber,bm=Z.SVGNumberList,_m=Z.SVGPathElement,Tm=Z.SVGPatternElement,Cm=Z.SVGPoint,Im=Z.SVGPointList,Om=Z.SVGPolygonElement,wm=Z.SVGPolylineElement,Am=Z.SVGPreserveAspectRatio,Dm=Z.SVGRadialGradientElement,Rm=Z.SVGRect,Mm=Z.SVGRectElement,Pm=Z.SVGScriptElement,km=Z.SVGSetElement,Nm=Z.SVGStopElement,Lm=Z.SVGStringList,xm=Z.SVGStyleElement,Fm=Z.SVGSVGElement,Bm=Z.SVGSwitchElement,Um=Z.SVGSymbolElement,Vm=Z.SVGTextContentElement,Hm=Z.SVGTextElement,jm=Z.SVGTextPathElement,Wm=Z.SVGTextPositioningElement,zm=Z.SVGTitleElement,Gm=Z.SVGTransform,$m=Z.SVGTransformList,Km=Z.SVGTSpanElement,Jm=Z.SVGUnitTypes,Ym=Z.SVGUseElement,Xm=Z.SVGViewElement,Qm=Z.TaskAttributionTiming,Kl=Z.Text,Zm=Z.TextDecoder,Rr=Z.TextEncoder,Vr=Z.TextEvent,Ia=Z.TextMetrics,Mr=Z.TextTrack,Fs=Z.TextTrackCue,wl=Z.TextTrackCueList,Pr=Z.TextTrackList,kr=Z.TimeRanges,Nr=Z.toolbar,Lr=Z.top,qm=Z.Touch,eg=Z.TouchEvent,tg=Z.TouchList,ng=Z.TrackEvent,ig=Z.TransitionEvent,bf=Z.TreeWalker,rg=Z.trustedTypes,_f=Z.UIEvent,og=Z.URL,ag=Z.URLSearchParams,Tf=Z.ValidityState,sg=Z.visualViewport,lg=Z.VisualViewport,zu=Z.VTTCue,Cf=Z.WaveShaperNode,Gu=Z.WebAssembly,$u=Z.WebGL2RenderingContext,sr=Z.WebGLActiveInfo,Es=Z.WebGLBuffer,cg=Z.WebGLContextEvent,po=Z.WebGLFramebuffer,ro=Z.WebGLProgram,xr=Z.WebGLQuery,Fr=Z.WebGLRenderbuffer,Ic=Z.WebGLRenderingContext,Oc=Z.WebGLSampler,wc=Z.WebGLShader,Ac=Z.WebGLShaderPrecisionFormat,Dc=Z.WebGLSync,Rc=Z.WebGLTexture,Mc=Z.WebGLTransformFeedback,Pc=Z.WebGLUniformLocation,kc=Z.WebGLVertexArrayObject,Nc=Z.WebSocket,Lc=Z.WheelEvent,Z=Z.window,X=Z.Window,xc=Z.Worker,Fc=Z.WritableStream,Bc=Z.XMLDocument,Uc=Z.XMLHttpRequest,Vc=Z.XMLHttpRequestEventTarget,Hc=Z.XMLHttpRequestUpload,jc=Z.XMLSerializer,Wc=Z.XPathEvaluator,zc=Z.XPathExpression,Gc=Z.XPathResult,$c=Z.XSLTProcessor;/*!
* Quill Editor v1.3.7
* https://quilljs.com/
* Copyright (c) 2014, Jason Chen
* Copyright (c) 2013, salesforce.com
*/return n(function(We,_e){typeof g=="object"&&typeof s=="object"?s.exports=_e():(u=[],c=_e,m=typeof c=="function"?c.apply(g,u):c,m!==void 0&&(s.exports=m))},"webpackUniversalModuleDefinition")(typeof Wu<"u"?Wu:this,function(){return function(Gt){var We={};function _e(Xe){if(We[Xe])return We[Xe].exports;var Qe=We[Xe]={i:Xe,l:!1,exports:{}};return Gt[Xe].call(Qe.exports,Qe,Qe.exports,_e),Qe.l=!0,Qe.exports}return n(_e,"__nested_webpack_require_32364__"),_e.m=Gt,_e.c=We,_e.d=function(Xe,Qe,Ve){_e.o(Xe,Qe)||Object.defineProperty(Xe,Qe,{configurable:!1,enumerable:!0,get:Ve})},_e.n=function(Xe){var Qe=Xe&&Xe.__esModule?n(function(){return Xe.default},"getDefault"):n(function(){return Xe},"getModuleExports");return _e.d(Qe,"a",Qe),Qe},_e.o=function(Xe,Qe){return Object.prototype.hasOwnProperty.call(Xe,Qe)},_e.p="",_e(_e.s=129)}([function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=_e(18),Qe=_e(19),Ve=_e(20),Re=_e(55),Me=_e(56),ne=_e(57),ce=_e(58),se=_e(59),te=_e(12),Se=_e(33),de=_e(34),ue=_e(32),ae=_e(1),q={Scope:ae.Scope,create:ae.create,find:ae.find,query:ae.query,register:ae.register,Container:Xe.default,Format:Qe.default,Leaf:Ve.default,Embed:ce.default,Scroll:Re.default,Block:ne.default,Inline:Me.default,Text:se.default,Attributor:{Attribute:te.default,Class:Se.default,Style:de.default,Store:ue.default}};We.default=q},function(Gt,We,_e){"use strict";var Xe=this&&this.__extends||function(){var ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,q){ae.__proto__=q}||function(ae,q){for(var ve in q)q.hasOwnProperty(ve)&&(ae[ve]=q[ve])};return function(ae,q){ue(ae,q);function ve(){this.constructor=ae}n(ve,"__"),ae.prototype=q===null?Object.create(q):(ve.prototype=q.prototype,new ve)}}();Object.defineProperty(We,"__esModule",{value:!0});var Qe=function(ue){Xe(ae,ue);function ae(q){var ve=this;return q="[Parchment] "+q,ve=ue.call(this,q)||this,ve.message=q,ve.name=ve.constructor.name,ve}return n(ae,"ParchmentError"),ae}(Error);We.ParchmentError=Qe;var Ve={},Re={},Me={},ne={};We.DATA_KEY="__blot";var ce;(function(ue){ue[ue.TYPE=3]="TYPE",ue[ue.LEVEL=12]="LEVEL",ue[ue.ATTRIBUTE=13]="ATTRIBUTE",ue[ue.BLOT=14]="BLOT",ue[ue.INLINE=7]="INLINE",ue[ue.BLOCK=11]="BLOCK",ue[ue.BLOCK_BLOT=10]="BLOCK_BLOT",ue[ue.INLINE_BLOT=6]="INLINE_BLOT",ue[ue.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",ue[ue.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",ue[ue.ANY=15]="ANY"})(ce=We.Scope||(We.Scope={}));function se(ue,ae){var q=Se(ue);if(q==null)throw new Qe("Unable to create "+ue+" blot");var ve=q,le=ue instanceof Yo||ue.nodeType===Yo.TEXT_NODE?ue:ve.create(ae);return new ve(le,ae)}n(se,"create"),We.create=se;function te(ue,ae){return ae===void 0&&(ae=!1),ue==null?null:ue[We.DATA_KEY]!=null?ue[We.DATA_KEY].blot:ae?te(ue.parentNode,ae):null}n(te,"find"),We.find=te;function Se(ue,ae){ae===void 0&&(ae=ce.ANY);var q;if(typeof ue=="string")q=ne[ue]||Ve[ue];else if(ue instanceof Kl||ue.nodeType===Yo.TEXT_NODE)q=ne.text;else if(typeof ue=="number")ue&ce.LEVEL&ce.BLOCK?q=ne.block:ue&ce.LEVEL&ce.INLINE&&(q=ne.inline);else if(ue instanceof So){var ve=(ue.getAttribute("class")||"").split(/\s+/);for(var le in ve)if(q=Re[ve[le]],q)break;q=q||Me[ue.tagName]}return q==null?null:ae&ce.LEVEL&q.scope&&ae&ce.TYPE&q.scope?q:null}n(Se,"query"),We.query=Se;function de(){for(var ue=[],ae=0;ae<arguments.length;ae++)ue[ae]=arguments[ae];if(ue.length>1)return ue.map(function(le){return de(le)});var q=ue[0];if(typeof q.blotName!="string"&&typeof q.attrName!="string")throw new Qe("Invalid definition");if(q.blotName==="abstract")throw new Qe("Cannot register abstract class");if(ne[q.blotName||q.attrName]=q,typeof q.keyName=="string")Ve[q.keyName]=q;else if(q.className!=null&&(Re[q.className]=q),q.tagName!=null){Array.isArray(q.tagName)?q.tagName=q.tagName.map(function(le){return le.toUpperCase()}):q.tagName=q.tagName.toUpperCase();var ve=Array.isArray(q.tagName)?q.tagName:[q.tagName];ve.forEach(function(le){(Me[le]==null||q.className==null)&&(Me[le]=q)})}return q}n(de,"register"),We.register=de},function(Gt,We,_e){var Xe=_e(61),Qe=_e(11),Ve=_e(3),Re=_e(21),Me=String.fromCharCode(0),ne=n(function(ce){Array.isArray(ce)?this.ops=ce:ce!=null&&Array.isArray(ce.ops)?this.ops=ce.ops:this.ops=[]},"Delta");ne.prototype.insert=function(ce,se){var te={};return ce.length===0?this:(te.insert=ce,se!=null&&typeof se=="object"&&Object.keys(se).length>0&&(te.attributes=se),this.push(te))},ne.prototype.delete=function(ce){return ce<=0?this:this.push({delete:ce})},ne.prototype.retain=function(ce,se){if(ce<=0)return this;var te={retain:ce};return se!=null&&typeof se=="object"&&Object.keys(se).length>0&&(te.attributes=se),this.push(te)},ne.prototype.push=function(ce){var se=this.ops.length,te=this.ops[se-1];if(ce=Ve(!0,{},ce),typeof te=="object"){if(typeof ce.delete=="number"&&typeof te.delete=="number")return this.ops[se-1]={delete:te.delete+ce.delete},this;if(typeof te.delete=="number"&&ce.insert!=null&&(se-=1,te=this.ops[se-1],typeof te!="object"))return this.ops.unshift(ce),this;if(Qe(ce.attributes,te.attributes)){if(typeof ce.insert=="string"&&typeof te.insert=="string")return this.ops[se-1]={insert:te.insert+ce.insert},typeof ce.attributes=="object"&&(this.ops[se-1].attributes=ce.attributes),this;if(typeof ce.retain=="number"&&typeof te.retain=="number")return this.ops[se-1]={retain:te.retain+ce.retain},typeof ce.attributes=="object"&&(this.ops[se-1].attributes=ce.attributes),this}}return se===this.ops.length?this.ops.push(ce):this.ops.splice(se,0,ce),this},ne.prototype.chop=function(){var ce=this.ops[this.ops.length-1];return ce&&ce.retain&&!ce.attributes&&this.ops.pop(),this},ne.prototype.filter=function(ce){return this.ops.filter(ce)},ne.prototype.forEach=function(ce){this.ops.forEach(ce)},ne.prototype.map=function(ce){return this.ops.map(ce)},ne.prototype.partition=function(ce){var se=[],te=[];return this.forEach(function(Se){var de=ce(Se)?se:te;de.push(Se)}),[se,te]},ne.prototype.reduce=function(ce,se){return this.ops.reduce(ce,se)},ne.prototype.changeLength=function(){return this.reduce(function(ce,se){return se.insert?ce+Re.length(se):se.delete?ce-se.delete:ce},0)},ne.prototype.length=function(){return this.reduce(function(ce,se){return ce+Re.length(se)},0)},ne.prototype.slice=function(ce,se){ce=ce||0,typeof se!="number"&&(se=1/0);for(var te=[],Se=Re.iterator(this.ops),de=0;de<se&&Se.hasNext();){var ue;de<ce?ue=Se.next(ce-de):(ue=Se.next(se-de),te.push(ue)),de+=Re.length(ue)}return new ne(te)},ne.prototype.compose=function(ce){var se=Re.iterator(this.ops),te=Re.iterator(ce.ops),Se=[],de=te.peek();if(de!=null&&typeof de.retain=="number"&&de.attributes==null){for(var ue=de.retain;se.peekType()==="insert"&&se.peekLength()<=ue;)ue-=se.peekLength(),Se.push(se.next());de.retain-ue>0&&te.next(de.retain-ue)}for(var ae=new ne(Se);se.hasNext()||te.hasNext();)if(te.peekType()==="insert")ae.push(te.next());else if(se.peekType()==="delete")ae.push(se.next());else{var q=Math.min(se.peekLength(),te.peekLength()),ve=se.next(q),le=te.next(q);if(typeof le.retain=="number"){var Ce={};typeof ve.retain=="number"?Ce.retain=q:Ce.insert=ve.insert;var st=Re.attributes.compose(ve.attributes,le.attributes,typeof ve.retain=="number");if(st&&(Ce.attributes=st),ae.push(Ce),!te.hasNext()&&Qe(ae.ops[ae.ops.length-1],Ce)){var Ge=new ne(se.rest());return ae.concat(Ge).chop()}}else typeof le.delete=="number"&&typeof ve.retain=="number"&&ae.push(le)}return ae.chop()},ne.prototype.concat=function(ce){var se=new ne(this.ops.slice());return ce.ops.length>0&&(se.push(ce.ops[0]),se.ops=se.ops.concat(ce.ops.slice(1))),se},ne.prototype.diff=function(ce,se){if(this.ops===ce.ops)return new ne;var te=[this,ce].map(function(q){return q.map(function(ve){if(ve.insert!=null)return typeof ve.insert=="string"?ve.insert:Me;var le=q===ce?"on":"with";throw new Error("diff() called "+le+" non-document")}).join("")}),Se=new ne,de=Xe(te[0],te[1],se),ue=Re.iterator(this.ops),ae=Re.iterator(ce.ops);return de.forEach(function(q){for(var ve=q[1].length;ve>0;){var le=0;switch(q[0]){case Xe.INSERT:le=Math.min(ae.peekLength(),ve),Se.push(ae.next(le));break;case Xe.DELETE:le=Math.min(ve,ue.peekLength()),ue.next(le),Se.delete(le);break;case Xe.EQUAL:le=Math.min(ue.peekLength(),ae.peekLength(),ve);var Ce=ue.next(le),st=ae.next(le);Qe(Ce.insert,st.insert)?Se.retain(le,Re.attributes.diff(Ce.attributes,st.attributes)):Se.push(st).delete(le);break}ve-=le}}),Se.chop()},ne.prototype.eachLine=function(ce,se){se=se||`
`;for(var te=Re.iterator(this.ops),Se=new ne,de=0;te.hasNext();){if(te.peekType()!=="insert")return;var ue=te.peek(),ae=Re.length(ue)-te.peekLength(),q=typeof ue.insert=="string"?ue.insert.indexOf(se,ae)-ae:-1;if(q<0)Se.push(te.next());else if(q>0)Se.push(te.next(q));else{if(ce(Se,te.next(1).attributes||{},de)===!1)return;de+=1,Se=new ne}}Se.length()>0&&ce(Se,{},de)},ne.prototype.transform=function(ce,se){if(se=!!se,typeof ce=="number")return this.transformPosition(ce,se);for(var te=Re.iterator(this.ops),Se=Re.iterator(ce.ops),de=new ne;te.hasNext()||Se.hasNext();)if(te.peekType()==="insert"&&(se||Se.peekType()!=="insert"))de.retain(Re.length(te.next()));else if(Se.peekType()==="insert")de.push(Se.next());else{var ue=Math.min(te.peekLength(),Se.peekLength()),ae=te.next(ue),q=Se.next(ue);if(ae.delete)continue;q.delete?de.push(q):de.retain(ue,Re.attributes.transform(ae.attributes,q.attributes,se))}return de.chop()},ne.prototype.transformPosition=function(ce,se){se=!!se;for(var te=Re.iterator(this.ops),Se=0;te.hasNext()&&Se<=ce;){var de=te.peekLength(),ue=te.peekType();if(te.next(),ue==="delete"){ce-=Math.min(de,ce-Se);continue}else ue==="insert"&&(Se<ce||!se)&&(ce+=de);Se+=de}return ce},Gt.exports=ne},function(Gt,We){"use strict";var _e=Object.prototype.hasOwnProperty,Xe=Object.prototype.toString,Qe=Object.defineProperty,Ve=Object.getOwnPropertyDescriptor,Re=n(function(te){return typeof Array.isArray=="function"?Array.isArray(te):Xe.call(te)==="[object Array]"},"isArray"),Me=n(function(te){if(!te||Xe.call(te)!=="[object Object]")return!1;var Se=_e.call(te,"constructor"),de=te.constructor&&te.constructor.prototype&&_e.call(te.constructor.prototype,"isPrototypeOf");if(te.constructor&&!Se&&!de)return!1;var ue;for(ue in te);return typeof ue>"u"||_e.call(te,ue)},"isPlainObject"),ne=n(function(te,Se){Qe&&Se.name==="__proto__"?Qe(te,Se.name,{enumerable:!0,configurable:!0,value:Se.newValue,writable:!0}):te[Se.name]=Se.newValue},"setProperty"),ce=n(function(te,Se){if(Se==="__proto__")if(_e.call(te,Se)){if(Ve)return Ve(te,Se).value}else return;return te[Se]},"getProperty");Gt.exports=n(function se(){var te,Se,de,ue,ae,q,ve=arguments[0],le=1,Ce=arguments.length,st=!1;for(typeof ve=="boolean"&&(st=ve,ve=arguments[1]||{},le=2),(ve==null||typeof ve!="object"&&typeof ve!="function")&&(ve={});le<Ce;++le)if(te=arguments[le],te!=null)for(Se in te)de=ce(ve,Se),ue=ce(te,Se),ve!==ue&&(st&&ue&&(Me(ue)||(ae=Re(ue)))?(ae?(ae=!1,q=de&&Re(de)?de:[]):q=de&&Me(de)?de:{},ne(ve,{name:Se,newValue:se(st,q,ue)})):typeof ue<"u"&&ne(ve,{name:Se,newValue:ue}));return ve},"extend")},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0}),We.default=We.BlockEmbed=We.bubbleFormats=void 0;var Xe=function(){function ke(Ue,rt){for(var yt=0;yt<rt.length;yt++){var Pt=rt[yt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Ue,Pt.key,Pt)}}return n(ke,"defineProperties"),function(Ue,rt,yt){return rt&&ke(Ue.prototype,rt),yt&&ke(Ue,yt),Ue}}(),Qe=n(function ke(Ue,rt,yt){Ue===null&&(Ue=Function.prototype);var Pt=Object.getOwnPropertyDescriptor(Ue,rt);if(Pt===void 0){var qt=Object.getPrototypeOf(Ue);return qt===null?void 0:ke(qt,rt,yt)}else{if("value"in Pt)return Pt.value;var on=Pt.get;return on===void 0?void 0:on.call(yt)}},"get"),Ve=_e(3),Re=ve(Ve),Me=_e(2),ne=ve(Me),ce=_e(0),se=ve(ce),te=_e(17),Se=ve(te),de=_e(6),ue=ve(de),ae=_e(7),q=ve(ae);function ve(ke){return ke&&ke.__esModule?ke:{default:ke}}n(ve,"_interopRequireDefault");function le(ke,Ue){if(!(ke instanceof Ue))throw new TypeError("Cannot call a class as a function")}n(le,"_classCallCheck");function Ce(ke,Ue){if(!ke)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ue&&(typeof Ue=="object"||typeof Ue=="function")?Ue:ke}n(Ce,"_possibleConstructorReturn");function st(ke,Ue){if(typeof Ue!="function"&&Ue!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ue);ke.prototype=Object.create(Ue&&Ue.prototype,{constructor:{value:ke,enumerable:!1,writable:!0,configurable:!0}}),Ue&&(Object.setPrototypeOf?Object.setPrototypeOf(ke,Ue):ke.__proto__=Ue)}n(st,"_inherits");var Ge=1,Je=function(ke){st(Ue,ke);function Ue(){return le(this,Ue),Ce(this,(Ue.__proto__||Object.getPrototypeOf(Ue)).apply(this,arguments))}return n(Ue,"BlockEmbed"),Xe(Ue,[{key:"attach",value:n(function(){Qe(Ue.prototype.__proto__||Object.getPrototypeOf(Ue.prototype),"attach",this).call(this),this.attributes=new se.default.Attributor.Store(this.domNode)},"attach")},{key:"delta",value:n(function(){return new ne.default().insert(this.value(),(0,Re.default)(this.formats(),this.attributes.values()))},"delta")},{key:"format",value:n(function(yt,Pt){var qt=se.default.query(yt,se.default.Scope.BLOCK_ATTRIBUTE);qt!=null&&this.attributes.attribute(qt,Pt)},"format")},{key:"formatAt",value:n(function(yt,Pt,qt,on){this.format(qt,on)},"formatAt")},{key:"insertAt",value:n(function(yt,Pt,qt){if(typeof Pt=="string"&&Pt.endsWith(`
`)){var on=se.default.create(pt.blotName);this.parent.insertBefore(on,yt===0?this:this.next),on.insertAt(0,Pt.slice(0,-1))}else Qe(Ue.prototype.__proto__||Object.getPrototypeOf(Ue.prototype),"insertAt",this).call(this,yt,Pt,qt)},"insertAt")}]),Ue}(se.default.Embed);Je.scope=se.default.Scope.BLOCK_BLOT;var pt=function(ke){st(Ue,ke);function Ue(rt){le(this,Ue);var yt=Ce(this,(Ue.__proto__||Object.getPrototypeOf(Ue)).call(this,rt));return yt.cache={},yt}return n(Ue,"Block"),Xe(Ue,[{key:"delta",value:n(function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(se.default.Leaf).reduce(function(yt,Pt){return Pt.length()===0?yt:yt.insert(Pt.value(),He(Pt))},new ne.default).insert(`
`,He(this))),this.cache.delta},"delta")},{key:"deleteAt",value:n(function(yt,Pt){Qe(Ue.prototype.__proto__||Object.getPrototypeOf(Ue.prototype),"deleteAt",this).call(this,yt,Pt),this.cache={}},"deleteAt")},{key:"formatAt",value:n(function(yt,Pt,qt,on){Pt<=0||(se.default.query(qt,se.default.Scope.BLOCK)?yt+Pt===this.length()&&this.format(qt,on):Qe(Ue.prototype.__proto__||Object.getPrototypeOf(Ue.prototype),"formatAt",this).call(this,yt,Math.min(Pt,this.length()-yt-1),qt,on),this.cache={})},"formatAt")},{key:"insertAt",value:n(function(yt,Pt,qt){if(qt!=null)return Qe(Ue.prototype.__proto__||Object.getPrototypeOf(Ue.prototype),"insertAt",this).call(this,yt,Pt,qt);if(Pt.length!==0){var on=Pt.split(`
`),Un=on.shift();Un.length>0&&(yt<this.length()-1||this.children.tail==null?Qe(Ue.prototype.__proto__||Object.getPrototypeOf(Ue.prototype),"insertAt",this).call(this,Math.min(yt,this.length()-1),Un):this.children.tail.insertAt(this.children.tail.length(),Un),this.cache={});var zt=this;on.reduce(function(xt,at){return zt=zt.split(xt,!0),zt.insertAt(0,at),at.length},yt+Un.length)}},"insertAt")},{key:"insertBefore",value:n(function(yt,Pt){var qt=this.children.head;Qe(Ue.prototype.__proto__||Object.getPrototypeOf(Ue.prototype),"insertBefore",this).call(this,yt,Pt),qt instanceof Se.default&&qt.remove(),this.cache={}},"insertBefore")},{key:"length",value:n(function(){return this.cache.length==null&&(this.cache.length=Qe(Ue.prototype.__proto__||Object.getPrototypeOf(Ue.prototype),"length",this).call(this)+Ge),this.cache.length},"length")},{key:"moveChildren",value:n(function(yt,Pt){Qe(Ue.prototype.__proto__||Object.getPrototypeOf(Ue.prototype),"moveChildren",this).call(this,yt,Pt),this.cache={}},"moveChildren")},{key:"optimize",value:n(function(yt){Qe(Ue.prototype.__proto__||Object.getPrototypeOf(Ue.prototype),"optimize",this).call(this,yt),this.cache={}},"optimize")},{key:"path",value:n(function(yt){return Qe(Ue.prototype.__proto__||Object.getPrototypeOf(Ue.prototype),"path",this).call(this,yt,!0)},"path")},{key:"removeChild",value:n(function(yt){Qe(Ue.prototype.__proto__||Object.getPrototypeOf(Ue.prototype),"removeChild",this).call(this,yt),this.cache={}},"removeChild")},{key:"split",value:n(function(yt){var Pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Pt&&(yt===0||yt>=this.length()-Ge)){var qt=this.clone();return yt===0?(this.parent.insertBefore(qt,this),this):(this.parent.insertBefore(qt,this.next),qt)}else{var on=Qe(Ue.prototype.__proto__||Object.getPrototypeOf(Ue.prototype),"split",this).call(this,yt,Pt);return this.cache={},on}},"split")}]),Ue}(se.default.Block);pt.blotName="block",pt.tagName="P",pt.defaultChild="break",pt.allowedChildren=[ue.default,se.default.Embed,q.default];function He(ke){var Ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ke==null||(typeof ke.formats=="function"&&(Ue=(0,Re.default)(Ue,ke.formats())),ke.parent==null||ke.parent.blotName=="scroll"||ke.parent.statics.scope!==ke.statics.scope)?Ue:He(ke.parent,Ue)}n(He,"bubbleFormats"),We.bubbleFormats=He,We.BlockEmbed=Je,We.default=pt},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0}),We.default=We.overload=We.expandConfig=void 0;var Xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(zt){return typeof zt}:function(zt){return zt&&typeof Symbol=="function"&&zt.constructor===Symbol&&zt!==Symbol.prototype?"symbol":typeof zt},Qe=function(){function zt(xt,at){var wt=[],Nt=!0,ln=!1,an=void 0;try{for(var bt=xt[Symbol.iterator](),Kt;!(Nt=(Kt=bt.next()).done)&&(wt.push(Kt.value),!(at&&wt.length===at));Nt=!0);}catch(_n){ln=!0,an=_n}finally{try{!Nt&&bt.return&&bt.return()}finally{if(ln)throw an}}return wt}return n(zt,"sliceIterator"),function(xt,at){if(Array.isArray(xt))return xt;if(Symbol.iterator in Object(xt))return zt(xt,at);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ve=function(){function zt(xt,at){for(var wt=0;wt<at.length;wt++){var Nt=at[wt];Nt.enumerable=Nt.enumerable||!1,Nt.configurable=!0,"value"in Nt&&(Nt.writable=!0),Object.defineProperty(xt,Nt.key,Nt)}}return n(zt,"defineProperties"),function(xt,at,wt){return at&&zt(xt.prototype,at),wt&&zt(xt,wt),xt}}();_e(60);var Re=_e(2),Me=He(Re),ne=_e(15),ce=He(ne),se=_e(8),te=He(se),Se=_e(9),de=He(Se),ue=_e(0),ae=He(ue),q=_e(16),ve=He(q),le=_e(3),Ce=He(le),st=_e(10),Ge=He(st),Je=_e(44),pt=He(Je);function He(zt){return zt&&zt.__esModule?zt:{default:zt}}n(He,"_interopRequireDefault");function ke(zt,xt,at){return xt in zt?Object.defineProperty(zt,xt,{value:at,enumerable:!0,configurable:!0,writable:!0}):zt[xt]=at,zt}n(ke,"_defineProperty");function Ue(zt,xt){if(!(zt instanceof xt))throw new TypeError("Cannot call a class as a function")}n(Ue,"_classCallCheck");var rt=(0,Ge.default)("quill"),yt=function(){Ve(zt,null,[{key:"debug",value:n(function(at){at===!0&&(at="log"),Ge.default.level(at)},"debug")},{key:"find",value:n(function(at){return at.__quill||ae.default.find(at)},"find")},{key:"import",value:n(function(at){return this.imports[at]==null&&rt.error("Cannot import "+at+". Are you sure it was registered?"),this.imports[at]},"_import")},{key:"register",value:n(function(at,wt){var Nt=this,ln=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof at!="string"){var an=at.attrName||at.blotName;typeof an=="string"?this.register("formats/"+an,at,wt):Object.keys(at).forEach(function(bt){Nt.register(bt,at[bt],wt)})}else this.imports[at]!=null&&!ln&&rt.warn("Overwriting "+at+" with",wt),this.imports[at]=wt,(at.startsWith("blots/")||at.startsWith("formats/"))&&wt.blotName!=="abstract"?ae.default.register(wt):at.startsWith("modules")&&typeof wt.register=="function"&&wt.register()},"register")}]);function zt(xt){var at=this,wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ue(this,zt),this.options=Pt(xt,wt),this.container=this.options.container,this.container==null)return rt.error("Invalid Quill container",xt);this.options.debug&&zt.debug(this.options.debug);var Nt=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.rootListeners=[];var ln=this.root.addEventListener.bind(this.root);this.root.addEventListener=function(bt,Kt,_n){ln(bt,Kt,_n),at.rootListeners.push([bt,Kt,_n])},this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new te.default,this.scroll=ae.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new ce.default(this.scroll),this.selection=new ve.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(te.default.events.EDITOR_CHANGE,function(bt){bt===te.default.events.TEXT_CHANGE&&at.root.classList.toggle("ql-blank",at.editor.isBlank())}),this.emitter.on(te.default.events.SCROLL_UPDATE,function(bt,Kt){var _n=at.selection.lastRange,En=_n&&_n.length===0?_n.index:void 0;qt.call(at,function(){return at.editor.update(null,Kt,En)},bt)});var an=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+Nt+"<p><br></p></div>");this.setContents(an),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return n(zt,"Quill"),Ve(zt,[{key:"addContainer",value:n(function(at){var wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof at=="string"){var Nt=at;at=ct.createElement("div"),at.classList.add(Nt)}return this.container.insertBefore(at,wt),at},"addContainer")},{key:"blur",value:n(function(){this.selection.setRange(null)},"blur")},{key:"deleteText",value:n(function(at,wt,Nt){var ln=this,an=on(at,wt,Nt),bt=Qe(an,4);return at=bt[0],wt=bt[1],Nt=bt[3],qt.call(this,function(){return ln.editor.deleteText(at,wt)},Nt,at,-1*wt)},"deleteText")},{key:"disable",value:n(function(){this.enable(!1)},"disable")},{key:"enable",value:n(function(){var at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(at),this.container.classList.toggle("ql-disabled",!at)},"enable")},{key:"focus",value:n(function(){var at=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=at,this.scrollIntoView()},"focus")},{key:"format",value:n(function(at,wt){var Nt=this,ln=arguments.length>2&&arguments[2]!==void 0?arguments[2]:te.default.sources.API;return qt.call(this,function(){var an=Nt.getSelection(!0),bt=new Me.default;if(an==null)return bt;if(ae.default.query(at,ae.default.Scope.BLOCK))bt=Nt.editor.formatLine(an.index,an.length,ke({},at,wt));else{if(an.length===0)return Nt.selection.format(at,wt),bt;bt=Nt.editor.formatText(an.index,an.length,ke({},at,wt))}return Nt.setSelection(an,te.default.sources.SILENT),bt},ln)},"format")},{key:"formatLine",value:n(function(at,wt,Nt,ln,an){var bt=this,Kt=void 0,_n=on(at,wt,Nt,ln,an),En=Qe(_n,4);return at=En[0],wt=En[1],Kt=En[2],an=En[3],qt.call(this,function(){return bt.editor.formatLine(at,wt,Kt)},an,at,0)},"formatLine")},{key:"formatText",value:n(function(at,wt,Nt,ln,an){var bt=this,Kt=void 0,_n=on(at,wt,Nt,ln,an),En=Qe(_n,4);return at=En[0],wt=En[1],Kt=En[2],an=En[3],qt.call(this,function(){return bt.editor.formatText(at,wt,Kt)},an,at,0)},"formatText")},{key:"getBounds",value:n(function(at){var wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Nt=void 0;typeof at=="number"?Nt=this.selection.getBounds(at,wt):Nt=this.selection.getBounds(at.index,at.length);var ln=this.container.getBoundingClientRect();return{bottom:Nt.bottom-ln.top,height:Nt.height,left:Nt.left-ln.left,right:Nt.right-ln.left,top:Nt.top-ln.top,width:Nt.width}},"getBounds")},{key:"getContents",value:n(function(){var at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-at,Nt=on(at,wt),ln=Qe(Nt,2);return at=ln[0],wt=ln[1],this.editor.getContents(at,wt)},"getContents")},{key:"getFormat",value:n(function(){var at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof at=="number"?this.editor.getFormat(at,wt):this.editor.getFormat(at.index,at.length)},"getFormat")},{key:"getIndex",value:n(function(at){return at.offset(this.scroll)},"getIndex")},{key:"getLength",value:n(function(){return this.scroll.length()},"getLength")},{key:"getLeaf",value:n(function(at){return this.scroll.leaf(at)},"getLeaf")},{key:"getLine",value:n(function(at){return this.scroll.line(at)},"getLine")},{key:"getLines",value:n(function(){var at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof at!="number"?this.scroll.lines(at.index,at.length):this.scroll.lines(at,wt)},"getLines")},{key:"getModule",value:n(function(at){return this.theme.modules[at]},"getModule")},{key:"getSelection",value:n(function(){var at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return at&&this.focus(),this.update(),this.selection.getRange()[0]},"getSelection")},{key:"getText",value:n(function(){var at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-at,Nt=on(at,wt),ln=Qe(Nt,2);return at=ln[0],wt=ln[1],this.editor.getText(at,wt)},"getText")},{key:"hasFocus",value:n(function(){return this.selection.hasFocus()},"hasFocus")},{key:"insertEmbed",value:n(function(at,wt,Nt){var ln=this,an=arguments.length>3&&arguments[3]!==void 0?arguments[3]:zt.sources.API;return qt.call(this,function(){return ln.editor.insertEmbed(at,wt,Nt)},an,at)},"insertEmbed")},{key:"insertText",value:n(function(at,wt,Nt,ln,an){var bt=this,Kt=void 0,_n=on(at,0,Nt,ln,an),En=Qe(_n,4);return at=En[0],Kt=En[2],an=En[3],qt.call(this,function(){return bt.editor.insertText(at,wt,Kt)},an,at,wt.length)},"insertText")},{key:"isEnabled",value:n(function(){return!this.container.classList.contains("ql-disabled")},"isEnabled")},{key:"off",value:n(function(){return this.emitter.off.apply(this.emitter,arguments)},"off")},{key:"on",value:n(function(){return this.emitter.on.apply(this.emitter,arguments)},"on")},{key:"once",value:n(function(){return this.emitter.once.apply(this.emitter,arguments)},"once")},{key:"pasteHTML",value:n(function(at,wt,Nt){this.clipboard.dangerouslyPasteHTML(at,wt,Nt)},"pasteHTML")},{key:"removeFormat",value:n(function(at,wt,Nt){var ln=this,an=on(at,wt,Nt),bt=Qe(an,4);return at=bt[0],wt=bt[1],Nt=bt[3],qt.call(this,function(){return ln.editor.removeFormat(at,wt)},Nt,at)},"removeFormat")},{key:"scrollIntoView",value:n(function(){this.selection.scrollIntoView(this.scrollingContainer)},"scrollIntoView")},{key:"setContents",value:n(function(at){var wt=this,Nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:te.default.sources.API;return qt.call(this,function(){at=new Me.default(at);var ln=wt.getLength(),an=wt.editor.deleteText(0,ln),bt=wt.editor.applyDelta(at),Kt=bt.ops[bt.ops.length-1];Kt!=null&&typeof Kt.insert=="string"&&Kt.insert[Kt.insert.length-1]===`
`&&(wt.editor.deleteText(wt.getLength()-1,1),bt.delete(1));var _n=an.compose(bt);return _n},Nt)},"setContents")},{key:"setSelection",value:n(function(at,wt,Nt){if(at==null)this.selection.setRange(null,wt||zt.sources.API);else{var ln=on(at,wt,Nt),an=Qe(ln,4);at=an[0],wt=an[1],Nt=an[3],this.selection.setRange(new q.Range(at,wt),Nt),Nt!==te.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}},"setSelection")},{key:"setText",value:n(function(at){var wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:te.default.sources.API,Nt=new Me.default().insert(at);return this.setContents(Nt,wt)},"setText")},{key:"update",value:n(function(){var at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:te.default.sources.USER,wt=this.scroll.update(at);return this.selection.update(at),wt},"update")},{key:"updateContents",value:n(function(at){var wt=this,Nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:te.default.sources.API;return qt.call(this,function(){return at=new Me.default(at),wt.editor.applyDelta(at,Nt)},Nt,!0)},"updateContents")}]),zt}();yt.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},yt.events=te.default.events,yt.sources=te.default.sources,yt.version="1.3.7",yt.imports={delta:Me.default,parchment:ae.default,"core/module":de.default,"core/theme":pt.default};function Pt(zt,xt){if(xt=(0,Ce.default)(!0,{container:zt,modules:{clipboard:!0,keyboard:!0,history:!0}},xt),!xt.theme||xt.theme===yt.DEFAULTS.theme)xt.theme=pt.default;else if(xt.theme=yt.import("themes/"+xt.theme),xt.theme==null)throw new Error("Invalid theme "+xt.theme+". Did you register it?");var at=(0,Ce.default)(!0,{},xt.theme.DEFAULTS);[at,xt].forEach(function(ln){ln.modules=ln.modules||{},Object.keys(ln.modules).forEach(function(an){ln.modules[an]===!0&&(ln.modules[an]={})})});var wt=Object.keys(at.modules).concat(Object.keys(xt.modules)),Nt=wt.reduce(function(ln,an){var bt=yt.import("modules/"+an);return bt==null?rt.error("Cannot load "+an+" module. Are you sure you registered it?"):ln[an]=bt.DEFAULTS||{},ln},{});return xt.modules!=null&&xt.modules.toolbar&&xt.modules.toolbar.constructor!==Object&&(xt.modules.toolbar={container:xt.modules.toolbar}),xt=(0,Ce.default)(!0,{},yt.DEFAULTS,{modules:Nt},at,xt),["bounds","container","scrollingContainer"].forEach(function(ln){typeof xt[ln]=="string"&&(xt[ln]=ct.querySelector(xt[ln]))}),xt.modules=Object.keys(xt.modules).reduce(function(ln,an){return xt.modules[an]&&(ln[an]=xt.modules[an]),ln},{}),xt}n(Pt,"expandConfig");function qt(zt,xt,at,wt){if(this.options.strict&&!this.isEnabled()&&xt===te.default.sources.USER)return new Me.default;var Nt=at==null?null:this.getSelection(),ln=this.editor.delta,an=zt();if(Nt!=null&&(at===!0&&(at=Nt.index),wt==null?Nt=Un(Nt,an,xt):wt!==0&&(Nt=Un(Nt,at,wt,xt)),this.setSelection(Nt,te.default.sources.SILENT)),an.length()>0){var bt,Kt=[te.default.events.TEXT_CHANGE,an,ln,xt];if((bt=this.emitter).emit.apply(bt,[te.default.events.EDITOR_CHANGE].concat(Kt)),xt!==te.default.sources.SILENT){var _n;(_n=this.emitter).emit.apply(_n,Kt)}}return an}n(qt,"modify");function on(zt,xt,at,wt,Nt){var ln={};return typeof zt.index=="number"&&typeof zt.length=="number"?typeof xt!="number"?(Nt=wt,wt=at,at=xt,xt=zt.length,zt=zt.index):(xt=zt.length,zt=zt.index):typeof xt!="number"&&(Nt=wt,wt=at,at=xt,xt=0),(typeof at>"u"?"undefined":Xe(at))==="object"?(ln=at,Nt=wt):typeof at=="string"&&(wt!=null?ln[at]=wt:Nt=at),Nt=Nt||te.default.sources.API,[zt,xt,ln,Nt]}n(on,"overload");function Un(zt,xt,at,wt){if(zt==null)return null;var Nt=void 0,ln=void 0;if(xt instanceof Me.default){var an=[zt.index,zt.index+zt.length].map(function(En){return xt.transformPosition(En,wt!==te.default.sources.USER)}),bt=Qe(an,2);Nt=bt[0],ln=bt[1]}else{var Kt=[zt.index,zt.index+zt.length].map(function(En){return En<xt||En===xt&&wt===te.default.sources.USER?En:at>=0?En+at:Math.max(xt,En+at)}),_n=Qe(Kt,2);Nt=_n[0],ln=_n[1]}return new q.Range(Nt,ln-Nt)}n(Un,"shiftRange"),We.expandConfig=Pt,We.overload=on,We.default=yt},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=function(){function ue(ae,q){for(var ve=0;ve<q.length;ve++){var le=q[ve];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(ae,le.key,le)}}return n(ue,"defineProperties"),function(ae,q,ve){return q&&ue(ae.prototype,q),ve&&ue(ae,ve),ae}}(),Qe=n(function ue(ae,q,ve){ae===null&&(ae=Function.prototype);var le=Object.getOwnPropertyDescriptor(ae,q);if(le===void 0){var Ce=Object.getPrototypeOf(ae);return Ce===null?void 0:ue(Ce,q,ve)}else{if("value"in le)return le.value;var st=le.get;return st===void 0?void 0:st.call(ve)}},"get"),Ve=_e(7),Re=ce(Ve),Me=_e(0),ne=ce(Me);function ce(ue){return ue&&ue.__esModule?ue:{default:ue}}n(ce,"_interopRequireDefault");function se(ue,ae){if(!(ue instanceof ae))throw new TypeError("Cannot call a class as a function")}n(se,"_classCallCheck");function te(ue,ae){if(!ue)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ae&&(typeof ae=="object"||typeof ae=="function")?ae:ue}n(te,"_possibleConstructorReturn");function Se(ue,ae){if(typeof ae!="function"&&ae!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ae);ue.prototype=Object.create(ae&&ae.prototype,{constructor:{value:ue,enumerable:!1,writable:!0,configurable:!0}}),ae&&(Object.setPrototypeOf?Object.setPrototypeOf(ue,ae):ue.__proto__=ae)}n(Se,"_inherits");var de=function(ue){Se(ae,ue);function ae(){return se(this,ae),te(this,(ae.__proto__||Object.getPrototypeOf(ae)).apply(this,arguments))}return n(ae,"Inline"),Xe(ae,[{key:"formatAt",value:n(function(ve,le,Ce,st){if(ae.compare(this.statics.blotName,Ce)<0&&ne.default.query(Ce,ne.default.Scope.BLOT)){var Ge=this.isolate(ve,le);st&&Ge.wrap(Ce,st)}else Qe(ae.prototype.__proto__||Object.getPrototypeOf(ae.prototype),"formatAt",this).call(this,ve,le,Ce,st)},"formatAt")},{key:"optimize",value:n(function(ve){if(Qe(ae.prototype.__proto__||Object.getPrototypeOf(ae.prototype),"optimize",this).call(this,ve),this.parent instanceof ae&&ae.compare(this.statics.blotName,this.parent.statics.blotName)>0){var le=this.parent.isolate(this.offset(),this.length());this.moveChildren(le),le.wrap(this)}},"optimize")}],[{key:"compare",value:n(function(ve,le){var Ce=ae.order.indexOf(ve),st=ae.order.indexOf(le);return Ce>=0||st>=0?Ce-st:ve===le?0:ve<le?-1:1},"compare")}]),ae}(ne.default.Inline);de.allowedChildren=[de,ne.default.Embed,Re.default],de.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],We.default=de},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=_e(0),Qe=Ve(Xe);function Ve(se){return se&&se.__esModule?se:{default:se}}n(Ve,"_interopRequireDefault");function Re(se,te){if(!(se instanceof te))throw new TypeError("Cannot call a class as a function")}n(Re,"_classCallCheck");function Me(se,te){if(!se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te&&(typeof te=="object"||typeof te=="function")?te:se}n(Me,"_possibleConstructorReturn");function ne(se,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof te);se.prototype=Object.create(te&&te.prototype,{constructor:{value:se,enumerable:!1,writable:!0,configurable:!0}}),te&&(Object.setPrototypeOf?Object.setPrototypeOf(se,te):se.__proto__=te)}n(ne,"_inherits");var ce=function(se){ne(te,se);function te(){return Re(this,te),Me(this,(te.__proto__||Object.getPrototypeOf(te)).apply(this,arguments))}return n(te,"TextBlot"),te}(Qe.default.Text);We.default=ce},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=function(){function q(ve,le){for(var Ce=0;Ce<le.length;Ce++){var st=le[Ce];st.enumerable=st.enumerable||!1,st.configurable=!0,"value"in st&&(st.writable=!0),Object.defineProperty(ve,st.key,st)}}return n(q,"defineProperties"),function(ve,le,Ce){return le&&q(ve.prototype,le),Ce&&q(ve,Ce),ve}}(),Qe=n(function q(ve,le,Ce){ve===null&&(ve=Function.prototype);var st=Object.getOwnPropertyDescriptor(ve,le);if(st===void 0){var Ge=Object.getPrototypeOf(ve);return Ge===null?void 0:q(Ge,le,Ce)}else{if("value"in st)return st.value;var Je=st.get;return Je===void 0?void 0:Je.call(Ce)}},"get"),Ve=_e(74),Re=ce(Ve),Me=_e(10),ne=ce(Me);function ce(q){return q&&q.__esModule?q:{default:q}}n(ce,"_interopRequireDefault");function se(q,ve){if(!(q instanceof ve))throw new TypeError("Cannot call a class as a function")}n(se,"_classCallCheck");function te(q,ve){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ve&&(typeof ve=="object"||typeof ve=="function")?ve:q}n(te,"_possibleConstructorReturn");function Se(q,ve){if(typeof ve!="function"&&ve!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ve);q.prototype=Object.create(ve&&ve.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),ve&&(Object.setPrototypeOf?Object.setPrototypeOf(q,ve):q.__proto__=ve)}n(Se,"_inherits");var de=(0,ne.default)("quill:events"),ue=["selectionchange","mousedown","mouseup","click"];ue.forEach(function(q){ct.addEventListener(q,function(){for(var ve=arguments.length,le=Array(ve),Ce=0;Ce<ve;Ce++)le[Ce]=arguments[Ce];[].slice.call(ct.querySelectorAll(".ql-container")).forEach(function(st){if(st.__quill&&st.__quill.emitter){var Ge;(Ge=st.__quill.emitter).handleDOM.apply(Ge,le)}})})});var ae=function(q){Se(ve,q);function ve(){se(this,ve);var le=te(this,(ve.__proto__||Object.getPrototypeOf(ve)).call(this));return le.listeners={},le.on("error",de.error),le}return n(ve,"Emitter"),Xe(ve,[{key:"emit",value:n(function(){de.log.apply(de,arguments),Qe(ve.prototype.__proto__||Object.getPrototypeOf(ve.prototype),"emit",this).apply(this,arguments)},"emit")},{key:"handleDOM",value:n(function(Ce){for(var st=arguments.length,Ge=Array(st>1?st-1:0),Je=1;Je<st;Je++)Ge[Je-1]=arguments[Je];(this.listeners[Ce.type]||[]).forEach(function(pt){var He=pt.node,ke=pt.handler;(Ce.target===He||He.contains(Ce.target))&&ke.apply(void 0,[Ce].concat(Ge))})},"handleDOM")},{key:"listenDOM",value:n(function(Ce,st,Ge){this.listeners[Ce]||(this.listeners[Ce]=[]),this.listeners[Ce].push({node:st,handler:Ge})},"listenDOM")}]),ve}(Re.default);ae.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},ae.sources={API:"api",SILENT:"silent",USER:"user"},We.default=ae},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});function Xe(Ve,Re){if(!(Ve instanceof Re))throw new TypeError("Cannot call a class as a function")}n(Xe,"_classCallCheck");var Qe=n(function Ve(Re){var Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Xe(this,Ve),this.quill=Re,this.options=Me},"Module");Qe.DEFAULTS={},We.default=Qe},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=["error","warn","log","info"],Qe="warn";function Ve(Me){if(Xe.indexOf(Me)<=Xe.indexOf(Qe)){for(var ne,ce=arguments.length,se=Array(ce>1?ce-1:0),te=1;te<ce;te++)se[te-1]=arguments[te];(ne=hn)[Me].apply(ne,se)}}n(Ve,"debug");function Re(Me){return Xe.reduce(function(ne,ce){return ne[ce]=Ve.bind(hn,ce,Me),ne},{})}n(Re,"namespace"),Ve.level=Re.level=function(Me){Qe=Me},We.default=Re},function(Gt,We,_e){var Xe=_e(35),Qe=_e(63),Ve=_e(64),Re=_e(70),Me=_e(71),ne=_e(73),ce=Date.prototype.getTime;function se(ue,ae,q){var ve=q||{};return(ve.strict?Ve(ue,ae):ue===ae)?!0:!ue||!ae||typeof ue!="object"&&typeof ae!="object"?ve.strict?Ve(ue,ae):ue==ae:de(ue,ae,ve)}n(se,"deepEqual");function te(ue){return ue==null}n(te,"isUndefinedOrNull");function Se(ue){return!(!ue||typeof ue!="object"||typeof ue.length!="number"||typeof ue.copy!="function"||typeof ue.slice!="function"||ue.length>0&&typeof ue[0]!="number")}n(Se,"isBuffer");function de(ue,ae,q){var ve,le;if(typeof ue!=typeof ae||te(ue)||te(ae)||ue.prototype!==ae.prototype||Qe(ue)!==Qe(ae))return!1;var Ce=Re(ue),st=Re(ae);if(Ce!==st)return!1;if(Ce||st)return ue.source===ae.source&&Me(ue)===Me(ae);if(ne(ue)&&ne(ae))return ce.call(ue)===ce.call(ae);var Ge=Se(ue),Je=Se(ae);if(Ge!==Je)return!1;if(Ge||Je){if(ue.length!==ae.length)return!1;for(ve=0;ve<ue.length;ve++)if(ue[ve]!==ae[ve])return!1;return!0}if(typeof ue!=typeof ae)return!1;try{var pt=Xe(ue),He=Xe(ae)}catch{return!1}if(pt.length!==He.length)return!1;for(pt.sort(),He.sort(),ve=pt.length-1;ve>=0;ve--)if(pt[ve]!=He[ve])return!1;for(ve=pt.length-1;ve>=0;ve--)if(le=pt[ve],!se(ue[le],ae[le],q))return!1;return!0}n(de,"objEquiv"),Gt.exports=se},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=_e(1),Qe=function(){function Ve(Re,Me,ne){ne===void 0&&(ne={}),this.attrName=Re,this.keyName=Me;var ce=Xe.Scope.TYPE&Xe.Scope.ATTRIBUTE;ne.scope!=null?this.scope=ne.scope&Xe.Scope.LEVEL|ce:this.scope=Xe.Scope.ATTRIBUTE,ne.whitelist!=null&&(this.whitelist=ne.whitelist)}return n(Ve,"Attributor"),Ve.keys=function(Re){return[].map.call(Re.attributes,function(Me){return Me.name})},Ve.prototype.add=function(Re,Me){return this.canAdd(Re,Me)?(Re.setAttribute(this.keyName,Me),!0):!1},Ve.prototype.canAdd=function(Re,Me){var ne=Xe.query(Re,Xe.Scope.BLOT&(this.scope|Xe.Scope.TYPE));return ne==null?!1:this.whitelist==null?!0:typeof Me=="string"?this.whitelist.indexOf(Me.replace(/["']/g,""))>-1:this.whitelist.indexOf(Me)>-1},Ve.prototype.remove=function(Re){Re.removeAttribute(this.keyName)},Ve.prototype.value=function(Re){var Me=Re.getAttribute(this.keyName);return this.canAdd(Re,Me)&&Me?Me:""},Ve}();We.default=Qe},function(Gt,We,_e){"use strict";var Xe=_e(35),Qe=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Ve=Object.prototype.toString,Re=Array.prototype.concat,Me=Object.defineProperty,ne=n(function(de){return typeof de=="function"&&Ve.call(de)==="[object Function]"},"isFunction"),ce=n(function(){var de={};try{Me(de,"x",{enumerable:!1,value:de});for(var ue in de)return!1;return de.x===de}catch{return!1}},"arePropertyDescriptorsSupported"),se=Me&&ce(),te=n(function(de,ue,ae,q){ue in de&&(!ne(q)||!q())||(se?Me(de,ue,{configurable:!0,enumerable:!1,value:ae,writable:!0}):de[ue]=ae)},"defineProperty"),Se=n(function(de,ue){var ae=arguments.length>2?arguments[2]:{},q=Xe(ue);Qe&&(q=Re.call(q,Object.getOwnPropertySymbols(ue)));for(var ve=0;ve<q.length;ve+=1)te(de,q[ve],ue[q[ve]],ae[q[ve]])},"defineProperties");Se.supportsDescriptors=!!se,Gt.exports=Se},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0}),We.default=We.Code=void 0;var Xe=function(){function Je(pt,He){var ke=[],Ue=!0,rt=!1,yt=void 0;try{for(var Pt=pt[Symbol.iterator](),qt;!(Ue=(qt=Pt.next()).done)&&(ke.push(qt.value),!(He&&ke.length===He));Ue=!0);}catch(on){rt=!0,yt=on}finally{try{!Ue&&Pt.return&&Pt.return()}finally{if(rt)throw yt}}return ke}return n(Je,"sliceIterator"),function(pt,He){if(Array.isArray(pt))return pt;if(Symbol.iterator in Object(pt))return Je(pt,He);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Qe=function(){function Je(pt,He){for(var ke=0;ke<He.length;ke++){var Ue=He[ke];Ue.enumerable=Ue.enumerable||!1,Ue.configurable=!0,"value"in Ue&&(Ue.writable=!0),Object.defineProperty(pt,Ue.key,Ue)}}return n(Je,"defineProperties"),function(pt,He,ke){return He&&Je(pt.prototype,He),ke&&Je(pt,ke),pt}}(),Ve=n(function Je(pt,He,ke){pt===null&&(pt=Function.prototype);var Ue=Object.getOwnPropertyDescriptor(pt,He);if(Ue===void 0){var rt=Object.getPrototypeOf(pt);return rt===null?void 0:Je(rt,He,ke)}else{if("value"in Ue)return Ue.value;var yt=Ue.get;return yt===void 0?void 0:yt.call(ke)}},"get"),Re=_e(2),Me=q(Re),ne=_e(0),ce=q(ne),se=_e(4),te=q(se),Se=_e(6),de=q(Se),ue=_e(7),ae=q(ue);function q(Je){return Je&&Je.__esModule?Je:{default:Je}}n(q,"_interopRequireDefault");function ve(Je,pt){if(!(Je instanceof pt))throw new TypeError("Cannot call a class as a function")}n(ve,"_classCallCheck");function le(Je,pt){if(!Je)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pt&&(typeof pt=="object"||typeof pt=="function")?pt:Je}n(le,"_possibleConstructorReturn");function Ce(Je,pt){if(typeof pt!="function"&&pt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof pt);Je.prototype=Object.create(pt&&pt.prototype,{constructor:{value:Je,enumerable:!1,writable:!0,configurable:!0}}),pt&&(Object.setPrototypeOf?Object.setPrototypeOf(Je,pt):Je.__proto__=pt)}n(Ce,"_inherits");var st=function(Je){Ce(pt,Je);function pt(){return ve(this,pt),le(this,(pt.__proto__||Object.getPrototypeOf(pt)).apply(this,arguments))}return n(pt,"Code"),pt}(de.default);st.blotName="code",st.tagName="CODE";var Ge=function(Je){Ce(pt,Je);function pt(){return ve(this,pt),le(this,(pt.__proto__||Object.getPrototypeOf(pt)).apply(this,arguments))}return n(pt,"CodeBlock"),Qe(pt,[{key:"delta",value:n(function(){var ke=this,Ue=this.domNode.textContent;return Ue.endsWith(`
`)&&(Ue=Ue.slice(0,-1)),Ue.split(`
`).reduce(function(rt,yt){return rt.insert(yt).insert(`
`,ke.formats())},new Me.default)},"delta")},{key:"format",value:n(function(ke,Ue){if(!(ke===this.statics.blotName&&Ue)){var rt=this.descendant(ae.default,this.length()-1),yt=Xe(rt,1),Pt=yt[0];Pt!=null&&Pt.deleteAt(Pt.length()-1,1),Ve(pt.prototype.__proto__||Object.getPrototypeOf(pt.prototype),"format",this).call(this,ke,Ue)}},"format")},{key:"formatAt",value:n(function(ke,Ue,rt,yt){if(Ue!==0&&!(ce.default.query(rt,ce.default.Scope.BLOCK)==null||rt===this.statics.blotName&&yt===this.statics.formats(this.domNode))){var Pt=this.newlineIndex(ke);if(!(Pt<0||Pt>=ke+Ue)){var qt=this.newlineIndex(ke,!0)+1,on=Pt-qt+1,Un=this.isolate(qt,on),zt=Un.next;Un.format(rt,yt),zt instanceof pt&&zt.formatAt(0,ke-qt+Ue-on,rt,yt)}}},"formatAt")},{key:"insertAt",value:n(function(ke,Ue,rt){if(rt==null){var yt=this.descendant(ae.default,ke),Pt=Xe(yt,2),qt=Pt[0],on=Pt[1];qt.insertAt(on,Ue)}},"insertAt")},{key:"length",value:n(function(){var ke=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?ke:ke+1},"length")},{key:"newlineIndex",value:n(function(ke){var Ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Ue)return this.domNode.textContent.slice(0,ke).lastIndexOf(`
`);var rt=this.domNode.textContent.slice(ke).indexOf(`
`);return rt>-1?ke+rt:-1},"newlineIndex")},{key:"optimize",value:n(function(ke){this.domNode.textContent.endsWith(`
`)||this.appendChild(ce.default.create("text",`
`)),Ve(pt.prototype.__proto__||Object.getPrototypeOf(pt.prototype),"optimize",this).call(this,ke);var Ue=this.next;Ue!=null&&Ue.prev===this&&Ue.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===Ue.statics.formats(Ue.domNode)&&(Ue.optimize(ke),Ue.moveChildren(this),Ue.remove())},"optimize")},{key:"replace",value:n(function(ke){Ve(pt.prototype.__proto__||Object.getPrototypeOf(pt.prototype),"replace",this).call(this,ke),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(Ue){var rt=ce.default.find(Ue);rt==null?Ue.parentNode.removeChild(Ue):rt instanceof ce.default.Embed?rt.remove():rt.unwrap()})},"replace")}],[{key:"create",value:n(function(ke){var Ue=Ve(pt.__proto__||Object.getPrototypeOf(pt),"create",this).call(this,ke);return Ue.setAttribute("spellcheck",!1),Ue},"create")},{key:"formats",value:n(function(){return!0},"formats")}]),pt}(te.default);Ge.blotName="code-block",Ge.tagName="PRE",Ge.TAB="  ",We.Code=st,We.default=Ge},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(zt){return typeof zt}:function(zt){return zt&&typeof Symbol=="function"&&zt.constructor===Symbol&&zt!==Symbol.prototype?"symbol":typeof zt},Qe=function(){function zt(xt,at){var wt=[],Nt=!0,ln=!1,an=void 0;try{for(var bt=xt[Symbol.iterator](),Kt;!(Nt=(Kt=bt.next()).done)&&(wt.push(Kt.value),!(at&&wt.length===at));Nt=!0);}catch(_n){ln=!0,an=_n}finally{try{!Nt&&bt.return&&bt.return()}finally{if(ln)throw an}}return wt}return n(zt,"sliceIterator"),function(xt,at){if(Array.isArray(xt))return xt;if(Symbol.iterator in Object(xt))return zt(xt,at);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ve=function(){function zt(xt,at){for(var wt=0;wt<at.length;wt++){var Nt=at[wt];Nt.enumerable=Nt.enumerable||!1,Nt.configurable=!0,"value"in Nt&&(Nt.writable=!0),Object.defineProperty(xt,Nt.key,Nt)}}return n(zt,"defineProperties"),function(xt,at,wt){return at&&zt(xt.prototype,at),wt&&zt(xt,wt),xt}}(),Re=_e(2),Me=Ue(Re),ne=_e(21),ce=Ue(ne),se=_e(0),te=Ue(se),Se=_e(14),de=Ue(Se),ue=_e(25),ae=Ue(ue),q=_e(4),ve=Ue(q),le=_e(17),Ce=Ue(le),st=_e(22),Ge=Ue(st),Je=_e(11),pt=Ue(Je),He=_e(3),ke=Ue(He);function Ue(zt){return zt&&zt.__esModule?zt:{default:zt}}n(Ue,"_interopRequireDefault");function rt(zt,xt,at){return xt in zt?Object.defineProperty(zt,xt,{value:at,enumerable:!0,configurable:!0,writable:!0}):zt[xt]=at,zt}n(rt,"_defineProperty");function yt(zt,xt){if(!(zt instanceof xt))throw new TypeError("Cannot call a class as a function")}n(yt,"_classCallCheck");var Pt=/^[ -~]*$/,qt=function(){function zt(xt){yt(this,zt),this.scroll=xt,this.delta=this.getDelta()}return n(zt,"Editor"),Ve(zt,[{key:"applyDelta",value:n(function(at){var wt=this,Nt=!1;this.scroll.update();var ln=this.scroll.length();return this.scroll.batchStart(),at=Un(at),at.reduce(function(an,bt){var Kt=bt.retain||bt.delete||bt.insert.length||1,_n=bt.attributes||{};if(bt.insert!=null){if(typeof bt.insert=="string"){var En=bt.insert;En.endsWith(`
`)&&Nt&&(Nt=!1,En=En.slice(0,-1)),an>=ln&&!En.endsWith(`
`)&&(Nt=!0),wt.scroll.insertAt(an,En);var qn=wt.scroll.line(an),Xi=Qe(qn,2),Hr=Xi[0],jr=Xi[1],mo=(0,ke.default)({},(0,q.bubbleFormats)(Hr));if(Hr instanceof ve.default){var vn=Hr.descendant(te.default.Leaf,jr),Ra=Qe(vn,1),wn=Ra[0];mo=(0,ke.default)(mo,(0,q.bubbleFormats)(wn))}_n=ce.default.attributes.diff(mo,_n)||{}}else if(Xe(bt.insert)==="object"){var xn=Object.keys(bt.insert)[0];if(xn==null)return an;wt.scroll.insertAt(an,xn,bt.insert[xn])}ln+=Kt}return Object.keys(_n).forEach(function(Di){wt.scroll.formatAt(an,Kt,Di,_n[Di])}),an+Kt},0),at.reduce(function(an,bt){return typeof bt.delete=="number"?(wt.scroll.deleteAt(an,bt.delete),an):an+(bt.retain||bt.insert.length||1)},0),this.scroll.batchEnd(),this.update(at)},"applyDelta")},{key:"deleteText",value:n(function(at,wt){return this.scroll.deleteAt(at,wt),this.update(new Me.default().retain(at).delete(wt))},"deleteText")},{key:"formatLine",value:n(function(at,wt){var Nt=this,ln=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(ln).forEach(function(an){if(!(Nt.scroll.whitelist!=null&&!Nt.scroll.whitelist[an])){var bt=Nt.scroll.lines(at,Math.max(wt,1)),Kt=wt;bt.forEach(function(_n){var En=_n.length();if(!(_n instanceof de.default))_n.format(an,ln[an]);else{var qn=at-_n.offset(Nt.scroll),Xi=_n.newlineIndex(qn+Kt)-qn+1;_n.formatAt(qn,Xi,an,ln[an])}Kt-=En})}}),this.scroll.optimize(),this.update(new Me.default().retain(at).retain(wt,(0,Ge.default)(ln)))},"formatLine")},{key:"formatText",value:n(function(at,wt){var Nt=this,ln=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(ln).forEach(function(an){Nt.scroll.formatAt(at,wt,an,ln[an])}),this.update(new Me.default().retain(at).retain(wt,(0,Ge.default)(ln)))},"formatText")},{key:"getContents",value:n(function(at,wt){return this.delta.slice(at,at+wt)},"getContents")},{key:"getDelta",value:n(function(){return this.scroll.lines().reduce(function(at,wt){return at.concat(wt.delta())},new Me.default)},"getDelta")},{key:"getFormat",value:n(function(at){var wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Nt=[],ln=[];wt===0?this.scroll.path(at).forEach(function(bt){var Kt=Qe(bt,1),_n=Kt[0];_n instanceof ve.default?Nt.push(_n):_n instanceof te.default.Leaf&&ln.push(_n)}):(Nt=this.scroll.lines(at,wt),ln=this.scroll.descendants(te.default.Leaf,at,wt));var an=[Nt,ln].map(function(bt){if(bt.length===0)return{};for(var Kt=(0,q.bubbleFormats)(bt.shift());Object.keys(Kt).length>0;){var _n=bt.shift();if(_n==null)return Kt;Kt=on((0,q.bubbleFormats)(_n),Kt)}return Kt});return ke.default.apply(ke.default,an)},"getFormat")},{key:"getText",value:n(function(at,wt){return this.getContents(at,wt).filter(function(Nt){return typeof Nt.insert=="string"}).map(function(Nt){return Nt.insert}).join("")},"getText")},{key:"insertEmbed",value:n(function(at,wt,Nt){return this.scroll.insertAt(at,wt,Nt),this.update(new Me.default().retain(at).insert(rt({},wt,Nt)))},"insertEmbed")},{key:"insertText",value:n(function(at,wt){var Nt=this,ln=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return wt=wt.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(at,wt),Object.keys(ln).forEach(function(an){Nt.scroll.formatAt(at,wt.length,an,ln[an])}),this.update(new Me.default().retain(at).insert(wt,(0,Ge.default)(ln)))},"insertText")},{key:"isBlank",value:n(function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var at=this.scroll.children.head;return at.statics.blotName!==ve.default.blotName||at.children.length>1?!1:at.children.head instanceof Ce.default},"isBlank")},{key:"removeFormat",value:n(function(at,wt){var Nt=this.getText(at,wt),ln=this.scroll.line(at+wt),an=Qe(ln,2),bt=an[0],Kt=an[1],_n=0,En=new Me.default;bt!=null&&(bt instanceof de.default?_n=bt.newlineIndex(Kt)-Kt+1:_n=bt.length()-Kt,En=bt.delta().slice(Kt,Kt+_n-1).insert(`
`));var qn=this.getContents(at,wt+_n),Xi=qn.diff(new Me.default().insert(Nt).concat(En)),Hr=new Me.default().retain(at).concat(Xi);return this.applyDelta(Hr)},"removeFormat")},{key:"update",value:n(function(at){var wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Nt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,ln=this.delta;if(wt.length===1&&wt[0].type==="characterData"&&wt[0].target.data.match(Pt)&&te.default.find(wt[0].target)){var an=te.default.find(wt[0].target),bt=(0,q.bubbleFormats)(an),Kt=an.offset(this.scroll),_n=wt[0].oldValue.replace(ae.default.CONTENTS,""),En=new Me.default().insert(_n),qn=new Me.default().insert(an.value()),Xi=new Me.default().retain(Kt).concat(En.diff(qn,Nt));at=Xi.reduce(function(Hr,jr){return jr.insert?Hr.insert(jr.insert,bt):Hr.push(jr)},new Me.default),this.delta=ln.compose(at)}else this.delta=this.getDelta(),(!at||!(0,pt.default)(ln.compose(at),this.delta))&&(at=ln.diff(this.delta,Nt));return at},"update")}]),zt}();function on(zt,xt){return Object.keys(xt).reduce(function(at,wt){return zt[wt]==null||(xt[wt]===zt[wt]?at[wt]=xt[wt]:Array.isArray(xt[wt])?xt[wt].indexOf(zt[wt])<0&&(at[wt]=xt[wt].concat([zt[wt]])):at[wt]=[xt[wt],zt[wt]]),at},{})}n(on,"combineFormats");function Un(zt){return zt.reduce(function(xt,at){if(at.insert===1){var wt=(0,Ge.default)(at.attributes);return delete wt.image,xt.insert({image:at.attributes.image},wt)}if(at.attributes!=null&&(at.attributes.list===!0||at.attributes.bullet===!0)&&(at=(0,Ge.default)(at),at.attributes.list?at.attributes.list="ordered":(at.attributes.list="bullet",delete at.attributes.bullet)),typeof at.insert=="string"){var Nt=at.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return xt.insert(Nt,at.attributes)}return xt.push(at)},new Me.default)}n(Un,"normalizeDelta"),We.default=qt},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0}),We.default=We.Range=void 0;var Xe=function(){function Je(pt,He){var ke=[],Ue=!0,rt=!1,yt=void 0;try{for(var Pt=pt[Symbol.iterator](),qt;!(Ue=(qt=Pt.next()).done)&&(ke.push(qt.value),!(He&&ke.length===He));Ue=!0);}catch(on){rt=!0,yt=on}finally{try{!Ue&&Pt.return&&Pt.return()}finally{if(rt)throw yt}}return ke}return n(Je,"sliceIterator"),function(pt,He){if(Array.isArray(pt))return pt;if(Symbol.iterator in Object(pt))return Je(pt,He);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Qe=function(){function Je(pt,He){for(var ke=0;ke<He.length;ke++){var Ue=He[ke];Ue.enumerable=Ue.enumerable||!1,Ue.configurable=!0,"value"in Ue&&(Ue.writable=!0),Object.defineProperty(pt,Ue.key,Ue)}}return n(Je,"defineProperties"),function(pt,He,ke){return He&&Je(pt.prototype,He),ke&&Je(pt,ke),pt}}(),Ve=_e(0),Re=ae(Ve),Me=_e(22),ne=ae(Me),ce=_e(11),se=ae(ce),te=_e(8),Se=ae(te),de=_e(10),ue=ae(de);function ae(Je){return Je&&Je.__esModule?Je:{default:Je}}n(ae,"_interopRequireDefault");function q(Je){if(Array.isArray(Je)){for(var pt=0,He=Array(Je.length);pt<Je.length;pt++)He[pt]=Je[pt];return He}else return Array.from(Je)}n(q,"_toConsumableArray");function ve(Je,pt){if(!(Je instanceof pt))throw new TypeError("Cannot call a class as a function")}n(ve,"_classCallCheck");var le=(0,ue.default)("quill:selection"),Ce=n(function Je(pt){var He=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;ve(this,Je),this.index=pt,this.length=He},"Range"),st=function(){function Je(pt,He){var ke=this;ve(this,Je),this.emitter=He,this.scroll=pt,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=Re.default.create("cursor",this),this.lastRange=this.savedRange=new Ce(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",ct,function(){ke.mouseDown||Ol(ke.update.bind(ke,Se.default.sources.USER),1)}),this.emitter.on(Se.default.events.EDITOR_CHANGE,function(Ue,rt){Ue===Se.default.events.TEXT_CHANGE&&rt.length()>0&&ke.update(Se.default.sources.SILENT)}),this.emitter.on(Se.default.events.SCROLL_BEFORE_UPDATE,function(){if(ke.hasFocus()){var Ue=ke.getNativeRange();Ue!=null&&Ue.start.node!==ke.cursor.textNode&&ke.emitter.once(Se.default.events.SCROLL_UPDATE,function(){try{ke.root.contains(Ue.start.node)&&ke.root.contains(Ue.end.node)&&ke.setNativeRange(Ue.start.node,Ue.start.offset,Ue.end.node,Ue.end.offset)}catch{}})}}),this.emitter.on(Se.default.events.SCROLL_OPTIMIZE,function(Ue,rt){if(rt.range){var yt=rt.range,Pt=yt.startNode,qt=yt.startOffset,on=yt.endNode,Un=yt.endOffset;ke.setNativeRange(Pt,qt,on,Un)}}),this.update(Se.default.sources.SILENT)}return n(Je,"Selection"),Qe(Je,[{key:"handleComposition",value:n(function(){var He=this;this.root.addEventListener("compositionstart",function(){He.composing=!0}),this.root.addEventListener("compositionend",function(){if(He.composing=!1,He.cursor.parent){var ke=He.cursor.restore();if(!ke)return;Ol(function(){He.setNativeRange(ke.startNode,ke.startOffset,ke.endNode,ke.endOffset)},1)}})},"handleComposition")},{key:"handleDragging",value:n(function(){var He=this;this.emitter.listenDOM("mousedown",ct.body,function(){He.mouseDown=!0}),this.emitter.listenDOM("mouseup",ct.body,function(){He.mouseDown=!1,He.update(Se.default.sources.USER)})},"handleDragging")},{key:"focus",value:n(function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))},"focus")},{key:"format",value:n(function(He,ke){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[He])){this.scroll.update();var Ue=this.getNativeRange();if(!(Ue==null||!Ue.native.collapsed||Re.default.query(He,Re.default.Scope.BLOCK))){if(Ue.start.node!==this.cursor.textNode){var rt=Re.default.find(Ue.start.node,!1);if(rt==null)return;if(rt instanceof Re.default.Leaf){var yt=rt.split(Ue.start.offset);rt.parent.insertBefore(this.cursor,yt)}else rt.insertBefore(this.cursor,Ue.start.node);this.cursor.attach()}this.cursor.format(He,ke),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}},"format")},{key:"getBounds",value:n(function(He){var ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Ue=this.scroll.length();He=Math.min(He,Ue-1),ke=Math.min(He+ke,Ue-1)-He;var rt=void 0,yt=this.scroll.leaf(He),Pt=Xe(yt,2),qt=Pt[0],on=Pt[1];if(qt==null)return null;var Un=qt.position(on,!0),zt=Xe(Un,2);rt=zt[0],on=zt[1];var xt=ct.createRange();if(ke>0){xt.setStart(rt,on);var at=this.scroll.leaf(He+ke),wt=Xe(at,2);if(qt=wt[0],on=wt[1],qt==null)return null;var Nt=qt.position(on,!0),ln=Xe(Nt,2);return rt=ln[0],on=ln[1],xt.setEnd(rt,on),xt.getBoundingClientRect()}else{var an="left",bt=void 0;return rt instanceof Kl?(on<rt.data.length?(xt.setStart(rt,on),xt.setEnd(rt,on+1)):(xt.setStart(rt,on-1),xt.setEnd(rt,on),an="right"),bt=xt.getBoundingClientRect()):(bt=qt.domNode.getBoundingClientRect(),on>0&&(an="right")),{bottom:bt.top+bt.height,height:bt.height,left:bt[an],right:bt[an],top:bt.top,width:0}}},"getBounds")},{key:"getNativeRange",value:n(function(){var He=ct.getSelection();if(He==null||He.rangeCount<=0)return null;var ke=He.getRangeAt(0);if(ke==null)return null;var Ue=this.normalizeNative(ke);return le.info("getNativeRange",Ue),Ue},"getNativeRange")},{key:"getRange",value:n(function(){var He=this.getNativeRange();if(He==null)return[null,null];var ke=this.normalizedToRange(He);return[ke,He]},"getRange")},{key:"hasFocus",value:n(function(){return ct.activeElement===this.root},"hasFocus")},{key:"normalizedToRange",value:n(function(He){var ke=this,Ue=[[He.start.node,He.start.offset]];He.native.collapsed||Ue.push([He.end.node,He.end.offset]);var rt=Ue.map(function(qt){var on=Xe(qt,2),Un=on[0],zt=on[1],xt=Re.default.find(Un,!0),at=xt.offset(ke.scroll);return zt===0?at:xt instanceof Re.default.Container?at+xt.length():at+xt.index(Un,zt)}),yt=Math.min(Math.max.apply(Math,q(rt)),this.scroll.length()-1),Pt=Math.min.apply(Math,[yt].concat(q(rt)));return new Ce(Pt,yt-Pt)},"normalizedToRange")},{key:"normalizeNative",value:n(function(He){if(!Ge(this.root,He.startContainer)||!He.collapsed&&!Ge(this.root,He.endContainer))return null;var ke={start:{node:He.startContainer,offset:He.startOffset},end:{node:He.endContainer,offset:He.endOffset},native:He};return[ke.start,ke.end].forEach(function(Ue){for(var rt=Ue.node,yt=Ue.offset;!(rt instanceof Kl)&&rt.childNodes.length>0;)if(rt.childNodes.length>yt)rt=rt.childNodes[yt],yt=0;else if(rt.childNodes.length===yt)rt=rt.lastChild,yt=rt instanceof Kl?rt.data.length:rt.childNodes.length+1;else break;Ue.node=rt,Ue.offset=yt}),ke},"normalizeNative")},{key:"rangeToNative",value:n(function(He){var ke=this,Ue=He.collapsed?[He.index]:[He.index,He.index+He.length],rt=[],yt=this.scroll.length();return Ue.forEach(function(Pt,qt){Pt=Math.min(yt-1,Pt);var on=void 0,Un=ke.scroll.leaf(Pt),zt=Xe(Un,2),xt=zt[0],at=zt[1],wt=xt.position(at,qt!==0),Nt=Xe(wt,2);on=Nt[0],at=Nt[1],rt.push(on,at)}),rt.length<2&&(rt=rt.concat(rt)),rt},"rangeToNative")},{key:"scrollIntoView",value:n(function(He){var ke=this.lastRange;if(ke!=null){var Ue=this.getBounds(ke.index,ke.length);if(Ue!=null){var rt=this.scroll.length()-1,yt=this.scroll.line(Math.min(ke.index,rt)),Pt=Xe(yt,1),qt=Pt[0],on=qt;if(ke.length>0){var Un=this.scroll.line(Math.min(ke.index+ke.length,rt)),zt=Xe(Un,1);on=zt[0]}if(!(qt==null||on==null)){var xt=He.getBoundingClientRect();Ue.top<xt.top?He.scrollTop-=xt.top-Ue.top:Ue.bottom>xt.bottom&&(He.scrollTop+=Ue.bottom-xt.bottom)}}}},"scrollIntoView")},{key:"setNativeRange",value:n(function(He,ke){var Ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:He,rt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:ke,yt=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(le.info("setNativeRange",He,ke,Ue,rt),!(He!=null&&(this.root.parentNode==null||He.parentNode==null||Ue.parentNode==null))){var Pt=ct.getSelection();if(Pt!=null)if(He!=null){this.hasFocus()||this.root.focus();var qt=(this.getNativeRange()||{}).native;if(qt==null||yt||He!==qt.startContainer||ke!==qt.startOffset||Ue!==qt.endContainer||rt!==qt.endOffset){He.tagName=="BR"&&(ke=[].indexOf.call(He.parentNode.childNodes,He),He=He.parentNode),Ue.tagName=="BR"&&(rt=[].indexOf.call(Ue.parentNode.childNodes,Ue),Ue=Ue.parentNode);var on=ct.createRange();on.setStart(He,ke),on.setEnd(Ue,rt),Pt.removeAllRanges(),Pt.addRange(on)}}else Pt.removeAllRanges(),this.root.blur(),ct.body.focus()}},"setNativeRange")},{key:"setRange",value:n(function(He){var ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Se.default.sources.API;if(typeof ke=="string"&&(Ue=ke,ke=!1),le.info("setRange",He),He!=null){var rt=this.rangeToNative(He);this.setNativeRange.apply(this,q(rt).concat([ke]))}else this.setNativeRange(null);this.update(Ue)},"setRange")},{key:"update",value:n(function(){var He=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Se.default.sources.USER,ke=this.lastRange,Ue=this.getRange(),rt=Xe(Ue,2),yt=rt[0],Pt=rt[1];if(this.lastRange=yt,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,se.default)(ke,this.lastRange)){var qt;!this.composing&&Pt!=null&&Pt.native.collapsed&&Pt.start.node!==this.cursor.textNode&&this.cursor.restore();var on=[Se.default.events.SELECTION_CHANGE,(0,ne.default)(this.lastRange),(0,ne.default)(ke),He];if((qt=this.emitter).emit.apply(qt,[Se.default.events.EDITOR_CHANGE].concat(on)),He!==Se.default.sources.SILENT){var Un;(Un=this.emitter).emit.apply(Un,on)}}},"update")}]),Je}();function Ge(Je,pt){try{pt.parentNode}catch{return!1}return pt instanceof Kl&&(pt=pt.parentNode),Je.contains(pt)}n(Ge,"contains"),We.Range=Ce,We.default=st},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=function(){function Se(de,ue){for(var ae=0;ae<ue.length;ae++){var q=ue[ae];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(de,q.key,q)}}return n(Se,"defineProperties"),function(de,ue,ae){return ue&&Se(de.prototype,ue),ae&&Se(de,ae),de}}(),Qe=n(function Se(de,ue,ae){de===null&&(de=Function.prototype);var q=Object.getOwnPropertyDescriptor(de,ue);if(q===void 0){var ve=Object.getPrototypeOf(de);return ve===null?void 0:Se(ve,ue,ae)}else{if("value"in q)return q.value;var le=q.get;return le===void 0?void 0:le.call(ae)}},"get"),Ve=_e(0),Re=Me(Ve);function Me(Se){return Se&&Se.__esModule?Se:{default:Se}}n(Me,"_interopRequireDefault");function ne(Se,de){if(!(Se instanceof de))throw new TypeError("Cannot call a class as a function")}n(ne,"_classCallCheck");function ce(Se,de){if(!Se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return de&&(typeof de=="object"||typeof de=="function")?de:Se}n(ce,"_possibleConstructorReturn");function se(Se,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof de);Se.prototype=Object.create(de&&de.prototype,{constructor:{value:Se,enumerable:!1,writable:!0,configurable:!0}}),de&&(Object.setPrototypeOf?Object.setPrototypeOf(Se,de):Se.__proto__=de)}n(se,"_inherits");var te=function(Se){se(de,Se);function de(){return ne(this,de),ce(this,(de.__proto__||Object.getPrototypeOf(de)).apply(this,arguments))}return n(de,"Break"),Xe(de,[{key:"insertInto",value:n(function(ae,q){ae.children.length===0?Qe(de.prototype.__proto__||Object.getPrototypeOf(de.prototype),"insertInto",this).call(this,ae,q):this.remove()},"insertInto")},{key:"length",value:n(function(){return 0},"length")},{key:"value",value:n(function(){return""},"value")}],[{key:"value",value:n(function(){},"value")}]),de}(Re.default.Embed);te.blotName="break",te.tagName="BR",We.default=te},function(Gt,We,_e){"use strict";var Xe=this&&this.__extends||function(){var ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(se,te){se.__proto__=te}||function(se,te){for(var Se in te)te.hasOwnProperty(Se)&&(se[Se]=te[Se])};return function(se,te){ce(se,te);function Se(){this.constructor=se}n(Se,"__"),se.prototype=te===null?Object.create(te):(Se.prototype=te.prototype,new Se)}}();Object.defineProperty(We,"__esModule",{value:!0});var Qe=_e(54),Ve=_e(31),Re=_e(1),Me=function(ce){Xe(se,ce);function se(te){var Se=ce.call(this,te)||this;return Se.build(),Se}return n(se,"ContainerBlot"),se.prototype.appendChild=function(te){this.insertBefore(te)},se.prototype.attach=function(){ce.prototype.attach.call(this),this.children.forEach(function(te){te.attach()})},se.prototype.build=function(){var te=this;this.children=new Qe.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(Se){try{var de=ne(Se);te.insertBefore(de,te.children.head||void 0)}catch(ue){if(ue instanceof Re.ParchmentError)return;throw ue}})},se.prototype.deleteAt=function(te,Se){if(te===0&&Se===this.length())return this.remove();this.children.forEachAt(te,Se,function(de,ue,ae){de.deleteAt(ue,ae)})},se.prototype.descendant=function(te,Se){var de=this.children.find(Se),ue=de[0],ae=de[1];return te.blotName==null&&te(ue)||te.blotName!=null&&ue instanceof te?[ue,ae]:ue instanceof se?ue.descendant(te,ae):[null,-1]},se.prototype.descendants=function(te,Se,de){Se===void 0&&(Se=0),de===void 0&&(de=Number.MAX_VALUE);var ue=[],ae=de;return this.children.forEachAt(Se,de,function(q,ve,le){(te.blotName==null&&te(q)||te.blotName!=null&&q instanceof te)&&ue.push(q),q instanceof se&&(ue=ue.concat(q.descendants(te,ve,ae))),ae-=le}),ue},se.prototype.detach=function(){this.children.forEach(function(te){te.detach()}),ce.prototype.detach.call(this)},se.prototype.formatAt=function(te,Se,de,ue){this.children.forEachAt(te,Se,function(ae,q,ve){ae.formatAt(q,ve,de,ue)})},se.prototype.insertAt=function(te,Se,de){var ue=this.children.find(te),ae=ue[0],q=ue[1];if(ae)ae.insertAt(q,Se,de);else{var ve=de==null?Re.create("text",Se):Re.create(Se,de);this.appendChild(ve)}},se.prototype.insertBefore=function(te,Se){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(de){return te instanceof de}))throw new Re.ParchmentError("Cannot insert "+te.statics.blotName+" into "+this.statics.blotName);te.insertInto(this,Se)},se.prototype.length=function(){return this.children.reduce(function(te,Se){return te+Se.length()},0)},se.prototype.moveChildren=function(te,Se){this.children.forEach(function(de){te.insertBefore(de,Se)})},se.prototype.optimize=function(te){if(ce.prototype.optimize.call(this,te),this.children.length===0)if(this.statics.defaultChild!=null){var Se=Re.create(this.statics.defaultChild);this.appendChild(Se),Se.optimize(te)}else this.remove()},se.prototype.path=function(te,Se){Se===void 0&&(Se=!1);var de=this.children.find(te,Se),ue=de[0],ae=de[1],q=[[this,te]];return ue instanceof se?q.concat(ue.path(ae,Se)):(ue!=null&&q.push([ue,ae]),q)},se.prototype.removeChild=function(te){this.children.remove(te)},se.prototype.replace=function(te){te instanceof se&&te.moveChildren(this),ce.prototype.replace.call(this,te)},se.prototype.split=function(te,Se){if(Se===void 0&&(Se=!1),!Se){if(te===0)return this;if(te===this.length())return this.next}var de=this.clone();return this.parent.insertBefore(de,this.next),this.children.forEachAt(te,this.length(),function(ue,ae,q){ue=ue.split(ae,Se),de.appendChild(ue)}),de},se.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},se.prototype.update=function(te,Se){var de=this,ue=[],ae=[];te.forEach(function(q){q.target===de.domNode&&q.type==="childList"&&(ue.push.apply(ue,q.addedNodes),ae.push.apply(ae,q.removedNodes))}),ae.forEach(function(q){if(!(q.parentNode!=null&&q.tagName!=="IFRAME"&&ct.body.compareDocumentPosition(q)&Yo.DOCUMENT_POSITION_CONTAINED_BY)){var ve=Re.find(q);ve!=null&&(ve.domNode.parentNode==null||ve.domNode.parentNode===de.domNode)&&ve.detach()}}),ue.filter(function(q){return q.parentNode==de.domNode}).sort(function(q,ve){return q===ve?0:q.compareDocumentPosition(ve)&Yo.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(q){var ve=null;q.nextSibling!=null&&(ve=Re.find(q.nextSibling));var le=ne(q);(le.next!=ve||le.next==null)&&(le.parent!=null&&le.parent.removeChild(de),de.insertBefore(le,ve||void 0))})},se}(Ve.default);function ne(ce){var se=Re.find(ce);if(se==null)try{se=Re.create(ce)}catch{se=Re.create(Re.Scope.INLINE),[].slice.call(ce.childNodes).forEach(function(Se){se.domNode.appendChild(Se)}),ce.parentNode&&ce.parentNode.replaceChild(se.domNode,ce),se.attach()}return se}n(ne,"makeBlot"),We.default=Me},function(Gt,We,_e){"use strict";var Xe=this&&this.__extends||function(){var ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(se,te){se.__proto__=te}||function(se,te){for(var Se in te)te.hasOwnProperty(Se)&&(se[Se]=te[Se])};return function(se,te){ce(se,te);function Se(){this.constructor=se}n(Se,"__"),se.prototype=te===null?Object.create(te):(Se.prototype=te.prototype,new Se)}}();Object.defineProperty(We,"__esModule",{value:!0});var Qe=_e(12),Ve=_e(32),Re=_e(18),Me=_e(1),ne=function(ce){Xe(se,ce);function se(te){var Se=ce.call(this,te)||this;return Se.attributes=new Ve.default(Se.domNode),Se}return n(se,"FormatBlot"),se.formats=function(te){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return te.tagName.toLowerCase()},se.prototype.format=function(te,Se){var de=Me.query(te);de instanceof Qe.default?this.attributes.attribute(de,Se):Se&&de!=null&&(te!==this.statics.blotName||this.formats()[te]!==Se)&&this.replaceWith(te,Se)},se.prototype.formats=function(){var te=this.attributes.values(),Se=this.statics.formats(this.domNode);return Se!=null&&(te[this.statics.blotName]=Se),te},se.prototype.replaceWith=function(te,Se){var de=ce.prototype.replaceWith.call(this,te,Se);return this.attributes.copy(de),de},se.prototype.update=function(te,Se){var de=this;ce.prototype.update.call(this,te,Se),te.some(function(ue){return ue.target===de.domNode&&ue.type==="attributes"})&&this.attributes.build()},se.prototype.wrap=function(te,Se){var de=ce.prototype.wrap.call(this,te,Se);return de instanceof se&&de.statics.scope===this.statics.scope&&this.attributes.move(de),de},se}(Re.default);We.default=ne},function(Gt,We,_e){"use strict";var Xe=this&&this.__extends||function(){var Me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ne,ce){ne.__proto__=ce}||function(ne,ce){for(var se in ce)ce.hasOwnProperty(se)&&(ne[se]=ce[se])};return function(ne,ce){Me(ne,ce);function se(){this.constructor=ne}n(se,"__"),ne.prototype=ce===null?Object.create(ce):(se.prototype=ce.prototype,new se)}}();Object.defineProperty(We,"__esModule",{value:!0});var Qe=_e(31),Ve=_e(1),Re=function(Me){Xe(ne,Me);function ne(){return Me!==null&&Me.apply(this,arguments)||this}return n(ne,"LeafBlot"),ne.value=function(ce){return!0},ne.prototype.index=function(ce,se){return this.domNode===ce||this.domNode.compareDocumentPosition(ce)&Yo.DOCUMENT_POSITION_CONTAINED_BY?Math.min(se,1):-1},ne.prototype.position=function(ce,se){var te=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return ce>0&&(te+=1),[this.parent.domNode,te]},ne.prototype.value=function(){var ce;return ce={},ce[this.statics.blotName]=this.statics.value(this.domNode)||!0,ce},ne.scope=Ve.Scope.INLINE_BLOT,ne}(Qe.default);We.default=Re},function(Gt,We,_e){var Xe=_e(11),Qe=_e(3),Ve={attributes:{compose:function(Me,ne,ce){typeof Me!="object"&&(Me={}),typeof ne!="object"&&(ne={});var se=Qe(!0,{},ne);ce||(se=Object.keys(se).reduce(function(Se,de){return se[de]!=null&&(Se[de]=se[de]),Se},{}));for(var te in Me)Me[te]!==void 0&&ne[te]===void 0&&(se[te]=Me[te]);return Object.keys(se).length>0?se:void 0},diff:function(Me,ne){typeof Me!="object"&&(Me={}),typeof ne!="object"&&(ne={});var ce=Object.keys(Me).concat(Object.keys(ne)).reduce(function(se,te){return Xe(Me[te],ne[te])||(se[te]=ne[te]===void 0?null:ne[te]),se},{});return Object.keys(ce).length>0?ce:void 0},transform:function(Me,ne,ce){if(typeof Me!="object")return ne;if(typeof ne=="object"){if(!ce)return ne;var se=Object.keys(ne).reduce(function(te,Se){return Me[Se]===void 0&&(te[Se]=ne[Se]),te},{});return Object.keys(se).length>0?se:void 0}}},iterator:function(Me){return new Re(Me)},length:function(Me){return typeof Me.delete=="number"?Me.delete:typeof Me.retain=="number"?Me.retain:typeof Me.insert=="string"?Me.insert.length:1}};function Re(Me){this.ops=Me,this.index=0,this.offset=0}n(Re,"Iterator"),Re.prototype.hasNext=function(){return this.peekLength()<1/0},Re.prototype.next=function(Me){Me||(Me=1/0);var ne=this.ops[this.index];if(ne){var ce=this.offset,se=Ve.length(ne);if(Me>=se-ce?(Me=se-ce,this.index+=1,this.offset=0):this.offset+=Me,typeof ne.delete=="number")return{delete:Me};var te={};return ne.attributes&&(te.attributes=ne.attributes),typeof ne.retain=="number"?te.retain=Me:typeof ne.insert=="string"?te.insert=ne.insert.substr(ce,Me):te.insert=ne.insert,te}else return{retain:1/0}},Re.prototype.peek=function(){return this.ops[this.index]},Re.prototype.peekLength=function(){return this.ops[this.index]?Ve.length(this.ops[this.index])-this.offset:1/0},Re.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},Re.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var Me=this.offset,ne=this.index,ce=this.next(),se=this.ops.slice(this.index);return this.offset=Me,this.index=ne,[ce].concat(se)}else return[]},Gt.exports=Ve},function(Gt,We){var _e=function(){"use strict";function Xe(de,ue){return ue!=null&&de instanceof ue}n(Xe,"_instanceof");var Qe;try{Qe=Map}catch{Qe=n(function(){},"nativeMap")}var Ve;try{Ve=Set}catch{Ve=n(function(){},"nativeSet")}var Re;try{Re=Promise}catch{Re=n(function(){},"nativePromise")}function Me(de,ue,ae,q,ve){typeof ue=="object"&&(ae=ue.depth,q=ue.prototype,ve=ue.includeNonEnumerable,ue=ue.circular);var le=[],Ce=[],st=typeof Buffer<"u";typeof ue>"u"&&(ue=!0),typeof ae>"u"&&(ae=1/0);function Ge(Je,pt){if(Je===null)return null;if(pt===0)return Je;var He,ke;if(typeof Je!="object")return Je;if(Xe(Je,Qe))He=new Qe;else if(Xe(Je,Ve))He=new Ve;else if(Xe(Je,Re))He=new Re(function(xt,at){Je.then(function(wt){xt(Ge(wt,pt-1))},function(wt){at(Ge(wt,pt-1))})});else if(Me.__isArray(Je))He=[];else if(Me.__isRegExp(Je))He=new RegExp(Je.source,Se(Je)),Je.lastIndex&&(He.lastIndex=Je.lastIndex);else if(Me.__isDate(Je))He=new Date(Je.getTime());else{if(st&&Buffer.isBuffer(Je))return Buffer.allocUnsafe?He=Buffer.allocUnsafe(Je.length):He=new Buffer(Je.length),Je.copy(He),He;Xe(Je,Error)?He=Object.create(Je):typeof q>"u"?(ke=Object.getPrototypeOf(Je),He=Object.create(ke)):(He=Object.create(q),ke=q)}if(ue){var Ue=le.indexOf(Je);if(Ue!=-1)return Ce[Ue];le.push(Je),Ce.push(He)}Xe(Je,Qe)&&Je.forEach(function(xt,at){var wt=Ge(at,pt-1),Nt=Ge(xt,pt-1);He.set(wt,Nt)}),Xe(Je,Ve)&&Je.forEach(function(xt){var at=Ge(xt,pt-1);He.add(at)});for(var rt in Je){var yt;ke&&(yt=Object.getOwnPropertyDescriptor(ke,rt)),!(yt&&yt.set==null)&&(He[rt]=Ge(Je[rt],pt-1))}if(Object.getOwnPropertySymbols)for(var Pt=Object.getOwnPropertySymbols(Je),rt=0;rt<Pt.length;rt++){var qt=Pt[rt],on=Object.getOwnPropertyDescriptor(Je,qt);on&&!on.enumerable&&!ve||(He[qt]=Ge(Je[qt],pt-1),on.enumerable||Object.defineProperty(He,qt,{enumerable:!1}))}if(ve)for(var Un=Object.getOwnPropertyNames(Je),rt=0;rt<Un.length;rt++){var zt=Un[rt],on=Object.getOwnPropertyDescriptor(Je,zt);on&&on.enumerable||(He[zt]=Ge(Je[zt],pt-1),Object.defineProperty(He,zt,{enumerable:!1}))}return He}return n(Ge,"_clone"),Ge(de,ae)}n(Me,"clone"),Me.clonePrototype=n(function(ue){if(ue===null)return null;var ae=n(function(){},"c");return ae.prototype=ue,new ae},"clonePrototype");function ne(de){return Object.prototype.toString.call(de)}n(ne,"__objToStr"),Me.__objToStr=ne;function ce(de){return typeof de=="object"&&ne(de)==="[object Date]"}n(ce,"__isDate"),Me.__isDate=ce;function se(de){return typeof de=="object"&&ne(de)==="[object Array]"}n(se,"__isArray"),Me.__isArray=se;function te(de){return typeof de=="object"&&ne(de)==="[object RegExp]"}n(te,"__isRegExp"),Me.__isRegExp=te;function Se(de){var ue="";return de.global&&(ue+="g"),de.ignoreCase&&(ue+="i"),de.multiline&&(ue+="m"),ue}return n(Se,"__getRegExpFlags"),Me.__getRegExpFlags=Se,Me}();typeof Gt=="object"&&Gt.exports&&(Gt.exports=_e)},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=function(){function He(ke,Ue){var rt=[],yt=!0,Pt=!1,qt=void 0;try{for(var on=ke[Symbol.iterator](),Un;!(yt=(Un=on.next()).done)&&(rt.push(Un.value),!(Ue&&rt.length===Ue));yt=!0);}catch(zt){Pt=!0,qt=zt}finally{try{!yt&&on.return&&on.return()}finally{if(Pt)throw qt}}return rt}return n(He,"sliceIterator"),function(ke,Ue){if(Array.isArray(ke))return ke;if(Symbol.iterator in Object(ke))return He(ke,Ue);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Qe=function(){function He(ke,Ue){for(var rt=0;rt<Ue.length;rt++){var yt=Ue[rt];yt.enumerable=yt.enumerable||!1,yt.configurable=!0,"value"in yt&&(yt.writable=!0),Object.defineProperty(ke,yt.key,yt)}}return n(He,"defineProperties"),function(ke,Ue,rt){return Ue&&He(ke.prototype,Ue),rt&&He(ke,rt),ke}}(),Ve=n(function He(ke,Ue,rt){ke===null&&(ke=Function.prototype);var yt=Object.getOwnPropertyDescriptor(ke,Ue);if(yt===void 0){var Pt=Object.getPrototypeOf(ke);return Pt===null?void 0:He(Pt,Ue,rt)}else{if("value"in yt)return yt.value;var qt=yt.get;return qt===void 0?void 0:qt.call(rt)}},"get"),Re=_e(0),Me=le(Re),ne=_e(8),ce=le(ne),se=_e(4),te=le(se),Se=_e(17),de=le(Se),ue=_e(14),ae=le(ue),q=_e(26),ve=le(q);function le(He){return He&&He.__esModule?He:{default:He}}n(le,"_interopRequireDefault");function Ce(He,ke){if(!(He instanceof ke))throw new TypeError("Cannot call a class as a function")}n(Ce,"_classCallCheck");function st(He,ke){if(!He)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ke&&(typeof ke=="object"||typeof ke=="function")?ke:He}n(st,"_possibleConstructorReturn");function Ge(He,ke){if(typeof ke!="function"&&ke!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ke);He.prototype=Object.create(ke&&ke.prototype,{constructor:{value:He,enumerable:!1,writable:!0,configurable:!0}}),ke&&(Object.setPrototypeOf?Object.setPrototypeOf(He,ke):He.__proto__=ke)}n(Ge,"_inherits");function Je(He){return He instanceof te.default||He instanceof se.BlockEmbed}n(Je,"isLine");var pt=function(He){Ge(ke,He);function ke(Ue,rt){Ce(this,ke);var yt=st(this,(ke.__proto__||Object.getPrototypeOf(ke)).call(this,Ue));return yt.emitter=rt.emitter,Array.isArray(rt.whitelist)&&(yt.whitelist=rt.whitelist.reduce(function(Pt,qt){return Pt[qt]=!0,Pt},{})),yt.domNode.addEventListener("DOMNodeInserted",function(){}),yt.optimize(),yt.enable(),yt}return n(ke,"Scroll"),Qe(ke,[{key:"batchStart",value:n(function(){this.batch=!0},"batchStart")},{key:"batchEnd",value:n(function(){this.batch=!1,this.optimize()},"batchEnd")},{key:"deleteAt",value:n(function(rt,yt){var Pt=this.line(rt),qt=Xe(Pt,2),on=qt[0],Un=qt[1],zt=this.line(rt+yt),xt=Xe(zt,1),at=xt[0];if(Ve(ke.prototype.__proto__||Object.getPrototypeOf(ke.prototype),"deleteAt",this).call(this,rt,yt),at!=null&&on!==at&&Un>0){if(on instanceof se.BlockEmbed||at instanceof se.BlockEmbed){this.optimize();return}if(on instanceof ae.default){var wt=on.newlineIndex(on.length(),!0);if(wt>-1&&(on=on.split(wt+1),on===at)){this.optimize();return}}else if(at instanceof ae.default){var Nt=at.newlineIndex(0);Nt>-1&&at.split(Nt+1)}var ln=at.children.head instanceof de.default?null:at.children.head;on.moveChildren(at,ln),on.remove()}this.optimize()},"deleteAt")},{key:"enable",value:n(function(){var rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",rt)},"enable")},{key:"formatAt",value:n(function(rt,yt,Pt,qt){this.whitelist!=null&&!this.whitelist[Pt]||(Ve(ke.prototype.__proto__||Object.getPrototypeOf(ke.prototype),"formatAt",this).call(this,rt,yt,Pt,qt),this.optimize())},"formatAt")},{key:"insertAt",value:n(function(rt,yt,Pt){if(!(Pt!=null&&this.whitelist!=null&&!this.whitelist[yt])){if(rt>=this.length())if(Pt==null||Me.default.query(yt,Me.default.Scope.BLOCK)==null){var qt=Me.default.create(this.statics.defaultChild);this.appendChild(qt),Pt==null&&yt.endsWith(`
`)&&(yt=yt.slice(0,-1)),qt.insertAt(0,yt,Pt)}else{var on=Me.default.create(yt,Pt);this.appendChild(on)}else Ve(ke.prototype.__proto__||Object.getPrototypeOf(ke.prototype),"insertAt",this).call(this,rt,yt,Pt);this.optimize()}},"insertAt")},{key:"insertBefore",value:n(function(rt,yt){if(rt.statics.scope===Me.default.Scope.INLINE_BLOT){var Pt=Me.default.create(this.statics.defaultChild);Pt.appendChild(rt),rt=Pt}Ve(ke.prototype.__proto__||Object.getPrototypeOf(ke.prototype),"insertBefore",this).call(this,rt,yt)},"insertBefore")},{key:"leaf",value:n(function(rt){return this.path(rt).pop()||[null,-1]},"leaf")},{key:"line",value:n(function(rt){return rt===this.length()?this.line(rt-1):this.descendant(Je,rt)},"line")},{key:"lines",value:n(function(){var rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,Pt=n(function qt(on,Un,zt){var xt=[],at=zt;return on.children.forEachAt(Un,zt,function(wt,Nt,ln){Je(wt)?xt.push(wt):wt instanceof Me.default.Container&&(xt=xt.concat(qt(wt,Nt,at))),at-=ln}),xt},"getLines");return Pt(this,rt,yt)},"lines")},{key:"optimize",value:n(function(){var rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(Ve(ke.prototype.__proto__||Object.getPrototypeOf(ke.prototype),"optimize",this).call(this,rt,yt),rt.length>0&&this.emitter.emit(ce.default.events.SCROLL_OPTIMIZE,rt,yt))},"optimize")},{key:"path",value:n(function(rt){return Ve(ke.prototype.__proto__||Object.getPrototypeOf(ke.prototype),"path",this).call(this,rt).slice(1)},"path")},{key:"update",value:n(function(rt){if(this.batch!==!0){var yt=ce.default.sources.USER;typeof rt=="string"&&(yt=rt),Array.isArray(rt)||(rt=this.observer.takeRecords()),rt.length>0&&this.emitter.emit(ce.default.events.SCROLL_BEFORE_UPDATE,yt,rt),Ve(ke.prototype.__proto__||Object.getPrototypeOf(ke.prototype),"update",this).call(this,rt.concat([])),rt.length>0&&this.emitter.emit(ce.default.events.SCROLL_UPDATE,yt,rt)}},"update")}]),ke}(Me.default.Scroll);pt.blotName="scroll",pt.className="ql-editor",pt.tagName="DIV",pt.defaultChild="block",pt.allowedChildren=[te.default,se.BlockEmbed,ve.default],We.default=pt},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0}),We.SHORTKEY=We.default=void 0;var Xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(bt){return typeof bt}:function(bt){return bt&&typeof Symbol=="function"&&bt.constructor===Symbol&&bt!==Symbol.prototype?"symbol":typeof bt},Qe=function(){function bt(Kt,_n){var En=[],qn=!0,Xi=!1,Hr=void 0;try{for(var jr=Kt[Symbol.iterator](),mo;!(qn=(mo=jr.next()).done)&&(En.push(mo.value),!(_n&&En.length===_n));qn=!0);}catch(vn){Xi=!0,Hr=vn}finally{try{!qn&&jr.return&&jr.return()}finally{if(Xi)throw Hr}}return En}return n(bt,"sliceIterator"),function(Kt,_n){if(Array.isArray(Kt))return Kt;if(Symbol.iterator in Object(Kt))return bt(Kt,_n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ve=function(){function bt(Kt,_n){for(var En=0;En<_n.length;En++){var qn=_n[En];qn.enumerable=qn.enumerable||!1,qn.configurable=!0,"value"in qn&&(qn.writable=!0),Object.defineProperty(Kt,qn.key,qn)}}return n(bt,"defineProperties"),function(Kt,_n,En){return _n&&bt(Kt.prototype,_n),En&&bt(Kt,En),Kt}}(),Re=_e(22),Me=He(Re),ne=_e(11),ce=He(ne),se=_e(3),te=He(se),Se=_e(2),de=He(Se),ue=_e(21),ae=He(ue),q=_e(0),ve=He(q),le=_e(5),Ce=He(le),st=_e(10),Ge=He(st),Je=_e(9),pt=He(Je);function He(bt){return bt&&bt.__esModule?bt:{default:bt}}n(He,"_interopRequireDefault");function ke(bt,Kt,_n){return Kt in bt?Object.defineProperty(bt,Kt,{value:_n,enumerable:!0,configurable:!0,writable:!0}):bt[Kt]=_n,bt}n(ke,"_defineProperty");function Ue(bt,Kt){if(!(bt instanceof Kt))throw new TypeError("Cannot call a class as a function")}n(Ue,"_classCallCheck");function rt(bt,Kt){if(!bt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&(typeof Kt=="object"||typeof Kt=="function")?Kt:bt}n(rt,"_possibleConstructorReturn");function yt(bt,Kt){if(typeof Kt!="function"&&Kt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);bt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:bt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(bt,Kt):bt.__proto__=Kt)}n(yt,"_inherits");var Pt=(0,Ge.default)("quill:keyboard"),qt=/Mac/i.test(El.platform)?"metaKey":"ctrlKey",on=function(bt){yt(Kt,bt),Ve(Kt,null,[{key:"match",value:n(function(En,qn){return qn=an(qn),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Xi){return!!qn[Xi]!==En[Xi]&&qn[Xi]!==null})?!1:qn.key===(En.which||En.keyCode)},"match")}]);function Kt(_n,En){Ue(this,Kt);var qn=rt(this,(Kt.__proto__||Object.getPrototypeOf(Kt)).call(this,_n,En));return qn.bindings={},Object.keys(qn.options.bindings).forEach(function(Xi){Xi==="list autofill"&&_n.scroll.whitelist!=null&&!_n.scroll.whitelist.list||qn.options.bindings[Xi]&&qn.addBinding(qn.options.bindings[Xi])}),qn.addBinding({key:Kt.keys.ENTER,shiftKey:null},wt),qn.addBinding({key:Kt.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(El.userAgent)?(qn.addBinding({key:Kt.keys.BACKSPACE},{collapsed:!0},zt),qn.addBinding({key:Kt.keys.DELETE},{collapsed:!0},xt)):(qn.addBinding({key:Kt.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},zt),qn.addBinding({key:Kt.keys.DELETE},{collapsed:!0,suffix:/^.?$/},xt)),qn.addBinding({key:Kt.keys.BACKSPACE},{collapsed:!1},at),qn.addBinding({key:Kt.keys.DELETE},{collapsed:!1},at),qn.addBinding({key:Kt.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},zt),qn.listen(),qn}return n(Kt,"Keyboard"),Ve(Kt,[{key:"addBinding",value:n(function(En){var qn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Xi=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Hr=an(En);if(Hr==null||Hr.key==null)return Pt.warn("Attempted to add invalid keyboard binding",Hr);typeof qn=="function"&&(qn={handler:qn}),typeof Xi=="function"&&(Xi={handler:Xi}),Hr=(0,te.default)(Hr,qn,Xi),this.bindings[Hr.key]=this.bindings[Hr.key]||[],this.bindings[Hr.key].push(Hr)},"addBinding")},{key:"listen",value:n(function(){var En=this;this.quill.root.addEventListener("keydown",function(qn){if(!qn.defaultPrevented){var Xi=qn.which||qn.keyCode,Hr=(En.bindings[Xi]||[]).filter(function(T){return Kt.match(qn,T)});if(Hr.length!==0){var jr=En.quill.getSelection();if(!(jr==null||!En.quill.hasFocus())){var mo=En.quill.getLine(jr.index),vn=Qe(mo,2),Ra=vn[0],wn=vn[1],xn=En.quill.getLeaf(jr.index),Di=Qe(xn,2),Hi=Di[0],Ri=Di[1],lr=jr.length===0?[Hi,Ri]:En.quill.getLeaf(jr.index+jr.length),Tr=Qe(lr,2),eo=Tr[0],Ma=Tr[1],Bs=Hi instanceof ve.default.Text?Hi.value().slice(0,Ri):"",cs=eo instanceof ve.default.Text?eo.value().slice(Ma):"",A={collapsed:jr.length===0,empty:jr.length===0&&Ra.length()<=1,format:En.quill.getFormat(jr),offset:wn,prefix:Bs,suffix:cs},E=Hr.some(function(T){if(T.collapsed!=null&&T.collapsed!==A.collapsed||T.empty!=null&&T.empty!==A.empty||T.offset!=null&&T.offset!==A.offset)return!1;if(Array.isArray(T.format)){if(T.format.every(function(P){return A.format[P]==null}))return!1}else if(Xe(T.format)==="object"&&!Object.keys(T.format).every(function(P){return T.format[P]===!0?A.format[P]!=null:T.format[P]===!1?A.format[P]==null:(0,ce.default)(T.format[P],A.format[P])}))return!1;return T.prefix!=null&&!T.prefix.test(A.prefix)||T.suffix!=null&&!T.suffix.test(A.suffix)?!1:T.handler.call(En,jr,A)!==!0});E&&qn.preventDefault()}}}})},"listen")}]),Kt}(pt.default);on.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},on.DEFAULTS={bindings:{bold:ln("bold"),italic:ln("italic"),underline:ln("underline"),indent:{key:on.keys.TAB,format:["blockquote","indent","list"],handler:n(function(Kt,_n){if(_n.collapsed&&_n.offset!==0)return!0;this.quill.format("indent","+1",Ce.default.sources.USER)},"handler")},outdent:{key:on.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:n(function(Kt,_n){if(_n.collapsed&&_n.offset!==0)return!0;this.quill.format("indent","-1",Ce.default.sources.USER)},"handler")},"outdent backspace":{key:on.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:n(function(Kt,_n){_n.format.indent!=null?this.quill.format("indent","-1",Ce.default.sources.USER):_n.format.list!=null&&this.quill.format("list",!1,Ce.default.sources.USER)},"handler")},"indent code-block":Nt(!0),"outdent code-block":Nt(!1),"remove tab":{key:on.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:n(function(Kt){this.quill.deleteText(Kt.index-1,1,Ce.default.sources.USER)},"handler")},tab:{key:on.keys.TAB,handler:n(function(Kt){this.quill.history.cutoff();var _n=new de.default().retain(Kt.index).delete(Kt.length).insert("	");this.quill.updateContents(_n,Ce.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Kt.index+1,Ce.default.sources.SILENT)},"handler")},"list empty enter":{key:on.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:n(function(Kt,_n){this.quill.format("list",!1,Ce.default.sources.USER),_n.format.indent&&this.quill.format("indent",!1,Ce.default.sources.USER)},"handler")},"checklist enter":{key:on.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:n(function(Kt){var _n=this.quill.getLine(Kt.index),En=Qe(_n,2),qn=En[0],Xi=En[1],Hr=(0,te.default)({},qn.formats(),{list:"checked"}),jr=new de.default().retain(Kt.index).insert(`
`,Hr).retain(qn.length()-Xi-1).retain(1,{list:"unchecked"});this.quill.updateContents(jr,Ce.default.sources.USER),this.quill.setSelection(Kt.index+1,Ce.default.sources.SILENT),this.quill.scrollIntoView()},"handler")},"header enter":{key:on.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:n(function(Kt,_n){var En=this.quill.getLine(Kt.index),qn=Qe(En,2),Xi=qn[0],Hr=qn[1],jr=new de.default().retain(Kt.index).insert(`
`,_n.format).retain(Xi.length()-Hr-1).retain(1,{header:null});this.quill.updateContents(jr,Ce.default.sources.USER),this.quill.setSelection(Kt.index+1,Ce.default.sources.SILENT),this.quill.scrollIntoView()},"handler")},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:n(function(Kt,_n){var En=_n.prefix.length,qn=this.quill.getLine(Kt.index),Xi=Qe(qn,2),Hr=Xi[0],jr=Xi[1];if(jr>En)return!0;var mo=void 0;switch(_n.prefix.trim()){case"[]":case"[ ]":mo="unchecked";break;case"[x]":mo="checked";break;case"-":case"*":mo="bullet";break;default:mo="ordered"}this.quill.insertText(Kt.index," ",Ce.default.sources.USER),this.quill.history.cutoff();var vn=new de.default().retain(Kt.index-jr).delete(En+1).retain(Hr.length()-2-jr).retain(1,{list:mo});this.quill.updateContents(vn,Ce.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Kt.index-En,Ce.default.sources.SILENT)},"handler")},"code exit":{key:on.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:n(function(Kt){var _n=this.quill.getLine(Kt.index),En=Qe(_n,2),qn=En[0],Xi=En[1],Hr=new de.default().retain(Kt.index+qn.length()-Xi-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Hr,Ce.default.sources.USER)},"handler")},"embed left":Un(on.keys.LEFT,!1),"embed left shift":Un(on.keys.LEFT,!0),"embed right":Un(on.keys.RIGHT,!1),"embed right shift":Un(on.keys.RIGHT,!0)}};function Un(bt,Kt){var _n,En=bt===on.keys.LEFT?"prefix":"suffix";return _n={key:bt,shiftKey:Kt,altKey:null},ke(_n,En,/^$/),ke(_n,"handler",n(function(Xi){var Hr=Xi.index;bt===on.keys.RIGHT&&(Hr+=Xi.length+1);var jr=this.quill.getLeaf(Hr),mo=Qe(jr,1),vn=mo[0];return vn instanceof ve.default.Embed?(bt===on.keys.LEFT?Kt?this.quill.setSelection(Xi.index-1,Xi.length+1,Ce.default.sources.USER):this.quill.setSelection(Xi.index-1,Ce.default.sources.USER):Kt?this.quill.setSelection(Xi.index,Xi.length+1,Ce.default.sources.USER):this.quill.setSelection(Xi.index+Xi.length+1,Ce.default.sources.USER),!1):!0},"handler")),_n}n(Un,"makeEmbedArrowHandler");function zt(bt,Kt){if(!(bt.index===0||this.quill.getLength()<=1)){var _n=this.quill.getLine(bt.index),En=Qe(_n,1),qn=En[0],Xi={};if(Kt.offset===0){var Hr=this.quill.getLine(bt.index-1),jr=Qe(Hr,1),mo=jr[0];if(mo!=null&&mo.length()>1){var vn=qn.formats(),Ra=this.quill.getFormat(bt.index-1,1);Xi=ae.default.attributes.diff(vn,Ra)||{}}}var wn=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(Kt.prefix)?2:1;this.quill.deleteText(bt.index-wn,wn,Ce.default.sources.USER),Object.keys(Xi).length>0&&this.quill.formatLine(bt.index-wn,wn,Xi,Ce.default.sources.USER),this.quill.focus()}}n(zt,"handleBackspace");function xt(bt,Kt){var _n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(Kt.suffix)?2:1;if(!(bt.index>=this.quill.getLength()-_n)){var En={},qn=0,Xi=this.quill.getLine(bt.index),Hr=Qe(Xi,1),jr=Hr[0];if(Kt.offset>=jr.length()-1){var mo=this.quill.getLine(bt.index+1),vn=Qe(mo,1),Ra=vn[0];if(Ra){var wn=jr.formats(),xn=this.quill.getFormat(bt.index,1);En=ae.default.attributes.diff(wn,xn)||{},qn=Ra.length()}}this.quill.deleteText(bt.index,_n,Ce.default.sources.USER),Object.keys(En).length>0&&this.quill.formatLine(bt.index+qn-1,_n,En,Ce.default.sources.USER)}}n(xt,"handleDelete");function at(bt){var Kt=this.quill.getLines(bt),_n={};if(Kt.length>1){var En=Kt[0].formats(),qn=Kt[Kt.length-1].formats();_n=ae.default.attributes.diff(qn,En)||{}}this.quill.deleteText(bt,Ce.default.sources.USER),Object.keys(_n).length>0&&this.quill.formatLine(bt.index,1,_n,Ce.default.sources.USER),this.quill.setSelection(bt.index,Ce.default.sources.SILENT),this.quill.focus()}n(at,"handleDeleteRange");function wt(bt,Kt){var _n=this;bt.length>0&&this.quill.scroll.deleteAt(bt.index,bt.length);var En=Object.keys(Kt.format).reduce(function(qn,Xi){return ve.default.query(Xi,ve.default.Scope.BLOCK)&&!Array.isArray(Kt.format[Xi])&&(qn[Xi]=Kt.format[Xi]),qn},{});this.quill.insertText(bt.index,`
`,En,Ce.default.sources.USER),this.quill.setSelection(bt.index+1,Ce.default.sources.SILENT),this.quill.focus(),Object.keys(Kt.format).forEach(function(qn){En[qn]==null&&(Array.isArray(Kt.format[qn])||qn!=="link"&&_n.quill.format(qn,Kt.format[qn],Ce.default.sources.USER))})}n(wt,"handleEnter");function Nt(bt){return{key:on.keys.TAB,shiftKey:!bt,format:{"code-block":!0},handler:n(function(_n){var En=ve.default.query("code-block"),qn=_n.index,Xi=_n.length,Hr=this.quill.scroll.descendant(En,qn),jr=Qe(Hr,2),mo=jr[0],vn=jr[1];if(mo!=null){var Ra=this.quill.getIndex(mo),wn=mo.newlineIndex(vn,!0)+1,xn=mo.newlineIndex(Ra+vn+Xi),Di=mo.domNode.textContent.slice(wn,xn).split(`
`);vn=0,Di.forEach(function(Hi,Ri){bt?(mo.insertAt(wn+vn,En.TAB),vn+=En.TAB.length,Ri===0?qn+=En.TAB.length:Xi+=En.TAB.length):Hi.startsWith(En.TAB)&&(mo.deleteAt(wn+vn,En.TAB.length),vn-=En.TAB.length,Ri===0?qn-=En.TAB.length:Xi-=En.TAB.length),vn+=Hi.length+1}),this.quill.update(Ce.default.sources.USER),this.quill.setSelection(qn,Xi,Ce.default.sources.SILENT)}},"handler")}}n(Nt,"makeCodeBlockHandler");function ln(bt){return{key:bt[0].toUpperCase(),shortKey:!0,handler:n(function(_n,En){this.quill.format(bt,!En.format[bt],Ce.default.sources.USER)},"handler")}}n(ln,"makeFormatHandler");function an(bt){if(typeof bt=="string"||typeof bt=="number")return an({key:bt});if((typeof bt>"u"?"undefined":Xe(bt))==="object"&&(bt=(0,Me.default)(bt,!1)),typeof bt.key=="string")if(on.keys[bt.key.toUpperCase()]!=null)bt.key=on.keys[bt.key.toUpperCase()];else if(bt.key.length===1)bt.key=bt.key.toUpperCase().charCodeAt(0);else return null;return bt.shortKey&&(bt[qt]=bt.shortKey,delete bt.shortKey),bt}n(an,"normalize"),We.default=on,We.SHORTKEY=qt},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=function(){function ae(q,ve){var le=[],Ce=!0,st=!1,Ge=void 0;try{for(var Je=q[Symbol.iterator](),pt;!(Ce=(pt=Je.next()).done)&&(le.push(pt.value),!(ve&&le.length===ve));Ce=!0);}catch(He){st=!0,Ge=He}finally{try{!Ce&&Je.return&&Je.return()}finally{if(st)throw Ge}}return le}return n(ae,"sliceIterator"),function(q,ve){if(Array.isArray(q))return q;if(Symbol.iterator in Object(q))return ae(q,ve);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Qe=n(function ae(q,ve,le){q===null&&(q=Function.prototype);var Ce=Object.getOwnPropertyDescriptor(q,ve);if(Ce===void 0){var st=Object.getPrototypeOf(q);return st===null?void 0:ae(st,ve,le)}else{if("value"in Ce)return Ce.value;var Ge=Ce.get;return Ge===void 0?void 0:Ge.call(le)}},"get"),Ve=function(){function ae(q,ve){for(var le=0;le<ve.length;le++){var Ce=ve[le];Ce.enumerable=Ce.enumerable||!1,Ce.configurable=!0,"value"in Ce&&(Ce.writable=!0),Object.defineProperty(q,Ce.key,Ce)}}return n(ae,"defineProperties"),function(q,ve,le){return ve&&ae(q.prototype,ve),le&&ae(q,le),q}}(),Re=_e(0),Me=se(Re),ne=_e(7),ce=se(ne);function se(ae){return ae&&ae.__esModule?ae:{default:ae}}n(se,"_interopRequireDefault");function te(ae,q){if(!(ae instanceof q))throw new TypeError("Cannot call a class as a function")}n(te,"_classCallCheck");function Se(ae,q){if(!ae)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q&&(typeof q=="object"||typeof q=="function")?q:ae}n(Se,"_possibleConstructorReturn");function de(ae,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof q);ae.prototype=Object.create(q&&q.prototype,{constructor:{value:ae,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(ae,q):ae.__proto__=q)}n(de,"_inherits");var ue=function(ae){de(q,ae),Ve(q,null,[{key:"value",value:n(function(){},"value")}]);function q(ve,le){te(this,q);var Ce=Se(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,ve));return Ce.selection=le,Ce.textNode=ct.createTextNode(q.CONTENTS),Ce.domNode.appendChild(Ce.textNode),Ce._length=0,Ce}return n(q,"Cursor"),Ve(q,[{key:"detach",value:n(function(){this.parent!=null&&this.parent.removeChild(this)},"detach")},{key:"format",value:n(function(le,Ce){if(this._length!==0)return Qe(q.prototype.__proto__||Object.getPrototypeOf(q.prototype),"format",this).call(this,le,Ce);for(var st=this,Ge=0;st!=null&&st.statics.scope!==Me.default.Scope.BLOCK_BLOT;)Ge+=st.offset(st.parent),st=st.parent;st!=null&&(this._length=q.CONTENTS.length,st.optimize(),st.formatAt(Ge,q.CONTENTS.length,le,Ce),this._length=0)},"format")},{key:"index",value:n(function(le,Ce){return le===this.textNode?0:Qe(q.prototype.__proto__||Object.getPrototypeOf(q.prototype),"index",this).call(this,le,Ce)},"index")},{key:"length",value:n(function(){return this._length},"length")},{key:"position",value:n(function(){return[this.textNode,this.textNode.data.length]},"position")},{key:"remove",value:n(function(){Qe(q.prototype.__proto__||Object.getPrototypeOf(q.prototype),"remove",this).call(this),this.parent=null},"remove")},{key:"restore",value:n(function(){if(!(this.selection.composing||this.parent==null)){var le=this.textNode,Ce=this.selection.getNativeRange(),st=void 0,Ge=void 0,Je=void 0;if(Ce!=null&&Ce.start.node===le&&Ce.end.node===le){var pt=[le,Ce.start.offset,Ce.end.offset];st=pt[0],Ge=pt[1],Je=pt[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==q.CONTENTS){var He=this.textNode.data.split(q.CONTENTS).join("");this.next instanceof ce.default?(st=this.next.domNode,this.next.insertAt(0,He),this.textNode.data=q.CONTENTS):(this.textNode.data=He,this.parent.insertBefore(Me.default.create(this.textNode),this),this.textNode=ct.createTextNode(q.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),Ge!=null){var ke=[Ge,Je].map(function(rt){return Math.max(0,Math.min(st.data.length,rt-1))}),Ue=Xe(ke,2);return Ge=Ue[0],Je=Ue[1],{startNode:st,startOffset:Ge,endNode:st,endOffset:Je}}}},"restore")},{key:"update",value:n(function(le,Ce){var st=this;if(le.some(function(Je){return Je.type==="characterData"&&Je.target===st.textNode})){var Ge=this.restore();Ge&&(Ce.range=Ge)}},"update")},{key:"value",value:n(function(){return""},"value")}]),q}(Me.default.Embed);ue.blotName="cursor",ue.className="ql-cursor",ue.tagName="span",ue.CONTENTS="\uFEFF",We.default=ue},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=_e(0),Qe=Me(Xe),Ve=_e(4),Re=Me(Ve);function Me(Se){return Se&&Se.__esModule?Se:{default:Se}}n(Me,"_interopRequireDefault");function ne(Se,de){if(!(Se instanceof de))throw new TypeError("Cannot call a class as a function")}n(ne,"_classCallCheck");function ce(Se,de){if(!Se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return de&&(typeof de=="object"||typeof de=="function")?de:Se}n(ce,"_possibleConstructorReturn");function se(Se,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof de);Se.prototype=Object.create(de&&de.prototype,{constructor:{value:Se,enumerable:!1,writable:!0,configurable:!0}}),de&&(Object.setPrototypeOf?Object.setPrototypeOf(Se,de):Se.__proto__=de)}n(se,"_inherits");var te=function(Se){se(de,Se);function de(){return ne(this,de),ce(this,(de.__proto__||Object.getPrototypeOf(de)).apply(this,arguments))}return n(de,"Container"),de}(Qe.default.Container);te.allowedChildren=[Re.default,Ve.BlockEmbed,te],We.default=te},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0}),We.ColorStyle=We.ColorClass=We.ColorAttributor=void 0;var Xe=function(){function ue(ae,q){for(var ve=0;ve<q.length;ve++){var le=q[ve];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(ae,le.key,le)}}return n(ue,"defineProperties"),function(ae,q,ve){return q&&ue(ae.prototype,q),ve&&ue(ae,ve),ae}}(),Qe=n(function ue(ae,q,ve){ae===null&&(ae=Function.prototype);var le=Object.getOwnPropertyDescriptor(ae,q);if(le===void 0){var Ce=Object.getPrototypeOf(ae);return Ce===null?void 0:ue(Ce,q,ve)}else{if("value"in le)return le.value;var st=le.get;return st===void 0?void 0:st.call(ve)}},"get"),Ve=_e(0),Re=Me(Ve);function Me(ue){return ue&&ue.__esModule?ue:{default:ue}}n(Me,"_interopRequireDefault");function ne(ue,ae){if(!(ue instanceof ae))throw new TypeError("Cannot call a class as a function")}n(ne,"_classCallCheck");function ce(ue,ae){if(!ue)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ae&&(typeof ae=="object"||typeof ae=="function")?ae:ue}n(ce,"_possibleConstructorReturn");function se(ue,ae){if(typeof ae!="function"&&ae!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ae);ue.prototype=Object.create(ae&&ae.prototype,{constructor:{value:ue,enumerable:!1,writable:!0,configurable:!0}}),ae&&(Object.setPrototypeOf?Object.setPrototypeOf(ue,ae):ue.__proto__=ae)}n(se,"_inherits");var te=function(ue){se(ae,ue);function ae(){return ne(this,ae),ce(this,(ae.__proto__||Object.getPrototypeOf(ae)).apply(this,arguments))}return n(ae,"ColorAttributor"),Xe(ae,[{key:"value",value:n(function(ve){var le=Qe(ae.prototype.__proto__||Object.getPrototypeOf(ae.prototype),"value",this).call(this,ve);return le.startsWith("rgb(")?(le=le.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+le.split(",").map(function(Ce){return("00"+parseInt(Ce).toString(16)).slice(-2)}).join("")):le},"value")}]),ae}(Re.default.Attributor.Style),Se=new Re.default.Attributor.Class("color","ql-color",{scope:Re.default.Scope.INLINE}),de=new te("color","color",{scope:Re.default.Scope.INLINE});We.ColorAttributor=te,We.ColorClass=Se,We.ColorStyle=de},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0}),We.sanitize=We.default=void 0;var Xe=function(){function de(ue,ae){for(var q=0;q<ae.length;q++){var ve=ae[q];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(ue,ve.key,ve)}}return n(de,"defineProperties"),function(ue,ae,q){return ae&&de(ue.prototype,ae),q&&de(ue,q),ue}}(),Qe=n(function de(ue,ae,q){ue===null&&(ue=Function.prototype);var ve=Object.getOwnPropertyDescriptor(ue,ae);if(ve===void 0){var le=Object.getPrototypeOf(ue);return le===null?void 0:de(le,ae,q)}else{if("value"in ve)return ve.value;var Ce=ve.get;return Ce===void 0?void 0:Ce.call(q)}},"get"),Ve=_e(6),Re=Me(Ve);function Me(de){return de&&de.__esModule?de:{default:de}}n(Me,"_interopRequireDefault");function ne(de,ue){if(!(de instanceof ue))throw new TypeError("Cannot call a class as a function")}n(ne,"_classCallCheck");function ce(de,ue){if(!de)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ue&&(typeof ue=="object"||typeof ue=="function")?ue:de}n(ce,"_possibleConstructorReturn");function se(de,ue){if(typeof ue!="function"&&ue!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ue);de.prototype=Object.create(ue&&ue.prototype,{constructor:{value:de,enumerable:!1,writable:!0,configurable:!0}}),ue&&(Object.setPrototypeOf?Object.setPrototypeOf(de,ue):de.__proto__=ue)}n(se,"_inherits");var te=function(de){se(ue,de);function ue(){return ne(this,ue),ce(this,(ue.__proto__||Object.getPrototypeOf(ue)).apply(this,arguments))}return n(ue,"Link"),Xe(ue,[{key:"format",value:n(function(q,ve){if(q!==this.statics.blotName||!ve)return Qe(ue.prototype.__proto__||Object.getPrototypeOf(ue.prototype),"format",this).call(this,q,ve);ve=this.constructor.sanitize(ve),this.domNode.setAttribute("href",ve)},"format")}],[{key:"create",value:n(function(q){var ve=Qe(ue.__proto__||Object.getPrototypeOf(ue),"create",this).call(this,q);return q=this.sanitize(q),ve.setAttribute("href",q),ve.setAttribute("rel","noopener noreferrer"),ve.setAttribute("target","_blank"),ve},"create")},{key:"formats",value:n(function(q){return q.getAttribute("href")},"formats")},{key:"sanitize",value:n(function(q){return Se(q,this.PROTOCOL_WHITELIST)?q:this.SANITIZED_URL},"sanitize")}]),ue}(Re.default);te.blotName="link",te.tagName="A",te.SANITIZED_URL="about:blank",te.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function Se(de,ue){var ae=ct.createElement("a");ae.href=de;var q=ae.href.slice(0,ae.href.indexOf(":"));return ue.indexOf(q)>-1}n(Se,"_sanitize"),We.default=te,We.sanitize=Se},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ue){return typeof ue}:function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue},Qe=function(){function ue(ae,q){for(var ve=0;ve<q.length;ve++){var le=q[ve];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(ae,le.key,le)}}return n(ue,"defineProperties"),function(ae,q,ve){return q&&ue(ae.prototype,q),ve&&ue(ae,ve),ae}}(),Ve=_e(24),Re=ce(Ve),Me=_e(127),ne=ce(Me);function ce(ue){return ue&&ue.__esModule?ue:{default:ue}}n(ce,"_interopRequireDefault");function se(ue,ae){if(!(ue instanceof ae))throw new TypeError("Cannot call a class as a function")}n(se,"_classCallCheck");var te=0;function Se(ue,ae){ue.setAttribute(ae,ue.getAttribute(ae)!=="true")}n(Se,"toggleAriaAttribute");var de=function(){function ue(ae){var q=this;se(this,ue),this.select=ae,this.container=ct.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){q.togglePicker()}),this.label.addEventListener("keydown",function(ve){switch(ve.keyCode){case Re.default.keys.ENTER:q.togglePicker();break;case Re.default.keys.ESCAPE:q.escape(),ve.preventDefault();break;default:}}),this.select.addEventListener("change",this.update.bind(this))}return n(ue,"Picker"),Qe(ue,[{key:"togglePicker",value:n(function(){this.container.classList.toggle("ql-expanded"),Se(this.label,"aria-expanded"),Se(this.options,"aria-hidden")},"togglePicker")},{key:"buildItem",value:n(function(q){var ve=this,le=ct.createElement("span");return le.tabIndex="0",le.setAttribute("role","button"),le.classList.add("ql-picker-item"),q.hasAttribute("value")&&le.setAttribute("data-value",q.getAttribute("value")),q.textContent&&le.setAttribute("data-label",q.textContent),le.addEventListener("click",function(){ve.selectItem(le,!0)}),le.addEventListener("keydown",function(Ce){switch(Ce.keyCode){case Re.default.keys.ENTER:ve.selectItem(le,!0),Ce.preventDefault();break;case Re.default.keys.ESCAPE:ve.escape(),Ce.preventDefault();break;default:}}),le},"buildItem")},{key:"buildLabel",value:n(function(){var q=ct.createElement("span");return q.classList.add("ql-picker-label"),q.innerHTML=ne.default,q.tabIndex="0",q.setAttribute("role","button"),q.setAttribute("aria-expanded","false"),this.container.appendChild(q),q},"buildLabel")},{key:"buildOptions",value:n(function(){var q=this,ve=ct.createElement("span");ve.classList.add("ql-picker-options"),ve.setAttribute("aria-hidden","true"),ve.tabIndex="-1",ve.id="ql-picker-options-"+te,te+=1,this.label.setAttribute("aria-controls",ve.id),this.options=ve,[].slice.call(this.select.options).forEach(function(le){var Ce=q.buildItem(le);ve.appendChild(Ce),le.selected===!0&&q.selectItem(Ce)}),this.container.appendChild(ve)},"buildOptions")},{key:"buildPicker",value:n(function(){var q=this;[].slice.call(this.select.attributes).forEach(function(ve){q.container.setAttribute(ve.name,ve.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()},"buildPicker")},{key:"escape",value:n(function(){var q=this;this.close(),Ol(function(){return q.label.focus()},1)},"escape")},{key:"close",value:n(function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")},"close")},{key:"selectItem",value:n(function(q){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,le=this.container.querySelector(".ql-selected");if(q!==le&&(le!=null&&le.classList.remove("ql-selected"),q!=null&&(q.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(q.parentNode.children,q),q.hasAttribute("data-value")?this.label.setAttribute("data-value",q.getAttribute("data-value")):this.label.removeAttribute("data-value"),q.hasAttribute("data-label")?this.label.setAttribute("data-label",q.getAttribute("data-label")):this.label.removeAttribute("data-label"),ve))){if(typeof Ho=="function")this.select.dispatchEvent(new Ho("change"));else if((typeof Ho>"u"?"undefined":Xe(Ho))==="object"){var Ce=ct.createEvent("Event");Ce.initEvent("change",!0,!0),this.select.dispatchEvent(Ce)}this.close()}},"selectItem")},{key:"update",value:n(function(){var q=void 0;if(this.select.selectedIndex>-1){var ve=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];q=this.select.options[this.select.selectedIndex],this.selectItem(ve)}else this.selectItem(null);var le=q!=null&&q!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",le)},"update")}]),ue}();We.default=de},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=_e(0),Qe=Pt(Xe),Ve=_e(5),Re=Pt(Ve),Me=_e(4),ne=Pt(Me),ce=_e(17),se=Pt(ce),te=_e(26),Se=Pt(te),de=_e(25),ue=Pt(de),ae=_e(45),q=Pt(ae),ve=_e(6),le=Pt(ve),Ce=_e(23),st=Pt(Ce),Ge=_e(7),Je=Pt(Ge),pt=_e(75),He=Pt(pt),ke=_e(52),Ue=Pt(ke),rt=_e(24),yt=Pt(rt);function Pt(qt){return qt&&qt.__esModule?qt:{default:qt}}n(Pt,"_interopRequireDefault"),Re.default.register({"blots/block":ne.default,"blots/block/embed":Me.BlockEmbed,"blots/break":se.default,"blots/container":Se.default,"blots/cursor":ue.default,"blots/embed":q.default,"blots/inline":le.default,"blots/scroll":st.default,"blots/text":Je.default,"modules/clipboard":He.default,"modules/history":Ue.default,"modules/keyboard":yt.default}),Qe.default.register(ne.default,se.default,ue.default,le.default,st.default,Je.default),We.default=Re.default},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=_e(1),Qe=function(){function Ve(Re){this.domNode=Re,this.domNode[Xe.DATA_KEY]={blot:this}}return n(Ve,"ShadowBlot"),Object.defineProperty(Ve.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),Ve.create=function(Re){if(this.tagName==null)throw new Xe.ParchmentError("Blot definition missing tagName");var Me;return Array.isArray(this.tagName)?(typeof Re=="string"&&(Re=Re.toUpperCase(),parseInt(Re).toString()===Re&&(Re=parseInt(Re))),typeof Re=="number"?Me=ct.createElement(this.tagName[Re-1]):this.tagName.indexOf(Re)>-1?Me=ct.createElement(Re):Me=ct.createElement(this.tagName[0])):Me=ct.createElement(this.tagName),this.className&&Me.classList.add(this.className),Me},Ve.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},Ve.prototype.clone=function(){var Re=this.domNode.cloneNode(!1);return Xe.create(Re)},Ve.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[Xe.DATA_KEY]},Ve.prototype.deleteAt=function(Re,Me){var ne=this.isolate(Re,Me);ne.remove()},Ve.prototype.formatAt=function(Re,Me,ne,ce){var se=this.isolate(Re,Me);if(Xe.query(ne,Xe.Scope.BLOT)!=null&&ce)se.wrap(ne,ce);else if(Xe.query(ne,Xe.Scope.ATTRIBUTE)!=null){var te=Xe.create(this.statics.scope);se.wrap(te),te.format(ne,ce)}},Ve.prototype.insertAt=function(Re,Me,ne){var ce=ne==null?Xe.create("text",Me):Xe.create(Me,ne),se=this.split(Re);this.parent.insertBefore(ce,se)},Ve.prototype.insertInto=function(Re,Me){Me===void 0&&(Me=null),this.parent!=null&&this.parent.children.remove(this);var ne=null;Re.children.insertBefore(this,Me),Me!=null&&(ne=Me.domNode),(this.domNode.parentNode!=Re.domNode||this.domNode.nextSibling!=ne)&&Re.domNode.insertBefore(this.domNode,ne),this.parent=Re,this.attach()},Ve.prototype.isolate=function(Re,Me){var ne=this.split(Re);return ne.split(Me),ne},Ve.prototype.length=function(){return 1},Ve.prototype.offset=function(Re){return Re===void 0&&(Re=this.parent),this.parent==null||this==Re?0:this.parent.children.offset(this)+this.parent.offset(Re)},Ve.prototype.optimize=function(Re){this.domNode[Xe.DATA_KEY]!=null&&delete this.domNode[Xe.DATA_KEY].mutations},Ve.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},Ve.prototype.replace=function(Re){Re.parent!=null&&(Re.parent.insertBefore(this,Re.next),Re.remove())},Ve.prototype.replaceWith=function(Re,Me){var ne=typeof Re=="string"?Xe.create(Re,Me):Re;return ne.replace(this),ne},Ve.prototype.split=function(Re,Me){return Re===0?this:this.next},Ve.prototype.update=function(Re,Me){},Ve.prototype.wrap=function(Re,Me){var ne=typeof Re=="string"?Xe.create(Re,Me):Re;return this.parent!=null&&this.parent.insertBefore(ne,this.next),ne.appendChild(this),ne},Ve.blotName="abstract",Ve}();We.default=Qe},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=_e(12),Qe=_e(33),Ve=_e(34),Re=_e(1),Me=function(){function ne(ce){this.attributes={},this.domNode=ce,this.build()}return n(ne,"AttributorStore"),ne.prototype.attribute=function(ce,se){se?ce.add(this.domNode,se)&&(ce.value(this.domNode)!=null?this.attributes[ce.attrName]=ce:delete this.attributes[ce.attrName]):(ce.remove(this.domNode),delete this.attributes[ce.attrName])},ne.prototype.build=function(){var ce=this;this.attributes={};var se=Xe.default.keys(this.domNode),te=Qe.default.keys(this.domNode),Se=Ve.default.keys(this.domNode);se.concat(te).concat(Se).forEach(function(de){var ue=Re.query(de,Re.Scope.ATTRIBUTE);ue instanceof Xe.default&&(ce.attributes[ue.attrName]=ue)})},ne.prototype.copy=function(ce){var se=this;Object.keys(this.attributes).forEach(function(te){var Se=se.attributes[te].value(se.domNode);ce.format(te,Se)})},ne.prototype.move=function(ce){var se=this;this.copy(ce),Object.keys(this.attributes).forEach(function(te){se.attributes[te].remove(se.domNode)}),this.attributes={}},ne.prototype.values=function(){var ce=this;return Object.keys(this.attributes).reduce(function(se,te){return se[te]=ce.attributes[te].value(ce.domNode),se},{})},ne}();We.default=Me},function(Gt,We,_e){"use strict";var Xe=this&&this.__extends||function(){var Me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ne,ce){ne.__proto__=ce}||function(ne,ce){for(var se in ce)ce.hasOwnProperty(se)&&(ne[se]=ce[se])};return function(ne,ce){Me(ne,ce);function se(){this.constructor=ne}n(se,"__"),ne.prototype=ce===null?Object.create(ce):(se.prototype=ce.prototype,new se)}}();Object.defineProperty(We,"__esModule",{value:!0});var Qe=_e(12);function Ve(Me,ne){var ce=Me.getAttribute("class")||"";return ce.split(/\s+/).filter(function(se){return se.indexOf(ne+"-")===0})}n(Ve,"match");var Re=function(Me){Xe(ne,Me);function ne(){return Me!==null&&Me.apply(this,arguments)||this}return n(ne,"ClassAttributor"),ne.keys=function(ce){return(ce.getAttribute("class")||"").split(/\s+/).map(function(se){return se.split("-").slice(0,-1).join("-")})},ne.prototype.add=function(ce,se){return this.canAdd(ce,se)?(this.remove(ce),ce.classList.add(this.keyName+"-"+se),!0):!1},ne.prototype.remove=function(ce){var se=Ve(ce,this.keyName);se.forEach(function(te){ce.classList.remove(te)}),ce.classList.length===0&&ce.removeAttribute("class")},ne.prototype.value=function(ce){var se=Ve(ce,this.keyName)[0]||"",te=se.slice(this.keyName.length+1);return this.canAdd(ce,te)?te:""},ne}(Qe.default);We.default=Re},function(Gt,We,_e){"use strict";var Xe=this&&this.__extends||function(){var Me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ne,ce){ne.__proto__=ce}||function(ne,ce){for(var se in ce)ce.hasOwnProperty(se)&&(ne[se]=ce[se])};return function(ne,ce){Me(ne,ce);function se(){this.constructor=ne}n(se,"__"),ne.prototype=ce===null?Object.create(ce):(se.prototype=ce.prototype,new se)}}();Object.defineProperty(We,"__esModule",{value:!0});var Qe=_e(12);function Ve(Me){var ne=Me.split("-"),ce=ne.slice(1).map(function(se){return se[0].toUpperCase()+se.slice(1)}).join("");return ne[0]+ce}n(Ve,"camelize");var Re=function(Me){Xe(ne,Me);function ne(){return Me!==null&&Me.apply(this,arguments)||this}return n(ne,"StyleAttributor"),ne.keys=function(ce){return(ce.getAttribute("style")||"").split(";").map(function(se){var te=se.split(":");return te[0].trim()})},ne.prototype.add=function(ce,se){return this.canAdd(ce,se)?(ce.style[Ve(this.keyName)]=se,!0):!1},ne.prototype.remove=function(ce){ce.style[Ve(this.keyName)]="",ce.getAttribute("style")||ce.removeAttribute("style")},ne.prototype.value=function(ce){var se=ce.style[Ve(this.keyName)];return this.canAdd(ce,se)?se:""},ne}(Qe.default);We.default=Re},function(Gt,We,_e){"use strict";var Xe=Array.prototype.slice,Qe=_e(36),Ve=Object.keys,Re=Ve?n(function(ce){return Ve(ce)},"keys"):_e(62),Me=Object.keys;Re.shim=n(function(){if(Object.keys){var ce=function(){var se=Object.keys(arguments);return se&&se.length===arguments.length}(1,2);ce||(Object.keys=n(function(te){return Qe(te)?Me(Xe.call(te)):Me(te)},"keys"))}else Object.keys=Re;return Object.keys||Re},"shimObjectKeys"),Gt.exports=Re},function(Gt,We,_e){"use strict";var Xe=Object.prototype.toString;Gt.exports=n(function(Ve){var Re=Xe.call(Ve),Me=Re==="[object Arguments]";return Me||(Me=Re!=="[object Array]"&&Ve!==null&&typeof Ve=="object"&&typeof Ve.length=="number"&&Ve.length>=0&&Xe.call(Ve.callee)==="[object Function]"),Me},"isArguments")},function(Gt,We,_e){"use strict";var Xe=_e(38),Qe=_e(66),Ve=Qe("%Function.prototype.apply%"),Re=Qe("%Function.prototype.call%"),Me=Qe("%Reflect.apply%",!0)||Xe.call(Re,Ve);Gt.exports=n(function(){return Me(Xe,Re,arguments)},"callBind"),Gt.exports.apply=n(function(){return Me(Xe,Ve,arguments)},"applyBind")},function(Gt,We,_e){"use strict";var Xe=_e(65);Gt.exports=Function.prototype.bind||Xe},function(Gt,We,_e){"use strict";(function(Xe){var Qe=Xe.Symbol,Ve=_e(68);Gt.exports=n(function(){return typeof Qe!="function"||typeof Symbol!="function"||typeof Qe("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Ve()},"hasNativeSymbols")}).call(We,_e(67))},function(Gt,We,_e){"use strict";var Xe=n(function(Qe){return Qe!==Qe},"numberIsNaN");Gt.exports=n(function(Ve,Re){return Ve===0&&Re===0?1/Ve===1/Re:!!(Ve===Re||Xe(Ve)&&Xe(Re))},"is")},function(Gt,We,_e){"use strict";var Xe=_e(40);Gt.exports=n(function(){return typeof Object.is=="function"?Object.is:Xe},"getPolyfill")},function(Gt,We,_e){"use strict";var Xe=Object,Qe=TypeError;Gt.exports=n(function(){if(this!=null&&this!==Xe(this))throw new Qe("RegExp.prototype.flags getter called on non-object");var Re="";return this.global&&(Re+="g"),this.ignoreCase&&(Re+="i"),this.multiline&&(Re+="m"),this.dotAll&&(Re+="s"),this.unicode&&(Re+="u"),this.sticky&&(Re+="y"),Re},"flags")},function(Gt,We,_e){"use strict";var Xe=_e(42),Qe=_e(13).supportsDescriptors,Ve=Object.getOwnPropertyDescriptor,Re=TypeError;Gt.exports=n(function(){if(!Qe)throw new Re("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if(/a/mig.flags==="gim"){var ne=Ve(RegExp.prototype,"flags");if(ne&&typeof ne.get=="function"&&typeof/a/.dotAll=="boolean")return ne.get}return Xe},"getPolyfill")},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=function(){function Re(Me,ne){for(var ce=0;ce<ne.length;ce++){var se=ne[ce];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(Me,se.key,se)}}return n(Re,"defineProperties"),function(Me,ne,ce){return ne&&Re(Me.prototype,ne),ce&&Re(Me,ce),Me}}();function Qe(Re,Me){if(!(Re instanceof Me))throw new TypeError("Cannot call a class as a function")}n(Qe,"_classCallCheck");var Ve=function(){function Re(Me,ne){Qe(this,Re),this.quill=Me,this.options=ne,this.modules={}}return n(Re,"Theme"),Xe(Re,[{key:"init",value:n(function(){var ne=this;Object.keys(this.options.modules).forEach(function(ce){ne.modules[ce]==null&&ne.addModule(ce)})},"init")},{key:"addModule",value:n(function(ne){var ce=this.quill.constructor.import("modules/"+ne);return this.modules[ne]=new ce(this.quill,this.options.modules[ne]||{}),this.modules[ne]},"addModule")}]),Re}();Ve.DEFAULTS={modules:{}},Ve.themes={default:Ve},We.default=Ve},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=function(){function ae(q,ve){for(var le=0;le<ve.length;le++){var Ce=ve[le];Ce.enumerable=Ce.enumerable||!1,Ce.configurable=!0,"value"in Ce&&(Ce.writable=!0),Object.defineProperty(q,Ce.key,Ce)}}return n(ae,"defineProperties"),function(q,ve,le){return ve&&ae(q.prototype,ve),le&&ae(q,le),q}}(),Qe=n(function ae(q,ve,le){q===null&&(q=Function.prototype);var Ce=Object.getOwnPropertyDescriptor(q,ve);if(Ce===void 0){var st=Object.getPrototypeOf(q);return st===null?void 0:ae(st,ve,le)}else{if("value"in Ce)return Ce.value;var Ge=Ce.get;return Ge===void 0?void 0:Ge.call(le)}},"get"),Ve=_e(0),Re=ce(Ve),Me=_e(7),ne=ce(Me);function ce(ae){return ae&&ae.__esModule?ae:{default:ae}}n(ce,"_interopRequireDefault");function se(ae,q){if(!(ae instanceof q))throw new TypeError("Cannot call a class as a function")}n(se,"_classCallCheck");function te(ae,q){if(!ae)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q&&(typeof q=="object"||typeof q=="function")?q:ae}n(te,"_possibleConstructorReturn");function Se(ae,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof q);ae.prototype=Object.create(q&&q.prototype,{constructor:{value:ae,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(ae,q):ae.__proto__=q)}n(Se,"_inherits");var de="\uFEFF",ue=function(ae){Se(q,ae);function q(ve){se(this,q);var le=te(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,ve));return le.contentNode=ct.createElement("span"),le.contentNode.setAttribute("contenteditable",!1),[].slice.call(le.domNode.childNodes).forEach(function(Ce){le.contentNode.appendChild(Ce)}),le.leftGuard=ct.createTextNode(de),le.rightGuard=ct.createTextNode(de),le.domNode.appendChild(le.leftGuard),le.domNode.appendChild(le.contentNode),le.domNode.appendChild(le.rightGuard),le}return n(q,"Embed"),Xe(q,[{key:"index",value:n(function(le,Ce){return le===this.leftGuard?0:le===this.rightGuard?1:Qe(q.prototype.__proto__||Object.getPrototypeOf(q.prototype),"index",this).call(this,le,Ce)},"index")},{key:"restore",value:n(function(le){var Ce=void 0,st=void 0,Ge=le.data.split(de).join("");if(le===this.leftGuard)if(this.prev instanceof ne.default){var Je=this.prev.length();this.prev.insertAt(Je,Ge),Ce={startNode:this.prev.domNode,startOffset:Je+Ge.length}}else st=ct.createTextNode(Ge),this.parent.insertBefore(Re.default.create(st),this),Ce={startNode:st,startOffset:Ge.length};else le===this.rightGuard&&(this.next instanceof ne.default?(this.next.insertAt(0,Ge),Ce={startNode:this.next.domNode,startOffset:Ge.length}):(st=ct.createTextNode(Ge),this.parent.insertBefore(Re.default.create(st),this.next),Ce={startNode:st,startOffset:Ge.length}));return le.data=de,Ce},"restore")},{key:"update",value:n(function(le,Ce){var st=this;le.forEach(function(Ge){if(Ge.type==="characterData"&&(Ge.target===st.leftGuard||Ge.target===st.rightGuard)){var Je=st.restore(Ge.target);Je&&(Ce.range=Je)}})},"update")}]),q}(Re.default.Embed);We.default=ue},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0}),We.AlignStyle=We.AlignClass=We.AlignAttribute=void 0;var Xe=_e(0),Qe=Ve(Xe);function Ve(se){return se&&se.__esModule?se:{default:se}}n(Ve,"_interopRequireDefault");var Re={scope:Qe.default.Scope.BLOCK,whitelist:["right","center","justify"]},Me=new Qe.default.Attributor.Attribute("align","align",Re),ne=new Qe.default.Attributor.Class("align","ql-align",Re),ce=new Qe.default.Attributor.Style("align","text-align",Re);We.AlignAttribute=Me,We.AlignClass=ne,We.AlignStyle=ce},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0}),We.BackgroundStyle=We.BackgroundClass=void 0;var Xe=_e(0),Qe=Re(Xe),Ve=_e(27);function Re(ce){return ce&&ce.__esModule?ce:{default:ce}}n(Re,"_interopRequireDefault");var Me=new Qe.default.Attributor.Class("background","ql-bg",{scope:Qe.default.Scope.INLINE}),ne=new Ve.ColorAttributor("background","background-color",{scope:Qe.default.Scope.INLINE});We.BackgroundClass=Me,We.BackgroundStyle=ne},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0}),We.DirectionStyle=We.DirectionClass=We.DirectionAttribute=void 0;var Xe=_e(0),Qe=Ve(Xe);function Ve(se){return se&&se.__esModule?se:{default:se}}n(Ve,"_interopRequireDefault");var Re={scope:Qe.default.Scope.BLOCK,whitelist:["rtl"]},Me=new Qe.default.Attributor.Attribute("direction","dir",Re),ne=new Qe.default.Attributor.Class("direction","ql-direction",Re),ce=new Qe.default.Attributor.Style("direction","direction",Re);We.DirectionAttribute=Me,We.DirectionClass=ne,We.DirectionStyle=ce},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0}),We.FontClass=We.FontStyle=void 0;var Xe=function(){function ae(q,ve){for(var le=0;le<ve.length;le++){var Ce=ve[le];Ce.enumerable=Ce.enumerable||!1,Ce.configurable=!0,"value"in Ce&&(Ce.writable=!0),Object.defineProperty(q,Ce.key,Ce)}}return n(ae,"defineProperties"),function(q,ve,le){return ve&&ae(q.prototype,ve),le&&ae(q,le),q}}(),Qe=n(function ae(q,ve,le){q===null&&(q=Function.prototype);var Ce=Object.getOwnPropertyDescriptor(q,ve);if(Ce===void 0){var st=Object.getPrototypeOf(q);return st===null?void 0:ae(st,ve,le)}else{if("value"in Ce)return Ce.value;var Ge=Ce.get;return Ge===void 0?void 0:Ge.call(le)}},"get"),Ve=_e(0),Re=Me(Ve);function Me(ae){return ae&&ae.__esModule?ae:{default:ae}}n(Me,"_interopRequireDefault");function ne(ae,q){if(!(ae instanceof q))throw new TypeError("Cannot call a class as a function")}n(ne,"_classCallCheck");function ce(ae,q){if(!ae)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q&&(typeof q=="object"||typeof q=="function")?q:ae}n(ce,"_possibleConstructorReturn");function se(ae,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof q);ae.prototype=Object.create(q&&q.prototype,{constructor:{value:ae,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(ae,q):ae.__proto__=q)}n(se,"_inherits");var te={scope:Re.default.Scope.INLINE,whitelist:["serif","monospace"]},Se=new Re.default.Attributor.Class("font","ql-font",te),de=function(ae){se(q,ae);function q(){return ne(this,q),ce(this,(q.__proto__||Object.getPrototypeOf(q)).apply(this,arguments))}return n(q,"FontStyleAttributor"),Xe(q,[{key:"value",value:n(function(le){return Qe(q.prototype.__proto__||Object.getPrototypeOf(q.prototype),"value",this).call(this,le).replace(/["']/g,"")},"value")}]),q}(Re.default.Attributor.Style),ue=new de("font","font-family",te);We.FontStyle=ue,We.FontClass=Se},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0}),We.SizeStyle=We.SizeClass=void 0;var Xe=_e(0),Qe=Ve(Xe);function Ve(ne){return ne&&ne.__esModule?ne:{default:ne}}n(Ve,"_interopRequireDefault");var Re=new Qe.default.Attributor.Class("size","ql-size",{scope:Qe.default.Scope.INLINE,whitelist:["small","large","huge"]}),Me=new Qe.default.Attributor.Style("size","font-size",{scope:Qe.default.Scope.INLINE,whitelist:["10px","18px","32px"]});We.SizeClass=Re,We.SizeStyle=Me},function(Gt,We,_e){"use strict";Gt.exports={align:{"":_e(96),center:_e(97),right:_e(98),justify:_e(99)},background:_e(100),blockquote:_e(101),bold:_e(102),clean:_e(103),code:_e(78),"code-block":_e(78),color:_e(104),direction:{"":_e(105),rtl:_e(106)},float:{center:_e(107),full:_e(108),left:_e(109),right:_e(110)},formula:_e(111),header:{1:_e(112),2:_e(113)},italic:_e(114),image:_e(115),indent:{"+1":_e(116),"-1":_e(117)},link:_e(118),list:{ordered:_e(119),bullet:_e(120),check:_e(121)},script:{sub:_e(122),super:_e(123)},strike:_e(124),underline:_e(125),video:_e(126)}},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0}),We.getLastChangeIndex=We.default=void 0;var Xe=function(){function ve(le,Ce){for(var st=0;st<Ce.length;st++){var Ge=Ce[st];Ge.enumerable=Ge.enumerable||!1,Ge.configurable=!0,"value"in Ge&&(Ge.writable=!0),Object.defineProperty(le,Ge.key,Ge)}}return n(ve,"defineProperties"),function(le,Ce,st){return Ce&&ve(le.prototype,Ce),st&&ve(le,st),le}}(),Qe=_e(0),Ve=se(Qe),Re=_e(5),Me=se(Re),ne=_e(9),ce=se(ne);function se(ve){return ve&&ve.__esModule?ve:{default:ve}}n(se,"_interopRequireDefault");function te(ve,le){if(!(ve instanceof le))throw new TypeError("Cannot call a class as a function")}n(te,"_classCallCheck");function Se(ve,le){if(!ve)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return le&&(typeof le=="object"||typeof le=="function")?le:ve}n(Se,"_possibleConstructorReturn");function de(ve,le){if(typeof le!="function"&&le!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof le);ve.prototype=Object.create(le&&le.prototype,{constructor:{value:ve,enumerable:!1,writable:!0,configurable:!0}}),le&&(Object.setPrototypeOf?Object.setPrototypeOf(ve,le):ve.__proto__=le)}n(de,"_inherits");var ue=function(ve){de(le,ve);function le(Ce,st){te(this,le);var Ge=Se(this,(le.__proto__||Object.getPrototypeOf(le)).call(this,Ce,st));return Ge.lastRecorded=0,Ge.ignoreChange=!1,Ge.clear(),Ge.quill.on(Me.default.events.EDITOR_CHANGE,function(Je,pt,He,ke){Je!==Me.default.events.TEXT_CHANGE||Ge.ignoreChange||(!Ge.options.userOnly||ke===Me.default.sources.USER?Ge.record(pt,He):Ge.transform(pt))}),Ge.quill.keyboard.addBinding({key:"Z",shortKey:!0},Ge.undo.bind(Ge)),Ge.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},Ge.redo.bind(Ge)),/Win/i.test(El.platform)&&Ge.quill.keyboard.addBinding({key:"Y",shortKey:!0},Ge.redo.bind(Ge)),Ge}return n(le,"History"),Xe(le,[{key:"change",value:n(function(st,Ge){if(this.stack[st].length!==0){var Je=this.stack[st].pop();this.stack[Ge].push(Je),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(Je[st],Me.default.sources.USER),this.ignoreChange=!1;var pt=q(Je[st]);this.quill.setSelection(pt)}},"change")},{key:"clear",value:n(function(){this.stack={undo:[],redo:[]}},"clear")},{key:"cutoff",value:n(function(){this.lastRecorded=0},"cutoff")},{key:"record",value:n(function(st,Ge){if(st.ops.length!==0){this.stack.redo=[];var Je=this.quill.getContents().diff(Ge),pt=Date.now();if(this.lastRecorded+this.options.delay>pt&&this.stack.undo.length>0){var He=this.stack.undo.pop();Je=Je.compose(He.undo),st=He.redo.compose(st)}else this.lastRecorded=pt;this.stack.undo.push({redo:st,undo:Je}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}},"record")},{key:"redo",value:n(function(){this.change("redo","undo")},"redo")},{key:"transform",value:n(function(st){this.stack.undo.forEach(function(Ge){Ge.undo=st.transform(Ge.undo,!0),Ge.redo=st.transform(Ge.redo,!0)}),this.stack.redo.forEach(function(Ge){Ge.undo=st.transform(Ge.undo,!0),Ge.redo=st.transform(Ge.redo,!0)})},"transform")},{key:"undo",value:n(function(){this.change("undo","redo")},"undo")}]),le}(ce.default);ue.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function ae(ve){var le=ve.ops[ve.ops.length-1];return le==null?!1:le.insert!=null?typeof le.insert=="string"&&le.insert.endsWith(`
`):le.attributes!=null?Object.keys(le.attributes).some(function(Ce){return Ve.default.query(Ce,Ve.default.Scope.BLOCK)!=null}):!1}n(ae,"endsWithNewlineChange");function q(ve){var le=ve.reduce(function(st,Ge){return st+=Ge.delete||0,st},0),Ce=ve.length()-le;return ae(ve)&&(Ce-=1),Ce}n(q,"getLastChangeIndex"),We.default=ue,We.getLastChangeIndex=q},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0}),We.default=We.BaseTooltip=void 0;var Xe=function(){function wt(Nt,ln){for(var an=0;an<ln.length;an++){var bt=ln[an];bt.enumerable=bt.enumerable||!1,bt.configurable=!0,"value"in bt&&(bt.writable=!0),Object.defineProperty(Nt,bt.key,bt)}}return n(wt,"defineProperties"),function(Nt,ln,an){return ln&&wt(Nt.prototype,ln),an&&wt(Nt,an),Nt}}(),Qe=n(function wt(Nt,ln,an){Nt===null&&(Nt=Function.prototype);var bt=Object.getOwnPropertyDescriptor(Nt,ln);if(bt===void 0){var Kt=Object.getPrototypeOf(Nt);return Kt===null?void 0:wt(Kt,ln,an)}else{if("value"in bt)return bt.value;var _n=bt.get;return _n===void 0?void 0:_n.call(an)}},"get"),Ve=_e(3),Re=pt(Ve),Me=_e(2),ne=pt(Me),ce=_e(8),se=pt(ce),te=_e(24),Se=pt(te),de=_e(44),ue=pt(de),ae=_e(79),q=pt(ae),ve=_e(80),le=pt(ve),Ce=_e(29),st=pt(Ce),Ge=_e(81),Je=pt(Ge);function pt(wt){return wt&&wt.__esModule?wt:{default:wt}}n(pt,"_interopRequireDefault");function He(wt,Nt){if(!(wt instanceof Nt))throw new TypeError("Cannot call a class as a function")}n(He,"_classCallCheck");function ke(wt,Nt){if(!wt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Nt&&(typeof Nt=="object"||typeof Nt=="function")?Nt:wt}n(ke,"_possibleConstructorReturn");function Ue(wt,Nt){if(typeof Nt!="function"&&Nt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Nt);wt.prototype=Object.create(Nt&&Nt.prototype,{constructor:{value:wt,enumerable:!1,writable:!0,configurable:!0}}),Nt&&(Object.setPrototypeOf?Object.setPrototypeOf(wt,Nt):wt.__proto__=Nt)}n(Ue,"_inherits");var rt=[!1,"center","right","justify"],yt=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Pt=[!1,"serif","monospace"],qt=["1","2","3",!1],on=["small",!1,"large","huge"],Un=function(wt){Ue(Nt,wt);function Nt(ln,an){He(this,Nt);var bt=ke(this,(Nt.__proto__||Object.getPrototypeOf(Nt)).call(this,ln,an)),Kt=n(function _n(En){if(!ct.body.contains(ln.root))return ct.body.removeEventListener("click",_n);bt.tooltip!=null&&!bt.tooltip.root.contains(En.target)&&ct.activeElement!==bt.tooltip.textbox&&!bt.quill.hasFocus()&&bt.tooltip.hide(),bt.pickers!=null&&bt.pickers.forEach(function(qn){qn.container.contains(En.target)||qn.close()})},"listener");return ln.emitter.listenDOM("click",ct.body,Kt),bt}return n(Nt,"BaseTheme"),Xe(Nt,[{key:"addModule",value:n(function(an){var bt=Qe(Nt.prototype.__proto__||Object.getPrototypeOf(Nt.prototype),"addModule",this).call(this,an);return an==="toolbar"&&this.extendToolbar(bt),bt},"addModule")},{key:"buildButtons",value:n(function(an,bt){an.forEach(function(Kt){var _n=Kt.getAttribute("class")||"";_n.split(/\s+/).forEach(function(En){if(En.startsWith("ql-")&&(En=En.slice(3),bt[En]!=null))if(En==="direction")Kt.innerHTML=bt[En][""]+bt[En].rtl;else if(typeof bt[En]=="string")Kt.innerHTML=bt[En];else{var qn=Kt.value||"";qn!=null&&bt[En][qn]&&(Kt.innerHTML=bt[En][qn])}})})},"buildButtons")},{key:"buildPickers",value:n(function(an,bt){var Kt=this;this.pickers=an.map(function(En){if(En.classList.contains("ql-align"))return En.querySelector("option")==null&&at(En,rt),new le.default(En,bt.align);if(En.classList.contains("ql-background")||En.classList.contains("ql-color")){var qn=En.classList.contains("ql-background")?"background":"color";return En.querySelector("option")==null&&at(En,yt,qn==="background"?"#ffffff":"#000000"),new q.default(En,bt[qn])}else return En.querySelector("option")==null&&(En.classList.contains("ql-font")?at(En,Pt):En.classList.contains("ql-header")?at(En,qt):En.classList.contains("ql-size")&&at(En,on)),new st.default(En)});var _n=n(function(){Kt.pickers.forEach(function(qn){qn.update()})},"update");this.quill.on(se.default.events.EDITOR_CHANGE,_n)},"buildPickers")}]),Nt}(ue.default);Un.DEFAULTS=(0,Re.default)(!0,{},ue.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:n(function(){this.quill.theme.tooltip.edit("formula")},"formula"),image:n(function(){var Nt=this,ln=this.container.querySelector("input.ql-image[type=file]");ln==null&&(ln=ct.createElement("input"),ln.setAttribute("type","file"),ln.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),ln.classList.add("ql-image"),ln.addEventListener("change",function(){if(ln.files!=null&&ln.files[0]!=null){var an=new ci;an.onload=function(bt){var Kt=Nt.quill.getSelection(!0);Nt.quill.updateContents(new ne.default().retain(Kt.index).delete(Kt.length).insert({image:bt.target.result}),se.default.sources.USER),Nt.quill.setSelection(Kt.index+1,se.default.sources.SILENT),ln.value=""},an.readAsDataURL(ln.files[0])}}),this.container.appendChild(ln)),ln.click()},"image"),video:n(function(){this.quill.theme.tooltip.edit("video")},"video")}}}});var zt=function(wt){Ue(Nt,wt);function Nt(ln,an){He(this,Nt);var bt=ke(this,(Nt.__proto__||Object.getPrototypeOf(Nt)).call(this,ln,an));return bt.textbox=bt.root.querySelector('input[type="text"]'),bt.listen(),bt}return n(Nt,"BaseTooltip"),Xe(Nt,[{key:"listen",value:n(function(){var an=this;this.textbox.addEventListener("keydown",function(bt){Se.default.match(bt,"enter")?(an.save(),bt.preventDefault()):Se.default.match(bt,"escape")&&(an.cancel(),bt.preventDefault())})},"listen")},{key:"cancel",value:n(function(){this.hide()},"cancel")},{key:"edit",value:n(function(){var an=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),bt!=null?this.textbox.value=bt:an!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+an)||""),this.root.setAttribute("data-mode",an)},"edit")},{key:"restoreFocus",value:n(function(){var an=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=an},"restoreFocus")},{key:"save",value:n(function(){var an=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var bt=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",an,se.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",an,se.default.sources.USER)),this.quill.root.scrollTop=bt;break}case"video":an=xt(an);case"formula":{if(!an)break;var Kt=this.quill.getSelection(!0);if(Kt!=null){var _n=Kt.index+Kt.length;this.quill.insertEmbed(_n,this.root.getAttribute("data-mode"),an,se.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(_n+1," ",se.default.sources.USER),this.quill.setSelection(_n+2,se.default.sources.USER)}break}default:}this.textbox.value="",this.hide()},"save")}]),Nt}(Je.default);function xt(wt){var Nt=wt.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||wt.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return Nt?(Nt[1]||"https")+"://www.youtube.com/embed/"+Nt[2]+"?showinfo=0":(Nt=wt.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(Nt[1]||"https")+"://player.vimeo.com/video/"+Nt[2]+"/":wt}n(xt,"extractVideoUrl");function at(wt,Nt){var ln=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;Nt.forEach(function(an){var bt=ct.createElement("option");an===ln?bt.setAttribute("selected","selected"):bt.setAttribute("value",an),wt.appendChild(bt)})}n(at,"fillSelect"),We.BaseTooltip=zt,We.default=Un},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=function(){function Qe(){this.head=this.tail=null,this.length=0}return n(Qe,"LinkedList"),Qe.prototype.append=function(){for(var Ve=[],Re=0;Re<arguments.length;Re++)Ve[Re]=arguments[Re];this.insertBefore(Ve[0],null),Ve.length>1&&this.append.apply(this,Ve.slice(1))},Qe.prototype.contains=function(Ve){for(var Re,Me=this.iterator();Re=Me();)if(Re===Ve)return!0;return!1},Qe.prototype.insertBefore=function(Ve,Re){Ve&&(Ve.next=Re,Re!=null?(Ve.prev=Re.prev,Re.prev!=null&&(Re.prev.next=Ve),Re.prev=Ve,Re===this.head&&(this.head=Ve)):this.tail!=null?(this.tail.next=Ve,Ve.prev=this.tail,this.tail=Ve):(Ve.prev=null,this.head=this.tail=Ve),this.length+=1)},Qe.prototype.offset=function(Ve){for(var Re=0,Me=this.head;Me!=null;){if(Me===Ve)return Re;Re+=Me.length(),Me=Me.next}return-1},Qe.prototype.remove=function(Ve){this.contains(Ve)&&(Ve.prev!=null&&(Ve.prev.next=Ve.next),Ve.next!=null&&(Ve.next.prev=Ve.prev),Ve===this.head&&(this.head=Ve.next),Ve===this.tail&&(this.tail=Ve.prev),this.length-=1)},Qe.prototype.iterator=function(Ve){return Ve===void 0&&(Ve=this.head),function(){var Re=Ve;return Ve!=null&&(Ve=Ve.next),Re}},Qe.prototype.find=function(Ve,Re){Re===void 0&&(Re=!1);for(var Me,ne=this.iterator();Me=ne();){var ce=Me.length();if(Ve<ce||Re&&Ve===ce&&(Me.next==null||Me.next.length()!==0))return[Me,Ve];Ve-=ce}return[null,0]},Qe.prototype.forEach=function(Ve){for(var Re,Me=this.iterator();Re=Me();)Ve(Re)},Qe.prototype.forEachAt=function(Ve,Re,Me){if(!(Re<=0))for(var ne=this.find(Ve),ce=ne[0],se=ne[1],te,Se=Ve-se,de=this.iterator(ce);(te=de())&&Se<Ve+Re;){var ue=te.length();Ve>Se?Me(te,Ve-Se,Math.min(Re,Se+ue-Ve)):Me(te,0,Math.min(ue,Ve+Re-Se)),Se+=ue}},Qe.prototype.map=function(Ve){return this.reduce(function(Re,Me){return Re.push(Ve(Me)),Re},[])},Qe.prototype.reduce=function(Ve,Re){for(var Me,ne=this.iterator();Me=ne();)Re=Ve(Re,Me);return Re},Qe}();We.default=Xe},function(Gt,We,_e){"use strict";var Xe=this&&this.__extends||function(){var ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(se,te){se.__proto__=te}||function(se,te){for(var Se in te)te.hasOwnProperty(Se)&&(se[Se]=te[Se])};return function(se,te){ce(se,te);function Se(){this.constructor=se}n(Se,"__"),se.prototype=te===null?Object.create(te):(Se.prototype=te.prototype,new Se)}}();Object.defineProperty(We,"__esModule",{value:!0});var Qe=_e(18),Ve=_e(1),Re={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Me=100,ne=function(ce){Xe(se,ce);function se(te){var Se=ce.call(this,te)||this;return Se.scroll=Se,Se.observer=new Wl(function(de){Se.update(de)}),Se.observer.observe(Se.domNode,Re),Se.attach(),Se}return n(se,"ScrollBlot"),se.prototype.detach=function(){ce.prototype.detach.call(this),this.observer.disconnect()},se.prototype.deleteAt=function(te,Se){this.update(),te===0&&Se===this.length()?this.children.forEach(function(de){de.remove()}):ce.prototype.deleteAt.call(this,te,Se)},se.prototype.formatAt=function(te,Se,de,ue){this.update(),ce.prototype.formatAt.call(this,te,Se,de,ue)},se.prototype.insertAt=function(te,Se,de){this.update(),ce.prototype.insertAt.call(this,te,Se,de)},se.prototype.optimize=function(te,Se){var de=this;te===void 0&&(te=[]),Se===void 0&&(Se={}),ce.prototype.optimize.call(this,Se);for(var ue=[].slice.call(this.observer.takeRecords());ue.length>0;)te.push(ue.pop());for(var ae=n(function(Ce,st){st===void 0&&(st=!0),!(Ce==null||Ce===de)&&Ce.domNode.parentNode!=null&&(Ce.domNode[Ve.DATA_KEY].mutations==null&&(Ce.domNode[Ve.DATA_KEY].mutations=[]),st&&ae(Ce.parent))},"mark"),q=n(function(Ce){Ce.domNode[Ve.DATA_KEY]==null||Ce.domNode[Ve.DATA_KEY].mutations==null||(Ce instanceof Qe.default&&Ce.children.forEach(q),Ce.optimize(Se))},"optimize"),ve=te,le=0;ve.length>0;le+=1){if(le>=Me)throw new Error("[Parchment] Maximum optimize iterations reached");for(ve.forEach(function(Ce){var st=Ve.find(Ce.target,!0);st!=null&&(st.domNode===Ce.target&&(Ce.type==="childList"?(ae(Ve.find(Ce.previousSibling,!1)),[].forEach.call(Ce.addedNodes,function(Ge){var Je=Ve.find(Ge,!1);ae(Je,!1),Je instanceof Qe.default&&Je.children.forEach(function(pt){ae(pt,!1)})})):Ce.type==="attributes"&&ae(st.prev)),ae(st))}),this.children.forEach(q),ve=[].slice.call(this.observer.takeRecords()),ue=ve.slice();ue.length>0;)te.push(ue.pop())}},se.prototype.update=function(te,Se){var de=this;Se===void 0&&(Se={}),te=te||this.observer.takeRecords(),te.map(function(ue){var ae=Ve.find(ue.target,!0);return ae==null?null:ae.domNode[Ve.DATA_KEY].mutations==null?(ae.domNode[Ve.DATA_KEY].mutations=[ue],ae):(ae.domNode[Ve.DATA_KEY].mutations.push(ue),null)}).forEach(function(ue){ue==null||ue===de||ue.domNode[Ve.DATA_KEY]==null||ue.update(ue.domNode[Ve.DATA_KEY].mutations||[],Se)}),this.domNode[Ve.DATA_KEY].mutations!=null&&ce.prototype.update.call(this,this.domNode[Ve.DATA_KEY].mutations,Se),this.optimize(te,Se)},se.blotName="scroll",se.defaultChild="block",se.scope=Ve.Scope.BLOCK_BLOT,se.tagName="DIV",se}(Qe.default);We.default=ne},function(Gt,We,_e){"use strict";var Xe=this&&this.__extends||function(){var ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ce,se){ce.__proto__=se}||function(ce,se){for(var te in se)se.hasOwnProperty(te)&&(ce[te]=se[te])};return function(ce,se){ne(ce,se);function te(){this.constructor=ce}n(te,"__"),ce.prototype=se===null?Object.create(se):(te.prototype=se.prototype,new te)}}();Object.defineProperty(We,"__esModule",{value:!0});var Qe=_e(19),Ve=_e(1);function Re(ne,ce){if(Object.keys(ne).length!==Object.keys(ce).length)return!1;for(var se in ne)if(ne[se]!==ce[se])return!1;return!0}n(Re,"isEqual");var Me=function(ne){Xe(ce,ne);function ce(){return ne!==null&&ne.apply(this,arguments)||this}return n(ce,"InlineBlot"),ce.formats=function(se){if(se.tagName!==ce.tagName)return ne.formats.call(this,se)},ce.prototype.format=function(se,te){var Se=this;se===this.statics.blotName&&!te?(this.children.forEach(function(de){de instanceof Qe.default||(de=de.wrap(ce.blotName,!0)),Se.attributes.copy(de)}),this.unwrap()):ne.prototype.format.call(this,se,te)},ce.prototype.formatAt=function(se,te,Se,de){if(this.formats()[Se]!=null||Ve.query(Se,Ve.Scope.ATTRIBUTE)){var ue=this.isolate(se,te);ue.format(Se,de)}else ne.prototype.formatAt.call(this,se,te,Se,de)},ce.prototype.optimize=function(se){ne.prototype.optimize.call(this,se);var te=this.formats();if(Object.keys(te).length===0)return this.unwrap();var Se=this.next;Se instanceof ce&&Se.prev===this&&Re(te,Se.formats())&&(Se.moveChildren(this),Se.remove())},ce.blotName="inline",ce.scope=Ve.Scope.INLINE_BLOT,ce.tagName="SPAN",ce}(Qe.default);We.default=Me},function(Gt,We,_e){"use strict";var Xe=this&&this.__extends||function(){var Me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ne,ce){ne.__proto__=ce}||function(ne,ce){for(var se in ce)ce.hasOwnProperty(se)&&(ne[se]=ce[se])};return function(ne,ce){Me(ne,ce);function se(){this.constructor=ne}n(se,"__"),ne.prototype=ce===null?Object.create(ce):(se.prototype=ce.prototype,new se)}}();Object.defineProperty(We,"__esModule",{value:!0});var Qe=_e(19),Ve=_e(1),Re=function(Me){Xe(ne,Me);function ne(){return Me!==null&&Me.apply(this,arguments)||this}return n(ne,"BlockBlot"),ne.formats=function(ce){var se=Ve.query(ne.blotName).tagName;if(ce.tagName!==se)return Me.formats.call(this,ce)},ne.prototype.format=function(ce,se){Ve.query(ce,Ve.Scope.BLOCK)!=null&&(ce===this.statics.blotName&&!se?this.replaceWith(ne.blotName):Me.prototype.format.call(this,ce,se))},ne.prototype.formatAt=function(ce,se,te,Se){Ve.query(te,Ve.Scope.BLOCK)!=null?this.format(te,Se):Me.prototype.formatAt.call(this,ce,se,te,Se)},ne.prototype.insertAt=function(ce,se,te){if(te==null||Ve.query(se,Ve.Scope.INLINE)!=null)Me.prototype.insertAt.call(this,ce,se,te);else{var Se=this.split(ce),de=Ve.create(se,te);Se.parent.insertBefore(de,Se)}},ne.prototype.update=function(ce,se){El.userAgent.match(/Trident/)?this.build():Me.prototype.update.call(this,ce,se)},ne.blotName="block",ne.scope=Ve.Scope.BLOCK_BLOT,ne.tagName="P",ne}(Qe.default);We.default=Re},function(Gt,We,_e){"use strict";var Xe=this&&this.__extends||function(){var Re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Me,ne){Me.__proto__=ne}||function(Me,ne){for(var ce in ne)ne.hasOwnProperty(ce)&&(Me[ce]=ne[ce])};return function(Me,ne){Re(Me,ne);function ce(){this.constructor=Me}n(ce,"__"),Me.prototype=ne===null?Object.create(ne):(ce.prototype=ne.prototype,new ce)}}();Object.defineProperty(We,"__esModule",{value:!0});var Qe=_e(20),Ve=function(Re){Xe(Me,Re);function Me(){return Re!==null&&Re.apply(this,arguments)||this}return n(Me,"EmbedBlot"),Me.formats=function(ne){},Me.prototype.format=function(ne,ce){Re.prototype.formatAt.call(this,0,this.length(),ne,ce)},Me.prototype.formatAt=function(ne,ce,se,te){ne===0&&ce===this.length()?this.format(se,te):Re.prototype.formatAt.call(this,ne,ce,se,te)},Me.prototype.formats=function(){return this.statics.formats(this.domNode)},Me}(Qe.default);We.default=Ve},function(Gt,We,_e){"use strict";var Xe=this&&this.__extends||function(){var Me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ne,ce){ne.__proto__=ce}||function(ne,ce){for(var se in ce)ce.hasOwnProperty(se)&&(ne[se]=ce[se])};return function(ne,ce){Me(ne,ce);function se(){this.constructor=ne}n(se,"__"),ne.prototype=ce===null?Object.create(ce):(se.prototype=ce.prototype,new se)}}();Object.defineProperty(We,"__esModule",{value:!0});var Qe=_e(20),Ve=_e(1),Re=function(Me){Xe(ne,Me);function ne(ce){var se=Me.call(this,ce)||this;return se.text=se.statics.value(se.domNode),se}return n(ne,"TextBlot"),ne.create=function(ce){return ct.createTextNode(ce)},ne.value=function(ce){var se=ce.data;return se.normalize&&(se=se.normalize()),se},ne.prototype.deleteAt=function(ce,se){this.domNode.data=this.text=this.text.slice(0,ce)+this.text.slice(ce+se)},ne.prototype.index=function(ce,se){return this.domNode===ce?se:-1},ne.prototype.insertAt=function(ce,se,te){te==null?(this.text=this.text.slice(0,ce)+se+this.text.slice(ce),this.domNode.data=this.text):Me.prototype.insertAt.call(this,ce,se,te)},ne.prototype.length=function(){return this.text.length},ne.prototype.optimize=function(ce){Me.prototype.optimize.call(this,ce),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof ne&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},ne.prototype.position=function(ce,se){return se===void 0&&(se=!1),[this.domNode,ce]},ne.prototype.split=function(ce,se){if(se===void 0&&(se=!1),!se){if(ce===0)return this;if(ce===this.length())return this.next}var te=Ve.create(this.domNode.splitText(ce));return this.parent.insertBefore(te,this.next),this.text=this.statics.value(this.domNode),te},ne.prototype.update=function(ce,se){var te=this;ce.some(function(Se){return Se.type==="characterData"&&Se.target===te.domNode})&&(this.text=this.statics.value(this.domNode))},ne.prototype.value=function(){return this.text},ne.blotName="text",ne.scope=Ve.Scope.INLINE_BLOT,ne}(Qe.default);We.default=Re},function(Gt,We,_e){"use strict";var Xe=ct.createElement("div");if(Xe.classList.toggle("test-class",!1),Xe.classList.contains("test-class")){var Qe=Ao.prototype.toggle;Ao.prototype.toggle=function(Ve,Re){return arguments.length>1&&!this.contains(Ve)==!Re?Re:Qe.call(this,Ve)}}String.prototype.startsWith||(String.prototype.startsWith=function(Ve,Re){return Re=Re||0,this.substr(Re,Ve.length)===Ve}),String.prototype.endsWith||(String.prototype.endsWith=function(Ve,Re){var Me=this.toString();(typeof Re!="number"||!isFinite(Re)||Math.floor(Re)!==Re||Re>Me.length)&&(Re=Me.length),Re-=Ve.length;var ne=Me.indexOf(Ve,Re);return ne!==-1&&ne===Re}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:n(function(Re){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof Re!="function")throw new TypeError("predicate must be a function");for(var Me=Object(this),ne=Me.length>>>0,ce=arguments[1],se,te=0;te<ne;te++)if(se=Me[te],Re.call(ce,se,te,Me))return se},"value")}),ct.addEventListener("DOMContentLoaded",function(){ct.execCommand("enableObjectResizing",!1,!1),ct.execCommand("autoUrlDetect",!1,!1)})},function(Gt,We){var _e=-1,Xe=1,Qe=0;function Ve(le,Ce,st){if(le==Ce)return le?[[Qe,le]]:[];(st<0||le.length<st)&&(st=null);var Ge=ce(le,Ce),Je=le.substring(0,Ge);le=le.substring(Ge),Ce=Ce.substring(Ge),Ge=se(le,Ce);var pt=le.substring(le.length-Ge);le=le.substring(0,le.length-Ge),Ce=Ce.substring(0,Ce.length-Ge);var He=Re(le,Ce);return Je&&He.unshift([Qe,Je]),pt&&He.push([Qe,pt]),Se(He),st!=null&&(He=ae(He,st)),He=q(He),He}n(Ve,"diff_main");function Re(le,Ce){var st;if(!le)return[[Xe,Ce]];if(!Ce)return[[_e,le]];var Ge=le.length>Ce.length?le:Ce,Je=le.length>Ce.length?Ce:le,pt=Ge.indexOf(Je);if(pt!=-1)return st=[[Xe,Ge.substring(0,pt)],[Qe,Je],[Xe,Ge.substring(pt+Je.length)]],le.length>Ce.length&&(st[0][0]=st[2][0]=_e),st;if(Je.length==1)return[[_e,le],[Xe,Ce]];var He=te(le,Ce);if(He){var ke=He[0],Ue=He[1],rt=He[2],yt=He[3],Pt=He[4],qt=Ve(ke,rt),on=Ve(Ue,yt);return qt.concat([[Qe,Pt]],on)}return Me(le,Ce)}n(Re,"diff_compute_");function Me(le,Ce){for(var st=le.length,Ge=Ce.length,Je=Math.ceil((st+Ge)/2),pt=Je,He=2*Je,ke=new Array(He),Ue=new Array(He),rt=0;rt<He;rt++)ke[rt]=-1,Ue[rt]=-1;ke[pt+1]=0,Ue[pt+1]=0;for(var yt=st-Ge,Pt=yt%2!=0,qt=0,on=0,Un=0,zt=0,xt=0;xt<Je;xt++){for(var at=-xt+qt;at<=xt-on;at+=2){var wt=pt+at,Nt;at==-xt||at!=xt&&ke[wt-1]<ke[wt+1]?Nt=ke[wt+1]:Nt=ke[wt-1]+1;for(var ln=Nt-at;Nt<st&&ln<Ge&&le.charAt(Nt)==Ce.charAt(ln);)Nt++,ln++;if(ke[wt]=Nt,Nt>st)on+=2;else if(ln>Ge)qt+=2;else if(Pt){var an=pt+yt-at;if(an>=0&&an<He&&Ue[an]!=-1){var bt=st-Ue[an];if(Nt>=bt)return ne(le,Ce,Nt,ln)}}}for(var Kt=-xt+Un;Kt<=xt-zt;Kt+=2){var an=pt+Kt,bt;Kt==-xt||Kt!=xt&&Ue[an-1]<Ue[an+1]?bt=Ue[an+1]:bt=Ue[an-1]+1;for(var _n=bt-Kt;bt<st&&_n<Ge&&le.charAt(st-bt-1)==Ce.charAt(Ge-_n-1);)bt++,_n++;if(Ue[an]=bt,bt>st)zt+=2;else if(_n>Ge)Un+=2;else if(!Pt){var wt=pt+yt-Kt;if(wt>=0&&wt<He&&ke[wt]!=-1){var Nt=ke[wt],ln=pt+Nt-wt;if(bt=st-bt,Nt>=bt)return ne(le,Ce,Nt,ln)}}}}return[[_e,le],[Xe,Ce]]}n(Me,"diff_bisect_");function ne(le,Ce,st,Ge){var Je=le.substring(0,st),pt=Ce.substring(0,Ge),He=le.substring(st),ke=Ce.substring(Ge),Ue=Ve(Je,pt),rt=Ve(He,ke);return Ue.concat(rt)}n(ne,"diff_bisectSplit_");function ce(le,Ce){if(!le||!Ce||le.charAt(0)!=Ce.charAt(0))return 0;for(var st=0,Ge=Math.min(le.length,Ce.length),Je=Ge,pt=0;st<Je;)le.substring(pt,Je)==Ce.substring(pt,Je)?(st=Je,pt=st):Ge=Je,Je=Math.floor((Ge-st)/2+st);return Je}n(ce,"diff_commonPrefix");function se(le,Ce){if(!le||!Ce||le.charAt(le.length-1)!=Ce.charAt(Ce.length-1))return 0;for(var st=0,Ge=Math.min(le.length,Ce.length),Je=Ge,pt=0;st<Je;)le.substring(le.length-Je,le.length-pt)==Ce.substring(Ce.length-Je,Ce.length-pt)?(st=Je,pt=st):Ge=Je,Je=Math.floor((Ge-st)/2+st);return Je}n(se,"diff_commonSuffix");function te(le,Ce){var st=le.length>Ce.length?le:Ce,Ge=le.length>Ce.length?Ce:le;if(st.length<4||Ge.length*2<st.length)return null;function Je(on,Un,zt){for(var xt=on.substring(zt,zt+Math.floor(on.length/4)),at=-1,wt="",Nt,ln,an,bt;(at=Un.indexOf(xt,at+1))!=-1;){var Kt=ce(on.substring(zt),Un.substring(at)),_n=se(on.substring(0,zt),Un.substring(0,at));wt.length<_n+Kt&&(wt=Un.substring(at-_n,at)+Un.substring(at,at+Kt),Nt=on.substring(0,zt-_n),ln=on.substring(zt+Kt),an=Un.substring(0,at-_n),bt=Un.substring(at+Kt))}return wt.length*2>=on.length?[Nt,ln,an,bt,wt]:null}n(Je,"diff_halfMatchI_");var pt=Je(st,Ge,Math.ceil(st.length/4)),He=Je(st,Ge,Math.ceil(st.length/2)),ke;if(!pt&&!He)return null;He?pt?ke=pt[4].length>He[4].length?pt:He:ke=He:ke=pt;var Ue,rt,yt,Pt;le.length>Ce.length?(Ue=ke[0],rt=ke[1],yt=ke[2],Pt=ke[3]):(yt=ke[0],Pt=ke[1],Ue=ke[2],rt=ke[3]);var qt=ke[4];return[Ue,rt,yt,Pt,qt]}n(te,"diff_halfMatch_");function Se(le){le.push([Qe,""]);for(var Ce=0,st=0,Ge=0,Je="",pt="",He;Ce<le.length;)switch(le[Ce][0]){case Xe:Ge++,pt+=le[Ce][1],Ce++;break;case _e:st++,Je+=le[Ce][1],Ce++;break;case Qe:st+Ge>1?(st!==0&&Ge!==0&&(He=ce(pt,Je),He!==0&&(Ce-st-Ge>0&&le[Ce-st-Ge-1][0]==Qe?le[Ce-st-Ge-1][1]+=pt.substring(0,He):(le.splice(0,0,[Qe,pt.substring(0,He)]),Ce++),pt=pt.substring(He),Je=Je.substring(He)),He=se(pt,Je),He!==0&&(le[Ce][1]=pt.substring(pt.length-He)+le[Ce][1],pt=pt.substring(0,pt.length-He),Je=Je.substring(0,Je.length-He))),st===0?le.splice(Ce-Ge,st+Ge,[Xe,pt]):Ge===0?le.splice(Ce-st,st+Ge,[_e,Je]):le.splice(Ce-st-Ge,st+Ge,[_e,Je],[Xe,pt]),Ce=Ce-st-Ge+(st?1:0)+(Ge?1:0)+1):Ce!==0&&le[Ce-1][0]==Qe?(le[Ce-1][1]+=le[Ce][1],le.splice(Ce,1)):Ce++,Ge=0,st=0,Je="",pt="";break}le[le.length-1][1]===""&&le.pop();var ke=!1;for(Ce=1;Ce<le.length-1;)le[Ce-1][0]==Qe&&le[Ce+1][0]==Qe&&(le[Ce][1].substring(le[Ce][1].length-le[Ce-1][1].length)==le[Ce-1][1]?(le[Ce][1]=le[Ce-1][1]+le[Ce][1].substring(0,le[Ce][1].length-le[Ce-1][1].length),le[Ce+1][1]=le[Ce-1][1]+le[Ce+1][1],le.splice(Ce-1,1),ke=!0):le[Ce][1].substring(0,le[Ce+1][1].length)==le[Ce+1][1]&&(le[Ce-1][1]+=le[Ce+1][1],le[Ce][1]=le[Ce][1].substring(le[Ce+1][1].length)+le[Ce+1][1],le.splice(Ce+1,1),ke=!0)),Ce++;ke&&Se(le)}n(Se,"diff_cleanupMerge");var de=Ve;de.INSERT=Xe,de.DELETE=_e,de.EQUAL=Qe,Gt.exports=de;function ue(le,Ce){if(Ce===0)return[Qe,le];for(var st=0,Ge=0;Ge<le.length;Ge++){var Je=le[Ge];if(Je[0]===_e||Je[0]===Qe){var pt=st+Je[1].length;if(Ce===pt)return[Ge+1,le];if(Ce<pt){le=le.slice();var He=Ce-st,ke=[Je[0],Je[1].slice(0,He)],Ue=[Je[0],Je[1].slice(He)];return le.splice(Ge,1,ke,Ue),[Ge+1,le]}else st=pt}}throw new Error("cursor_pos is out of bounds!")}n(ue,"cursor_normalize_diff");function ae(le,Ce){var st=ue(le,Ce),Ge=st[1],Je=st[0],pt=Ge[Je],He=Ge[Je+1];if(pt==null)return le;if(pt[0]!==Qe)return le;if(He!=null&&pt[1]+He[1]===He[1]+pt[1])return Ge.splice(Je,2,He,pt),ve(Ge,Je,2);if(He!=null&&He[1].indexOf(pt[1])===0){Ge.splice(Je,2,[He[0],pt[1]],[0,pt[1]]);var ke=He[1].slice(pt[1].length);return ke.length>0&&Ge.splice(Je+2,0,[He[0],ke]),ve(Ge,Je,3)}else return le}n(ae,"fix_cursor");function q(le){for(var Ce=!1,st=n(function(He){return He.charCodeAt(0)>=56320&&He.charCodeAt(0)<=57343},"starts_with_pair_end"),Ge=n(function(He){return He.charCodeAt(He.length-1)>=55296&&He.charCodeAt(He.length-1)<=56319},"ends_with_pair_start"),Je=2;Je<le.length;Je+=1)le[Je-2][0]===Qe&&Ge(le[Je-2][1])&&le[Je-1][0]===_e&&st(le[Je-1][1])&&le[Je][0]===Xe&&st(le[Je][1])&&(Ce=!0,le[Je-1][1]=le[Je-2][1].slice(-1)+le[Je-1][1],le[Je][1]=le[Je-2][1].slice(-1)+le[Je][1],le[Je-2][1]=le[Je-2][1].slice(0,-1));if(!Ce)return le;for(var pt=[],Je=0;Je<le.length;Je+=1)le[Je][1].length>0&&pt.push(le[Je]);return pt}n(q,"fix_emoji");function ve(le,Ce,st){for(var Ge=Ce+st-1;Ge>=0&&Ge>=Ce-1;Ge--)if(Ge+1<le.length){var Je=le[Ge],pt=le[Ge+1];Je[0]===pt[1]&&le.splice(Ge,2,[Je[0],Je[1]+pt[1]])}return le}n(ve,"merge_tuples")},function(Gt,We,_e){"use strict";var Xe;if(!Object.keys){var Qe=Object.prototype.hasOwnProperty,Ve=Object.prototype.toString,Re=_e(36),Me=Object.prototype.propertyIsEnumerable,ne=!Me.call({toString:null},"toString"),ce=Me.call(function(){},"prototype"),se=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],te=n(function(ae){var q=ae.constructor;return q&&q.prototype===ae},"equalsConstructorPrototype"),Se={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},de=function(){if(typeof Z>"u")return!1;for(var ae in Z)try{if(!Se["$"+ae]&&Qe.call(Z,ae)&&Z[ae]!==null&&typeof Z[ae]=="object")try{te(Z[ae])}catch{return!0}}catch{return!0}return!1}(),ue=n(function(ae){if(typeof Z>"u"||!de)return te(ae);try{return te(ae)}catch{return!1}},"equalsConstructorPrototypeIfNotBuggy");Xe=n(function(q){var ve=q!==null&&typeof q=="object",le=Ve.call(q)==="[object Function]",Ce=Re(q),st=ve&&Ve.call(q)==="[object String]",Ge=[];if(!ve&&!le&&!Ce)throw new TypeError("Object.keys called on a non-object");var Je=ce&&le;if(st&&q.length>0&&!Qe.call(q,0))for(var pt=0;pt<q.length;++pt)Ge.push(String(pt));if(Ce&&q.length>0)for(var He=0;He<q.length;++He)Ge.push(String(He));else for(var ke in q)!(Je&&ke==="prototype")&&Qe.call(q,ke)&&Ge.push(String(ke));if(ne)for(var Ue=ue(q),rt=0;rt<se.length;++rt)!(Ue&&se[rt]==="constructor")&&Qe.call(q,se[rt])&&Ge.push(se[rt]);return Ge},"keys")}Gt.exports=Xe},function(Gt,We,_e){"use strict";var Xe=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Qe=Object.prototype.toString,Ve=n(function(ce){return Xe&&ce&&typeof ce=="object"&&Symbol.toStringTag in ce?!1:Qe.call(ce)==="[object Arguments]"},"isArguments"),Re=n(function(ce){return Ve(ce)?!0:ce!==null&&typeof ce=="object"&&typeof ce.length=="number"&&ce.length>=0&&Qe.call(ce)!=="[object Array]"&&Qe.call(ce.callee)==="[object Function]"},"isArguments"),Me=function(){return Ve(arguments)}();Ve.isLegacyArguments=Re,Gt.exports=Me?Ve:Re},function(Gt,We,_e){"use strict";var Xe=_e(13),Qe=_e(37),Ve=_e(40),Re=_e(41),Me=_e(69),ne=Qe(Re(),Object);Xe(ne,{getPolyfill:Re,implementation:Ve,shim:Me}),Gt.exports=ne},function(Gt,We,_e){"use strict";var Xe="Function.prototype.bind called on incompatible ",Qe=Array.prototype.slice,Ve=Object.prototype.toString,Re="[object Function]";Gt.exports=n(function(ne){var ce=this;if(typeof ce!="function"||Ve.call(ce)!==Re)throw new TypeError(Xe+ce);for(var se=Qe.call(arguments,1),te,Se=n(function(){if(this instanceof te){var ve=ce.apply(this,se.concat(Qe.call(arguments)));return Object(ve)===ve?ve:this}else return ce.apply(ne,se.concat(Qe.call(arguments)))},"binder"),de=Math.max(0,ce.length-se.length),ue=[],ae=0;ae<de;ae++)ue.push("$"+ae);if(te=Function("binder","return function ("+ue.join(",")+"){ return binder.apply(this,arguments); }")(Se),ce.prototype){var q=n(function(){},"Empty");q.prototype=ce.prototype,te.prototype=new q,q.prototype=null}return te},"bind")},function(Gt,We,_e){"use strict";var Xe,Qe=TypeError,Ve=Object.getOwnPropertyDescriptor;if(Ve)try{Ve({},"")}catch{Ve=null}var Re=n(function(){throw new Qe},"throwTypeError"),Me=Ve?function(){try{return arguments.callee,Re}catch{try{return Ve(arguments,"callee").get}catch{return Re}}}():Re,ne=_e(39)(),ce=Object.getPrototypeOf||function(ke){return ke.__proto__},se,te=se?ce(se):Xe,Se,de=Se?Se.constructor:Xe,ue,ae=ue?ce(ue):Xe,q=ue?ue():Xe,ve=typeof Uint8Array>"u"?Xe:ce(Uint8Array),le={"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Xe:ArrayBuffer,"%ArrayBufferPrototype%":typeof ArrayBuffer>"u"?Xe:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":ne?ce([][Symbol.iterator]()):Xe,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":Xe,"%AsyncFunction%":de,"%AsyncFunctionPrototype%":de?de.prototype:Xe,"%AsyncGenerator%":ue?ce(q):Xe,"%AsyncGeneratorFunction%":ae,"%AsyncGeneratorPrototype%":ae?ae.prototype:Xe,"%AsyncIteratorPrototype%":q&&ne&&Symbol.asyncIterator?q[Symbol.asyncIterator]():Xe,"%Atomics%":typeof Atomics>"u"?Xe:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":typeof DataView>"u"?Xe:DataView,"%DataViewPrototype%":typeof DataView>"u"?Xe:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":typeof Float32Array>"u"?Xe:Float32Array,"%Float32ArrayPrototype%":typeof Float32Array>"u"?Xe:Float32Array.prototype,"%Float64Array%":typeof Float64Array>"u"?Xe:Float64Array,"%Float64ArrayPrototype%":typeof Float64Array>"u"?Xe:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":se?ce(se()):Xe,"%GeneratorFunction%":te,"%GeneratorPrototype%":te?te.prototype:Xe,"%Int8Array%":typeof Int8Array>"u"?Xe:Int8Array,"%Int8ArrayPrototype%":typeof Int8Array>"u"?Xe:Int8Array.prototype,"%Int16Array%":typeof Int16Array>"u"?Xe:Int16Array,"%Int16ArrayPrototype%":typeof Int16Array>"u"?Xe:Int8Array.prototype,"%Int32Array%":typeof Int32Array>"u"?Xe:Int32Array,"%Int32ArrayPrototype%":typeof Int32Array>"u"?Xe:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ne?ce(ce([][Symbol.iterator]())):Xe,"%JSON%":typeof JSON=="object"?JSON:Xe,"%JSONParse%":typeof JSON=="object"?JSON.parse:Xe,"%Map%":typeof Map>"u"?Xe:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ne?Xe:ce(new Map()[Symbol.iterator]()),"%MapPrototype%":typeof Map>"u"?Xe:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Xe:Promise,"%PromisePrototype%":typeof Promise>"u"?Xe:Promise.prototype,"%PromiseProto_then%":typeof Promise>"u"?Xe:Promise.prototype.then,"%Promise_all%":typeof Promise>"u"?Xe:Promise.all,"%Promise_reject%":typeof Promise>"u"?Xe:Promise.reject,"%Promise_resolve%":typeof Promise>"u"?Xe:Promise.resolve,"%Proxy%":typeof Proxy>"u"?Xe:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":typeof Reflect>"u"?Xe:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":typeof Set>"u"?Xe:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ne?Xe:ce(new Set()[Symbol.iterator]()),"%SetPrototype%":typeof Set>"u"?Xe:Set.prototype,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Xe:SharedArrayBuffer,"%SharedArrayBufferPrototype%":typeof SharedArrayBuffer>"u"?Xe:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":ne?ce(""[Symbol.iterator]()):Xe,"%StringPrototype%":String.prototype,"%Symbol%":ne?Symbol:Xe,"%SymbolPrototype%":ne?Symbol.prototype:Xe,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":Me,"%TypedArray%":ve,"%TypedArrayPrototype%":ve?ve.prototype:Xe,"%TypeError%":Qe,"%TypeErrorPrototype%":Qe.prototype,"%Uint8Array%":typeof Uint8Array>"u"?Xe:Uint8Array,"%Uint8ArrayPrototype%":typeof Uint8Array>"u"?Xe:Uint8Array.prototype,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Xe:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":typeof Uint8ClampedArray>"u"?Xe:Uint8ClampedArray.prototype,"%Uint16Array%":typeof Uint16Array>"u"?Xe:Uint16Array,"%Uint16ArrayPrototype%":typeof Uint16Array>"u"?Xe:Uint16Array.prototype,"%Uint32Array%":typeof Uint32Array>"u"?Xe:Uint32Array,"%Uint32ArrayPrototype%":typeof Uint32Array>"u"?Xe:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":typeof WeakMap>"u"?Xe:WeakMap,"%WeakMapPrototype%":typeof WeakMap>"u"?Xe:WeakMap.prototype,"%WeakSet%":typeof WeakSet>"u"?Xe:WeakSet,"%WeakSetPrototype%":typeof WeakSet>"u"?Xe:WeakSet.prototype},Ce=_e(38),st=Ce.call(Function.call,String.prototype.replace),Ge=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Je=/\\(\\)?/g,pt=n(function(Ue){var rt=[];return st(Ue,Ge,function(yt,Pt,qt,on){rt[rt.length]=qt?st(on,Je,"$1"):Pt||yt}),rt},"stringToPath"),He=n(function(Ue,rt){if(!(Ue in le))throw new SyntaxError("intrinsic "+Ue+" does not exist!");if(typeof le[Ue]>"u"&&!rt)throw new Qe("intrinsic "+Ue+" exists, but is not available. Please file an issue!");return le[Ue]},"getBaseIntrinsic");Gt.exports=n(function(Ue,rt){if(typeof Ue!="string"||Ue.length===0)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof rt!="boolean")throw new TypeError('"allowMissing" argument must be a boolean');for(var yt=pt(Ue),Pt=He("%"+(yt.length>0?yt[0]:"")+"%",rt),qt=1;qt<yt.length;qt+=1)if(Pt!=null)if(Ve&&qt+1>=yt.length){var on=Ve(Pt,yt[qt]);if(!rt&&!(yt[qt]in Pt))throw new Qe("base intrinsic for "+Ue+" exists, but the property is not available.");Pt=on?on.get||on.value:Pt[yt[qt]]}else Pt=Pt[yt[qt]];return Pt},"GetIntrinsic")},function(Gt,We){var _e;_e=function(){return this}();try{_e=_e||Function("return this")()||(0,eval)("this")}catch{typeof Z=="object"&&(_e=Z)}Gt.exports=_e},function(Gt,We,_e){"use strict";Gt.exports=n(function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var Qe={},Ve=Symbol("test"),Re=Object(Ve);if(typeof Ve=="string"||Object.prototype.toString.call(Ve)!=="[object Symbol]"||Object.prototype.toString.call(Re)!=="[object Symbol]")return!1;var Me=42;Qe[Ve]=Me;for(Ve in Qe)return!1;if(typeof Object.keys=="function"&&Object.keys(Qe).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(Qe).length!==0)return!1;var ne=Object.getOwnPropertySymbols(Qe);if(ne.length!==1||ne[0]!==Ve||!Object.prototype.propertyIsEnumerable.call(Qe,Ve))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var ce=Object.getOwnPropertyDescriptor(Qe,Ve);if(ce.value!==Me||ce.enumerable!==!0)return!1}return!0},"hasSymbols")},function(Gt,We,_e){"use strict";var Xe=_e(41),Qe=_e(13);Gt.exports=n(function(){var Re=Xe();return Qe(Object,{is:Re},{is:n(function(){return Object.is!==Re},"testObjectIs")}),Re},"shimObjectIs")},function(Gt,We,_e){"use strict";var Xe=_e(39)(),Qe=Xe&&typeof Symbol.toStringTag=="symbol",Ve,Re,Me;if(Qe){Ve=Function.call.bind(RegExp.prototype.exec),Re={};var ne=n(function(){throw Re},"throwRegexMarker");Me={toString:ne,valueOf:ne},typeof Symbol.toPrimitive=="symbol"&&(Me[Symbol.toPrimitive]=ne)}var ce=Object.prototype.toString,se="[object RegExp]";Gt.exports=n(Qe?function(Se){if(!Se||typeof Se!="object")return!1;try{Ve(Se,Me)}catch(de){return de===Re}}:function(Se){return!Se||typeof Se!="object"&&typeof Se!="function"?!1:ce.call(Se)===se},"isRegex")},function(Gt,We,_e){"use strict";var Xe=_e(13),Qe=_e(37),Ve=_e(42),Re=_e(43),Me=_e(72),ne=Qe(Ve);Xe(ne,{getPolyfill:Re,implementation:Ve,shim:Me}),Gt.exports=ne},function(Gt,We,_e){"use strict";var Xe=_e(13).supportsDescriptors,Qe=_e(43),Ve=Object.getOwnPropertyDescriptor,Re=Object.defineProperty,Me=TypeError,ne=Object.getPrototypeOf,ce=/a/;Gt.exports=n(function(){if(!Xe||!ne)throw new Me("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var te=Qe(),Se=ne(ce),de=Ve(Se,"flags");return(!de||de.get!==te)&&Re(Se,"flags",{configurable:!0,enumerable:!1,get:te}),te},"shimFlags")},function(Gt,We,_e){"use strict";var Xe=Date.prototype.getDay,Qe=n(function(ce){try{return Xe.call(ce),!0}catch{return!1}},"tryDateGetDayCall"),Ve=Object.prototype.toString,Re="[object Date]",Me=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol";Gt.exports=n(function(ce){return typeof ce!="object"||ce===null?!1:Me?Qe(ce):Ve.call(ce)===Re},"isDateObject")},function(Gt,We){"use strict";var _e=Object.prototype.hasOwnProperty,Xe="~";function Qe(){}n(Qe,"Events"),Object.create&&(Qe.prototype=Object.create(null),new Qe().__proto__||(Xe=!1));function Ve(Me,ne,ce){this.fn=Me,this.context=ne,this.once=ce||!1}n(Ve,"EE");function Re(){this._events=new Qe,this._eventsCount=0}n(Re,"EventEmitter"),Re.prototype.eventNames=n(function(){var ne=[],ce,se;if(this._eventsCount===0)return ne;for(se in ce=this._events)_e.call(ce,se)&&ne.push(Xe?se.slice(1):se);return Object.getOwnPropertySymbols?ne.concat(Object.getOwnPropertySymbols(ce)):ne},"eventNames"),Re.prototype.listeners=n(function(ne,ce){var se=Xe?Xe+ne:ne,te=this._events[se];if(ce)return!!te;if(!te)return[];if(te.fn)return[te.fn];for(var Se=0,de=te.length,ue=new Array(de);Se<de;Se++)ue[Se]=te[Se].fn;return ue},"listeners"),Re.prototype.emit=n(function(ne,ce,se,te,Se,de){var ue=Xe?Xe+ne:ne;if(!this._events[ue])return!1;var ae=this._events[ue],q=arguments.length,ve,le;if(ae.fn){switch(ae.once&&this.removeListener(ne,ae.fn,void 0,!0),q){case 1:return ae.fn.call(ae.context),!0;case 2:return ae.fn.call(ae.context,ce),!0;case 3:return ae.fn.call(ae.context,ce,se),!0;case 4:return ae.fn.call(ae.context,ce,se,te),!0;case 5:return ae.fn.call(ae.context,ce,se,te,Se),!0;case 6:return ae.fn.call(ae.context,ce,se,te,Se,de),!0}for(le=1,ve=new Array(q-1);le<q;le++)ve[le-1]=arguments[le];ae.fn.apply(ae.context,ve)}else{var Ce=ae.length,st;for(le=0;le<Ce;le++)switch(ae[le].once&&this.removeListener(ne,ae[le].fn,void 0,!0),q){case 1:ae[le].fn.call(ae[le].context);break;case 2:ae[le].fn.call(ae[le].context,ce);break;case 3:ae[le].fn.call(ae[le].context,ce,se);break;case 4:ae[le].fn.call(ae[le].context,ce,se,te);break;default:if(!ve)for(st=1,ve=new Array(q-1);st<q;st++)ve[st-1]=arguments[st];ae[le].fn.apply(ae[le].context,ve)}}return!0},"emit"),Re.prototype.on=n(function(ne,ce,se){var te=new Ve(ce,se||this),Se=Xe?Xe+ne:ne;return this._events[Se]?this._events[Se].fn?this._events[Se]=[this._events[Se],te]:this._events[Se].push(te):(this._events[Se]=te,this._eventsCount++),this},"on"),Re.prototype.once=n(function(ne,ce,se){var te=new Ve(ce,se||this,!0),Se=Xe?Xe+ne:ne;return this._events[Se]?this._events[Se].fn?this._events[Se]=[this._events[Se],te]:this._events[Se].push(te):(this._events[Se]=te,this._eventsCount++),this},"once"),Re.prototype.removeListener=n(function(ne,ce,se,te){var Se=Xe?Xe+ne:ne;if(!this._events[Se])return this;if(!ce)return--this._eventsCount===0?this._events=new Qe:delete this._events[Se],this;var de=this._events[Se];if(de.fn)de.fn===ce&&(!te||de.once)&&(!se||de.context===se)&&(--this._eventsCount===0?this._events=new Qe:delete this._events[Se]);else{for(var ue=0,ae=[],q=de.length;ue<q;ue++)(de[ue].fn!==ce||te&&!de[ue].once||se&&de[ue].context!==se)&&ae.push(de[ue]);ae.length?this._events[Se]=ae.length===1?ae[0]:ae:--this._eventsCount===0?this._events=new Qe:delete this._events[Se]}return this},"removeListener"),Re.prototype.removeAllListeners=n(function(ne){var ce;return ne?(ce=Xe?Xe+ne:ne,this._events[ce]&&(--this._eventsCount===0?this._events=new Qe:delete this._events[ce])):(this._events=new Qe,this._eventsCount=0),this},"removeAllListeners"),Re.prototype.off=Re.prototype.removeListener,Re.prototype.addListener=Re.prototype.on,Re.prototype.setMaxListeners=n(function(){return this},"setMaxListeners"),Re.prefixed=Xe,Re.EventEmitter=Re,typeof Gt<"u"&&(Gt.exports=Re)},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0}),We.matchText=We.matchSpacing=We.matchNewline=We.matchBlot=We.matchAttributor=We.default=void 0;var Xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(wn){return typeof wn}:function(wn){return wn&&typeof Symbol=="function"&&wn.constructor===Symbol&&wn!==Symbol.prototype?"symbol":typeof wn},Qe=function(){function wn(xn,Di){var Hi=[],Ri=!0,lr=!1,Tr=void 0;try{for(var eo=xn[Symbol.iterator](),Ma;!(Ri=(Ma=eo.next()).done)&&(Hi.push(Ma.value),!(Di&&Hi.length===Di));Ri=!0);}catch(Bs){lr=!0,Tr=Bs}finally{try{!Ri&&eo.return&&eo.return()}finally{if(lr)throw Tr}}return Hi}return n(wn,"sliceIterator"),function(xn,Di){if(Array.isArray(xn))return xn;if(Symbol.iterator in Object(xn))return wn(xn,Di);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ve=function(){function wn(xn,Di){for(var Hi=0;Hi<Di.length;Hi++){var Ri=Di[Hi];Ri.enumerable=Ri.enumerable||!1,Ri.configurable=!0,"value"in Ri&&(Ri.writable=!0),Object.defineProperty(xn,Ri.key,Ri)}}return n(wn,"defineProperties"),function(xn,Di,Hi){return Di&&wn(xn.prototype,Di),Hi&&wn(xn,Hi),xn}}(),Re=_e(3),Me=Ue(Re),ne=_e(2),ce=Ue(ne),se=_e(0),te=Ue(se),Se=_e(5),de=Ue(Se),ue=_e(10),ae=Ue(ue),q=_e(9),ve=Ue(q),le=_e(46),Ce=_e(47),st=_e(14),Ge=Ue(st),Je=_e(27),pt=_e(48),He=_e(49),ke=_e(50);function Ue(wn){return wn&&wn.__esModule?wn:{default:wn}}n(Ue,"_interopRequireDefault");function rt(wn,xn,Di){return xn in wn?Object.defineProperty(wn,xn,{value:Di,enumerable:!0,configurable:!0,writable:!0}):wn[xn]=Di,wn}n(rt,"_defineProperty");function yt(wn,xn){if(!(wn instanceof xn))throw new TypeError("Cannot call a class as a function")}n(yt,"_classCallCheck");function Pt(wn,xn){if(!wn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return xn&&(typeof xn=="object"||typeof xn=="function")?xn:wn}n(Pt,"_possibleConstructorReturn");function qt(wn,xn){if(typeof xn!="function"&&xn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof xn);wn.prototype=Object.create(xn&&xn.prototype,{constructor:{value:wn,enumerable:!1,writable:!0,configurable:!0}}),xn&&(Object.setPrototypeOf?Object.setPrototypeOf(wn,xn):wn.__proto__=xn)}n(qt,"_inherits");var on=(0,ae.default)("quill:clipboard"),Un=[[Yo.TEXT_NODE,Ra],[Yo.TEXT_NODE,jr],["br",qn],[Yo.ELEMENT_NODE,jr],[Yo.ELEMENT_NODE,En],[Yo.ELEMENT_NODE,mo],[Yo.ELEMENT_NODE,_n],[Yo.ELEMENT_NODE,vn],["li",Hr],["b",Kt.bind(Kt,"bold")],["i",Kt.bind(Kt,"italic")],["style",Xi]],zt=[le.AlignAttribute,pt.DirectionAttribute].reduce(function(wn,xn){return wn[xn.keyName]=xn,wn},{}),xt=[le.AlignStyle,Ce.BackgroundStyle,Je.ColorStyle,pt.DirectionStyle,He.FontStyle,ke.SizeStyle].reduce(function(wn,xn){return wn[xn.keyName]=xn,wn},{}),at=function(wn){qt(xn,wn);function xn(Di,Hi){yt(this,xn);var Ri=Pt(this,(xn.__proto__||Object.getPrototypeOf(xn)).call(this,Di,Hi));return Ri.quill.root.addEventListener("paste",Ri.onPaste.bind(Ri)),Ri.container=Ri.quill.addContainer("ql-clipboard"),Ri.container.setAttribute("contenteditable",!0),Ri.container.setAttribute("tabindex",-1),Ri.matchers=[],Un.concat(Ri.options.matchers).forEach(function(lr){var Tr=Qe(lr,2),eo=Tr[0],Ma=Tr[1];!Hi.matchVisual&&Ma===mo||Ri.addMatcher(eo,Ma)}),Ri}return n(xn,"Clipboard"),Ve(xn,[{key:"addMatcher",value:n(function(Hi,Ri){this.matchers.push([Hi,Ri])},"addMatcher")},{key:"convert",value:n(function(Hi){if(typeof Hi=="string")return this.container.innerHTML=Hi.replace(/\>\r?\n +\</g,"><"),this.convert();var Ri=this.quill.getFormat(this.quill.selection.savedRange.index);if(Ri[Ge.default.blotName]){var lr=this.container.innerText;return this.container.innerHTML="",new ce.default().insert(lr,rt({},Ge.default.blotName,Ri[Ge.default.blotName]))}var Tr=new WeakMap,eo=this.prepareMatching(Tr),Ma=Qe(eo,2),Bs=Ma[0],cs=Ma[1],A=bt(this.container,Bs,cs,Tr);return ln(A,`
`)&&A.ops[A.ops.length-1].attributes==null&&(A=A.compose(new ce.default().retain(A.length()-1).delete(1))),on.log("convert",this.container.innerHTML,A),this.container.innerHTML="",A},"convert")},{key:"dangerouslyPasteHTML",value:n(function(Hi,Ri){var lr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:de.default.sources.API;if(typeof Hi=="string")this.quill.setContents(this.convert(Hi),Ri),this.quill.setSelection(0,de.default.sources.SILENT);else{var Tr=this.convert(Ri);this.quill.updateContents(new ce.default().retain(Hi).concat(Tr),lr),this.quill.setSelection(Hi+Tr.length(),de.default.sources.SILENT)}},"dangerouslyPasteHTML")},{key:"onPaste",value:n(function(Hi){var Ri=this;if(!(Hi.defaultPrevented||!this.quill.isEnabled())){var lr=this.quill.getSelection(),Tr=new ce.default().retain(lr.index),eo=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(de.default.sources.SILENT),Ol(function(){Tr=Tr.concat(Ri.convert()).delete(lr.length),Ri.quill.updateContents(Tr,de.default.sources.USER),Ri.quill.setSelection(Tr.length()-lr.length,de.default.sources.SILENT),Ri.quill.scrollingContainer.scrollTop=eo,Ri.quill.focus()},1)}},"onPaste")},{key:"prepareMatching",value:n(function(Hi){var Ri=this,lr=[],Tr=[];return this.matchers.forEach(function(eo){var Ma=Qe(eo,2),Bs=Ma[0],cs=Ma[1];switch(Bs){case Yo.TEXT_NODE:Tr.push(cs);break;case Yo.ELEMENT_NODE:lr.push(cs);break;default:Array.from(Ri.container.querySelectorAll(Bs)).forEach(function(A){if(Hi.has(A)){var E=Hi.get(A);E.push(cs)}else Hi.set(A,[cs])});break}}),[lr,Tr]},"prepareMatching")}]),xn}(ve.default);at.DEFAULTS={matchers:[],matchVisual:!0};function wt(wn,xn,Di){return(typeof xn>"u"?"undefined":Xe(xn))==="object"?Object.keys(xn).reduce(function(Hi,Ri){return wt(Hi,Ri,xn[Ri])},wn):wn.reduce(function(Hi,Ri){return Ri.attributes&&Ri.attributes[xn]?Hi.push(Ri):Hi.insert(Ri.insert,(0,Me.default)({},rt({},xn,Di),Ri.attributes))},new ce.default)}n(wt,"applyFormat");function Nt(wn){if(wn.nodeType!==Yo.ELEMENT_NODE)return{};var xn="__ql-computed-style";return wn[xn]||(wn[xn]=Z.getComputedStyle(wn))}n(Nt,"computeStyle");function ln(wn,xn){for(var Di="",Hi=wn.ops.length-1;Hi>=0&&Di.length<xn.length;--Hi){var Ri=wn.ops[Hi];if(typeof Ri.insert!="string")break;Di=Ri.insert+Di}return Di.slice(-1*xn.length)===xn}n(ln,"deltaEndsWith");function an(wn){if(wn.childNodes.length===0)return!1;var xn=Nt(wn);return["block","list-item"].indexOf(xn.display)>-1}n(an,"isLine");function bt(wn,xn,Di,Hi){return wn.nodeType===wn.TEXT_NODE?Di.reduce(function(Ri,lr){return lr(wn,Ri)},new ce.default):wn.nodeType===wn.ELEMENT_NODE?[].reduce.call(wn.childNodes||[],function(Ri,lr){var Tr=bt(lr,xn,Di,Hi);return lr.nodeType===wn.ELEMENT_NODE&&(Tr=xn.reduce(function(eo,Ma){return Ma(lr,eo)},Tr),Tr=(Hi.get(lr)||[]).reduce(function(eo,Ma){return Ma(lr,eo)},Tr)),Ri.concat(Tr)},new ce.default):new ce.default}n(bt,"traverse");function Kt(wn,xn,Di){return wt(Di,wn,!0)}n(Kt,"matchAlias");function _n(wn,xn){var Di=te.default.Attributor.Attribute.keys(wn),Hi=te.default.Attributor.Class.keys(wn),Ri=te.default.Attributor.Style.keys(wn),lr={};return Di.concat(Hi).concat(Ri).forEach(function(Tr){var eo=te.default.query(Tr,te.default.Scope.ATTRIBUTE);eo!=null&&(lr[eo.attrName]=eo.value(wn),lr[eo.attrName])||(eo=zt[Tr],eo!=null&&(eo.attrName===Tr||eo.keyName===Tr)&&(lr[eo.attrName]=eo.value(wn)||void 0),eo=xt[Tr],eo!=null&&(eo.attrName===Tr||eo.keyName===Tr)&&(eo=xt[Tr],lr[eo.attrName]=eo.value(wn)||void 0))}),Object.keys(lr).length>0&&(xn=wt(xn,lr)),xn}n(_n,"matchAttributor");function En(wn,xn){var Di=te.default.query(wn);if(Di==null)return xn;if(Di.prototype instanceof te.default.Embed){var Hi={},Ri=Di.value(wn);Ri!=null&&(Hi[Di.blotName]=Ri,xn=new ce.default().insert(Hi,Di.formats(wn)))}else typeof Di.formats=="function"&&(xn=wt(xn,Di.blotName,Di.formats(wn)));return xn}n(En,"matchBlot");function qn(wn,xn){return ln(xn,`
`)||xn.insert(`
`),xn}n(qn,"matchBreak");function Xi(){return new ce.default}n(Xi,"matchIgnore");function Hr(wn,xn){var Di=te.default.query(wn);if(Di==null||Di.blotName!=="list-item"||!ln(xn,`
`))return xn;for(var Hi=-1,Ri=wn.parentNode;!Ri.classList.contains("ql-clipboard");)(te.default.query(Ri)||{}).blotName==="list"&&(Hi+=1),Ri=Ri.parentNode;return Hi<=0?xn:xn.compose(new ce.default().retain(xn.length()-1).retain(1,{indent:Hi}))}n(Hr,"matchIndent");function jr(wn,xn){return ln(xn,`
`)||(an(wn)||xn.length()>0&&wn.nextSibling&&an(wn.nextSibling))&&xn.insert(`
`),xn}n(jr,"matchNewline");function mo(wn,xn){if(an(wn)&&wn.nextElementSibling!=null&&!ln(xn,`

`)){var Di=wn.offsetHeight+parseFloat(Nt(wn).marginTop)+parseFloat(Nt(wn).marginBottom);wn.nextElementSibling.offsetTop>wn.offsetTop+Di*1.5&&xn.insert(`
`)}return xn}n(mo,"matchSpacing");function vn(wn,xn){var Di={},Hi=wn.style||{};return Hi.fontStyle&&Nt(wn).fontStyle==="italic"&&(Di.italic=!0),Hi.fontWeight&&(Nt(wn).fontWeight.startsWith("bold")||parseInt(Nt(wn).fontWeight)>=700)&&(Di.bold=!0),Object.keys(Di).length>0&&(xn=wt(xn,Di)),parseFloat(Hi.textIndent||0)>0&&(xn=new ce.default().insert("	").concat(xn)),xn}n(vn,"matchStyles");function Ra(wn,xn){var Di=wn.data;if(wn.parentNode.tagName==="O:P")return xn.insert(Di.trim());if(Di.trim().length===0&&wn.parentNode.classList.contains("ql-clipboard"))return xn;if(!Nt(wn.parentNode).whiteSpace.startsWith("pre")){var Hi=n(function(lr,Tr){return Tr=Tr.replace(/[^\u00a0]/g,""),Tr.length<1&&lr?" ":Tr},"replacer");Di=Di.replace(/\r\n/g," ").replace(/\n/g," "),Di=Di.replace(/\s\s+/g,Hi.bind(Hi,!0)),(wn.previousSibling==null&&an(wn.parentNode)||wn.previousSibling!=null&&an(wn.previousSibling))&&(Di=Di.replace(/^\s+/,Hi.bind(Hi,!1))),(wn.nextSibling==null&&an(wn.parentNode)||wn.nextSibling!=null&&an(wn.nextSibling))&&(Di=Di.replace(/\s+$/,Hi.bind(Hi,!1)))}return xn.insert(Di)}n(Ra,"matchText"),We.default=at,We.matchAttributor=_n,We.matchBlot=En,We.matchNewline=jr,We.matchSpacing=mo,We.matchText=Ra},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=function(){function Se(de,ue){for(var ae=0;ae<ue.length;ae++){var q=ue[ae];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(de,q.key,q)}}return n(Se,"defineProperties"),function(de,ue,ae){return ue&&Se(de.prototype,ue),ae&&Se(de,ae),de}}(),Qe=n(function Se(de,ue,ae){de===null&&(de=Function.prototype);var q=Object.getOwnPropertyDescriptor(de,ue);if(q===void 0){var ve=Object.getPrototypeOf(de);return ve===null?void 0:Se(ve,ue,ae)}else{if("value"in q)return q.value;var le=q.get;return le===void 0?void 0:le.call(ae)}},"get"),Ve=_e(6),Re=Me(Ve);function Me(Se){return Se&&Se.__esModule?Se:{default:Se}}n(Me,"_interopRequireDefault");function ne(Se,de){if(!(Se instanceof de))throw new TypeError("Cannot call a class as a function")}n(ne,"_classCallCheck");function ce(Se,de){if(!Se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return de&&(typeof de=="object"||typeof de=="function")?de:Se}n(ce,"_possibleConstructorReturn");function se(Se,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof de);Se.prototype=Object.create(de&&de.prototype,{constructor:{value:Se,enumerable:!1,writable:!0,configurable:!0}}),de&&(Object.setPrototypeOf?Object.setPrototypeOf(Se,de):Se.__proto__=de)}n(se,"_inherits");var te=function(Se){se(de,Se);function de(){return ne(this,de),ce(this,(de.__proto__||Object.getPrototypeOf(de)).apply(this,arguments))}return n(de,"Bold"),Xe(de,[{key:"optimize",value:n(function(ae){Qe(de.prototype.__proto__||Object.getPrototypeOf(de.prototype),"optimize",this).call(this,ae),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)},"optimize")}],[{key:"create",value:n(function(){return Qe(de.__proto__||Object.getPrototypeOf(de),"create",this).call(this)},"create")},{key:"formats",value:n(function(){return!0},"formats")}]),de}(Re.default);te.blotName="bold",te.tagName=["STRONG","B"],We.default=te},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0}),We.addControls=We.default=void 0;var Xe=function(){function ke(Ue,rt){var yt=[],Pt=!0,qt=!1,on=void 0;try{for(var Un=Ue[Symbol.iterator](),zt;!(Pt=(zt=Un.next()).done)&&(yt.push(zt.value),!(rt&&yt.length===rt));Pt=!0);}catch(xt){qt=!0,on=xt}finally{try{!Pt&&Un.return&&Un.return()}finally{if(qt)throw on}}return yt}return n(ke,"sliceIterator"),function(Ue,rt){if(Array.isArray(Ue))return Ue;if(Symbol.iterator in Object(Ue))return ke(Ue,rt);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Qe=function(){function ke(Ue,rt){for(var yt=0;yt<rt.length;yt++){var Pt=rt[yt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Ue,Pt.key,Pt)}}return n(ke,"defineProperties"),function(Ue,rt,yt){return rt&&ke(Ue.prototype,rt),yt&&ke(Ue,yt),Ue}}(),Ve=_e(2),Re=ae(Ve),Me=_e(0),ne=ae(Me),ce=_e(5),se=ae(ce),te=_e(10),Se=ae(te),de=_e(9),ue=ae(de);function ae(ke){return ke&&ke.__esModule?ke:{default:ke}}n(ae,"_interopRequireDefault");function q(ke,Ue,rt){return Ue in ke?Object.defineProperty(ke,Ue,{value:rt,enumerable:!0,configurable:!0,writable:!0}):ke[Ue]=rt,ke}n(q,"_defineProperty");function ve(ke,Ue){if(!(ke instanceof Ue))throw new TypeError("Cannot call a class as a function")}n(ve,"_classCallCheck");function le(ke,Ue){if(!ke)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ue&&(typeof Ue=="object"||typeof Ue=="function")?Ue:ke}n(le,"_possibleConstructorReturn");function Ce(ke,Ue){if(typeof Ue!="function"&&Ue!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ue);ke.prototype=Object.create(Ue&&Ue.prototype,{constructor:{value:ke,enumerable:!1,writable:!0,configurable:!0}}),Ue&&(Object.setPrototypeOf?Object.setPrototypeOf(ke,Ue):ke.__proto__=Ue)}n(Ce,"_inherits");var st=(0,Se.default)("quill:toolbar"),Ge=function(ke){Ce(Ue,ke);function Ue(rt,yt){ve(this,Ue);var Pt=le(this,(Ue.__proto__||Object.getPrototypeOf(Ue)).call(this,rt,yt));if(Array.isArray(Pt.options.container)){var qt=ct.createElement("div");pt(qt,Pt.options.container),rt.container.parentNode.insertBefore(qt,rt.container),Pt.container=qt}else typeof Pt.options.container=="string"?Pt.container=ct.querySelector(Pt.options.container):Pt.container=Pt.options.container;if(!(Pt.container instanceof So)){var on;return on=st.error("Container required for toolbar",Pt.options),le(Pt,on)}return Pt.container.classList.add("ql-toolbar"),Pt.controls=[],Pt.handlers={},Object.keys(Pt.options.handlers).forEach(function(Un){Pt.addHandler(Un,Pt.options.handlers[Un])}),[].forEach.call(Pt.container.querySelectorAll("button, select"),function(Un){Pt.attach(Un)}),Pt.quill.on(se.default.events.EDITOR_CHANGE,function(Un,zt){Un===se.default.events.SELECTION_CHANGE&&Pt.update(zt)}),Pt.quill.on(se.default.events.SCROLL_OPTIMIZE,function(){var Un=Pt.quill.selection.getRange(),zt=Xe(Un,1),xt=zt[0];Pt.update(xt)}),Pt}return n(Ue,"Toolbar"),Qe(Ue,[{key:"addHandler",value:n(function(yt,Pt){this.handlers[yt]=Pt},"addHandler")},{key:"attach",value:n(function(yt){var Pt=this,qt=[].find.call(yt.classList,function(Un){return Un.indexOf("ql-")===0});if(qt){if(qt=qt.slice(3),yt.tagName==="BUTTON"&&yt.setAttribute("type","button"),this.handlers[qt]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[qt]==null){st.warn("ignoring attaching to disabled format",qt,yt);return}if(ne.default.query(qt)==null){st.warn("ignoring attaching to nonexistent format",qt,yt);return}}var on=yt.tagName==="SELECT"?"change":"click";yt.addEventListener(on,function(Un){var zt=void 0;if(yt.tagName==="SELECT"){if(yt.selectedIndex<0)return;var xt=yt.options[yt.selectedIndex];xt.hasAttribute("selected")?zt=!1:zt=xt.value||!1}else yt.classList.contains("ql-active")?zt=!1:zt=yt.value||!yt.hasAttribute("value"),Un.preventDefault();Pt.quill.focus();var at=Pt.quill.selection.getRange(),wt=Xe(at,1),Nt=wt[0];if(Pt.handlers[qt]!=null)Pt.handlers[qt].call(Pt,zt);else if(ne.default.query(qt).prototype instanceof ne.default.Embed){if(zt=cu("Enter "+qt),!zt)return;Pt.quill.updateContents(new Re.default().retain(Nt.index).delete(Nt.length).insert(q({},qt,zt)),se.default.sources.USER)}else Pt.quill.format(qt,zt,se.default.sources.USER);Pt.update(Nt)}),this.controls.push([qt,yt])}},"attach")},{key:"update",value:n(function(yt){var Pt=yt==null?{}:this.quill.getFormat(yt);this.controls.forEach(function(qt){var on=Xe(qt,2),Un=on[0],zt=on[1];if(zt.tagName==="SELECT"){var xt=void 0;if(yt==null)xt=null;else if(Pt[Un]==null)xt=zt.querySelector("option[selected]");else if(!Array.isArray(Pt[Un])){var at=Pt[Un];typeof at=="string"&&(at=at.replace(/\"/g,'\\"')),xt=zt.querySelector('option[value="'+at+'"]')}xt==null?(zt.value="",zt.selectedIndex=-1):xt.selected=!0}else if(yt==null)zt.classList.remove("ql-active");else if(zt.hasAttribute("value")){var wt=Pt[Un]===zt.getAttribute("value")||Pt[Un]!=null&&Pt[Un].toString()===zt.getAttribute("value")||Pt[Un]==null&&!zt.getAttribute("value");zt.classList.toggle("ql-active",wt)}else zt.classList.toggle("ql-active",Pt[Un]!=null)})},"update")}]),Ue}(ue.default);Ge.DEFAULTS={};function Je(ke,Ue,rt){var yt=ct.createElement("button");yt.setAttribute("type","button"),yt.classList.add("ql-"+Ue),rt!=null&&(yt.value=rt),ke.appendChild(yt)}n(Je,"addButton");function pt(ke,Ue){Array.isArray(Ue[0])||(Ue=[Ue]),Ue.forEach(function(rt){var yt=ct.createElement("span");yt.classList.add("ql-formats"),rt.forEach(function(Pt){if(typeof Pt=="string")Je(yt,Pt);else{var qt=Object.keys(Pt)[0],on=Pt[qt];Array.isArray(on)?He(yt,qt,on):Je(yt,qt,on)}}),ke.appendChild(yt)})}n(pt,"addControls");function He(ke,Ue,rt){var yt=ct.createElement("select");yt.classList.add("ql-"+Ue),rt.forEach(function(Pt){var qt=ct.createElement("option");Pt!==!1?qt.setAttribute("value",Pt):qt.setAttribute("selected","selected"),yt.appendChild(qt)}),ke.appendChild(yt)}n(He,"addSelect"),Ge.DEFAULTS={container:null,handlers:{clean:n(function(){var Ue=this,rt=this.quill.getSelection();if(rt!=null)if(rt.length==0){var yt=this.quill.getFormat();Object.keys(yt).forEach(function(Pt){ne.default.query(Pt,ne.default.Scope.INLINE)!=null&&Ue.quill.format(Pt,!1)})}else this.quill.removeFormat(rt,se.default.sources.USER)},"clean"),direction:n(function(Ue){var rt=this.quill.getFormat().align;Ue==="rtl"&&rt==null?this.quill.format("align","right",se.default.sources.USER):!Ue&&rt==="right"&&this.quill.format("align",!1,se.default.sources.USER),this.quill.format("direction",Ue,se.default.sources.USER)},"direction"),indent:n(function(Ue){var rt=this.quill.getSelection(),yt=this.quill.getFormat(rt),Pt=parseInt(yt.indent||0);if(Ue==="+1"||Ue==="-1"){var qt=Ue==="+1"?1:-1;yt.direction==="rtl"&&(qt*=-1),this.quill.format("indent",Pt+qt,se.default.sources.USER)}},"indent"),link:n(function(Ue){Ue===!0&&(Ue=cu("Enter link URL:")),this.quill.format("link",Ue,se.default.sources.USER)},"link"),list:n(function(Ue){var rt=this.quill.getSelection(),yt=this.quill.getFormat(rt);Ue==="check"?yt.list==="checked"||yt.list==="unchecked"?this.quill.format("list",!1,se.default.sources.USER):this.quill.format("list","unchecked",se.default.sources.USER):this.quill.format("list",Ue,se.default.sources.USER)},"list")}},We.default=Ge,We.addControls=pt},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=function(){function Se(de,ue){for(var ae=0;ae<ue.length;ae++){var q=ue[ae];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(de,q.key,q)}}return n(Se,"defineProperties"),function(de,ue,ae){return ue&&Se(de.prototype,ue),ae&&Se(de,ae),de}}(),Qe=n(function Se(de,ue,ae){de===null&&(de=Function.prototype);var q=Object.getOwnPropertyDescriptor(de,ue);if(q===void 0){var ve=Object.getPrototypeOf(de);return ve===null?void 0:Se(ve,ue,ae)}else{if("value"in q)return q.value;var le=q.get;return le===void 0?void 0:le.call(ae)}},"get"),Ve=_e(29),Re=Me(Ve);function Me(Se){return Se&&Se.__esModule?Se:{default:Se}}n(Me,"_interopRequireDefault");function ne(Se,de){if(!(Se instanceof de))throw new TypeError("Cannot call a class as a function")}n(ne,"_classCallCheck");function ce(Se,de){if(!Se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return de&&(typeof de=="object"||typeof de=="function")?de:Se}n(ce,"_possibleConstructorReturn");function se(Se,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof de);Se.prototype=Object.create(de&&de.prototype,{constructor:{value:Se,enumerable:!1,writable:!0,configurable:!0}}),de&&(Object.setPrototypeOf?Object.setPrototypeOf(Se,de):Se.__proto__=de)}n(se,"_inherits");var te=function(Se){se(de,Se);function de(ue,ae){ne(this,de);var q=ce(this,(de.__proto__||Object.getPrototypeOf(de)).call(this,ue));return q.label.innerHTML=ae,q.container.classList.add("ql-color-picker"),[].slice.call(q.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(ve){ve.classList.add("ql-primary")}),q}return n(de,"ColorPicker"),Xe(de,[{key:"buildItem",value:n(function(ae){var q=Qe(de.prototype.__proto__||Object.getPrototypeOf(de.prototype),"buildItem",this).call(this,ae);return q.style.backgroundColor=ae.getAttribute("value")||"",q},"buildItem")},{key:"selectItem",value:n(function(ae,q){Qe(de.prototype.__proto__||Object.getPrototypeOf(de.prototype),"selectItem",this).call(this,ae,q);var ve=this.label.querySelector(".ql-color-label"),le=ae&&ae.getAttribute("data-value")||"";ve&&(ve.tagName==="line"?ve.style.stroke=le:ve.style.fill=le)},"selectItem")}]),de}(Re.default);We.default=te},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=function(){function Se(de,ue){for(var ae=0;ae<ue.length;ae++){var q=ue[ae];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(de,q.key,q)}}return n(Se,"defineProperties"),function(de,ue,ae){return ue&&Se(de.prototype,ue),ae&&Se(de,ae),de}}(),Qe=n(function Se(de,ue,ae){de===null&&(de=Function.prototype);var q=Object.getOwnPropertyDescriptor(de,ue);if(q===void 0){var ve=Object.getPrototypeOf(de);return ve===null?void 0:Se(ve,ue,ae)}else{if("value"in q)return q.value;var le=q.get;return le===void 0?void 0:le.call(ae)}},"get"),Ve=_e(29),Re=Me(Ve);function Me(Se){return Se&&Se.__esModule?Se:{default:Se}}n(Me,"_interopRequireDefault");function ne(Se,de){if(!(Se instanceof de))throw new TypeError("Cannot call a class as a function")}n(ne,"_classCallCheck");function ce(Se,de){if(!Se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return de&&(typeof de=="object"||typeof de=="function")?de:Se}n(ce,"_possibleConstructorReturn");function se(Se,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof de);Se.prototype=Object.create(de&&de.prototype,{constructor:{value:Se,enumerable:!1,writable:!0,configurable:!0}}),de&&(Object.setPrototypeOf?Object.setPrototypeOf(Se,de):Se.__proto__=de)}n(se,"_inherits");var te=function(Se){se(de,Se);function de(ue,ae){ne(this,de);var q=ce(this,(de.__proto__||Object.getPrototypeOf(de)).call(this,ue));return q.container.classList.add("ql-icon-picker"),[].forEach.call(q.container.querySelectorAll(".ql-picker-item"),function(ve){ve.innerHTML=ae[ve.getAttribute("data-value")||""]}),q.defaultItem=q.container.querySelector(".ql-selected"),q.selectItem(q.defaultItem),q}return n(de,"IconPicker"),Xe(de,[{key:"selectItem",value:n(function(ae,q){Qe(de.prototype.__proto__||Object.getPrototypeOf(de.prototype),"selectItem",this).call(this,ae,q),ae=ae||this.defaultItem,this.label.innerHTML=ae.innerHTML},"selectItem")}]),de}(Re.default);We.default=te},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=function(){function Re(Me,ne){for(var ce=0;ce<ne.length;ce++){var se=ne[ce];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(Me,se.key,se)}}return n(Re,"defineProperties"),function(Me,ne,ce){return ne&&Re(Me.prototype,ne),ce&&Re(Me,ce),Me}}();function Qe(Re,Me){if(!(Re instanceof Me))throw new TypeError("Cannot call a class as a function")}n(Qe,"_classCallCheck");var Ve=function(){function Re(Me,ne){var ce=this;Qe(this,Re),this.quill=Me,this.boundsContainer=ne||ct.body,this.root=Me.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){ce.root.style.marginTop=-1*ce.quill.root.scrollTop+"px"}),this.hide()}return n(Re,"Tooltip"),Xe(Re,[{key:"hide",value:n(function(){this.root.classList.add("ql-hidden")},"hide")},{key:"position",value:n(function(ne){var ce=ne.left+ne.width/2-this.root.offsetWidth/2,se=ne.bottom+this.quill.root.scrollTop;this.root.style.left=ce+"px",this.root.style.top=se+"px",this.root.classList.remove("ql-flip");var te=this.boundsContainer.getBoundingClientRect(),Se=this.root.getBoundingClientRect(),de=0;if(Se.right>te.right&&(de=te.right-Se.right,this.root.style.left=ce+de+"px"),Se.left<te.left&&(de=te.left-Se.left,this.root.style.left=ce+de+"px"),Se.bottom>te.bottom){var ue=Se.bottom-Se.top,ae=ne.bottom-ne.top+ue;this.root.style.top=se-ae+"px",this.root.classList.add("ql-flip")}return de},"position")},{key:"show",value:n(function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")},"show")}]),Re}();We.default=Ve},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=function(){function He(ke,Ue){var rt=[],yt=!0,Pt=!1,qt=void 0;try{for(var on=ke[Symbol.iterator](),Un;!(yt=(Un=on.next()).done)&&(rt.push(Un.value),!(Ue&&rt.length===Ue));yt=!0);}catch(zt){Pt=!0,qt=zt}finally{try{!yt&&on.return&&on.return()}finally{if(Pt)throw qt}}return rt}return n(He,"sliceIterator"),function(ke,Ue){if(Array.isArray(ke))return ke;if(Symbol.iterator in Object(ke))return He(ke,Ue);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Qe=n(function He(ke,Ue,rt){ke===null&&(ke=Function.prototype);var yt=Object.getOwnPropertyDescriptor(ke,Ue);if(yt===void 0){var Pt=Object.getPrototypeOf(ke);return Pt===null?void 0:He(Pt,Ue,rt)}else{if("value"in yt)return yt.value;var qt=yt.get;return qt===void 0?void 0:qt.call(rt)}},"get"),Ve=function(){function He(ke,Ue){for(var rt=0;rt<Ue.length;rt++){var yt=Ue[rt];yt.enumerable=yt.enumerable||!1,yt.configurable=!0,"value"in yt&&(yt.writable=!0),Object.defineProperty(ke,yt.key,yt)}}return n(He,"defineProperties"),function(ke,Ue,rt){return Ue&&He(ke.prototype,Ue),rt&&He(ke,rt),ke}}(),Re=_e(3),Me=ve(Re),ne=_e(8),ce=ve(ne),se=_e(53),te=ve(se),Se=_e(28),de=ve(Se),ue=_e(16),ae=_e(51),q=ve(ae);function ve(He){return He&&He.__esModule?He:{default:He}}n(ve,"_interopRequireDefault");function le(He,ke){if(!(He instanceof ke))throw new TypeError("Cannot call a class as a function")}n(le,"_classCallCheck");function Ce(He,ke){if(!He)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ke&&(typeof ke=="object"||typeof ke=="function")?ke:He}n(Ce,"_possibleConstructorReturn");function st(He,ke){if(typeof ke!="function"&&ke!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ke);He.prototype=Object.create(ke&&ke.prototype,{constructor:{value:He,enumerable:!1,writable:!0,configurable:!0}}),ke&&(Object.setPrototypeOf?Object.setPrototypeOf(He,ke):He.__proto__=ke)}n(st,"_inherits");var Ge=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],Je=function(He){st(ke,He);function ke(Ue,rt){le(this,ke),rt.modules.toolbar!=null&&rt.modules.toolbar.container==null&&(rt.modules.toolbar.container=Ge);var yt=Ce(this,(ke.__proto__||Object.getPrototypeOf(ke)).call(this,Ue,rt));return yt.quill.container.classList.add("ql-snow"),yt}return n(ke,"SnowTheme"),Ve(ke,[{key:"extendToolbar",value:n(function(rt){rt.container.classList.add("ql-snow"),this.buildButtons([].slice.call(rt.container.querySelectorAll("button")),q.default),this.buildPickers([].slice.call(rt.container.querySelectorAll("select")),q.default),this.tooltip=new pt(this.quill,this.options.bounds),rt.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(yt,Pt){rt.handlers.link.call(rt,!Pt.format.link)})},"extendToolbar")}]),ke}(te.default);Je.DEFAULTS=(0,Me.default)(!0,{},te.default.DEFAULTS,{modules:{toolbar:{handlers:{link:n(function(ke){if(ke){var Ue=this.quill.getSelection();if(Ue==null||Ue.length==0)return;var rt=this.quill.getText(Ue);/^\S+@\S+\.\S+$/.test(rt)&&rt.indexOf("mailto:")!==0&&(rt="mailto:"+rt);var yt=this.quill.theme.tooltip;yt.edit("link",rt)}else this.quill.format("link",!1)},"link")}}}});var pt=function(He){st(ke,He);function ke(Ue,rt){le(this,ke);var yt=Ce(this,(ke.__proto__||Object.getPrototypeOf(ke)).call(this,Ue,rt));return yt.preview=yt.root.querySelector("a.ql-preview"),yt}return n(ke,"SnowTooltip"),Ve(ke,[{key:"listen",value:n(function(){var rt=this;Qe(ke.prototype.__proto__||Object.getPrototypeOf(ke.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(yt){rt.root.classList.contains("ql-editing")?rt.save():rt.edit("link",rt.preview.textContent),yt.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(yt){if(rt.linkRange!=null){var Pt=rt.linkRange;rt.restoreFocus(),rt.quill.formatText(Pt,"link",!1,ce.default.sources.USER),delete rt.linkRange}yt.preventDefault(),rt.hide()}),this.quill.on(ce.default.events.SELECTION_CHANGE,function(yt,Pt,qt){if(yt!=null){if(yt.length===0&&qt===ce.default.sources.USER){var on=rt.quill.scroll.descendant(de.default,yt.index),Un=Xe(on,2),zt=Un[0],xt=Un[1];if(zt!=null){rt.linkRange=new ue.Range(yt.index-xt,zt.length());var at=de.default.formats(zt.domNode);rt.preview.textContent=at,rt.preview.setAttribute("href",at),rt.show(),rt.position(rt.quill.getBounds(rt.linkRange));return}}else delete rt.linkRange;rt.hide()}})},"listen")},{key:"show",value:n(function(){Qe(ke.prototype.__proto__||Object.getPrototypeOf(ke.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")},"show")}]),ke}(se.BaseTooltip);pt.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),We.default=Je},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=_e(30),Qe=lr(Xe),Ve=_e(46),Re=_e(48),Me=_e(84),ne=_e(85),ce=lr(ne),se=_e(86),te=lr(se),Se=_e(87),de=lr(Se),ue=_e(47),ae=_e(27),q=_e(49),ve=_e(50),le=_e(76),Ce=lr(le),st=_e(88),Ge=lr(st),Je=_e(28),pt=lr(Je),He=_e(89),ke=lr(He),Ue=_e(90),rt=lr(Ue),yt=_e(91),Pt=lr(yt),qt=_e(92),on=lr(qt),Un=_e(93),zt=lr(Un),xt=_e(14),at=lr(xt),wt=_e(94),Nt=lr(wt),ln=_e(95),an=lr(ln),bt=_e(77),Kt=lr(bt),_n=_e(51),En=lr(_n),qn=_e(29),Xi=lr(qn),Hr=_e(79),jr=lr(Hr),mo=_e(80),vn=lr(mo),Ra=_e(81),wn=lr(Ra),xn=_e(128),Di=lr(xn),Hi=_e(82),Ri=lr(Hi);function lr(Tr){return Tr&&Tr.__esModule?Tr:{default:Tr}}n(lr,"_interopRequireDefault"),Qe.default.register({"attributors/attribute/direction":Re.DirectionAttribute,"attributors/class/align":Ve.AlignClass,"attributors/class/background":ue.BackgroundClass,"attributors/class/color":ae.ColorClass,"attributors/class/direction":Re.DirectionClass,"attributors/class/font":q.FontClass,"attributors/class/size":ve.SizeClass,"attributors/style/align":Ve.AlignStyle,"attributors/style/background":ue.BackgroundStyle,"attributors/style/color":ae.ColorStyle,"attributors/style/direction":Re.DirectionStyle,"attributors/style/font":q.FontStyle,"attributors/style/size":ve.SizeStyle},!0),Qe.default.register({"formats/align":Ve.AlignClass,"formats/direction":Re.DirectionClass,"formats/indent":Me.IndentClass,"formats/background":ue.BackgroundStyle,"formats/color":ae.ColorStyle,"formats/font":q.FontClass,"formats/size":ve.SizeClass,"formats/blockquote":ce.default,"formats/code-block":at.default,"formats/header":te.default,"formats/list":de.default,"formats/bold":Ce.default,"formats/code":xt.Code,"formats/italic":Ge.default,"formats/link":pt.default,"formats/script":ke.default,"formats/strike":rt.default,"formats/underline":Pt.default,"formats/image":on.default,"formats/video":zt.default,"formats/list/item":Se.ListItem,"modules/formula":Nt.default,"modules/syntax":an.default,"modules/toolbar":Kt.default,"themes/bubble":Di.default,"themes/snow":Ri.default,"ui/icons":En.default,"ui/picker":Xi.default,"ui/icon-picker":vn.default,"ui/color-picker":jr.default,"ui/tooltip":wn.default},!0),We.default=Qe.default},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0}),We.IndentClass=void 0;var Xe=function(){function de(ue,ae){for(var q=0;q<ae.length;q++){var ve=ae[q];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(ue,ve.key,ve)}}return n(de,"defineProperties"),function(ue,ae,q){return ae&&de(ue.prototype,ae),q&&de(ue,q),ue}}(),Qe=n(function de(ue,ae,q){ue===null&&(ue=Function.prototype);var ve=Object.getOwnPropertyDescriptor(ue,ae);if(ve===void 0){var le=Object.getPrototypeOf(ue);return le===null?void 0:de(le,ae,q)}else{if("value"in ve)return ve.value;var Ce=ve.get;return Ce===void 0?void 0:Ce.call(q)}},"get"),Ve=_e(0),Re=Me(Ve);function Me(de){return de&&de.__esModule?de:{default:de}}n(Me,"_interopRequireDefault");function ne(de,ue){if(!(de instanceof ue))throw new TypeError("Cannot call a class as a function")}n(ne,"_classCallCheck");function ce(de,ue){if(!de)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ue&&(typeof ue=="object"||typeof ue=="function")?ue:de}n(ce,"_possibleConstructorReturn");function se(de,ue){if(typeof ue!="function"&&ue!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ue);de.prototype=Object.create(ue&&ue.prototype,{constructor:{value:de,enumerable:!1,writable:!0,configurable:!0}}),ue&&(Object.setPrototypeOf?Object.setPrototypeOf(de,ue):de.__proto__=ue)}n(se,"_inherits");var te=function(de){se(ue,de);function ue(){return ne(this,ue),ce(this,(ue.__proto__||Object.getPrototypeOf(ue)).apply(this,arguments))}return n(ue,"IdentAttributor"),Xe(ue,[{key:"add",value:n(function(q,ve){if(ve==="+1"||ve==="-1"){var le=this.value(q)||0;ve=ve==="+1"?le+1:le-1}return ve===0?(this.remove(q),!0):Qe(ue.prototype.__proto__||Object.getPrototypeOf(ue.prototype),"add",this).call(this,q,ve)},"add")},{key:"canAdd",value:n(function(q,ve){return Qe(ue.prototype.__proto__||Object.getPrototypeOf(ue.prototype),"canAdd",this).call(this,q,ve)||Qe(ue.prototype.__proto__||Object.getPrototypeOf(ue.prototype),"canAdd",this).call(this,q,parseInt(ve))},"canAdd")},{key:"value",value:n(function(q){return parseInt(Qe(ue.prototype.__proto__||Object.getPrototypeOf(ue.prototype),"value",this).call(this,q))||void 0},"value")}]),ue}(Re.default.Attributor.Class),Se=new te("indent","ql-indent",{scope:Re.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});We.IndentClass=Se},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=_e(4),Qe=Ve(Xe);function Ve(se){return se&&se.__esModule?se:{default:se}}n(Ve,"_interopRequireDefault");function Re(se,te){if(!(se instanceof te))throw new TypeError("Cannot call a class as a function")}n(Re,"_classCallCheck");function Me(se,te){if(!se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te&&(typeof te=="object"||typeof te=="function")?te:se}n(Me,"_possibleConstructorReturn");function ne(se,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof te);se.prototype=Object.create(te&&te.prototype,{constructor:{value:se,enumerable:!1,writable:!0,configurable:!0}}),te&&(Object.setPrototypeOf?Object.setPrototypeOf(se,te):se.__proto__=te)}n(ne,"_inherits");var ce=function(se){ne(te,se);function te(){return Re(this,te),Me(this,(te.__proto__||Object.getPrototypeOf(te)).apply(this,arguments))}return n(te,"Blockquote"),te}(Qe.default);ce.blotName="blockquote",ce.tagName="blockquote",We.default=ce},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=function(){function te(Se,de){for(var ue=0;ue<de.length;ue++){var ae=de[ue];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(Se,ae.key,ae)}}return n(te,"defineProperties"),function(Se,de,ue){return de&&te(Se.prototype,de),ue&&te(Se,ue),Se}}(),Qe=_e(4),Ve=Re(Qe);function Re(te){return te&&te.__esModule?te:{default:te}}n(Re,"_interopRequireDefault");function Me(te,Se){if(!(te instanceof Se))throw new TypeError("Cannot call a class as a function")}n(Me,"_classCallCheck");function ne(te,Se){if(!te)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Se&&(typeof Se=="object"||typeof Se=="function")?Se:te}n(ne,"_possibleConstructorReturn");function ce(te,Se){if(typeof Se!="function"&&Se!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Se);te.prototype=Object.create(Se&&Se.prototype,{constructor:{value:te,enumerable:!1,writable:!0,configurable:!0}}),Se&&(Object.setPrototypeOf?Object.setPrototypeOf(te,Se):te.__proto__=Se)}n(ce,"_inherits");var se=function(te){ce(Se,te);function Se(){return Me(this,Se),ne(this,(Se.__proto__||Object.getPrototypeOf(Se)).apply(this,arguments))}return n(Se,"Header"),Xe(Se,null,[{key:"formats",value:n(function(ue){return this.tagName.indexOf(ue.tagName)+1},"formats")}]),Se}(Ve.default);se.blotName="header",se.tagName=["H1","H2","H3","H4","H5","H6"],We.default=se},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0}),We.default=We.ListItem=void 0;var Xe=function(){function le(Ce,st){for(var Ge=0;Ge<st.length;Ge++){var Je=st[Ge];Je.enumerable=Je.enumerable||!1,Je.configurable=!0,"value"in Je&&(Je.writable=!0),Object.defineProperty(Ce,Je.key,Je)}}return n(le,"defineProperties"),function(Ce,st,Ge){return st&&le(Ce.prototype,st),Ge&&le(Ce,Ge),Ce}}(),Qe=n(function le(Ce,st,Ge){Ce===null&&(Ce=Function.prototype);var Je=Object.getOwnPropertyDescriptor(Ce,st);if(Je===void 0){var pt=Object.getPrototypeOf(Ce);return pt===null?void 0:le(pt,st,Ge)}else{if("value"in Je)return Je.value;var He=Je.get;return He===void 0?void 0:He.call(Ge)}},"get"),Ve=_e(0),Re=te(Ve),Me=_e(4),ne=te(Me),ce=_e(26),se=te(ce);function te(le){return le&&le.__esModule?le:{default:le}}n(te,"_interopRequireDefault");function Se(le,Ce,st){return Ce in le?Object.defineProperty(le,Ce,{value:st,enumerable:!0,configurable:!0,writable:!0}):le[Ce]=st,le}n(Se,"_defineProperty");function de(le,Ce){if(!(le instanceof Ce))throw new TypeError("Cannot call a class as a function")}n(de,"_classCallCheck");function ue(le,Ce){if(!le)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ce&&(typeof Ce=="object"||typeof Ce=="function")?Ce:le}n(ue,"_possibleConstructorReturn");function ae(le,Ce){if(typeof Ce!="function"&&Ce!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ce);le.prototype=Object.create(Ce&&Ce.prototype,{constructor:{value:le,enumerable:!1,writable:!0,configurable:!0}}),Ce&&(Object.setPrototypeOf?Object.setPrototypeOf(le,Ce):le.__proto__=Ce)}n(ae,"_inherits");var q=function(le){ae(Ce,le);function Ce(){return de(this,Ce),ue(this,(Ce.__proto__||Object.getPrototypeOf(Ce)).apply(this,arguments))}return n(Ce,"ListItem"),Xe(Ce,[{key:"format",value:n(function(Ge,Je){Ge===ve.blotName&&!Je?this.replaceWith(Re.default.create(this.statics.scope)):Qe(Ce.prototype.__proto__||Object.getPrototypeOf(Ce.prototype),"format",this).call(this,Ge,Je)},"format")},{key:"remove",value:n(function(){this.prev==null&&this.next==null?this.parent.remove():Qe(Ce.prototype.__proto__||Object.getPrototypeOf(Ce.prototype),"remove",this).call(this)},"remove")},{key:"replaceWith",value:n(function(Ge,Je){return this.parent.isolate(this.offset(this.parent),this.length()),Ge===this.parent.statics.blotName?(this.parent.replaceWith(Ge,Je),this):(this.parent.unwrap(),Qe(Ce.prototype.__proto__||Object.getPrototypeOf(Ce.prototype),"replaceWith",this).call(this,Ge,Je))},"replaceWith")}],[{key:"formats",value:n(function(Ge){return Ge.tagName===this.tagName?void 0:Qe(Ce.__proto__||Object.getPrototypeOf(Ce),"formats",this).call(this,Ge)},"formats")}]),Ce}(ne.default);q.blotName="list-item",q.tagName="LI";var ve=function(le){ae(Ce,le),Xe(Ce,null,[{key:"create",value:n(function(Ge){var Je=Ge==="ordered"?"OL":"UL",pt=Qe(Ce.__proto__||Object.getPrototypeOf(Ce),"create",this).call(this,Je);return(Ge==="checked"||Ge==="unchecked")&&pt.setAttribute("data-checked",Ge==="checked"),pt},"create")},{key:"formats",value:n(function(Ge){if(Ge.tagName==="OL")return"ordered";if(Ge.tagName==="UL")return Ge.hasAttribute("data-checked")?Ge.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"},"formats")}]);function Ce(st){de(this,Ce);var Ge=ue(this,(Ce.__proto__||Object.getPrototypeOf(Ce)).call(this,st)),Je=n(function(He){if(He.target.parentNode===st){var ke=Ge.statics.formats(st),Ue=Re.default.find(He.target);ke==="checked"?Ue.format("list","unchecked"):ke==="unchecked"&&Ue.format("list","checked")}},"listEventHandler");return st.addEventListener("touchstart",Je),st.addEventListener("mousedown",Je),Ge}return n(Ce,"List"),Xe(Ce,[{key:"format",value:n(function(Ge,Je){this.children.length>0&&this.children.tail.format(Ge,Je)},"format")},{key:"formats",value:n(function(){return Se({},this.statics.blotName,this.statics.formats(this.domNode))},"formats")},{key:"insertBefore",value:n(function(Ge,Je){if(Ge instanceof q)Qe(Ce.prototype.__proto__||Object.getPrototypeOf(Ce.prototype),"insertBefore",this).call(this,Ge,Je);else{var pt=Je==null?this.length():Je.offset(this),He=this.split(pt);He.parent.insertBefore(Ge,He)}},"insertBefore")},{key:"optimize",value:n(function(Ge){Qe(Ce.prototype.__proto__||Object.getPrototypeOf(Ce.prototype),"optimize",this).call(this,Ge);var Je=this.next;Je!=null&&Je.prev===this&&Je.statics.blotName===this.statics.blotName&&Je.domNode.tagName===this.domNode.tagName&&Je.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(Je.moveChildren(this),Je.remove())},"optimize")},{key:"replace",value:n(function(Ge){if(Ge.statics.blotName!==this.statics.blotName){var Je=Re.default.create(this.statics.defaultChild);Ge.moveChildren(Je),this.appendChild(Je)}Qe(Ce.prototype.__proto__||Object.getPrototypeOf(Ce.prototype),"replace",this).call(this,Ge)},"replace")}]),Ce}(se.default);ve.blotName="list",ve.scope=Re.default.Scope.BLOCK_BLOT,ve.tagName=["OL","UL"],ve.defaultChild="list-item",ve.allowedChildren=[q],We.ListItem=q,We.default=ve},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=_e(76),Qe=Ve(Xe);function Ve(se){return se&&se.__esModule?se:{default:se}}n(Ve,"_interopRequireDefault");function Re(se,te){if(!(se instanceof te))throw new TypeError("Cannot call a class as a function")}n(Re,"_classCallCheck");function Me(se,te){if(!se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te&&(typeof te=="object"||typeof te=="function")?te:se}n(Me,"_possibleConstructorReturn");function ne(se,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof te);se.prototype=Object.create(te&&te.prototype,{constructor:{value:se,enumerable:!1,writable:!0,configurable:!0}}),te&&(Object.setPrototypeOf?Object.setPrototypeOf(se,te):se.__proto__=te)}n(ne,"_inherits");var ce=function(se){ne(te,se);function te(){return Re(this,te),Me(this,(te.__proto__||Object.getPrototypeOf(te)).apply(this,arguments))}return n(te,"Italic"),te}(Qe.default);ce.blotName="italic",ce.tagName=["EM","I"],We.default=ce},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=function(){function Se(de,ue){for(var ae=0;ae<ue.length;ae++){var q=ue[ae];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(de,q.key,q)}}return n(Se,"defineProperties"),function(de,ue,ae){return ue&&Se(de.prototype,ue),ae&&Se(de,ae),de}}(),Qe=n(function Se(de,ue,ae){de===null&&(de=Function.prototype);var q=Object.getOwnPropertyDescriptor(de,ue);if(q===void 0){var ve=Object.getPrototypeOf(de);return ve===null?void 0:Se(ve,ue,ae)}else{if("value"in q)return q.value;var le=q.get;return le===void 0?void 0:le.call(ae)}},"get"),Ve=_e(6),Re=Me(Ve);function Me(Se){return Se&&Se.__esModule?Se:{default:Se}}n(Me,"_interopRequireDefault");function ne(Se,de){if(!(Se instanceof de))throw new TypeError("Cannot call a class as a function")}n(ne,"_classCallCheck");function ce(Se,de){if(!Se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return de&&(typeof de=="object"||typeof de=="function")?de:Se}n(ce,"_possibleConstructorReturn");function se(Se,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof de);Se.prototype=Object.create(de&&de.prototype,{constructor:{value:Se,enumerable:!1,writable:!0,configurable:!0}}),de&&(Object.setPrototypeOf?Object.setPrototypeOf(Se,de):Se.__proto__=de)}n(se,"_inherits");var te=function(Se){se(de,Se);function de(){return ne(this,de),ce(this,(de.__proto__||Object.getPrototypeOf(de)).apply(this,arguments))}return n(de,"Script"),Xe(de,null,[{key:"create",value:n(function(ae){return ae==="super"?ct.createElement("sup"):ae==="sub"?ct.createElement("sub"):Qe(de.__proto__||Object.getPrototypeOf(de),"create",this).call(this,ae)},"create")},{key:"formats",value:n(function(ae){if(ae.tagName==="SUB")return"sub";if(ae.tagName==="SUP")return"super"},"formats")}]),de}(Re.default);te.blotName="script",te.tagName=["SUB","SUP"],We.default=te},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=_e(6),Qe=Ve(Xe);function Ve(se){return se&&se.__esModule?se:{default:se}}n(Ve,"_interopRequireDefault");function Re(se,te){if(!(se instanceof te))throw new TypeError("Cannot call a class as a function")}n(Re,"_classCallCheck");function Me(se,te){if(!se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te&&(typeof te=="object"||typeof te=="function")?te:se}n(Me,"_possibleConstructorReturn");function ne(se,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof te);se.prototype=Object.create(te&&te.prototype,{constructor:{value:se,enumerable:!1,writable:!0,configurable:!0}}),te&&(Object.setPrototypeOf?Object.setPrototypeOf(se,te):se.__proto__=te)}n(ne,"_inherits");var ce=function(se){ne(te,se);function te(){return Re(this,te),Me(this,(te.__proto__||Object.getPrototypeOf(te)).apply(this,arguments))}return n(te,"Strike"),te}(Qe.default);ce.blotName="strike",ce.tagName="S",We.default=ce},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=_e(6),Qe=Ve(Xe);function Ve(se){return se&&se.__esModule?se:{default:se}}n(Ve,"_interopRequireDefault");function Re(se,te){if(!(se instanceof te))throw new TypeError("Cannot call a class as a function")}n(Re,"_classCallCheck");function Me(se,te){if(!se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te&&(typeof te=="object"||typeof te=="function")?te:se}n(Me,"_possibleConstructorReturn");function ne(se,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof te);se.prototype=Object.create(te&&te.prototype,{constructor:{value:se,enumerable:!1,writable:!0,configurable:!0}}),te&&(Object.setPrototypeOf?Object.setPrototypeOf(se,te):se.__proto__=te)}n(ne,"_inherits");var ce=function(se){ne(te,se);function te(){return Re(this,te),Me(this,(te.__proto__||Object.getPrototypeOf(te)).apply(this,arguments))}return n(te,"Underline"),te}(Qe.default);ce.blotName="underline",ce.tagName="U",We.default=ce},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=function(){function ue(ae,q){for(var ve=0;ve<q.length;ve++){var le=q[ve];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(ae,le.key,le)}}return n(ue,"defineProperties"),function(ae,q,ve){return q&&ue(ae.prototype,q),ve&&ue(ae,ve),ae}}(),Qe=n(function ue(ae,q,ve){ae===null&&(ae=Function.prototype);var le=Object.getOwnPropertyDescriptor(ae,q);if(le===void 0){var Ce=Object.getPrototypeOf(ae);return Ce===null?void 0:ue(Ce,q,ve)}else{if("value"in le)return le.value;var st=le.get;return st===void 0?void 0:st.call(ve)}},"get"),Ve=_e(0),Re=ne(Ve),Me=_e(28);function ne(ue){return ue&&ue.__esModule?ue:{default:ue}}n(ne,"_interopRequireDefault");function ce(ue,ae){if(!(ue instanceof ae))throw new TypeError("Cannot call a class as a function")}n(ce,"_classCallCheck");function se(ue,ae){if(!ue)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ae&&(typeof ae=="object"||typeof ae=="function")?ae:ue}n(se,"_possibleConstructorReturn");function te(ue,ae){if(typeof ae!="function"&&ae!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ae);ue.prototype=Object.create(ae&&ae.prototype,{constructor:{value:ue,enumerable:!1,writable:!0,configurable:!0}}),ae&&(Object.setPrototypeOf?Object.setPrototypeOf(ue,ae):ue.__proto__=ae)}n(te,"_inherits");var Se=["alt","height","width"],de=function(ue){te(ae,ue);function ae(){return ce(this,ae),se(this,(ae.__proto__||Object.getPrototypeOf(ae)).apply(this,arguments))}return n(ae,"Image"),Xe(ae,[{key:"format",value:n(function(ve,le){Se.indexOf(ve)>-1?le?this.domNode.setAttribute(ve,le):this.domNode.removeAttribute(ve):Qe(ae.prototype.__proto__||Object.getPrototypeOf(ae.prototype),"format",this).call(this,ve,le)},"format")}],[{key:"create",value:n(function(ve){var le=Qe(ae.__proto__||Object.getPrototypeOf(ae),"create",this).call(this,ve);return typeof ve=="string"&&le.setAttribute("src",this.sanitize(ve)),le},"create")},{key:"formats",value:n(function(ve){return Se.reduce(function(le,Ce){return ve.hasAttribute(Ce)&&(le[Ce]=ve.getAttribute(Ce)),le},{})},"formats")},{key:"match",value:n(function(ve){return/\.(jpe?g|gif|png)$/.test(ve)||/^data:image\/.+;base64/.test(ve)},"match")},{key:"sanitize",value:n(function(ve){return(0,Me.sanitize)(ve,["http","https","data"])?ve:"//:0"},"sanitize")},{key:"value",value:n(function(ve){return ve.getAttribute("src")},"value")}]),ae}(Re.default.Embed);de.blotName="image",de.tagName="IMG",We.default=de},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Xe=function(){function ue(ae,q){for(var ve=0;ve<q.length;ve++){var le=q[ve];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(ae,le.key,le)}}return n(ue,"defineProperties"),function(ae,q,ve){return q&&ue(ae.prototype,q),ve&&ue(ae,ve),ae}}(),Qe=n(function ue(ae,q,ve){ae===null&&(ae=Function.prototype);var le=Object.getOwnPropertyDescriptor(ae,q);if(le===void 0){var Ce=Object.getPrototypeOf(ae);return Ce===null?void 0:ue(Ce,q,ve)}else{if("value"in le)return le.value;var st=le.get;return st===void 0?void 0:st.call(ve)}},"get"),Ve=_e(4),Re=_e(28),Me=ne(Re);function ne(ue){return ue&&ue.__esModule?ue:{default:ue}}n(ne,"_interopRequireDefault");function ce(ue,ae){if(!(ue instanceof ae))throw new TypeError("Cannot call a class as a function")}n(ce,"_classCallCheck");function se(ue,ae){if(!ue)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ae&&(typeof ae=="object"||typeof ae=="function")?ae:ue}n(se,"_possibleConstructorReturn");function te(ue,ae){if(typeof ae!="function"&&ae!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ae);ue.prototype=Object.create(ae&&ae.prototype,{constructor:{value:ue,enumerable:!1,writable:!0,configurable:!0}}),ae&&(Object.setPrototypeOf?Object.setPrototypeOf(ue,ae):ue.__proto__=ae)}n(te,"_inherits");var Se=["height","width"],de=function(ue){te(ae,ue);function ae(){return ce(this,ae),se(this,(ae.__proto__||Object.getPrototypeOf(ae)).apply(this,arguments))}return n(ae,"Video"),Xe(ae,[{key:"format",value:n(function(ve,le){Se.indexOf(ve)>-1?le?this.domNode.setAttribute(ve,le):this.domNode.removeAttribute(ve):Qe(ae.prototype.__proto__||Object.getPrototypeOf(ae.prototype),"format",this).call(this,ve,le)},"format")}],[{key:"create",value:n(function(ve){var le=Qe(ae.__proto__||Object.getPrototypeOf(ae),"create",this).call(this,ve);return le.setAttribute("frameborder","0"),le.setAttribute("allowfullscreen",!0),le.setAttribute("src",this.sanitize(ve)),le},"create")},{key:"formats",value:n(function(ve){return Se.reduce(function(le,Ce){return ve.hasAttribute(Ce)&&(le[Ce]=ve.getAttribute(Ce)),le},{})},"formats")},{key:"sanitize",value:n(function(ve){return Me.default.sanitize(ve)},"sanitize")},{key:"value",value:n(function(ve){return ve.getAttribute("src")},"value")}]),ae}(Ve.BlockEmbed);de.blotName="video",de.className="ql-video",de.tagName="IFRAME",We.default=de},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0}),We.default=We.FormulaBlot=void 0;var Xe=function(){function ve(le,Ce){for(var st=0;st<Ce.length;st++){var Ge=Ce[st];Ge.enumerable=Ge.enumerable||!1,Ge.configurable=!0,"value"in Ge&&(Ge.writable=!0),Object.defineProperty(le,Ge.key,Ge)}}return n(ve,"defineProperties"),function(le,Ce,st){return Ce&&ve(le.prototype,Ce),st&&ve(le,st),le}}(),Qe=n(function ve(le,Ce,st){le===null&&(le=Function.prototype);var Ge=Object.getOwnPropertyDescriptor(le,Ce);if(Ge===void 0){var Je=Object.getPrototypeOf(le);return Je===null?void 0:ve(Je,Ce,st)}else{if("value"in Ge)return Ge.value;var pt=Ge.get;return pt===void 0?void 0:pt.call(st)}},"get"),Ve=_e(45),Re=te(Ve),Me=_e(5),ne=te(Me),ce=_e(9),se=te(ce);function te(ve){return ve&&ve.__esModule?ve:{default:ve}}n(te,"_interopRequireDefault");function Se(ve,le){if(!(ve instanceof le))throw new TypeError("Cannot call a class as a function")}n(Se,"_classCallCheck");function de(ve,le){if(!ve)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return le&&(typeof le=="object"||typeof le=="function")?le:ve}n(de,"_possibleConstructorReturn");function ue(ve,le){if(typeof le!="function"&&le!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof le);ve.prototype=Object.create(le&&le.prototype,{constructor:{value:ve,enumerable:!1,writable:!0,configurable:!0}}),le&&(Object.setPrototypeOf?Object.setPrototypeOf(ve,le):ve.__proto__=le)}n(ue,"_inherits");var ae=function(ve){ue(le,ve);function le(){return Se(this,le),de(this,(le.__proto__||Object.getPrototypeOf(le)).apply(this,arguments))}return n(le,"FormulaBlot"),Xe(le,null,[{key:"create",value:n(function(st){var Ge=Qe(le.__proto__||Object.getPrototypeOf(le),"create",this).call(this,st);return typeof st=="string"&&(Z.katex.render(st,Ge,{throwOnError:!1,errorColor:"#f00"}),Ge.setAttribute("data-value",st)),Ge},"create")},{key:"value",value:n(function(st){return st.getAttribute("data-value")},"value")}]),le}(Re.default);ae.blotName="formula",ae.className="ql-formula",ae.tagName="SPAN";var q=function(ve){ue(le,ve),Xe(le,null,[{key:"register",value:n(function(){ne.default.register(ae,!0)},"register")}]);function le(){Se(this,le);var Ce=de(this,(le.__proto__||Object.getPrototypeOf(le)).call(this));if(Z.katex==null)throw new Error("Formula module requires KaTeX.");return Ce}return n(le,"Formula"),le}(se.default);We.FormulaBlot=ae,We.default=q},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0}),We.default=We.CodeToken=We.CodeBlock=void 0;var Xe=function(){function st(Ge,Je){for(var pt=0;pt<Je.length;pt++){var He=Je[pt];He.enumerable=He.enumerable||!1,He.configurable=!0,"value"in He&&(He.writable=!0),Object.defineProperty(Ge,He.key,He)}}return n(st,"defineProperties"),function(Ge,Je,pt){return Je&&st(Ge.prototype,Je),pt&&st(Ge,pt),Ge}}(),Qe=n(function st(Ge,Je,pt){Ge===null&&(Ge=Function.prototype);var He=Object.getOwnPropertyDescriptor(Ge,Je);if(He===void 0){var ke=Object.getPrototypeOf(Ge);return ke===null?void 0:st(ke,Je,pt)}else{if("value"in He)return He.value;var Ue=He.get;return Ue===void 0?void 0:Ue.call(pt)}},"get"),Ve=_e(0),Re=de(Ve),Me=_e(5),ne=de(Me),ce=_e(9),se=de(ce),te=_e(14),Se=de(te);function de(st){return st&&st.__esModule?st:{default:st}}n(de,"_interopRequireDefault");function ue(st,Ge){if(!(st instanceof Ge))throw new TypeError("Cannot call a class as a function")}n(ue,"_classCallCheck");function ae(st,Ge){if(!st)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ge&&(typeof Ge=="object"||typeof Ge=="function")?Ge:st}n(ae,"_possibleConstructorReturn");function q(st,Ge){if(typeof Ge!="function"&&Ge!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ge);st.prototype=Object.create(Ge&&Ge.prototype,{constructor:{value:st,enumerable:!1,writable:!0,configurable:!0}}),Ge&&(Object.setPrototypeOf?Object.setPrototypeOf(st,Ge):st.__proto__=Ge)}n(q,"_inherits");var ve=function(st){q(Ge,st);function Ge(){return ue(this,Ge),ae(this,(Ge.__proto__||Object.getPrototypeOf(Ge)).apply(this,arguments))}return n(Ge,"SyntaxCodeBlock"),Xe(Ge,[{key:"replaceWith",value:n(function(pt){this.domNode.textContent=this.domNode.textContent,this.attach(),Qe(Ge.prototype.__proto__||Object.getPrototypeOf(Ge.prototype),"replaceWith",this).call(this,pt)},"replaceWith")},{key:"highlight",value:n(function(pt){var He=this.domNode.textContent;this.cachedText!==He&&((He.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=pt(He),this.domNode.normalize(),this.attach()),this.cachedText=He)},"highlight")}]),Ge}(Se.default);ve.className="ql-syntax";var le=new Re.default.Attributor.Class("token","hljs",{scope:Re.default.Scope.INLINE}),Ce=function(st){q(Ge,st),Xe(Ge,null,[{key:"register",value:n(function(){ne.default.register(le,!0),ne.default.register(ve,!0)},"register")}]);function Ge(Je,pt){ue(this,Ge);var He=ae(this,(Ge.__proto__||Object.getPrototypeOf(Ge)).call(this,Je,pt));if(typeof He.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var ke=null;return He.quill.on(ne.default.events.SCROLL_OPTIMIZE,function(){Ln(ke),ke=Ol(function(){He.highlight(),ke=null},He.options.interval)}),He.highlight(),He}return n(Ge,"Syntax"),Xe(Ge,[{key:"highlight",value:n(function(){var pt=this;if(!this.quill.selection.composing){this.quill.update(ne.default.sources.USER);var He=this.quill.getSelection();this.quill.scroll.descendants(ve).forEach(function(ke){ke.highlight(pt.options.highlight)}),this.quill.update(ne.default.sources.SILENT),He!=null&&this.quill.setSelection(He,ne.default.sources.SILENT)}},"highlight")}]),Ge}(se.default);Ce.DEFAULTS={highlight:function(){return Z.hljs==null?null:function(st){var Ge=Z.hljs.highlightAuto(st);return Ge.value}}(),interval:1e3},We.CodeBlock=ve,We.CodeToken=le,We.default=Ce},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(Gt,We){Gt.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(Gt,We){Gt.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(Gt,We){Gt.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(Gt,We){Gt.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(Gt,We){Gt.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(Gt,We,_e){"use strict";Object.defineProperty(We,"__esModule",{value:!0}),We.default=We.BubbleTooltip=void 0;var Xe=n(function Ge(Je,pt,He){Je===null&&(Je=Function.prototype);var ke=Object.getOwnPropertyDescriptor(Je,pt);if(ke===void 0){var Ue=Object.getPrototypeOf(Je);return Ue===null?void 0:Ge(Ue,pt,He)}else{if("value"in ke)return ke.value;var rt=ke.get;return rt===void 0?void 0:rt.call(He)}},"get"),Qe=function(){function Ge(Je,pt){for(var He=0;He<pt.length;He++){var ke=pt[He];ke.enumerable=ke.enumerable||!1,ke.configurable=!0,"value"in ke&&(ke.writable=!0),Object.defineProperty(Je,ke.key,ke)}}return n(Ge,"defineProperties"),function(Je,pt,He){return pt&&Ge(Je.prototype,pt),He&&Ge(Je,He),Je}}(),Ve=_e(3),Re=ue(Ve),Me=_e(8),ne=ue(Me),ce=_e(53),se=ue(ce),te=_e(16),Se=_e(51),de=ue(Se);function ue(Ge){return Ge&&Ge.__esModule?Ge:{default:Ge}}n(ue,"_interopRequireDefault");function ae(Ge,Je){if(!(Ge instanceof Je))throw new TypeError("Cannot call a class as a function")}n(ae,"_classCallCheck");function q(Ge,Je){if(!Ge)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Je&&(typeof Je=="object"||typeof Je=="function")?Je:Ge}n(q,"_possibleConstructorReturn");function ve(Ge,Je){if(typeof Je!="function"&&Je!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Je);Ge.prototype=Object.create(Je&&Je.prototype,{constructor:{value:Ge,enumerable:!1,writable:!0,configurable:!0}}),Je&&(Object.setPrototypeOf?Object.setPrototypeOf(Ge,Je):Ge.__proto__=Je)}n(ve,"_inherits");var le=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],Ce=function(Ge){ve(Je,Ge);function Je(pt,He){ae(this,Je),He.modules.toolbar!=null&&He.modules.toolbar.container==null&&(He.modules.toolbar.container=le);var ke=q(this,(Je.__proto__||Object.getPrototypeOf(Je)).call(this,pt,He));return ke.quill.container.classList.add("ql-bubble"),ke}return n(Je,"BubbleTheme"),Qe(Je,[{key:"extendToolbar",value:n(function(He){this.tooltip=new st(this.quill,this.options.bounds),this.tooltip.root.appendChild(He.container),this.buildButtons([].slice.call(He.container.querySelectorAll("button")),de.default),this.buildPickers([].slice.call(He.container.querySelectorAll("select")),de.default)},"extendToolbar")}]),Je}(se.default);Ce.DEFAULTS=(0,Re.default)(!0,{},se.default.DEFAULTS,{modules:{toolbar:{handlers:{link:n(function(Je){Je?this.quill.theme.tooltip.edit():this.quill.format("link",!1)},"link")}}}});var st=function(Ge){ve(Je,Ge);function Je(pt,He){ae(this,Je);var ke=q(this,(Je.__proto__||Object.getPrototypeOf(Je)).call(this,pt,He));return ke.quill.on(ne.default.events.EDITOR_CHANGE,function(Ue,rt,yt,Pt){if(Ue===ne.default.events.SELECTION_CHANGE)if(rt!=null&&rt.length>0&&Pt===ne.default.sources.USER){ke.show(),ke.root.style.left="0px",ke.root.style.width="",ke.root.style.width=ke.root.offsetWidth+"px";var qt=ke.quill.getLines(rt.index,rt.length);if(qt.length===1)ke.position(ke.quill.getBounds(rt));else{var on=qt[qt.length-1],Un=ke.quill.getIndex(on),zt=Math.min(on.length()-1,rt.index+rt.length-Un),xt=ke.quill.getBounds(new te.Range(Un,zt));ke.position(xt)}}else ct.activeElement!==ke.textbox&&ke.quill.hasFocus()&&ke.hide()}),ke}return n(Je,"BubbleTooltip"),Qe(Je,[{key:"listen",value:n(function(){var He=this;Xe(Je.prototype.__proto__||Object.getPrototypeOf(Je.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){He.root.classList.remove("ql-editing")}),this.quill.on(ne.default.events.SCROLL_OPTIMIZE,function(){Ol(function(){if(!He.root.classList.contains("ql-hidden")){var ke=He.quill.getSelection();ke!=null&&He.position(He.quill.getBounds(ke))}},1)})},"listen")},{key:"cancel",value:n(function(){this.show()},"cancel")},{key:"position",value:n(function(He){var ke=Xe(Je.prototype.__proto__||Object.getPrototypeOf(Je.prototype),"position",this).call(this,He),Ue=this.root.querySelector(".ql-tooltip-arrow");if(Ue.style.marginLeft="",ke===0)return ke;Ue.style.marginLeft=-1*ke-Ue.offsetWidth/2+"px"},"position")}]),Je}(ce.BaseTooltip);st.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),We.BubbleTooltip=st,We.default=Ce},function(Gt,We,_e){Gt.exports=_e(83)}]).default}),s.exports}},2844658640:(H,l,c)=>{var u,m,v;H.exports=function(X){var s={},a={exports:s},i=X.AbortController,e=X.AbortSignal,t=X.addEventListener,r=X.alert,o=X.AnalyserNode,f=X.Animation,h=X.AnimationEffectReadOnly,p=X.AnimationEffectTiming,d=X.AnimationEffectTimingReadOnly,y=X.AnimationEvent,S=X.AnimationPlaybackEvent,b=X.AnimationTimeline,_=X.applicationCache,C=X.ApplicationCache,w=X.ApplicationCacheErrorEvent,R=X.atob,O=X.Attr,D=X.Audio,I=X.AudioBuffer,M=X.AudioBufferSourceNode,k=X.AudioContext,N=X.AudioDestinationNode,j=X.AudioListener,B=X.AudioNode,J=X.AudioParam,Q=X.AudioProcessingEvent,oe=X.AudioScheduledSourceNode,$=X.AudioWorkletGlobalScope,he=X.AudioWorkletNode,Ae=X.AudioWorkletProcessor,Ee=X.BarProp,Oe=X.BaseAudioContext,be=X.BatteryManager,De=X.BeforeUnloadEvent,ut=X.BiquadFilterNode,St=X.Blob,Rt=X.BlobEvent,Ze=X.blur,mt=X.BroadcastChannel,At=X.btoa,Vt=X.BudgetService,dt=X.ByteLengthQueuingStrategy,Cn=X.Cache,gt=X.CacheStorage,Ut=X.cancelAnimationFrame,en=X.cancelIdleCallback,sn=X.CanvasCaptureMediaStreamTrack,$t=X.CanvasGradient,Rn=X.CanvasPattern,di=X.CanvasRenderingContext2D,ii=X.ChannelMergerNode,Kn=X.ChannelSplitterNode,hi=X.CharacterData,Ln=X.clearInterval,Hn=X.clearTimeout,ui=X.clientInformation,jn=X.ClipboardEvent,ri=X.close,ie=X.closed,Mt=X.CloseEvent,Ot=X.Comment,Ht=X.CompositionEvent,hn=X.confirm,tn=X.console,xe=X.ConstantSourceNode,Dt=X.ConvolverNode,Y=X.CountQueuingStrategy,fe=X.createImageBitmap,et=X.Credential,nt=X.CredentialsContainer,nn=X.crypto,kt=X.Crypto,Jt=X.CryptoKey,Ke=X.CSS,vt=X.CSSConditionRule,x=X.CSSFontFaceRule,Ye=X.CSSGroupingRule,it=X.CSSImportRule,ft=X.CSSKeyframeRule,ge=X.CSSKeyframesRule,Zn=X.CSSMatrixComponent,Xt=X.CSSMediaRule,pn=X.CSSNamespaceRule,Bi=X.CSSPageRule,Gn=X.CSSPerspective,yo=X.CSSRotate,no=X.CSSRule,Vi=X.CSSRuleList,or=X.CSSScale,ki=X.CSSSkew,qi=X.CSSSkewX,Or=X.CSSSkewY,Zo=X.CSSStyleDeclaration,Xn=X.CSSStyleRule,Dn=X.CSSStyleSheet,Ni=X.CSSSupportsRule,pi=X.CSSTransformValue,ir=X.CSSTranslate,br=X.CustomElementRegistry,zr=X.customElements,pr=X.CustomEvent,mr=X.DataTransfer,Ur=X.DataTransferItem,io=X.DataTransferItemList,ur=X.defaultstatus,wo=X.defaultStatus,$r=X.DelayNode,Vo=X.DeviceMotionEvent,V=X.DeviceOrientationEvent,we=X.devicePixelRatio,ct=X.dispatchEvent,Wt=X.document,On=X.Document,fi=X.DocumentFragment,Li=X.DocumentType,gi=X.DOMError,Mi=X.DOMException,Oi=X.DOMImplementation,Yi=X.DOMMatrix,Cr=X.DOMMatrixReadOnly,wr=X.DOMParser,Kr=X.DOMPoint,bo=X.DOMPointReadOnly,ia=X.DOMQuad,Fo=X.DOMRect,zi=X.DOMRectList,co=X.DOMRectReadOnly,Zr=X.DOMStringList,Ao=X.DOMStringMap,No=X.DOMTokenList,qo=X.DragEvent,ca=X.DynamicsCompressorNode,Bo=X.Element,ba=X.ErrorEvent,Ho=X.event,Fe=X.Event,tt=X.EventSource,It=X.EventTarget,Qt=X.external,cn=X.fetch,fn=X.File,ci=X.FileList,_i=X.FileReader,bi=X.find,si=X.focus,Ui=X.FocusEvent,Nn=X.FontFace,Sr=X.FontFaceSetLoadEvent,wi=X.FormData,qr=X.frameElement,uo=X.frames,go=X.GainNode,ji=X.Gamepad,Qi=X.GamepadButton,_r=X.GamepadEvent,Jr=X.getComputedStyle,jo=X.getSelection,ea=X.HashChangeEvent,gr=X.Headers,ua=X.history,so=X.History,Jo=X.HTMLAllCollection,$a=X.HTMLAnchorElement,Qa=X.HTMLAreaElement,_a=X.HTMLAudioElement,Wa=X.HTMLBaseElement,za=X.HTMLBodyElement,Na=X.HTMLBRElement,sa=X.HTMLButtonElement,pa=X.HTMLCanvasElement,Ka=X.HTMLCollection,Lo=X.HTMLContentElement,ma=X.HTMLDataElement,Ja=X.HTMLDataListElement,Ta=X.HTMLDetailsElement,ns=X.HTMLDialogElement,bs=X.HTMLDirectoryElement,da=X.HTMLDivElement,fs=X.HTMLDListElement,So=X.HTMLDocument,Wo=X.HTMLElement,Uo=X.HTMLEmbedElement,ra=X.HTMLFieldSetElement,oa=X.HTMLFontElement,hs=X.HTMLFormControlsCollection,me=X.HTMLFormElement,Ie=X.HTMLFrameElement,$e=X.HTMLFrameSetElement,ot=X.HTMLHeadElement,Et=X.HTMLHeadingElement,Yt=X.HTMLHRElement,jt=X.HTMLHtmlElement,yn=X.HTMLIFrameElement,Sn=X.HTMLImageElement,Pn=X.HTMLInputElement,In=X.HTMLLabelElement,Jn=X.HTMLLegendElement,ei=X.HTMLLIElement,oi=X.HTMLLinkElement,Si=X.HTMLMapElement,yi=X.HTMLMarqueeElement,li=X.HTMLMediaElement,Yn=X.HTMLMenuElement,Gi=X.HTMLMetaElement,Wr=X.HTMLMeterElement,oo=X.HTMLModElement,lo=X.HTMLObjectElement,dn=X.HTMLOListElement,fo=X.HTMLOptGroupElement,to=X.HTMLOptionElement,fr=X.HTMLOptionsCollection,xo=X.HTMLOutputElement,_o=X.HTMLParagraphElement,fa=X.HTMLParamElement,la=X.HTMLPictureElement,ps=X.HTMLPreElement,_s=X.HTMLProgressElement,As=X.HTMLQuoteElement,aa=X.HTMLScriptElement,il=X.HTMLSelectElement,Ws=X.HTMLShadowElement,is=X.HTMLSlotElement,rs=X.HTMLSourceElement,Ds=X.HTMLSpanElement,Ts=X.HTMLStyleElement,Ya=X.HTMLTableCaptionElement,Ua=X.HTMLTableCellElement,ms=X.HTMLTableColElement,Rs=X.HTMLTableElement,ql=X.HTMLTableRowElement,pl=X.HTMLTableSectionElement,Rl=X.HTMLTemplateElement,La=X.HTMLTextAreaElement,gs=X.HTMLTimeElement,Ml=X.HTMLTitleElement,Ms=X.HTMLTrackElement,vs=X.HTMLUListElement,Pl=X.HTMLUnknownElement,rl=X.HTMLVideoElement,ec=X.IDBCursor,ol=X.IDBCursorWithValue,al=X.IDBDatabase,zs=X.IDBFactory,ml=X.IDBIndex,gl=X.IDBKeyRange,ys=X.IDBObjectStore,Ps=X.IDBOpenDBRequest,kl=X.IDBRequest,Gs=X.IDBTransaction,vl=X.IDBVersionChangeEvent,os=X.IdleDeadline,Nl=X.IIRFilterNode,Ll=X.Image,$s=X.ImageBitmap,tc=X.ImageBitmapRenderingContext,xl=X.ImageCapture,Ks=X.ImageData,Js=X.indexedDB,Cs=X.innerHeight,Fl=X.innerWidth,sl=X.InputEvent,hr=X.IntersectionObserver,Wi=X.IntersectionObserverEntry,ll=X.Intl,rn=X.isSecureContext,gn=X.KeyboardEvent,Tn=X.KeyframeEffect,Ai=X.KeyframeEffectReadOnly,$i=X.length,Ar=X.localStorage,Dr=X.location,vr=X.Location,dr=X.locationbar,ao=X.matchMedia,zo=X.MediaDeviceInfo,Yr=X.MediaDevices,mi=X.MediaElementAudioSourceNode,rr=X.MediaEncryptedEvent,ti=X.MediaError,ga=X.MediaKeyMessageEvent,ks=X.MediaKeySession,Bl=X.MediaKeyStatusMap,Ys=X.MediaKeySystemAccess,as=X.MediaList,Va=X.MediaMetadata,Ul=X.MediaQueryList,Xs=X.MediaQueryListEvent,Vl=X.MediaRecorder,Qs=X.MediaSettingsRange,Zs=X.MediaSource,To=X.MediaStream,Po=X.MediaStreamAudioDestinationNode,Ha=X.MediaStreamAudioSourceNode,yl=X.MediaStreamEvent,iu=X.MediaStreamTrack,Hl=X.MediaStreamTrackEvent,jl=X.menubar,Tu=X.MessageChannel,nc=X.MessageEvent,sd=X.MessagePort,Cu=X.MIDIAccess,ld=X.MIDIConnectionEvent,Iu=X.MIDIInput,cd=X.MIDIInputMap,Ou=X.MIDIMessageEvent,wu=X.MIDIOutput,Au=X.MIDIOutputMap,ud=X.MIDIPort,wa=X.MimeType,Sl=X.MimeTypeArray,Du=X.MouseEvent,Ru=X.moveBy,Mu=X.moveTo,Wl=X.MutationEvent,ic=X.MutationObserver,rc=X.MutationRecord,ru=X.name,ss=X.NamedNodeMap,El=X.NavigationPreloadManager,Pu=X.navigator,Ga=X.Navigator,Yo=X.NetworkInformation,Ss=X.Node,ku=X.NodeFilter,ou=X.NodeIterator,oc=X.NodeList,zl=X.Notification,Nu=X.OfflineAudioCompletionEvent,bl=X.OfflineAudioContext,ac=X.offscreenBuffering,cl=X.OffscreenCanvas,Bn=X.OffscreenCanvasRenderingContext2D,L=X.onabort,F=X.onafterprint,K=X.onanimationend,pe=X.onanimationiteration,je=X.onanimationstart,ht=X.onappinstalled,Lt=X.onauxclick,Bt=X.onbeforeinstallprompt,Tt=X.onbeforeprint,bn=X.onbeforeunload,zn=X.onblur,Vn=X.oncancel,Qn=X.oncanplay,Ii=X.oncanplaythrough,Ti=X.onchange,Zi=X.onclick,yr=X.onclose,tr=X.oncontextmenu,Gr=X.oncuechange,Co=X.ondblclick,Io=X.ondevicemotion,Go=X.ondeviceorientation,Xr=X.ondeviceorientationabsolute,ar=X.ondrag,ho=X.ondragend,ta=X.ondragenter,cr=X.ondragleave,Qr=X.ondragover,$o=X.ondragstart,va=X.ondrop,ha=X.ondurationchange,ja=X.onemptied,ko=X.onended,Za=X.onerror,ya=X.onfocus,Xa=X.ongotpointercapture,Aa=X.onhashchange,Is=X.oninput,Ns=X.oninvalid,_l=X.onkeydown,Da=X.onkeypress,Ls=X.onkeyup,qs=X.onlanguagechange,Tl=X.onload,sc=X.onloadeddata,Cl=X.onloadedmetadata,lc=X.onloadstart,au=X.onlostpointercapture,su=X.onmessage,xa=X.onmessageerror,xs=X.onmousedown,Gl=X.onmouseenter,cc=X.onmouseleave,Il=X.onmousemove,$l=X.onmouseout,Mo=X.onmouseover,ls=X.onmouseup,Oo=X.onmousewheel,Ko=X.onoffline,Eo=X.ononline,Os=X.onpagehide,uc=X.onpageshow,Lu=X.onpause,xu=X.onplay,Fu=X.onplaying,Bu=X.onpointercancel,Uu=X.onpointerdown,zf=X.onpointerenter,Gf=X.onpointerleave,$f=X.onpointermove,Kf=X.onpointerout,Jf=X.onpointerover,qa=X.onpointerup,dd=X.onpopstate,Yf=X.onprogress,Er=X.onratechange,Xf=X.onrejectionhandled,es=X.onreset,Qf=X.onresize,Zf=X.onscroll,qf=X.onsearch,dc=X.onseeked,fc=X.onseeking,hc=X.onselect,pc=X.onstalled,mc=X.onstorage,gc=X.onsubmit,vc=X.onsuspend,yc=X.ontimeupdate,Sc=X.ontoggle,eh=X.ontransitionend,th=X.onunhandledrejection,nh=X.onunload,ih=X.onvolumechange,rh=X.onwaiting,oh=X.onwheel,ah=X.open,sh=X.openDatabase,lh=X.opener,ch=X.Option,uh=X.origin,dh=X.OscillatorNode,fh=X.outerHeight,Ca=X.outerWidth,fd=X.OverconstrainedError,hd=X.PageTransitionEvent,pd=X.pageXOffset,md=X.pageYOffset,gd=X.PannerNode,vd=X.parent,Ec=X.Path2D,yd=X.PaymentAddress,bc=X.PaymentRequest,Vu=X.PaymentRequestUpdateEvent,Sd=X.PaymentResponse,Ed=X.performance,bd=X.Performance,_d=X.PerformanceEntry,_c=X.PerformanceLongTaskTiming,Hu=X.PerformanceMark,Td=X.PerformanceMeasure,lu=X.PerformanceNavigation,Cd=X.PerformanceNavigationTiming,Id=X.PerformanceObserver,Od=X.PerformanceObserverEntryList,ju=X.PerformancePaintTiming,wd=X.PerformanceResourceTiming,Ad=X.PerformanceTiming,Tc=X.PeriodicWave,Dd=X.Permissions,Rd=X.PermissionStatus,Md=X.personalbar,Pd=X.PhotoCapabilities,kd=X.Plugin,Nd=X.PluginArray,Ld=X.PointerEvent,xd=X.PopStateEvent,Fd=X.postMessage,Bd=X.Presentation,Ud=X.PresentationAvailability,Vd=X.PresentationConnection,Hd=X.PresentationConnectionAvailableEvent,jd=X.PresentationConnectionCloseEvent,Wd=X.PresentationConnectionList,zd=X.PresentationReceiver,Gd=X.PresentationRequest,$d=X.print,Kd=X.ProcessingInstruction,Jd=X.ProgressEvent,cu=X.PromiseRejectionEvent,Yd=X.prompt,Xd=X.PushManager,Qd=X.PushSubscription,Zd=X.PushSubscriptionOptions,qd=X.queueMicrotask,ef=X.RadioNodeList,tf=X.Range,nf=X.ReadableStream,rf=X.registerProcessor,of=X.RemotePlayback,af=X.removeEventListener,sf=X.Request,lf=X.requestAnimationFrame,cf=X.requestIdleCallback,uf=X.resizeBy,df=X.ResizeObserver,ff=X.ResizeObserverEntry,hf=X.resizeTo,pf=X.Response,mf=X.RTCCertificate,gf=X.RTCDataChannel,vf=X.RTCDataChannelEvent,yf=X.RTCDtlsTransport,Sf=X.RTCIceCandidate,hh=X.RTCIceGatherer,ph=X.RTCIceTransport,mh=X.RTCPeerConnection,gh=X.RTCPeerConnectionIceEvent,vh=X.RTCRtpContributingSource,yh=X.RTCRtpReceiver,Sh=X.RTCRtpSender,Eh=X.RTCSctpTransport,bh=X.RTCSessionDescription,_h=X.RTCStatsReport,Th=X.RTCTrackEvent,Ch=X.screen,Ih=X.Screen,Oh=X.screenLeft,wh=X.ScreenOrientation,Ah=X.screenTop,Dh=X.screenX,Rh=X.screenY,Mh=X.ScriptProcessorNode,Ph=X.scroll,kh=X.scrollbars,Nh=X.scrollBy,Lh=X.scrollTo,xh=X.scrollX,Fh=X.scrollY,Bh=X.SecurityPolicyViolationEvent,Wu=X.Selection,Cc=X.self,Uh=X.ServiceWorker,Vh=X.ServiceWorkerContainer,Hh=X.ServiceWorkerRegistration,jh=X.sessionStorage,Ol=X.setInterval,Ef=X.setTimeout,Wh=X.ShadowRoot,zh=X.SharedWorker,Gh=X.SourceBuffer,$h=X.SourceBufferList,Kh=X.speechSynthesis,Jh=X.SpeechSynthesisEvent,Yh=X.SpeechSynthesisUtterance,Xh=X.StaticRange,Qh=X.status,Zh=X.statusbar,qh=X.StereoPannerNode,ep=X.stop,tp=X.Storage,np=X.StorageEvent,ip=X.StorageManager,rp=X.styleMedia,op=X.StyleSheet,ap=X.StyleSheetList,sp=X.SubtleCrypto,lp=X.SVGAElement,cp=X.SVGAngle,up=X.SVGAnimatedAngle,dp=X.SVGAnimatedBoolean,fp=X.SVGAnimatedEnumeration,hp=X.SVGAnimatedInteger,pp=X.SVGAnimatedLength,mp=X.SVGAnimatedLengthList,gp=X.SVGAnimatedNumber,vp=X.SVGAnimatedNumberList,yp=X.SVGAnimatedPreserveAspectRatio,Sp=X.SVGAnimatedRect,Ep=X.SVGAnimatedString,bp=X.SVGAnimatedTransformList,_p=X.SVGAnimateElement,Tp=X.SVGAnimateMotionElement,Cp=X.SVGAnimateTransformElement,Ip=X.SVGAnimationElement,Op=X.SVGCircleElement,wp=X.SVGClipPathElement,Ap=X.SVGComponentTransferFunctionElement,Dp=X.SVGDefsElement,Rp=X.SVGDescElement,Mp=X.SVGDiscardElement,Pp=X.SVGElement,kp=X.SVGEllipseElement,Np=X.SVGFEBlendElement,Lp=X.SVGFEColorMatrixElement,xp=X.SVGFEComponentTransferElement,Fp=X.SVGFECompositeElement,Bp=X.SVGFEConvolveMatrixElement,Up=X.SVGFEDiffuseLightingElement,Vp=X.SVGFEDisplacementMapElement,Hp=X.SVGFEDistantLightElement,jp=X.SVGFEDropShadowElement,Wp=X.SVGFEFloodElement,zp=X.SVGFEFuncAElement,Gp=X.SVGFEFuncBElement,$p=X.SVGFEFuncGElement,Kp=X.SVGFEFuncRElement,Jp=X.SVGFEGaussianBlurElement,Yp=X.SVGFEImageElement,Xp=X.SVGFEMergeElement,Qp=X.SVGFEMergeNodeElement,Zp=X.SVGFEMorphologyElement,qp=X.SVGFEOffsetElement,em=X.SVGFEPointLightElement,tm=X.SVGFESpecularLightingElement,nm=X.SVGFESpotLightElement,im=X.SVGFETileElement,rm=X.SVGFETurbulenceElement,om=X.SVGFilterElement,am=X.SVGForeignObjectElement,sm=X.SVGGElement,lm=X.SVGGeometryElement,cm=X.SVGGradientElement,um=X.SVGGraphicsElement,dm=X.SVGImageElement,fm=X.SVGLength,hm=X.SVGLengthList,pm=X.SVGLinearGradientElement,mm=X.SVGLineElement,gm=X.SVGMarkerElement,vm=X.SVGMaskElement,ym=X.SVGMatrix,Sm=X.SVGMetadataElement,Em=X.SVGMPathElement,bm=X.SVGNumber,_m=X.SVGNumberList,Tm=X.SVGPathElement,Cm=X.SVGPatternElement,Im=X.SVGPoint,Om=X.SVGPointList,wm=X.SVGPolygonElement,Am=X.SVGPolylineElement,Dm=X.SVGPreserveAspectRatio,Rm=X.SVGRadialGradientElement,Mm=X.SVGRect,Pm=X.SVGRectElement,km=X.SVGScriptElement,Nm=X.SVGSetElement,Lm=X.SVGStopElement,xm=X.SVGStringList,Fm=X.SVGStyleElement,Bm=X.SVGSVGElement,Um=X.SVGSwitchElement,Vm=X.SVGSymbolElement,Hm=X.SVGTextContentElement,jm=X.SVGTextElement,Wm=X.SVGTextPathElement,zm=X.SVGTextPositioningElement,Gm=X.SVGTitleElement,$m=X.SVGTransform,Km=X.SVGTransformList,Jm=X.SVGTSpanElement,Ym=X.SVGUnitTypes,Xm=X.SVGUseElement,Qm=X.SVGViewElement,Kl=X.TaskAttributionTiming,Zm=X.Text,Rr=X.TextDecoder,Vr=X.TextEncoder,Ia=X.TextEvent,Mr=X.TextMetrics,Fs=X.TextTrack,wl=X.TextTrackCue,Pr=X.TextTrackCueList,kr=X.TextTrackList,Nr=X.TimeRanges,Lr=X.toolbar,qm=X.top,eg=X.Touch,tg=X.TouchEvent,ng=X.TouchList,ig=X.TrackEvent,bf=X.TransitionEvent,rg=X.TreeWalker,_f=X.trustedTypes,og=X.UIEvent,ag=X.URL,Tf=X.URLSearchParams,sg=X.ValidityState,lg=X.visualViewport,zu=X.VisualViewport,Cf=X.VTTCue,Gu=X.WaveShaperNode,$u=X.WebAssembly,sr=X.WebGL2RenderingContext,Es=X.WebGLActiveInfo,cg=X.WebGLBuffer,po=X.WebGLContextEvent,ro=X.WebGLFramebuffer,xr=X.WebGLProgram,Fr=X.WebGLQuery,Ic=X.WebGLRenderbuffer,Oc=X.WebGLRenderingContext,wc=X.WebGLSampler,Ac=X.WebGLShader,Dc=X.WebGLShaderPrecisionFormat,Rc=X.WebGLSync,Mc=X.WebGLTexture,Pc=X.WebGLTransformFeedback,kc=X.WebGLUniformLocation,Nc=X.WebGLVertexArrayObject,Lc=X.WebSocket,Z=X.WheelEvent,X=X.window,xc=X.Window,Fc=X.Worker,Bc=X.WritableStream,Uc=X.XMLDocument,Vc=X.XMLHttpRequest,Hc=X.XMLHttpRequestEventTarget,jc=X.XMLHttpRequestUpload,Wc=X.XMLSerializer,zc=X.XPathEvaluator,Gc=X.XPathExpression,$c=X.XPathResult,Gt=X.XSLTProcessor;return function(We,_e){typeof s=="object"&&typeof a<"u"?_e(s,c(3134334389),c(4332857818)):(m=[s,c(3134334389),c(4332857818)],u=_e,v=typeof u=="function"?u.apply(s,m):u,v!==void 0&&(a.exports=v))}(this,function(We,_e,Xe){"use strict";var Qe=n(()=>'<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',"resizeTriggersHtml");function Ve(ye,U){if(!(ye instanceof U))throw new TypeError("Cannot call a class as a function")}n(Ve,"_classCallCheck");function Re(ye,U){for(var W=0;W<U.length;W++){var re=U[W];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(ye,re.key,re)}}n(Re,"_defineProperties");function Me(ye,U,W){return U&&Re(ye.prototype,U),W&&Re(ye,W),ye}n(Me,"_createClass");function ne(ye,U,W){return U in ye?Object.defineProperty(ye,U,{value:W,enumerable:!0,configurable:!0,writable:!0}):ye[U]=W,ye}n(ne,"_defineProperty");function ce(){return(ce=Object.assign||function(ye){for(var U=1;U<arguments.length;U++){var W=arguments[U];for(var re in W)Object.prototype.hasOwnProperty.call(W,re)&&(ye[re]=W[re])}return ye}).apply(this,arguments)}n(ce,"_extends");function se(ye,U){var W=Object.keys(ye);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(ye);U&&(re=re.filter(function(Pe){return Object.getOwnPropertyDescriptor(ye,Pe).enumerable})),W.push.apply(W,re)}return W}n(se,"ownKeys");function te(ye){for(var U=1;U<arguments.length;U++){var W=arguments[U]!=null?arguments[U]:{};U%2?se(W,!0).forEach(function(re){ne(ye,re,W[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ye,Object.getOwnPropertyDescriptors(W)):se(W).forEach(function(re){Object.defineProperty(ye,re,Object.getOwnPropertyDescriptor(W,re))})}return ye}n(te,"_objectSpread2");function Se(ye,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function");ye.prototype=Object.create(U&&U.prototype,{constructor:{value:ye,writable:!0,configurable:!0}}),U&&ue(ye,U)}n(Se,"_inherits");function de(ye){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(ye)}n(de,"_getPrototypeOf");function ue(ye,U){return(ue=Object.setPrototypeOf||function(W,re){return W.__proto__=re,W})(ye,U)}n(ue,"_setPrototypeOf");function ae(ye,U){if(ye==null)return{};var W,re,Pe=function(Ne,lt){if(Ne==null)return{};var Ct,_t,Ft={},Zt=Object.keys(Ne);for(_t=0;_t<Zt.length;_t++)Ct=Zt[_t],0<=lt.indexOf(Ct)||(Ft[Ct]=Ne[Ct]);return Ft}(ye,U);if(Object.getOwnPropertySymbols){var ze=Object.getOwnPropertySymbols(ye);for(re=0;re<ze.length;re++)W=ze[re],0<=U.indexOf(W)||Object.prototype.propertyIsEnumerable.call(ye,W)&&(Pe[W]=ye[W])}return Pe}n(ae,"_objectWithoutProperties");function q(ye){if(ye===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ye}n(q,"_assertThisInitialized");function ve(ye,U){return!U||typeof U!="object"&&typeof U!="function"?q(ye):U}n(ve,"_possibleConstructorReturn");function le(ye,U){return function(W){if(Array.isArray(W))return W}(ye)||function(W,re){if(Symbol.iterator in Object(W)||Object.prototype.toString.call(W)==="[object Arguments]"){var Pe=[],ze=!0,Ne=!1,lt=void 0;try{for(var Ct,_t=W[Symbol.iterator]();!(ze=(Ct=_t.next()).done)&&(Pe.push(Ct.value),!re||Pe.length!==re);ze=!0);}catch(Ft){Ne=!0,lt=Ft}finally{try{ze||_t.return==null||_t.return()}finally{if(Ne)throw lt}}return Pe}}(ye,U)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n(le,"_slicedToArray");function Ce(ye){return function(U){if(Array.isArray(U)){for(var W=0,re=new Array(U.length);W<U.length;W++)re[W]=U[W];return re}}(ye)||function(U){if(Symbol.iterator in Object(U)||Object.prototype.toString.call(U)==="[object Arguments]")return Array.from(U)}(ye)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n(Ce,"_toConsumableArray");function st(){var ye=this.constructor.getDerivedStateFromProps(this.props,this.state);ye!=null&&this.setState(ye)}n(st,"componentWillMount");function Ge(ye){this.setState(function(U){var W=this.constructor.getDerivedStateFromProps(ye,U);return W??null}.bind(this))}n(Ge,"componentWillReceiveProps");function Je(ye,U){try{var W=this.props,re=this.state;this.props=ye,this.state=U,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(W,re)}finally{this.props=W,this.state=re}}n(Je,"componentWillUpdate");function pt(ye){var U=ye.prototype;if(!U||!U.isReactComponent)throw new Error("Can only polyfill class components");if(typeof ye.getDerivedStateFromProps!="function"&&typeof U.getSnapshotBeforeUpdate!="function")return ye;var W=null,re=null,Pe=null;if(typeof U.componentWillMount=="function"?W="componentWillMount":typeof U.UNSAFE_componentWillMount=="function"&&(W="UNSAFE_componentWillMount"),typeof U.componentWillReceiveProps=="function"?re="componentWillReceiveProps":typeof U.UNSAFE_componentWillReceiveProps=="function"&&(re="UNSAFE_componentWillReceiveProps"),typeof U.componentWillUpdate=="function"?Pe="componentWillUpdate":typeof U.UNSAFE_componentWillUpdate=="function"&&(Pe="UNSAFE_componentWillUpdate"),W!==null||re!==null||Pe!==null){var ze=ye.displayName||ye.name,Ne=typeof ye.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+ze+" uses "+Ne+" but also contains the following legacy lifecycles:"+(W!==null?`
  `+W:"")+(re!==null?`
  `+re:"")+(Pe!==null?`
  `+Pe:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof ye.getDerivedStateFromProps=="function"&&(U.componentWillMount=st,U.componentWillReceiveProps=Ge),typeof U.getSnapshotBeforeUpdate=="function"){if(typeof U.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");U.componentWillUpdate=Je;var lt=U.componentDidUpdate;U.componentDidUpdate=function(Ct,_t,Ft){var Zt=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:Ft;lt.call(this,Ct,_t,Zt)}}return ye}n(pt,"polyfill"),Je.__suppressDeprecationWarning=Ge.__suppressDeprecationWarning=st.__suppressDeprecationWarning=!0;var He=function(){function ye(){var U,W;Ve(this,ye);for(var re=arguments.length,Pe=new Array(re),ze=0;ze<re;ze++)Pe[ze]=arguments[ze];return ne(q(W=ve(this,(U=de(ye)).call.apply(U,[this].concat(Pe)))),"state",{scrollToColumn:0,scrollToRow:0,instanceProps:{prevScrollToColumn:0,prevScrollToRow:0}}),ne(q(W),"_columnStartIndex",0),ne(q(W),"_columnStopIndex",0),ne(q(W),"_rowStartIndex",0),ne(q(W),"_rowStopIndex",0),ne(q(W),"_onKeyDown",function(Ne){var lt=W.props,Ct=lt.columnCount,_t=lt.disabled,Ft=lt.mode,Zt=lt.rowCount;if(!_t){var un=W._getScrollState(),Wn=un.scrollToColumn,mn=un.scrollToRow,Mn=W._getScrollState(),$n=Mn.scrollToColumn,ni=Mn.scrollToRow;switch(Ne.key){case"ArrowDown":ni=Math.min(Ft==="cells"?ni+1:W._rowStopIndex+1,Zt-1);break;case"ArrowLeft":$n=Math.max(Ft==="cells"?$n-1:W._columnStartIndex-1,0);break;case"ArrowRight":$n=Math.min(Ft==="cells"?$n+1:W._columnStopIndex+1,Ct-1);break;case"ArrowUp":ni=Math.max(Ft==="cells"?ni-1:W._rowStartIndex-1,0)}$n===Wn&&ni===mn||(Ne.preventDefault(),W._updateScrollState({scrollToColumn:$n,scrollToRow:ni}))}}),ne(q(W),"_onSectionRendered",function(Ne){var lt=Ne.columnStartIndex,Ct=Ne.columnStopIndex,_t=Ne.rowStartIndex,Ft=Ne.rowStopIndex;W._columnStartIndex=lt,W._columnStopIndex=Ct,W._rowStartIndex=_t,W._rowStopIndex=Ft}),W}return n(ye,"ArrowKeyStepper"),Se(ye,_e.PureComponent),Me(ye,[{key:"setScrollIndexes",value:function(U){var W=U.scrollToColumn,re=U.scrollToRow;this.setState({scrollToRow:re,scrollToColumn:W})}},{key:"render",value:function(){var U=this.props,W=U.className,re=U.children,Pe=this._getScrollState(),ze=Pe.scrollToColumn,Ne=Pe.scrollToRow;return _e.createElement("div",{className:W,onKeyDown:this._onKeyDown},re({onSectionRendered:this._onSectionRendered,scrollToColumn:ze,scrollToRow:Ne}))}},{key:"_getScrollState",value:function(){return this.props.isControlled?this.props:this.state}},{key:"_updateScrollState",value:function(U){var W=U.scrollToColumn,re=U.scrollToRow,Pe=this.props,ze=Pe.isControlled,Ne=Pe.onScrollToChange;typeof Ne=="function"&&Ne({scrollToColumn:W,scrollToRow:re}),ze||this.setState({scrollToColumn:W,scrollToRow:re})}}],[{key:"getDerivedStateFromProps",value:function(U,W){return U.isControlled?{}:U.scrollToColumn!==W.instanceProps.prevScrollToColumn||U.scrollToRow!==W.instanceProps.prevScrollToRow?te({},W,{scrollToColumn:U.scrollToColumn,scrollToRow:U.scrollToRow,instanceProps:{prevScrollToColumn:U.scrollToColumn,prevScrollToRow:U.scrollToRow}}):{}}}]),ye}();function ke(ye,U){var W,re,Pe,ze=(W=U!==void 0?U:typeof X<"u"?X:typeof Cc<"u"?Cc:c.g).document!==void 0&&W.document.attachEvent;if(!ze){var Ne=(Pe=W.requestAnimationFrame||W.mozRequestAnimationFrame||W.webkitRequestAnimationFrame||function(kn){return W.setTimeout(kn,20)},function(kn){return Pe(kn)}),lt=(re=W.cancelAnimationFrame||W.mozCancelAnimationFrame||W.webkitCancelAnimationFrame||W.clearTimeout,function(kn){return re(kn)}),Ct=n(function(kn){var ai=kn.__resizeTriggers__,An=ai.firstElementChild,er=ai.lastElementChild,Br=An.firstElementChild;er.scrollLeft=er.scrollWidth,er.scrollTop=er.scrollHeight,Br.style.width=An.offsetWidth+1+"px",Br.style.height=An.offsetHeight+1+"px",An.scrollLeft=An.scrollWidth,An.scrollTop=An.scrollHeight},"resetTriggers"),_t=n(function(kn){if(!(kn.target.className&&typeof kn.target.className.indexOf=="function"&&kn.target.className.indexOf("contract-trigger")<0&&kn.target.className.indexOf("expand-trigger")<0)){var ai=this;Ct(this),this.__resizeRAF__&&lt(this.__resizeRAF__),this.__resizeRAF__=Ne(function(){!function(An){return An.offsetWidth!=An.__resizeLast__.width||An.offsetHeight!=An.__resizeLast__.height}(ai)||(ai.__resizeLast__.width=ai.offsetWidth,ai.__resizeLast__.height=ai.offsetHeight,ai.__resizeListeners__.forEach(function(An){An.call(ai,kn)}))})}},"scrollListener"),Ft=!1,Zt="",un="animationstart",Wn="Webkit Moz O ms".split(" "),mn="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),Mn=W.document.createElement("fakeelement");if(Mn.style.animationName!==void 0&&(Ft=!0),Ft===!1){for(var $n=0;$n<Wn.length;$n++)if(Mn.style[Wn[$n]+"AnimationName"]!==void 0){Zt="-"+Wn[$n].toLowerCase()+"-",un=mn[$n],Ft=!0;break}}var ni="resizeanim",vi="@"+Zt+"keyframes "+ni+" { from { opacity: 0; } to { opacity: 0; } } ",Pi=Zt+"animation: 1ms "+ni+"; "}return{addResizeListener:function(kn,ai){if(ze)kn.attachEvent("onresize",ai);else{if(!kn.__resizeTriggers__){var An=kn.ownerDocument,er=W.getComputedStyle(kn);if(er&&er.position=="static"&&(kn.style.position="relative"),function(vo){if(!vo.getElementById("detectElementResize")){var Xo=(vi||"")+".resize-triggers { "+(Pi||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',Qo=vo.head||vo.getElementsByTagName("head")[0],na=vo.createElement("style");na.id="detectElementResize",na.type="text/css",ye!=null&&na.setAttribute("nonce",ye),na.styleSheet?na.styleSheet.cssText=Xo:na.appendChild(vo.createTextNode(Xo)),Qo.appendChild(na)}}(An),kn.__resizeLast__={},kn.__resizeListeners__=[],(kn.__resizeTriggers__=An.createElement("div")).className="resize-triggers",X.trustedTypes){var Br=_f.createPolicy("react-virtualized-auto-sizer",{createHTML:Qe});kn.__resizeTriggers__.innerHTML=Br.createHTML("")}else kn.__resizeTriggers__.innerHTML=Qe();kn.appendChild(kn.__resizeTriggers__),Ct(kn),kn.addEventListener("scroll",_t,!0),un&&(kn.__resizeTriggers__.__animationListener__=function(vo){vo.animationName==ni&&Ct(kn)},kn.__resizeTriggers__.addEventListener(un,kn.__resizeTriggers__.__animationListener__))}kn.__resizeListeners__.push(ai)}},removeResizeListener:function(kn,ai){if(ze)kn.detachEvent("onresize",ai);else if(kn.__resizeListeners__.splice(kn.__resizeListeners__.indexOf(ai),1),!kn.__resizeListeners__.length){kn.removeEventListener("scroll",_t,!0),kn.__resizeTriggers__.__animationListener__&&(kn.__resizeTriggers__.removeEventListener(un,kn.__resizeTriggers__.__animationListener__),kn.__resizeTriggers__.__animationListener__=null);try{kn.__resizeTriggers__=!kn.removeChild(kn.__resizeTriggers__)}catch{}}}}}n(ke,"createDetectElementResize"),ne(He,"defaultProps",{disabled:!1,isControlled:!1,mode:"edges",scrollToColumn:0,scrollToRow:0}),pt(He);var Ue=function(){function ye(){var U,W;Ve(this,ye);for(var re=arguments.length,Pe=new Array(re),ze=0;ze<re;ze++)Pe[ze]=arguments[ze];return ne(q(W=ve(this,(U=de(ye)).call.apply(U,[this].concat(Pe)))),"state",{height:W.props.defaultHeight||0,width:W.props.defaultWidth||0}),ne(q(W),"_parentNode",void 0),ne(q(W),"_autoSizer",void 0),ne(q(W),"_window",void 0),ne(q(W),"_detectElementResize",void 0),ne(q(W),"_onResize",function(){var Ne=W.props,lt=Ne.disableHeight,Ct=Ne.disableWidth,_t=Ne.onResize;if(W._parentNode){var Ft=W._parentNode.offsetHeight||0,Zt=W._parentNode.offsetWidth||0,un=(W._window||X).getComputedStyle(W._parentNode)||{},Wn=parseInt(un.paddingLeft,10)||0,mn=parseInt(un.paddingRight,10)||0,Mn=parseInt(un.paddingTop,10)||0,$n=parseInt(un.paddingBottom,10)||0,ni=Ft-Mn-$n,vi=Zt-Wn-mn;(!lt&&W.state.height!==ni||!Ct&&W.state.width!==vi)&&(W.setState({height:Ft-Mn-$n,width:Zt-Wn-mn}),_t({height:Ft,width:Zt}))}}),ne(q(W),"_setRef",function(Ne){W._autoSizer=Ne}),W}return n(ye,"AutoSizer"),Se(ye,_e.Component),Me(ye,[{key:"componentDidMount",value:function(){var U=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=ke(U,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var U=this.props,W=U.children,re=U.className,Pe=U.disableHeight,ze=U.disableWidth,Ne=U.style,lt=this.state,Ct=lt.height,_t=lt.width,Ft={overflow:"visible"},Zt={};return Pe||(Ft.height=0,Zt.height=Ct),ze||(Ft.width=0,Zt.width=_t),_e.createElement("div",{className:re,ref:this._setRef,style:te({},Ft,{},Ne)},W(Zt))}}]),ye}();ne(Ue,"defaultProps",{onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}});var rt=function(){function ye(){var U,W;Ve(this,ye);for(var re=arguments.length,Pe=new Array(re),ze=0;ze<re;ze++)Pe[ze]=arguments[ze];return ne(q(W=ve(this,(U=de(ye)).call.apply(U,[this].concat(Pe)))),"_child",void 0),ne(q(W),"_measure",function(){var Ne=W.props,lt=Ne.cache,Ct=Ne.columnIndex,_t=Ct===void 0?0:Ct,Ft=Ne.parent,Zt=Ne.rowIndex,un=Zt===void 0?W.props.index||0:Zt,Wn=W._getCellMeasurements(),mn=Wn.height,Mn=Wn.width;mn===lt.getHeight(un,_t)&&Mn===lt.getWidth(un,_t)||(lt.set(un,_t,Mn,mn),Ft&&typeof Ft.recomputeGridSize=="function"&&Ft.recomputeGridSize({columnIndex:_t,rowIndex:un}))}),ne(q(W),"_registerChild",function(Ne){!Ne||Ne instanceof Bo||tn.warn("CellMeasurer registerChild expects to be passed Element or null"),(W._child=Ne)&&W._maybeMeasureCell()}),W}return n(ye,"CellMeasurer"),Se(ye,_e.PureComponent),Me(ye,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var U=this.props.children;return typeof U=="function"?U({measure:this._measure,registerChild:this._registerChild}):U}},{key:"_getCellMeasurements",value:function(){var U=this.props.cache,W=this._child||Xe.findDOMNode(this);if(W&&W.ownerDocument&&W.ownerDocument.defaultView&&W instanceof W.ownerDocument.defaultView.HTMLElement){var re=W.style.width,Pe=W.style.height;U.hasFixedWidth()||(W.style.width="auto"),U.hasFixedHeight()||(W.style.height="auto");var ze=Math.ceil(W.offsetHeight),Ne=Math.ceil(W.offsetWidth);return re&&(W.style.width=re),Pe&&(W.style.height=Pe),{height:ze,width:Ne}}return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var U=this.props,W=U.cache,re=U.columnIndex,Pe=re===void 0?0:re,ze=U.parent,Ne=U.rowIndex,lt=Ne===void 0?this.props.index||0:Ne;if(!W.has(lt,Pe)){var Ct=this._getCellMeasurements(),_t=Ct.height,Ft=Ct.width;W.set(lt,Pe,Ft,_t),ze&&typeof ze.invalidateCellSizeAfterRender=="function"&&ze.invalidateCellSizeAfterRender({columnIndex:Pe,rowIndex:lt})}}}]),ye}();ne(rt,"__internalCellMeasurerFlag",!1),rt.__internalCellMeasurerFlag=!0;var yt=function(){function ye(){var U=this,W=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};Ve(this,ye),ne(this,"_cellHeightCache",{}),ne(this,"_cellWidthCache",{}),ne(this,"_columnWidthCache",{}),ne(this,"_rowHeightCache",{}),ne(this,"_defaultHeight",void 0),ne(this,"_defaultWidth",void 0),ne(this,"_minHeight",void 0),ne(this,"_minWidth",void 0),ne(this,"_keyMapper",void 0),ne(this,"_hasFixedHeight",void 0),ne(this,"_hasFixedWidth",void 0),ne(this,"_columnCount",0),ne(this,"_rowCount",0),ne(this,"columnWidth",function(Ft){var Zt=Ft.index,un=U._keyMapper(0,Zt);return U._columnWidthCache[un]!==void 0?U._columnWidthCache[un]:U._defaultWidth}),ne(this,"rowHeight",function(Ft){var Zt=Ft.index,un=U._keyMapper(Zt,0);return U._rowHeightCache[un]!==void 0?U._rowHeightCache[un]:U._defaultHeight});var re=W.defaultHeight,Pe=W.defaultWidth,ze=W.fixedHeight,Ne=W.fixedWidth,lt=W.keyMapper,Ct=W.minHeight,_t=W.minWidth;this._hasFixedHeight=ze===!0,this._hasFixedWidth=Ne===!0,this._minHeight=Ct||0,this._minWidth=_t||0,this._keyMapper=lt||Pt,this._defaultHeight=Math.max(this._minHeight,typeof re=="number"?re:30),this._defaultWidth=Math.max(this._minWidth,typeof Pe=="number"?Pe:100),this._hasFixedHeight===!1&&this._hasFixedWidth===!1&&tn.warn("CellMeasurerCache should only measure a cell's width or height. You have configured CellMeasurerCache to measure both. This will result in poor performance."),this._hasFixedHeight===!1&&this._defaultHeight===0&&tn.warn("Fixed height CellMeasurerCache should specify a :defaultHeight greater than 0. Failing to do so will lead to unnecessary layout and poor performance."),this._hasFixedWidth===!1&&this._defaultWidth===0&&tn.warn("Fixed width CellMeasurerCache should specify a :defaultWidth greater than 0. Failing to do so will lead to unnecessary layout and poor performance.")}return n(ye,"CellMeasurerCache"),Me(ye,[{key:"clear",value:function(U,W){var re=1<arguments.length&&W!==void 0?W:0,Pe=this._keyMapper(U,re);delete this._cellHeightCache[Pe],delete this._cellWidthCache[Pe],this._updateCachedColumnAndRowSizes(U,re)}},{key:"clearAll",value:function(){this._cellHeightCache={},this._cellWidthCache={},this._columnWidthCache={},this._rowHeightCache={},this._rowCount=0,this._columnCount=0}},{key:"hasFixedHeight",value:function(){return this._hasFixedHeight}},{key:"hasFixedWidth",value:function(){return this._hasFixedWidth}},{key:"getHeight",value:function(U,W){var re=1<arguments.length&&W!==void 0?W:0;if(this._hasFixedHeight)return this._defaultHeight;var Pe=this._keyMapper(U,re);return this._cellHeightCache[Pe]!==void 0?Math.max(this._minHeight,this._cellHeightCache[Pe]):this._defaultHeight}},{key:"getWidth",value:function(U,W){var re=1<arguments.length&&W!==void 0?W:0;if(this._hasFixedWidth)return this._defaultWidth;var Pe=this._keyMapper(U,re);return this._cellWidthCache[Pe]!==void 0?Math.max(this._minWidth,this._cellWidthCache[Pe]):this._defaultWidth}},{key:"has",value:function(U,W){var re=1<arguments.length&&W!==void 0?W:0,Pe=this._keyMapper(U,re);return this._cellHeightCache[Pe]!==void 0}},{key:"set",value:function(U,W,re,Pe){var ze=this._keyMapper(U,W);W>=this._columnCount&&(this._columnCount=W+1),U>=this._rowCount&&(this._rowCount=U+1),this._cellHeightCache[ze]=Pe,this._cellWidthCache[ze]=re,this._updateCachedColumnAndRowSizes(U,W)}},{key:"_updateCachedColumnAndRowSizes",value:function(U,W){if(!this._hasFixedWidth){for(var re=0,Pe=0;Pe<this._rowCount;Pe++)re=Math.max(re,this.getWidth(Pe,W));var ze=this._keyMapper(0,W);this._columnWidthCache[ze]=re}if(!this._hasFixedHeight){for(var Ne=0,lt=0;lt<this._columnCount;lt++)Ne=Math.max(Ne,this.getHeight(U,lt));var Ct=this._keyMapper(U,0);this._rowHeightCache[Ct]=Ne}}},{key:"defaultHeight",get:function(){return this._defaultHeight}},{key:"defaultWidth",get:function(){return this._defaultWidth}}]),ye}();function Pt(ye,U){return"".concat(ye,"-").concat(U)}n(Pt,"defaultKeyMapper");function qt(ye){return ye&&ye.__esModule&&Object.prototype.hasOwnProperty.call(ye,"default")?ye.default:ye}n(qt,"unwrapExports");function on(ye,U){return ye(U={exports:{}},U.exports),U.exports}n(on,"createCommonjsModule");var Un=on(function(ye,U){Object.defineProperty(U,"__esModule",{value:!0});var W=typeof Symbol=="function"&&Symbol.for,re=W?Symbol.for("react.element"):60103,Pe=W?Symbol.for("react.portal"):60106,ze=W?Symbol.for("react.fragment"):60107,Ne=W?Symbol.for("react.strict_mode"):60108,lt=W?Symbol.for("react.profiler"):60114,Ct=W?Symbol.for("react.provider"):60109,_t=W?Symbol.for("react.context"):60110,Ft=W?Symbol.for("react.async_mode"):60111,Zt=W?Symbol.for("react.concurrent_mode"):60111,un=W?Symbol.for("react.forward_ref"):60112,Wn=W?Symbol.for("react.suspense"):60113,mn=W?Symbol.for("react.suspense_list"):60120,Mn=W?Symbol.for("react.memo"):60115,$n=W?Symbol.for("react.lazy"):60116,ni=W?Symbol.for("react.fundamental"):60117,vi=W?Symbol.for("react.responder"):60118,Pi=W?Symbol.for("react.scope"):60119;function kn(An){if(typeof An=="object"&&An!==null){var er=An.$$typeof;switch(er){case re:switch(An=An.type){case Ft:case Zt:case ze:case lt:case Ne:case Wn:return An;default:switch(An=An&&An.$$typeof){case _t:case un:case Ct:return An;default:return er}}case $n:case Mn:case Pe:return er}}}n(kn,"y");function ai(An){return kn(An)===Zt}n(ai,"z"),U.typeOf=kn,U.AsyncMode=Ft,U.ConcurrentMode=Zt,U.ContextConsumer=_t,U.ContextProvider=Ct,U.Element=re,U.ForwardRef=un,U.Fragment=ze,U.Lazy=$n,U.Memo=Mn,U.Portal=Pe,U.Profiler=lt,U.StrictMode=Ne,U.Suspense=Wn,U.isValidElementType=function(An){return typeof An=="string"||typeof An=="function"||An===ze||An===Zt||An===lt||An===Ne||An===Wn||An===mn||typeof An=="object"&&An!==null&&(An.$$typeof===$n||An.$$typeof===Mn||An.$$typeof===Ct||An.$$typeof===_t||An.$$typeof===un||An.$$typeof===ni||An.$$typeof===vi||An.$$typeof===Pi)},U.isAsyncMode=function(An){return ai(An)||kn(An)===Ft},U.isConcurrentMode=ai,U.isContextConsumer=function(An){return kn(An)===_t},U.isContextProvider=function(An){return kn(An)===Ct},U.isElement=function(An){return typeof An=="object"&&An!==null&&An.$$typeof===re},U.isForwardRef=function(An){return kn(An)===un},U.isFragment=function(An){return kn(An)===ze},U.isLazy=function(An){return kn(An)===$n},U.isMemo=function(An){return kn(An)===Mn},U.isPortal=function(An){return kn(An)===Pe},U.isProfiler=function(An){return kn(An)===lt},U.isStrictMode=function(An){return kn(An)===Ne},U.isSuspense=function(An){return kn(An)===Wn}});qt(Un),Un.typeOf,Un.AsyncMode,Un.ConcurrentMode,Un.ContextConsumer,Un.ContextProvider,Un.Element,Un.ForwardRef,Un.Fragment,Un.Lazy,Un.Memo,Un.Portal,Un.Profiler,Un.StrictMode,Un.Suspense,Un.isValidElementType,Un.isAsyncMode,Un.isConcurrentMode,Un.isContextConsumer,Un.isContextProvider,Un.isElement,Un.isForwardRef,Un.isFragment,Un.isLazy,Un.isMemo,Un.isPortal,Un.isProfiler,Un.isStrictMode,Un.isSuspense;var zt=on(function(ye,U){(function(){Object.defineProperty(U,"__esModule",{value:!0});var W=typeof Symbol=="function"&&Symbol.for,re=W?Symbol.for("react.element"):60103,Pe=W?Symbol.for("react.portal"):60106,ze=W?Symbol.for("react.fragment"):60107,Ne=W?Symbol.for("react.strict_mode"):60108,lt=W?Symbol.for("react.profiler"):60114,Ct=W?Symbol.for("react.provider"):60109,_t=W?Symbol.for("react.context"):60110,Ft=W?Symbol.for("react.async_mode"):60111,Zt=W?Symbol.for("react.concurrent_mode"):60111,un=W?Symbol.for("react.forward_ref"):60112,Wn=W?Symbol.for("react.suspense"):60113,mn=W?Symbol.for("react.suspense_list"):60120,Mn=W?Symbol.for("react.memo"):60115,$n=W?Symbol.for("react.lazy"):60116,ni=W?Symbol.for("react.fundamental"):60117,vi=W?Symbol.for("react.responder"):60118,Pi=W?Symbol.for("react.scope"):60119,kn=n(function(Ir,fu){if(fu===void 0)throw new Error("`lowPriorityWarningWithoutStack(condition, format, ...args)` requires a warning message argument");if(!Ir){for(var Jl=arguments.length,ed=new Array(2<Jl?Jl-2:0),Af=2;Af<Jl;Af++)ed[Af-2]=arguments[Af];(function(ey){for(var _g=arguments.length,dv=new Array(1<_g?_g-1:0),Df=1;Df<_g;Df++)dv[Df-1]=arguments[Df];var ty=0,fv="Warning: "+ey.replace(/%s/g,function(){return dv[ty++]});typeof tn<"u"&&tn.warn(fv);try{throw new Error(fv)}catch{}}).apply(void 0,[fu].concat(ed))}},"lowPriorityWarningWithoutStack$1");function ai(Ir){if(typeof Ir=="object"&&Ir!==null){var fu=Ir.$$typeof;switch(fu){case re:var Jl=Ir.type;switch(Jl){case Ft:case Zt:case ze:case lt:case Ne:case Wn:return Jl;default:var ed=Jl&&Jl.$$typeof;switch(ed){case _t:case un:case Ct:return ed;default:return fu}}case $n:case Mn:case Pe:return fu}}}n(ai,"typeOf");var An=Ft,er=Zt,Br=_t,vo=Ct,Xo=re,Qo=un,na=ze,ts=$n,ds=Mn,ws=Pe,Zu=lt,qu=Ne,qv=Wn,cv=!1;function uv(Ir){return ai(Ir)===Zt}n(uv,"isConcurrentMode"),U.typeOf=ai,U.AsyncMode=An,U.ConcurrentMode=er,U.ContextConsumer=Br,U.ContextProvider=vo,U.Element=Xo,U.ForwardRef=Qo,U.Fragment=na,U.Lazy=ts,U.Memo=ds,U.Portal=ws,U.Profiler=Zu,U.StrictMode=qu,U.Suspense=qv,U.isValidElementType=function(Ir){return typeof Ir=="string"||typeof Ir=="function"||Ir===ze||Ir===Zt||Ir===lt||Ir===Ne||Ir===Wn||Ir===mn||typeof Ir=="object"&&Ir!==null&&(Ir.$$typeof===$n||Ir.$$typeof===Mn||Ir.$$typeof===Ct||Ir.$$typeof===_t||Ir.$$typeof===un||Ir.$$typeof===ni||Ir.$$typeof===vi||Ir.$$typeof===Pi)},U.isAsyncMode=function(Ir){return cv||kn(!(cv=!0),"The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API."),uv(Ir)||ai(Ir)===Ft},U.isConcurrentMode=uv,U.isContextConsumer=function(Ir){return ai(Ir)===_t},U.isContextProvider=function(Ir){return ai(Ir)===Ct},U.isElement=function(Ir){return typeof Ir=="object"&&Ir!==null&&Ir.$$typeof===re},U.isForwardRef=function(Ir){return ai(Ir)===un},U.isFragment=function(Ir){return ai(Ir)===ze},U.isLazy=function(Ir){return ai(Ir)===$n},U.isMemo=function(Ir){return ai(Ir)===Mn},U.isPortal=function(Ir){return ai(Ir)===Pe},U.isProfiler=function(Ir){return ai(Ir)===lt},U.isStrictMode=function(Ir){return ai(Ir)===Ne},U.isSuspense=function(Ir){return ai(Ir)===Wn}})()});qt(zt),zt.typeOf,zt.AsyncMode,zt.ConcurrentMode,zt.ContextConsumer,zt.ContextProvider,zt.Element,zt.ForwardRef,zt.Fragment,zt.Lazy,zt.Memo,zt.Portal,zt.Profiler,zt.StrictMode,zt.Suspense,zt.isValidElementType,zt.isAsyncMode,zt.isConcurrentMode,zt.isContextConsumer,zt.isContextProvider,zt.isElement,zt.isForwardRef,zt.isFragment,zt.isLazy,zt.isMemo,zt.isPortal,zt.isProfiler,zt.isStrictMode,zt.isSuspense;var xt=on(function(ye){ye.exports=zt}),at=Object.getOwnPropertySymbols,wt=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable,ln,an=function(){try{if(!Object.assign)return!1;var ye=new String("abc");if(ye[5]="de",Object.getOwnPropertyNames(ye)[0]==="5")return!1;for(var U={},W=0;W<10;W++)U["_"+String.fromCharCode(W)]=W;if(Object.getOwnPropertyNames(U).map(function(Pe){return U[Pe]}).join("")!=="0123456789")return!1;var re={};return"abcdefghijklmnopqrst".split("").forEach(function(Pe){re[Pe]=Pe}),Object.keys(Object.assign({},re)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(ye,U){for(var W,re,Pe=function(Ct){if(Ct==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(Ct)}(ye),ze=1;ze<arguments.length;ze++){for(var Ne in W=Object(arguments[ze]))wt.call(W,Ne)&&(Pe[Ne]=W[Ne]);if(at){re=at(W);for(var lt=0;lt<re.length;lt++)Nt.call(W,re[lt])&&(Pe[re[lt]]=W[re[lt]])}}return Pe},bt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Kt={},_n=Function.call.bind(Object.prototype.hasOwnProperty);function En(ye,U,W,re,Pe){for(var ze in ye)if(_n(ye,ze)){var Ne;try{if(typeof ye[ze]!="function"){var lt=Error((re||"React class")+": "+W+" type `"+ze+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof ye[ze]+"`.");throw lt.name="Invariant Violation",lt}Ne=ye[ze](U,ze,re,W,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(_t){Ne=_t}if(!Ne||Ne instanceof Error||ln((re||"React class")+": type specification of "+W+" `"+ze+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof Ne+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),Ne instanceof Error&&!(Ne.message in Kt)){Kt[Ne.message]=!0;var Ct=Pe?Pe():"";ln("Failed "+W+" type: "+Ne.message+(Ct??""))}}}n(En,"checkPropTypes"),ln=n(function(ye){var U="Warning: "+ye;typeof tn<"u"&&tn.error(U);try{throw new Error(U)}catch{}},"printWarning"),En.resetWarningCache=function(){Kt={}};var qn,Xi=En,Hr=Function.call.bind(Object.prototype.hasOwnProperty);function jr(){return null}n(jr,"emptyFunctionThatReturnsNull"),qn=n(function(ye){var U="Warning: "+ye;typeof tn<"u"&&tn.error(U);try{throw new Error(U)}catch{}},"printWarning$1");function mo(ye,U){var W=typeof Symbol=="function"&&Symbol.iterator,re="@@iterator",Pe="<<anonymous>>",ze={array:_t("array"),bool:_t("boolean"),func:_t("function"),number:_t("number"),object:_t("object"),string:_t("string"),symbol:_t("symbol"),any:Ct(jr),arrayOf:function(mn){return Ct(function(Mn,$n,ni,vi,Pi){if(typeof mn!="function")return new lt("Property `"+Pi+"` of component `"+ni+"` has invalid PropType notation inside arrayOf.");var kn=Mn[$n];if(!Array.isArray(kn))return new lt("Invalid "+vi+" `"+Pi+"` of type `"+Zt(kn)+"` supplied to `"+ni+"`, expected an array.");for(var ai=0;ai<kn.length;ai++){var An=mn(kn,ai,ni,vi,Pi+"["+ai+"]",bt);if(An instanceof Error)return An}return null})},element:Ct(function(mn,Mn,$n,ni,vi){var Pi=mn[Mn];return ye(Pi)?null:new lt("Invalid "+ni+" `"+vi+"` of type `"+Zt(Pi)+"` supplied to `"+$n+"`, expected a single ReactElement.")}),elementType:Ct(function(mn,Mn,$n,ni,vi){var Pi=mn[Mn];return xt.isValidElementType(Pi)?null:new lt("Invalid "+ni+" `"+vi+"` of type `"+Zt(Pi)+"` supplied to `"+$n+"`, expected a single ReactElement type.")}),instanceOf:function(mn){return Ct(function(Mn,$n,ni,vi,Pi){if(Mn[$n]instanceof mn)return null;var kn=mn.name||Pe;return new lt("Invalid "+vi+" `"+Pi+"` of type `"+function(ai){return ai.constructor&&ai.constructor.name?ai.constructor.name:Pe}(Mn[$n])+"` supplied to `"+ni+"`, expected instance of `"+kn+"`.")})},node:Ct(function(mn,Mn,$n,ni,vi){return Ft(mn[Mn])?null:new lt("Invalid "+ni+" `"+vi+"` supplied to `"+$n+"`, expected a ReactNode.")}),objectOf:function(mn){return Ct(function(Mn,$n,ni,vi,Pi){if(typeof mn!="function")return new lt("Property `"+Pi+"` of component `"+ni+"` has invalid PropType notation inside objectOf.");var kn=Mn[$n],ai=Zt(kn);if(ai!=="object")return new lt("Invalid "+vi+" `"+Pi+"` of type `"+ai+"` supplied to `"+ni+"`, expected an object.");for(var An in kn)if(Hr(kn,An)){var er=mn(kn,An,ni,vi,Pi+"."+An,bt);if(er instanceof Error)return er}return null})},oneOf:function(mn){return Array.isArray(mn)?Ct(function(Mn,$n,ni,vi,Pi){for(var kn=Mn[$n],ai=0;ai<mn.length;ai++)if(Ne(kn,mn[ai]))return null;var An=JSON.stringify(mn,function(er,Br){return un(Br)==="symbol"?String(Br):Br});return new lt("Invalid "+vi+" `"+Pi+"` of value `"+String(kn)+"` supplied to `"+ni+"`, expected one of "+An+".")}):(qn(1<arguments.length?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),jr)},oneOfType:function(mn){if(!Array.isArray(mn))return qn("Invalid argument supplied to oneOfType, expected an instance of array."),jr;for(var Mn=0;Mn<mn.length;Mn++){var $n=mn[Mn];if(typeof $n!="function")return qn("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+Wn($n)+" at index "+Mn+"."),jr}return Ct(function(ni,vi,Pi,kn,ai){for(var An=0;An<mn.length;An++)if((0,mn[An])(ni,vi,Pi,kn,ai,bt)==null)return null;return new lt("Invalid "+kn+" `"+ai+"` supplied to `"+Pi+"`.")})},shape:function(mn){return Ct(function(Mn,$n,ni,vi,Pi){var kn=Mn[$n],ai=Zt(kn);if(ai!=="object")return new lt("Invalid "+vi+" `"+Pi+"` of type `"+ai+"` supplied to `"+ni+"`, expected `object`.");for(var An in mn){var er=mn[An];if(er){var Br=er(kn,An,ni,vi,Pi+"."+An,bt);if(Br)return Br}}return null})},exact:function(mn){return Ct(function(Mn,$n,ni,vi,Pi){var kn=Mn[$n],ai=Zt(kn);if(ai!=="object")return new lt("Invalid "+vi+" `"+Pi+"` of type `"+ai+"` supplied to `"+ni+"`, expected `object`.");var An=an({},Mn[$n],mn);for(var er in An){var Br=mn[er];if(!Br)return new lt("Invalid "+vi+" `"+Pi+"` key `"+er+"` supplied to `"+ni+"`.\nBad object: "+JSON.stringify(Mn[$n],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(mn),null,"  "));var vo=Br(kn,er,ni,vi,Pi+"."+er,bt);if(vo)return vo}return null})}};function Ne(mn,Mn){return mn===Mn?mn!==0||1/mn==1/Mn:mn!=mn&&Mn!=Mn}n(Ne,"is");function lt(mn){this.message=mn,this.stack=""}n(lt,"PropTypeError");function Ct(mn){var Mn={},$n=0;function ni(Pi,kn,ai,An,er,Br,vo){if(An=An||Pe,Br=Br||ai,vo!==bt){if(U){var Xo=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw Xo.name="Invariant Violation",Xo}if(typeof tn<"u"){var Qo=An+":"+ai;!Mn[Qo]&&$n<3&&(qn("You are manually calling a React.PropTypes validation function for the `"+Br+"` prop on `"+An+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),Mn[Qo]=!0,$n++)}}return kn[ai]==null?Pi?kn[ai]===null?new lt("The "+er+" `"+Br+"` is marked as required in `"+An+"`, but its value is `null`."):new lt("The "+er+" `"+Br+"` is marked as required in `"+An+"`, but its value is `undefined`."):null:mn(kn,ai,An,er,Br)}n(ni,"checkType");var vi=ni.bind(null,!1);return vi.isRequired=ni.bind(null,!0),vi}n(Ct,"createChainableTypeChecker");function _t(mn){return Ct(function(Mn,$n,ni,vi,Pi,kn){var ai=Mn[$n];return Zt(ai)===mn?null:new lt("Invalid "+vi+" `"+Pi+"` of type `"+un(ai)+"` supplied to `"+ni+"`, expected `"+mn+"`.")})}n(_t,"createPrimitiveTypeChecker");function Ft(mn){switch(typeof mn){case"number":case"string":case"undefined":return!0;case"boolean":return!mn;case"object":if(Array.isArray(mn))return mn.every(Ft);if(mn===null||ye(mn))return!0;var Mn=function(Pi){var kn=Pi&&(W&&Pi[W]||Pi[re]);if(typeof kn=="function")return kn}(mn);if(!Mn)return!1;var $n,ni=Mn.call(mn);if(Mn!==mn.entries){for(;!($n=ni.next()).done;)if(!Ft($n.value))return!1}else for(;!($n=ni.next()).done;){var vi=$n.value;if(vi&&!Ft(vi[1]))return!1}return!0;default:return!1}}n(Ft,"isNode");function Zt(mn){var Mn=typeof mn;return Array.isArray(mn)?"array":mn instanceof RegExp?"object":function($n,ni){return $n==="symbol"||!!ni&&(ni["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&ni instanceof Symbol)}(Mn,mn)?"symbol":Mn}n(Zt,"getPropType");function un(mn){if(mn==null)return""+mn;var Mn=Zt(mn);if(Mn==="object"){if(mn instanceof Date)return"date";if(mn instanceof RegExp)return"regexp"}return Mn}n(un,"getPreciseType");function Wn(mn){var Mn=un(mn);switch(Mn){case"array":case"object":return"an "+Mn;case"boolean":case"date":case"regexp":return"a "+Mn;default:return Mn}}return n(Wn,"getPostfixForTypeWarning"),lt.prototype=Error.prototype,ze.checkPropTypes=Xi,ze.resetWarningCache=Xi.resetWarningCache,ze.PropTypes=ze}n(mo,"factoryWithTypeCheckers");var vn=on(function(ye){var U=xt;ye.exports=mo(U.isElement,!0)});function Ra(ye){var U,W,re="";if(ye)if(typeof ye=="object")if(ye.push)for(U=0;U<ye.length;U++)ye[U]&&(W=Ra(ye[U]))&&(re&&(re+=" "),re+=W);else for(U in ye)ye[U]&&(W=Ra(U))&&(re&&(re+=" "),re+=W);else typeof ye=="boolean"||ye.call||(re&&(re+=" "),re+=ye);return re}n(Ra,"toVal");function wn(){for(var ye,U=0,W="";U<arguments.length;)(ye=Ra(arguments[U++]))&&(W&&(W+=" "),W+=ye);return W}n(wn,"clsx");function xn(ye){var U=!(0<arguments.length&&ye!==void 0)||ye,W={};return function(re){var Pe=re.callback,ze=re.indices,Ne=Object.keys(ze),lt=!U||Ne.every(function(_t){var Ft=ze[_t];return Array.isArray(Ft)?0<Ft.length:0<=Ft}),Ct=Ne.length!==Object.keys(W).length||Ne.some(function(_t){var Ft=W[_t],Zt=ze[_t];return Array.isArray(Zt)?Ft.join(",")!==Zt.join(","):Ft!==Zt});W=ze,lt&&Ct&&Pe(ze)}}n(xn,"createCallbackMemoizer");var Di,Hi=!(typeof X>"u"||!X.document||!X.document.createElement);function Ri(ye){if((!Di&&Di!==0||ye)&&Hi){var U=Wt.createElement("div");U.style.position="absolute",U.style.top="-9999px",U.style.width="50px",U.style.height="50px",U.style.overflow="scroll",Wt.body.appendChild(U),Di=U.offsetWidth-U.clientWidth,Wt.body.removeChild(U)}return Di}n(Ri,"scrollbarSize");var lr="observed",Tr="requested",eo=function(){function ye(){var U,W;Ve(this,ye);for(var re=arguments.length,Pe=new Array(re),ze=0;ze<re;ze++)Pe[ze]=arguments[ze];return ne(q(W=ve(this,(U=de(ye)).call.apply(U,[this].concat(Pe)))),"state",{isScrolling:!1,scrollLeft:0,scrollTop:0}),ne(q(W),"_calculateSizeAndPositionDataOnNextUpdate",!1),ne(q(W),"_onSectionRenderedMemoizer",xn()),ne(q(W),"_onScrollMemoizer",xn(!1)),ne(q(W),"_invokeOnSectionRenderedHelper",function(){var Ne=W.props,lt=Ne.cellLayoutManager,Ct=Ne.onSectionRendered;W._onSectionRenderedMemoizer({callback:Ct,indices:{indices:lt.getLastRenderedIndices()}})}),ne(q(W),"_setScrollingContainerRef",function(Ne){W._scrollingContainer=Ne}),ne(q(W),"_updateScrollPositionForScrollToCell",function(){var Ne=W.props,lt=Ne.cellLayoutManager,Ct=Ne.height,_t=Ne.scrollToAlignment,Ft=Ne.scrollToCell,Zt=Ne.width,un=W.state,Wn=un.scrollLeft,mn=un.scrollTop;if(0<=Ft){var Mn=lt.getScrollPositionForCell({align:_t,cellIndex:Ft,height:Ct,scrollLeft:Wn,scrollTop:mn,width:Zt});Mn.scrollLeft===Wn&&Mn.scrollTop===mn||W._setScrollPosition(Mn)}}),ne(q(W),"_onScroll",function(Ne){if(Ne.target===W._scrollingContainer){W._enablePointerEventsAfterDelay();var lt=W.props,Ct=lt.cellLayoutManager,_t=lt.height,Ft=lt.isScrollingChange,Zt=lt.width,un=W._scrollbarSize,Wn=Ct.getTotalSize(),mn=Wn.height,Mn=Wn.width,$n=Math.max(0,Math.min(Mn-Zt+un,Ne.target.scrollLeft)),ni=Math.max(0,Math.min(mn-_t+un,Ne.target.scrollTop));if(W.state.scrollLeft!==$n||W.state.scrollTop!==ni){var vi=Ne.cancelable?lr:Tr;W.state.isScrolling||Ft(!0),W.setState({isScrolling:!0,scrollLeft:$n,scrollPositionChangeReason:vi,scrollTop:ni})}W._invokeOnScrollMemoizer({scrollLeft:$n,scrollTop:ni,totalWidth:Mn,totalHeight:mn})}}),W._scrollbarSize=Ri(),W._scrollbarSize===void 0?(W._scrollbarSizeMeasured=!1,W._scrollbarSize=0):W._scrollbarSizeMeasured=!0,W}return n(ye,"CollectionView"),Se(ye,_e.PureComponent),Me(ye,[{key:"recomputeCellSizesAndPositions",value:function(){this._calculateSizeAndPositionDataOnNextUpdate=!0,this.forceUpdate()}},{key:"componentDidMount",value:function(){var U=this.props,W=U.cellLayoutManager,re=U.scrollLeft,Pe=U.scrollToCell,ze=U.scrollTop;this._scrollbarSizeMeasured||(this._scrollbarSize=Ri(),this._scrollbarSizeMeasured=!0,this.setState({})),0<=Pe?this._updateScrollPositionForScrollToCell():(0<=re||0<=ze)&&this._setScrollPosition({scrollLeft:re,scrollTop:ze}),this._invokeOnSectionRenderedHelper();var Ne=W.getTotalSize(),lt=Ne.height,Ct=Ne.width;this._invokeOnScrollMemoizer({scrollLeft:re||0,scrollTop:ze||0,totalHeight:lt,totalWidth:Ct})}},{key:"componentDidUpdate",value:function(U,W){var re=this.props,Pe=re.height,ze=re.scrollToAlignment,Ne=re.scrollToCell,lt=re.width,Ct=this.state,_t=Ct.scrollLeft,Ft=Ct.scrollPositionChangeReason,Zt=Ct.scrollTop;Ft===Tr&&(0<=_t&&_t!==W.scrollLeft&&_t!==this._scrollingContainer.scrollLeft&&(this._scrollingContainer.scrollLeft=_t),0<=Zt&&Zt!==W.scrollTop&&Zt!==this._scrollingContainer.scrollTop&&(this._scrollingContainer.scrollTop=Zt)),Pe===U.height&&ze===U.scrollToAlignment&&Ne===U.scrollToCell&&lt===U.width||this._updateScrollPositionForScrollToCell(),this._invokeOnSectionRenderedHelper()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&Hn(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var U=this.props,W=U.autoHeight,re=U.cellCount,Pe=U.cellLayoutManager,ze=U.className,Ne=U.height,lt=U.horizontalOverscanSize,Ct=U.id,_t=U.noContentRenderer,Ft=U.style,Zt=U.verticalOverscanSize,un=U.width,Wn=this.state,mn=Wn.isScrolling,Mn=Wn.scrollLeft,$n=Wn.scrollTop;this._lastRenderedCellCount===re&&this._lastRenderedCellLayoutManager===Pe&&!this._calculateSizeAndPositionDataOnNextUpdate||(this._lastRenderedCellCount=re,this._lastRenderedCellLayoutManager=Pe,this._calculateSizeAndPositionDataOnNextUpdate=!1,Pe.calculateSizeAndPositionData());var ni=Pe.getTotalSize(),vi=ni.height,Pi=ni.width,kn=Math.max(0,Mn-lt),ai=Math.max(0,$n-Zt),An=Math.min(Pi,Mn+un+lt),er=Math.min(vi,$n+Ne+Zt),Br=0<Ne&&0<un?Pe.cellRenderers({height:er-ai,isScrolling:mn,width:An-kn,x:kn,y:ai}):[],vo={boxSizing:"border-box",direction:"ltr",height:W?"auto":Ne,position:"relative",WebkitOverflowScrolling:"touch",width:un,willChange:"transform"},Xo=Ne<vi?this._scrollbarSize:0,Qo=un<Pi?this._scrollbarSize:0;return vo.overflowX=Pi+Xo<=un?"hidden":"auto",vo.overflowY=vi+Qo<=Ne?"hidden":"auto",_e.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:wn("ReactVirtualized__Collection",ze),id:Ct,onScroll:this._onScroll,role:"grid",style:te({},vo,{},Ft),tabIndex:0},0<re&&_e.createElement("div",{className:"ReactVirtualized__Collection__innerScrollContainer",style:{height:vi,maxHeight:vi,maxWidth:Pi,overflow:"hidden",pointerEvents:mn?"none":"",width:Pi}},Br),re===0&&_t())}},{key:"_enablePointerEventsAfterDelay",value:function(){var U=this;this._disablePointerEventsTimeoutId&&Hn(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=Ef(function(){(0,U.props.isScrollingChange)(!1),U._disablePointerEventsTimeoutId=null,U.setState({isScrolling:!1})},150)}},{key:"_invokeOnScrollMemoizer",value:function(U){var W=this,re=U.scrollLeft,Pe=U.scrollTop,ze=U.totalHeight,Ne=U.totalWidth;this._onScrollMemoizer({callback:function(lt){var Ct=lt.scrollLeft,_t=lt.scrollTop,Ft=W.props,Zt=Ft.height;(0,Ft.onScroll)({clientHeight:Zt,clientWidth:Ft.width,scrollHeight:ze,scrollLeft:Ct,scrollTop:_t,scrollWidth:Ne})},indices:{scrollLeft:re,scrollTop:Pe}})}},{key:"_setScrollPosition",value:function(U){var W=U.scrollLeft,re=U.scrollTop,Pe={scrollPositionChangeReason:Tr};0<=W&&(Pe.scrollLeft=W),0<=re&&(Pe.scrollTop=re),(0<=W&&W!==this.state.scrollLeft||0<=re&&re!==this.state.scrollTop)&&this.setState(Pe)}}],[{key:"getDerivedStateFromProps",value:function(U,W){return U.cellCount!==0||W.scrollLeft===0&&W.scrollTop===0?U.scrollLeft!==W.scrollLeft||U.scrollTop!==W.scrollTop?{scrollLeft:U.scrollLeft!=null?U.scrollLeft:W.scrollLeft,scrollTop:U.scrollTop!=null?U.scrollTop:W.scrollTop,scrollPositionChangeReason:Tr}:null:{scrollLeft:0,scrollTop:0,scrollPositionChangeReason:Tr}}}]),ye}();ne(eo,"propTypes",{"aria-label":vn.string,autoHeight:vn.bool,cellCount:vn.number.isRequired,cellLayoutManager:vn.object.isRequired,className:vn.string,height:vn.number.isRequired,id:vn.string,horizontalOverscanSize:vn.number.isRequired,isScrollingChange:vn.func,noContentRenderer:vn.func.isRequired,onScroll:vn.func.isRequired,onSectionRendered:vn.func.isRequired,scrollLeft:vn.number,scrollToAlignment:vn.oneOf(["auto","end","start","center"]).isRequired,scrollToCell:vn.number.isRequired,scrollTop:vn.number,style:vn.object,verticalOverscanSize:vn.number.isRequired,width:vn.number.isRequired}),ne(eo,"defaultProps",{"aria-label":"grid",horizontalOverscanSize:0,noContentRenderer:function(){return null},onScroll:function(){return null},onSectionRendered:function(){return null},scrollToAlignment:"auto",scrollToCell:-1,style:{},verticalOverscanSize:0}),pt(eo);var Ma=function(){function ye(U){var W=U.height,re=U.width,Pe=U.x,ze=U.y;Ve(this,ye),this.height=W,this.width=re,this.x=Pe,this.y=ze,this._indexMap={},this._indices=[]}return n(ye,"Section"),Me(ye,[{key:"addCellIndex",value:function(U){var W=U.index;this._indexMap[W]||(this._indexMap[W]=!0,this._indices.push(W))}},{key:"getCellIndices",value:function(){return this._indices}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y," ").concat(this.width,"x").concat(this.height)}}]),ye}(),Bs=function(){function ye(){var U=0<arguments.length&&arguments[0]!==void 0?arguments[0]:100;Ve(this,ye),this._sectionSize=U,this._cellMetadata=[],this._sections={}}return n(ye,"SectionManager"),Me(ye,[{key:"getCellIndices",value:function(U){var W=U.height,re=U.width,Pe=U.x,ze=U.y,Ne={};return this.getSections({height:W,width:re,x:Pe,y:ze}).forEach(function(lt){return lt.getCellIndices().forEach(function(Ct){Ne[Ct]=Ct})}),Object.keys(Ne).map(function(lt){return Ne[lt]})}},{key:"getCellMetadata",value:function(U){var W=U.index;return this._cellMetadata[W]}},{key:"getSections",value:function(U){for(var W=U.height,re=U.width,Pe=U.x,ze=U.y,Ne=Math.floor(Pe/this._sectionSize),lt=Math.floor((Pe+re-1)/this._sectionSize),Ct=Math.floor(ze/this._sectionSize),_t=Math.floor((ze+W-1)/this._sectionSize),Ft=[],Zt=Ne;Zt<=lt;Zt++)for(var un=Ct;un<=_t;un++){var Wn="".concat(Zt,".").concat(un);this._sections[Wn]||(this._sections[Wn]=new Ma({height:this._sectionSize,width:this._sectionSize,x:Zt*this._sectionSize,y:un*this._sectionSize})),Ft.push(this._sections[Wn])}return Ft}},{key:"getTotalSectionCount",value:function(){return Object.keys(this._sections).length}},{key:"toString",value:function(){var U=this;return Object.keys(this._sections).map(function(W){return U._sections[W].toString()})}},{key:"registerCell",value:function(U){var W=U.cellMetadatum,re=U.index;this._cellMetadata[re]=W,this.getSections(W).forEach(function(Pe){return Pe.addCellIndex({index:re})})}}]),ye}();function cs(ye){var U=ye.align,W=U===void 0?"auto":U,re=ye.cellOffset,Pe=ye.cellSize,ze=ye.containerSize,Ne=ye.currentOffset,lt=re,Ct=lt-ze+Pe;switch(W){case"start":return lt;case"end":return Ct;case"center":return lt-(ze-Pe)/2;default:return Math.max(Ct,Math.min(lt,Ne))}}n(cs,"getUpdatedOffsetForIndex");var A=function(){function ye(U,W){var re;return Ve(this,ye),(re=ve(this,de(ye).call(this,U,W)))._cellMetadata=[],re._lastRenderedCellIndices=[],re._cellCache=[],re._isScrollingChange=re._isScrollingChange.bind(q(re)),re._setCollectionViewRef=re._setCollectionViewRef.bind(q(re)),re}return n(ye,"Collection"),Se(ye,_e.PureComponent),Me(ye,[{key:"forceUpdate",value:function(){this._collectionView!==void 0&&this._collectionView.forceUpdate()}},{key:"recomputeCellSizesAndPositions",value:function(){this._cellCache=[],this._collectionView.recomputeCellSizesAndPositions()}},{key:"render",value:function(){var U=ce({},this.props);return _e.createElement(eo,ce({cellLayoutManager:this,isScrollingChange:this._isScrollingChange,ref:this._setCollectionViewRef},U))}},{key:"calculateSizeAndPositionData",value:function(){var U=this.props,W=function(re){for(var Pe=re.cellCount,ze=re.cellSizeAndPositionGetter,Ne=re.sectionSize,lt=[],Ct=new Bs(Ne),_t=0,Ft=0,Zt=0;Zt<Pe;Zt++){var un=ze({index:Zt});if(un.height==null||isNaN(un.height)||un.width==null||isNaN(un.width)||un.x==null||isNaN(un.x)||un.y==null||isNaN(un.y))throw Error("Invalid metadata returned for cell ".concat(Zt,`:
        x:`).concat(un.x,", y:").concat(un.y,", width:").concat(un.width,", height:").concat(un.height));_t=Math.max(_t,un.y+un.height),Ft=Math.max(Ft,un.x+un.width),lt[Zt]=un,Ct.registerCell({cellMetadatum:un,index:Zt})}return{cellMetadata:lt,height:_t,sectionManager:Ct,width:Ft}}({cellCount:U.cellCount,cellSizeAndPositionGetter:U.cellSizeAndPositionGetter,sectionSize:U.sectionSize});this._cellMetadata=W.cellMetadata,this._sectionManager=W.sectionManager,this._height=W.height,this._width=W.width}},{key:"getLastRenderedIndices",value:function(){return this._lastRenderedCellIndices}},{key:"getScrollPositionForCell",value:function(U){var W=U.align,re=U.cellIndex,Pe=U.height,ze=U.scrollLeft,Ne=U.scrollTop,lt=U.width,Ct=this.props.cellCount;if(0<=re&&re<Ct){var _t=this._cellMetadata[re];ze=cs({align:W,cellOffset:_t.x,cellSize:_t.width,containerSize:lt,currentOffset:ze,targetIndex:re}),Ne=cs({align:W,cellOffset:_t.y,cellSize:_t.height,containerSize:Pe,currentOffset:Ne,targetIndex:re})}return{scrollLeft:ze,scrollTop:Ne}}},{key:"getTotalSize",value:function(){return{height:this._height,width:this._width}}},{key:"cellRenderers",value:function(U){var W=this,re=U.height,Pe=U.isScrolling,ze=U.width,Ne=U.x,lt=U.y,Ct=this.props,_t=Ct.cellGroupRenderer,Ft=Ct.cellRenderer;return this._lastRenderedCellIndices=this._sectionManager.getCellIndices({height:re,width:ze,x:Ne,y:lt}),_t({cellCache:this._cellCache,cellRenderer:Ft,cellSizeAndPositionGetter:function(Zt){var un=Zt.index;return W._sectionManager.getCellMetadata({index:un})},indices:this._lastRenderedCellIndices,isScrolling:Pe})}},{key:"_isScrollingChange",value:function(U){U||(this._cellCache=[])}},{key:"_setCollectionViewRef",value:function(U){this._collectionView=U}}]),ye}();ne(A,"propTypes",{"aria-label":vn.string,cellCount:vn.number.isRequired,cellGroupRenderer:vn.func.isRequired,cellRenderer:vn.func.isRequired,cellSizeAndPositionGetter:vn.func.isRequired,sectionSize:vn.number}),ne(A,"defaultProps",{"aria-label":"grid",cellGroupRenderer:function(ye){var U=ye.cellCache,W=ye.cellRenderer,re=ye.cellSizeAndPositionGetter,Pe=ye.indices,ze=ye.isScrolling;return Pe.map(function(Ne){var lt=re({index:Ne}),Ct={index:Ne,isScrolling:ze,key:Ne,style:{height:lt.height,left:lt.x,position:"absolute",top:lt.y,width:lt.width}};return ze?(Ne in U||(U[Ne]=W(Ct)),U[Ne]):W(Ct)}).filter(function(Ne){return!!Ne})}});var E=function(){function ye(U,W){var re;return Ve(this,ye),(re=ve(this,de(ye).call(this,U,W)))._registerChild=re._registerChild.bind(q(re)),re}return n(ye,"ColumnSizer"),Se(ye,_e.PureComponent),Me(ye,[{key:"componentDidUpdate",value:function(U){var W=this.props,re=W.columnMaxWidth,Pe=W.columnMinWidth,ze=W.columnCount,Ne=W.width;re===U.columnMaxWidth&&Pe===U.columnMinWidth&&ze===U.columnCount&&Ne===U.width||this._registeredChild&&this._registeredChild.recomputeGridSize()}},{key:"render",value:function(){var U=this.props,W=U.children,re=U.columnMaxWidth,Pe=U.columnMinWidth,ze=U.columnCount,Ne=U.width,lt=Pe||1,Ct=re?Math.min(re,Ne):Ne,_t=Ne/ze;return _t=Math.max(lt,_t),_t=Math.min(Ct,_t),_t=Math.floor(_t),W({adjustedWidth:Math.min(Ne,_t*ze),columnWidth:_t,getColumnWidth:function(){return _t},registerChild:this._registerChild})}},{key:"_registerChild",value:function(U){if(U&&typeof U.recomputeGridSize!="function")throw Error("Unexpected child type registered; only Grid/MultiGrid children are supported.");this._registeredChild=U,this._registeredChild&&this._registeredChild.recomputeGridSize()}}]),ye}();function T(ye){var U=ye.cellCount,W=ye.cellSize,re=ye.computeMetadataCallback,Pe=ye.computeMetadataCallbackProps,ze=ye.nextCellsCount,Ne=ye.nextCellSize,lt=ye.nextScrollToIndex,Ct=ye.scrollToIndex,_t=ye.updateScrollOffsetForScrollToIndex;U===ze&&(typeof W!="number"&&typeof Ne!="number"||W===Ne)||(re(Pe),0<=Ct&&Ct===lt&&_t())}n(T,"calculateSizeAndPositionDataAndUpdateScrollOffset"),ne(E,"propTypes",{children:vn.func.isRequired,columnMaxWidth:vn.number,columnMinWidth:vn.number,columnCount:vn.number.isRequired,width:vn.number.isRequired});var P,z=function(){function ye(U){var W=U.cellCount,re=U.cellSizeGetter,Pe=U.estimatedCellSize;Ve(this,ye),ne(this,"_cellSizeAndPositionData",{}),ne(this,"_lastMeasuredIndex",-1),ne(this,"_lastBatchedIndex",-1),ne(this,"_cellCount",void 0),ne(this,"_cellSizeGetter",void 0),ne(this,"_estimatedCellSize",void 0),this._cellSizeGetter=re,this._cellCount=W,this._estimatedCellSize=Pe}return n(ye,"CellSizeAndPositionManager"),Me(ye,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(U){var W=U.cellCount,re=U.estimatedCellSize,Pe=U.cellSizeGetter;this._cellCount=W,this._estimatedCellSize=re,this._cellSizeGetter=Pe}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(U){if(U<0||U>=this._cellCount)throw Error("Requested index ".concat(U," is outside of range 0..").concat(this._cellCount));if(U>this._lastMeasuredIndex)for(var W=this.getSizeAndPositionOfLastMeasuredCell(),re=W.offset+W.size,Pe=this._lastMeasuredIndex+1;Pe<=U;Pe++){var ze=this._cellSizeGetter({index:Pe});if(ze===void 0||isNaN(ze))throw Error("Invalid size returned for cell ".concat(Pe," of value ").concat(ze));ze===null?(this._cellSizeAndPositionData[Pe]={offset:re,size:0},this._lastBatchedIndex=U):(this._cellSizeAndPositionData[Pe]={offset:re,size:ze},re+=ze,this._lastMeasuredIndex=U)}return this._cellSizeAndPositionData[U]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return 0<=this._lastMeasuredIndex?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var U=this.getSizeAndPositionOfLastMeasuredCell();return U.offset+U.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(U){var W=U.align,re=W===void 0?"auto":W,Pe=U.containerSize,ze=U.currentOffset,Ne=U.targetIndex;if(Pe<=0)return 0;var lt,Ct=this.getSizeAndPositionOfCell(Ne),_t=Ct.offset,Ft=_t-Pe+Ct.size;switch(re){case"start":lt=_t;break;case"end":lt=Ft;break;case"center":lt=_t-(Pe-Ct.size)/2;break;default:lt=Math.max(Ft,Math.min(_t,ze))}var Zt=this.getTotalSize();return Math.max(0,Math.min(Zt-Pe,lt))}},{key:"getVisibleCellRange",value:function(U){var W=U.containerSize,re=U.offset;if(this.getTotalSize()===0)return{};var Pe=re+W,ze=this._findNearestCell(re),Ne=this.getSizeAndPositionOfCell(ze);re=Ne.offset+Ne.size;for(var lt=ze;re<Pe&&lt<this._cellCount-1;)lt++,re+=this.getSizeAndPositionOfCell(lt).size;return{start:ze,stop:lt}}},{key:"resetCell",value:function(U){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,U-1)}},{key:"_binarySearch",value:function(U,W,re){for(;W<=U;){var Pe=W+Math.floor((U-W)/2),ze=this.getSizeAndPositionOfCell(Pe).offset;if(ze===re)return Pe;ze<re?W=Pe+1:re<ze&&(U=Pe-1)}return 0<W?W-1:0}},{key:"_exponentialSearch",value:function(U,W){for(var re=1;U<this._cellCount&&this.getSizeAndPositionOfCell(U).offset<W;)U+=re,re*=2;return this._binarySearch(Math.min(U,this._cellCount-1),Math.floor(U/2),W)}},{key:"_findNearestCell",value:function(U){if(isNaN(U))throw Error("Invalid offset ".concat(U," specified"));U=Math.max(0,U);var W=this.getSizeAndPositionOfLastMeasuredCell(),re=Math.max(0,this._lastMeasuredIndex);return W.offset>=U?this._binarySearch(re,0,U):this._exponentialSearch(re,U)}}]),ye}(),G=n(function(){return typeof X<"u"&&X.chrome?16777100:15e5},"getMaxElementSize"),ee=function(){function ye(U){var W=U.maxScrollSize,re=W===void 0?G():W,Pe=ae(U,["maxScrollSize"]);Ve(this,ye),ne(this,"_cellSizeAndPositionManager",void 0),ne(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new z(Pe),this._maxScrollSize=re}return n(ye,"ScalingCellSizeAndPositionManager"),Me(ye,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(U){this._cellSizeAndPositionManager.configure(U)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(U){var W=U.containerSize,re=U.offset,Pe=this._cellSizeAndPositionManager.getTotalSize(),ze=this.getTotalSize(),Ne=this._getOffsetPercentage({containerSize:W,offset:re,totalSize:ze});return Math.round(Ne*(ze-Pe))}},{key:"getSizeAndPositionOfCell",value:function(U){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(U)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(U){var W=U.align,re=W===void 0?"auto":W,Pe=U.containerSize,ze=U.currentOffset,Ne=U.targetIndex;ze=this._safeOffsetToOffset({containerSize:Pe,offset:ze});var lt=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:re,containerSize:Pe,currentOffset:ze,targetIndex:Ne});return this._offsetToSafeOffset({containerSize:Pe,offset:lt})}},{key:"getVisibleCellRange",value:function(U){var W=U.containerSize,re=U.offset;return re=this._safeOffsetToOffset({containerSize:W,offset:re}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:W,offset:re})}},{key:"resetCell",value:function(U){this._cellSizeAndPositionManager.resetCell(U)}},{key:"_getOffsetPercentage",value:function(U){var W=U.containerSize,re=U.offset,Pe=U.totalSize;return Pe<=W?0:re/(Pe-W)}},{key:"_offsetToSafeOffset",value:function(U){var W=U.containerSize,re=U.offset,Pe=this._cellSizeAndPositionManager.getTotalSize(),ze=this.getTotalSize();if(Pe===ze)return re;var Ne=this._getOffsetPercentage({containerSize:W,offset:re,totalSize:Pe});return Math.round(Ne*(ze-W))}},{key:"_safeOffsetToOffset",value:function(U){var W=U.containerSize,re=U.offset,Pe=this._cellSizeAndPositionManager.getTotalSize(),ze=this.getTotalSize();if(Pe===ze)return re;var Ne=this._getOffsetPercentage({containerSize:W,offset:re,totalSize:ze});return Math.round(Ne*(Pe-W))}}]),ye}();function Be(ye){var U=ye.cellCount,W=ye.overscanCellsCount,re=ye.scrollDirection,Pe=ye.startIndex,ze=ye.stopIndex;return re===1?{overscanStartIndex:Math.max(0,Pe),overscanStopIndex:Math.min(U-1,ze+W)}:{overscanStartIndex:Math.max(0,Pe-W),overscanStopIndex:Math.min(U-1,ze)}}n(Be,"defaultOverscanIndicesGetter");function Te(ye){var U=ye.cellSize,W=ye.cellSizeAndPositionManager,re=ye.previousCellsCount,Pe=ye.previousCellSize,ze=ye.previousScrollToAlignment,Ne=ye.previousScrollToIndex,lt=ye.previousSize,Ct=ye.scrollOffset,_t=ye.scrollToAlignment,Ft=ye.scrollToIndex,Zt=ye.size,un=ye.sizeJustIncreasedFromZero,Wn=ye.updateScrollIndexCallback,mn=W.getCellCount(),Mn=0<=Ft&&Ft<mn;Mn&&(Zt!==lt||un||!Pe||typeof U=="number"&&U!==Pe||_t!==ze||Ft!==Ne)?Wn(Ft):!Mn&&0<mn&&(Zt<lt||mn<re)&&Ct>W.getTotalSize()-Zt&&Wn(mn-1)}n(Te,"updateScrollIndexHelper");function qe(ye){for(var U=ye.cellCache,W=ye.cellRenderer,re=ye.columnSizeAndPositionManager,Pe=ye.columnStartIndex,ze=ye.columnStopIndex,Ne=ye.deferredMeasurementCache,lt=ye.horizontalOffsetAdjustment,Ct=ye.isScrolling,_t=ye.isScrollingOptOut,Ft=ye.parent,Zt=ye.rowSizeAndPositionManager,un=ye.rowStartIndex,Wn=ye.rowStopIndex,mn=ye.styleCache,Mn=ye.verticalOffsetAdjustment,$n=ye.visibleColumnIndices,ni=ye.visibleRowIndices,vi=[],Pi=re.areOffsetsAdjusted()||Zt.areOffsetsAdjusted(),kn=!Ct&&!Pi,ai=un;ai<=Wn;ai++)for(var An=Zt.getSizeAndPositionOfCell(ai),er=Pe;er<=ze;er++){var Br=re.getSizeAndPositionOfCell(er),vo=er>=$n.start&&er<=$n.stop&&ai>=ni.start&&ai<=ni.stop,Xo="".concat(ai,"-").concat(er),Qo=void 0;kn&&mn[Xo]?Qo=mn[Xo]:Ne&&!Ne.has(ai,er)?Qo={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(Qo={height:An.size,left:Br.offset+lt,position:"absolute",top:An.offset+Mn,width:Br.size},mn[Xo]=Qo);var na={columnIndex:er,isScrolling:Ct,isVisible:vo,key:Xo,parent:Ft,rowIndex:ai,style:Qo},ts=void 0;(ts=!_t&&!Ct||lt||Mn?W(na):(U[Xo]||(U[Xo]=W(na)),U[Xo]))!=null&&ts!==!1&&(Le(Ft,ts),vi.push(ts))}return vi}n(qe,"defaultCellRangeRenderer");function Le(ye,U){U&&(U.type&&U.type.__internalCellMeasurerFlag&&(U=U.props.children),U&&U.props&&U.props.style===void 0&&ye.__warnedAboutMissingStyle!==!0&&(ye.__warnedAboutMissingStyle=!0,tn.warn("Rendered cell should include style property for positioning.")))}n(Le,"warnAboutMissingStyle");var Fn=(P=typeof X<"u"?X:typeof Cc<"u"?Cc:{}).requestAnimationFrame||P.webkitRequestAnimationFrame||P.mozRequestAnimationFrame||P.oRequestAnimationFrame||P.msRequestAnimationFrame||function(ye){return P.setTimeout(ye,1e3/60)},Ei=P.cancelAnimationFrame||P.webkitCancelAnimationFrame||P.mozCancelAnimationFrame||P.oCancelAnimationFrame||P.msCancelAnimationFrame||function(ye){P.clearTimeout(ye)},Ki=Fn,Ji=Ei,Ci=n(function(ye){return Ji(ye.id)},"cancelAnimationTimeout"),nr=n(function(ye,U){var W;Promise.resolve().then(function(){W=Date.now()});var re={id:Ki(n(function Pe(){Date.now()-W>=U?ye.call():re.id=Ki(Pe)},"timeout"))};return re},"requestAnimationTimeout"),Oa="observed",If="requested",el=function(){function ye(U){var W;Ve(this,ye),ne(q(W=ve(this,de(ye).call(this,U))),"_onGridRenderedMemoizer",xn()),ne(q(W),"_onScrollMemoizer",xn(!1)),ne(q(W),"_deferredInvalidateColumnIndex",null),ne(q(W),"_deferredInvalidateRowIndex",null),ne(q(W),"_recomputeScrollLeftFlag",!1),ne(q(W),"_recomputeScrollTopFlag",!1),ne(q(W),"_horizontalScrollBarSize",0),ne(q(W),"_verticalScrollBarSize",0),ne(q(W),"_scrollbarPresenceChanged",!1),ne(q(W),"_scrollingContainer",void 0),ne(q(W),"_childrenToDisplay",void 0),ne(q(W),"_columnStartIndex",void 0),ne(q(W),"_columnStopIndex",void 0),ne(q(W),"_rowStartIndex",void 0),ne(q(W),"_rowStopIndex",void 0),ne(q(W),"_renderedColumnStartIndex",0),ne(q(W),"_renderedColumnStopIndex",0),ne(q(W),"_renderedRowStartIndex",0),ne(q(W),"_renderedRowStopIndex",0),ne(q(W),"_initialScrollTop",void 0),ne(q(W),"_initialScrollLeft",void 0),ne(q(W),"_disablePointerEventsTimeoutId",void 0),ne(q(W),"_styleCache",{}),ne(q(W),"_cellCache",{}),ne(q(W),"_debounceScrollEndedCallback",function(){W._disablePointerEventsTimeoutId=null,W.setState({isScrolling:!1,needToResetStyleCache:!1})}),ne(q(W),"_invokeOnGridRenderedHelper",function(){var ze=W.props.onSectionRendered;W._onGridRenderedMemoizer({callback:ze,indices:{columnOverscanStartIndex:W._columnStartIndex,columnOverscanStopIndex:W._columnStopIndex,columnStartIndex:W._renderedColumnStartIndex,columnStopIndex:W._renderedColumnStopIndex,rowOverscanStartIndex:W._rowStartIndex,rowOverscanStopIndex:W._rowStopIndex,rowStartIndex:W._renderedRowStartIndex,rowStopIndex:W._renderedRowStopIndex}})}),ne(q(W),"_setScrollingContainerRef",function(ze){W._scrollingContainer=ze}),ne(q(W),"_onScroll",function(ze){ze.target===W._scrollingContainer&&W.handleScrollEvent(ze.target)});var re=new ee({cellCount:U.columnCount,cellSizeGetter:function(ze){return ye._wrapSizeGetter(U.columnWidth)(ze)},estimatedCellSize:ye._getEstimatedColumnSize(U)}),Pe=new ee({cellCount:U.rowCount,cellSizeGetter:function(ze){return ye._wrapSizeGetter(U.rowHeight)(ze)},estimatedCellSize:ye._getEstimatedRowSize(U)});return W.state={instanceProps:{columnSizeAndPositionManager:re,rowSizeAndPositionManager:Pe,prevColumnWidth:U.columnWidth,prevRowHeight:U.rowHeight,prevColumnCount:U.columnCount,prevRowCount:U.rowCount,prevIsScrolling:U.isScrolling===!0,prevScrollToColumn:U.scrollToColumn,prevScrollToRow:U.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:1,scrollDirectionVertical:1,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},0<U.scrollToRow&&(W._initialScrollTop=W._getCalculatedScrollTop(U,W.state)),0<U.scrollToColumn&&(W._initialScrollLeft=W._getCalculatedScrollLeft(U,W.state)),W}return n(ye,"Grid"),Se(ye,_e.PureComponent),Me(ye,[{key:"getOffsetForCell",value:function(U){var W=0<arguments.length&&U!==void 0?U:{},re=W.alignment,Pe=re===void 0?this.props.scrollToAlignment:re,ze=W.columnIndex,Ne=ze===void 0?this.props.scrollToColumn:ze,lt=W.rowIndex,Ct=lt===void 0?this.props.scrollToRow:lt,_t=te({},this.props,{scrollToAlignment:Pe,scrollToColumn:Ne,scrollToRow:Ct});return{scrollLeft:this._getCalculatedScrollLeft(_t),scrollTop:this._getCalculatedScrollTop(_t)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(U){var W=U.scrollLeft,re=W===void 0?0:W,Pe=U.scrollTop,ze=Pe===void 0?0:Pe;if(!(ze<0)){this._debounceScrollEnded();var Ne=this.props,lt=Ne.autoHeight,Ct=Ne.autoWidth,_t=Ne.height,Ft=Ne.width,Zt=this.state.instanceProps,un=Zt.scrollbarSize,Wn=Zt.rowSizeAndPositionManager.getTotalSize(),mn=Zt.columnSizeAndPositionManager.getTotalSize(),Mn=Math.min(Math.max(0,mn-Ft+un),re),$n=Math.min(Math.max(0,Wn-_t+un),ze);if(this.state.scrollLeft!==Mn||this.state.scrollTop!==$n){var ni={isScrolling:!0,scrollDirectionHorizontal:Mn!==this.state.scrollLeft?Mn>this.state.scrollLeft?1:-1:this.state.scrollDirectionHorizontal,scrollDirectionVertical:$n!==this.state.scrollTop?$n>this.state.scrollTop?1:-1:this.state.scrollDirectionVertical,scrollPositionChangeReason:Oa};lt||(ni.scrollTop=$n),Ct||(ni.scrollLeft=Mn),ni.needToResetStyleCache=!1,this.setState(ni)}this._invokeOnScrollMemoizer({scrollLeft:Mn,scrollTop:$n,totalColumnsWidth:mn,totalRowsHeight:Wn})}}},{key:"invalidateCellSizeAfterRender",value:function(U){var W=U.columnIndex,re=U.rowIndex;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,W):W,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,re):re}},{key:"measureAllCells",value:function(){var U=this.props,W=U.columnCount,re=U.rowCount,Pe=this.state.instanceProps;Pe.columnSizeAndPositionManager.getSizeAndPositionOfCell(W-1),Pe.rowSizeAndPositionManager.getSizeAndPositionOfCell(re-1)}},{key:"recomputeGridSize",value:function(U){var W=0<arguments.length&&U!==void 0?U:{},re=W.columnIndex,Pe=re===void 0?0:re,ze=W.rowIndex,Ne=ze===void 0?0:ze,lt=this.props,Ct=lt.scrollToColumn,_t=lt.scrollToRow,Ft=this.state.instanceProps;Ft.columnSizeAndPositionManager.resetCell(Pe),Ft.rowSizeAndPositionManager.resetCell(Ne),this._recomputeScrollLeftFlag=0<=Ct&&(this.state.scrollDirectionHorizontal===1?Pe<=Ct:Ct<=Pe),this._recomputeScrollTopFlag=0<=_t&&(this.state.scrollDirectionVertical===1?Ne<=_t:_t<=Ne),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(U){var W=U.columnIndex,re=U.rowIndex,Pe=this.props.columnCount,ze=this.props;1<Pe&&W!==void 0&&this._updateScrollLeftForScrollToColumn(te({},ze,{scrollToColumn:W})),re!==void 0&&this._updateScrollTopForScrollToRow(te({},ze,{scrollToRow:re}))}},{key:"componentDidMount",value:function(){var U=this.props,W=U.getScrollbarSize,re=U.height,Pe=U.scrollLeft,ze=U.scrollToColumn,Ne=U.scrollTop,lt=U.scrollToRow,Ct=U.width,_t=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),_t.scrollbarSizeMeasured||this.setState(function(un){var Wn=te({},un,{needToResetStyleCache:!1});return Wn.instanceProps.scrollbarSize=W(),Wn.instanceProps.scrollbarSizeMeasured=!0,Wn}),typeof Pe=="number"&&0<=Pe||typeof Ne=="number"&&0<=Ne){var Ft=ye._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:Pe,scrollTop:Ne});Ft&&(Ft.needToResetStyleCache=!1,this.setState(Ft))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var Zt=0<re&&0<Ct;0<=ze&&Zt&&this._updateScrollLeftForScrollToColumn(),0<=lt&&Zt&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:Pe||0,scrollTop:Ne||0,totalColumnsWidth:_t.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:_t.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(U,W){var re=this,Pe=this.props,ze=Pe.autoHeight,Ne=Pe.autoWidth,lt=Pe.columnCount,Ct=Pe.height,_t=Pe.rowCount,Ft=Pe.scrollToAlignment,Zt=Pe.scrollToColumn,un=Pe.scrollToRow,Wn=Pe.width,mn=this.state,Mn=mn.scrollLeft,$n=mn.scrollPositionChangeReason,ni=mn.scrollTop,vi=mn.instanceProps;this._handleInvalidatedGridSize();var Pi=0<lt&&U.columnCount===0||0<_t&&U.rowCount===0;$n===If&&(!Ne&&0<=Mn&&(Mn!==this._scrollingContainer.scrollLeft||Pi)&&(this._scrollingContainer.scrollLeft=Mn),!ze&&0<=ni&&(ni!==this._scrollingContainer.scrollTop||Pi)&&(this._scrollingContainer.scrollTop=ni));var kn=(U.width===0||U.height===0)&&0<Ct&&0<Wn;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):Te({cellSizeAndPositionManager:vi.columnSizeAndPositionManager,previousCellsCount:U.columnCount,previousCellSize:U.columnWidth,previousScrollToAlignment:U.scrollToAlignment,previousScrollToIndex:U.scrollToColumn,previousSize:U.width,scrollOffset:Mn,scrollToAlignment:Ft,scrollToIndex:Zt,size:Wn,sizeJustIncreasedFromZero:kn,updateScrollIndexCallback:function(){return re._updateScrollLeftForScrollToColumn(re.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):Te({cellSizeAndPositionManager:vi.rowSizeAndPositionManager,previousCellsCount:U.rowCount,previousCellSize:U.rowHeight,previousScrollToAlignment:U.scrollToAlignment,previousScrollToIndex:U.scrollToRow,previousSize:U.height,scrollOffset:ni,scrollToAlignment:Ft,scrollToIndex:un,size:Ct,sizeJustIncreasedFromZero:kn,updateScrollIndexCallback:function(){return re._updateScrollTopForScrollToRow(re.props)}}),this._invokeOnGridRenderedHelper(),Mn!==W.scrollLeft||ni!==W.scrollTop){var ai=vi.rowSizeAndPositionManager.getTotalSize(),An=vi.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:Mn,scrollTop:ni,totalColumnsWidth:An,totalRowsHeight:ai})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&Ci(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var U=this.props,W=U.autoContainerWidth,re=U.autoHeight,Pe=U.autoWidth,ze=U.className,Ne=U.containerProps,lt=U.containerRole,Ct=U.containerStyle,_t=U.height,Ft=U.id,Zt=U.noContentRenderer,un=U.role,Wn=U.style,mn=U.tabIndex,Mn=U.width,$n=this.state,ni=$n.instanceProps,vi=$n.needToResetStyleCache,Pi=this._isScrolling(),kn={boxSizing:"border-box",direction:"ltr",height:re?"auto":_t,position:"relative",width:Pe?"auto":Mn,WebkitOverflowScrolling:"touch",willChange:"transform"};vi&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var ai=ni.columnSizeAndPositionManager.getTotalSize(),An=ni.rowSizeAndPositionManager.getTotalSize(),er=_t<An?ni.scrollbarSize:0,Br=Mn<ai?ni.scrollbarSize:0;Br===this._horizontalScrollBarSize&&er===this._verticalScrollBarSize||(this._horizontalScrollBarSize=Br,this._verticalScrollBarSize=er,this._scrollbarPresenceChanged=!0),kn.overflowX=ai+er<=Mn?"hidden":"auto",kn.overflowY=An+Br<=_t?"hidden":"auto";var vo=this._childrenToDisplay,Xo=vo.length===0&&0<_t&&0<Mn;return _e.createElement("div",ce({ref:this._setScrollingContainerRef},Ne,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:wn("ReactVirtualized__Grid",ze),id:Ft,onScroll:this._onScroll,role:un,style:te({},kn,{},Wn),tabIndex:mn}),0<vo.length&&_e.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:lt,style:te({width:W?"auto":ai,height:An,maxWidth:ai,maxHeight:An,overflow:"hidden",pointerEvents:Pi?"none":"",position:"relative"},Ct)},vo),Xo&&Zt())}},{key:"_calculateChildrenToRender",value:function(U,W){var re=0<arguments.length&&U!==void 0?U:this.props,Pe=1<arguments.length&&W!==void 0?W:this.state,ze=re.cellRenderer,Ne=re.cellRangeRenderer,lt=re.columnCount,Ct=re.deferredMeasurementCache,_t=re.height,Ft=re.overscanColumnCount,Zt=re.overscanIndicesGetter,un=re.overscanRowCount,Wn=re.rowCount,mn=re.width,Mn=re.isScrollingOptOut,$n=Pe.scrollDirectionHorizontal,ni=Pe.scrollDirectionVertical,vi=Pe.instanceProps,Pi=0<this._initialScrollTop?this._initialScrollTop:Pe.scrollTop,kn=0<this._initialScrollLeft?this._initialScrollLeft:Pe.scrollLeft,ai=this._isScrolling(re,Pe);if(this._childrenToDisplay=[],0<_t&&0<mn){var An=vi.columnSizeAndPositionManager.getVisibleCellRange({containerSize:mn,offset:kn}),er=vi.rowSizeAndPositionManager.getVisibleCellRange({containerSize:_t,offset:Pi}),Br=vi.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:mn,offset:kn}),vo=vi.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:_t,offset:Pi});this._renderedColumnStartIndex=An.start,this._renderedColumnStopIndex=An.stop,this._renderedRowStartIndex=er.start,this._renderedRowStopIndex=er.stop;var Xo=Zt({direction:"horizontal",cellCount:lt,overscanCellsCount:Ft,scrollDirection:$n,startIndex:typeof An.start=="number"?An.start:0,stopIndex:typeof An.stop=="number"?An.stop:-1}),Qo=Zt({direction:"vertical",cellCount:Wn,overscanCellsCount:un,scrollDirection:ni,startIndex:typeof er.start=="number"?er.start:0,stopIndex:typeof er.stop=="number"?er.stop:-1}),na=Xo.overscanStartIndex,ts=Xo.overscanStopIndex,ds=Qo.overscanStartIndex,ws=Qo.overscanStopIndex;if(Ct){if(!Ct.hasFixedHeight()){for(var Zu=ds;Zu<=ws;Zu++)if(!Ct.has(Zu,0)){na=0,ts=lt-1;break}}if(!Ct.hasFixedWidth()){for(var qu=na;qu<=ts;qu++)if(!Ct.has(0,qu)){ds=0,ws=Wn-1;break}}}this._childrenToDisplay=Ne({cellCache:this._cellCache,cellRenderer:ze,columnSizeAndPositionManager:vi.columnSizeAndPositionManager,columnStartIndex:na,columnStopIndex:ts,deferredMeasurementCache:Ct,horizontalOffsetAdjustment:Br,isScrolling:ai,isScrollingOptOut:Mn,parent:this,rowSizeAndPositionManager:vi.rowSizeAndPositionManager,rowStartIndex:ds,rowStopIndex:ws,scrollLeft:kn,scrollTop:Pi,styleCache:this._styleCache,verticalOffsetAdjustment:vo,visibleColumnIndices:An,visibleRowIndices:er}),this._columnStartIndex=na,this._columnStopIndex=ts,this._rowStartIndex=ds,this._rowStopIndex=ws}}},{key:"_debounceScrollEnded",value:function(){var U=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&Ci(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=nr(this._debounceScrollEndedCallback,U)}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"&&typeof this._deferredInvalidateRowIndex=="number"){var U=this._deferredInvalidateColumnIndex,W=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:U,rowIndex:W})}}},{key:"_invokeOnScrollMemoizer",value:function(U){var W=this,re=U.scrollLeft,Pe=U.scrollTop,ze=U.totalColumnsWidth,Ne=U.totalRowsHeight;this._onScrollMemoizer({callback:function(lt){var Ct=lt.scrollLeft,_t=lt.scrollTop,Ft=W.props,Zt=Ft.height;(0,Ft.onScroll)({clientHeight:Zt,clientWidth:Ft.width,scrollHeight:Ne,scrollLeft:Ct,scrollTop:_t,scrollWidth:ze})},indices:{scrollLeft:re,scrollTop:Pe}})}},{key:"_isScrolling",value:function(U,W){var re=0<arguments.length&&U!==void 0?U:this.props,Pe=1<arguments.length&&W!==void 0?W:this.state;return Object.hasOwnProperty.call(re,"isScrolling")?Boolean(re.isScrolling):Boolean(Pe.isScrolling)}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var U=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,U({horizontal:0<this._horizontalScrollBarSize,size:this.state.instanceProps.scrollbarSize,vertical:0<this._verticalScrollBarSize})}}},{key:"scrollToPosition",value:function(U){var W=U.scrollLeft,re=U.scrollTop,Pe=ye._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:W,scrollTop:re});Pe&&(Pe.needToResetStyleCache=!1,this.setState(Pe))}},{key:"_getCalculatedScrollLeft",value:function(U,W){var re=0<arguments.length&&U!==void 0?U:this.props,Pe=1<arguments.length&&W!==void 0?W:this.state;return ye._getCalculatedScrollLeft(re,Pe)}},{key:"_updateScrollLeftForScrollToColumn",value:function(U,W){var re=0<arguments.length&&U!==void 0?U:this.props,Pe=1<arguments.length&&W!==void 0?W:this.state,ze=ye._getScrollLeftForScrollToColumnStateUpdate(re,Pe);ze&&(ze.needToResetStyleCache=!1,this.setState(ze))}},{key:"_getCalculatedScrollTop",value:function(U,W){var re=0<arguments.length&&U!==void 0?U:this.props,Pe=1<arguments.length&&W!==void 0?W:this.state;return ye._getCalculatedScrollTop(re,Pe)}},{key:"_resetStyleCache",value:function(){var U=this._styleCache,W=this._cellCache,re=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var Pe=this._rowStartIndex;Pe<=this._rowStopIndex;Pe++)for(var ze=this._columnStartIndex;ze<=this._columnStopIndex;ze++){var Ne="".concat(Pe,"-").concat(ze);this._styleCache[Ne]=U[Ne],re&&(this._cellCache[Ne]=W[Ne])}}},{key:"_updateScrollTopForScrollToRow",value:function(U,W){var re=0<arguments.length&&U!==void 0?U:this.props,Pe=1<arguments.length&&W!==void 0?W:this.state,ze=ye._getScrollTopForScrollToRowStateUpdate(re,Pe);ze&&(ze.needToResetStyleCache=!1,this.setState(ze))}}],[{key:"getDerivedStateFromProps",value:function(U,W){var re={};U.columnCount===0&&W.scrollLeft!==0||U.rowCount===0&&W.scrollTop!==0?(re.scrollLeft=0,re.scrollTop=0):(U.scrollLeft!==W.scrollLeft&&U.scrollToColumn<0||U.scrollTop!==W.scrollTop&&U.scrollToRow<0)&&Object.assign(re,ye._getScrollToPositionStateUpdate({prevState:W,scrollLeft:U.scrollLeft,scrollTop:U.scrollTop}));var Pe,ze,Ne=W.instanceProps;return re.needToResetStyleCache=!1,U.columnWidth===Ne.prevColumnWidth&&U.rowHeight===Ne.prevRowHeight||(re.needToResetStyleCache=!0),Ne.columnSizeAndPositionManager.configure({cellCount:U.columnCount,estimatedCellSize:ye._getEstimatedColumnSize(U),cellSizeGetter:ye._wrapSizeGetter(U.columnWidth)}),Ne.rowSizeAndPositionManager.configure({cellCount:U.rowCount,estimatedCellSize:ye._getEstimatedRowSize(U),cellSizeGetter:ye._wrapSizeGetter(U.rowHeight)}),Ne.prevColumnCount!==0&&Ne.prevRowCount!==0||(Ne.prevColumnCount=0,Ne.prevRowCount=0),U.autoHeight&&U.isScrolling===!1&&Ne.prevIsScrolling===!0&&Object.assign(re,{isScrolling:!1}),T({cellCount:Ne.prevColumnCount,cellSize:typeof Ne.prevColumnWidth=="number"?Ne.prevColumnWidth:null,computeMetadataCallback:function(){return Ne.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:U,nextCellsCount:U.columnCount,nextCellSize:typeof U.columnWidth=="number"?U.columnWidth:null,nextScrollToIndex:U.scrollToColumn,scrollToIndex:Ne.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){Pe=ye._getScrollLeftForScrollToColumnStateUpdate(U,W)}}),T({cellCount:Ne.prevRowCount,cellSize:typeof Ne.prevRowHeight=="number"?Ne.prevRowHeight:null,computeMetadataCallback:function(){return Ne.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:U,nextCellsCount:U.rowCount,nextCellSize:typeof U.rowHeight=="number"?U.rowHeight:null,nextScrollToIndex:U.scrollToRow,scrollToIndex:Ne.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){ze=ye._getScrollTopForScrollToRowStateUpdate(U,W)}}),Ne.prevColumnCount=U.columnCount,Ne.prevColumnWidth=U.columnWidth,Ne.prevIsScrolling=U.isScrolling===!0,Ne.prevRowCount=U.rowCount,Ne.prevRowHeight=U.rowHeight,Ne.prevScrollToColumn=U.scrollToColumn,Ne.prevScrollToRow=U.scrollToRow,Ne.scrollbarSize=U.getScrollbarSize(),Ne.scrollbarSize===void 0?(Ne.scrollbarSizeMeasured=!1,Ne.scrollbarSize=0):Ne.scrollbarSizeMeasured=!0,re.instanceProps=Ne,te({},re,{},Pe,{},ze)}},{key:"_getEstimatedColumnSize",value:function(U){return typeof U.columnWidth=="number"?U.columnWidth:U.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(U){return typeof U.rowHeight=="number"?U.rowHeight:U.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(U){var W=U.prevState,re=U.scrollLeft,Pe=U.scrollTop,ze={scrollPositionChangeReason:If};return typeof re=="number"&&0<=re&&(ze.scrollDirectionHorizontal=re>W.scrollLeft?1:-1,ze.scrollLeft=re),typeof Pe=="number"&&0<=Pe&&(ze.scrollDirectionVertical=Pe>W.scrollTop?1:-1,ze.scrollTop=Pe),typeof re=="number"&&0<=re&&re!==W.scrollLeft||typeof Pe=="number"&&0<=Pe&&Pe!==W.scrollTop?ze:{}}},{key:"_wrapSizeGetter",value:function(U){return typeof U=="function"?U:function(){return U}}},{key:"_getCalculatedScrollLeft",value:function(U,W){var re=U.columnCount,Pe=U.height,ze=U.scrollToAlignment,Ne=U.scrollToColumn,lt=U.width,Ct=W.scrollLeft,_t=W.instanceProps;if(0<re){var Ft=re-1,Zt=Ne<0?Ft:Math.min(Ft,Ne),un=_t.rowSizeAndPositionManager.getTotalSize(),Wn=_t.scrollbarSizeMeasured&&Pe<un?_t.scrollbarSize:0;return _t.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:ze,containerSize:lt-Wn,currentOffset:Ct,targetIndex:Zt})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(U,W){var re=W.scrollLeft,Pe=ye._getCalculatedScrollLeft(U,W);return typeof Pe=="number"&&0<=Pe&&re!==Pe?ye._getScrollToPositionStateUpdate({prevState:W,scrollLeft:Pe,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(U,W){var re=U.height,Pe=U.rowCount,ze=U.scrollToAlignment,Ne=U.scrollToRow,lt=U.width,Ct=W.scrollTop,_t=W.instanceProps;if(0<Pe){var Ft=Pe-1,Zt=Ne<0?Ft:Math.min(Ft,Ne),un=_t.columnSizeAndPositionManager.getTotalSize(),Wn=_t.scrollbarSizeMeasured&&lt<un?_t.scrollbarSize:0;return _t.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:ze,containerSize:re-Wn,currentOffset:Ct,targetIndex:Zt})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(U,W){var re=W.scrollTop,Pe=ye._getCalculatedScrollTop(U,W);return typeof Pe=="number"&&0<=Pe&&re!==Pe?ye._getScrollToPositionStateUpdate({prevState:W,scrollLeft:-1,scrollTop:Pe}):{}}}]),ye}();ne(el,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:qe,containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:Ri,noContentRenderer:function(){return null},onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:Be,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:150,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1}),pt(el);function Ku(ye){var U=ye.cellCount,W=ye.overscanCellsCount,re=ye.scrollDirection,Pe=ye.startIndex,ze=ye.stopIndex;return W=Math.max(1,W),re===1?{overscanStartIndex:Math.max(0,Pe-1),overscanStopIndex:Math.min(U-1,ze+W)}:{overscanStartIndex:Math.max(0,Pe-W),overscanStopIndex:Math.min(U-1,ze+1)}}n(Ku,"defaultOverscanIndicesGetter$1");var ug=function(){function ye(U,W){var re;return Ve(this,ye),(re=ve(this,de(ye).call(this,U,W)))._loadMoreRowsMemoizer=xn(),re._onRowsRendered=re._onRowsRendered.bind(q(re)),re._registerChild=re._registerChild.bind(q(re)),re}return n(ye,"InfiniteLoader"),Se(ye,_e.PureComponent),Me(ye,[{key:"resetLoadMoreRowsCache",value:function(U){this._loadMoreRowsMemoizer=xn(),U&&this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"render",value:function(){return(0,this.props.children)({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})}},{key:"_loadUnloadedRanges",value:function(U){var W=this,re=this.props.loadMoreRows;U.forEach(function(Pe){var ze=re(Pe);ze&&ze.then(function(){(function(Ne){var lt=Ne.lastRenderedStartIndex,Ct=Ne.lastRenderedStopIndex,_t=Ne.startIndex,Ft=Ne.stopIndex;return!(Ct<_t||Ft<lt)})({lastRenderedStartIndex:W._lastRenderedStartIndex,lastRenderedStopIndex:W._lastRenderedStopIndex,startIndex:Pe.startIndex,stopIndex:Pe.stopIndex})&&W._registeredChild&&function(Ne){var lt=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,Ct=typeof Ne.recomputeGridSize=="function"?Ne.recomputeGridSize:Ne.recomputeRowHeights;Ct?Ct.call(Ne,lt):Ne.forceUpdate()}(W._registeredChild,W._lastRenderedStartIndex)})})}},{key:"_onRowsRendered",value:function(U){var W=U.startIndex,re=U.stopIndex;this._lastRenderedStartIndex=W,this._lastRenderedStopIndex=re,this._doStuff(W,re)}},{key:"_doStuff",value:function(U,W){var re,Pe=this,ze=this.props,Ne=ze.isRowLoaded,lt=ze.minimumBatchSize,Ct=ze.rowCount,_t=ze.threshold,Ft=function(un){for(var Wn=un.isRowLoaded,mn=un.minimumBatchSize,Mn=un.rowCount,$n=un.startIndex,ni=un.stopIndex,vi=[],Pi=null,kn=null,ai=$n;ai<=ni;ai++)Wn({index:ai})?kn!==null&&(vi.push({startIndex:Pi,stopIndex:kn}),Pi=kn=null):(kn=ai,Pi===null&&(Pi=ai));if(kn!==null){for(var An=Math.min(Math.max(kn,Pi+mn-1),Mn-1),er=kn+1;er<=An&&!Wn({index:er});er++)kn=er;vi.push({startIndex:Pi,stopIndex:kn})}if(vi.length)for(var Br=vi[0];Br.stopIndex-Br.startIndex+1<mn&&0<Br.startIndex;){var vo=Br.startIndex-1;if(Wn({index:vo}))break;Br.startIndex=vo}return vi}({isRowLoaded:Ne,minimumBatchSize:lt,rowCount:Ct,startIndex:Math.max(0,U-_t),stopIndex:Math.min(Ct-1,W+_t)}),Zt=(re=[]).concat.apply(re,Ce(Ft.map(function(un){return[un.startIndex,un.stopIndex]})));this._loadMoreRowsMemoizer({callback:function(){Pe._loadUnloadedRanges(Ft)},indices:{squashedUnloadedRanges:Zt}})}},{key:"_registerChild",value:function(U){this._registeredChild=U}}]),ye}();ne(ug,"propTypes",{children:vn.func.isRequired,isRowLoaded:vn.func.isRequired,loadMoreRows:vn.func.isRequired,minimumBatchSize:vn.number.isRequired,rowCount:vn.number.isRequired,threshold:vn.number.isRequired}),ne(ug,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15});var Hg=function(){function ye(){var U,W;Ve(this,ye);for(var re=arguments.length,Pe=new Array(re),ze=0;ze<re;ze++)Pe[ze]=arguments[ze];return ne(q(W=ve(this,(U=de(ye)).call.apply(U,[this].concat(Pe)))),"Grid",void 0),ne(q(W),"_cellRenderer",function(Ne){var lt=Ne.parent,Ct=Ne.rowIndex,_t=Ne.style,Ft=Ne.isScrolling,Zt=Ne.isVisible,un=Ne.key,Wn=W.props.rowRenderer,mn=Object.getOwnPropertyDescriptor(_t,"width");return mn&&mn.writable&&(_t.width="100%"),Wn({index:Ct,style:_t,isScrolling:Ft,isVisible:Zt,key:un,parent:lt})}),ne(q(W),"_setRef",function(Ne){W.Grid=Ne}),ne(q(W),"_onScroll",function(Ne){var lt=Ne.clientHeight,Ct=Ne.scrollHeight,_t=Ne.scrollTop;(0,W.props.onScroll)({clientHeight:lt,scrollHeight:Ct,scrollTop:_t})}),ne(q(W),"_onSectionRendered",function(Ne){var lt=Ne.rowOverscanStartIndex,Ct=Ne.rowOverscanStopIndex,_t=Ne.rowStartIndex,Ft=Ne.rowStopIndex;(0,W.props.onRowsRendered)({overscanStartIndex:lt,overscanStopIndex:Ct,startIndex:_t,stopIndex:Ft})}),W}return n(ye,"List"),Se(ye,_e.PureComponent),Me(ye,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(U){var W=U.alignment,re=U.index;return this.Grid?this.Grid.getOffsetForCell({alignment:W,rowIndex:re,columnIndex:0}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(U){var W=U.columnIndex,re=U.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:re,columnIndex:W})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(U){var W=0<arguments.length&&U!==void 0?U:{},re=W.columnIndex,Pe=re===void 0?0:re,ze=W.rowIndex,Ne=ze===void 0?0:ze;this.Grid&&this.Grid.recomputeGridSize({rowIndex:Ne,columnIndex:Pe})}},{key:"recomputeRowHeights",value:function(U){var W=0<arguments.length&&U!==void 0?U:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:W,columnIndex:0})}},{key:"scrollToPosition",value:function(U){var W=0<arguments.length&&U!==void 0?U:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:W})}},{key:"scrollToRow",value:function(U){var W=0<arguments.length&&U!==void 0?U:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:W})}},{key:"render",value:function(){var U=this.props,W=U.className,re=U.noRowsRenderer,Pe=U.scrollToIndex,ze=U.width,Ne=wn("ReactVirtualized__List",W);return _e.createElement(el,ce({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:Ne,columnWidth:ze,columnCount:1,noContentRenderer:re,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:Pe}))}}]),ye}();ne(Hg,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:Ku,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});var Of={ge:function(ye,U,W,re,Pe){return typeof W=="function"?function(ze,Ne,lt,Ct,_t){for(var Ft=lt+1;Ne<=lt;){var Zt=Ne+lt>>>1;0<=_t(ze[Zt],Ct)?lt=(Ft=Zt)-1:Ne=1+Zt}return Ft}(ye,re===void 0?0:0|re,Pe===void 0?ye.length-1:0|Pe,U,W):function(ze,Ne,lt,Ct){for(var _t=lt+1;Ne<=lt;){var Ft=Ne+lt>>>1;Ct<=ze[Ft]?lt=(_t=Ft)-1:Ne=1+Ft}return _t}(ye,W===void 0?0:0|W,re===void 0?ye.length-1:0|re,U)},gt:function(ye,U,W,re,Pe){return typeof W=="function"?function(ze,Ne,lt,Ct,_t){for(var Ft=lt+1;Ne<=lt;){var Zt=Ne+lt>>>1;0<_t(ze[Zt],Ct)?lt=(Ft=Zt)-1:Ne=1+Zt}return Ft}(ye,re===void 0?0:0|re,Pe===void 0?ye.length-1:0|Pe,U,W):function(ze,Ne,lt,Ct){for(var _t=lt+1;Ne<=lt;){var Ft=Ne+lt>>>1;Ct<ze[Ft]?lt=(_t=Ft)-1:Ne=1+Ft}return _t}(ye,W===void 0?0:0|W,re===void 0?ye.length-1:0|re,U)},lt:function(ye,U,W,re,Pe){return typeof W=="function"?function(ze,Ne,lt,Ct,_t){for(var Ft=Ne-1;Ne<=lt;){var Zt=Ne+lt>>>1;_t(ze[Zt],Ct)<0?Ne=1+(Ft=Zt):lt=Zt-1}return Ft}(ye,re===void 0?0:0|re,Pe===void 0?ye.length-1:0|Pe,U,W):function(ze,Ne,lt,Ct){for(var _t=Ne-1;Ne<=lt;){var Ft=Ne+lt>>>1;ze[Ft]<Ct?Ne=1+(_t=Ft):lt=Ft-1}return _t}(ye,W===void 0?0:0|W,re===void 0?ye.length-1:0|re,U)},le:function(ye,U,W,re,Pe){return typeof W=="function"?function(ze,Ne,lt,Ct,_t){for(var Ft=Ne-1;Ne<=lt;){var Zt=Ne+lt>>>1;_t(ze[Zt],Ct)<=0?Ne=1+(Ft=Zt):lt=Zt-1}return Ft}(ye,re===void 0?0:0|re,Pe===void 0?ye.length-1:0|Pe,U,W):function(ze,Ne,lt,Ct){for(var _t=Ne-1;Ne<=lt;){var Ft=Ne+lt>>>1;ze[Ft]<=Ct?Ne=1+(_t=Ft):lt=Ft-1}return _t}(ye,W===void 0?0:0|W,re===void 0?ye.length-1:0|re,U)},eq:function(ye,U,W,re,Pe){return typeof W=="function"?function(ze,Ne,lt,Ct,_t){for(;Ne<=lt;){var Ft=Ne+lt>>>1,Zt=_t(ze[Ft],Ct);if(Zt===0)return Ft;Zt<=0?Ne=1+Ft:lt=Ft-1}return-1}(ye,re===void 0?0:0|re,Pe===void 0?ye.length-1:0|Pe,U,W):function(ze,Ne,lt,Ct){for(;Ne<=lt;){var _t=Ne+lt>>>1,Ft=ze[_t];if(Ft===Ct)return _t;Ft<=Ct?Ne=1+_t:lt=_t-1}return-1}(ye,W===void 0?0:0|W,re===void 0?ye.length-1:0|re,U)}};function dg(ye,U,W,re,Pe){this.mid=ye,this.left=U,this.right=W,this.leftPoints=re,this.rightPoints=Pe,this.count=(U?U.count:0)+(W?W.count:0)+re.length}n(dg,"IntervalTreeNode");var Ju=dg.prototype;function fg(ye,U){ye.mid=U.mid,ye.left=U.left,ye.right=U.right,ye.leftPoints=U.leftPoints,ye.rightPoints=U.rightPoints,ye.count=U.count}n(fg,"copy");function jg(ye,U){var W=uu(U);ye.mid=W.mid,ye.left=W.left,ye.right=W.right,ye.leftPoints=W.leftPoints,ye.rightPoints=W.rightPoints,ye.count=W.count}n(jg,"rebuild");function Wg(ye,U){var W=ye.intervals([]);W.push(U),jg(ye,W)}n(Wg,"rebuildWithInterval");function zg(ye,U){var W=ye.intervals([]),re=W.indexOf(U);return re<0?0:(W.splice(re,1),jg(ye,W),1)}n(zg,"rebuildWithoutInterval");function Gg(ye,U,W){for(var re=0;re<ye.length&&ye[re][0]<=U;++re){var Pe=W(ye[re]);if(Pe)return Pe}}n(Gg,"reportLeftRange");function $g(ye,U,W){for(var re=ye.length-1;0<=re&&ye[re][1]>=U;--re){var Pe=W(ye[re]);if(Pe)return Pe}}n($g,"reportRightRange");function Kg(ye,U){for(var W=0;W<ye.length;++W){var re=U(ye[W]);if(re)return re}}n(Kg,"reportRange");function Qv(ye,U){return ye-U}n(Qv,"compareNumbers");function hg(ye,U){var W=ye[0]-U[0];return W||ye[1]-U[1]}n(hg,"compareBegin");function pg(ye,U){var W=ye[1]-U[1];return W||ye[0]-U[0]}n(pg,"compareEnd");function uu(ye){if(ye.length===0)return null;for(var U=[],W=0;W<ye.length;++W)U.push(ye[W][0],ye[W][1]);U.sort(Qv);var re=U[U.length>>1],Pe=[],ze=[],Ne=[];for(W=0;W<ye.length;++W){var lt=ye[W];lt[1]<re?Pe.push(lt):re<lt[0]?ze.push(lt):Ne.push(lt)}var Ct=Ne,_t=Ne.slice();return Ct.sort(hg),_t.sort(pg),new dg(re,uu(Pe),uu(ze),Ct,_t)}n(uu,"createIntervalTree");function mg(ye){this.root=ye}n(mg,"IntervalTree"),Ju.intervals=function(ye){return ye.push.apply(ye,this.leftPoints),this.left&&this.left.intervals(ye),this.right&&this.right.intervals(ye),ye},Ju.insert=function(ye){var U=this.count-this.leftPoints.length;if(this.count+=1,ye[1]<this.mid)this.left?4*(this.left.count+1)>3*(1+U)?Wg(this,ye):this.left.insert(ye):this.left=uu([ye]);else if(ye[0]>this.mid)this.right?4*(this.right.count+1)>3*(1+U)?Wg(this,ye):this.right.insert(ye):this.right=uu([ye]);else{var W=Of.ge(this.leftPoints,ye,hg),re=Of.ge(this.rightPoints,ye,pg);this.leftPoints.splice(W,0,ye),this.rightPoints.splice(re,0,ye)}},Ju.remove=function(ye){var U=this.count-this.leftPoints;if(ye[1]<this.mid)return this.left?3*(U-1)<4*(this.right?this.right.count:0)?zg(this,ye):(ze=this.left.remove(ye))===2?(this.left=null,this.count-=1,1):(ze===1&&(this.count-=1),ze):0;if(ye[0]>this.mid)return this.right?3*(U-1)<4*(this.left?this.left.count:0)?zg(this,ye):(ze=this.right.remove(ye))===2?(this.right=null,this.count-=1,1):(ze===1&&(this.count-=1),ze):0;if(this.count===1)return this.leftPoints[0]===ye?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===ye){if(this.left&&this.right){for(var W=this,re=this.left;re.right;)re=(W=re).right;if(W===this)re.right=this.right;else{var Pe=this.left;ze=this.right,W.count-=re.count,W.right=re.left,re.left=Pe,re.right=ze}fg(this,re),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?fg(this,this.left):fg(this,this.right);return 1}for(Pe=Of.ge(this.leftPoints,ye,hg);Pe<this.leftPoints.length&&this.leftPoints[Pe][0]===ye[0];++Pe)if(this.leftPoints[Pe]===ye){for(this.count-=1,this.leftPoints.splice(Pe,1),ze=Of.ge(this.rightPoints,ye,pg);ze<this.rightPoints.length&&this.rightPoints[ze][1]===ye[1];++ze)if(this.rightPoints[ze]===ye)return this.rightPoints.splice(ze,1),1}return 0;var ze},Ju.queryPoint=function(ye,U){if(ye<this.mid)return this.left&&(W=this.left.queryPoint(ye,U))?W:Gg(this.leftPoints,ye,U);if(ye>this.mid){var W;return this.right&&(W=this.right.queryPoint(ye,U))?W:$g(this.rightPoints,ye,U)}return Kg(this.leftPoints,U)},Ju.queryInterval=function(ye,U,W){var re;return ye<this.mid&&this.left&&(re=this.left.queryInterval(ye,U,W))||U>this.mid&&this.right&&(re=this.right.queryInterval(ye,U,W))?re:U<this.mid?Gg(this.leftPoints,U,W):ye>this.mid?$g(this.rightPoints,ye,W):Kg(this.leftPoints,W)};var du=mg.prototype;du.insert=function(ye){this.root?this.root.insert(ye):this.root=new dg(ye[0],null,null,[ye],[ye])},du.remove=function(ye){if(this.root){var U=this.root.remove(ye);return U===2&&(this.root=null),U!==0}return!1},du.queryPoint=function(ye,U){if(this.root)return this.root.queryPoint(ye,U)},du.queryInterval=function(ye,U,W){if(ye<=U&&this.root)return this.root.queryInterval(ye,U,W)},Object.defineProperty(du,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(du,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});var gg=function(){function ye(){Ve(this,ye),ne(this,"_columnSizeMap",{}),ne(this,"_intervalTree",function(U){return U&&U.length!==0?new mg(uu(U)):new mg(null)}()),ne(this,"_leftMap",{})}return n(ye,"PositionCache"),Me(ye,[{key:"estimateTotalHeight",value:function(U,W,re){var Pe=U-this.count;return this.tallestColumnSize+Math.ceil(Pe/W)*re}},{key:"range",value:function(U,W,re){var Pe=this;this._intervalTree.queryInterval(U,U+W,function(ze){var Ne=le(ze,3),lt=Ne[0],Ct=(Ne[1],Ne[2]);return re(Ct,Pe._leftMap[Ct],lt)})}},{key:"setPosition",value:function(U,W,re,Pe){this._intervalTree.insert([re,re+Pe,U]),this._leftMap[U]=W;var ze=this._columnSizeMap,Ne=ze[W];ze[W]=Ne===void 0?re+Pe:Math.max(Ne,re+Pe)}},{key:"count",get:function(){return this._intervalTree.count}},{key:"shortestColumnSize",get:function(){var U=this._columnSizeMap,W=0;for(var re in U){var Pe=U[re];W=W===0?Pe:Math.min(W,Pe)}return W}},{key:"tallestColumnSize",get:function(){var U=this._columnSizeMap,W=0;for(var re in U){var Pe=U[re];W=Math.max(W,Pe)}return W}}]),ye}(),vg=function(){function ye(){var U,W;Ve(this,ye);for(var re=arguments.length,Pe=new Array(re),ze=0;ze<re;ze++)Pe[ze]=arguments[ze];return ne(q(W=ve(this,(U=de(ye)).call.apply(U,[this].concat(Pe)))),"state",{isScrolling:!1,scrollTop:0}),ne(q(W),"_debounceResetIsScrollingId",void 0),ne(q(W),"_invalidateOnUpdateStartIndex",null),ne(q(W),"_invalidateOnUpdateStopIndex",null),ne(q(W),"_positionCache",new gg),ne(q(W),"_startIndex",null),ne(q(W),"_startIndexMemoized",null),ne(q(W),"_stopIndex",null),ne(q(W),"_stopIndexMemoized",null),ne(q(W),"_debounceResetIsScrollingCallback",function(){W.setState({isScrolling:!1})}),ne(q(W),"_setScrollingContainerRef",function(Ne){W._scrollingContainer=Ne}),ne(q(W),"_onScroll",function(Ne){var lt=W.props.height,Ct=Ne.currentTarget.scrollTop,_t=Math.min(Math.max(0,W._getEstimatedTotalHeight()-lt),Ct);Ct===_t&&(W._debounceResetIsScrolling(),W.state.scrollTop!==_t&&W.setState({isScrolling:!0,scrollTop:_t}))}),W}return n(ye,"Masonry"),Se(ye,_e.PureComponent),Me(ye,[{key:"clearCellPositions",value:function(){this._positionCache=new gg,this.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(U){var W=U.rowIndex;this._invalidateOnUpdateStartIndex===null?(this._invalidateOnUpdateStartIndex=W,this._invalidateOnUpdateStopIndex=W):(this._invalidateOnUpdateStartIndex=Math.min(this._invalidateOnUpdateStartIndex,W),this._invalidateOnUpdateStopIndex=Math.max(this._invalidateOnUpdateStopIndex,W))}},{key:"recomputeCellPositions",value:function(){var U=this._positionCache.count-1;this._positionCache=new gg,this._populatePositionCache(0,U),this.forceUpdate()}},{key:"componentDidMount",value:function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()}},{key:"componentDidUpdate",value:function(U){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback(),this.props.scrollTop!==U.scrollTop&&this._debounceResetIsScrolling()}},{key:"componentWillUnmount",value:function(){this._debounceResetIsScrollingId&&Ci(this._debounceResetIsScrollingId)}},{key:"render",value:function(){var U,W=this,re=this.props,Pe=re.autoHeight,ze=re.cellCount,Ne=re.cellMeasurerCache,lt=re.cellRenderer,Ct=re.className,_t=re.height,Ft=re.id,Zt=re.keyMapper,un=re.overscanByPixels,Wn=re.role,mn=re.style,Mn=re.tabIndex,$n=re.width,ni=re.rowDirection,vi=this.state,Pi=vi.isScrolling,kn=vi.scrollTop,ai=[],An=this._getEstimatedTotalHeight(),er=this._positionCache.shortestColumnSize,Br=this._positionCache.count,vo=0;if(this._positionCache.range(Math.max(0,kn-un),_t+2*un,function(na,ts,ds){var ws;U=U===void 0?vo=na:(vo=Math.min(vo,na),Math.max(U,na)),ai.push(lt({index:na,isScrolling:Pi,key:Zt(na),parent:W,style:(ws={height:Ne.getHeight(na)},ne(ws,ni==="ltr"?"left":"right",ts),ne(ws,"position","absolute"),ne(ws,"top",ds),ne(ws,"width",Ne.getWidth(na)),ws)}))}),er<kn+_t+un&&Br<ze)for(var Xo=Math.min(ze-Br,Math.ceil((kn+_t+un-er)/Ne.defaultHeight*$n/Ne.defaultWidth)),Qo=Br;Qo<Br+Xo;Qo++)U=Qo,ai.push(lt({index:Qo,isScrolling:Pi,key:Zt(Qo),parent:this,style:{width:Ne.getWidth(Qo)}}));return this._startIndex=vo,this._stopIndex=U,_e.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:wn("ReactVirtualized__Masonry",Ct),id:Ft,onScroll:this._onScroll,role:Wn,style:te({boxSizing:"border-box",direction:"ltr",height:Pe?"auto":_t,overflowX:"hidden",overflowY:An<_t?"hidden":"auto",position:"relative",width:$n,WebkitOverflowScrolling:"touch",willChange:"transform"},mn),tabIndex:Mn},_e.createElement("div",{className:"ReactVirtualized__Masonry__innerScrollContainer",style:{width:"100%",height:An,maxWidth:"100%",maxHeight:An,overflow:"hidden",pointerEvents:Pi?"none":"",position:"relative"}},ai))}},{key:"_checkInvalidateOnUpdate",value:function(){if(typeof this._invalidateOnUpdateStartIndex=="number"){var U=this._invalidateOnUpdateStartIndex,W=this._invalidateOnUpdateStopIndex;this._invalidateOnUpdateStartIndex=null,this._invalidateOnUpdateStopIndex=null,this._populatePositionCache(U,W),this.forceUpdate()}}},{key:"_debounceResetIsScrolling",value:function(){var U=this.props.scrollingResetTimeInterval;this._debounceResetIsScrollingId&&Ci(this._debounceResetIsScrollingId),this._debounceResetIsScrollingId=nr(this._debounceResetIsScrollingCallback,U)}},{key:"_getEstimatedTotalHeight",value:function(){var U=this.props,W=U.cellCount,re=U.cellMeasurerCache,Pe=U.width,ze=Math.max(1,Math.floor(Pe/re.defaultWidth));return this._positionCache.estimateTotalHeight(W,ze,re.defaultHeight)}},{key:"_invokeOnScrollCallback",value:function(){var U=this.props,W=U.height,re=U.onScroll,Pe=this.state.scrollTop;this._onScrollMemoized!==Pe&&(re({clientHeight:W,scrollHeight:this._getEstimatedTotalHeight(),scrollTop:Pe}),this._onScrollMemoized=Pe)}},{key:"_invokeOnCellsRenderedCallback",value:function(){this._startIndexMemoized===this._startIndex&&this._stopIndexMemoized===this._stopIndex||((0,this.props.onCellsRendered)({startIndex:this._startIndex,stopIndex:this._stopIndex}),this._startIndexMemoized=this._startIndex,this._stopIndexMemoized=this._stopIndex)}},{key:"_populatePositionCache",value:function(U,W){for(var re=this.props,Pe=re.cellMeasurerCache,ze=re.cellPositioner,Ne=U;Ne<=W;Ne++){var lt=ze(Ne),Ct=lt.left,_t=lt.top;this._positionCache.setPosition(Ne,Ct,_t,Pe.getHeight(Ne))}}}],[{key:"getDerivedStateFromProps",value:function(U,W){return U.scrollTop!==void 0&&W.scrollTop!==U.scrollTop?{isScrolling:!0,scrollTop:U.scrollTop}:null}}]),ye}();function Jg(){}n(Jg,"noop"),ne(vg,"defaultProps",{autoHeight:!1,keyMapper:function(ye){return ye},onCellsRendered:Jg,onScroll:Jg,overscanByPixels:20,role:"grid",scrollingResetTimeInterval:150,style:{},tabIndex:0,rowDirection:"ltr"}),pt(vg);var yg=function(){function ye(){var U=this,W=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};Ve(this,ye),ne(this,"_cellMeasurerCache",void 0),ne(this,"_columnIndexOffset",void 0),ne(this,"_rowIndexOffset",void 0),ne(this,"columnWidth",function(Ct){var _t=Ct.index;U._cellMeasurerCache.columnWidth({index:_t+U._columnIndexOffset})}),ne(this,"rowHeight",function(Ct){var _t=Ct.index;U._cellMeasurerCache.rowHeight({index:_t+U._rowIndexOffset})});var re=W.cellMeasurerCache,Pe=W.columnIndexOffset,ze=Pe===void 0?0:Pe,Ne=W.rowIndexOffset,lt=Ne===void 0?0:Ne;this._cellMeasurerCache=re,this._columnIndexOffset=ze,this._rowIndexOffset=lt}return n(ye,"CellMeasurerCacheDecorator"),Me(ye,[{key:"clear",value:function(U,W){this._cellMeasurerCache.clear(U+this._rowIndexOffset,W+this._columnIndexOffset)}},{key:"clearAll",value:function(){this._cellMeasurerCache.clearAll()}},{key:"hasFixedHeight",value:function(){return this._cellMeasurerCache.hasFixedHeight()}},{key:"hasFixedWidth",value:function(){return this._cellMeasurerCache.hasFixedWidth()}},{key:"getHeight",value:function(U,W){var re=1<arguments.length&&W!==void 0?W:0;return this._cellMeasurerCache.getHeight(U+this._rowIndexOffset,re+this._columnIndexOffset)}},{key:"getWidth",value:function(U,W){var re=1<arguments.length&&W!==void 0?W:0;return this._cellMeasurerCache.getWidth(U+this._rowIndexOffset,re+this._columnIndexOffset)}},{key:"has",value:function(U,W){var re=1<arguments.length&&W!==void 0?W:0;return this._cellMeasurerCache.has(U+this._rowIndexOffset,re+this._columnIndexOffset)}},{key:"set",value:function(U,W,re,Pe){this._cellMeasurerCache.set(U+this._rowIndexOffset,W+this._columnIndexOffset,re,Pe)}},{key:"defaultHeight",get:function(){return this._cellMeasurerCache.defaultHeight}},{key:"defaultWidth",get:function(){return this._cellMeasurerCache.defaultWidth}}]),ye}(),wf=function(){function ye(U,W){var re;Ve(this,ye),ne(q(re=ve(this,de(ye).call(this,U,W))),"state",{scrollLeft:0,scrollTop:0,scrollbarSize:0,showHorizontalScrollbar:!1,showVerticalScrollbar:!1}),ne(q(re),"_deferredInvalidateColumnIndex",null),ne(q(re),"_deferredInvalidateRowIndex",null),ne(q(re),"_bottomLeftGridRef",function(lt){re._bottomLeftGrid=lt}),ne(q(re),"_bottomRightGridRef",function(lt){re._bottomRightGrid=lt}),ne(q(re),"_cellRendererBottomLeftGrid",function(lt){var Ct=lt.rowIndex,_t=ae(lt,["rowIndex"]),Ft=re.props,Zt=Ft.cellRenderer,un=Ft.fixedRowCount;return Ct===Ft.rowCount-un?_e.createElement("div",{key:_t.key,style:te({},_t.style,{height:20})}):Zt(te({},_t,{parent:q(re),rowIndex:Ct+un}))}),ne(q(re),"_cellRendererBottomRightGrid",function(lt){var Ct=lt.columnIndex,_t=lt.rowIndex,Ft=ae(lt,["columnIndex","rowIndex"]),Zt=re.props,un=Zt.cellRenderer,Wn=Zt.fixedColumnCount,mn=Zt.fixedRowCount;return un(te({},Ft,{columnIndex:Ct+Wn,parent:q(re),rowIndex:_t+mn}))}),ne(q(re),"_cellRendererTopRightGrid",function(lt){var Ct=lt.columnIndex,_t=ae(lt,["columnIndex"]),Ft=re.props,Zt=Ft.cellRenderer,un=Ft.columnCount,Wn=Ft.fixedColumnCount;return Ct===un-Wn?_e.createElement("div",{key:_t.key,style:te({},_t.style,{width:20})}):Zt(te({},_t,{columnIndex:Ct+Wn,parent:q(re)}))}),ne(q(re),"_columnWidthRightGrid",function(lt){var Ct=lt.index,_t=re.props,Ft=_t.columnCount,Zt=_t.fixedColumnCount,un=_t.columnWidth,Wn=re.state,mn=Wn.scrollbarSize;return Wn.showHorizontalScrollbar&&Ct===Ft-Zt?mn:typeof un=="function"?un({index:Ct+Zt}):un}),ne(q(re),"_onScroll",function(lt){var Ct=lt.scrollLeft,_t=lt.scrollTop;re.setState({scrollLeft:Ct,scrollTop:_t});var Ft=re.props.onScroll;Ft&&Ft(lt)}),ne(q(re),"_onScrollbarPresenceChange",function(lt){var Ct=lt.horizontal,_t=lt.size,Ft=lt.vertical,Zt=re.state,un=Zt.showHorizontalScrollbar,Wn=Zt.showVerticalScrollbar;if(Ct!==un||Ft!==Wn){re.setState({scrollbarSize:_t,showHorizontalScrollbar:Ct,showVerticalScrollbar:Ft});var mn=re.props.onScrollbarPresenceChange;typeof mn=="function"&&mn({horizontal:Ct,size:_t,vertical:Ft})}}),ne(q(re),"_onScrollLeft",function(lt){var Ct=lt.scrollLeft;re._onScroll({scrollLeft:Ct,scrollTop:re.state.scrollTop})}),ne(q(re),"_onScrollTop",function(lt){var Ct=lt.scrollTop;re._onScroll({scrollTop:Ct,scrollLeft:re.state.scrollLeft})}),ne(q(re),"_rowHeightBottomGrid",function(lt){var Ct=lt.index,_t=re.props,Ft=_t.fixedRowCount,Zt=_t.rowCount,un=_t.rowHeight,Wn=re.state,mn=Wn.scrollbarSize;return Wn.showVerticalScrollbar&&Ct===Zt-Ft?mn:typeof un=="function"?un({index:Ct+Ft}):un}),ne(q(re),"_topLeftGridRef",function(lt){re._topLeftGrid=lt}),ne(q(re),"_topRightGridRef",function(lt){re._topRightGrid=lt});var Pe=U.deferredMeasurementCache,ze=U.fixedColumnCount,Ne=U.fixedRowCount;return re._maybeCalculateCachedStyles(!0),Pe&&(re._deferredMeasurementCacheBottomLeftGrid=0<Ne?new yg({cellMeasurerCache:Pe,columnIndexOffset:0,rowIndexOffset:Ne}):Pe,re._deferredMeasurementCacheBottomRightGrid=0<ze||0<Ne?new yg({cellMeasurerCache:Pe,columnIndexOffset:ze,rowIndexOffset:Ne}):Pe,re._deferredMeasurementCacheTopRightGrid=0<ze?new yg({cellMeasurerCache:Pe,columnIndexOffset:ze,rowIndexOffset:0}):Pe),re}return n(ye,"MultiGrid"),Se(ye,_e.PureComponent),Me(ye,[{key:"forceUpdateGrids",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.forceUpdate(),this._bottomRightGrid&&this._bottomRightGrid.forceUpdate(),this._topLeftGrid&&this._topLeftGrid.forceUpdate(),this._topRightGrid&&this._topRightGrid.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(U){var W=0<arguments.length&&U!==void 0?U:{},re=W.columnIndex,Pe=re===void 0?0:re,ze=W.rowIndex,Ne=ze===void 0?0:ze;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,Pe):Pe,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,Ne):Ne}},{key:"measureAllCells",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.measureAllCells(),this._bottomRightGrid&&this._bottomRightGrid.measureAllCells(),this._topLeftGrid&&this._topLeftGrid.measureAllCells(),this._topRightGrid&&this._topRightGrid.measureAllCells()}},{key:"recomputeGridSize",value:function(U){var W=0<arguments.length&&U!==void 0?U:{},re=W.columnIndex,Pe=re===void 0?0:re,ze=W.rowIndex,Ne=ze===void 0?0:ze,lt=this.props,Ct=lt.fixedColumnCount,_t=lt.fixedRowCount,Ft=Math.max(0,Pe-Ct),Zt=Math.max(0,Ne-_t);this._bottomLeftGrid&&this._bottomLeftGrid.recomputeGridSize({columnIndex:Pe,rowIndex:Zt}),this._bottomRightGrid&&this._bottomRightGrid.recomputeGridSize({columnIndex:Ft,rowIndex:Zt}),this._topLeftGrid&&this._topLeftGrid.recomputeGridSize({columnIndex:Pe,rowIndex:Ne}),this._topRightGrid&&this._topRightGrid.recomputeGridSize({columnIndex:Ft,rowIndex:Ne}),this._leftGridWidth=null,this._topGridHeight=null,this._maybeCalculateCachedStyles(!0)}},{key:"componentDidMount",value:function(){var U=this.props,W=U.scrollLeft,re=U.scrollTop;if(0<W||0<re){var Pe={};0<W&&(Pe.scrollLeft=W),0<re&&(Pe.scrollTop=re),this.setState(Pe)}this._handleInvalidatedGridSize()}},{key:"componentDidUpdate",value:function(){this._handleInvalidatedGridSize()}},{key:"render",value:function(){var U=this.props,W=U.onScroll,re=U.onSectionRendered,Pe=(U.onScrollbarPresenceChange,U.scrollLeft,U.scrollToColumn),ze=(U.scrollTop,U.scrollToRow),Ne=ae(U,["onScroll","onSectionRendered","onScrollbarPresenceChange","scrollLeft","scrollToColumn","scrollTop","scrollToRow"]);if(this._prepareForRender(),this.props.width===0||this.props.height===0)return null;var lt=this.state,Ct=lt.scrollLeft,_t=lt.scrollTop;return _e.createElement("div",{style:this._containerOuterStyle},_e.createElement("div",{style:this._containerTopStyle},this._renderTopLeftGrid(Ne),this._renderTopRightGrid(te({},Ne,{onScroll:W,scrollLeft:Ct}))),_e.createElement("div",{style:this._containerBottomStyle},this._renderBottomLeftGrid(te({},Ne,{onScroll:W,scrollTop:_t})),this._renderBottomRightGrid(te({},Ne,{onScroll:W,onSectionRendered:re,scrollLeft:Ct,scrollToColumn:Pe,scrollToRow:ze,scrollTop:_t}))))}},{key:"_getBottomGridHeight",value:function(U){return U.height-this._getTopGridHeight(U)}},{key:"_getLeftGridWidth",value:function(U){var W=U.fixedColumnCount,re=U.columnWidth;if(this._leftGridWidth==null)if(typeof re=="function"){for(var Pe=0,ze=0;ze<W;ze++)Pe+=re({index:ze});this._leftGridWidth=Pe}else this._leftGridWidth=re*W;return this._leftGridWidth}},{key:"_getRightGridWidth",value:function(U){return U.width-this._getLeftGridWidth(U)}},{key:"_getTopGridHeight",value:function(U){var W=U.fixedRowCount,re=U.rowHeight;if(this._topGridHeight==null)if(typeof re=="function"){for(var Pe=0,ze=0;ze<W;ze++)Pe+=re({index:ze});this._topGridHeight=Pe}else this._topGridHeight=re*W;return this._topGridHeight}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"){var U=this._deferredInvalidateColumnIndex,W=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:U,rowIndex:W}),this.forceUpdate()}}},{key:"_maybeCalculateCachedStyles",value:function(U){var W=this.props,re=W.columnWidth,Pe=W.enableFixedColumnScroll,ze=W.enableFixedRowScroll,Ne=W.height,lt=W.fixedColumnCount,Ct=W.fixedRowCount,_t=W.rowHeight,Ft=W.style,Zt=W.styleBottomLeftGrid,un=W.styleBottomRightGrid,Wn=W.styleTopLeftGrid,mn=W.styleTopRightGrid,Mn=W.width,$n=U||Ne!==this._lastRenderedHeight||Mn!==this._lastRenderedWidth,ni=U||re!==this._lastRenderedColumnWidth||lt!==this._lastRenderedFixedColumnCount,vi=U||Ct!==this._lastRenderedFixedRowCount||_t!==this._lastRenderedRowHeight;(U||$n||Ft!==this._lastRenderedStyle)&&(this._containerOuterStyle=te({height:Ne,overflow:"visible",width:Mn},Ft)),(U||$n||vi)&&(this._containerTopStyle={height:this._getTopGridHeight(this.props),position:"relative",width:Mn},this._containerBottomStyle={height:Ne-this._getTopGridHeight(this.props),overflow:"visible",position:"relative",width:Mn}),!U&&Zt===this._lastRenderedStyleBottomLeftGrid||(this._bottomLeftGridStyle=te({left:0,overflowX:"hidden",overflowY:Pe?"auto":"hidden",position:"absolute"},Zt)),(U||ni||un!==this._lastRenderedStyleBottomRightGrid)&&(this._bottomRightGridStyle=te({left:this._getLeftGridWidth(this.props),position:"absolute"},un)),!U&&Wn===this._lastRenderedStyleTopLeftGrid||(this._topLeftGridStyle=te({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute",top:0},Wn)),(U||ni||mn!==this._lastRenderedStyleTopRightGrid)&&(this._topRightGridStyle=te({left:this._getLeftGridWidth(this.props),overflowX:ze?"auto":"hidden",overflowY:"hidden",position:"absolute",top:0},mn)),this._lastRenderedColumnWidth=re,this._lastRenderedFixedColumnCount=lt,this._lastRenderedFixedRowCount=Ct,this._lastRenderedHeight=Ne,this._lastRenderedRowHeight=_t,this._lastRenderedStyle=Ft,this._lastRenderedStyleBottomLeftGrid=Zt,this._lastRenderedStyleBottomRightGrid=un,this._lastRenderedStyleTopLeftGrid=Wn,this._lastRenderedStyleTopRightGrid=mn,this._lastRenderedWidth=Mn}},{key:"_prepareForRender",value:function(){this._lastRenderedColumnWidth===this.props.columnWidth&&this._lastRenderedFixedColumnCount===this.props.fixedColumnCount||(this._leftGridWidth=null),this._lastRenderedFixedRowCount===this.props.fixedRowCount&&this._lastRenderedRowHeight===this.props.rowHeight||(this._topGridHeight=null),this._maybeCalculateCachedStyles(),this._lastRenderedColumnWidth=this.props.columnWidth,this._lastRenderedFixedColumnCount=this.props.fixedColumnCount,this._lastRenderedFixedRowCount=this.props.fixedRowCount,this._lastRenderedRowHeight=this.props.rowHeight}},{key:"_renderBottomLeftGrid",value:function(U){var W=U.enableFixedColumnScroll,re=U.fixedColumnCount,Pe=U.fixedRowCount,ze=U.rowCount,Ne=U.hideBottomLeftGridScrollbar,lt=this.state.showVerticalScrollbar;if(!re)return null;var Ct=lt?1:0,_t=this._getBottomGridHeight(U),Ft=this._getLeftGridWidth(U),Zt=this.state.showVerticalScrollbar?this.state.scrollbarSize:0,un=Ne?Ft+Zt:Ft,Wn=_e.createElement(el,ce({},U,{cellRenderer:this._cellRendererBottomLeftGrid,className:this.props.classNameBottomLeftGrid,columnCount:re,deferredMeasurementCache:this._deferredMeasurementCacheBottomLeftGrid,height:_t,onScroll:W?this._onScrollTop:void 0,ref:this._bottomLeftGridRef,rowCount:Math.max(0,ze-Pe)+Ct,rowHeight:this._rowHeightBottomGrid,style:this._bottomLeftGridStyle,tabIndex:null,width:un}));return Ne?_e.createElement("div",{className:"BottomLeftGrid_ScrollWrapper",style:te({},this._bottomLeftGridStyle,{height:_t,width:Ft,overflowY:"hidden"})},Wn):Wn}},{key:"_renderBottomRightGrid",value:function(U){var W=U.columnCount,re=U.fixedColumnCount,Pe=U.fixedRowCount,ze=U.rowCount,Ne=U.scrollToColumn,lt=U.scrollToRow;return _e.createElement(el,ce({},U,{cellRenderer:this._cellRendererBottomRightGrid,className:this.props.classNameBottomRightGrid,columnCount:Math.max(0,W-re),columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheBottomRightGrid,height:this._getBottomGridHeight(U),onScroll:this._onScroll,onScrollbarPresenceChange:this._onScrollbarPresenceChange,ref:this._bottomRightGridRef,rowCount:Math.max(0,ze-Pe),rowHeight:this._rowHeightBottomGrid,scrollToColumn:Ne-re,scrollToRow:lt-Pe,style:this._bottomRightGridStyle,width:this._getRightGridWidth(U)}))}},{key:"_renderTopLeftGrid",value:function(U){var W=U.fixedColumnCount,re=U.fixedRowCount;return W&&re?_e.createElement(el,ce({},U,{className:this.props.classNameTopLeftGrid,columnCount:W,height:this._getTopGridHeight(U),ref:this._topLeftGridRef,rowCount:re,style:this._topLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(U)})):null}},{key:"_renderTopRightGrid",value:function(U){var W=U.columnCount,re=U.enableFixedRowScroll,Pe=U.fixedColumnCount,ze=U.fixedRowCount,Ne=U.scrollLeft,lt=U.hideTopRightGridScrollbar,Ct=this.state,_t=Ct.showHorizontalScrollbar,Ft=Ct.scrollbarSize;if(!ze)return null;var Zt=_t?1:0,un=this._getTopGridHeight(U),Wn=this._getRightGridWidth(U),mn=_t?Ft:0,Mn=un,$n=this._topRightGridStyle;lt&&(Mn=un+mn,$n=te({},this._topRightGridStyle,{left:0}));var ni=_e.createElement(el,ce({},U,{cellRenderer:this._cellRendererTopRightGrid,className:this.props.classNameTopRightGrid,columnCount:Math.max(0,W-Pe)+Zt,columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheTopRightGrid,height:Mn,onScroll:re?this._onScrollLeft:void 0,ref:this._topRightGridRef,rowCount:ze,scrollLeft:Ne,style:$n,tabIndex:null,width:Wn}));return lt?_e.createElement("div",{className:"TopRightGrid_ScrollWrapper",style:te({},this._topRightGridStyle,{height:un,width:Wn,overflowX:"hidden"})},ni):ni}}],[{key:"getDerivedStateFromProps",value:function(U,W){return U.scrollLeft!==W.scrollLeft||U.scrollTop!==W.scrollTop?{scrollLeft:U.scrollLeft!=null&&0<=U.scrollLeft?U.scrollLeft:W.scrollLeft,scrollTop:U.scrollTop!=null&&0<=U.scrollTop?U.scrollTop:W.scrollTop}:null}}]),ye}();ne(wf,"propTypes",{classNameBottomLeftGrid:vn.string.isRequired,classNameBottomRightGrid:vn.string.isRequired,classNameTopLeftGrid:vn.string.isRequired,classNameTopRightGrid:vn.string.isRequired,enableFixedColumnScroll:vn.bool.isRequired,enableFixedRowScroll:vn.bool.isRequired,fixedColumnCount:vn.number.isRequired,fixedRowCount:vn.number.isRequired,onScrollbarPresenceChange:vn.func,style:vn.object.isRequired,styleBottomLeftGrid:vn.object.isRequired,styleBottomRightGrid:vn.object.isRequired,styleTopLeftGrid:vn.object.isRequired,styleTopRightGrid:vn.object.isRequired,hideTopRightGridScrollbar:vn.bool,hideBottomLeftGridScrollbar:vn.bool}),ne(wf,"defaultProps",{classNameBottomLeftGrid:"",classNameBottomRightGrid:"",classNameTopLeftGrid:"",classNameTopRightGrid:"",enableFixedColumnScroll:!1,enableFixedRowScroll:!1,fixedColumnCount:0,fixedRowCount:0,scrollToColumn:-1,scrollToRow:-1,style:{},styleBottomLeftGrid:{},styleBottomRightGrid:{},styleTopLeftGrid:{},styleTopRightGrid:{},hideTopRightGridScrollbar:!1,hideBottomLeftGridScrollbar:!1}),pt(wf);var Yg=function(){function ye(U,W){var re;return Ve(this,ye),(re=ve(this,de(ye).call(this,U,W))).state={clientHeight:0,clientWidth:0,scrollHeight:0,scrollLeft:0,scrollTop:0,scrollWidth:0},re._onScroll=re._onScroll.bind(q(re)),re}return n(ye,"ScrollSync"),Se(ye,_e.PureComponent),Me(ye,[{key:"render",value:function(){var U=this.props.children,W=this.state,re=W.clientHeight,Pe=W.clientWidth,ze=W.scrollHeight,Ne=W.scrollLeft,lt=W.scrollTop,Ct=W.scrollWidth;return U({clientHeight:re,clientWidth:Pe,onScroll:this._onScroll,scrollHeight:ze,scrollLeft:Ne,scrollTop:lt,scrollWidth:Ct})}},{key:"_onScroll",value:function(U){var W=U.clientHeight,re=U.clientWidth,Pe=U.scrollHeight,ze=U.scrollLeft,Ne=U.scrollTop,lt=U.scrollWidth;this.setState({clientHeight:W,clientWidth:re,scrollHeight:Pe,scrollLeft:ze,scrollTop:Ne,scrollWidth:lt})}}]),ye}();function Xg(ye){var U=ye.dataKey,W=ye.rowData;return typeof W.get=="function"?W.get(U):W[U]}n(Xg,"defaultCellDataGetter");function Qg(ye){var U=ye.cellData;return U==null?"":String(U)}n(Qg,"defaultCellRenderer");function Zg(ye){var U=ye.className,W=ye.columns,re=ye.style;return _e.createElement("div",{className:U,role:"row",style:re},W)}n(Zg,"defaultHeaderRowRenderer"),ne(Yg,"propTypes",{children:vn.func.isRequired});var us={ASC:"ASC",DESC:"DESC"};function Sg(ye){var U=ye.sortDirection,W=wn("ReactVirtualized__Table__sortableHeaderIcon",{"ReactVirtualized__Table__sortableHeaderIcon--ASC":U===us.ASC,"ReactVirtualized__Table__sortableHeaderIcon--DESC":U===us.DESC});return _e.createElement("svg",{className:W,width:18,height:18,viewBox:"0 0 24 24"},U===us.ASC?_e.createElement("path",{d:"M7 14l5-5 5 5z"}):_e.createElement("path",{d:"M7 10l5 5 5-5z"}),_e.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}n(Sg,"SortIndicator");function qg(ye){var U=ye.dataKey,W=ye.label,re=ye.sortBy,Pe=ye.sortDirection,ze=re===U,Ne=[_e.createElement("span",{className:"ReactVirtualized__Table__headerTruncatedText",key:"label",title:typeof W=="string"?W:null},W)];return ze&&Ne.push(_e.createElement(Sg,{key:"SortIndicator",sortDirection:Pe})),Ne}n(qg,"defaultHeaderRenderer");function ev(ye){var U=ye.className,W=ye.columns,re=ye.index,Pe=ye.key,ze=ye.onRowClick,Ne=ye.onRowDoubleClick,lt=ye.onRowMouseOut,Ct=ye.onRowMouseOver,_t=ye.onRowRightClick,Ft=ye.rowData,Zt=ye.style,un={"aria-rowindex":re+1};return(ze||Ne||lt||Ct||_t)&&(un["aria-label"]="row",un.tabIndex=0,ze&&(un.onClick=function(Wn){return ze({event:Wn,index:re,rowData:Ft})}),Ne&&(un.onDoubleClick=function(Wn){return Ne({event:Wn,index:re,rowData:Ft})}),lt&&(un.onMouseOut=function(Wn){return lt({event:Wn,index:re,rowData:Ft})}),Ct&&(un.onMouseOver=function(Wn){return Ct({event:Wn,index:re,rowData:Ft})}),_t&&(un.onContextMenu=function(Wn){return _t({event:Wn,index:re,rowData:Ft})})),_e.createElement("div",ce({},un,{className:U,key:Pe,role:"row",style:Zt}),W)}n(ev,"defaultRowRenderer"),Sg.propTypes={sortDirection:vn.oneOf([us.ASC,us.DESC])};var Yu=function(){function ye(){return Ve(this,ye),ve(this,de(ye).apply(this,arguments))}return n(ye,"Column"),Se(ye,_e.Component),ye}();ne(Yu,"propTypes",{"aria-label":vn.string,cellDataGetter:vn.func,cellRenderer:vn.func,className:vn.string,columnData:vn.object,dataKey:vn.any.isRequired,defaultSortDirection:vn.oneOf([us.ASC,us.DESC]),disableSort:vn.bool,flexGrow:vn.number,flexShrink:vn.number,headerClassName:vn.string,headerRenderer:vn.func.isRequired,headerStyle:vn.object,id:vn.string,label:vn.node,maxWidth:vn.number,minWidth:vn.number,style:vn.object,width:vn.number.isRequired}),ne(Yu,"defaultProps",{cellDataGetter:Xg,cellRenderer:Qg,defaultSortDirection:us.ASC,flexGrow:0,flexShrink:1,headerRenderer:qg,style:{}});var Eg=function(){function ye(U){var W;return Ve(this,ye),(W=ve(this,de(ye).call(this,U))).state={scrollbarWidth:0},W._createColumn=W._createColumn.bind(q(W)),W._createRow=W._createRow.bind(q(W)),W._onScroll=W._onScroll.bind(q(W)),W._onSectionRendered=W._onSectionRendered.bind(q(W)),W._setRef=W._setRef.bind(q(W)),W}return n(ye,"Table"),Se(ye,_e.PureComponent),Me(ye,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(U){var W=U.alignment,re=U.index;return this.Grid?this.Grid.getOffsetForCell({alignment:W,rowIndex:re}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(U){var W=U.columnIndex,re=U.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:re,columnIndex:W})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(U){var W=0<arguments.length&&U!==void 0?U:{},re=W.columnIndex,Pe=re===void 0?0:re,ze=W.rowIndex,Ne=ze===void 0?0:ze;this.Grid&&this.Grid.recomputeGridSize({rowIndex:Ne,columnIndex:Pe})}},{key:"recomputeRowHeights",value:function(U){var W=0<arguments.length&&U!==void 0?U:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:W})}},{key:"scrollToPosition",value:function(U){var W=0<arguments.length&&U!==void 0?U:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:W})}},{key:"scrollToRow",value:function(U){var W=0<arguments.length&&U!==void 0?U:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:W})}},{key:"getScrollbarWidth",value:function(){if(this.Grid){var U=Xe.findDOMNode(this.Grid),W=U.clientWidth||0;return(U.offsetWidth||0)-W}return 0}},{key:"componentDidMount",value:function(){this._setScrollbarWidth()}},{key:"componentDidUpdate",value:function(){this._setScrollbarWidth()}},{key:"render",value:function(){var U=this,W=this.props,re=W.children,Pe=W.className,ze=W.disableHeader,Ne=W.gridClassName,lt=W.gridStyle,Ct=W.headerHeight,_t=W.headerRowRenderer,Ft=W.height,Zt=W.id,un=W.noRowsRenderer,Wn=W.rowClassName,mn=W.rowStyle,Mn=W.scrollToIndex,$n=W.style,ni=W.width,vi=this.state.scrollbarWidth,Pi=ze?Ft:Ft-Ct,kn=typeof Wn=="function"?Wn({index:-1}):Wn,ai=typeof mn=="function"?mn({index:-1}):mn;return this._cachedColumnStyles=[],_e.Children.toArray(re).forEach(function(An,er){var Br=U._getFlexStyleForColumn(An,An.props.style);U._cachedColumnStyles[er]=te({overflow:"hidden"},Br)}),_e.createElement("div",{"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-colcount":_e.Children.toArray(re).length,"aria-rowcount":this.props.rowCount,className:wn("ReactVirtualized__Table",Pe),id:Zt,role:"grid",style:$n},!ze&&_t({className:wn("ReactVirtualized__Table__headerRow",kn),columns:this._getHeaderColumns(),style:te({height:Ct,overflow:"hidden",paddingRight:vi,width:ni},ai)}),_e.createElement(el,ce({},this.props,{"aria-readonly":null,autoContainerWidth:!0,className:wn("ReactVirtualized__Table__Grid",Ne),cellRenderer:this._createRow,columnWidth:ni,columnCount:1,height:Pi,id:void 0,noContentRenderer:un,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,role:"rowgroup",scrollbarWidth:vi,scrollToRow:Mn,style:te({},lt,{overflowX:"hidden"})})))}},{key:"_createColumn",value:function(U){var W=U.column,re=U.columnIndex,Pe=U.isScrolling,ze=U.parent,Ne=U.rowData,lt=U.rowIndex,Ct=this.props.onColumnClick,_t=W.props,Ft=_t.cellDataGetter,Zt=_t.cellRenderer,un=_t.className,Wn=_t.columnData,mn=_t.dataKey,Mn=_t.id,$n=Zt({cellData:Ft({columnData:Wn,dataKey:mn,rowData:Ne}),columnData:Wn,columnIndex:re,dataKey:mn,isScrolling:Pe,parent:ze,rowData:Ne,rowIndex:lt}),ni=this._cachedColumnStyles[re],vi=typeof $n=="string"?$n:null;return _e.createElement("div",{"aria-colindex":re+1,"aria-describedby":Mn,className:wn("ReactVirtualized__Table__rowColumn",un),key:"Row"+lt+"-Col"+re,onClick:function(Pi){Ct&&Ct({columnData:Wn,dataKey:mn,event:Pi})},role:"gridcell",style:ni,title:vi},$n)}},{key:"_createHeader",value:function(U){var W,re,Pe,ze,Ne,lt=U.column,Ct=U.index,_t=this.props,Ft=_t.headerClassName,Zt=_t.headerStyle,un=_t.onHeaderClick,Wn=_t.sort,mn=_t.sortBy,Mn=_t.sortDirection,$n=lt.props,ni=$n.columnData,vi=$n.dataKey,Pi=$n.defaultSortDirection,kn=$n.disableSort,ai=$n.headerRenderer,An=$n.id,er=$n.label,Br=!kn&&Wn,vo=wn("ReactVirtualized__Table__headerColumn",Ft,lt.props.headerClassName,{ReactVirtualized__Table__sortableHeaderColumn:Br}),Xo=this._getFlexStyleForColumn(lt,te({},Zt,{},lt.props.headerStyle)),Qo=ai({columnData:ni,dataKey:vi,disableSort:kn,label:er,sortBy:mn,sortDirection:Mn});if(Br||un){var na=mn!==vi?Pi:Mn===us.DESC?us.ASC:us.DESC,ts=n(function(ds){Br&&Wn({defaultSortDirection:Pi,event:ds,sortBy:vi,sortDirection:na}),un&&un({columnData:ni,dataKey:vi,event:ds})},"onClick");Ne=lt.props["aria-label"]||er||vi,ze="none",Pe=0,W=ts,re=n(function(ds){ds.key!=="Enter"&&ds.key!==" "||ts(ds)},"headerOnKeyDown")}return mn===vi&&(ze=Mn===us.ASC?"ascending":"descending"),_e.createElement("div",{"aria-label":Ne,"aria-sort":ze,className:vo,id:An,key:"Header-Col"+Ct,onClick:W,onKeyDown:re,role:"columnheader",style:Xo,tabIndex:Pe},Qo)}},{key:"_createRow",value:function(U){var W=this,re=U.rowIndex,Pe=U.isScrolling,ze=U.key,Ne=U.parent,lt=U.style,Ct=this.props,_t=Ct.children,Ft=Ct.onRowClick,Zt=Ct.onRowDoubleClick,un=Ct.onRowRightClick,Wn=Ct.onRowMouseOver,mn=Ct.onRowMouseOut,Mn=Ct.rowClassName,$n=Ct.rowGetter,ni=Ct.rowRenderer,vi=Ct.rowStyle,Pi=this.state.scrollbarWidth,kn=typeof Mn=="function"?Mn({index:re}):Mn,ai=typeof vi=="function"?vi({index:re}):vi,An=$n({index:re}),er=_e.Children.toArray(_t).map(function(Xo,Qo){return W._createColumn({column:Xo,columnIndex:Qo,isScrolling:Pe,parent:Ne,rowData:An,rowIndex:re,scrollbarWidth:Pi})}),Br=wn("ReactVirtualized__Table__row",kn),vo=te({},lt,{height:this._getRowHeight(re),overflow:"hidden",paddingRight:Pi},ai);return ni({className:Br,columns:er,index:re,isScrolling:Pe,key:ze,onRowClick:Ft,onRowDoubleClick:Zt,onRowRightClick:un,onRowMouseOver:Wn,onRowMouseOut:mn,rowData:An,style:vo})}},{key:"_getFlexStyleForColumn",value:function(U,W){var re=1<arguments.length&&W!==void 0?W:{},Pe="".concat(U.props.flexGrow," ").concat(U.props.flexShrink," ").concat(U.props.width,"px"),ze=te({},re,{flex:Pe,msFlex:Pe,WebkitFlex:Pe});return U.props.maxWidth&&(ze.maxWidth=U.props.maxWidth),U.props.minWidth&&(ze.minWidth=U.props.minWidth),ze}},{key:"_getHeaderColumns",value:function(){var U=this,W=this.props,re=W.children;return(W.disableHeader?[]:_e.Children.toArray(re)).map(function(Pe,ze){return U._createHeader({column:Pe,index:ze})})}},{key:"_getRowHeight",value:function(U){var W=this.props.rowHeight;return typeof W=="function"?W({index:U}):W}},{key:"_onScroll",value:function(U){var W=U.clientHeight,re=U.scrollHeight,Pe=U.scrollTop;(0,this.props.onScroll)({clientHeight:W,scrollHeight:re,scrollTop:Pe})}},{key:"_onSectionRendered",value:function(U){var W=U.rowOverscanStartIndex,re=U.rowOverscanStopIndex,Pe=U.rowStartIndex,ze=U.rowStopIndex;(0,this.props.onRowsRendered)({overscanStartIndex:W,overscanStopIndex:re,startIndex:Pe,stopIndex:ze})}},{key:"_setRef",value:function(U){this.Grid=U}},{key:"_setScrollbarWidth",value:function(){var U=this.getScrollbarWidth();this.setState({scrollbarWidth:U})}}]),ye}();ne(Eg,"propTypes",{"aria-label":vn.string,"aria-labelledby":vn.string,autoHeight:vn.bool,children:function(ye){for(var U=_e.Children.toArray(ye.children),W=0;W<U.length;W++){var re=U[W].type;if(re!==Yu&&!(re.prototype instanceof Yu))return new Error("Table only accepts children of type Column")}},className:vn.string,disableHeader:vn.bool,estimatedRowSize:vn.number.isRequired,gridClassName:vn.string,gridStyle:vn.object,headerClassName:vn.string,headerHeight:vn.number.isRequired,headerRowRenderer:vn.func,headerStyle:vn.object,height:vn.number.isRequired,id:vn.string,noRowsRenderer:vn.func,onColumnClick:vn.func,onHeaderClick:vn.func,onRowClick:vn.func,onRowDoubleClick:vn.func,onRowMouseOut:vn.func,onRowMouseOver:vn.func,onRowRightClick:vn.func,onRowsRendered:vn.func,onScroll:vn.func.isRequired,overscanIndicesGetter:vn.func.isRequired,overscanRowCount:vn.number.isRequired,rowClassName:vn.oneOfType([vn.string,vn.func]),rowGetter:vn.func.isRequired,rowHeight:vn.oneOfType([vn.number,vn.func]).isRequired,rowCount:vn.number.isRequired,rowRenderer:vn.func,rowStyle:vn.oneOfType([vn.object,vn.func]).isRequired,scrollToAlignment:vn.oneOf(["auto","end","start","center"]).isRequired,scrollToIndex:vn.number.isRequired,scrollTop:vn.number,sort:vn.func,sortBy:vn.string,sortDirection:vn.oneOf([us.ASC,us.DESC]),style:vn.object,tabIndex:vn.number,width:vn.number.isRequired}),ne(Eg,"defaultProps",{disableHeader:!1,estimatedRowSize:30,headerHeight:0,headerStyle:{},noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanIndicesGetter:Ku,overscanRowCount:10,rowRenderer:ev,headerRowRenderer:Zg,rowStyle:{},scrollToAlignment:"auto",scrollToIndex:-1,style:{}});var Kc=[],Xu=null,Jc=null;function tv(){Jc&&(Jc=null,Wt.body&&Xu!=null&&(Wt.body.style.pointerEvents=Xu),Xu=null)}n(tv,"enablePointerEventsIfDisabled");function Zv(){tv(),Kc.forEach(function(ye){return ye.__resetIsScrolling()})}n(Zv,"enablePointerEventsAfterDelayCallback");function nv(ye){ye.currentTarget===X&&Xu==null&&Wt.body&&(Xu=Wt.body.style.pointerEvents,Wt.body.style.pointerEvents="none"),function(){Jc&&Ci(Jc);var U=0;Kc.forEach(function(W){U=Math.max(U,W.props.scrollingResetTimeInterval)}),Jc=nr(Zv,U)}(),Kc.forEach(function(U){U.props.scrollElement===ye.currentTarget&&U.__handleWindowScrollEvent()})}n(nv,"onScrollWindow");function iv(ye,U){Kc.some(function(W){return W.props.scrollElement===U})||U.addEventListener("scroll",nv),Kc.push(ye)}n(iv,"registerScrollListener");function rv(ye,U){(Kc=Kc.filter(function(W){return W!==ye})).length||(U.removeEventListener("scroll",nv),Jc&&(Ci(Jc),tv()))}n(rv,"unregisterScrollListener");var bg=n(function(ye){return ye===X},"isWindow"),Qu=n(function(ye){return ye.getBoundingClientRect()},"getBoundingBox");function ov(ye,U){if(ye){if(bg(ye)){var W=X,re=W.innerHeight,Pe=W.innerWidth;return{height:typeof re=="number"?re:0,width:typeof Pe=="number"?Pe:0}}return Qu(ye)}return{height:U.serverHeight,width:U.serverWidth}}n(ov,"getDimensions");function av(ye){return bg(ye)&&Wt.documentElement?{top:"scrollY"in X?X.scrollY:Wt.documentElement.scrollTop,left:"scrollX"in X?X.scrollX:Wt.documentElement.scrollLeft}:{top:ye.scrollTop,left:ye.scrollLeft}}n(av,"getScrollOffset");var sv=n(function(){return typeof X<"u"?X:void 0},"getWindow"),lv=function(){function ye(){var U,W;Ve(this,ye);for(var re=arguments.length,Pe=new Array(re),ze=0;ze<re;ze++)Pe[ze]=arguments[ze];return ne(q(W=ve(this,(U=de(ye)).call.apply(U,[this].concat(Pe)))),"_window",sv()),ne(q(W),"_isMounted",!1),ne(q(W),"_positionFromTop",0),ne(q(W),"_positionFromLeft",0),ne(q(W),"_detectElementResize",void 0),ne(q(W),"_child",void 0),ne(q(W),"state",te({},ov(W.props.scrollElement,W.props),{isScrolling:!1,scrollLeft:0,scrollTop:0})),ne(q(W),"_registerChild",function(Ne){!Ne||Ne instanceof Bo||tn.warn("WindowScroller registerChild expects to be passed Element or null"),W._child=Ne,W.updatePosition()}),ne(q(W),"_onChildScroll",function(Ne){var lt=Ne.scrollTop;if(W.state.scrollTop!==lt){var Ct=W.props.scrollElement;Ct&&(typeof Ct.scrollTo=="function"?Ct.scrollTo(0,lt+W._positionFromTop):Ct.scrollTop=lt+W._positionFromTop)}}),ne(q(W),"_registerResizeListener",function(Ne){Ne===X?X.addEventListener("resize",W._onResize,!1):W._detectElementResize.addResizeListener(Ne,W._onResize)}),ne(q(W),"_unregisterResizeListener",function(Ne){Ne===X?X.removeEventListener("resize",W._onResize,!1):Ne&&W._detectElementResize.removeResizeListener(Ne,W._onResize)}),ne(q(W),"_onResize",function(){W.updatePosition()}),ne(q(W),"__handleWindowScrollEvent",function(){if(W._isMounted){var Ne=W.props.onScroll,lt=W.props.scrollElement;if(lt){var Ct=av(lt),_t=Math.max(0,Ct.left-W._positionFromLeft),Ft=Math.max(0,Ct.top-W._positionFromTop);W.setState({isScrolling:!0,scrollLeft:_t,scrollTop:Ft}),Ne({scrollLeft:_t,scrollTop:Ft})}}}),ne(q(W),"__resetIsScrolling",function(){W.setState({isScrolling:!1})}),W}return n(ye,"WindowScroller"),Se(ye,_e.PureComponent),Me(ye,[{key:"updatePosition",value:function(U){var W=0<arguments.length&&U!==void 0?U:this.props.scrollElement,re=this.props.onResize,Pe=this.state,ze=Pe.height,Ne=Pe.width,lt=this._child||Xe.findDOMNode(this);if(lt instanceof Bo&&W){var Ct=function(Ft,Zt){if(bg(Zt)&&Wt.documentElement){var un=Wt.documentElement,Wn=Qu(Ft),mn=Qu(un);return{top:Wn.top-mn.top,left:Wn.left-mn.left}}var Mn=av(Zt),$n=Qu(Ft),ni=Qu(Zt);return{top:$n.top+Mn.top-ni.top,left:$n.left+Mn.left-ni.left}}(lt,W);this._positionFromTop=Ct.top,this._positionFromLeft=Ct.left}var _t=ov(W,this.props);ze===_t.height&&Ne===_t.width||(this.setState({height:_t.height,width:_t.width}),re({height:_t.height,width:_t.width}))}},{key:"componentDidMount",value:function(){var U=this.props.scrollElement;this._detectElementResize=ke(),this.updatePosition(U),U&&(iv(this,U),this._registerResizeListener(U)),this._isMounted=!0}},{key:"componentDidUpdate",value:function(U){var W=this.props.scrollElement,re=U.scrollElement;re!==W&&re!=null&&W!=null&&(this.updatePosition(W),rv(this,re),iv(this,W),this._unregisterResizeListener(re),this._registerResizeListener(W))}},{key:"componentWillUnmount",value:function(){var U=this.props.scrollElement;U&&(rv(this,U),this._unregisterResizeListener(U)),this._isMounted=!1}},{key:"render",value:function(){var U=this.props.children,W=this.state,re=W.isScrolling,Pe=W.scrollTop,ze=W.scrollLeft,Ne=W.height,lt=W.width;return U({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:Ne,isScrolling:re,scrollLeft:ze,scrollTop:Pe,width:lt})}}]),ye}();ne(lv,"defaultProps",{onResize:function(){},onScroll:function(){},scrollingResetTimeInterval:150,scrollElement:sv(),serverHeight:0,serverWidth:0}),We.ArrowKeyStepper=He,We.AutoSizer=Ue,We.CellMeasurer=rt,We.CellMeasurerCache=yt,We.Collection=A,We.Column=Yu,We.ColumnSizer=E,We.Grid=el,We.InfiniteLoader=ug,We.List=Hg,We.Masonry=vg,We.MultiGrid=wf,We.ScrollSync=Yg,We.SortDirection=us,We.SortIndicator=Sg,We.Table=Eg,We.WindowScroller=lv,We.accessibilityOverscanIndicesGetter=Ku,We.createMasonryCellPositioner=function(ye){var U,W=ye.cellMeasurerCache,re=ye.columnCount,Pe=ye.columnWidth,ze=ye.spacer,Ne=ze===void 0?0:ze;function lt(_t){for(var Ft=0,Zt=1;Zt<U.length;Zt++)U[Zt]<U[Ft]&&(Ft=Zt);var un=Ft*(Pe+Ne),Wn=U[Ft]||0;return U[Ft]=Wn+W.getHeight(_t)+Ne,{left:un,top:Wn}}n(lt,"cellPositioner");function Ct(){U=[];for(var _t=0;_t<re;_t++)U[_t]=0}return n(Ct,"initOrResetDerivedValues"),Ct(),lt.reset=function(_t){re=_t.columnCount,Pe=_t.columnWidth,Ne=_t.spacer,Ct()},lt},We.createTableMultiSort=function(ye){var U=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},W=U.defaultSortBy,re=U.defaultSortDirection,Pe=re===void 0?{}:re;if(!ye)throw Error('Required parameter "sortCallback" not specified');var ze=W||[],Ne={};return ze.forEach(function(lt){Ne[lt]=Pe[lt]!==void 0?Pe[lt]:"ASC"}),{sort:function(lt){var Ct=lt.defaultSortDirection,_t=lt.event,Ft=lt.sortBy;if(_t.shiftKey)Ne[Ft]!==void 0?Ne[Ft]=Ne[Ft]==="ASC"?"DESC":"ASC":(Ne[Ft]=Ct,ze.push(Ft));else if(_t.ctrlKey||_t.metaKey){var Zt=ze.indexOf(Ft);0<=Zt&&(ze.splice(Zt,1),delete Ne[Ft])}else ze.length=0,ze.push(Ft),Object.keys(Ne).forEach(function(un){un!==Ft&&delete Ne[un]}),Ne[Ft]!==void 0?Ne[Ft]=Ne[Ft]==="ASC"?"DESC":"ASC":Ne[Ft]=Ct;ye({sortBy:ze,sortDirection:Ne})},sortBy:ze,sortDirection:Ne}},We.defaultCellRangeRenderer=qe,We.defaultOverscanIndicesGetter=Be,We.defaultTableCellDataGetter=Xg,We.defaultTableCellRenderer=Qg,We.defaultTableHeaderRenderer=qg,We.defaultTableHeaderRowRenderer=Zg,We.defaultTableRowRenderer=ev,Object.defineProperty(We,"__esModule",{value:!0})}),a.exports}},6857395710:function(H){/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */n(function(c,u){H.exports=u()},"webpackUniversalModuleDefinition")(typeof self<"u"?self:this,function(){return function(l){var c={};function u(m){if(c[m])return c[m].exports;var v=c[m]={i:m,l:!1,exports:{}};return l[m].call(v.exports,v,v.exports,u),v.l=!0,v.exports}return n(u,"__nested_webpack_require_697__"),u.m=l,u.c=c,u.d=function(m,v,g){u.o(m,v)||Object.defineProperty(m,v,{configurable:!1,enumerable:!0,get:g})},u.n=function(m){var v=m&&m.__esModule?n(function(){return m.default},"getDefault"):n(function(){return m},"getModuleExports");return u.d(v,"a",v),v},u.o=function(m,v){return Object.prototype.hasOwnProperty.call(m,v)},u.p="",u(u.s=129)}([function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=u(18),v=u(19),g=u(20),s=u(55),a=u(56),i=u(57),e=u(58),t=u(59),r=u(12),o=u(33),f=u(34),h=u(32),p=u(1),d={Scope:p.Scope,create:p.create,find:p.find,query:p.query,register:p.register,Container:m.default,Format:v.default,Leaf:g.default,Embed:e.default,Scroll:s.default,Block:i.default,Inline:a.default,Text:t.default,Attributor:{Attribute:r.default,Class:o.default,Style:f.default,Store:h.default}};c.default=d},function(l,c,u){"use strict";var m=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var y in d)d.hasOwnProperty(y)&&(p[y]=d[y])};return function(p,d){h(p,d);function y(){this.constructor=p}n(y,"__"),p.prototype=d===null?Object.create(d):(y.prototype=d.prototype,new y)}}();Object.defineProperty(c,"__esModule",{value:!0});var v=function(h){m(p,h);function p(d){var y=this;return d="[Parchment] "+d,y=h.call(this,d)||this,y.message=d,y.name=y.constructor.name,y}return n(p,"ParchmentError"),p}(Error);c.ParchmentError=v;var g={},s={},a={},i={};c.DATA_KEY="__blot";var e;(function(h){h[h.TYPE=3]="TYPE",h[h.LEVEL=12]="LEVEL",h[h.ATTRIBUTE=13]="ATTRIBUTE",h[h.BLOT=14]="BLOT",h[h.INLINE=7]="INLINE",h[h.BLOCK=11]="BLOCK",h[h.BLOCK_BLOT=10]="BLOCK_BLOT",h[h.INLINE_BLOT=6]="INLINE_BLOT",h[h.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",h[h.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",h[h.ANY=15]="ANY"})(e=c.Scope||(c.Scope={}));function t(h,p){var d=o(h);if(d==null)throw new v("Unable to create "+h+" blot");var y=d,S=h instanceof Node||h.nodeType===Node.TEXT_NODE?h:y.create(p);return new y(S,p)}n(t,"create"),c.create=t;function r(h,p){return p===void 0&&(p=!1),h==null?null:h[c.DATA_KEY]!=null?h[c.DATA_KEY].blot:p?r(h.parentNode,p):null}n(r,"find"),c.find=r;function o(h,p){p===void 0&&(p=e.ANY);var d;if(typeof h=="string")d=i[h]||g[h];else if(h instanceof Text||h.nodeType===Node.TEXT_NODE)d=i.text;else if(typeof h=="number")h&e.LEVEL&e.BLOCK?d=i.block:h&e.LEVEL&e.INLINE&&(d=i.inline);else if(h instanceof HTMLElement){var y=(h.getAttribute("class")||"").split(/\s+/);for(var S in y)if(d=s[y[S]],d)break;d=d||a[h.tagName]}return d==null?null:p&e.LEVEL&d.scope&&p&e.TYPE&d.scope?d:null}n(o,"query"),c.query=o;function f(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];if(h.length>1)return h.map(function(S){return f(S)});var d=h[0];if(typeof d.blotName!="string"&&typeof d.attrName!="string")throw new v("Invalid definition");if(d.blotName==="abstract")throw new v("Cannot register abstract class");if(i[d.blotName||d.attrName]=d,typeof d.keyName=="string")g[d.keyName]=d;else if(d.className!=null&&(s[d.className]=d),d.tagName!=null){Array.isArray(d.tagName)?d.tagName=d.tagName.map(function(S){return S.toUpperCase()}):d.tagName=d.tagName.toUpperCase();var y=Array.isArray(d.tagName)?d.tagName:[d.tagName];y.forEach(function(S){(a[S]==null||d.className==null)&&(a[S]=d)})}return d}n(f,"register"),c.register=f},function(l,c,u){var m=u(61),v=u(11),g=u(3),s=u(21),a=String.fromCharCode(0),i=n(function(e){Array.isArray(e)?this.ops=e:e!=null&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]},"Delta");i.prototype.insert=function(e,t){var r={};return e.length===0?this:(r.insert=e,t!=null&&typeof t=="object"&&Object.keys(t).length>0&&(r.attributes=t),this.push(r))},i.prototype.delete=function(e){return e<=0?this:this.push({delete:e})},i.prototype.retain=function(e,t){if(e<=0)return this;var r={retain:e};return t!=null&&typeof t=="object"&&Object.keys(t).length>0&&(r.attributes=t),this.push(r)},i.prototype.push=function(e){var t=this.ops.length,r=this.ops[t-1];if(e=g(!0,{},e),typeof r=="object"){if(typeof e.delete=="number"&&typeof r.delete=="number")return this.ops[t-1]={delete:r.delete+e.delete},this;if(typeof r.delete=="number"&&e.insert!=null&&(t-=1,r=this.ops[t-1],typeof r!="object"))return this.ops.unshift(e),this;if(v(e.attributes,r.attributes)){if(typeof e.insert=="string"&&typeof r.insert=="string")return this.ops[t-1]={insert:r.insert+e.insert},typeof e.attributes=="object"&&(this.ops[t-1].attributes=e.attributes),this;if(typeof e.retain=="number"&&typeof r.retain=="number")return this.ops[t-1]={retain:r.retain+e.retain},typeof e.attributes=="object"&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},i.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},i.prototype.filter=function(e){return this.ops.filter(e)},i.prototype.forEach=function(e){this.ops.forEach(e)},i.prototype.map=function(e){return this.ops.map(e)},i.prototype.partition=function(e){var t=[],r=[];return this.forEach(function(o){var f=e(o)?t:r;f.push(o)}),[t,r]},i.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},i.prototype.changeLength=function(){return this.reduce(function(e,t){return t.insert?e+s.length(t):t.delete?e-t.delete:e},0)},i.prototype.length=function(){return this.reduce(function(e,t){return e+s.length(t)},0)},i.prototype.slice=function(e,t){e=e||0,typeof t!="number"&&(t=1/0);for(var r=[],o=s.iterator(this.ops),f=0;f<t&&o.hasNext();){var h;f<e?h=o.next(e-f):(h=o.next(t-f),r.push(h)),f+=s.length(h)}return new i(r)},i.prototype.compose=function(e){var t=s.iterator(this.ops),r=s.iterator(e.ops),o=[],f=r.peek();if(f!=null&&typeof f.retain=="number"&&f.attributes==null){for(var h=f.retain;t.peekType()==="insert"&&t.peekLength()<=h;)h-=t.peekLength(),o.push(t.next());f.retain-h>0&&r.next(f.retain-h)}for(var p=new i(o);t.hasNext()||r.hasNext();)if(r.peekType()==="insert")p.push(r.next());else if(t.peekType()==="delete")p.push(t.next());else{var d=Math.min(t.peekLength(),r.peekLength()),y=t.next(d),S=r.next(d);if(typeof S.retain=="number"){var b={};typeof y.retain=="number"?b.retain=d:b.insert=y.insert;var _=s.attributes.compose(y.attributes,S.attributes,typeof y.retain=="number");if(_&&(b.attributes=_),p.push(b),!r.hasNext()&&v(p.ops[p.ops.length-1],b)){var C=new i(t.rest());return p.concat(C).chop()}}else typeof S.delete=="number"&&typeof y.retain=="number"&&p.push(S)}return p.chop()},i.prototype.concat=function(e){var t=new i(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t},i.prototype.diff=function(e,t){if(this.ops===e.ops)return new i;var r=[this,e].map(function(d){return d.map(function(y){if(y.insert!=null)return typeof y.insert=="string"?y.insert:a;var S=d===e?"on":"with";throw new Error("diff() called "+S+" non-document")}).join("")}),o=new i,f=m(r[0],r[1],t),h=s.iterator(this.ops),p=s.iterator(e.ops);return f.forEach(function(d){for(var y=d[1].length;y>0;){var S=0;switch(d[0]){case m.INSERT:S=Math.min(p.peekLength(),y),o.push(p.next(S));break;case m.DELETE:S=Math.min(y,h.peekLength()),h.next(S),o.delete(S);break;case m.EQUAL:S=Math.min(h.peekLength(),p.peekLength(),y);var b=h.next(S),_=p.next(S);v(b.insert,_.insert)?o.retain(S,s.attributes.diff(b.attributes,_.attributes)):o.push(_).delete(S);break}y-=S}}),o.chop()},i.prototype.eachLine=function(e,t){t=t||`
`;for(var r=s.iterator(this.ops),o=new i,f=0;r.hasNext();){if(r.peekType()!=="insert")return;var h=r.peek(),p=s.length(h)-r.peekLength(),d=typeof h.insert=="string"?h.insert.indexOf(t,p)-p:-1;if(d<0)o.push(r.next());else if(d>0)o.push(r.next(d));else{if(e(o,r.next(1).attributes||{},f)===!1)return;f+=1,o=new i}}o.length()>0&&e(o,{},f)},i.prototype.transform=function(e,t){if(t=!!t,typeof e=="number")return this.transformPosition(e,t);for(var r=s.iterator(this.ops),o=s.iterator(e.ops),f=new i;r.hasNext()||o.hasNext();)if(r.peekType()==="insert"&&(t||o.peekType()!=="insert"))f.retain(s.length(r.next()));else if(o.peekType()==="insert")f.push(o.next());else{var h=Math.min(r.peekLength(),o.peekLength()),p=r.next(h),d=o.next(h);if(p.delete)continue;d.delete?f.push(d):f.retain(h,s.attributes.transform(p.attributes,d.attributes,t))}return f.chop()},i.prototype.transformPosition=function(e,t){t=!!t;for(var r=s.iterator(this.ops),o=0;r.hasNext()&&o<=e;){var f=r.peekLength(),h=r.peekType();if(r.next(),h==="delete"){e-=Math.min(f,e-o);continue}else h==="insert"&&(o<e||!t)&&(e+=f);o+=f}return e},l.exports=i},function(l,c){"use strict";var u=Object.prototype.hasOwnProperty,m=Object.prototype.toString,v=Object.defineProperty,g=Object.getOwnPropertyDescriptor,s=n(function(r){return typeof Array.isArray=="function"?Array.isArray(r):m.call(r)==="[object Array]"},"isArray"),a=n(function(r){if(!r||m.call(r)!=="[object Object]")return!1;var o=u.call(r,"constructor"),f=r.constructor&&r.constructor.prototype&&u.call(r.constructor.prototype,"isPrototypeOf");if(r.constructor&&!o&&!f)return!1;var h;for(h in r);return typeof h>"u"||u.call(r,h)},"isPlainObject"),i=n(function(r,o){v&&o.name==="__proto__"?v(r,o.name,{enumerable:!0,configurable:!0,value:o.newValue,writable:!0}):r[o.name]=o.newValue},"setProperty"),e=n(function(r,o){if(o==="__proto__")if(u.call(r,o)){if(g)return g(r,o).value}else return;return r[o]},"getProperty");l.exports=n(function t(){var r,o,f,h,p,d,y=arguments[0],S=1,b=arguments.length,_=!1;for(typeof y=="boolean"&&(_=y,y=arguments[1]||{},S=2),(y==null||typeof y!="object"&&typeof y!="function")&&(y={});S<b;++S)if(r=arguments[S],r!=null)for(o in r)f=e(y,o),h=e(r,o),y!==h&&(_&&h&&(a(h)||(p=s(h)))?(p?(p=!1,d=f&&s(f)?f:[]):d=f&&a(f)?f:{},i(y,{name:o,newValue:t(_,d,h)})):typeof h<"u"&&i(y,{name:o,newValue:h}));return y},"extend")},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.BlockEmbed=c.bubbleFormats=void 0;var m=function(){function D(I,M){for(var k=0;k<M.length;k++){var N=M[k];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(I,N.key,N)}}return n(D,"defineProperties"),function(I,M,k){return M&&D(I.prototype,M),k&&D(I,k),I}}(),v=n(function D(I,M,k){I===null&&(I=Function.prototype);var N=Object.getOwnPropertyDescriptor(I,M);if(N===void 0){var j=Object.getPrototypeOf(I);return j===null?void 0:D(j,M,k)}else{if("value"in N)return N.value;var B=N.get;return B===void 0?void 0:B.call(k)}},"get"),g=u(3),s=y(g),a=u(2),i=y(a),e=u(0),t=y(e),r=u(17),o=y(r),f=u(6),h=y(f),p=u(7),d=y(p);function y(D){return D&&D.__esModule?D:{default:D}}n(y,"_interopRequireDefault");function S(D,I){if(!(D instanceof I))throw new TypeError("Cannot call a class as a function")}n(S,"_classCallCheck");function b(D,I){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:D}n(b,"_possibleConstructorReturn");function _(D,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);D.prototype=Object.create(I&&I.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(D,I):D.__proto__=I)}n(_,"_inherits");var C=1,w=function(D){_(I,D);function I(){return S(this,I),b(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return n(I,"BlockEmbed"),m(I,[{key:"attach",value:n(function(){v(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"attach",this).call(this),this.attributes=new t.default.Attributor.Store(this.domNode)},"attach")},{key:"delta",value:n(function(){return new i.default().insert(this.value(),(0,s.default)(this.formats(),this.attributes.values()))},"delta")},{key:"format",value:n(function(k,N){var j=t.default.query(k,t.default.Scope.BLOCK_ATTRIBUTE);j!=null&&this.attributes.attribute(j,N)},"format")},{key:"formatAt",value:n(function(k,N,j,B){this.format(j,B)},"formatAt")},{key:"insertAt",value:n(function(k,N,j){if(typeof N=="string"&&N.endsWith(`
`)){var B=t.default.create(R.blotName);this.parent.insertBefore(B,k===0?this:this.next),B.insertAt(0,N.slice(0,-1))}else v(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertAt",this).call(this,k,N,j)},"insertAt")}]),I}(t.default.Embed);w.scope=t.default.Scope.BLOCK_BLOT;var R=function(D){_(I,D);function I(M){S(this,I);var k=b(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,M));return k.cache={},k}return n(I,"Block"),m(I,[{key:"delta",value:n(function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(t.default.Leaf).reduce(function(k,N){return N.length()===0?k:k.insert(N.value(),O(N))},new i.default).insert(`
`,O(this))),this.cache.delta},"delta")},{key:"deleteAt",value:n(function(k,N){v(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"deleteAt",this).call(this,k,N),this.cache={}},"deleteAt")},{key:"formatAt",value:n(function(k,N,j,B){N<=0||(t.default.query(j,t.default.Scope.BLOCK)?k+N===this.length()&&this.format(j,B):v(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"formatAt",this).call(this,k,Math.min(N,this.length()-k-1),j,B),this.cache={})},"formatAt")},{key:"insertAt",value:n(function(k,N,j){if(j!=null)return v(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertAt",this).call(this,k,N,j);if(N.length!==0){var B=N.split(`
`),J=B.shift();J.length>0&&(k<this.length()-1||this.children.tail==null?v(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertAt",this).call(this,Math.min(k,this.length()-1),J):this.children.tail.insertAt(this.children.tail.length(),J),this.cache={});var Q=this;B.reduce(function(oe,$){return Q=Q.split(oe,!0),Q.insertAt(0,$),$.length},k+J.length)}},"insertAt")},{key:"insertBefore",value:n(function(k,N){var j=this.children.head;v(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertBefore",this).call(this,k,N),j instanceof o.default&&j.remove(),this.cache={}},"insertBefore")},{key:"length",value:n(function(){return this.cache.length==null&&(this.cache.length=v(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"length",this).call(this)+C),this.cache.length},"length")},{key:"moveChildren",value:n(function(k,N){v(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"moveChildren",this).call(this,k,N),this.cache={}},"moveChildren")},{key:"optimize",value:n(function(k){v(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"optimize",this).call(this,k),this.cache={}},"optimize")},{key:"path",value:n(function(k){return v(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"path",this).call(this,k,!0)},"path")},{key:"removeChild",value:n(function(k){v(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"removeChild",this).call(this,k),this.cache={}},"removeChild")},{key:"split",value:n(function(k){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(N&&(k===0||k>=this.length()-C)){var j=this.clone();return k===0?(this.parent.insertBefore(j,this),this):(this.parent.insertBefore(j,this.next),j)}else{var B=v(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"split",this).call(this,k,N);return this.cache={},B}},"split")}]),I}(t.default.Block);R.blotName="block",R.tagName="P",R.defaultChild="break",R.allowedChildren=[h.default,t.default.Embed,d.default];function O(D){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D==null||(typeof D.formats=="function"&&(I=(0,s.default)(I,D.formats())),D.parent==null||D.parent.blotName=="scroll"||D.parent.statics.scope!==D.statics.scope)?I:O(D.parent,I)}n(O,"bubbleFormats"),c.bubbleFormats=O,c.BlockEmbed=w,c.default=R},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.overload=c.expandConfig=void 0;var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},v=function(){function Q(oe,$){var he=[],Ae=!0,Ee=!1,Oe=void 0;try{for(var be=oe[Symbol.iterator](),De;!(Ae=(De=be.next()).done)&&(he.push(De.value),!($&&he.length===$));Ae=!0);}catch(ut){Ee=!0,Oe=ut}finally{try{!Ae&&be.return&&be.return()}finally{if(Ee)throw Oe}}return he}return n(Q,"sliceIterator"),function(oe,$){if(Array.isArray(oe))return oe;if(Symbol.iterator in Object(oe))return Q(oe,$);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function Q(oe,$){for(var he=0;he<$.length;he++){var Ae=$[he];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(oe,Ae.key,Ae)}}return n(Q,"defineProperties"),function(oe,$,he){return $&&Q(oe.prototype,$),he&&Q(oe,he),oe}}();u(60);var s=u(2),a=O(s),i=u(15),e=O(i),t=u(8),r=O(t),o=u(9),f=O(o),h=u(0),p=O(h),d=u(16),y=O(d),S=u(3),b=O(S),_=u(10),C=O(_),w=u(44),R=O(w);function O(Q){return Q&&Q.__esModule?Q:{default:Q}}n(O,"_interopRequireDefault");function D(Q,oe,$){return oe in Q?Object.defineProperty(Q,oe,{value:$,enumerable:!0,configurable:!0,writable:!0}):Q[oe]=$,Q}n(D,"_defineProperty");function I(Q,oe){if(!(Q instanceof oe))throw new TypeError("Cannot call a class as a function")}n(I,"_classCallCheck");var M=(0,C.default)("quill"),k=function(){g(Q,null,[{key:"debug",value:n(function($){$===!0&&($="log"),C.default.level($)},"debug")},{key:"find",value:n(function($){return $.__quill||p.default.find($)},"find")},{key:"import",value:n(function($){return this.imports[$]==null&&M.error("Cannot import "+$+". Are you sure it was registered?"),this.imports[$]},"_import")},{key:"register",value:n(function($,he){var Ae=this,Ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof $!="string"){var Oe=$.attrName||$.blotName;typeof Oe=="string"?this.register("formats/"+Oe,$,he):Object.keys($).forEach(function(be){Ae.register(be,$[be],he)})}else this.imports[$]!=null&&!Ee&&M.warn("Overwriting "+$+" with",he),this.imports[$]=he,($.startsWith("blots/")||$.startsWith("formats/"))&&he.blotName!=="abstract"?p.default.register(he):$.startsWith("modules")&&typeof he.register=="function"&&he.register()},"register")}]);function Q(oe){var $=this,he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(I(this,Q),this.options=N(oe,he),this.container=this.options.container,this.container==null)return M.error("Invalid Quill container",oe);this.options.debug&&Q.debug(this.options.debug);var Ae=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.rootListeners=[];var Ee=this.root.addEventListener.bind(this.root);this.root.addEventListener=function(be,De,ut){Ee(be,De,ut),$.rootListeners.push([be,De,ut])},this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new r.default,this.scroll=p.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new e.default(this.scroll),this.selection=new y.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(r.default.events.EDITOR_CHANGE,function(be){be===r.default.events.TEXT_CHANGE&&$.root.classList.toggle("ql-blank",$.editor.isBlank())}),this.emitter.on(r.default.events.SCROLL_UPDATE,function(be,De){var ut=$.selection.lastRange,St=ut&&ut.length===0?ut.index:void 0;j.call($,function(){return $.editor.update(null,De,St)},be)});var Oe=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+Ae+"<p><br></p></div>");this.setContents(Oe),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return n(Q,"Quill"),g(Q,[{key:"addContainer",value:n(function($){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof $=="string"){var Ae=$;$=document.createElement("div"),$.classList.add(Ae)}return this.container.insertBefore($,he),$},"addContainer")},{key:"blur",value:n(function(){this.selection.setRange(null)},"blur")},{key:"deleteText",value:n(function($,he,Ae){var Ee=this,Oe=B($,he,Ae),be=v(Oe,4);return $=be[0],he=be[1],Ae=be[3],j.call(this,function(){return Ee.editor.deleteText($,he)},Ae,$,-1*he)},"deleteText")},{key:"disable",value:n(function(){this.enable(!1)},"disable")},{key:"enable",value:n(function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable($),this.container.classList.toggle("ql-disabled",!$)},"enable")},{key:"focus",value:n(function(){var $=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=$,this.scrollIntoView()},"focus")},{key:"format",value:n(function($,he){var Ae=this,Ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:r.default.sources.API;return j.call(this,function(){var Oe=Ae.getSelection(!0),be=new a.default;if(Oe==null)return be;if(p.default.query($,p.default.Scope.BLOCK))be=Ae.editor.formatLine(Oe.index,Oe.length,D({},$,he));else{if(Oe.length===0)return Ae.selection.format($,he),be;be=Ae.editor.formatText(Oe.index,Oe.length,D({},$,he))}return Ae.setSelection(Oe,r.default.sources.SILENT),be},Ee)},"format")},{key:"formatLine",value:n(function($,he,Ae,Ee,Oe){var be=this,De=void 0,ut=B($,he,Ae,Ee,Oe),St=v(ut,4);return $=St[0],he=St[1],De=St[2],Oe=St[3],j.call(this,function(){return be.editor.formatLine($,he,De)},Oe,$,0)},"formatLine")},{key:"formatText",value:n(function($,he,Ae,Ee,Oe){var be=this,De=void 0,ut=B($,he,Ae,Ee,Oe),St=v(ut,4);return $=St[0],he=St[1],De=St[2],Oe=St[3],j.call(this,function(){return be.editor.formatText($,he,De)},Oe,$,0)},"formatText")},{key:"getBounds",value:n(function($){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Ae=void 0;typeof $=="number"?Ae=this.selection.getBounds($,he):Ae=this.selection.getBounds($.index,$.length);var Ee=this.container.getBoundingClientRect();return{bottom:Ae.bottom-Ee.top,height:Ae.height,left:Ae.left-Ee.left,right:Ae.right-Ee.left,top:Ae.top-Ee.top,width:Ae.width}},"getBounds")},{key:"getContents",value:n(function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-$,Ae=B($,he),Ee=v(Ae,2);return $=Ee[0],he=Ee[1],this.editor.getContents($,he)},"getContents")},{key:"getFormat",value:n(function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof $=="number"?this.editor.getFormat($,he):this.editor.getFormat($.index,$.length)},"getFormat")},{key:"getIndex",value:n(function($){return $.offset(this.scroll)},"getIndex")},{key:"getLength",value:n(function(){return this.scroll.length()},"getLength")},{key:"getLeaf",value:n(function($){return this.scroll.leaf($)},"getLeaf")},{key:"getLine",value:n(function($){return this.scroll.line($)},"getLine")},{key:"getLines",value:n(function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof $!="number"?this.scroll.lines($.index,$.length):this.scroll.lines($,he)},"getLines")},{key:"getModule",value:n(function($){return this.theme.modules[$]},"getModule")},{key:"getSelection",value:n(function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return $&&this.focus(),this.update(),this.selection.getRange()[0]},"getSelection")},{key:"getText",value:n(function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-$,Ae=B($,he),Ee=v(Ae,2);return $=Ee[0],he=Ee[1],this.editor.getText($,he)},"getText")},{key:"hasFocus",value:n(function(){return this.selection.hasFocus()},"hasFocus")},{key:"insertEmbed",value:n(function($,he,Ae){var Ee=this,Oe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Q.sources.API;return j.call(this,function(){return Ee.editor.insertEmbed($,he,Ae)},Oe,$)},"insertEmbed")},{key:"insertText",value:n(function($,he,Ae,Ee,Oe){var be=this,De=void 0,ut=B($,0,Ae,Ee,Oe),St=v(ut,4);return $=St[0],De=St[2],Oe=St[3],j.call(this,function(){return be.editor.insertText($,he,De)},Oe,$,he.length)},"insertText")},{key:"isEnabled",value:n(function(){return!this.container.classList.contains("ql-disabled")},"isEnabled")},{key:"off",value:n(function(){return this.emitter.off.apply(this.emitter,arguments)},"off")},{key:"on",value:n(function(){return this.emitter.on.apply(this.emitter,arguments)},"on")},{key:"once",value:n(function(){return this.emitter.once.apply(this.emitter,arguments)},"once")},{key:"pasteHTML",value:n(function($,he,Ae){this.clipboard.dangerouslyPasteHTML($,he,Ae)},"pasteHTML")},{key:"removeFormat",value:n(function($,he,Ae){var Ee=this,Oe=B($,he,Ae),be=v(Oe,4);return $=be[0],he=be[1],Ae=be[3],j.call(this,function(){return Ee.editor.removeFormat($,he)},Ae,$)},"removeFormat")},{key:"scrollIntoView",value:n(function(){this.selection.scrollIntoView(this.scrollingContainer)},"scrollIntoView")},{key:"setContents",value:n(function($){var he=this,Ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r.default.sources.API;return j.call(this,function(){$=new a.default($);var Ee=he.getLength(),Oe=he.editor.deleteText(0,Ee),be=he.editor.applyDelta($),De=be.ops[be.ops.length-1];De!=null&&typeof De.insert=="string"&&De.insert[De.insert.length-1]===`
`&&(he.editor.deleteText(he.getLength()-1,1),be.delete(1));var ut=Oe.compose(be);return ut},Ae)},"setContents")},{key:"setSelection",value:n(function($,he,Ae){if($==null)this.selection.setRange(null,he||Q.sources.API);else{var Ee=B($,he,Ae),Oe=v(Ee,4);$=Oe[0],he=Oe[1],Ae=Oe[3],this.selection.setRange(new d.Range($,he),Ae),Ae!==r.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}},"setSelection")},{key:"setText",value:n(function($){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r.default.sources.API,Ae=new a.default().insert($);return this.setContents(Ae,he)},"setText")},{key:"update",value:n(function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r.default.sources.USER,he=this.scroll.update($);return this.selection.update($),he},"update")},{key:"updateContents",value:n(function($){var he=this,Ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r.default.sources.API;return j.call(this,function(){return $=new a.default($),he.editor.applyDelta($,Ae)},Ae,!0)},"updateContents")}]),Q}();k.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},k.events=r.default.events,k.sources=r.default.sources,k.version="1.3.7",k.imports={delta:a.default,parchment:p.default,"core/module":f.default,"core/theme":R.default};function N(Q,oe){if(oe=(0,b.default)(!0,{container:Q,modules:{clipboard:!0,keyboard:!0,history:!0}},oe),!oe.theme||oe.theme===k.DEFAULTS.theme)oe.theme=R.default;else if(oe.theme=k.import("themes/"+oe.theme),oe.theme==null)throw new Error("Invalid theme "+oe.theme+". Did you register it?");var $=(0,b.default)(!0,{},oe.theme.DEFAULTS);[$,oe].forEach(function(Ee){Ee.modules=Ee.modules||{},Object.keys(Ee.modules).forEach(function(Oe){Ee.modules[Oe]===!0&&(Ee.modules[Oe]={})})});var he=Object.keys($.modules).concat(Object.keys(oe.modules)),Ae=he.reduce(function(Ee,Oe){var be=k.import("modules/"+Oe);return be==null?M.error("Cannot load "+Oe+" module. Are you sure you registered it?"):Ee[Oe]=be.DEFAULTS||{},Ee},{});return oe.modules!=null&&oe.modules.toolbar&&oe.modules.toolbar.constructor!==Object&&(oe.modules.toolbar={container:oe.modules.toolbar}),oe=(0,b.default)(!0,{},k.DEFAULTS,{modules:Ae},$,oe),["bounds","container","scrollingContainer"].forEach(function(Ee){typeof oe[Ee]=="string"&&(oe[Ee]=document.querySelector(oe[Ee]))}),oe.modules=Object.keys(oe.modules).reduce(function(Ee,Oe){return oe.modules[Oe]&&(Ee[Oe]=oe.modules[Oe]),Ee},{}),oe}n(N,"expandConfig");function j(Q,oe,$,he){if(this.options.strict&&!this.isEnabled()&&oe===r.default.sources.USER)return new a.default;var Ae=$==null?null:this.getSelection(),Ee=this.editor.delta,Oe=Q();if(Ae!=null&&($===!0&&($=Ae.index),he==null?Ae=J(Ae,Oe,oe):he!==0&&(Ae=J(Ae,$,he,oe)),this.setSelection(Ae,r.default.sources.SILENT)),Oe.length()>0){var be,De=[r.default.events.TEXT_CHANGE,Oe,Ee,oe];if((be=this.emitter).emit.apply(be,[r.default.events.EDITOR_CHANGE].concat(De)),oe!==r.default.sources.SILENT){var ut;(ut=this.emitter).emit.apply(ut,De)}}return Oe}n(j,"modify");function B(Q,oe,$,he,Ae){var Ee={};return typeof Q.index=="number"&&typeof Q.length=="number"?typeof oe!="number"?(Ae=he,he=$,$=oe,oe=Q.length,Q=Q.index):(oe=Q.length,Q=Q.index):typeof oe!="number"&&(Ae=he,he=$,$=oe,oe=0),(typeof $>"u"?"undefined":m($))==="object"?(Ee=$,Ae=he):typeof $=="string"&&(he!=null?Ee[$]=he:Ae=$),Ae=Ae||r.default.sources.API,[Q,oe,Ee,Ae]}n(B,"overload");function J(Q,oe,$,he){if(Q==null)return null;var Ae=void 0,Ee=void 0;if(oe instanceof a.default){var Oe=[Q.index,Q.index+Q.length].map(function(St){return oe.transformPosition(St,he!==r.default.sources.USER)}),be=v(Oe,2);Ae=be[0],Ee=be[1]}else{var De=[Q.index,Q.index+Q.length].map(function(St){return St<oe||St===oe&&he===r.default.sources.USER?St:$>=0?St+$:Math.max(oe,St+$)}),ut=v(De,2);Ae=ut[0],Ee=ut[1]}return new d.Range(Ae,Ee-Ae)}n(J,"shiftRange"),c.expandConfig=N,c.overload=B,c.default=k},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=function(){function h(p,d){for(var y=0;y<d.length;y++){var S=d[y];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(p,S.key,S)}}return n(h,"defineProperties"),function(p,d,y){return d&&h(p.prototype,d),y&&h(p,y),p}}(),v=n(function h(p,d,y){p===null&&(p=Function.prototype);var S=Object.getOwnPropertyDescriptor(p,d);if(S===void 0){var b=Object.getPrototypeOf(p);return b===null?void 0:h(b,d,y)}else{if("value"in S)return S.value;var _=S.get;return _===void 0?void 0:_.call(y)}},"get"),g=u(7),s=e(g),a=u(0),i=e(a);function e(h){return h&&h.__esModule?h:{default:h}}n(e,"_interopRequireDefault");function t(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}n(t,"_classCallCheck");function r(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}n(r,"_possibleConstructorReturn");function o(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}n(o,"_inherits");var f=function(h){o(p,h);function p(){return t(this,p),r(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return n(p,"Inline"),m(p,[{key:"formatAt",value:n(function(y,S,b,_){if(p.compare(this.statics.blotName,b)<0&&i.default.query(b,i.default.Scope.BLOT)){var C=this.isolate(y,S);_&&C.wrap(b,_)}else v(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"formatAt",this).call(this,y,S,b,_)},"formatAt")},{key:"optimize",value:n(function(y){if(v(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"optimize",this).call(this,y),this.parent instanceof p&&p.compare(this.statics.blotName,this.parent.statics.blotName)>0){var S=this.parent.isolate(this.offset(),this.length());this.moveChildren(S),S.wrap(this)}},"optimize")}],[{key:"compare",value:n(function(y,S){var b=p.order.indexOf(y),_=p.order.indexOf(S);return b>=0||_>=0?b-_:y===S?0:y<S?-1:1},"compare")}]),p}(i.default.Inline);f.allowedChildren=[f,i.default.Embed,s.default],f.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],c.default=f},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=u(0),v=g(m);function g(t){return t&&t.__esModule?t:{default:t}}n(g,"_interopRequireDefault");function s(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}n(s,"_classCallCheck");function a(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:t}n(a,"_possibleConstructorReturn");function i(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}n(i,"_inherits");var e=function(t){i(r,t);function r(){return s(this,r),a(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return n(r,"TextBlot"),r}(v.default.Text);c.default=e},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=function(){function d(y,S){for(var b=0;b<S.length;b++){var _=S[b];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}return n(d,"defineProperties"),function(y,S,b){return S&&d(y.prototype,S),b&&d(y,b),y}}(),v=n(function d(y,S,b){y===null&&(y=Function.prototype);var _=Object.getOwnPropertyDescriptor(y,S);if(_===void 0){var C=Object.getPrototypeOf(y);return C===null?void 0:d(C,S,b)}else{if("value"in _)return _.value;var w=_.get;return w===void 0?void 0:w.call(b)}},"get"),g=u(74),s=e(g),a=u(10),i=e(a);function e(d){return d&&d.__esModule?d:{default:d}}n(e,"_interopRequireDefault");function t(d,y){if(!(d instanceof y))throw new TypeError("Cannot call a class as a function")}n(t,"_classCallCheck");function r(d,y){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:d}n(r,"_possibleConstructorReturn");function o(d,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);d.prototype=Object.create(y&&y.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(d,y):d.__proto__=y)}n(o,"_inherits");var f=(0,i.default)("quill:events"),h=["selectionchange","mousedown","mouseup","click"];h.forEach(function(d){document.addEventListener(d,function(){for(var y=arguments.length,S=Array(y),b=0;b<y;b++)S[b]=arguments[b];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(_){if(_.__quill&&_.__quill.emitter){var C;(C=_.__quill.emitter).handleDOM.apply(C,S)}})})});var p=function(d){o(y,d);function y(){t(this,y);var S=r(this,(y.__proto__||Object.getPrototypeOf(y)).call(this));return S.listeners={},S.on("error",f.error),S}return n(y,"Emitter"),m(y,[{key:"emit",value:n(function(){f.log.apply(f,arguments),v(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"emit",this).apply(this,arguments)},"emit")},{key:"handleDOM",value:n(function(b){for(var _=arguments.length,C=Array(_>1?_-1:0),w=1;w<_;w++)C[w-1]=arguments[w];(this.listeners[b.type]||[]).forEach(function(R){var O=R.node,D=R.handler;(b.target===O||O.contains(b.target))&&D.apply(void 0,[b].concat(C))})},"handleDOM")},{key:"listenDOM",value:n(function(b,_,C){this.listeners[b]||(this.listeners[b]=[]),this.listeners[b].push({node:_,handler:C})},"listenDOM")}]),y}(s.default);p.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},p.sources={API:"api",SILENT:"silent",USER:"user"},c.default=p},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});function m(g,s){if(!(g instanceof s))throw new TypeError("Cannot call a class as a function")}n(m,"_classCallCheck");var v=n(function g(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};m(this,g),this.quill=s,this.options=a},"Module");v.DEFAULTS={},c.default=v},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=["error","warn","log","info"],v="warn";function g(a){if(m.indexOf(a)<=m.indexOf(v)){for(var i,e=arguments.length,t=Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];(i=console)[a].apply(i,t)}}n(g,"debug");function s(a){return m.reduce(function(i,e){return i[e]=g.bind(console,e,a),i},{})}n(s,"namespace"),g.level=s.level=function(a){v=a},c.default=s},function(l,c,u){var m=u(35),v=u(63),g=u(64),s=u(70),a=u(71),i=u(73),e=Date.prototype.getTime;function t(h,p,d){var y=d||{};return(y.strict?g(h,p):h===p)?!0:!h||!p||typeof h!="object"&&typeof p!="object"?y.strict?g(h,p):h==p:f(h,p,y)}n(t,"deepEqual");function r(h){return h==null}n(r,"isUndefinedOrNull");function o(h){return!(!h||typeof h!="object"||typeof h.length!="number"||typeof h.copy!="function"||typeof h.slice!="function"||h.length>0&&typeof h[0]!="number")}n(o,"isBuffer");function f(h,p,d){var y,S;if(typeof h!=typeof p||r(h)||r(p)||h.prototype!==p.prototype||v(h)!==v(p))return!1;var b=s(h),_=s(p);if(b!==_)return!1;if(b||_)return h.source===p.source&&a(h)===a(p);if(i(h)&&i(p))return e.call(h)===e.call(p);var C=o(h),w=o(p);if(C!==w)return!1;if(C||w){if(h.length!==p.length)return!1;for(y=0;y<h.length;y++)if(h[y]!==p[y])return!1;return!0}if(typeof h!=typeof p)return!1;try{var R=m(h),O=m(p)}catch{return!1}if(R.length!==O.length)return!1;for(R.sort(),O.sort(),y=R.length-1;y>=0;y--)if(R[y]!=O[y])return!1;for(y=R.length-1;y>=0;y--)if(S=R[y],!t(h[S],p[S],d))return!1;return!0}n(f,"objEquiv"),l.exports=t},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=u(1),v=function(){function g(s,a,i){i===void 0&&(i={}),this.attrName=s,this.keyName=a;var e=m.Scope.TYPE&m.Scope.ATTRIBUTE;i.scope!=null?this.scope=i.scope&m.Scope.LEVEL|e:this.scope=m.Scope.ATTRIBUTE,i.whitelist!=null&&(this.whitelist=i.whitelist)}return n(g,"Attributor"),g.keys=function(s){return[].map.call(s.attributes,function(a){return a.name})},g.prototype.add=function(s,a){return this.canAdd(s,a)?(s.setAttribute(this.keyName,a),!0):!1},g.prototype.canAdd=function(s,a){var i=m.query(s,m.Scope.BLOT&(this.scope|m.Scope.TYPE));return i==null?!1:this.whitelist==null?!0:typeof a=="string"?this.whitelist.indexOf(a.replace(/["']/g,""))>-1:this.whitelist.indexOf(a)>-1},g.prototype.remove=function(s){s.removeAttribute(this.keyName)},g.prototype.value=function(s){var a=s.getAttribute(this.keyName);return this.canAdd(s,a)&&a?a:""},g}();c.default=v},function(l,c,u){"use strict";var m=u(35),v=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",g=Object.prototype.toString,s=Array.prototype.concat,a=Object.defineProperty,i=n(function(f){return typeof f=="function"&&g.call(f)==="[object Function]"},"isFunction"),e=n(function(){var f={};try{a(f,"x",{enumerable:!1,value:f});for(var h in f)return!1;return f.x===f}catch{return!1}},"arePropertyDescriptorsSupported"),t=a&&e(),r=n(function(f,h,p,d){h in f&&(!i(d)||!d())||(t?a(f,h,{configurable:!0,enumerable:!1,value:p,writable:!0}):f[h]=p)},"defineProperty"),o=n(function(f,h){var p=arguments.length>2?arguments[2]:{},d=m(h);v&&(d=s.call(d,Object.getOwnPropertySymbols(h)));for(var y=0;y<d.length;y+=1)r(f,d[y],h[d[y]],p[d[y]])},"defineProperties");o.supportsDescriptors=!!t,l.exports=o},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.Code=void 0;var m=function(){function w(R,O){var D=[],I=!0,M=!1,k=void 0;try{for(var N=R[Symbol.iterator](),j;!(I=(j=N.next()).done)&&(D.push(j.value),!(O&&D.length===O));I=!0);}catch(B){M=!0,k=B}finally{try{!I&&N.return&&N.return()}finally{if(M)throw k}}return D}return n(w,"sliceIterator"),function(R,O){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return w(R,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=function(){function w(R,O){for(var D=0;D<O.length;D++){var I=O[D];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(R,I.key,I)}}return n(w,"defineProperties"),function(R,O,D){return O&&w(R.prototype,O),D&&w(R,D),R}}(),g=n(function w(R,O,D){R===null&&(R=Function.prototype);var I=Object.getOwnPropertyDescriptor(R,O);if(I===void 0){var M=Object.getPrototypeOf(R);return M===null?void 0:w(M,O,D)}else{if("value"in I)return I.value;var k=I.get;return k===void 0?void 0:k.call(D)}},"get"),s=u(2),a=d(s),i=u(0),e=d(i),t=u(4),r=d(t),o=u(6),f=d(o),h=u(7),p=d(h);function d(w){return w&&w.__esModule?w:{default:w}}n(d,"_interopRequireDefault");function y(w,R){if(!(w instanceof R))throw new TypeError("Cannot call a class as a function")}n(y,"_classCallCheck");function S(w,R){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:w}n(S,"_possibleConstructorReturn");function b(w,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);w.prototype=Object.create(R&&R.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(w,R):w.__proto__=R)}n(b,"_inherits");var _=function(w){b(R,w);function R(){return y(this,R),S(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return n(R,"Code"),R}(f.default);_.blotName="code",_.tagName="CODE";var C=function(w){b(R,w);function R(){return y(this,R),S(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return n(R,"CodeBlock"),v(R,[{key:"delta",value:n(function(){var D=this,I=this.domNode.textContent;return I.endsWith(`
`)&&(I=I.slice(0,-1)),I.split(`
`).reduce(function(M,k){return M.insert(k).insert(`
`,D.formats())},new a.default)},"delta")},{key:"format",value:n(function(D,I){if(!(D===this.statics.blotName&&I)){var M=this.descendant(p.default,this.length()-1),k=m(M,1),N=k[0];N!=null&&N.deleteAt(N.length()-1,1),g(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"format",this).call(this,D,I)}},"format")},{key:"formatAt",value:n(function(D,I,M,k){if(I!==0&&!(e.default.query(M,e.default.Scope.BLOCK)==null||M===this.statics.blotName&&k===this.statics.formats(this.domNode))){var N=this.newlineIndex(D);if(!(N<0||N>=D+I)){var j=this.newlineIndex(D,!0)+1,B=N-j+1,J=this.isolate(j,B),Q=J.next;J.format(M,k),Q instanceof R&&Q.formatAt(0,D-j+I-B,M,k)}}},"formatAt")},{key:"insertAt",value:n(function(D,I,M){if(M==null){var k=this.descendant(p.default,D),N=m(k,2),j=N[0],B=N[1];j.insertAt(B,I)}},"insertAt")},{key:"length",value:n(function(){var D=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?D:D+1},"length")},{key:"newlineIndex",value:n(function(D){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(I)return this.domNode.textContent.slice(0,D).lastIndexOf(`
`);var M=this.domNode.textContent.slice(D).indexOf(`
`);return M>-1?D+M:-1},"newlineIndex")},{key:"optimize",value:n(function(D){this.domNode.textContent.endsWith(`
`)||this.appendChild(e.default.create("text",`
`)),g(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"optimize",this).call(this,D);var I=this.next;I!=null&&I.prev===this&&I.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===I.statics.formats(I.domNode)&&(I.optimize(D),I.moveChildren(this),I.remove())},"optimize")},{key:"replace",value:n(function(D){g(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"replace",this).call(this,D),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(I){var M=e.default.find(I);M==null?I.parentNode.removeChild(I):M instanceof e.default.Embed?M.remove():M.unwrap()})},"replace")}],[{key:"create",value:n(function(D){var I=g(R.__proto__||Object.getPrototypeOf(R),"create",this).call(this,D);return I.setAttribute("spellcheck",!1),I},"create")},{key:"formats",value:n(function(){return!0},"formats")}]),R}(r.default);C.blotName="code-block",C.tagName="PRE",C.TAB="  ",c.Code=_,c.default=C},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},v=function(){function Q(oe,$){var he=[],Ae=!0,Ee=!1,Oe=void 0;try{for(var be=oe[Symbol.iterator](),De;!(Ae=(De=be.next()).done)&&(he.push(De.value),!($&&he.length===$));Ae=!0);}catch(ut){Ee=!0,Oe=ut}finally{try{!Ae&&be.return&&be.return()}finally{if(Ee)throw Oe}}return he}return n(Q,"sliceIterator"),function(oe,$){if(Array.isArray(oe))return oe;if(Symbol.iterator in Object(oe))return Q(oe,$);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function Q(oe,$){for(var he=0;he<$.length;he++){var Ae=$[he];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(oe,Ae.key,Ae)}}return n(Q,"defineProperties"),function(oe,$,he){return $&&Q(oe.prototype,$),he&&Q(oe,he),oe}}(),s=u(2),a=I(s),i=u(21),e=I(i),t=u(0),r=I(t),o=u(14),f=I(o),h=u(25),p=I(h),d=u(4),y=I(d),S=u(17),b=I(S),_=u(22),C=I(_),w=u(11),R=I(w),O=u(3),D=I(O);function I(Q){return Q&&Q.__esModule?Q:{default:Q}}n(I,"_interopRequireDefault");function M(Q,oe,$){return oe in Q?Object.defineProperty(Q,oe,{value:$,enumerable:!0,configurable:!0,writable:!0}):Q[oe]=$,Q}n(M,"_defineProperty");function k(Q,oe){if(!(Q instanceof oe))throw new TypeError("Cannot call a class as a function")}n(k,"_classCallCheck");var N=/^[ -~]*$/,j=function(){function Q(oe){k(this,Q),this.scroll=oe,this.delta=this.getDelta()}return n(Q,"Editor"),g(Q,[{key:"applyDelta",value:n(function($){var he=this,Ae=!1;this.scroll.update();var Ee=this.scroll.length();return this.scroll.batchStart(),$=J($),$.reduce(function(Oe,be){var De=be.retain||be.delete||be.insert.length||1,ut=be.attributes||{};if(be.insert!=null){if(typeof be.insert=="string"){var St=be.insert;St.endsWith(`
`)&&Ae&&(Ae=!1,St=St.slice(0,-1)),Oe>=Ee&&!St.endsWith(`
`)&&(Ae=!0),he.scroll.insertAt(Oe,St);var Rt=he.scroll.line(Oe),Ze=v(Rt,2),mt=Ze[0],At=Ze[1],Vt=(0,D.default)({},(0,d.bubbleFormats)(mt));if(mt instanceof y.default){var dt=mt.descendant(r.default.Leaf,At),Cn=v(dt,1),gt=Cn[0];Vt=(0,D.default)(Vt,(0,d.bubbleFormats)(gt))}ut=e.default.attributes.diff(Vt,ut)||{}}else if(m(be.insert)==="object"){var Ut=Object.keys(be.insert)[0];if(Ut==null)return Oe;he.scroll.insertAt(Oe,Ut,be.insert[Ut])}Ee+=De}return Object.keys(ut).forEach(function(en){he.scroll.formatAt(Oe,De,en,ut[en])}),Oe+De},0),$.reduce(function(Oe,be){return typeof be.delete=="number"?(he.scroll.deleteAt(Oe,be.delete),Oe):Oe+(be.retain||be.insert.length||1)},0),this.scroll.batchEnd(),this.update($)},"applyDelta")},{key:"deleteText",value:n(function($,he){return this.scroll.deleteAt($,he),this.update(new a.default().retain($).delete(he))},"deleteText")},{key:"formatLine",value:n(function($,he){var Ae=this,Ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(Ee).forEach(function(Oe){if(!(Ae.scroll.whitelist!=null&&!Ae.scroll.whitelist[Oe])){var be=Ae.scroll.lines($,Math.max(he,1)),De=he;be.forEach(function(ut){var St=ut.length();if(!(ut instanceof f.default))ut.format(Oe,Ee[Oe]);else{var Rt=$-ut.offset(Ae.scroll),Ze=ut.newlineIndex(Rt+De)-Rt+1;ut.formatAt(Rt,Ze,Oe,Ee[Oe])}De-=St})}}),this.scroll.optimize(),this.update(new a.default().retain($).retain(he,(0,C.default)(Ee)))},"formatLine")},{key:"formatText",value:n(function($,he){var Ae=this,Ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(Ee).forEach(function(Oe){Ae.scroll.formatAt($,he,Oe,Ee[Oe])}),this.update(new a.default().retain($).retain(he,(0,C.default)(Ee)))},"formatText")},{key:"getContents",value:n(function($,he){return this.delta.slice($,$+he)},"getContents")},{key:"getDelta",value:n(function(){return this.scroll.lines().reduce(function($,he){return $.concat(he.delta())},new a.default)},"getDelta")},{key:"getFormat",value:n(function($){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Ae=[],Ee=[];he===0?this.scroll.path($).forEach(function(be){var De=v(be,1),ut=De[0];ut instanceof y.default?Ae.push(ut):ut instanceof r.default.Leaf&&Ee.push(ut)}):(Ae=this.scroll.lines($,he),Ee=this.scroll.descendants(r.default.Leaf,$,he));var Oe=[Ae,Ee].map(function(be){if(be.length===0)return{};for(var De=(0,d.bubbleFormats)(be.shift());Object.keys(De).length>0;){var ut=be.shift();if(ut==null)return De;De=B((0,d.bubbleFormats)(ut),De)}return De});return D.default.apply(D.default,Oe)},"getFormat")},{key:"getText",value:n(function($,he){return this.getContents($,he).filter(function(Ae){return typeof Ae.insert=="string"}).map(function(Ae){return Ae.insert}).join("")},"getText")},{key:"insertEmbed",value:n(function($,he,Ae){return this.scroll.insertAt($,he,Ae),this.update(new a.default().retain($).insert(M({},he,Ae)))},"insertEmbed")},{key:"insertText",value:n(function($,he){var Ae=this,Ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return he=he.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt($,he),Object.keys(Ee).forEach(function(Oe){Ae.scroll.formatAt($,he.length,Oe,Ee[Oe])}),this.update(new a.default().retain($).insert(he,(0,C.default)(Ee)))},"insertText")},{key:"isBlank",value:n(function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var $=this.scroll.children.head;return $.statics.blotName!==y.default.blotName||$.children.length>1?!1:$.children.head instanceof b.default},"isBlank")},{key:"removeFormat",value:n(function($,he){var Ae=this.getText($,he),Ee=this.scroll.line($+he),Oe=v(Ee,2),be=Oe[0],De=Oe[1],ut=0,St=new a.default;be!=null&&(be instanceof f.default?ut=be.newlineIndex(De)-De+1:ut=be.length()-De,St=be.delta().slice(De,De+ut-1).insert(`
`));var Rt=this.getContents($,he+ut),Ze=Rt.diff(new a.default().insert(Ae).concat(St)),mt=new a.default().retain($).concat(Ze);return this.applyDelta(mt)},"removeFormat")},{key:"update",value:n(function($){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,Ee=this.delta;if(he.length===1&&he[0].type==="characterData"&&he[0].target.data.match(N)&&r.default.find(he[0].target)){var Oe=r.default.find(he[0].target),be=(0,d.bubbleFormats)(Oe),De=Oe.offset(this.scroll),ut=he[0].oldValue.replace(p.default.CONTENTS,""),St=new a.default().insert(ut),Rt=new a.default().insert(Oe.value()),Ze=new a.default().retain(De).concat(St.diff(Rt,Ae));$=Ze.reduce(function(mt,At){return At.insert?mt.insert(At.insert,be):mt.push(At)},new a.default),this.delta=Ee.compose($)}else this.delta=this.getDelta(),(!$||!(0,R.default)(Ee.compose($),this.delta))&&($=Ee.diff(this.delta,Ae));return $},"update")}]),Q}();function B(Q,oe){return Object.keys(oe).reduce(function($,he){return Q[he]==null||(oe[he]===Q[he]?$[he]=oe[he]:Array.isArray(oe[he])?oe[he].indexOf(Q[he])<0&&($[he]=oe[he].concat([Q[he]])):$[he]=[oe[he],Q[he]]),$},{})}n(B,"combineFormats");function J(Q){return Q.reduce(function(oe,$){if($.insert===1){var he=(0,C.default)($.attributes);return delete he.image,oe.insert({image:$.attributes.image},he)}if($.attributes!=null&&($.attributes.list===!0||$.attributes.bullet===!0)&&($=(0,C.default)($),$.attributes.list?$.attributes.list="ordered":($.attributes.list="bullet",delete $.attributes.bullet)),typeof $.insert=="string"){var Ae=$.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return oe.insert(Ae,$.attributes)}return oe.push($)},new a.default)}n(J,"normalizeDelta"),c.default=j},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.Range=void 0;var m=function(){function w(R,O){var D=[],I=!0,M=!1,k=void 0;try{for(var N=R[Symbol.iterator](),j;!(I=(j=N.next()).done)&&(D.push(j.value),!(O&&D.length===O));I=!0);}catch(B){M=!0,k=B}finally{try{!I&&N.return&&N.return()}finally{if(M)throw k}}return D}return n(w,"sliceIterator"),function(R,O){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return w(R,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=function(){function w(R,O){for(var D=0;D<O.length;D++){var I=O[D];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(R,I.key,I)}}return n(w,"defineProperties"),function(R,O,D){return O&&w(R.prototype,O),D&&w(R,D),R}}(),g=u(0),s=p(g),a=u(22),i=p(a),e=u(11),t=p(e),r=u(8),o=p(r),f=u(10),h=p(f);function p(w){return w&&w.__esModule?w:{default:w}}n(p,"_interopRequireDefault");function d(w){if(Array.isArray(w)){for(var R=0,O=Array(w.length);R<w.length;R++)O[R]=w[R];return O}else return Array.from(w)}n(d,"_toConsumableArray");function y(w,R){if(!(w instanceof R))throw new TypeError("Cannot call a class as a function")}n(y,"_classCallCheck");var S=(0,h.default)("quill:selection"),b=n(function w(R){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;y(this,w),this.index=R,this.length=O},"Range"),_=function(){function w(R,O){var D=this;y(this,w),this.emitter=O,this.scroll=R,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=s.default.create("cursor",this),this.lastRange=this.savedRange=new b(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){D.mouseDown||setTimeout(D.update.bind(D,o.default.sources.USER),1)}),this.emitter.on(o.default.events.EDITOR_CHANGE,function(I,M){I===o.default.events.TEXT_CHANGE&&M.length()>0&&D.update(o.default.sources.SILENT)}),this.emitter.on(o.default.events.SCROLL_BEFORE_UPDATE,function(){if(D.hasFocus()){var I=D.getNativeRange();I!=null&&I.start.node!==D.cursor.textNode&&D.emitter.once(o.default.events.SCROLL_UPDATE,function(){try{D.root.contains(I.start.node)&&D.root.contains(I.end.node)&&D.setNativeRange(I.start.node,I.start.offset,I.end.node,I.end.offset)}catch{}})}}),this.emitter.on(o.default.events.SCROLL_OPTIMIZE,function(I,M){if(M.range){var k=M.range,N=k.startNode,j=k.startOffset,B=k.endNode,J=k.endOffset;D.setNativeRange(N,j,B,J)}}),this.update(o.default.sources.SILENT)}return n(w,"Selection"),v(w,[{key:"handleComposition",value:n(function(){var O=this;this.root.addEventListener("compositionstart",function(){O.composing=!0}),this.root.addEventListener("compositionend",function(){if(O.composing=!1,O.cursor.parent){var D=O.cursor.restore();if(!D)return;setTimeout(function(){O.setNativeRange(D.startNode,D.startOffset,D.endNode,D.endOffset)},1)}})},"handleComposition")},{key:"handleDragging",value:n(function(){var O=this;this.emitter.listenDOM("mousedown",document.body,function(){O.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){O.mouseDown=!1,O.update(o.default.sources.USER)})},"handleDragging")},{key:"focus",value:n(function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))},"focus")},{key:"format",value:n(function(O,D){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[O])){this.scroll.update();var I=this.getNativeRange();if(!(I==null||!I.native.collapsed||s.default.query(O,s.default.Scope.BLOCK))){if(I.start.node!==this.cursor.textNode){var M=s.default.find(I.start.node,!1);if(M==null)return;if(M instanceof s.default.Leaf){var k=M.split(I.start.offset);M.parent.insertBefore(this.cursor,k)}else M.insertBefore(this.cursor,I.start.node);this.cursor.attach()}this.cursor.format(O,D),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}},"format")},{key:"getBounds",value:n(function(O){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,I=this.scroll.length();O=Math.min(O,I-1),D=Math.min(O+D,I-1)-O;var M=void 0,k=this.scroll.leaf(O),N=m(k,2),j=N[0],B=N[1];if(j==null)return null;var J=j.position(B,!0),Q=m(J,2);M=Q[0],B=Q[1];var oe=document.createRange();if(D>0){oe.setStart(M,B);var $=this.scroll.leaf(O+D),he=m($,2);if(j=he[0],B=he[1],j==null)return null;var Ae=j.position(B,!0),Ee=m(Ae,2);return M=Ee[0],B=Ee[1],oe.setEnd(M,B),oe.getBoundingClientRect()}else{var Oe="left",be=void 0;return M instanceof Text?(B<M.data.length?(oe.setStart(M,B),oe.setEnd(M,B+1)):(oe.setStart(M,B-1),oe.setEnd(M,B),Oe="right"),be=oe.getBoundingClientRect()):(be=j.domNode.getBoundingClientRect(),B>0&&(Oe="right")),{bottom:be.top+be.height,height:be.height,left:be[Oe],right:be[Oe],top:be.top,width:0}}},"getBounds")},{key:"getNativeRange",value:n(function(){var O=document.getSelection();if(O==null||O.rangeCount<=0)return null;var D=O.getRangeAt(0);if(D==null)return null;var I=this.normalizeNative(D);return S.info("getNativeRange",I),I},"getNativeRange")},{key:"getRange",value:n(function(){var O=this.getNativeRange();if(O==null)return[null,null];var D=this.normalizedToRange(O);return[D,O]},"getRange")},{key:"hasFocus",value:n(function(){return document.activeElement===this.root},"hasFocus")},{key:"normalizedToRange",value:n(function(O){var D=this,I=[[O.start.node,O.start.offset]];O.native.collapsed||I.push([O.end.node,O.end.offset]);var M=I.map(function(j){var B=m(j,2),J=B[0],Q=B[1],oe=s.default.find(J,!0),$=oe.offset(D.scroll);return Q===0?$:oe instanceof s.default.Container?$+oe.length():$+oe.index(J,Q)}),k=Math.min(Math.max.apply(Math,d(M)),this.scroll.length()-1),N=Math.min.apply(Math,[k].concat(d(M)));return new b(N,k-N)},"normalizedToRange")},{key:"normalizeNative",value:n(function(O){if(!C(this.root,O.startContainer)||!O.collapsed&&!C(this.root,O.endContainer))return null;var D={start:{node:O.startContainer,offset:O.startOffset},end:{node:O.endContainer,offset:O.endOffset},native:O};return[D.start,D.end].forEach(function(I){for(var M=I.node,k=I.offset;!(M instanceof Text)&&M.childNodes.length>0;)if(M.childNodes.length>k)M=M.childNodes[k],k=0;else if(M.childNodes.length===k)M=M.lastChild,k=M instanceof Text?M.data.length:M.childNodes.length+1;else break;I.node=M,I.offset=k}),D},"normalizeNative")},{key:"rangeToNative",value:n(function(O){var D=this,I=O.collapsed?[O.index]:[O.index,O.index+O.length],M=[],k=this.scroll.length();return I.forEach(function(N,j){N=Math.min(k-1,N);var B=void 0,J=D.scroll.leaf(N),Q=m(J,2),oe=Q[0],$=Q[1],he=oe.position($,j!==0),Ae=m(he,2);B=Ae[0],$=Ae[1],M.push(B,$)}),M.length<2&&(M=M.concat(M)),M},"rangeToNative")},{key:"scrollIntoView",value:n(function(O){var D=this.lastRange;if(D!=null){var I=this.getBounds(D.index,D.length);if(I!=null){var M=this.scroll.length()-1,k=this.scroll.line(Math.min(D.index,M)),N=m(k,1),j=N[0],B=j;if(D.length>0){var J=this.scroll.line(Math.min(D.index+D.length,M)),Q=m(J,1);B=Q[0]}if(!(j==null||B==null)){var oe=O.getBoundingClientRect();I.top<oe.top?O.scrollTop-=oe.top-I.top:I.bottom>oe.bottom&&(O.scrollTop+=I.bottom-oe.bottom)}}}},"scrollIntoView")},{key:"setNativeRange",value:n(function(O,D){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:O,M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:D,k=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(S.info("setNativeRange",O,D,I,M),!(O!=null&&(this.root.parentNode==null||O.parentNode==null||I.parentNode==null))){var N=document.getSelection();if(N!=null)if(O!=null){this.hasFocus()||this.root.focus();var j=(this.getNativeRange()||{}).native;if(j==null||k||O!==j.startContainer||D!==j.startOffset||I!==j.endContainer||M!==j.endOffset){O.tagName=="BR"&&(D=[].indexOf.call(O.parentNode.childNodes,O),O=O.parentNode),I.tagName=="BR"&&(M=[].indexOf.call(I.parentNode.childNodes,I),I=I.parentNode);var B=document.createRange();B.setStart(O,D),B.setEnd(I,M),N.removeAllRanges(),N.addRange(B)}}else N.removeAllRanges(),this.root.blur(),document.body.focus()}},"setNativeRange")},{key:"setRange",value:n(function(O){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o.default.sources.API;if(typeof D=="string"&&(I=D,D=!1),S.info("setRange",O),O!=null){var M=this.rangeToNative(O);this.setNativeRange.apply(this,d(M).concat([D]))}else this.setNativeRange(null);this.update(I)},"setRange")},{key:"update",value:n(function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o.default.sources.USER,D=this.lastRange,I=this.getRange(),M=m(I,2),k=M[0],N=M[1];if(this.lastRange=k,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,t.default)(D,this.lastRange)){var j;!this.composing&&N!=null&&N.native.collapsed&&N.start.node!==this.cursor.textNode&&this.cursor.restore();var B=[o.default.events.SELECTION_CHANGE,(0,i.default)(this.lastRange),(0,i.default)(D),O];if((j=this.emitter).emit.apply(j,[o.default.events.EDITOR_CHANGE].concat(B)),O!==o.default.sources.SILENT){var J;(J=this.emitter).emit.apply(J,B)}}},"update")}]),w}();function C(w,R){try{R.parentNode}catch{return!1}return R instanceof Text&&(R=R.parentNode),w.contains(R)}n(C,"contains"),c.Range=b,c.default=_},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=function(){function o(f,h){for(var p=0;p<h.length;p++){var d=h[p];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(f,d.key,d)}}return n(o,"defineProperties"),function(f,h,p){return h&&o(f.prototype,h),p&&o(f,p),f}}(),v=n(function o(f,h,p){f===null&&(f=Function.prototype);var d=Object.getOwnPropertyDescriptor(f,h);if(d===void 0){var y=Object.getPrototypeOf(f);return y===null?void 0:o(y,h,p)}else{if("value"in d)return d.value;var S=d.get;return S===void 0?void 0:S.call(p)}},"get"),g=u(0),s=a(g);function a(o){return o&&o.__esModule?o:{default:o}}n(a,"_interopRequireDefault");function i(o,f){if(!(o instanceof f))throw new TypeError("Cannot call a class as a function")}n(i,"_classCallCheck");function e(o,f){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:o}n(e,"_possibleConstructorReturn");function t(o,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);o.prototype=Object.create(f&&f.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(o,f):o.__proto__=f)}n(t,"_inherits");var r=function(o){t(f,o);function f(){return i(this,f),e(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return n(f,"Break"),m(f,[{key:"insertInto",value:n(function(p,d){p.children.length===0?v(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"insertInto",this).call(this,p,d):this.remove()},"insertInto")},{key:"length",value:n(function(){return 0},"length")},{key:"value",value:n(function(){return""},"value")}],[{key:"value",value:n(function(){},"value")}]),f}(s.default.Embed);r.blotName="break",r.tagName="BR",c.default=r},function(l,c,u){"use strict";var m=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])};return function(t,r){e(t,r);function o(){this.constructor=t}n(o,"__"),t.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(c,"__esModule",{value:!0});var v=u(54),g=u(31),s=u(1),a=function(e){m(t,e);function t(r){var o=e.call(this,r)||this;return o.build(),o}return n(t,"ContainerBlot"),t.prototype.appendChild=function(r){this.insertBefore(r)},t.prototype.attach=function(){e.prototype.attach.call(this),this.children.forEach(function(r){r.attach()})},t.prototype.build=function(){var r=this;this.children=new v.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(o){try{var f=i(o);r.insertBefore(f,r.children.head||void 0)}catch(h){if(h instanceof s.ParchmentError)return;throw h}})},t.prototype.deleteAt=function(r,o){if(r===0&&o===this.length())return this.remove();this.children.forEachAt(r,o,function(f,h,p){f.deleteAt(h,p)})},t.prototype.descendant=function(r,o){var f=this.children.find(o),h=f[0],p=f[1];return r.blotName==null&&r(h)||r.blotName!=null&&h instanceof r?[h,p]:h instanceof t?h.descendant(r,p):[null,-1]},t.prototype.descendants=function(r,o,f){o===void 0&&(o=0),f===void 0&&(f=Number.MAX_VALUE);var h=[],p=f;return this.children.forEachAt(o,f,function(d,y,S){(r.blotName==null&&r(d)||r.blotName!=null&&d instanceof r)&&h.push(d),d instanceof t&&(h=h.concat(d.descendants(r,y,p))),p-=S}),h},t.prototype.detach=function(){this.children.forEach(function(r){r.detach()}),e.prototype.detach.call(this)},t.prototype.formatAt=function(r,o,f,h){this.children.forEachAt(r,o,function(p,d,y){p.formatAt(d,y,f,h)})},t.prototype.insertAt=function(r,o,f){var h=this.children.find(r),p=h[0],d=h[1];if(p)p.insertAt(d,o,f);else{var y=f==null?s.create("text",o):s.create(o,f);this.appendChild(y)}},t.prototype.insertBefore=function(r,o){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(f){return r instanceof f}))throw new s.ParchmentError("Cannot insert "+r.statics.blotName+" into "+this.statics.blotName);r.insertInto(this,o)},t.prototype.length=function(){return this.children.reduce(function(r,o){return r+o.length()},0)},t.prototype.moveChildren=function(r,o){this.children.forEach(function(f){r.insertBefore(f,o)})},t.prototype.optimize=function(r){if(e.prototype.optimize.call(this,r),this.children.length===0)if(this.statics.defaultChild!=null){var o=s.create(this.statics.defaultChild);this.appendChild(o),o.optimize(r)}else this.remove()},t.prototype.path=function(r,o){o===void 0&&(o=!1);var f=this.children.find(r,o),h=f[0],p=f[1],d=[[this,r]];return h instanceof t?d.concat(h.path(p,o)):(h!=null&&d.push([h,p]),d)},t.prototype.removeChild=function(r){this.children.remove(r)},t.prototype.replace=function(r){r instanceof t&&r.moveChildren(this),e.prototype.replace.call(this,r)},t.prototype.split=function(r,o){if(o===void 0&&(o=!1),!o){if(r===0)return this;if(r===this.length())return this.next}var f=this.clone();return this.parent.insertBefore(f,this.next),this.children.forEachAt(r,this.length(),function(h,p,d){h=h.split(p,o),f.appendChild(h)}),f},t.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},t.prototype.update=function(r,o){var f=this,h=[],p=[];r.forEach(function(d){d.target===f.domNode&&d.type==="childList"&&(h.push.apply(h,d.addedNodes),p.push.apply(p,d.removedNodes))}),p.forEach(function(d){if(!(d.parentNode!=null&&d.tagName!=="IFRAME"&&document.body.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var y=s.find(d);y!=null&&(y.domNode.parentNode==null||y.domNode.parentNode===f.domNode)&&y.detach()}}),h.filter(function(d){return d.parentNode==f.domNode}).sort(function(d,y){return d===y?0:d.compareDocumentPosition(y)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(d){var y=null;d.nextSibling!=null&&(y=s.find(d.nextSibling));var S=i(d);(S.next!=y||S.next==null)&&(S.parent!=null&&S.parent.removeChild(f),f.insertBefore(S,y||void 0))})},t}(g.default);function i(e){var t=s.find(e);if(t==null)try{t=s.create(e)}catch{t=s.create(s.Scope.INLINE),[].slice.call(e.childNodes).forEach(function(o){t.domNode.appendChild(o)}),e.parentNode&&e.parentNode.replaceChild(t.domNode,e),t.attach()}return t}n(i,"makeBlot"),c.default=a},function(l,c,u){"use strict";var m=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])};return function(t,r){e(t,r);function o(){this.constructor=t}n(o,"__"),t.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(c,"__esModule",{value:!0});var v=u(12),g=u(32),s=u(18),a=u(1),i=function(e){m(t,e);function t(r){var o=e.call(this,r)||this;return o.attributes=new g.default(o.domNode),o}return n(t,"FormatBlot"),t.formats=function(r){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return r.tagName.toLowerCase()},t.prototype.format=function(r,o){var f=a.query(r);f instanceof v.default?this.attributes.attribute(f,o):o&&f!=null&&(r!==this.statics.blotName||this.formats()[r]!==o)&&this.replaceWith(r,o)},t.prototype.formats=function(){var r=this.attributes.values(),o=this.statics.formats(this.domNode);return o!=null&&(r[this.statics.blotName]=o),r},t.prototype.replaceWith=function(r,o){var f=e.prototype.replaceWith.call(this,r,o);return this.attributes.copy(f),f},t.prototype.update=function(r,o){var f=this;e.prototype.update.call(this,r,o),r.some(function(h){return h.target===f.domNode&&h.type==="attributes"})&&this.attributes.build()},t.prototype.wrap=function(r,o){var f=e.prototype.wrap.call(this,r,o);return f instanceof t&&f.statics.scope===this.statics.scope&&this.attributes.move(f),f},t}(s.default);c.default=i},function(l,c,u){"use strict";var m=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])};return function(i,e){a(i,e);function t(){this.constructor=i}n(t,"__"),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}();Object.defineProperty(c,"__esModule",{value:!0});var v=u(31),g=u(1),s=function(a){m(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return n(i,"LeafBlot"),i.value=function(e){return!0},i.prototype.index=function(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},i.prototype.position=function(e,t){var r=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]},i.prototype.value=function(){var e;return e={},e[this.statics.blotName]=this.statics.value(this.domNode)||!0,e},i.scope=g.Scope.INLINE_BLOT,i}(v.default);c.default=s},function(l,c,u){var m=u(11),v=u(3),g={attributes:{compose:function(a,i,e){typeof a!="object"&&(a={}),typeof i!="object"&&(i={});var t=v(!0,{},i);e||(t=Object.keys(t).reduce(function(o,f){return t[f]!=null&&(o[f]=t[f]),o},{}));for(var r in a)a[r]!==void 0&&i[r]===void 0&&(t[r]=a[r]);return Object.keys(t).length>0?t:void 0},diff:function(a,i){typeof a!="object"&&(a={}),typeof i!="object"&&(i={});var e=Object.keys(a).concat(Object.keys(i)).reduce(function(t,r){return m(a[r],i[r])||(t[r]=i[r]===void 0?null:i[r]),t},{});return Object.keys(e).length>0?e:void 0},transform:function(a,i,e){if(typeof a!="object")return i;if(typeof i=="object"){if(!e)return i;var t=Object.keys(i).reduce(function(r,o){return a[o]===void 0&&(r[o]=i[o]),r},{});return Object.keys(t).length>0?t:void 0}}},iterator:function(a){return new s(a)},length:function(a){return typeof a.delete=="number"?a.delete:typeof a.retain=="number"?a.retain:typeof a.insert=="string"?a.insert.length:1}};function s(a){this.ops=a,this.index=0,this.offset=0}n(s,"Iterator"),s.prototype.hasNext=function(){return this.peekLength()<1/0},s.prototype.next=function(a){a||(a=1/0);var i=this.ops[this.index];if(i){var e=this.offset,t=g.length(i);if(a>=t-e?(a=t-e,this.index+=1,this.offset=0):this.offset+=a,typeof i.delete=="number")return{delete:a};var r={};return i.attributes&&(r.attributes=i.attributes),typeof i.retain=="number"?r.retain=a:typeof i.insert=="string"?r.insert=i.insert.substr(e,a):r.insert=i.insert,r}else return{retain:1/0}},s.prototype.peek=function(){return this.ops[this.index]},s.prototype.peekLength=function(){return this.ops[this.index]?g.length(this.ops[this.index])-this.offset:1/0},s.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},s.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var a=this.offset,i=this.index,e=this.next(),t=this.ops.slice(this.index);return this.offset=a,this.index=i,[e].concat(t)}else return[]},l.exports=g},function(l,c){var u=function(){"use strict";function m(f,h){return h!=null&&f instanceof h}n(m,"_instanceof");var v;try{v=Map}catch{v=n(function(){},"nativeMap")}var g;try{g=Set}catch{g=n(function(){},"nativeSet")}var s;try{s=Promise}catch{s=n(function(){},"nativePromise")}function a(f,h,p,d,y){typeof h=="object"&&(p=h.depth,d=h.prototype,y=h.includeNonEnumerable,h=h.circular);var S=[],b=[],_=typeof Buffer<"u";typeof h>"u"&&(h=!0),typeof p>"u"&&(p=1/0);function C(w,R){if(w===null)return null;if(R===0)return w;var O,D;if(typeof w!="object")return w;if(m(w,v))O=new v;else if(m(w,g))O=new g;else if(m(w,s))O=new s(function(oe,$){w.then(function(he){oe(C(he,R-1))},function(he){$(C(he,R-1))})});else if(a.__isArray(w))O=[];else if(a.__isRegExp(w))O=new RegExp(w.source,o(w)),w.lastIndex&&(O.lastIndex=w.lastIndex);else if(a.__isDate(w))O=new Date(w.getTime());else{if(_&&Buffer.isBuffer(w))return Buffer.allocUnsafe?O=Buffer.allocUnsafe(w.length):O=new Buffer(w.length),w.copy(O),O;m(w,Error)?O=Object.create(w):typeof d>"u"?(D=Object.getPrototypeOf(w),O=Object.create(D)):(O=Object.create(d),D=d)}if(h){var I=S.indexOf(w);if(I!=-1)return b[I];S.push(w),b.push(O)}m(w,v)&&w.forEach(function(oe,$){var he=C($,R-1),Ae=C(oe,R-1);O.set(he,Ae)}),m(w,g)&&w.forEach(function(oe){var $=C(oe,R-1);O.add($)});for(var M in w){var k;D&&(k=Object.getOwnPropertyDescriptor(D,M)),!(k&&k.set==null)&&(O[M]=C(w[M],R-1))}if(Object.getOwnPropertySymbols)for(var N=Object.getOwnPropertySymbols(w),M=0;M<N.length;M++){var j=N[M],B=Object.getOwnPropertyDescriptor(w,j);B&&!B.enumerable&&!y||(O[j]=C(w[j],R-1),B.enumerable||Object.defineProperty(O,j,{enumerable:!1}))}if(y)for(var J=Object.getOwnPropertyNames(w),M=0;M<J.length;M++){var Q=J[M],B=Object.getOwnPropertyDescriptor(w,Q);B&&B.enumerable||(O[Q]=C(w[Q],R-1),Object.defineProperty(O,Q,{enumerable:!1}))}return O}return n(C,"_clone"),C(f,p)}n(a,"clone"),a.clonePrototype=n(function(h){if(h===null)return null;var p=n(function(){},"c");return p.prototype=h,new p},"clonePrototype");function i(f){return Object.prototype.toString.call(f)}n(i,"__objToStr"),a.__objToStr=i;function e(f){return typeof f=="object"&&i(f)==="[object Date]"}n(e,"__isDate"),a.__isDate=e;function t(f){return typeof f=="object"&&i(f)==="[object Array]"}n(t,"__isArray"),a.__isArray=t;function r(f){return typeof f=="object"&&i(f)==="[object RegExp]"}n(r,"__isRegExp"),a.__isRegExp=r;function o(f){var h="";return f.global&&(h+="g"),f.ignoreCase&&(h+="i"),f.multiline&&(h+="m"),h}return n(o,"__getRegExpFlags"),a.__getRegExpFlags=o,a}();typeof l=="object"&&l.exports&&(l.exports=u)},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=function(){function O(D,I){var M=[],k=!0,N=!1,j=void 0;try{for(var B=D[Symbol.iterator](),J;!(k=(J=B.next()).done)&&(M.push(J.value),!(I&&M.length===I));k=!0);}catch(Q){N=!0,j=Q}finally{try{!k&&B.return&&B.return()}finally{if(N)throw j}}return M}return n(O,"sliceIterator"),function(D,I){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return O(D,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=function(){function O(D,I){for(var M=0;M<I.length;M++){var k=I[M];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(D,k.key,k)}}return n(O,"defineProperties"),function(D,I,M){return I&&O(D.prototype,I),M&&O(D,M),D}}(),g=n(function O(D,I,M){D===null&&(D=Function.prototype);var k=Object.getOwnPropertyDescriptor(D,I);if(k===void 0){var N=Object.getPrototypeOf(D);return N===null?void 0:O(N,I,M)}else{if("value"in k)return k.value;var j=k.get;return j===void 0?void 0:j.call(M)}},"get"),s=u(0),a=S(s),i=u(8),e=S(i),t=u(4),r=S(t),o=u(17),f=S(o),h=u(14),p=S(h),d=u(26),y=S(d);function S(O){return O&&O.__esModule?O:{default:O}}n(S,"_interopRequireDefault");function b(O,D){if(!(O instanceof D))throw new TypeError("Cannot call a class as a function")}n(b,"_classCallCheck");function _(O,D){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:O}n(_,"_possibleConstructorReturn");function C(O,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);O.prototype=Object.create(D&&D.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(O,D):O.__proto__=D)}n(C,"_inherits");function w(O){return O instanceof r.default||O instanceof t.BlockEmbed}n(w,"isLine");var R=function(O){C(D,O);function D(I,M){b(this,D);var k=_(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,I));return k.emitter=M.emitter,Array.isArray(M.whitelist)&&(k.whitelist=M.whitelist.reduce(function(N,j){return N[j]=!0,N},{})),k.domNode.addEventListener("DOMNodeInserted",function(){}),k.optimize(),k.enable(),k}return n(D,"Scroll"),v(D,[{key:"batchStart",value:n(function(){this.batch=!0},"batchStart")},{key:"batchEnd",value:n(function(){this.batch=!1,this.optimize()},"batchEnd")},{key:"deleteAt",value:n(function(M,k){var N=this.line(M),j=m(N,2),B=j[0],J=j[1],Q=this.line(M+k),oe=m(Q,1),$=oe[0];if(g(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"deleteAt",this).call(this,M,k),$!=null&&B!==$&&J>0){if(B instanceof t.BlockEmbed||$ instanceof t.BlockEmbed){this.optimize();return}if(B instanceof p.default){var he=B.newlineIndex(B.length(),!0);if(he>-1&&(B=B.split(he+1),B===$)){this.optimize();return}}else if($ instanceof p.default){var Ae=$.newlineIndex(0);Ae>-1&&$.split(Ae+1)}var Ee=$.children.head instanceof f.default?null:$.children.head;B.moveChildren($,Ee),B.remove()}this.optimize()},"deleteAt")},{key:"enable",value:n(function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",M)},"enable")},{key:"formatAt",value:n(function(M,k,N,j){this.whitelist!=null&&!this.whitelist[N]||(g(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"formatAt",this).call(this,M,k,N,j),this.optimize())},"formatAt")},{key:"insertAt",value:n(function(M,k,N){if(!(N!=null&&this.whitelist!=null&&!this.whitelist[k])){if(M>=this.length())if(N==null||a.default.query(k,a.default.Scope.BLOCK)==null){var j=a.default.create(this.statics.defaultChild);this.appendChild(j),N==null&&k.endsWith(`
`)&&(k=k.slice(0,-1)),j.insertAt(0,k,N)}else{var B=a.default.create(k,N);this.appendChild(B)}else g(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"insertAt",this).call(this,M,k,N);this.optimize()}},"insertAt")},{key:"insertBefore",value:n(function(M,k){if(M.statics.scope===a.default.Scope.INLINE_BLOT){var N=a.default.create(this.statics.defaultChild);N.appendChild(M),M=N}g(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"insertBefore",this).call(this,M,k)},"insertBefore")},{key:"leaf",value:n(function(M){return this.path(M).pop()||[null,-1]},"leaf")},{key:"line",value:n(function(M){return M===this.length()?this.line(M-1):this.descendant(w,M)},"line")},{key:"lines",value:n(function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,N=n(function j(B,J,Q){var oe=[],$=Q;return B.children.forEachAt(J,Q,function(he,Ae,Ee){w(he)?oe.push(he):he instanceof a.default.Container&&(oe=oe.concat(j(he,Ae,$))),$-=Ee}),oe},"getLines");return N(this,M,k)},"lines")},{key:"optimize",value:n(function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(g(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"optimize",this).call(this,M,k),M.length>0&&this.emitter.emit(e.default.events.SCROLL_OPTIMIZE,M,k))},"optimize")},{key:"path",value:n(function(M){return g(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"path",this).call(this,M).slice(1)},"path")},{key:"update",value:n(function(M){if(this.batch!==!0){var k=e.default.sources.USER;typeof M=="string"&&(k=M),Array.isArray(M)||(M=this.observer.takeRecords()),M.length>0&&this.emitter.emit(e.default.events.SCROLL_BEFORE_UPDATE,k,M),g(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"update",this).call(this,M.concat([])),M.length>0&&this.emitter.emit(e.default.events.SCROLL_UPDATE,k,M)}},"update")}]),D}(a.default.Scroll);R.blotName="scroll",R.className="ql-editor",R.tagName="DIV",R.defaultChild="block",R.allowedChildren=[r.default,t.BlockEmbed,y.default],c.default=R},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.SHORTKEY=c.default=void 0;var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(be){return typeof be}:function(be){return be&&typeof Symbol=="function"&&be.constructor===Symbol&&be!==Symbol.prototype?"symbol":typeof be},v=function(){function be(De,ut){var St=[],Rt=!0,Ze=!1,mt=void 0;try{for(var At=De[Symbol.iterator](),Vt;!(Rt=(Vt=At.next()).done)&&(St.push(Vt.value),!(ut&&St.length===ut));Rt=!0);}catch(dt){Ze=!0,mt=dt}finally{try{!Rt&&At.return&&At.return()}finally{if(Ze)throw mt}}return St}return n(be,"sliceIterator"),function(De,ut){if(Array.isArray(De))return De;if(Symbol.iterator in Object(De))return be(De,ut);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function be(De,ut){for(var St=0;St<ut.length;St++){var Rt=ut[St];Rt.enumerable=Rt.enumerable||!1,Rt.configurable=!0,"value"in Rt&&(Rt.writable=!0),Object.defineProperty(De,Rt.key,Rt)}}return n(be,"defineProperties"),function(De,ut,St){return ut&&be(De.prototype,ut),St&&be(De,St),De}}(),s=u(22),a=O(s),i=u(11),e=O(i),t=u(3),r=O(t),o=u(2),f=O(o),h=u(21),p=O(h),d=u(0),y=O(d),S=u(5),b=O(S),_=u(10),C=O(_),w=u(9),R=O(w);function O(be){return be&&be.__esModule?be:{default:be}}n(O,"_interopRequireDefault");function D(be,De,ut){return De in be?Object.defineProperty(be,De,{value:ut,enumerable:!0,configurable:!0,writable:!0}):be[De]=ut,be}n(D,"_defineProperty");function I(be,De){if(!(be instanceof De))throw new TypeError("Cannot call a class as a function")}n(I,"_classCallCheck");function M(be,De){if(!be)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return De&&(typeof De=="object"||typeof De=="function")?De:be}n(M,"_possibleConstructorReturn");function k(be,De){if(typeof De!="function"&&De!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof De);be.prototype=Object.create(De&&De.prototype,{constructor:{value:be,enumerable:!1,writable:!0,configurable:!0}}),De&&(Object.setPrototypeOf?Object.setPrototypeOf(be,De):be.__proto__=De)}n(k,"_inherits");var N=(0,C.default)("quill:keyboard"),j=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",B=function(be){k(De,be),g(De,null,[{key:"match",value:n(function(St,Rt){return Rt=Oe(Rt),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Ze){return!!Rt[Ze]!==St[Ze]&&Rt[Ze]!==null})?!1:Rt.key===(St.which||St.keyCode)},"match")}]);function De(ut,St){I(this,De);var Rt=M(this,(De.__proto__||Object.getPrototypeOf(De)).call(this,ut,St));return Rt.bindings={},Object.keys(Rt.options.bindings).forEach(function(Ze){Ze==="list autofill"&&ut.scroll.whitelist!=null&&!ut.scroll.whitelist.list||Rt.options.bindings[Ze]&&Rt.addBinding(Rt.options.bindings[Ze])}),Rt.addBinding({key:De.keys.ENTER,shiftKey:null},he),Rt.addBinding({key:De.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(Rt.addBinding({key:De.keys.BACKSPACE},{collapsed:!0},Q),Rt.addBinding({key:De.keys.DELETE},{collapsed:!0},oe)):(Rt.addBinding({key:De.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Q),Rt.addBinding({key:De.keys.DELETE},{collapsed:!0,suffix:/^.?$/},oe)),Rt.addBinding({key:De.keys.BACKSPACE},{collapsed:!1},$),Rt.addBinding({key:De.keys.DELETE},{collapsed:!1},$),Rt.addBinding({key:De.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Q),Rt.listen(),Rt}return n(De,"Keyboard"),g(De,[{key:"addBinding",value:n(function(St){var Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},mt=Oe(St);if(mt==null||mt.key==null)return N.warn("Attempted to add invalid keyboard binding",mt);typeof Rt=="function"&&(Rt={handler:Rt}),typeof Ze=="function"&&(Ze={handler:Ze}),mt=(0,r.default)(mt,Rt,Ze),this.bindings[mt.key]=this.bindings[mt.key]||[],this.bindings[mt.key].push(mt)},"addBinding")},{key:"listen",value:n(function(){var St=this;this.quill.root.addEventListener("keydown",function(Rt){if(!Rt.defaultPrevented){var Ze=Rt.which||Rt.keyCode,mt=(St.bindings[Ze]||[]).filter(function(jn){return De.match(Rt,jn)});if(mt.length!==0){var At=St.quill.getSelection();if(!(At==null||!St.quill.hasFocus())){var Vt=St.quill.getLine(At.index),dt=v(Vt,2),Cn=dt[0],gt=dt[1],Ut=St.quill.getLeaf(At.index),en=v(Ut,2),sn=en[0],$t=en[1],Rn=At.length===0?[sn,$t]:St.quill.getLeaf(At.index+At.length),di=v(Rn,2),ii=di[0],Kn=di[1],hi=sn instanceof y.default.Text?sn.value().slice(0,$t):"",Ln=ii instanceof y.default.Text?ii.value().slice(Kn):"",Hn={collapsed:At.length===0,empty:At.length===0&&Cn.length()<=1,format:St.quill.getFormat(At),offset:gt,prefix:hi,suffix:Ln},ui=mt.some(function(jn){if(jn.collapsed!=null&&jn.collapsed!==Hn.collapsed||jn.empty!=null&&jn.empty!==Hn.empty||jn.offset!=null&&jn.offset!==Hn.offset)return!1;if(Array.isArray(jn.format)){if(jn.format.every(function(ri){return Hn.format[ri]==null}))return!1}else if(m(jn.format)==="object"&&!Object.keys(jn.format).every(function(ri){return jn.format[ri]===!0?Hn.format[ri]!=null:jn.format[ri]===!1?Hn.format[ri]==null:(0,e.default)(jn.format[ri],Hn.format[ri])}))return!1;return jn.prefix!=null&&!jn.prefix.test(Hn.prefix)||jn.suffix!=null&&!jn.suffix.test(Hn.suffix)?!1:jn.handler.call(St,At,Hn)!==!0});ui&&Rt.preventDefault()}}}})},"listen")}]),De}(R.default);B.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},B.DEFAULTS={bindings:{bold:Ee("bold"),italic:Ee("italic"),underline:Ee("underline"),indent:{key:B.keys.TAB,format:["blockquote","indent","list"],handler:n(function(De,ut){if(ut.collapsed&&ut.offset!==0)return!0;this.quill.format("indent","+1",b.default.sources.USER)},"handler")},outdent:{key:B.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:n(function(De,ut){if(ut.collapsed&&ut.offset!==0)return!0;this.quill.format("indent","-1",b.default.sources.USER)},"handler")},"outdent backspace":{key:B.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:n(function(De,ut){ut.format.indent!=null?this.quill.format("indent","-1",b.default.sources.USER):ut.format.list!=null&&this.quill.format("list",!1,b.default.sources.USER)},"handler")},"indent code-block":Ae(!0),"outdent code-block":Ae(!1),"remove tab":{key:B.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:n(function(De){this.quill.deleteText(De.index-1,1,b.default.sources.USER)},"handler")},tab:{key:B.keys.TAB,handler:n(function(De){this.quill.history.cutoff();var ut=new f.default().retain(De.index).delete(De.length).insert("	");this.quill.updateContents(ut,b.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(De.index+1,b.default.sources.SILENT)},"handler")},"list empty enter":{key:B.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:n(function(De,ut){this.quill.format("list",!1,b.default.sources.USER),ut.format.indent&&this.quill.format("indent",!1,b.default.sources.USER)},"handler")},"checklist enter":{key:B.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:n(function(De){var ut=this.quill.getLine(De.index),St=v(ut,2),Rt=St[0],Ze=St[1],mt=(0,r.default)({},Rt.formats(),{list:"checked"}),At=new f.default().retain(De.index).insert(`
`,mt).retain(Rt.length()-Ze-1).retain(1,{list:"unchecked"});this.quill.updateContents(At,b.default.sources.USER),this.quill.setSelection(De.index+1,b.default.sources.SILENT),this.quill.scrollIntoView()},"handler")},"header enter":{key:B.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:n(function(De,ut){var St=this.quill.getLine(De.index),Rt=v(St,2),Ze=Rt[0],mt=Rt[1],At=new f.default().retain(De.index).insert(`
`,ut.format).retain(Ze.length()-mt-1).retain(1,{header:null});this.quill.updateContents(At,b.default.sources.USER),this.quill.setSelection(De.index+1,b.default.sources.SILENT),this.quill.scrollIntoView()},"handler")},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:n(function(De,ut){var St=ut.prefix.length,Rt=this.quill.getLine(De.index),Ze=v(Rt,2),mt=Ze[0],At=Ze[1];if(At>St)return!0;var Vt=void 0;switch(ut.prefix.trim()){case"[]":case"[ ]":Vt="unchecked";break;case"[x]":Vt="checked";break;case"-":case"*":Vt="bullet";break;default:Vt="ordered"}this.quill.insertText(De.index," ",b.default.sources.USER),this.quill.history.cutoff();var dt=new f.default().retain(De.index-At).delete(St+1).retain(mt.length()-2-At).retain(1,{list:Vt});this.quill.updateContents(dt,b.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(De.index-St,b.default.sources.SILENT)},"handler")},"code exit":{key:B.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:n(function(De){var ut=this.quill.getLine(De.index),St=v(ut,2),Rt=St[0],Ze=St[1],mt=new f.default().retain(De.index+Rt.length()-Ze-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(mt,b.default.sources.USER)},"handler")},"embed left":J(B.keys.LEFT,!1),"embed left shift":J(B.keys.LEFT,!0),"embed right":J(B.keys.RIGHT,!1),"embed right shift":J(B.keys.RIGHT,!0)}};function J(be,De){var ut,St=be===B.keys.LEFT?"prefix":"suffix";return ut={key:be,shiftKey:De,altKey:null},D(ut,St,/^$/),D(ut,"handler",n(function(Ze){var mt=Ze.index;be===B.keys.RIGHT&&(mt+=Ze.length+1);var At=this.quill.getLeaf(mt),Vt=v(At,1),dt=Vt[0];return dt instanceof y.default.Embed?(be===B.keys.LEFT?De?this.quill.setSelection(Ze.index-1,Ze.length+1,b.default.sources.USER):this.quill.setSelection(Ze.index-1,b.default.sources.USER):De?this.quill.setSelection(Ze.index,Ze.length+1,b.default.sources.USER):this.quill.setSelection(Ze.index+Ze.length+1,b.default.sources.USER),!1):!0},"handler")),ut}n(J,"makeEmbedArrowHandler");function Q(be,De){if(!(be.index===0||this.quill.getLength()<=1)){var ut=this.quill.getLine(be.index),St=v(ut,1),Rt=St[0],Ze={};if(De.offset===0){var mt=this.quill.getLine(be.index-1),At=v(mt,1),Vt=At[0];if(Vt!=null&&Vt.length()>1){var dt=Rt.formats(),Cn=this.quill.getFormat(be.index-1,1);Ze=p.default.attributes.diff(dt,Cn)||{}}}var gt=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(De.prefix)?2:1;this.quill.deleteText(be.index-gt,gt,b.default.sources.USER),Object.keys(Ze).length>0&&this.quill.formatLine(be.index-gt,gt,Ze,b.default.sources.USER),this.quill.focus()}}n(Q,"handleBackspace");function oe(be,De){var ut=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(De.suffix)?2:1;if(!(be.index>=this.quill.getLength()-ut)){var St={},Rt=0,Ze=this.quill.getLine(be.index),mt=v(Ze,1),At=mt[0];if(De.offset>=At.length()-1){var Vt=this.quill.getLine(be.index+1),dt=v(Vt,1),Cn=dt[0];if(Cn){var gt=At.formats(),Ut=this.quill.getFormat(be.index,1);St=p.default.attributes.diff(gt,Ut)||{},Rt=Cn.length()}}this.quill.deleteText(be.index,ut,b.default.sources.USER),Object.keys(St).length>0&&this.quill.formatLine(be.index+Rt-1,ut,St,b.default.sources.USER)}}n(oe,"handleDelete");function $(be){var De=this.quill.getLines(be),ut={};if(De.length>1){var St=De[0].formats(),Rt=De[De.length-1].formats();ut=p.default.attributes.diff(Rt,St)||{}}this.quill.deleteText(be,b.default.sources.USER),Object.keys(ut).length>0&&this.quill.formatLine(be.index,1,ut,b.default.sources.USER),this.quill.setSelection(be.index,b.default.sources.SILENT),this.quill.focus()}n($,"handleDeleteRange");function he(be,De){var ut=this;be.length>0&&this.quill.scroll.deleteAt(be.index,be.length);var St=Object.keys(De.format).reduce(function(Rt,Ze){return y.default.query(Ze,y.default.Scope.BLOCK)&&!Array.isArray(De.format[Ze])&&(Rt[Ze]=De.format[Ze]),Rt},{});this.quill.insertText(be.index,`
`,St,b.default.sources.USER),this.quill.setSelection(be.index+1,b.default.sources.SILENT),this.quill.focus(),Object.keys(De.format).forEach(function(Rt){St[Rt]==null&&(Array.isArray(De.format[Rt])||Rt!=="link"&&ut.quill.format(Rt,De.format[Rt],b.default.sources.USER))})}n(he,"handleEnter");function Ae(be){return{key:B.keys.TAB,shiftKey:!be,format:{"code-block":!0},handler:n(function(ut){var St=y.default.query("code-block"),Rt=ut.index,Ze=ut.length,mt=this.quill.scroll.descendant(St,Rt),At=v(mt,2),Vt=At[0],dt=At[1];if(Vt!=null){var Cn=this.quill.getIndex(Vt),gt=Vt.newlineIndex(dt,!0)+1,Ut=Vt.newlineIndex(Cn+dt+Ze),en=Vt.domNode.textContent.slice(gt,Ut).split(`
`);dt=0,en.forEach(function(sn,$t){be?(Vt.insertAt(gt+dt,St.TAB),dt+=St.TAB.length,$t===0?Rt+=St.TAB.length:Ze+=St.TAB.length):sn.startsWith(St.TAB)&&(Vt.deleteAt(gt+dt,St.TAB.length),dt-=St.TAB.length,$t===0?Rt-=St.TAB.length:Ze-=St.TAB.length),dt+=sn.length+1}),this.quill.update(b.default.sources.USER),this.quill.setSelection(Rt,Ze,b.default.sources.SILENT)}},"handler")}}n(Ae,"makeCodeBlockHandler");function Ee(be){return{key:be[0].toUpperCase(),shortKey:!0,handler:n(function(ut,St){this.quill.format(be,!St.format[be],b.default.sources.USER)},"handler")}}n(Ee,"makeFormatHandler");function Oe(be){if(typeof be=="string"||typeof be=="number")return Oe({key:be});if((typeof be>"u"?"undefined":m(be))==="object"&&(be=(0,a.default)(be,!1)),typeof be.key=="string")if(B.keys[be.key.toUpperCase()]!=null)be.key=B.keys[be.key.toUpperCase()];else if(be.key.length===1)be.key=be.key.toUpperCase().charCodeAt(0);else return null;return be.shortKey&&(be[j]=be.shortKey,delete be.shortKey),be}n(Oe,"normalize"),c.default=B,c.SHORTKEY=j},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=function(){function p(d,y){var S=[],b=!0,_=!1,C=void 0;try{for(var w=d[Symbol.iterator](),R;!(b=(R=w.next()).done)&&(S.push(R.value),!(y&&S.length===y));b=!0);}catch(O){_=!0,C=O}finally{try{!b&&w.return&&w.return()}finally{if(_)throw C}}return S}return n(p,"sliceIterator"),function(d,y){if(Array.isArray(d))return d;if(Symbol.iterator in Object(d))return p(d,y);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=n(function p(d,y,S){d===null&&(d=Function.prototype);var b=Object.getOwnPropertyDescriptor(d,y);if(b===void 0){var _=Object.getPrototypeOf(d);return _===null?void 0:p(_,y,S)}else{if("value"in b)return b.value;var C=b.get;return C===void 0?void 0:C.call(S)}},"get"),g=function(){function p(d,y){for(var S=0;S<y.length;S++){var b=y[S];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return n(p,"defineProperties"),function(d,y,S){return y&&p(d.prototype,y),S&&p(d,S),d}}(),s=u(0),a=t(s),i=u(7),e=t(i);function t(p){return p&&p.__esModule?p:{default:p}}n(t,"_interopRequireDefault");function r(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}n(r,"_classCallCheck");function o(p,d){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:p}n(o,"_possibleConstructorReturn");function f(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);p.prototype=Object.create(d&&d.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(p,d):p.__proto__=d)}n(f,"_inherits");var h=function(p){f(d,p),g(d,null,[{key:"value",value:n(function(){},"value")}]);function d(y,S){r(this,d);var b=o(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,y));return b.selection=S,b.textNode=document.createTextNode(d.CONTENTS),b.domNode.appendChild(b.textNode),b._length=0,b}return n(d,"Cursor"),g(d,[{key:"detach",value:n(function(){this.parent!=null&&this.parent.removeChild(this)},"detach")},{key:"format",value:n(function(S,b){if(this._length!==0)return v(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"format",this).call(this,S,b);for(var _=this,C=0;_!=null&&_.statics.scope!==a.default.Scope.BLOCK_BLOT;)C+=_.offset(_.parent),_=_.parent;_!=null&&(this._length=d.CONTENTS.length,_.optimize(),_.formatAt(C,d.CONTENTS.length,S,b),this._length=0)},"format")},{key:"index",value:n(function(S,b){return S===this.textNode?0:v(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"index",this).call(this,S,b)},"index")},{key:"length",value:n(function(){return this._length},"length")},{key:"position",value:n(function(){return[this.textNode,this.textNode.data.length]},"position")},{key:"remove",value:n(function(){v(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"remove",this).call(this),this.parent=null},"remove")},{key:"restore",value:n(function(){if(!(this.selection.composing||this.parent==null)){var S=this.textNode,b=this.selection.getNativeRange(),_=void 0,C=void 0,w=void 0;if(b!=null&&b.start.node===S&&b.end.node===S){var R=[S,b.start.offset,b.end.offset];_=R[0],C=R[1],w=R[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==d.CONTENTS){var O=this.textNode.data.split(d.CONTENTS).join("");this.next instanceof e.default?(_=this.next.domNode,this.next.insertAt(0,O),this.textNode.data=d.CONTENTS):(this.textNode.data=O,this.parent.insertBefore(a.default.create(this.textNode),this),this.textNode=document.createTextNode(d.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),C!=null){var D=[C,w].map(function(M){return Math.max(0,Math.min(_.data.length,M-1))}),I=m(D,2);return C=I[0],w=I[1],{startNode:_,startOffset:C,endNode:_,endOffset:w}}}},"restore")},{key:"update",value:n(function(S,b){var _=this;if(S.some(function(w){return w.type==="characterData"&&w.target===_.textNode})){var C=this.restore();C&&(b.range=C)}},"update")},{key:"value",value:n(function(){return""},"value")}]),d}(a.default.Embed);h.blotName="cursor",h.className="ql-cursor",h.tagName="span",h.CONTENTS="\uFEFF",c.default=h},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=u(0),v=a(m),g=u(4),s=a(g);function a(o){return o&&o.__esModule?o:{default:o}}n(a,"_interopRequireDefault");function i(o,f){if(!(o instanceof f))throw new TypeError("Cannot call a class as a function")}n(i,"_classCallCheck");function e(o,f){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:o}n(e,"_possibleConstructorReturn");function t(o,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);o.prototype=Object.create(f&&f.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(o,f):o.__proto__=f)}n(t,"_inherits");var r=function(o){t(f,o);function f(){return i(this,f),e(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return n(f,"Container"),f}(v.default.Container);r.allowedChildren=[s.default,g.BlockEmbed,r],c.default=r},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ColorStyle=c.ColorClass=c.ColorAttributor=void 0;var m=function(){function h(p,d){for(var y=0;y<d.length;y++){var S=d[y];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(p,S.key,S)}}return n(h,"defineProperties"),function(p,d,y){return d&&h(p.prototype,d),y&&h(p,y),p}}(),v=n(function h(p,d,y){p===null&&(p=Function.prototype);var S=Object.getOwnPropertyDescriptor(p,d);if(S===void 0){var b=Object.getPrototypeOf(p);return b===null?void 0:h(b,d,y)}else{if("value"in S)return S.value;var _=S.get;return _===void 0?void 0:_.call(y)}},"get"),g=u(0),s=a(g);function a(h){return h&&h.__esModule?h:{default:h}}n(a,"_interopRequireDefault");function i(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}n(i,"_classCallCheck");function e(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}n(e,"_possibleConstructorReturn");function t(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}n(t,"_inherits");var r=function(h){t(p,h);function p(){return i(this,p),e(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return n(p,"ColorAttributor"),m(p,[{key:"value",value:n(function(y){var S=v(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"value",this).call(this,y);return S.startsWith("rgb(")?(S=S.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+S.split(",").map(function(b){return("00"+parseInt(b).toString(16)).slice(-2)}).join("")):S},"value")}]),p}(s.default.Attributor.Style),o=new s.default.Attributor.Class("color","ql-color",{scope:s.default.Scope.INLINE}),f=new r("color","color",{scope:s.default.Scope.INLINE});c.ColorAttributor=r,c.ColorClass=o,c.ColorStyle=f},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.sanitize=c.default=void 0;var m=function(){function f(h,p){for(var d=0;d<p.length;d++){var y=p[d];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return n(f,"defineProperties"),function(h,p,d){return p&&f(h.prototype,p),d&&f(h,d),h}}(),v=n(function f(h,p,d){h===null&&(h=Function.prototype);var y=Object.getOwnPropertyDescriptor(h,p);if(y===void 0){var S=Object.getPrototypeOf(h);return S===null?void 0:f(S,p,d)}else{if("value"in y)return y.value;var b=y.get;return b===void 0?void 0:b.call(d)}},"get"),g=u(6),s=a(g);function a(f){return f&&f.__esModule?f:{default:f}}n(a,"_interopRequireDefault");function i(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}n(i,"_classCallCheck");function e(f,h){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:f}n(e,"_possibleConstructorReturn");function t(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);f.prototype=Object.create(h&&h.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(f,h):f.__proto__=h)}n(t,"_inherits");var r=function(f){t(h,f);function h(){return i(this,h),e(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return n(h,"Link"),m(h,[{key:"format",value:n(function(d,y){if(d!==this.statics.blotName||!y)return v(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"format",this).call(this,d,y);y=this.constructor.sanitize(y),this.domNode.setAttribute("href",y)},"format")}],[{key:"create",value:n(function(d){var y=v(h.__proto__||Object.getPrototypeOf(h),"create",this).call(this,d);return d=this.sanitize(d),y.setAttribute("href",d),y.setAttribute("rel","noopener noreferrer"),y.setAttribute("target","_blank"),y},"create")},{key:"formats",value:n(function(d){return d.getAttribute("href")},"formats")},{key:"sanitize",value:n(function(d){return o(d,this.PROTOCOL_WHITELIST)?d:this.SANITIZED_URL},"sanitize")}]),h}(s.default);r.blotName="link",r.tagName="A",r.SANITIZED_URL="about:blank",r.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function o(f,h){var p=document.createElement("a");p.href=f;var d=p.href.slice(0,p.href.indexOf(":"));return h.indexOf(d)>-1}n(o,"_sanitize"),c.default=r,c.sanitize=o},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},v=function(){function h(p,d){for(var y=0;y<d.length;y++){var S=d[y];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(p,S.key,S)}}return n(h,"defineProperties"),function(p,d,y){return d&&h(p.prototype,d),y&&h(p,y),p}}(),g=u(24),s=e(g),a=u(127),i=e(a);function e(h){return h&&h.__esModule?h:{default:h}}n(e,"_interopRequireDefault");function t(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}n(t,"_classCallCheck");var r=0;function o(h,p){h.setAttribute(p,h.getAttribute(p)!=="true")}n(o,"toggleAriaAttribute");var f=function(){function h(p){var d=this;t(this,h),this.select=p,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){d.togglePicker()}),this.label.addEventListener("keydown",function(y){switch(y.keyCode){case s.default.keys.ENTER:d.togglePicker();break;case s.default.keys.ESCAPE:d.escape(),y.preventDefault();break;default:}}),this.select.addEventListener("change",this.update.bind(this))}return n(h,"Picker"),v(h,[{key:"togglePicker",value:n(function(){this.container.classList.toggle("ql-expanded"),o(this.label,"aria-expanded"),o(this.options,"aria-hidden")},"togglePicker")},{key:"buildItem",value:n(function(d){var y=this,S=document.createElement("span");return S.tabIndex="0",S.setAttribute("role","button"),S.classList.add("ql-picker-item"),d.hasAttribute("value")&&S.setAttribute("data-value",d.getAttribute("value")),d.textContent&&S.setAttribute("data-label",d.textContent),S.addEventListener("click",function(){y.selectItem(S,!0)}),S.addEventListener("keydown",function(b){switch(b.keyCode){case s.default.keys.ENTER:y.selectItem(S,!0),b.preventDefault();break;case s.default.keys.ESCAPE:y.escape(),b.preventDefault();break;default:}}),S},"buildItem")},{key:"buildLabel",value:n(function(){var d=document.createElement("span");return d.classList.add("ql-picker-label"),d.innerHTML=i.default,d.tabIndex="0",d.setAttribute("role","button"),d.setAttribute("aria-expanded","false"),this.container.appendChild(d),d},"buildLabel")},{key:"buildOptions",value:n(function(){var d=this,y=document.createElement("span");y.classList.add("ql-picker-options"),y.setAttribute("aria-hidden","true"),y.tabIndex="-1",y.id="ql-picker-options-"+r,r+=1,this.label.setAttribute("aria-controls",y.id),this.options=y,[].slice.call(this.select.options).forEach(function(S){var b=d.buildItem(S);y.appendChild(b),S.selected===!0&&d.selectItem(b)}),this.container.appendChild(y)},"buildOptions")},{key:"buildPicker",value:n(function(){var d=this;[].slice.call(this.select.attributes).forEach(function(y){d.container.setAttribute(y.name,y.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()},"buildPicker")},{key:"escape",value:n(function(){var d=this;this.close(),setTimeout(function(){return d.label.focus()},1)},"escape")},{key:"close",value:n(function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")},"close")},{key:"selectItem",value:n(function(d){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,S=this.container.querySelector(".ql-selected");if(d!==S&&(S!=null&&S.classList.remove("ql-selected"),d!=null&&(d.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(d.parentNode.children,d),d.hasAttribute("data-value")?this.label.setAttribute("data-value",d.getAttribute("data-value")):this.label.removeAttribute("data-value"),d.hasAttribute("data-label")?this.label.setAttribute("data-label",d.getAttribute("data-label")):this.label.removeAttribute("data-label"),y))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":m(Event))==="object"){var b=document.createEvent("Event");b.initEvent("change",!0,!0),this.select.dispatchEvent(b)}this.close()}},"selectItem")},{key:"update",value:n(function(){var d=void 0;if(this.select.selectedIndex>-1){var y=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];d=this.select.options[this.select.selectedIndex],this.selectItem(y)}else this.selectItem(null);var S=d!=null&&d!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",S)},"update")}]),h}();c.default=f},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=u(0),v=N(m),g=u(5),s=N(g),a=u(4),i=N(a),e=u(17),t=N(e),r=u(26),o=N(r),f=u(25),h=N(f),p=u(45),d=N(p),y=u(6),S=N(y),b=u(23),_=N(b),C=u(7),w=N(C),R=u(75),O=N(R),D=u(52),I=N(D),M=u(24),k=N(M);function N(j){return j&&j.__esModule?j:{default:j}}n(N,"_interopRequireDefault"),s.default.register({"blots/block":i.default,"blots/block/embed":a.BlockEmbed,"blots/break":t.default,"blots/container":o.default,"blots/cursor":h.default,"blots/embed":d.default,"blots/inline":S.default,"blots/scroll":_.default,"blots/text":w.default,"modules/clipboard":O.default,"modules/history":I.default,"modules/keyboard":k.default}),v.default.register(i.default,t.default,h.default,S.default,_.default,w.default),c.default=s.default},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=u(1),v=function(){function g(s){this.domNode=s,this.domNode[m.DATA_KEY]={blot:this}}return n(g,"ShadowBlot"),Object.defineProperty(g.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),g.create=function(s){if(this.tagName==null)throw new m.ParchmentError("Blot definition missing tagName");var a;return Array.isArray(this.tagName)?(typeof s=="string"&&(s=s.toUpperCase(),parseInt(s).toString()===s&&(s=parseInt(s))),typeof s=="number"?a=document.createElement(this.tagName[s-1]):this.tagName.indexOf(s)>-1?a=document.createElement(s):a=document.createElement(this.tagName[0])):a=document.createElement(this.tagName),this.className&&a.classList.add(this.className),a},g.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},g.prototype.clone=function(){var s=this.domNode.cloneNode(!1);return m.create(s)},g.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[m.DATA_KEY]},g.prototype.deleteAt=function(s,a){var i=this.isolate(s,a);i.remove()},g.prototype.formatAt=function(s,a,i,e){var t=this.isolate(s,a);if(m.query(i,m.Scope.BLOT)!=null&&e)t.wrap(i,e);else if(m.query(i,m.Scope.ATTRIBUTE)!=null){var r=m.create(this.statics.scope);t.wrap(r),r.format(i,e)}},g.prototype.insertAt=function(s,a,i){var e=i==null?m.create("text",a):m.create(a,i),t=this.split(s);this.parent.insertBefore(e,t)},g.prototype.insertInto=function(s,a){a===void 0&&(a=null),this.parent!=null&&this.parent.children.remove(this);var i=null;s.children.insertBefore(this,a),a!=null&&(i=a.domNode),(this.domNode.parentNode!=s.domNode||this.domNode.nextSibling!=i)&&s.domNode.insertBefore(this.domNode,i),this.parent=s,this.attach()},g.prototype.isolate=function(s,a){var i=this.split(s);return i.split(a),i},g.prototype.length=function(){return 1},g.prototype.offset=function(s){return s===void 0&&(s=this.parent),this.parent==null||this==s?0:this.parent.children.offset(this)+this.parent.offset(s)},g.prototype.optimize=function(s){this.domNode[m.DATA_KEY]!=null&&delete this.domNode[m.DATA_KEY].mutations},g.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},g.prototype.replace=function(s){s.parent!=null&&(s.parent.insertBefore(this,s.next),s.remove())},g.prototype.replaceWith=function(s,a){var i=typeof s=="string"?m.create(s,a):s;return i.replace(this),i},g.prototype.split=function(s,a){return s===0?this:this.next},g.prototype.update=function(s,a){},g.prototype.wrap=function(s,a){var i=typeof s=="string"?m.create(s,a):s;return this.parent!=null&&this.parent.insertBefore(i,this.next),i.appendChild(this),i},g.blotName="abstract",g}();c.default=v},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=u(12),v=u(33),g=u(34),s=u(1),a=function(){function i(e){this.attributes={},this.domNode=e,this.build()}return n(i,"AttributorStore"),i.prototype.attribute=function(e,t){t?e.add(this.domNode,t)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])},i.prototype.build=function(){var e=this;this.attributes={};var t=m.default.keys(this.domNode),r=v.default.keys(this.domNode),o=g.default.keys(this.domNode);t.concat(r).concat(o).forEach(function(f){var h=s.query(f,s.Scope.ATTRIBUTE);h instanceof m.default&&(e.attributes[h.attrName]=h)})},i.prototype.copy=function(e){var t=this;Object.keys(this.attributes).forEach(function(r){var o=t.attributes[r].value(t.domNode);e.format(r,o)})},i.prototype.move=function(e){var t=this;this.copy(e),Object.keys(this.attributes).forEach(function(r){t.attributes[r].remove(t.domNode)}),this.attributes={}},i.prototype.values=function(){var e=this;return Object.keys(this.attributes).reduce(function(t,r){return t[r]=e.attributes[r].value(e.domNode),t},{})},i}();c.default=a},function(l,c,u){"use strict";var m=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])};return function(i,e){a(i,e);function t(){this.constructor=i}n(t,"__"),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}();Object.defineProperty(c,"__esModule",{value:!0});var v=u(12);function g(a,i){var e=a.getAttribute("class")||"";return e.split(/\s+/).filter(function(t){return t.indexOf(i+"-")===0})}n(g,"match");var s=function(a){m(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return n(i,"ClassAttributor"),i.keys=function(e){return(e.getAttribute("class")||"").split(/\s+/).map(function(t){return t.split("-").slice(0,-1).join("-")})},i.prototype.add=function(e,t){return this.canAdd(e,t)?(this.remove(e),e.classList.add(this.keyName+"-"+t),!0):!1},i.prototype.remove=function(e){var t=g(e,this.keyName);t.forEach(function(r){e.classList.remove(r)}),e.classList.length===0&&e.removeAttribute("class")},i.prototype.value=function(e){var t=g(e,this.keyName)[0]||"",r=t.slice(this.keyName.length+1);return this.canAdd(e,r)?r:""},i}(v.default);c.default=s},function(l,c,u){"use strict";var m=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])};return function(i,e){a(i,e);function t(){this.constructor=i}n(t,"__"),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}();Object.defineProperty(c,"__esModule",{value:!0});var v=u(12);function g(a){var i=a.split("-"),e=i.slice(1).map(function(t){return t[0].toUpperCase()+t.slice(1)}).join("");return i[0]+e}n(g,"camelize");var s=function(a){m(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return n(i,"StyleAttributor"),i.keys=function(e){return(e.getAttribute("style")||"").split(";").map(function(t){var r=t.split(":");return r[0].trim()})},i.prototype.add=function(e,t){return this.canAdd(e,t)?(e.style[g(this.keyName)]=t,!0):!1},i.prototype.remove=function(e){e.style[g(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")},i.prototype.value=function(e){var t=e.style[g(this.keyName)];return this.canAdd(e,t)?t:""},i}(v.default);c.default=s},function(l,c,u){"use strict";var m=Array.prototype.slice,v=u(36),g=Object.keys,s=g?n(function(e){return g(e)},"keys"):u(62),a=Object.keys;s.shim=n(function(){if(Object.keys){var e=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);e||(Object.keys=n(function(r){return v(r)?a(m.call(r)):a(r)},"keys"))}else Object.keys=s;return Object.keys||s},"shimObjectKeys"),l.exports=s},function(l,c,u){"use strict";var m=Object.prototype.toString;l.exports=n(function(g){var s=m.call(g),a=s==="[object Arguments]";return a||(a=s!=="[object Array]"&&g!==null&&typeof g=="object"&&typeof g.length=="number"&&g.length>=0&&m.call(g.callee)==="[object Function]"),a},"isArguments")},function(l,c,u){"use strict";var m=u(38),v=u(66),g=v("%Function.prototype.apply%"),s=v("%Function.prototype.call%"),a=v("%Reflect.apply%",!0)||m.call(s,g);l.exports=n(function(){return a(m,s,arguments)},"callBind"),l.exports.apply=n(function(){return a(m,g,arguments)},"applyBind")},function(l,c,u){"use strict";var m=u(65);l.exports=Function.prototype.bind||m},function(l,c,u){"use strict";(function(m){var v=m.Symbol,g=u(68);l.exports=n(function(){return typeof v!="function"||typeof Symbol!="function"||typeof v("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:g()},"hasNativeSymbols")}).call(c,u(67))},function(l,c,u){"use strict";var m=n(function(v){return v!==v},"numberIsNaN");l.exports=n(function(g,s){return g===0&&s===0?1/g===1/s:!!(g===s||m(g)&&m(s))},"is")},function(l,c,u){"use strict";var m=u(40);l.exports=n(function(){return typeof Object.is=="function"?Object.is:m},"getPolyfill")},function(l,c,u){"use strict";var m=Object,v=TypeError;l.exports=n(function(){if(this!=null&&this!==m(this))throw new v("RegExp.prototype.flags getter called on non-object");var s="";return this.global&&(s+="g"),this.ignoreCase&&(s+="i"),this.multiline&&(s+="m"),this.dotAll&&(s+="s"),this.unicode&&(s+="u"),this.sticky&&(s+="y"),s},"flags")},function(l,c,u){"use strict";var m=u(42),v=u(13).supportsDescriptors,g=Object.getOwnPropertyDescriptor,s=TypeError;l.exports=n(function(){if(!v)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if(/a/mig.flags==="gim"){var i=g(RegExp.prototype,"flags");if(i&&typeof i.get=="function"&&typeof/a/.dotAll=="boolean")return i.get}return m},"getPolyfill")},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=function(){function s(a,i){for(var e=0;e<i.length;e++){var t=i[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}return n(s,"defineProperties"),function(a,i,e){return i&&s(a.prototype,i),e&&s(a,e),a}}();function v(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}n(v,"_classCallCheck");var g=function(){function s(a,i){v(this,s),this.quill=a,this.options=i,this.modules={}}return n(s,"Theme"),m(s,[{key:"init",value:n(function(){var i=this;Object.keys(this.options.modules).forEach(function(e){i.modules[e]==null&&i.addModule(e)})},"init")},{key:"addModule",value:n(function(i){var e=this.quill.constructor.import("modules/"+i);return this.modules[i]=new e(this.quill,this.options.modules[i]||{}),this.modules[i]},"addModule")}]),s}();g.DEFAULTS={modules:{}},g.themes={default:g},c.default=g},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=function(){function p(d,y){for(var S=0;S<y.length;S++){var b=y[S];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return n(p,"defineProperties"),function(d,y,S){return y&&p(d.prototype,y),S&&p(d,S),d}}(),v=n(function p(d,y,S){d===null&&(d=Function.prototype);var b=Object.getOwnPropertyDescriptor(d,y);if(b===void 0){var _=Object.getPrototypeOf(d);return _===null?void 0:p(_,y,S)}else{if("value"in b)return b.value;var C=b.get;return C===void 0?void 0:C.call(S)}},"get"),g=u(0),s=e(g),a=u(7),i=e(a);function e(p){return p&&p.__esModule?p:{default:p}}n(e,"_interopRequireDefault");function t(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}n(t,"_classCallCheck");function r(p,d){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:p}n(r,"_possibleConstructorReturn");function o(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);p.prototype=Object.create(d&&d.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(p,d):p.__proto__=d)}n(o,"_inherits");var f="\uFEFF",h=function(p){o(d,p);function d(y){t(this,d);var S=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,y));return S.contentNode=document.createElement("span"),S.contentNode.setAttribute("contenteditable",!1),[].slice.call(S.domNode.childNodes).forEach(function(b){S.contentNode.appendChild(b)}),S.leftGuard=document.createTextNode(f),S.rightGuard=document.createTextNode(f),S.domNode.appendChild(S.leftGuard),S.domNode.appendChild(S.contentNode),S.domNode.appendChild(S.rightGuard),S}return n(d,"Embed"),m(d,[{key:"index",value:n(function(S,b){return S===this.leftGuard?0:S===this.rightGuard?1:v(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"index",this).call(this,S,b)},"index")},{key:"restore",value:n(function(S){var b=void 0,_=void 0,C=S.data.split(f).join("");if(S===this.leftGuard)if(this.prev instanceof i.default){var w=this.prev.length();this.prev.insertAt(w,C),b={startNode:this.prev.domNode,startOffset:w+C.length}}else _=document.createTextNode(C),this.parent.insertBefore(s.default.create(_),this),b={startNode:_,startOffset:C.length};else S===this.rightGuard&&(this.next instanceof i.default?(this.next.insertAt(0,C),b={startNode:this.next.domNode,startOffset:C.length}):(_=document.createTextNode(C),this.parent.insertBefore(s.default.create(_),this.next),b={startNode:_,startOffset:C.length}));return S.data=f,b},"restore")},{key:"update",value:n(function(S,b){var _=this;S.forEach(function(C){if(C.type==="characterData"&&(C.target===_.leftGuard||C.target===_.rightGuard)){var w=_.restore(C.target);w&&(b.range=w)}})},"update")}]),d}(s.default.Embed);c.default=h},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.AlignStyle=c.AlignClass=c.AlignAttribute=void 0;var m=u(0),v=g(m);function g(t){return t&&t.__esModule?t:{default:t}}n(g,"_interopRequireDefault");var s={scope:v.default.Scope.BLOCK,whitelist:["right","center","justify"]},a=new v.default.Attributor.Attribute("align","align",s),i=new v.default.Attributor.Class("align","ql-align",s),e=new v.default.Attributor.Style("align","text-align",s);c.AlignAttribute=a,c.AlignClass=i,c.AlignStyle=e},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.BackgroundStyle=c.BackgroundClass=void 0;var m=u(0),v=s(m),g=u(27);function s(e){return e&&e.__esModule?e:{default:e}}n(s,"_interopRequireDefault");var a=new v.default.Attributor.Class("background","ql-bg",{scope:v.default.Scope.INLINE}),i=new g.ColorAttributor("background","background-color",{scope:v.default.Scope.INLINE});c.BackgroundClass=a,c.BackgroundStyle=i},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.DirectionStyle=c.DirectionClass=c.DirectionAttribute=void 0;var m=u(0),v=g(m);function g(t){return t&&t.__esModule?t:{default:t}}n(g,"_interopRequireDefault");var s={scope:v.default.Scope.BLOCK,whitelist:["rtl"]},a=new v.default.Attributor.Attribute("direction","dir",s),i=new v.default.Attributor.Class("direction","ql-direction",s),e=new v.default.Attributor.Style("direction","direction",s);c.DirectionAttribute=a,c.DirectionClass=i,c.DirectionStyle=e},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.FontClass=c.FontStyle=void 0;var m=function(){function p(d,y){for(var S=0;S<y.length;S++){var b=y[S];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return n(p,"defineProperties"),function(d,y,S){return y&&p(d.prototype,y),S&&p(d,S),d}}(),v=n(function p(d,y,S){d===null&&(d=Function.prototype);var b=Object.getOwnPropertyDescriptor(d,y);if(b===void 0){var _=Object.getPrototypeOf(d);return _===null?void 0:p(_,y,S)}else{if("value"in b)return b.value;var C=b.get;return C===void 0?void 0:C.call(S)}},"get"),g=u(0),s=a(g);function a(p){return p&&p.__esModule?p:{default:p}}n(a,"_interopRequireDefault");function i(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}n(i,"_classCallCheck");function e(p,d){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:p}n(e,"_possibleConstructorReturn");function t(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);p.prototype=Object.create(d&&d.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(p,d):p.__proto__=d)}n(t,"_inherits");var r={scope:s.default.Scope.INLINE,whitelist:["serif","monospace"]},o=new s.default.Attributor.Class("font","ql-font",r),f=function(p){t(d,p);function d(){return i(this,d),e(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return n(d,"FontStyleAttributor"),m(d,[{key:"value",value:n(function(S){return v(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"value",this).call(this,S).replace(/["']/g,"")},"value")}]),d}(s.default.Attributor.Style),h=new f("font","font-family",r);c.FontStyle=h,c.FontClass=o},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.SizeStyle=c.SizeClass=void 0;var m=u(0),v=g(m);function g(i){return i&&i.__esModule?i:{default:i}}n(g,"_interopRequireDefault");var s=new v.default.Attributor.Class("size","ql-size",{scope:v.default.Scope.INLINE,whitelist:["small","large","huge"]}),a=new v.default.Attributor.Style("size","font-size",{scope:v.default.Scope.INLINE,whitelist:["10px","18px","32px"]});c.SizeClass=s,c.SizeStyle=a},function(l,c,u){"use strict";l.exports={align:{"":u(96),center:u(97),right:u(98),justify:u(99)},background:u(100),blockquote:u(101),bold:u(102),clean:u(103),code:u(78),"code-block":u(78),color:u(104),direction:{"":u(105),rtl:u(106)},float:{center:u(107),full:u(108),left:u(109),right:u(110)},formula:u(111),header:{1:u(112),2:u(113)},italic:u(114),image:u(115),indent:{"+1":u(116),"-1":u(117)},link:u(118),list:{ordered:u(119),bullet:u(120),check:u(121)},script:{sub:u(122),super:u(123)},strike:u(124),underline:u(125),video:u(126)}},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.getLastChangeIndex=c.default=void 0;var m=function(){function y(S,b){for(var _=0;_<b.length;_++){var C=b[_];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(S,C.key,C)}}return n(y,"defineProperties"),function(S,b,_){return b&&y(S.prototype,b),_&&y(S,_),S}}(),v=u(0),g=t(v),s=u(5),a=t(s),i=u(9),e=t(i);function t(y){return y&&y.__esModule?y:{default:y}}n(t,"_interopRequireDefault");function r(y,S){if(!(y instanceof S))throw new TypeError("Cannot call a class as a function")}n(r,"_classCallCheck");function o(y,S){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:y}n(o,"_possibleConstructorReturn");function f(y,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);y.prototype=Object.create(S&&S.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(y,S):y.__proto__=S)}n(f,"_inherits");var h=function(y){f(S,y);function S(b,_){r(this,S);var C=o(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,b,_));return C.lastRecorded=0,C.ignoreChange=!1,C.clear(),C.quill.on(a.default.events.EDITOR_CHANGE,function(w,R,O,D){w!==a.default.events.TEXT_CHANGE||C.ignoreChange||(!C.options.userOnly||D===a.default.sources.USER?C.record(R,O):C.transform(R))}),C.quill.keyboard.addBinding({key:"Z",shortKey:!0},C.undo.bind(C)),C.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},C.redo.bind(C)),/Win/i.test(navigator.platform)&&C.quill.keyboard.addBinding({key:"Y",shortKey:!0},C.redo.bind(C)),C}return n(S,"History"),m(S,[{key:"change",value:n(function(_,C){if(this.stack[_].length!==0){var w=this.stack[_].pop();this.stack[C].push(w),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(w[_],a.default.sources.USER),this.ignoreChange=!1;var R=d(w[_]);this.quill.setSelection(R)}},"change")},{key:"clear",value:n(function(){this.stack={undo:[],redo:[]}},"clear")},{key:"cutoff",value:n(function(){this.lastRecorded=0},"cutoff")},{key:"record",value:n(function(_,C){if(_.ops.length!==0){this.stack.redo=[];var w=this.quill.getContents().diff(C),R=Date.now();if(this.lastRecorded+this.options.delay>R&&this.stack.undo.length>0){var O=this.stack.undo.pop();w=w.compose(O.undo),_=O.redo.compose(_)}else this.lastRecorded=R;this.stack.undo.push({redo:_,undo:w}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}},"record")},{key:"redo",value:n(function(){this.change("redo","undo")},"redo")},{key:"transform",value:n(function(_){this.stack.undo.forEach(function(C){C.undo=_.transform(C.undo,!0),C.redo=_.transform(C.redo,!0)}),this.stack.redo.forEach(function(C){C.undo=_.transform(C.undo,!0),C.redo=_.transform(C.redo,!0)})},"transform")},{key:"undo",value:n(function(){this.change("undo","redo")},"undo")}]),S}(e.default);h.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function p(y){var S=y.ops[y.ops.length-1];return S==null?!1:S.insert!=null?typeof S.insert=="string"&&S.insert.endsWith(`
`):S.attributes!=null?Object.keys(S.attributes).some(function(b){return g.default.query(b,g.default.Scope.BLOCK)!=null}):!1}n(p,"endsWithNewlineChange");function d(y){var S=y.reduce(function(_,C){return _+=C.delete||0,_},0),b=y.length()-S;return p(y)&&(b-=1),b}n(d,"getLastChangeIndex"),c.default=h,c.getLastChangeIndex=d},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.BaseTooltip=void 0;var m=function(){function he(Ae,Ee){for(var Oe=0;Oe<Ee.length;Oe++){var be=Ee[Oe];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty(Ae,be.key,be)}}return n(he,"defineProperties"),function(Ae,Ee,Oe){return Ee&&he(Ae.prototype,Ee),Oe&&he(Ae,Oe),Ae}}(),v=n(function he(Ae,Ee,Oe){Ae===null&&(Ae=Function.prototype);var be=Object.getOwnPropertyDescriptor(Ae,Ee);if(be===void 0){var De=Object.getPrototypeOf(Ae);return De===null?void 0:he(De,Ee,Oe)}else{if("value"in be)return be.value;var ut=be.get;return ut===void 0?void 0:ut.call(Oe)}},"get"),g=u(3),s=R(g),a=u(2),i=R(a),e=u(8),t=R(e),r=u(24),o=R(r),f=u(44),h=R(f),p=u(79),d=R(p),y=u(80),S=R(y),b=u(29),_=R(b),C=u(81),w=R(C);function R(he){return he&&he.__esModule?he:{default:he}}n(R,"_interopRequireDefault");function O(he,Ae){if(!(he instanceof Ae))throw new TypeError("Cannot call a class as a function")}n(O,"_classCallCheck");function D(he,Ae){if(!he)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ae&&(typeof Ae=="object"||typeof Ae=="function")?Ae:he}n(D,"_possibleConstructorReturn");function I(he,Ae){if(typeof Ae!="function"&&Ae!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ae);he.prototype=Object.create(Ae&&Ae.prototype,{constructor:{value:he,enumerable:!1,writable:!0,configurable:!0}}),Ae&&(Object.setPrototypeOf?Object.setPrototypeOf(he,Ae):he.__proto__=Ae)}n(I,"_inherits");var M=[!1,"center","right","justify"],k=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],N=[!1,"serif","monospace"],j=["1","2","3",!1],B=["small",!1,"large","huge"],J=function(he){I(Ae,he);function Ae(Ee,Oe){O(this,Ae);var be=D(this,(Ae.__proto__||Object.getPrototypeOf(Ae)).call(this,Ee,Oe)),De=n(function ut(St){if(!document.body.contains(Ee.root))return document.body.removeEventListener("click",ut);be.tooltip!=null&&!be.tooltip.root.contains(St.target)&&document.activeElement!==be.tooltip.textbox&&!be.quill.hasFocus()&&be.tooltip.hide(),be.pickers!=null&&be.pickers.forEach(function(Rt){Rt.container.contains(St.target)||Rt.close()})},"listener");return Ee.emitter.listenDOM("click",document.body,De),be}return n(Ae,"BaseTheme"),m(Ae,[{key:"addModule",value:n(function(Oe){var be=v(Ae.prototype.__proto__||Object.getPrototypeOf(Ae.prototype),"addModule",this).call(this,Oe);return Oe==="toolbar"&&this.extendToolbar(be),be},"addModule")},{key:"buildButtons",value:n(function(Oe,be){Oe.forEach(function(De){var ut=De.getAttribute("class")||"";ut.split(/\s+/).forEach(function(St){if(St.startsWith("ql-")&&(St=St.slice(3),be[St]!=null))if(St==="direction")De.innerHTML=be[St][""]+be[St].rtl;else if(typeof be[St]=="string")De.innerHTML=be[St];else{var Rt=De.value||"";Rt!=null&&be[St][Rt]&&(De.innerHTML=be[St][Rt])}})})},"buildButtons")},{key:"buildPickers",value:n(function(Oe,be){var De=this;this.pickers=Oe.map(function(St){if(St.classList.contains("ql-align"))return St.querySelector("option")==null&&$(St,M),new S.default(St,be.align);if(St.classList.contains("ql-background")||St.classList.contains("ql-color")){var Rt=St.classList.contains("ql-background")?"background":"color";return St.querySelector("option")==null&&$(St,k,Rt==="background"?"#ffffff":"#000000"),new d.default(St,be[Rt])}else return St.querySelector("option")==null&&(St.classList.contains("ql-font")?$(St,N):St.classList.contains("ql-header")?$(St,j):St.classList.contains("ql-size")&&$(St,B)),new _.default(St)});var ut=n(function(){De.pickers.forEach(function(Rt){Rt.update()})},"update");this.quill.on(t.default.events.EDITOR_CHANGE,ut)},"buildPickers")}]),Ae}(h.default);J.DEFAULTS=(0,s.default)(!0,{},h.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:n(function(){this.quill.theme.tooltip.edit("formula")},"formula"),image:n(function(){var Ae=this,Ee=this.container.querySelector("input.ql-image[type=file]");Ee==null&&(Ee=document.createElement("input"),Ee.setAttribute("type","file"),Ee.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),Ee.classList.add("ql-image"),Ee.addEventListener("change",function(){if(Ee.files!=null&&Ee.files[0]!=null){var Oe=new FileReader;Oe.onload=function(be){var De=Ae.quill.getSelection(!0);Ae.quill.updateContents(new i.default().retain(De.index).delete(De.length).insert({image:be.target.result}),t.default.sources.USER),Ae.quill.setSelection(De.index+1,t.default.sources.SILENT),Ee.value=""},Oe.readAsDataURL(Ee.files[0])}}),this.container.appendChild(Ee)),Ee.click()},"image"),video:n(function(){this.quill.theme.tooltip.edit("video")},"video")}}}});var Q=function(he){I(Ae,he);function Ae(Ee,Oe){O(this,Ae);var be=D(this,(Ae.__proto__||Object.getPrototypeOf(Ae)).call(this,Ee,Oe));return be.textbox=be.root.querySelector('input[type="text"]'),be.listen(),be}return n(Ae,"BaseTooltip"),m(Ae,[{key:"listen",value:n(function(){var Oe=this;this.textbox.addEventListener("keydown",function(be){o.default.match(be,"enter")?(Oe.save(),be.preventDefault()):o.default.match(be,"escape")&&(Oe.cancel(),be.preventDefault())})},"listen")},{key:"cancel",value:n(function(){this.hide()},"cancel")},{key:"edit",value:n(function(){var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),be!=null?this.textbox.value=be:Oe!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+Oe)||""),this.root.setAttribute("data-mode",Oe)},"edit")},{key:"restoreFocus",value:n(function(){var Oe=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=Oe},"restoreFocus")},{key:"save",value:n(function(){var Oe=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var be=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",Oe,t.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",Oe,t.default.sources.USER)),this.quill.root.scrollTop=be;break}case"video":Oe=oe(Oe);case"formula":{if(!Oe)break;var De=this.quill.getSelection(!0);if(De!=null){var ut=De.index+De.length;this.quill.insertEmbed(ut,this.root.getAttribute("data-mode"),Oe,t.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ut+1," ",t.default.sources.USER),this.quill.setSelection(ut+2,t.default.sources.USER)}break}default:}this.textbox.value="",this.hide()},"save")}]),Ae}(w.default);function oe(he){var Ae=he.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||he.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return Ae?(Ae[1]||"https")+"://www.youtube.com/embed/"+Ae[2]+"?showinfo=0":(Ae=he.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(Ae[1]||"https")+"://player.vimeo.com/video/"+Ae[2]+"/":he}n(oe,"extractVideoUrl");function $(he,Ae){var Ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;Ae.forEach(function(Oe){var be=document.createElement("option");Oe===Ee?be.setAttribute("selected","selected"):be.setAttribute("value",Oe),he.appendChild(be)})}n($,"fillSelect"),c.BaseTooltip=Q,c.default=J},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=function(){function v(){this.head=this.tail=null,this.length=0}return n(v,"LinkedList"),v.prototype.append=function(){for(var g=[],s=0;s<arguments.length;s++)g[s]=arguments[s];this.insertBefore(g[0],null),g.length>1&&this.append.apply(this,g.slice(1))},v.prototype.contains=function(g){for(var s,a=this.iterator();s=a();)if(s===g)return!0;return!1},v.prototype.insertBefore=function(g,s){g&&(g.next=s,s!=null?(g.prev=s.prev,s.prev!=null&&(s.prev.next=g),s.prev=g,s===this.head&&(this.head=g)):this.tail!=null?(this.tail.next=g,g.prev=this.tail,this.tail=g):(g.prev=null,this.head=this.tail=g),this.length+=1)},v.prototype.offset=function(g){for(var s=0,a=this.head;a!=null;){if(a===g)return s;s+=a.length(),a=a.next}return-1},v.prototype.remove=function(g){this.contains(g)&&(g.prev!=null&&(g.prev.next=g.next),g.next!=null&&(g.next.prev=g.prev),g===this.head&&(this.head=g.next),g===this.tail&&(this.tail=g.prev),this.length-=1)},v.prototype.iterator=function(g){return g===void 0&&(g=this.head),function(){var s=g;return g!=null&&(g=g.next),s}},v.prototype.find=function(g,s){s===void 0&&(s=!1);for(var a,i=this.iterator();a=i();){var e=a.length();if(g<e||s&&g===e&&(a.next==null||a.next.length()!==0))return[a,g];g-=e}return[null,0]},v.prototype.forEach=function(g){for(var s,a=this.iterator();s=a();)g(s)},v.prototype.forEachAt=function(g,s,a){if(!(s<=0))for(var i=this.find(g),e=i[0],t=i[1],r,o=g-t,f=this.iterator(e);(r=f())&&o<g+s;){var h=r.length();g>o?a(r,g-o,Math.min(s,o+h-g)):a(r,0,Math.min(h,g+s-o)),o+=h}},v.prototype.map=function(g){return this.reduce(function(s,a){return s.push(g(a)),s},[])},v.prototype.reduce=function(g,s){for(var a,i=this.iterator();a=i();)s=g(s,a);return s},v}();c.default=m},function(l,c,u){"use strict";var m=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])};return function(t,r){e(t,r);function o(){this.constructor=t}n(o,"__"),t.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(c,"__esModule",{value:!0});var v=u(18),g=u(1),s={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},a=100,i=function(e){m(t,e);function t(r){var o=e.call(this,r)||this;return o.scroll=o,o.observer=new MutationObserver(function(f){o.update(f)}),o.observer.observe(o.domNode,s),o.attach(),o}return n(t,"ScrollBlot"),t.prototype.detach=function(){e.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(r,o){this.update(),r===0&&o===this.length()?this.children.forEach(function(f){f.remove()}):e.prototype.deleteAt.call(this,r,o)},t.prototype.formatAt=function(r,o,f,h){this.update(),e.prototype.formatAt.call(this,r,o,f,h)},t.prototype.insertAt=function(r,o,f){this.update(),e.prototype.insertAt.call(this,r,o,f)},t.prototype.optimize=function(r,o){var f=this;r===void 0&&(r=[]),o===void 0&&(o={}),e.prototype.optimize.call(this,o);for(var h=[].slice.call(this.observer.takeRecords());h.length>0;)r.push(h.pop());for(var p=n(function(b,_){_===void 0&&(_=!0),!(b==null||b===f)&&b.domNode.parentNode!=null&&(b.domNode[g.DATA_KEY].mutations==null&&(b.domNode[g.DATA_KEY].mutations=[]),_&&p(b.parent))},"mark"),d=n(function(b){b.domNode[g.DATA_KEY]==null||b.domNode[g.DATA_KEY].mutations==null||(b instanceof v.default&&b.children.forEach(d),b.optimize(o))},"optimize"),y=r,S=0;y.length>0;S+=1){if(S>=a)throw new Error("[Parchment] Maximum optimize iterations reached");for(y.forEach(function(b){var _=g.find(b.target,!0);_!=null&&(_.domNode===b.target&&(b.type==="childList"?(p(g.find(b.previousSibling,!1)),[].forEach.call(b.addedNodes,function(C){var w=g.find(C,!1);p(w,!1),w instanceof v.default&&w.children.forEach(function(R){p(R,!1)})})):b.type==="attributes"&&p(_.prev)),p(_))}),this.children.forEach(d),y=[].slice.call(this.observer.takeRecords()),h=y.slice();h.length>0;)r.push(h.pop())}},t.prototype.update=function(r,o){var f=this;o===void 0&&(o={}),r=r||this.observer.takeRecords(),r.map(function(h){var p=g.find(h.target,!0);return p==null?null:p.domNode[g.DATA_KEY].mutations==null?(p.domNode[g.DATA_KEY].mutations=[h],p):(p.domNode[g.DATA_KEY].mutations.push(h),null)}).forEach(function(h){h==null||h===f||h.domNode[g.DATA_KEY]==null||h.update(h.domNode[g.DATA_KEY].mutations||[],o)}),this.domNode[g.DATA_KEY].mutations!=null&&e.prototype.update.call(this,this.domNode[g.DATA_KEY].mutations,o),this.optimize(r,o)},t.blotName="scroll",t.defaultChild="block",t.scope=g.Scope.BLOCK_BLOT,t.tagName="DIV",t}(v.default);c.default=i},function(l,c,u){"use strict";var m=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){i(e,t);function r(){this.constructor=e}n(r,"__"),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(c,"__esModule",{value:!0});var v=u(19),g=u(1);function s(i,e){if(Object.keys(i).length!==Object.keys(e).length)return!1;for(var t in i)if(i[t]!==e[t])return!1;return!0}n(s,"isEqual");var a=function(i){m(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return n(e,"InlineBlot"),e.formats=function(t){if(t.tagName!==e.tagName)return i.formats.call(this,t)},e.prototype.format=function(t,r){var o=this;t===this.statics.blotName&&!r?(this.children.forEach(function(f){f instanceof v.default||(f=f.wrap(e.blotName,!0)),o.attributes.copy(f)}),this.unwrap()):i.prototype.format.call(this,t,r)},e.prototype.formatAt=function(t,r,o,f){if(this.formats()[o]!=null||g.query(o,g.Scope.ATTRIBUTE)){var h=this.isolate(t,r);h.format(o,f)}else i.prototype.formatAt.call(this,t,r,o,f)},e.prototype.optimize=function(t){i.prototype.optimize.call(this,t);var r=this.formats();if(Object.keys(r).length===0)return this.unwrap();var o=this.next;o instanceof e&&o.prev===this&&s(r,o.formats())&&(o.moveChildren(this),o.remove())},e.blotName="inline",e.scope=g.Scope.INLINE_BLOT,e.tagName="SPAN",e}(v.default);c.default=a},function(l,c,u){"use strict";var m=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])};return function(i,e){a(i,e);function t(){this.constructor=i}n(t,"__"),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}();Object.defineProperty(c,"__esModule",{value:!0});var v=u(19),g=u(1),s=function(a){m(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return n(i,"BlockBlot"),i.formats=function(e){var t=g.query(i.blotName).tagName;if(e.tagName!==t)return a.formats.call(this,e)},i.prototype.format=function(e,t){g.query(e,g.Scope.BLOCK)!=null&&(e===this.statics.blotName&&!t?this.replaceWith(i.blotName):a.prototype.format.call(this,e,t))},i.prototype.formatAt=function(e,t,r,o){g.query(r,g.Scope.BLOCK)!=null?this.format(r,o):a.prototype.formatAt.call(this,e,t,r,o)},i.prototype.insertAt=function(e,t,r){if(r==null||g.query(t,g.Scope.INLINE)!=null)a.prototype.insertAt.call(this,e,t,r);else{var o=this.split(e),f=g.create(t,r);o.parent.insertBefore(f,o)}},i.prototype.update=function(e,t){navigator.userAgent.match(/Trident/)?this.build():a.prototype.update.call(this,e,t)},i.blotName="block",i.scope=g.Scope.BLOCK_BLOT,i.tagName="P",i}(v.default);c.default=s},function(l,c,u){"use strict";var m=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var e in i)i.hasOwnProperty(e)&&(a[e]=i[e])};return function(a,i){s(a,i);function e(){this.constructor=a}n(e,"__"),a.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}();Object.defineProperty(c,"__esModule",{value:!0});var v=u(20),g=function(s){m(a,s);function a(){return s!==null&&s.apply(this,arguments)||this}return n(a,"EmbedBlot"),a.formats=function(i){},a.prototype.format=function(i,e){s.prototype.formatAt.call(this,0,this.length(),i,e)},a.prototype.formatAt=function(i,e,t,r){i===0&&e===this.length()?this.format(t,r):s.prototype.formatAt.call(this,i,e,t,r)},a.prototype.formats=function(){return this.statics.formats(this.domNode)},a}(v.default);c.default=g},function(l,c,u){"use strict";var m=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])};return function(i,e){a(i,e);function t(){this.constructor=i}n(t,"__"),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}();Object.defineProperty(c,"__esModule",{value:!0});var v=u(20),g=u(1),s=function(a){m(i,a);function i(e){var t=a.call(this,e)||this;return t.text=t.statics.value(t.domNode),t}return n(i,"TextBlot"),i.create=function(e){return document.createTextNode(e)},i.value=function(e){var t=e.data;return t.normalize&&(t=t.normalize()),t},i.prototype.deleteAt=function(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)},i.prototype.index=function(e,t){return this.domNode===e?t:-1},i.prototype.insertAt=function(e,t,r){r==null?(this.text=this.text.slice(0,e)+t+this.text.slice(e),this.domNode.data=this.text):a.prototype.insertAt.call(this,e,t,r)},i.prototype.length=function(){return this.text.length},i.prototype.optimize=function(e){a.prototype.optimize.call(this,e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof i&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},i.prototype.position=function(e,t){return t===void 0&&(t=!1),[this.domNode,e]},i.prototype.split=function(e,t){if(t===void 0&&(t=!1),!t){if(e===0)return this;if(e===this.length())return this.next}var r=g.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next),this.text=this.statics.value(this.domNode),r},i.prototype.update=function(e,t){var r=this;e.some(function(o){return o.type==="characterData"&&o.target===r.domNode})&&(this.text=this.statics.value(this.domNode))},i.prototype.value=function(){return this.text},i.blotName="text",i.scope=g.Scope.INLINE_BLOT,i}(v.default);c.default=s},function(l,c,u){"use strict";var m=document.createElement("div");if(m.classList.toggle("test-class",!1),m.classList.contains("test-class")){var v=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(g,s){return arguments.length>1&&!this.contains(g)==!s?s:v.call(this,g)}}String.prototype.startsWith||(String.prototype.startsWith=function(g,s){return s=s||0,this.substr(s,g.length)===g}),String.prototype.endsWith||(String.prototype.endsWith=function(g,s){var a=this.toString();(typeof s!="number"||!isFinite(s)||Math.floor(s)!==s||s>a.length)&&(s=a.length),s-=g.length;var i=a.indexOf(g,s);return i!==-1&&i===s}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:n(function(s){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof s!="function")throw new TypeError("predicate must be a function");for(var a=Object(this),i=a.length>>>0,e=arguments[1],t,r=0;r<i;r++)if(t=a[r],s.call(e,t,r,a))return t},"value")}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(l,c){var u=-1,m=1,v=0;function g(S,b,_){if(S==b)return S?[[v,S]]:[];(_<0||S.length<_)&&(_=null);var C=e(S,b),w=S.substring(0,C);S=S.substring(C),b=b.substring(C),C=t(S,b);var R=S.substring(S.length-C);S=S.substring(0,S.length-C),b=b.substring(0,b.length-C);var O=s(S,b);return w&&O.unshift([v,w]),R&&O.push([v,R]),o(O),_!=null&&(O=p(O,_)),O=d(O),O}n(g,"diff_main");function s(S,b){var _;if(!S)return[[m,b]];if(!b)return[[u,S]];var C=S.length>b.length?S:b,w=S.length>b.length?b:S,R=C.indexOf(w);if(R!=-1)return _=[[m,C.substring(0,R)],[v,w],[m,C.substring(R+w.length)]],S.length>b.length&&(_[0][0]=_[2][0]=u),_;if(w.length==1)return[[u,S],[m,b]];var O=r(S,b);if(O){var D=O[0],I=O[1],M=O[2],k=O[3],N=O[4],j=g(D,M),B=g(I,k);return j.concat([[v,N]],B)}return a(S,b)}n(s,"diff_compute_");function a(S,b){for(var _=S.length,C=b.length,w=Math.ceil((_+C)/2),R=w,O=2*w,D=new Array(O),I=new Array(O),M=0;M<O;M++)D[M]=-1,I[M]=-1;D[R+1]=0,I[R+1]=0;for(var k=_-C,N=k%2!=0,j=0,B=0,J=0,Q=0,oe=0;oe<w;oe++){for(var $=-oe+j;$<=oe-B;$+=2){var he=R+$,Ae;$==-oe||$!=oe&&D[he-1]<D[he+1]?Ae=D[he+1]:Ae=D[he-1]+1;for(var Ee=Ae-$;Ae<_&&Ee<C&&S.charAt(Ae)==b.charAt(Ee);)Ae++,Ee++;if(D[he]=Ae,Ae>_)B+=2;else if(Ee>C)j+=2;else if(N){var Oe=R+k-$;if(Oe>=0&&Oe<O&&I[Oe]!=-1){var be=_-I[Oe];if(Ae>=be)return i(S,b,Ae,Ee)}}}for(var De=-oe+J;De<=oe-Q;De+=2){var Oe=R+De,be;De==-oe||De!=oe&&I[Oe-1]<I[Oe+1]?be=I[Oe+1]:be=I[Oe-1]+1;for(var ut=be-De;be<_&&ut<C&&S.charAt(_-be-1)==b.charAt(C-ut-1);)be++,ut++;if(I[Oe]=be,be>_)Q+=2;else if(ut>C)J+=2;else if(!N){var he=R+k-De;if(he>=0&&he<O&&D[he]!=-1){var Ae=D[he],Ee=R+Ae-he;if(be=_-be,Ae>=be)return i(S,b,Ae,Ee)}}}}return[[u,S],[m,b]]}n(a,"diff_bisect_");function i(S,b,_,C){var w=S.substring(0,_),R=b.substring(0,C),O=S.substring(_),D=b.substring(C),I=g(w,R),M=g(O,D);return I.concat(M)}n(i,"diff_bisectSplit_");function e(S,b){if(!S||!b||S.charAt(0)!=b.charAt(0))return 0;for(var _=0,C=Math.min(S.length,b.length),w=C,R=0;_<w;)S.substring(R,w)==b.substring(R,w)?(_=w,R=_):C=w,w=Math.floor((C-_)/2+_);return w}n(e,"diff_commonPrefix");function t(S,b){if(!S||!b||S.charAt(S.length-1)!=b.charAt(b.length-1))return 0;for(var _=0,C=Math.min(S.length,b.length),w=C,R=0;_<w;)S.substring(S.length-w,S.length-R)==b.substring(b.length-w,b.length-R)?(_=w,R=_):C=w,w=Math.floor((C-_)/2+_);return w}n(t,"diff_commonSuffix");function r(S,b){var _=S.length>b.length?S:b,C=S.length>b.length?b:S;if(_.length<4||C.length*2<_.length)return null;function w(B,J,Q){for(var oe=B.substring(Q,Q+Math.floor(B.length/4)),$=-1,he="",Ae,Ee,Oe,be;($=J.indexOf(oe,$+1))!=-1;){var De=e(B.substring(Q),J.substring($)),ut=t(B.substring(0,Q),J.substring(0,$));he.length<ut+De&&(he=J.substring($-ut,$)+J.substring($,$+De),Ae=B.substring(0,Q-ut),Ee=B.substring(Q+De),Oe=J.substring(0,$-ut),be=J.substring($+De))}return he.length*2>=B.length?[Ae,Ee,Oe,be,he]:null}n(w,"diff_halfMatchI_");var R=w(_,C,Math.ceil(_.length/4)),O=w(_,C,Math.ceil(_.length/2)),D;if(!R&&!O)return null;O?R?D=R[4].length>O[4].length?R:O:D=O:D=R;var I,M,k,N;S.length>b.length?(I=D[0],M=D[1],k=D[2],N=D[3]):(k=D[0],N=D[1],I=D[2],M=D[3]);var j=D[4];return[I,M,k,N,j]}n(r,"diff_halfMatch_");function o(S){S.push([v,""]);for(var b=0,_=0,C=0,w="",R="",O;b<S.length;)switch(S[b][0]){case m:C++,R+=S[b][1],b++;break;case u:_++,w+=S[b][1],b++;break;case v:_+C>1?(_!==0&&C!==0&&(O=e(R,w),O!==0&&(b-_-C>0&&S[b-_-C-1][0]==v?S[b-_-C-1][1]+=R.substring(0,O):(S.splice(0,0,[v,R.substring(0,O)]),b++),R=R.substring(O),w=w.substring(O)),O=t(R,w),O!==0&&(S[b][1]=R.substring(R.length-O)+S[b][1],R=R.substring(0,R.length-O),w=w.substring(0,w.length-O))),_===0?S.splice(b-C,_+C,[m,R]):C===0?S.splice(b-_,_+C,[u,w]):S.splice(b-_-C,_+C,[u,w],[m,R]),b=b-_-C+(_?1:0)+(C?1:0)+1):b!==0&&S[b-1][0]==v?(S[b-1][1]+=S[b][1],S.splice(b,1)):b++,C=0,_=0,w="",R="";break}S[S.length-1][1]===""&&S.pop();var D=!1;for(b=1;b<S.length-1;)S[b-1][0]==v&&S[b+1][0]==v&&(S[b][1].substring(S[b][1].length-S[b-1][1].length)==S[b-1][1]?(S[b][1]=S[b-1][1]+S[b][1].substring(0,S[b][1].length-S[b-1][1].length),S[b+1][1]=S[b-1][1]+S[b+1][1],S.splice(b-1,1),D=!0):S[b][1].substring(0,S[b+1][1].length)==S[b+1][1]&&(S[b-1][1]+=S[b+1][1],S[b][1]=S[b][1].substring(S[b+1][1].length)+S[b+1][1],S.splice(b+1,1),D=!0)),b++;D&&o(S)}n(o,"diff_cleanupMerge");var f=g;f.INSERT=m,f.DELETE=u,f.EQUAL=v,l.exports=f;function h(S,b){if(b===0)return[v,S];for(var _=0,C=0;C<S.length;C++){var w=S[C];if(w[0]===u||w[0]===v){var R=_+w[1].length;if(b===R)return[C+1,S];if(b<R){S=S.slice();var O=b-_,D=[w[0],w[1].slice(0,O)],I=[w[0],w[1].slice(O)];return S.splice(C,1,D,I),[C+1,S]}else _=R}}throw new Error("cursor_pos is out of bounds!")}n(h,"cursor_normalize_diff");function p(S,b){var _=h(S,b),C=_[1],w=_[0],R=C[w],O=C[w+1];if(R==null)return S;if(R[0]!==v)return S;if(O!=null&&R[1]+O[1]===O[1]+R[1])return C.splice(w,2,O,R),y(C,w,2);if(O!=null&&O[1].indexOf(R[1])===0){C.splice(w,2,[O[0],R[1]],[0,R[1]]);var D=O[1].slice(R[1].length);return D.length>0&&C.splice(w+2,0,[O[0],D]),y(C,w,3)}else return S}n(p,"fix_cursor");function d(S){for(var b=!1,_=n(function(O){return O.charCodeAt(0)>=56320&&O.charCodeAt(0)<=57343},"starts_with_pair_end"),C=n(function(O){return O.charCodeAt(O.length-1)>=55296&&O.charCodeAt(O.length-1)<=56319},"ends_with_pair_start"),w=2;w<S.length;w+=1)S[w-2][0]===v&&C(S[w-2][1])&&S[w-1][0]===u&&_(S[w-1][1])&&S[w][0]===m&&_(S[w][1])&&(b=!0,S[w-1][1]=S[w-2][1].slice(-1)+S[w-1][1],S[w][1]=S[w-2][1].slice(-1)+S[w][1],S[w-2][1]=S[w-2][1].slice(0,-1));if(!b)return S;for(var R=[],w=0;w<S.length;w+=1)S[w][1].length>0&&R.push(S[w]);return R}n(d,"fix_emoji");function y(S,b,_){for(var C=b+_-1;C>=0&&C>=b-1;C--)if(C+1<S.length){var w=S[C],R=S[C+1];w[0]===R[1]&&S.splice(C,2,[w[0],w[1]+R[1]])}return S}n(y,"merge_tuples")},function(l,c,u){"use strict";var m;if(!Object.keys){var v=Object.prototype.hasOwnProperty,g=Object.prototype.toString,s=u(36),a=Object.prototype.propertyIsEnumerable,i=!a.call({toString:null},"toString"),e=a.call(function(){},"prototype"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n(function(p){var d=p.constructor;return d&&d.prototype===p},"equalsConstructorPrototype"),o={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if(typeof window>"u")return!1;for(var p in window)try{if(!o["$"+p]&&v.call(window,p)&&window[p]!==null&&typeof window[p]=="object")try{r(window[p])}catch{return!0}}catch{return!0}return!1}(),h=n(function(p){if(typeof window>"u"||!f)return r(p);try{return r(p)}catch{return!1}},"equalsConstructorPrototypeIfNotBuggy");m=n(function(d){var y=d!==null&&typeof d=="object",S=g.call(d)==="[object Function]",b=s(d),_=y&&g.call(d)==="[object String]",C=[];if(!y&&!S&&!b)throw new TypeError("Object.keys called on a non-object");var w=e&&S;if(_&&d.length>0&&!v.call(d,0))for(var R=0;R<d.length;++R)C.push(String(R));if(b&&d.length>0)for(var O=0;O<d.length;++O)C.push(String(O));else for(var D in d)!(w&&D==="prototype")&&v.call(d,D)&&C.push(String(D));if(i)for(var I=h(d),M=0;M<t.length;++M)!(I&&t[M]==="constructor")&&v.call(d,t[M])&&C.push(t[M]);return C},"keys")}l.exports=m},function(l,c,u){"use strict";var m=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",v=Object.prototype.toString,g=n(function(e){return m&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:v.call(e)==="[object Arguments]"},"isArguments"),s=n(function(e){return g(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&v.call(e)!=="[object Array]"&&v.call(e.callee)==="[object Function]"},"isArguments"),a=function(){return g(arguments)}();g.isLegacyArguments=s,l.exports=a?g:s},function(l,c,u){"use strict";var m=u(13),v=u(37),g=u(40),s=u(41),a=u(69),i=v(s(),Object);m(i,{getPolyfill:s,implementation:g,shim:a}),l.exports=i},function(l,c,u){"use strict";var m="Function.prototype.bind called on incompatible ",v=Array.prototype.slice,g=Object.prototype.toString,s="[object Function]";l.exports=n(function(i){var e=this;if(typeof e!="function"||g.call(e)!==s)throw new TypeError(m+e);for(var t=v.call(arguments,1),r,o=n(function(){if(this instanceof r){var y=e.apply(this,t.concat(v.call(arguments)));return Object(y)===y?y:this}else return e.apply(i,t.concat(v.call(arguments)))},"binder"),f=Math.max(0,e.length-t.length),h=[],p=0;p<f;p++)h.push("$"+p);if(r=Function("binder","return function ("+h.join(",")+"){ return binder.apply(this,arguments); }")(o),e.prototype){var d=n(function(){},"Empty");d.prototype=e.prototype,r.prototype=new d,d.prototype=null}return r},"bind")},function(l,c,u){"use strict";var m,v=TypeError,g=Object.getOwnPropertyDescriptor;if(g)try{g({},"")}catch{g=null}var s=n(function(){throw new v},"throwTypeError"),a=g?function(){try{return arguments.callee,s}catch{try{return g(arguments,"callee").get}catch{return s}}}():s,i=u(39)(),e=Object.getPrototypeOf||function(D){return D.__proto__},t,r=t?e(t):m,o,f=o?o.constructor:m,h,p=h?e(h):m,d=h?h():m,y=typeof Uint8Array>"u"?m:e(Uint8Array),S={"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?m:ArrayBuffer,"%ArrayBufferPrototype%":typeof ArrayBuffer>"u"?m:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":i?e([][Symbol.iterator]()):m,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":m,"%AsyncFunction%":f,"%AsyncFunctionPrototype%":f?f.prototype:m,"%AsyncGenerator%":h?e(d):m,"%AsyncGeneratorFunction%":p,"%AsyncGeneratorPrototype%":p?p.prototype:m,"%AsyncIteratorPrototype%":d&&i&&Symbol.asyncIterator?d[Symbol.asyncIterator]():m,"%Atomics%":typeof Atomics>"u"?m:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":typeof DataView>"u"?m:DataView,"%DataViewPrototype%":typeof DataView>"u"?m:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":typeof Float32Array>"u"?m:Float32Array,"%Float32ArrayPrototype%":typeof Float32Array>"u"?m:Float32Array.prototype,"%Float64Array%":typeof Float64Array>"u"?m:Float64Array,"%Float64ArrayPrototype%":typeof Float64Array>"u"?m:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":t?e(t()):m,"%GeneratorFunction%":r,"%GeneratorPrototype%":r?r.prototype:m,"%Int8Array%":typeof Int8Array>"u"?m:Int8Array,"%Int8ArrayPrototype%":typeof Int8Array>"u"?m:Int8Array.prototype,"%Int16Array%":typeof Int16Array>"u"?m:Int16Array,"%Int16ArrayPrototype%":typeof Int16Array>"u"?m:Int8Array.prototype,"%Int32Array%":typeof Int32Array>"u"?m:Int32Array,"%Int32ArrayPrototype%":typeof Int32Array>"u"?m:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":i?e(e([][Symbol.iterator]())):m,"%JSON%":typeof JSON=="object"?JSON:m,"%JSONParse%":typeof JSON=="object"?JSON.parse:m,"%Map%":typeof Map>"u"?m:Map,"%MapIteratorPrototype%":typeof Map>"u"||!i?m:e(new Map()[Symbol.iterator]()),"%MapPrototype%":typeof Map>"u"?m:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?m:Promise,"%PromisePrototype%":typeof Promise>"u"?m:Promise.prototype,"%PromiseProto_then%":typeof Promise>"u"?m:Promise.prototype.then,"%Promise_all%":typeof Promise>"u"?m:Promise.all,"%Promise_reject%":typeof Promise>"u"?m:Promise.reject,"%Promise_resolve%":typeof Promise>"u"?m:Promise.resolve,"%Proxy%":typeof Proxy>"u"?m:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":typeof Reflect>"u"?m:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":typeof Set>"u"?m:Set,"%SetIteratorPrototype%":typeof Set>"u"||!i?m:e(new Set()[Symbol.iterator]()),"%SetPrototype%":typeof Set>"u"?m:Set.prototype,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?m:SharedArrayBuffer,"%SharedArrayBufferPrototype%":typeof SharedArrayBuffer>"u"?m:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":i?e(""[Symbol.iterator]()):m,"%StringPrototype%":String.prototype,"%Symbol%":i?Symbol:m,"%SymbolPrototype%":i?Symbol.prototype:m,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":a,"%TypedArray%":y,"%TypedArrayPrototype%":y?y.prototype:m,"%TypeError%":v,"%TypeErrorPrototype%":v.prototype,"%Uint8Array%":typeof Uint8Array>"u"?m:Uint8Array,"%Uint8ArrayPrototype%":typeof Uint8Array>"u"?m:Uint8Array.prototype,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?m:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":typeof Uint8ClampedArray>"u"?m:Uint8ClampedArray.prototype,"%Uint16Array%":typeof Uint16Array>"u"?m:Uint16Array,"%Uint16ArrayPrototype%":typeof Uint16Array>"u"?m:Uint16Array.prototype,"%Uint32Array%":typeof Uint32Array>"u"?m:Uint32Array,"%Uint32ArrayPrototype%":typeof Uint32Array>"u"?m:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":typeof WeakMap>"u"?m:WeakMap,"%WeakMapPrototype%":typeof WeakMap>"u"?m:WeakMap.prototype,"%WeakSet%":typeof WeakSet>"u"?m:WeakSet,"%WeakSetPrototype%":typeof WeakSet>"u"?m:WeakSet.prototype},b=u(38),_=b.call(Function.call,String.prototype.replace),C=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,w=/\\(\\)?/g,R=n(function(I){var M=[];return _(I,C,function(k,N,j,B){M[M.length]=j?_(B,w,"$1"):N||k}),M},"stringToPath"),O=n(function(I,M){if(!(I in S))throw new SyntaxError("intrinsic "+I+" does not exist!");if(typeof S[I]>"u"&&!M)throw new v("intrinsic "+I+" exists, but is not available. Please file an issue!");return S[I]},"getBaseIntrinsic");l.exports=n(function(I,M){if(typeof I!="string"||I.length===0)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof M!="boolean")throw new TypeError('"allowMissing" argument must be a boolean');for(var k=R(I),N=O("%"+(k.length>0?k[0]:"")+"%",M),j=1;j<k.length;j+=1)if(N!=null)if(g&&j+1>=k.length){var B=g(N,k[j]);if(!M&&!(k[j]in N))throw new v("base intrinsic for "+I+" exists, but the property is not available.");N=B?B.get||B.value:N[k[j]]}else N=N[k[j]];return N},"GetIntrinsic")},function(l,c){var u;u=function(){return this}();try{u=u||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(u=window)}l.exports=u},function(l,c,u){"use strict";l.exports=n(function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var v={},g=Symbol("test"),s=Object(g);if(typeof g=="string"||Object.prototype.toString.call(g)!=="[object Symbol]"||Object.prototype.toString.call(s)!=="[object Symbol]")return!1;var a=42;v[g]=a;for(g in v)return!1;if(typeof Object.keys=="function"&&Object.keys(v).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(v).length!==0)return!1;var i=Object.getOwnPropertySymbols(v);if(i.length!==1||i[0]!==g||!Object.prototype.propertyIsEnumerable.call(v,g))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var e=Object.getOwnPropertyDescriptor(v,g);if(e.value!==a||e.enumerable!==!0)return!1}return!0},"hasSymbols")},function(l,c,u){"use strict";var m=u(41),v=u(13);l.exports=n(function(){var s=m();return v(Object,{is:s},{is:n(function(){return Object.is!==s},"testObjectIs")}),s},"shimObjectIs")},function(l,c,u){"use strict";var m=u(39)(),v=m&&typeof Symbol.toStringTag=="symbol",g,s,a;if(v){g=Function.call.bind(RegExp.prototype.exec),s={};var i=n(function(){throw s},"throwRegexMarker");a={toString:i,valueOf:i},typeof Symbol.toPrimitive=="symbol"&&(a[Symbol.toPrimitive]=i)}var e=Object.prototype.toString,t="[object RegExp]";l.exports=n(v?function(o){if(!o||typeof o!="object")return!1;try{g(o,a)}catch(f){return f===s}}:function(o){return!o||typeof o!="object"&&typeof o!="function"?!1:e.call(o)===t},"isRegex")},function(l,c,u){"use strict";var m=u(13),v=u(37),g=u(42),s=u(43),a=u(72),i=v(g);m(i,{getPolyfill:s,implementation:g,shim:a}),l.exports=i},function(l,c,u){"use strict";var m=u(13).supportsDescriptors,v=u(43),g=Object.getOwnPropertyDescriptor,s=Object.defineProperty,a=TypeError,i=Object.getPrototypeOf,e=/a/;l.exports=n(function(){if(!m||!i)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var r=v(),o=i(e),f=g(o,"flags");return(!f||f.get!==r)&&s(o,"flags",{configurable:!0,enumerable:!1,get:r}),r},"shimFlags")},function(l,c,u){"use strict";var m=Date.prototype.getDay,v=n(function(e){try{return m.call(e),!0}catch{return!1}},"tryDateGetDayCall"),g=Object.prototype.toString,s="[object Date]",a=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol";l.exports=n(function(e){return typeof e!="object"||e===null?!1:a?v(e):g.call(e)===s},"isDateObject")},function(l,c){"use strict";var u=Object.prototype.hasOwnProperty,m="~";function v(){}n(v,"Events"),Object.create&&(v.prototype=Object.create(null),new v().__proto__||(m=!1));function g(a,i,e){this.fn=a,this.context=i,this.once=e||!1}n(g,"EE");function s(){this._events=new v,this._eventsCount=0}n(s,"EventEmitter"),s.prototype.eventNames=n(function(){var i=[],e,t;if(this._eventsCount===0)return i;for(t in e=this._events)u.call(e,t)&&i.push(m?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},"eventNames"),s.prototype.listeners=n(function(i,e){var t=m?m+i:i,r=this._events[t];if(e)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,f=r.length,h=new Array(f);o<f;o++)h[o]=r[o].fn;return h},"listeners"),s.prototype.emit=n(function(i,e,t,r,o,f){var h=m?m+i:i;if(!this._events[h])return!1;var p=this._events[h],d=arguments.length,y,S;if(p.fn){switch(p.once&&this.removeListener(i,p.fn,void 0,!0),d){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,e),!0;case 3:return p.fn.call(p.context,e,t),!0;case 4:return p.fn.call(p.context,e,t,r),!0;case 5:return p.fn.call(p.context,e,t,r,o),!0;case 6:return p.fn.call(p.context,e,t,r,o,f),!0}for(S=1,y=new Array(d-1);S<d;S++)y[S-1]=arguments[S];p.fn.apply(p.context,y)}else{var b=p.length,_;for(S=0;S<b;S++)switch(p[S].once&&this.removeListener(i,p[S].fn,void 0,!0),d){case 1:p[S].fn.call(p[S].context);break;case 2:p[S].fn.call(p[S].context,e);break;case 3:p[S].fn.call(p[S].context,e,t);break;case 4:p[S].fn.call(p[S].context,e,t,r);break;default:if(!y)for(_=1,y=new Array(d-1);_<d;_++)y[_-1]=arguments[_];p[S].fn.apply(p[S].context,y)}}return!0},"emit"),s.prototype.on=n(function(i,e,t){var r=new g(e,t||this),o=m?m+i:i;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},"on"),s.prototype.once=n(function(i,e,t){var r=new g(e,t||this,!0),o=m?m+i:i;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},"once"),s.prototype.removeListener=n(function(i,e,t,r){var o=m?m+i:i;if(!this._events[o])return this;if(!e)return--this._eventsCount===0?this._events=new v:delete this._events[o],this;var f=this._events[o];if(f.fn)f.fn===e&&(!r||f.once)&&(!t||f.context===t)&&(--this._eventsCount===0?this._events=new v:delete this._events[o]);else{for(var h=0,p=[],d=f.length;h<d;h++)(f[h].fn!==e||r&&!f[h].once||t&&f[h].context!==t)&&p.push(f[h]);p.length?this._events[o]=p.length===1?p[0]:p:--this._eventsCount===0?this._events=new v:delete this._events[o]}return this},"removeListener"),s.prototype.removeAllListeners=n(function(i){var e;return i?(e=m?m+i:i,this._events[e]&&(--this._eventsCount===0?this._events=new v:delete this._events[e])):(this._events=new v,this._eventsCount=0),this},"removeAllListeners"),s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prototype.setMaxListeners=n(function(){return this},"setMaxListeners"),s.prefixed=m,s.EventEmitter=s,typeof l<"u"&&(l.exports=s)},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.matchText=c.matchSpacing=c.matchNewline=c.matchBlot=c.matchAttributor=c.default=void 0;var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(gt){return typeof gt}:function(gt){return gt&&typeof Symbol=="function"&&gt.constructor===Symbol&&gt!==Symbol.prototype?"symbol":typeof gt},v=function(){function gt(Ut,en){var sn=[],$t=!0,Rn=!1,di=void 0;try{for(var ii=Ut[Symbol.iterator](),Kn;!($t=(Kn=ii.next()).done)&&(sn.push(Kn.value),!(en&&sn.length===en));$t=!0);}catch(hi){Rn=!0,di=hi}finally{try{!$t&&ii.return&&ii.return()}finally{if(Rn)throw di}}return sn}return n(gt,"sliceIterator"),function(Ut,en){if(Array.isArray(Ut))return Ut;if(Symbol.iterator in Object(Ut))return gt(Ut,en);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function gt(Ut,en){for(var sn=0;sn<en.length;sn++){var $t=en[sn];$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Ut,$t.key,$t)}}return n(gt,"defineProperties"),function(Ut,en,sn){return en&&gt(Ut.prototype,en),sn&&gt(Ut,sn),Ut}}(),s=u(3),a=I(s),i=u(2),e=I(i),t=u(0),r=I(t),o=u(5),f=I(o),h=u(10),p=I(h),d=u(9),y=I(d),S=u(46),b=u(47),_=u(14),C=I(_),w=u(27),R=u(48),O=u(49),D=u(50);function I(gt){return gt&&gt.__esModule?gt:{default:gt}}n(I,"_interopRequireDefault");function M(gt,Ut,en){return Ut in gt?Object.defineProperty(gt,Ut,{value:en,enumerable:!0,configurable:!0,writable:!0}):gt[Ut]=en,gt}n(M,"_defineProperty");function k(gt,Ut){if(!(gt instanceof Ut))throw new TypeError("Cannot call a class as a function")}n(k,"_classCallCheck");function N(gt,Ut){if(!gt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ut&&(typeof Ut=="object"||typeof Ut=="function")?Ut:gt}n(N,"_possibleConstructorReturn");function j(gt,Ut){if(typeof Ut!="function"&&Ut!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ut);gt.prototype=Object.create(Ut&&Ut.prototype,{constructor:{value:gt,enumerable:!1,writable:!0,configurable:!0}}),Ut&&(Object.setPrototypeOf?Object.setPrototypeOf(gt,Ut):gt.__proto__=Ut)}n(j,"_inherits");var B=(0,p.default)("quill:clipboard"),J=[[Node.TEXT_NODE,Cn],[Node.TEXT_NODE,At],["br",Rt],[Node.ELEMENT_NODE,At],[Node.ELEMENT_NODE,St],[Node.ELEMENT_NODE,Vt],[Node.ELEMENT_NODE,ut],[Node.ELEMENT_NODE,dt],["li",mt],["b",De.bind(De,"bold")],["i",De.bind(De,"italic")],["style",Ze]],Q=[S.AlignAttribute,R.DirectionAttribute].reduce(function(gt,Ut){return gt[Ut.keyName]=Ut,gt},{}),oe=[S.AlignStyle,b.BackgroundStyle,w.ColorStyle,R.DirectionStyle,O.FontStyle,D.SizeStyle].reduce(function(gt,Ut){return gt[Ut.keyName]=Ut,gt},{}),$=function(gt){j(Ut,gt);function Ut(en,sn){k(this,Ut);var $t=N(this,(Ut.__proto__||Object.getPrototypeOf(Ut)).call(this,en,sn));return $t.quill.root.addEventListener("paste",$t.onPaste.bind($t)),$t.container=$t.quill.addContainer("ql-clipboard"),$t.container.setAttribute("contenteditable",!0),$t.container.setAttribute("tabindex",-1),$t.matchers=[],J.concat($t.options.matchers).forEach(function(Rn){var di=v(Rn,2),ii=di[0],Kn=di[1];!sn.matchVisual&&Kn===Vt||$t.addMatcher(ii,Kn)}),$t}return n(Ut,"Clipboard"),g(Ut,[{key:"addMatcher",value:n(function(sn,$t){this.matchers.push([sn,$t])},"addMatcher")},{key:"convert",value:n(function(sn){if(typeof sn=="string")return this.container.innerHTML=sn.replace(/\>\r?\n +\</g,"><"),this.convert();var $t=this.quill.getFormat(this.quill.selection.savedRange.index);if($t[C.default.blotName]){var Rn=this.container.innerText;return this.container.innerHTML="",new e.default().insert(Rn,M({},C.default.blotName,$t[C.default.blotName]))}var di=new WeakMap,ii=this.prepareMatching(di),Kn=v(ii,2),hi=Kn[0],Ln=Kn[1],Hn=be(this.container,hi,Ln,di);return Ee(Hn,`
`)&&Hn.ops[Hn.ops.length-1].attributes==null&&(Hn=Hn.compose(new e.default().retain(Hn.length()-1).delete(1))),B.log("convert",this.container.innerHTML,Hn),this.container.innerHTML="",Hn},"convert")},{key:"dangerouslyPasteHTML",value:n(function(sn,$t){var Rn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:f.default.sources.API;if(typeof sn=="string")this.quill.setContents(this.convert(sn),$t),this.quill.setSelection(0,f.default.sources.SILENT);else{var di=this.convert($t);this.quill.updateContents(new e.default().retain(sn).concat(di),Rn),this.quill.setSelection(sn+di.length(),f.default.sources.SILENT)}},"dangerouslyPasteHTML")},{key:"onPaste",value:n(function(sn){var $t=this;if(!(sn.defaultPrevented||!this.quill.isEnabled())){var Rn=this.quill.getSelection(),di=new e.default().retain(Rn.index),ii=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(f.default.sources.SILENT),setTimeout(function(){di=di.concat($t.convert()).delete(Rn.length),$t.quill.updateContents(di,f.default.sources.USER),$t.quill.setSelection(di.length()-Rn.length,f.default.sources.SILENT),$t.quill.scrollingContainer.scrollTop=ii,$t.quill.focus()},1)}},"onPaste")},{key:"prepareMatching",value:n(function(sn){var $t=this,Rn=[],di=[];return this.matchers.forEach(function(ii){var Kn=v(ii,2),hi=Kn[0],Ln=Kn[1];switch(hi){case Node.TEXT_NODE:di.push(Ln);break;case Node.ELEMENT_NODE:Rn.push(Ln);break;default:Array.from($t.container.querySelectorAll(hi)).forEach(function(Hn){if(sn.has(Hn)){var ui=sn.get(Hn);ui.push(Ln)}else sn.set(Hn,[Ln])});break}}),[Rn,di]},"prepareMatching")}]),Ut}(y.default);$.DEFAULTS={matchers:[],matchVisual:!0};function he(gt,Ut,en){return(typeof Ut>"u"?"undefined":m(Ut))==="object"?Object.keys(Ut).reduce(function(sn,$t){return he(sn,$t,Ut[$t])},gt):gt.reduce(function(sn,$t){return $t.attributes&&$t.attributes[Ut]?sn.push($t):sn.insert($t.insert,(0,a.default)({},M({},Ut,en),$t.attributes))},new e.default)}n(he,"applyFormat");function Ae(gt){if(gt.nodeType!==Node.ELEMENT_NODE)return{};var Ut="__ql-computed-style";return gt[Ut]||(gt[Ut]=window.getComputedStyle(gt))}n(Ae,"computeStyle");function Ee(gt,Ut){for(var en="",sn=gt.ops.length-1;sn>=0&&en.length<Ut.length;--sn){var $t=gt.ops[sn];if(typeof $t.insert!="string")break;en=$t.insert+en}return en.slice(-1*Ut.length)===Ut}n(Ee,"deltaEndsWith");function Oe(gt){if(gt.childNodes.length===0)return!1;var Ut=Ae(gt);return["block","list-item"].indexOf(Ut.display)>-1}n(Oe,"isLine");function be(gt,Ut,en,sn){return gt.nodeType===gt.TEXT_NODE?en.reduce(function($t,Rn){return Rn(gt,$t)},new e.default):gt.nodeType===gt.ELEMENT_NODE?[].reduce.call(gt.childNodes||[],function($t,Rn){var di=be(Rn,Ut,en,sn);return Rn.nodeType===gt.ELEMENT_NODE&&(di=Ut.reduce(function(ii,Kn){return Kn(Rn,ii)},di),di=(sn.get(Rn)||[]).reduce(function(ii,Kn){return Kn(Rn,ii)},di)),$t.concat(di)},new e.default):new e.default}n(be,"traverse");function De(gt,Ut,en){return he(en,gt,!0)}n(De,"matchAlias");function ut(gt,Ut){var en=r.default.Attributor.Attribute.keys(gt),sn=r.default.Attributor.Class.keys(gt),$t=r.default.Attributor.Style.keys(gt),Rn={};return en.concat(sn).concat($t).forEach(function(di){var ii=r.default.query(di,r.default.Scope.ATTRIBUTE);ii!=null&&(Rn[ii.attrName]=ii.value(gt),Rn[ii.attrName])||(ii=Q[di],ii!=null&&(ii.attrName===di||ii.keyName===di)&&(Rn[ii.attrName]=ii.value(gt)||void 0),ii=oe[di],ii!=null&&(ii.attrName===di||ii.keyName===di)&&(ii=oe[di],Rn[ii.attrName]=ii.value(gt)||void 0))}),Object.keys(Rn).length>0&&(Ut=he(Ut,Rn)),Ut}n(ut,"matchAttributor");function St(gt,Ut){var en=r.default.query(gt);if(en==null)return Ut;if(en.prototype instanceof r.default.Embed){var sn={},$t=en.value(gt);$t!=null&&(sn[en.blotName]=$t,Ut=new e.default().insert(sn,en.formats(gt)))}else typeof en.formats=="function"&&(Ut=he(Ut,en.blotName,en.formats(gt)));return Ut}n(St,"matchBlot");function Rt(gt,Ut){return Ee(Ut,`
`)||Ut.insert(`
`),Ut}n(Rt,"matchBreak");function Ze(){return new e.default}n(Ze,"matchIgnore");function mt(gt,Ut){var en=r.default.query(gt);if(en==null||en.blotName!=="list-item"||!Ee(Ut,`
`))return Ut;for(var sn=-1,$t=gt.parentNode;!$t.classList.contains("ql-clipboard");)(r.default.query($t)||{}).blotName==="list"&&(sn+=1),$t=$t.parentNode;return sn<=0?Ut:Ut.compose(new e.default().retain(Ut.length()-1).retain(1,{indent:sn}))}n(mt,"matchIndent");function At(gt,Ut){return Ee(Ut,`
`)||(Oe(gt)||Ut.length()>0&&gt.nextSibling&&Oe(gt.nextSibling))&&Ut.insert(`
`),Ut}n(At,"matchNewline");function Vt(gt,Ut){if(Oe(gt)&&gt.nextElementSibling!=null&&!Ee(Ut,`

`)){var en=gt.offsetHeight+parseFloat(Ae(gt).marginTop)+parseFloat(Ae(gt).marginBottom);gt.nextElementSibling.offsetTop>gt.offsetTop+en*1.5&&Ut.insert(`
`)}return Ut}n(Vt,"matchSpacing");function dt(gt,Ut){var en={},sn=gt.style||{};return sn.fontStyle&&Ae(gt).fontStyle==="italic"&&(en.italic=!0),sn.fontWeight&&(Ae(gt).fontWeight.startsWith("bold")||parseInt(Ae(gt).fontWeight)>=700)&&(en.bold=!0),Object.keys(en).length>0&&(Ut=he(Ut,en)),parseFloat(sn.textIndent||0)>0&&(Ut=new e.default().insert("	").concat(Ut)),Ut}n(dt,"matchStyles");function Cn(gt,Ut){var en=gt.data;if(gt.parentNode.tagName==="O:P")return Ut.insert(en.trim());if(en.trim().length===0&&gt.parentNode.classList.contains("ql-clipboard"))return Ut;if(!Ae(gt.parentNode).whiteSpace.startsWith("pre")){var sn=n(function(Rn,di){return di=di.replace(/[^\u00a0]/g,""),di.length<1&&Rn?" ":di},"replacer");en=en.replace(/\r\n/g," ").replace(/\n/g," "),en=en.replace(/\s\s+/g,sn.bind(sn,!0)),(gt.previousSibling==null&&Oe(gt.parentNode)||gt.previousSibling!=null&&Oe(gt.previousSibling))&&(en=en.replace(/^\s+/,sn.bind(sn,!1))),(gt.nextSibling==null&&Oe(gt.parentNode)||gt.nextSibling!=null&&Oe(gt.nextSibling))&&(en=en.replace(/\s+$/,sn.bind(sn,!1)))}return Ut.insert(en)}n(Cn,"matchText"),c.default=$,c.matchAttributor=ut,c.matchBlot=St,c.matchNewline=At,c.matchSpacing=Vt,c.matchText=Cn},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=function(){function o(f,h){for(var p=0;p<h.length;p++){var d=h[p];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(f,d.key,d)}}return n(o,"defineProperties"),function(f,h,p){return h&&o(f.prototype,h),p&&o(f,p),f}}(),v=n(function o(f,h,p){f===null&&(f=Function.prototype);var d=Object.getOwnPropertyDescriptor(f,h);if(d===void 0){var y=Object.getPrototypeOf(f);return y===null?void 0:o(y,h,p)}else{if("value"in d)return d.value;var S=d.get;return S===void 0?void 0:S.call(p)}},"get"),g=u(6),s=a(g);function a(o){return o&&o.__esModule?o:{default:o}}n(a,"_interopRequireDefault");function i(o,f){if(!(o instanceof f))throw new TypeError("Cannot call a class as a function")}n(i,"_classCallCheck");function e(o,f){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:o}n(e,"_possibleConstructorReturn");function t(o,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);o.prototype=Object.create(f&&f.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(o,f):o.__proto__=f)}n(t,"_inherits");var r=function(o){t(f,o);function f(){return i(this,f),e(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return n(f,"Bold"),m(f,[{key:"optimize",value:n(function(p){v(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"optimize",this).call(this,p),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)},"optimize")}],[{key:"create",value:n(function(){return v(f.__proto__||Object.getPrototypeOf(f),"create",this).call(this)},"create")},{key:"formats",value:n(function(){return!0},"formats")}]),f}(s.default);r.blotName="bold",r.tagName=["STRONG","B"],c.default=r},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.addControls=c.default=void 0;var m=function(){function D(I,M){var k=[],N=!0,j=!1,B=void 0;try{for(var J=I[Symbol.iterator](),Q;!(N=(Q=J.next()).done)&&(k.push(Q.value),!(M&&k.length===M));N=!0);}catch(oe){j=!0,B=oe}finally{try{!N&&J.return&&J.return()}finally{if(j)throw B}}return k}return n(D,"sliceIterator"),function(I,M){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return D(I,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=function(){function D(I,M){for(var k=0;k<M.length;k++){var N=M[k];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(I,N.key,N)}}return n(D,"defineProperties"),function(I,M,k){return M&&D(I.prototype,M),k&&D(I,k),I}}(),g=u(2),s=p(g),a=u(0),i=p(a),e=u(5),t=p(e),r=u(10),o=p(r),f=u(9),h=p(f);function p(D){return D&&D.__esModule?D:{default:D}}n(p,"_interopRequireDefault");function d(D,I,M){return I in D?Object.defineProperty(D,I,{value:M,enumerable:!0,configurable:!0,writable:!0}):D[I]=M,D}n(d,"_defineProperty");function y(D,I){if(!(D instanceof I))throw new TypeError("Cannot call a class as a function")}n(y,"_classCallCheck");function S(D,I){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:D}n(S,"_possibleConstructorReturn");function b(D,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);D.prototype=Object.create(I&&I.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(D,I):D.__proto__=I)}n(b,"_inherits");var _=(0,o.default)("quill:toolbar"),C=function(D){b(I,D);function I(M,k){y(this,I);var N=S(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,M,k));if(Array.isArray(N.options.container)){var j=document.createElement("div");R(j,N.options.container),M.container.parentNode.insertBefore(j,M.container),N.container=j}else typeof N.options.container=="string"?N.container=document.querySelector(N.options.container):N.container=N.options.container;if(!(N.container instanceof HTMLElement)){var B;return B=_.error("Container required for toolbar",N.options),S(N,B)}return N.container.classList.add("ql-toolbar"),N.controls=[],N.handlers={},Object.keys(N.options.handlers).forEach(function(J){N.addHandler(J,N.options.handlers[J])}),[].forEach.call(N.container.querySelectorAll("button, select"),function(J){N.attach(J)}),N.quill.on(t.default.events.EDITOR_CHANGE,function(J,Q){J===t.default.events.SELECTION_CHANGE&&N.update(Q)}),N.quill.on(t.default.events.SCROLL_OPTIMIZE,function(){var J=N.quill.selection.getRange(),Q=m(J,1),oe=Q[0];N.update(oe)}),N}return n(I,"Toolbar"),v(I,[{key:"addHandler",value:n(function(k,N){this.handlers[k]=N},"addHandler")},{key:"attach",value:n(function(k){var N=this,j=[].find.call(k.classList,function(J){return J.indexOf("ql-")===0});if(j){if(j=j.slice(3),k.tagName==="BUTTON"&&k.setAttribute("type","button"),this.handlers[j]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[j]==null){_.warn("ignoring attaching to disabled format",j,k);return}if(i.default.query(j)==null){_.warn("ignoring attaching to nonexistent format",j,k);return}}var B=k.tagName==="SELECT"?"change":"click";k.addEventListener(B,function(J){var Q=void 0;if(k.tagName==="SELECT"){if(k.selectedIndex<0)return;var oe=k.options[k.selectedIndex];oe.hasAttribute("selected")?Q=!1:Q=oe.value||!1}else k.classList.contains("ql-active")?Q=!1:Q=k.value||!k.hasAttribute("value"),J.preventDefault();N.quill.focus();var $=N.quill.selection.getRange(),he=m($,1),Ae=he[0];if(N.handlers[j]!=null)N.handlers[j].call(N,Q);else if(i.default.query(j).prototype instanceof i.default.Embed){if(Q=prompt("Enter "+j),!Q)return;N.quill.updateContents(new s.default().retain(Ae.index).delete(Ae.length).insert(d({},j,Q)),t.default.sources.USER)}else N.quill.format(j,Q,t.default.sources.USER);N.update(Ae)}),this.controls.push([j,k])}},"attach")},{key:"update",value:n(function(k){var N=k==null?{}:this.quill.getFormat(k);this.controls.forEach(function(j){var B=m(j,2),J=B[0],Q=B[1];if(Q.tagName==="SELECT"){var oe=void 0;if(k==null)oe=null;else if(N[J]==null)oe=Q.querySelector("option[selected]");else if(!Array.isArray(N[J])){var $=N[J];typeof $=="string"&&($=$.replace(/\"/g,'\\"')),oe=Q.querySelector('option[value="'+$+'"]')}oe==null?(Q.value="",Q.selectedIndex=-1):oe.selected=!0}else if(k==null)Q.classList.remove("ql-active");else if(Q.hasAttribute("value")){var he=N[J]===Q.getAttribute("value")||N[J]!=null&&N[J].toString()===Q.getAttribute("value")||N[J]==null&&!Q.getAttribute("value");Q.classList.toggle("ql-active",he)}else Q.classList.toggle("ql-active",N[J]!=null)})},"update")}]),I}(h.default);C.DEFAULTS={};function w(D,I,M){var k=document.createElement("button");k.setAttribute("type","button"),k.classList.add("ql-"+I),M!=null&&(k.value=M),D.appendChild(k)}n(w,"addButton");function R(D,I){Array.isArray(I[0])||(I=[I]),I.forEach(function(M){var k=document.createElement("span");k.classList.add("ql-formats"),M.forEach(function(N){if(typeof N=="string")w(k,N);else{var j=Object.keys(N)[0],B=N[j];Array.isArray(B)?O(k,j,B):w(k,j,B)}}),D.appendChild(k)})}n(R,"addControls");function O(D,I,M){var k=document.createElement("select");k.classList.add("ql-"+I),M.forEach(function(N){var j=document.createElement("option");N!==!1?j.setAttribute("value",N):j.setAttribute("selected","selected"),k.appendChild(j)}),D.appendChild(k)}n(O,"addSelect"),C.DEFAULTS={container:null,handlers:{clean:n(function(){var I=this,M=this.quill.getSelection();if(M!=null)if(M.length==0){var k=this.quill.getFormat();Object.keys(k).forEach(function(N){i.default.query(N,i.default.Scope.INLINE)!=null&&I.quill.format(N,!1)})}else this.quill.removeFormat(M,t.default.sources.USER)},"clean"),direction:n(function(I){var M=this.quill.getFormat().align;I==="rtl"&&M==null?this.quill.format("align","right",t.default.sources.USER):!I&&M==="right"&&this.quill.format("align",!1,t.default.sources.USER),this.quill.format("direction",I,t.default.sources.USER)},"direction"),indent:n(function(I){var M=this.quill.getSelection(),k=this.quill.getFormat(M),N=parseInt(k.indent||0);if(I==="+1"||I==="-1"){var j=I==="+1"?1:-1;k.direction==="rtl"&&(j*=-1),this.quill.format("indent",N+j,t.default.sources.USER)}},"indent"),link:n(function(I){I===!0&&(I=prompt("Enter link URL:")),this.quill.format("link",I,t.default.sources.USER)},"link"),list:n(function(I){var M=this.quill.getSelection(),k=this.quill.getFormat(M);I==="check"?k.list==="checked"||k.list==="unchecked"?this.quill.format("list",!1,t.default.sources.USER):this.quill.format("list","unchecked",t.default.sources.USER):this.quill.format("list",I,t.default.sources.USER)},"list")}},c.default=C,c.addControls=R},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=function(){function o(f,h){for(var p=0;p<h.length;p++){var d=h[p];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(f,d.key,d)}}return n(o,"defineProperties"),function(f,h,p){return h&&o(f.prototype,h),p&&o(f,p),f}}(),v=n(function o(f,h,p){f===null&&(f=Function.prototype);var d=Object.getOwnPropertyDescriptor(f,h);if(d===void 0){var y=Object.getPrototypeOf(f);return y===null?void 0:o(y,h,p)}else{if("value"in d)return d.value;var S=d.get;return S===void 0?void 0:S.call(p)}},"get"),g=u(29),s=a(g);function a(o){return o&&o.__esModule?o:{default:o}}n(a,"_interopRequireDefault");function i(o,f){if(!(o instanceof f))throw new TypeError("Cannot call a class as a function")}n(i,"_classCallCheck");function e(o,f){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:o}n(e,"_possibleConstructorReturn");function t(o,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);o.prototype=Object.create(f&&f.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(o,f):o.__proto__=f)}n(t,"_inherits");var r=function(o){t(f,o);function f(h,p){i(this,f);var d=e(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,h));return d.label.innerHTML=p,d.container.classList.add("ql-color-picker"),[].slice.call(d.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(y){y.classList.add("ql-primary")}),d}return n(f,"ColorPicker"),m(f,[{key:"buildItem",value:n(function(p){var d=v(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"buildItem",this).call(this,p);return d.style.backgroundColor=p.getAttribute("value")||"",d},"buildItem")},{key:"selectItem",value:n(function(p,d){v(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"selectItem",this).call(this,p,d);var y=this.label.querySelector(".ql-color-label"),S=p&&p.getAttribute("data-value")||"";y&&(y.tagName==="line"?y.style.stroke=S:y.style.fill=S)},"selectItem")}]),f}(s.default);c.default=r},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=function(){function o(f,h){for(var p=0;p<h.length;p++){var d=h[p];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(f,d.key,d)}}return n(o,"defineProperties"),function(f,h,p){return h&&o(f.prototype,h),p&&o(f,p),f}}(),v=n(function o(f,h,p){f===null&&(f=Function.prototype);var d=Object.getOwnPropertyDescriptor(f,h);if(d===void 0){var y=Object.getPrototypeOf(f);return y===null?void 0:o(y,h,p)}else{if("value"in d)return d.value;var S=d.get;return S===void 0?void 0:S.call(p)}},"get"),g=u(29),s=a(g);function a(o){return o&&o.__esModule?o:{default:o}}n(a,"_interopRequireDefault");function i(o,f){if(!(o instanceof f))throw new TypeError("Cannot call a class as a function")}n(i,"_classCallCheck");function e(o,f){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:o}n(e,"_possibleConstructorReturn");function t(o,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);o.prototype=Object.create(f&&f.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(o,f):o.__proto__=f)}n(t,"_inherits");var r=function(o){t(f,o);function f(h,p){i(this,f);var d=e(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,h));return d.container.classList.add("ql-icon-picker"),[].forEach.call(d.container.querySelectorAll(".ql-picker-item"),function(y){y.innerHTML=p[y.getAttribute("data-value")||""]}),d.defaultItem=d.container.querySelector(".ql-selected"),d.selectItem(d.defaultItem),d}return n(f,"IconPicker"),m(f,[{key:"selectItem",value:n(function(p,d){v(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"selectItem",this).call(this,p,d),p=p||this.defaultItem,this.label.innerHTML=p.innerHTML},"selectItem")}]),f}(s.default);c.default=r},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=function(){function s(a,i){for(var e=0;e<i.length;e++){var t=i[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}return n(s,"defineProperties"),function(a,i,e){return i&&s(a.prototype,i),e&&s(a,e),a}}();function v(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}n(v,"_classCallCheck");var g=function(){function s(a,i){var e=this;v(this,s),this.quill=a,this.boundsContainer=i||document.body,this.root=a.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){e.root.style.marginTop=-1*e.quill.root.scrollTop+"px"}),this.hide()}return n(s,"Tooltip"),m(s,[{key:"hide",value:n(function(){this.root.classList.add("ql-hidden")},"hide")},{key:"position",value:n(function(i){var e=i.left+i.width/2-this.root.offsetWidth/2,t=i.bottom+this.quill.root.scrollTop;this.root.style.left=e+"px",this.root.style.top=t+"px",this.root.classList.remove("ql-flip");var r=this.boundsContainer.getBoundingClientRect(),o=this.root.getBoundingClientRect(),f=0;if(o.right>r.right&&(f=r.right-o.right,this.root.style.left=e+f+"px"),o.left<r.left&&(f=r.left-o.left,this.root.style.left=e+f+"px"),o.bottom>r.bottom){var h=o.bottom-o.top,p=i.bottom-i.top+h;this.root.style.top=t-p+"px",this.root.classList.add("ql-flip")}return f},"position")},{key:"show",value:n(function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")},"show")}]),s}();c.default=g},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=function(){function O(D,I){var M=[],k=!0,N=!1,j=void 0;try{for(var B=D[Symbol.iterator](),J;!(k=(J=B.next()).done)&&(M.push(J.value),!(I&&M.length===I));k=!0);}catch(Q){N=!0,j=Q}finally{try{!k&&B.return&&B.return()}finally{if(N)throw j}}return M}return n(O,"sliceIterator"),function(D,I){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return O(D,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=n(function O(D,I,M){D===null&&(D=Function.prototype);var k=Object.getOwnPropertyDescriptor(D,I);if(k===void 0){var N=Object.getPrototypeOf(D);return N===null?void 0:O(N,I,M)}else{if("value"in k)return k.value;var j=k.get;return j===void 0?void 0:j.call(M)}},"get"),g=function(){function O(D,I){for(var M=0;M<I.length;M++){var k=I[M];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(D,k.key,k)}}return n(O,"defineProperties"),function(D,I,M){return I&&O(D.prototype,I),M&&O(D,M),D}}(),s=u(3),a=y(s),i=u(8),e=y(i),t=u(53),r=y(t),o=u(28),f=y(o),h=u(16),p=u(51),d=y(p);function y(O){return O&&O.__esModule?O:{default:O}}n(y,"_interopRequireDefault");function S(O,D){if(!(O instanceof D))throw new TypeError("Cannot call a class as a function")}n(S,"_classCallCheck");function b(O,D){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:O}n(b,"_possibleConstructorReturn");function _(O,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);O.prototype=Object.create(D&&D.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(O,D):O.__proto__=D)}n(_,"_inherits");var C=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],w=function(O){_(D,O);function D(I,M){S(this,D),M.modules.toolbar!=null&&M.modules.toolbar.container==null&&(M.modules.toolbar.container=C);var k=b(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,I,M));return k.quill.container.classList.add("ql-snow"),k}return n(D,"SnowTheme"),g(D,[{key:"extendToolbar",value:n(function(M){M.container.classList.add("ql-snow"),this.buildButtons([].slice.call(M.container.querySelectorAll("button")),d.default),this.buildPickers([].slice.call(M.container.querySelectorAll("select")),d.default),this.tooltip=new R(this.quill,this.options.bounds),M.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(k,N){M.handlers.link.call(M,!N.format.link)})},"extendToolbar")}]),D}(r.default);w.DEFAULTS=(0,a.default)(!0,{},r.default.DEFAULTS,{modules:{toolbar:{handlers:{link:n(function(D){if(D){var I=this.quill.getSelection();if(I==null||I.length==0)return;var M=this.quill.getText(I);/^\S+@\S+\.\S+$/.test(M)&&M.indexOf("mailto:")!==0&&(M="mailto:"+M);var k=this.quill.theme.tooltip;k.edit("link",M)}else this.quill.format("link",!1)},"link")}}}});var R=function(O){_(D,O);function D(I,M){S(this,D);var k=b(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,I,M));return k.preview=k.root.querySelector("a.ql-preview"),k}return n(D,"SnowTooltip"),g(D,[{key:"listen",value:n(function(){var M=this;v(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(k){M.root.classList.contains("ql-editing")?M.save():M.edit("link",M.preview.textContent),k.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(k){if(M.linkRange!=null){var N=M.linkRange;M.restoreFocus(),M.quill.formatText(N,"link",!1,e.default.sources.USER),delete M.linkRange}k.preventDefault(),M.hide()}),this.quill.on(e.default.events.SELECTION_CHANGE,function(k,N,j){if(k!=null){if(k.length===0&&j===e.default.sources.USER){var B=M.quill.scroll.descendant(f.default,k.index),J=m(B,2),Q=J[0],oe=J[1];if(Q!=null){M.linkRange=new h.Range(k.index-oe,Q.length());var $=f.default.formats(Q.domNode);M.preview.textContent=$,M.preview.setAttribute("href",$),M.show(),M.position(M.quill.getBounds(M.linkRange));return}}else delete M.linkRange;M.hide()}})},"listen")},{key:"show",value:n(function(){v(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")},"show")}]),D}(t.BaseTooltip);R.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),c.default=w},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=u(30),v=Rn(m),g=u(46),s=u(48),a=u(84),i=u(85),e=Rn(i),t=u(86),r=Rn(t),o=u(87),f=Rn(o),h=u(47),p=u(27),d=u(49),y=u(50),S=u(76),b=Rn(S),_=u(88),C=Rn(_),w=u(28),R=Rn(w),O=u(89),D=Rn(O),I=u(90),M=Rn(I),k=u(91),N=Rn(k),j=u(92),B=Rn(j),J=u(93),Q=Rn(J),oe=u(14),$=Rn(oe),he=u(94),Ae=Rn(he),Ee=u(95),Oe=Rn(Ee),be=u(77),De=Rn(be),ut=u(51),St=Rn(ut),Rt=u(29),Ze=Rn(Rt),mt=u(79),At=Rn(mt),Vt=u(80),dt=Rn(Vt),Cn=u(81),gt=Rn(Cn),Ut=u(128),en=Rn(Ut),sn=u(82),$t=Rn(sn);function Rn(di){return di&&di.__esModule?di:{default:di}}n(Rn,"_interopRequireDefault"),v.default.register({"attributors/attribute/direction":s.DirectionAttribute,"attributors/class/align":g.AlignClass,"attributors/class/background":h.BackgroundClass,"attributors/class/color":p.ColorClass,"attributors/class/direction":s.DirectionClass,"attributors/class/font":d.FontClass,"attributors/class/size":y.SizeClass,"attributors/style/align":g.AlignStyle,"attributors/style/background":h.BackgroundStyle,"attributors/style/color":p.ColorStyle,"attributors/style/direction":s.DirectionStyle,"attributors/style/font":d.FontStyle,"attributors/style/size":y.SizeStyle},!0),v.default.register({"formats/align":g.AlignClass,"formats/direction":s.DirectionClass,"formats/indent":a.IndentClass,"formats/background":h.BackgroundStyle,"formats/color":p.ColorStyle,"formats/font":d.FontClass,"formats/size":y.SizeClass,"formats/blockquote":e.default,"formats/code-block":$.default,"formats/header":r.default,"formats/list":f.default,"formats/bold":b.default,"formats/code":oe.Code,"formats/italic":C.default,"formats/link":R.default,"formats/script":D.default,"formats/strike":M.default,"formats/underline":N.default,"formats/image":B.default,"formats/video":Q.default,"formats/list/item":o.ListItem,"modules/formula":Ae.default,"modules/syntax":Oe.default,"modules/toolbar":De.default,"themes/bubble":en.default,"themes/snow":$t.default,"ui/icons":St.default,"ui/picker":Ze.default,"ui/icon-picker":dt.default,"ui/color-picker":At.default,"ui/tooltip":gt.default},!0),c.default=v.default},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.IndentClass=void 0;var m=function(){function f(h,p){for(var d=0;d<p.length;d++){var y=p[d];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return n(f,"defineProperties"),function(h,p,d){return p&&f(h.prototype,p),d&&f(h,d),h}}(),v=n(function f(h,p,d){h===null&&(h=Function.prototype);var y=Object.getOwnPropertyDescriptor(h,p);if(y===void 0){var S=Object.getPrototypeOf(h);return S===null?void 0:f(S,p,d)}else{if("value"in y)return y.value;var b=y.get;return b===void 0?void 0:b.call(d)}},"get"),g=u(0),s=a(g);function a(f){return f&&f.__esModule?f:{default:f}}n(a,"_interopRequireDefault");function i(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}n(i,"_classCallCheck");function e(f,h){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:f}n(e,"_possibleConstructorReturn");function t(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);f.prototype=Object.create(h&&h.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(f,h):f.__proto__=h)}n(t,"_inherits");var r=function(f){t(h,f);function h(){return i(this,h),e(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return n(h,"IdentAttributor"),m(h,[{key:"add",value:n(function(d,y){if(y==="+1"||y==="-1"){var S=this.value(d)||0;y=y==="+1"?S+1:S-1}return y===0?(this.remove(d),!0):v(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"add",this).call(this,d,y)},"add")},{key:"canAdd",value:n(function(d,y){return v(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"canAdd",this).call(this,d,y)||v(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"canAdd",this).call(this,d,parseInt(y))},"canAdd")},{key:"value",value:n(function(d){return parseInt(v(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"value",this).call(this,d))||void 0},"value")}]),h}(s.default.Attributor.Class),o=new r("indent","ql-indent",{scope:s.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});c.IndentClass=o},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=u(4),v=g(m);function g(t){return t&&t.__esModule?t:{default:t}}n(g,"_interopRequireDefault");function s(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}n(s,"_classCallCheck");function a(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:t}n(a,"_possibleConstructorReturn");function i(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}n(i,"_inherits");var e=function(t){i(r,t);function r(){return s(this,r),a(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return n(r,"Blockquote"),r}(v.default);e.blotName="blockquote",e.tagName="blockquote",c.default=e},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=function(){function r(o,f){for(var h=0;h<f.length;h++){var p=f[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(o,p.key,p)}}return n(r,"defineProperties"),function(o,f,h){return f&&r(o.prototype,f),h&&r(o,h),o}}(),v=u(4),g=s(v);function s(r){return r&&r.__esModule?r:{default:r}}n(s,"_interopRequireDefault");function a(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}n(a,"_classCallCheck");function i(r,o){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:r}n(i,"_possibleConstructorReturn");function e(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);r.prototype=Object.create(o&&o.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(r,o):r.__proto__=o)}n(e,"_inherits");var t=function(r){e(o,r);function o(){return a(this,o),i(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return n(o,"Header"),m(o,null,[{key:"formats",value:n(function(h){return this.tagName.indexOf(h.tagName)+1},"formats")}]),o}(g.default);t.blotName="header",t.tagName=["H1","H2","H3","H4","H5","H6"],c.default=t},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.ListItem=void 0;var m=function(){function S(b,_){for(var C=0;C<_.length;C++){var w=_[C];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(b,w.key,w)}}return n(S,"defineProperties"),function(b,_,C){return _&&S(b.prototype,_),C&&S(b,C),b}}(),v=n(function S(b,_,C){b===null&&(b=Function.prototype);var w=Object.getOwnPropertyDescriptor(b,_);if(w===void 0){var R=Object.getPrototypeOf(b);return R===null?void 0:S(R,_,C)}else{if("value"in w)return w.value;var O=w.get;return O===void 0?void 0:O.call(C)}},"get"),g=u(0),s=r(g),a=u(4),i=r(a),e=u(26),t=r(e);function r(S){return S&&S.__esModule?S:{default:S}}n(r,"_interopRequireDefault");function o(S,b,_){return b in S?Object.defineProperty(S,b,{value:_,enumerable:!0,configurable:!0,writable:!0}):S[b]=_,S}n(o,"_defineProperty");function f(S,b){if(!(S instanceof b))throw new TypeError("Cannot call a class as a function")}n(f,"_classCallCheck");function h(S,b){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:S}n(h,"_possibleConstructorReturn");function p(S,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);S.prototype=Object.create(b&&b.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(S,b):S.__proto__=b)}n(p,"_inherits");var d=function(S){p(b,S);function b(){return f(this,b),h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return n(b,"ListItem"),m(b,[{key:"format",value:n(function(C,w){C===y.blotName&&!w?this.replaceWith(s.default.create(this.statics.scope)):v(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,C,w)},"format")},{key:"remove",value:n(function(){this.prev==null&&this.next==null?this.parent.remove():v(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"remove",this).call(this)},"remove")},{key:"replaceWith",value:n(function(C,w){return this.parent.isolate(this.offset(this.parent),this.length()),C===this.parent.statics.blotName?(this.parent.replaceWith(C,w),this):(this.parent.unwrap(),v(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"replaceWith",this).call(this,C,w))},"replaceWith")}],[{key:"formats",value:n(function(C){return C.tagName===this.tagName?void 0:v(b.__proto__||Object.getPrototypeOf(b),"formats",this).call(this,C)},"formats")}]),b}(i.default);d.blotName="list-item",d.tagName="LI";var y=function(S){p(b,S),m(b,null,[{key:"create",value:n(function(C){var w=C==="ordered"?"OL":"UL",R=v(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,w);return(C==="checked"||C==="unchecked")&&R.setAttribute("data-checked",C==="checked"),R},"create")},{key:"formats",value:n(function(C){if(C.tagName==="OL")return"ordered";if(C.tagName==="UL")return C.hasAttribute("data-checked")?C.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"},"formats")}]);function b(_){f(this,b);var C=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,_)),w=n(function(O){if(O.target.parentNode===_){var D=C.statics.formats(_),I=s.default.find(O.target);D==="checked"?I.format("list","unchecked"):D==="unchecked"&&I.format("list","checked")}},"listEventHandler");return _.addEventListener("touchstart",w),_.addEventListener("mousedown",w),C}return n(b,"List"),m(b,[{key:"format",value:n(function(C,w){this.children.length>0&&this.children.tail.format(C,w)},"format")},{key:"formats",value:n(function(){return o({},this.statics.blotName,this.statics.formats(this.domNode))},"formats")},{key:"insertBefore",value:n(function(C,w){if(C instanceof d)v(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"insertBefore",this).call(this,C,w);else{var R=w==null?this.length():w.offset(this),O=this.split(R);O.parent.insertBefore(C,O)}},"insertBefore")},{key:"optimize",value:n(function(C){v(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"optimize",this).call(this,C);var w=this.next;w!=null&&w.prev===this&&w.statics.blotName===this.statics.blotName&&w.domNode.tagName===this.domNode.tagName&&w.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(w.moveChildren(this),w.remove())},"optimize")},{key:"replace",value:n(function(C){if(C.statics.blotName!==this.statics.blotName){var w=s.default.create(this.statics.defaultChild);C.moveChildren(w),this.appendChild(w)}v(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"replace",this).call(this,C)},"replace")}]),b}(t.default);y.blotName="list",y.scope=s.default.Scope.BLOCK_BLOT,y.tagName=["OL","UL"],y.defaultChild="list-item",y.allowedChildren=[d],c.ListItem=d,c.default=y},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=u(76),v=g(m);function g(t){return t&&t.__esModule?t:{default:t}}n(g,"_interopRequireDefault");function s(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}n(s,"_classCallCheck");function a(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:t}n(a,"_possibleConstructorReturn");function i(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}n(i,"_inherits");var e=function(t){i(r,t);function r(){return s(this,r),a(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return n(r,"Italic"),r}(v.default);e.blotName="italic",e.tagName=["EM","I"],c.default=e},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=function(){function o(f,h){for(var p=0;p<h.length;p++){var d=h[p];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(f,d.key,d)}}return n(o,"defineProperties"),function(f,h,p){return h&&o(f.prototype,h),p&&o(f,p),f}}(),v=n(function o(f,h,p){f===null&&(f=Function.prototype);var d=Object.getOwnPropertyDescriptor(f,h);if(d===void 0){var y=Object.getPrototypeOf(f);return y===null?void 0:o(y,h,p)}else{if("value"in d)return d.value;var S=d.get;return S===void 0?void 0:S.call(p)}},"get"),g=u(6),s=a(g);function a(o){return o&&o.__esModule?o:{default:o}}n(a,"_interopRequireDefault");function i(o,f){if(!(o instanceof f))throw new TypeError("Cannot call a class as a function")}n(i,"_classCallCheck");function e(o,f){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:o}n(e,"_possibleConstructorReturn");function t(o,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);o.prototype=Object.create(f&&f.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(o,f):o.__proto__=f)}n(t,"_inherits");var r=function(o){t(f,o);function f(){return i(this,f),e(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return n(f,"Script"),m(f,null,[{key:"create",value:n(function(p){return p==="super"?document.createElement("sup"):p==="sub"?document.createElement("sub"):v(f.__proto__||Object.getPrototypeOf(f),"create",this).call(this,p)},"create")},{key:"formats",value:n(function(p){if(p.tagName==="SUB")return"sub";if(p.tagName==="SUP")return"super"},"formats")}]),f}(s.default);r.blotName="script",r.tagName=["SUB","SUP"],c.default=r},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=u(6),v=g(m);function g(t){return t&&t.__esModule?t:{default:t}}n(g,"_interopRequireDefault");function s(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}n(s,"_classCallCheck");function a(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:t}n(a,"_possibleConstructorReturn");function i(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}n(i,"_inherits");var e=function(t){i(r,t);function r(){return s(this,r),a(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return n(r,"Strike"),r}(v.default);e.blotName="strike",e.tagName="S",c.default=e},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=u(6),v=g(m);function g(t){return t&&t.__esModule?t:{default:t}}n(g,"_interopRequireDefault");function s(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}n(s,"_classCallCheck");function a(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:t}n(a,"_possibleConstructorReturn");function i(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}n(i,"_inherits");var e=function(t){i(r,t);function r(){return s(this,r),a(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return n(r,"Underline"),r}(v.default);e.blotName="underline",e.tagName="U",c.default=e},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=function(){function h(p,d){for(var y=0;y<d.length;y++){var S=d[y];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(p,S.key,S)}}return n(h,"defineProperties"),function(p,d,y){return d&&h(p.prototype,d),y&&h(p,y),p}}(),v=n(function h(p,d,y){p===null&&(p=Function.prototype);var S=Object.getOwnPropertyDescriptor(p,d);if(S===void 0){var b=Object.getPrototypeOf(p);return b===null?void 0:h(b,d,y)}else{if("value"in S)return S.value;var _=S.get;return _===void 0?void 0:_.call(y)}},"get"),g=u(0),s=i(g),a=u(28);function i(h){return h&&h.__esModule?h:{default:h}}n(i,"_interopRequireDefault");function e(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}n(e,"_classCallCheck");function t(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}n(t,"_possibleConstructorReturn");function r(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}n(r,"_inherits");var o=["alt","height","width"],f=function(h){r(p,h);function p(){return e(this,p),t(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return n(p,"Image"),m(p,[{key:"format",value:n(function(y,S){o.indexOf(y)>-1?S?this.domNode.setAttribute(y,S):this.domNode.removeAttribute(y):v(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"format",this).call(this,y,S)},"format")}],[{key:"create",value:n(function(y){var S=v(p.__proto__||Object.getPrototypeOf(p),"create",this).call(this,y);return typeof y=="string"&&S.setAttribute("src",this.sanitize(y)),S},"create")},{key:"formats",value:n(function(y){return o.reduce(function(S,b){return y.hasAttribute(b)&&(S[b]=y.getAttribute(b)),S},{})},"formats")},{key:"match",value:n(function(y){return/\.(jpe?g|gif|png)$/.test(y)||/^data:image\/.+;base64/.test(y)},"match")},{key:"sanitize",value:n(function(y){return(0,a.sanitize)(y,["http","https","data"])?y:"//:0"},"sanitize")},{key:"value",value:n(function(y){return y.getAttribute("src")},"value")}]),p}(s.default.Embed);f.blotName="image",f.tagName="IMG",c.default=f},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var m=function(){function h(p,d){for(var y=0;y<d.length;y++){var S=d[y];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(p,S.key,S)}}return n(h,"defineProperties"),function(p,d,y){return d&&h(p.prototype,d),y&&h(p,y),p}}(),v=n(function h(p,d,y){p===null&&(p=Function.prototype);var S=Object.getOwnPropertyDescriptor(p,d);if(S===void 0){var b=Object.getPrototypeOf(p);return b===null?void 0:h(b,d,y)}else{if("value"in S)return S.value;var _=S.get;return _===void 0?void 0:_.call(y)}},"get"),g=u(4),s=u(28),a=i(s);function i(h){return h&&h.__esModule?h:{default:h}}n(i,"_interopRequireDefault");function e(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}n(e,"_classCallCheck");function t(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}n(t,"_possibleConstructorReturn");function r(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}n(r,"_inherits");var o=["height","width"],f=function(h){r(p,h);function p(){return e(this,p),t(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return n(p,"Video"),m(p,[{key:"format",value:n(function(y,S){o.indexOf(y)>-1?S?this.domNode.setAttribute(y,S):this.domNode.removeAttribute(y):v(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"format",this).call(this,y,S)},"format")}],[{key:"create",value:n(function(y){var S=v(p.__proto__||Object.getPrototypeOf(p),"create",this).call(this,y);return S.setAttribute("frameborder","0"),S.setAttribute("allowfullscreen",!0),S.setAttribute("src",this.sanitize(y)),S},"create")},{key:"formats",value:n(function(y){return o.reduce(function(S,b){return y.hasAttribute(b)&&(S[b]=y.getAttribute(b)),S},{})},"formats")},{key:"sanitize",value:n(function(y){return a.default.sanitize(y)},"sanitize")},{key:"value",value:n(function(y){return y.getAttribute("src")},"value")}]),p}(g.BlockEmbed);f.blotName="video",f.className="ql-video",f.tagName="IFRAME",c.default=f},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.FormulaBlot=void 0;var m=function(){function y(S,b){for(var _=0;_<b.length;_++){var C=b[_];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(S,C.key,C)}}return n(y,"defineProperties"),function(S,b,_){return b&&y(S.prototype,b),_&&y(S,_),S}}(),v=n(function y(S,b,_){S===null&&(S=Function.prototype);var C=Object.getOwnPropertyDescriptor(S,b);if(C===void 0){var w=Object.getPrototypeOf(S);return w===null?void 0:y(w,b,_)}else{if("value"in C)return C.value;var R=C.get;return R===void 0?void 0:R.call(_)}},"get"),g=u(45),s=r(g),a=u(5),i=r(a),e=u(9),t=r(e);function r(y){return y&&y.__esModule?y:{default:y}}n(r,"_interopRequireDefault");function o(y,S){if(!(y instanceof S))throw new TypeError("Cannot call a class as a function")}n(o,"_classCallCheck");function f(y,S){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:y}n(f,"_possibleConstructorReturn");function h(y,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);y.prototype=Object.create(S&&S.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(y,S):y.__proto__=S)}n(h,"_inherits");var p=function(y){h(S,y);function S(){return o(this,S),f(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return n(S,"FormulaBlot"),m(S,null,[{key:"create",value:n(function(_){var C=v(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,_);return typeof _=="string"&&(window.katex.render(_,C,{throwOnError:!1,errorColor:"#f00"}),C.setAttribute("data-value",_)),C},"create")},{key:"value",value:n(function(_){return _.getAttribute("data-value")},"value")}]),S}(s.default);p.blotName="formula",p.className="ql-formula",p.tagName="SPAN";var d=function(y){h(S,y),m(S,null,[{key:"register",value:n(function(){i.default.register(p,!0)},"register")}]);function S(){o(this,S);var b=f(this,(S.__proto__||Object.getPrototypeOf(S)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return b}return n(S,"Formula"),S}(t.default);c.FormulaBlot=p,c.default=d},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.CodeToken=c.CodeBlock=void 0;var m=function(){function _(C,w){for(var R=0;R<w.length;R++){var O=w[R];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(C,O.key,O)}}return n(_,"defineProperties"),function(C,w,R){return w&&_(C.prototype,w),R&&_(C,R),C}}(),v=n(function _(C,w,R){C===null&&(C=Function.prototype);var O=Object.getOwnPropertyDescriptor(C,w);if(O===void 0){var D=Object.getPrototypeOf(C);return D===null?void 0:_(D,w,R)}else{if("value"in O)return O.value;var I=O.get;return I===void 0?void 0:I.call(R)}},"get"),g=u(0),s=f(g),a=u(5),i=f(a),e=u(9),t=f(e),r=u(14),o=f(r);function f(_){return _&&_.__esModule?_:{default:_}}n(f,"_interopRequireDefault");function h(_,C){if(!(_ instanceof C))throw new TypeError("Cannot call a class as a function")}n(h,"_classCallCheck");function p(_,C){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:_}n(p,"_possibleConstructorReturn");function d(_,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);_.prototype=Object.create(C&&C.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(_,C):_.__proto__=C)}n(d,"_inherits");var y=function(_){d(C,_);function C(){return h(this,C),p(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return n(C,"SyntaxCodeBlock"),m(C,[{key:"replaceWith",value:n(function(R){this.domNode.textContent=this.domNode.textContent,this.attach(),v(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"replaceWith",this).call(this,R)},"replaceWith")},{key:"highlight",value:n(function(R){var O=this.domNode.textContent;this.cachedText!==O&&((O.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=R(O),this.domNode.normalize(),this.attach()),this.cachedText=O)},"highlight")}]),C}(o.default);y.className="ql-syntax";var S=new s.default.Attributor.Class("token","hljs",{scope:s.default.Scope.INLINE}),b=function(_){d(C,_),m(C,null,[{key:"register",value:n(function(){i.default.register(S,!0),i.default.register(y,!0)},"register")}]);function C(w,R){h(this,C);var O=p(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,w,R));if(typeof O.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var D=null;return O.quill.on(i.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(D),D=setTimeout(function(){O.highlight(),D=null},O.options.interval)}),O.highlight(),O}return n(C,"Syntax"),m(C,[{key:"highlight",value:n(function(){var R=this;if(!this.quill.selection.composing){this.quill.update(i.default.sources.USER);var O=this.quill.getSelection();this.quill.scroll.descendants(y).forEach(function(D){D.highlight(R.options.highlight)}),this.quill.update(i.default.sources.SILENT),O!=null&&this.quill.setSelection(O,i.default.sources.SILENT)}},"highlight")}]),C}(t.default);b.DEFAULTS={highlight:function(){return window.hljs==null?null:function(_){var C=window.hljs.highlightAuto(_);return C.value}}(),interval:1e3},c.CodeBlock=y,c.CodeToken=S,c.default=b},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(l,c){l.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(l,c){l.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(l,c){l.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(l,c){l.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(l,c){l.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(l,c,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=c.BubbleTooltip=void 0;var m=n(function C(w,R,O){w===null&&(w=Function.prototype);var D=Object.getOwnPropertyDescriptor(w,R);if(D===void 0){var I=Object.getPrototypeOf(w);return I===null?void 0:C(I,R,O)}else{if("value"in D)return D.value;var M=D.get;return M===void 0?void 0:M.call(O)}},"get"),v=function(){function C(w,R){for(var O=0;O<R.length;O++){var D=R[O];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(w,D.key,D)}}return n(C,"defineProperties"),function(w,R,O){return R&&C(w.prototype,R),O&&C(w,O),w}}(),g=u(3),s=h(g),a=u(8),i=h(a),e=u(53),t=h(e),r=u(16),o=u(51),f=h(o);function h(C){return C&&C.__esModule?C:{default:C}}n(h,"_interopRequireDefault");function p(C,w){if(!(C instanceof w))throw new TypeError("Cannot call a class as a function")}n(p,"_classCallCheck");function d(C,w){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:C}n(d,"_possibleConstructorReturn");function y(C,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);C.prototype=Object.create(w&&w.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(C,w):C.__proto__=w)}n(y,"_inherits");var S=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],b=function(C){y(w,C);function w(R,O){p(this,w),O.modules.toolbar!=null&&O.modules.toolbar.container==null&&(O.modules.toolbar.container=S);var D=d(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,R,O));return D.quill.container.classList.add("ql-bubble"),D}return n(w,"BubbleTheme"),v(w,[{key:"extendToolbar",value:n(function(O){this.tooltip=new _(this.quill,this.options.bounds),this.tooltip.root.appendChild(O.container),this.buildButtons([].slice.call(O.container.querySelectorAll("button")),f.default),this.buildPickers([].slice.call(O.container.querySelectorAll("select")),f.default)},"extendToolbar")}]),w}(t.default);b.DEFAULTS=(0,s.default)(!0,{},t.default.DEFAULTS,{modules:{toolbar:{handlers:{link:n(function(w){w?this.quill.theme.tooltip.edit():this.quill.format("link",!1)},"link")}}}});var _=function(C){y(w,C);function w(R,O){p(this,w);var D=d(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,R,O));return D.quill.on(i.default.events.EDITOR_CHANGE,function(I,M,k,N){if(I===i.default.events.SELECTION_CHANGE)if(M!=null&&M.length>0&&N===i.default.sources.USER){D.show(),D.root.style.left="0px",D.root.style.width="",D.root.style.width=D.root.offsetWidth+"px";var j=D.quill.getLines(M.index,M.length);if(j.length===1)D.position(D.quill.getBounds(M));else{var B=j[j.length-1],J=D.quill.getIndex(B),Q=Math.min(B.length()-1,M.index+M.length-J),oe=D.quill.getBounds(new r.Range(J,Q));D.position(oe)}}else document.activeElement!==D.textbox&&D.quill.hasFocus()&&D.hide()}),D}return n(w,"BubbleTooltip"),v(w,[{key:"listen",value:n(function(){var O=this;m(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){O.root.classList.remove("ql-editing")}),this.quill.on(i.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!O.root.classList.contains("ql-hidden")){var D=O.quill.getSelection();D!=null&&O.position(O.quill.getBounds(D))}},1)})},"listen")},{key:"cancel",value:n(function(){this.show()},"cancel")},{key:"position",value:n(function(O){var D=m(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"position",this).call(this,O),I=this.root.querySelector(".ql-tooltip-arrow");if(I.style.marginLeft="",D===0)return D;I.style.marginLeft=-1*D-I.offsetWidth/2+"px"},"position")}]),w}(e.BaseTooltip);_.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),c.BubbleTooltip=_,c.default=b},function(l,c,u){l.exports=u(83)}]).default})},1874409785:function(H){(function(l,c){H.exports=c()})(this,function(){return function(l){var c={};function u(m){if(c[m])return c[m].exports;var v=c[m]={i:m,l:!1,exports:{}};return l[m].call(v.exports,v,v.exports,u),v.l=!0,v.exports}return n(u,"r"),u.m=l,u.c=c,u.d=function(m,v,g){u.o(m,v)||Object.defineProperty(m,v,{enumerable:!0,get:g})},u.r=function(m){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},u.t=function(m,v){if(1&v&&(m=u(m)),8&v||4&v&&typeof m=="object"&&m&&m.__esModule)return m;var g=Object.create(null);if(u.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:m}),2&v&&typeof m!="string")for(var s in m)u.d(g,s,function(a){return m[a]}.bind(null,s));return g},u.n=function(m){var v=m&&m.__esModule?function(){return m.default}:function(){return m};return u.d(v,"a",v),v},u.o=function(m,v){return Object.prototype.hasOwnProperty.call(m,v)},u.p="",u(u.s=90)}({17:function(l,c,u){"use strict";c.__esModule=!0,c.default=void 0;var m=u(18),v=function(){function g(){}return n(g,"e"),g.getFirstMatch=function(s,a){var i=a.match(s);return i&&i.length>0&&i[1]||""},g.getSecondMatch=function(s,a){var i=a.match(s);return i&&i.length>1&&i[2]||""},g.matchAndReturnConst=function(s,a,i){if(s.test(a))return i},g.getWindowsVersionName=function(s){switch(s){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},g.getMacOSVersionName=function(s){var a=s.split(".").splice(0,2).map(function(i){return parseInt(i,10)||0});if(a.push(0),a[0]===10)switch(a[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},g.getAndroidVersionName=function(s){var a=s.split(".").splice(0,2).map(function(i){return parseInt(i,10)||0});if(a.push(0),!(a[0]===1&&a[1]<5))return a[0]===1&&a[1]<6?"Cupcake":a[0]===1&&a[1]>=6?"Donut":a[0]===2&&a[1]<2?"Eclair":a[0]===2&&a[1]===2?"Froyo":a[0]===2&&a[1]>2?"Gingerbread":a[0]===3?"Honeycomb":a[0]===4&&a[1]<1?"Ice Cream Sandwich":a[0]===4&&a[1]<4?"Jelly Bean":a[0]===4&&a[1]>=4?"KitKat":a[0]===5?"Lollipop":a[0]===6?"Marshmallow":a[0]===7?"Nougat":a[0]===8?"Oreo":a[0]===9?"Pie":void 0},g.getVersionPrecision=function(s){return s.split(".").length},g.compareVersions=function(s,a,i){i===void 0&&(i=!1);var e=g.getVersionPrecision(s),t=g.getVersionPrecision(a),r=Math.max(e,t),o=0,f=g.map([s,a],function(h){var p=r-g.getVersionPrecision(h),d=h+new Array(p+1).join(".0");return g.map(d.split("."),function(y){return new Array(20-y.length).join("0")+y}).reverse()});for(i&&(o=r-Math.min(e,t)),r-=1;r>=o;){if(f[0][r]>f[1][r])return 1;if(f[0][r]===f[1][r]){if(r===o)return 0;r-=1}else if(f[0][r]<f[1][r])return-1}},g.map=function(s,a){var i,e=[];if(Array.prototype.map)return Array.prototype.map.call(s,a);for(i=0;i<s.length;i+=1)e.push(a(s[i]));return e},g.find=function(s,a){var i,e;if(Array.prototype.find)return Array.prototype.find.call(s,a);for(i=0,e=s.length;i<e;i+=1){var t=s[i];if(a(t,i))return t}},g.assign=function(s){for(var a,i,e=s,t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];if(Object.assign)return Object.assign.apply(Object,[s].concat(r));var f=n(function(){var h=r[a];typeof h=="object"&&h!==null&&Object.keys(h).forEach(function(p){e[p]=h[p]})},"o");for(a=0,i=r.length;a<i;a+=1)f();return s},g.getBrowserAlias=function(s){return m.BROWSER_ALIASES_MAP[s]},g.getBrowserTypeByAlias=function(s){return m.BROWSER_MAP[s]||""},g}();c.default=v,l.exports=c.default},18:function(l,c,u){"use strict";c.__esModule=!0,c.ENGINE_MAP=c.OS_MAP=c.PLATFORMS_MAP=c.BROWSER_MAP=c.BROWSER_ALIASES_MAP=void 0,c.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},c.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},c.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},c.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},c.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(l,c,u){"use strict";c.__esModule=!0,c.default=void 0;var m,v=(m=u(91))&&m.__esModule?m:{default:m},g=u(18);function s(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}n(s,"a");var a=function(){function i(){}n(i,"e");var e,t,r;return i.getParser=function(o,f){if(f===void 0&&(f=!1),typeof o!="string")throw new Error("UserAgent should be a string");return new v.default(o,f)},i.parse=function(o){return new v.default(o).getResult()},e=i,r=[{key:"BROWSER_MAP",get:function(){return g.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return g.ENGINE_MAP}},{key:"OS_MAP",get:function(){return g.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return g.PLATFORMS_MAP}}],(t=null)&&s(e.prototype,t),r&&s(e,r),i}();c.default=a,l.exports=c.default},91:function(l,c,u){"use strict";c.__esModule=!0,c.default=void 0;var m=i(u(92)),v=i(u(93)),g=i(u(94)),s=i(u(95)),a=i(u(17));function i(t){return t&&t.__esModule?t:{default:t}}n(i,"u");var e=function(){function t(o,f){if(f===void 0&&(f=!1),o==null||o==="")throw new Error("UserAgent parameter can't be empty");this._ua=o,this.parsedResult={},f!==!0&&this.parse()}n(t,"e");var r=t.prototype;return r.getUA=function(){return this._ua},r.test=function(o){return o.test(this._ua)},r.parseBrowser=function(){var o=this;this.parsedResult.browser={};var f=a.default.find(m.default,function(h){if(typeof h.test=="function")return h.test(o);if(h.test instanceof Array)return h.test.some(function(p){return o.test(p)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.browser=f.describe(this.getUA())),this.parsedResult.browser},r.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},r.getBrowserName=function(o){return o?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},r.getBrowserVersion=function(){return this.getBrowser().version},r.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},r.parseOS=function(){var o=this;this.parsedResult.os={};var f=a.default.find(v.default,function(h){if(typeof h.test=="function")return h.test(o);if(h.test instanceof Array)return h.test.some(function(p){return o.test(p)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.os=f.describe(this.getUA())),this.parsedResult.os},r.getOSName=function(o){var f=this.getOS().name;return o?String(f).toLowerCase()||"":f||""},r.getOSVersion=function(){return this.getOS().version},r.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},r.getPlatformType=function(o){o===void 0&&(o=!1);var f=this.getPlatform().type;return o?String(f).toLowerCase()||"":f||""},r.parsePlatform=function(){var o=this;this.parsedResult.platform={};var f=a.default.find(g.default,function(h){if(typeof h.test=="function")return h.test(o);if(h.test instanceof Array)return h.test.some(function(p){return o.test(p)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.platform=f.describe(this.getUA())),this.parsedResult.platform},r.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},r.getEngineName=function(o){return o?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},r.parseEngine=function(){var o=this;this.parsedResult.engine={};var f=a.default.find(s.default,function(h){if(typeof h.test=="function")return h.test(o);if(h.test instanceof Array)return h.test.some(function(p){return o.test(p)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.engine=f.describe(this.getUA())),this.parsedResult.engine},r.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},r.getResult=function(){return a.default.assign({},this.parsedResult)},r.satisfies=function(o){var f=this,h={},p=0,d={},y=0;if(Object.keys(o).forEach(function(D){var I=o[D];typeof I=="string"?(d[D]=I,y+=1):typeof I=="object"&&(h[D]=I,p+=1)}),p>0){var S=Object.keys(h),b=a.default.find(S,function(D){return f.isOS(D)});if(b){var _=this.satisfies(h[b]);if(_!==void 0)return _}var C=a.default.find(S,function(D){return f.isPlatform(D)});if(C){var w=this.satisfies(h[C]);if(w!==void 0)return w}}if(y>0){var R=Object.keys(d),O=a.default.find(R,function(D){return f.isBrowser(D,!0)});if(O!==void 0)return this.compareVersion(d[O])}},r.isBrowser=function(o,f){f===void 0&&(f=!1);var h=this.getBrowserName().toLowerCase(),p=o.toLowerCase(),d=a.default.getBrowserTypeByAlias(p);return f&&d&&(p=d.toLowerCase()),p===h},r.compareVersion=function(o){var f=[0],h=o,p=!1,d=this.getBrowserVersion();if(typeof d=="string")return o[0]===">"||o[0]==="<"?(h=o.substr(1),o[1]==="="?(p=!0,h=o.substr(2)):f=[],o[0]===">"?f.push(1):f.push(-1)):o[0]==="="?h=o.substr(1):o[0]==="~"&&(p=!0,h=o.substr(1)),f.indexOf(a.default.compareVersions(d,h,p))>-1},r.isOS=function(o){return this.getOSName(!0)===String(o).toLowerCase()},r.isPlatform=function(o){return this.getPlatformType(!0)===String(o).toLowerCase()},r.isEngine=function(o){return this.getEngineName(!0)===String(o).toLowerCase()},r.is=function(o,f){return f===void 0&&(f=!1),this.isBrowser(o,f)||this.isOS(o)||this.isPlatform(o)},r.some=function(o){var f=this;return o===void 0&&(o=[]),o.some(function(h){return f.is(h)})},t}();c.default=e,l.exports=c.default},92:function(l,c,u){"use strict";c.__esModule=!0,c.default=void 0;var m,v=(m=u(17))&&m.__esModule?m:{default:m},g=/version\/(\d+(\.?_?\d+)+)/i,s=[{test:[/googlebot/i],describe:function(a){var i={name:"Googlebot"},e=v.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,a)||v.default.getFirstMatch(g,a);return e&&(i.version=e),i}},{test:[/opera/i],describe:function(a){var i={name:"Opera"},e=v.default.getFirstMatch(g,a)||v.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/opr\/|opios/i],describe:function(a){var i={name:"Opera"},e=v.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,a)||v.default.getFirstMatch(g,a);return e&&(i.version=e),i}},{test:[/SamsungBrowser/i],describe:function(a){var i={name:"Samsung Internet for Android"},e=v.default.getFirstMatch(g,a)||v.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/Whale/i],describe:function(a){var i={name:"NAVER Whale Browser"},e=v.default.getFirstMatch(g,a)||v.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/MZBrowser/i],describe:function(a){var i={name:"MZ Browser"},e=v.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,a)||v.default.getFirstMatch(g,a);return e&&(i.version=e),i}},{test:[/focus/i],describe:function(a){var i={name:"Focus"},e=v.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,a)||v.default.getFirstMatch(g,a);return e&&(i.version=e),i}},{test:[/swing/i],describe:function(a){var i={name:"Swing"},e=v.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,a)||v.default.getFirstMatch(g,a);return e&&(i.version=e),i}},{test:[/coast/i],describe:function(a){var i={name:"Opera Coast"},e=v.default.getFirstMatch(g,a)||v.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(a){var i={name:"Opera Touch"},e=v.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,a)||v.default.getFirstMatch(g,a);return e&&(i.version=e),i}},{test:[/yabrowser/i],describe:function(a){var i={name:"Yandex Browser"},e=v.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,a)||v.default.getFirstMatch(g,a);return e&&(i.version=e),i}},{test:[/ucbrowser/i],describe:function(a){var i={name:"UC Browser"},e=v.default.getFirstMatch(g,a)||v.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/Maxthon|mxios/i],describe:function(a){var i={name:"Maxthon"},e=v.default.getFirstMatch(g,a)||v.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/epiphany/i],describe:function(a){var i={name:"Epiphany"},e=v.default.getFirstMatch(g,a)||v.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/puffin/i],describe:function(a){var i={name:"Puffin"},e=v.default.getFirstMatch(g,a)||v.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/sleipnir/i],describe:function(a){var i={name:"Sleipnir"},e=v.default.getFirstMatch(g,a)||v.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/k-meleon/i],describe:function(a){var i={name:"K-Meleon"},e=v.default.getFirstMatch(g,a)||v.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/micromessenger/i],describe:function(a){var i={name:"WeChat"},e=v.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,a)||v.default.getFirstMatch(g,a);return e&&(i.version=e),i}},{test:[/qqbrowser/i],describe:function(a){var i={name:/qqbrowserlite/i.test(a)?"QQ Browser Lite":"QQ Browser"},e=v.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,a)||v.default.getFirstMatch(g,a);return e&&(i.version=e),i}},{test:[/msie|trident/i],describe:function(a){var i={name:"Internet Explorer"},e=v.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/\sedg\//i],describe:function(a){var i={name:"Microsoft Edge"},e=v.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/edg([ea]|ios)/i],describe:function(a){var i={name:"Microsoft Edge"},e=v.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/vivaldi/i],describe:function(a){var i={name:"Vivaldi"},e=v.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/seamonkey/i],describe:function(a){var i={name:"SeaMonkey"},e=v.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/sailfish/i],describe:function(a){var i={name:"Sailfish"},e=v.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,a);return e&&(i.version=e),i}},{test:[/silk/i],describe:function(a){var i={name:"Amazon Silk"},e=v.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/phantom/i],describe:function(a){var i={name:"PhantomJS"},e=v.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/slimerjs/i],describe:function(a){var i={name:"SlimerJS"},e=v.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var i={name:"BlackBerry"},e=v.default.getFirstMatch(g,a)||v.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var i={name:"WebOS Browser"},e=v.default.getFirstMatch(g,a)||v.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/bada/i],describe:function(a){var i={name:"Bada"},e=v.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/tizen/i],describe:function(a){var i={name:"Tizen"},e=v.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,a)||v.default.getFirstMatch(g,a);return e&&(i.version=e),i}},{test:[/qupzilla/i],describe:function(a){var i={name:"QupZilla"},e=v.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,a)||v.default.getFirstMatch(g,a);return e&&(i.version=e),i}},{test:[/firefox|iceweasel|fxios/i],describe:function(a){var i={name:"Firefox"},e=v.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/electron/i],describe:function(a){var i={name:"Electron"},e=v.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/MiuiBrowser/i],describe:function(a){var i={name:"Miui"},e=v.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/chromium/i],describe:function(a){var i={name:"Chromium"},e=v.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,a)||v.default.getFirstMatch(g,a);return e&&(i.version=e),i}},{test:[/chrome|crios|crmo/i],describe:function(a){var i={name:"Chrome"},e=v.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/GSA/i],describe:function(a){var i={name:"Google Search"},e=v.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:function(a){var i=!a.test(/like android/i),e=a.test(/android/i);return i&&e},describe:function(a){var i={name:"Android Browser"},e=v.default.getFirstMatch(g,a);return e&&(i.version=e),i}},{test:[/playstation 4/i],describe:function(a){var i={name:"PlayStation 4"},e=v.default.getFirstMatch(g,a);return e&&(i.version=e),i}},{test:[/safari|applewebkit/i],describe:function(a){var i={name:"Safari"},e=v.default.getFirstMatch(g,a);return e&&(i.version=e),i}},{test:[/.*/i],describe:function(a){var i=a.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:v.default.getFirstMatch(i,a),version:v.default.getSecondMatch(i,a)}}}];c.default=s,l.exports=c.default},93:function(l,c,u){"use strict";c.__esModule=!0,c.default=void 0;var m,v=(m=u(17))&&m.__esModule?m:{default:m},g=u(18),s=[{test:[/Roku\/DVP/],describe:function(a){var i=v.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,a);return{name:g.OS_MAP.Roku,version:i}}},{test:[/windows phone/i],describe:function(a){var i=v.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,a);return{name:g.OS_MAP.WindowsPhone,version:i}}},{test:[/windows /i],describe:function(a){var i=v.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,a),e=v.default.getWindowsVersionName(i);return{name:g.OS_MAP.Windows,version:i,versionName:e}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(a){var i={name:g.OS_MAP.iOS},e=v.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,a);return e&&(i.version=e),i}},{test:[/macintosh/i],describe:function(a){var i=v.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,a).replace(/[_\s]/g,"."),e=v.default.getMacOSVersionName(i),t={name:g.OS_MAP.MacOS,version:i};return e&&(t.versionName=e),t}},{test:[/(ipod|iphone|ipad)/i],describe:function(a){var i=v.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,a).replace(/[_\s]/g,".");return{name:g.OS_MAP.iOS,version:i}}},{test:function(a){var i=!a.test(/like android/i),e=a.test(/android/i);return i&&e},describe:function(a){var i=v.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,a),e=v.default.getAndroidVersionName(i),t={name:g.OS_MAP.Android,version:i};return e&&(t.versionName=e),t}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var i=v.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,a),e={name:g.OS_MAP.WebOS};return i&&i.length&&(e.version=i),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var i=v.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,a)||v.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,a)||v.default.getFirstMatch(/\bbb(\d+)/i,a);return{name:g.OS_MAP.BlackBerry,version:i}}},{test:[/bada/i],describe:function(a){var i=v.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,a);return{name:g.OS_MAP.Bada,version:i}}},{test:[/tizen/i],describe:function(a){var i=v.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,a);return{name:g.OS_MAP.Tizen,version:i}}},{test:[/linux/i],describe:function(){return{name:g.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:g.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(a){var i=v.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,a);return{name:g.OS_MAP.PlayStation4,version:i}}}];c.default=s,l.exports=c.default},94:function(l,c,u){"use strict";c.__esModule=!0,c.default=void 0;var m,v=(m=u(17))&&m.__esModule?m:{default:m},g=u(18),s=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(a){var i=v.default.getFirstMatch(/(can-l01)/i,a)&&"Nova",e={type:g.PLATFORMS_MAP.mobile,vendor:"Huawei"};return i&&(e.model=i),e}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:g.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:g.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:g.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:g.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:g.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:g.PLATFORMS_MAP.tablet}}},{test:function(a){var i=a.test(/ipod|iphone/i),e=a.test(/like (ipod|iphone)/i);return i&&!e},describe:function(a){var i=v.default.getFirstMatch(/(ipod|iphone)/i,a);return{type:g.PLATFORMS_MAP.mobile,vendor:"Apple",model:i}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:g.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:g.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName(!0)==="blackberry"},describe:function(){return{type:g.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(a){return a.getBrowserName(!0)==="bada"},describe:function(){return{type:g.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName()==="windows phone"},describe:function(){return{type:g.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(a){var i=Number(String(a.getOSVersion()).split(".")[0]);return a.getOSName(!0)==="android"&&i>=3},describe:function(){return{type:g.PLATFORMS_MAP.tablet}}},{test:function(a){return a.getOSName(!0)==="android"},describe:function(){return{type:g.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getOSName(!0)==="macos"},describe:function(){return{type:g.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(a){return a.getOSName(!0)==="windows"},describe:function(){return{type:g.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="linux"},describe:function(){return{type:g.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="playstation 4"},describe:function(){return{type:g.PLATFORMS_MAP.tv}}},{test:function(a){return a.getOSName(!0)==="roku"},describe:function(){return{type:g.PLATFORMS_MAP.tv}}}];c.default=s,l.exports=c.default},95:function(l,c,u){"use strict";c.__esModule=!0,c.default=void 0;var m,v=(m=u(17))&&m.__esModule?m:{default:m},g=u(18),s=[{test:function(a){return a.getBrowserName(!0)==="microsoft edge"},describe:function(a){if(/\sedg\//i.test(a))return{name:g.ENGINE_MAP.Blink};var i=v.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,a);return{name:g.ENGINE_MAP.EdgeHTML,version:i}}},{test:[/trident/i],describe:function(a){var i={name:g.ENGINE_MAP.Trident},e=v.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:function(a){return a.test(/presto/i)},describe:function(a){var i={name:g.ENGINE_MAP.Presto},e=v.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:function(a){var i=a.test(/gecko/i),e=a.test(/like gecko/i);return i&&!e},describe:function(a){var i={name:g.ENGINE_MAP.Gecko},e=v.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:g.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(a){var i={name:g.ENGINE_MAP.WebKit},e=v.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,a);return e&&(i.version=e),i}}];c.default=s,l.exports=c.default}})})},585669709:(H,l,c)=>{"use strict";c.r(l),c.d(l,{BotInfo:()=>s,BrowserInfo:()=>m,NodeInfo:()=>v,ReactNativeInfo:()=>a,SearchBotDeviceInfo:()=>g,browserName:()=>p,detect:()=>f,detectOS:()=>y,getNodeVersion:()=>S,parseUserAgent:()=>d});var u=function(_,C,w){if(w||arguments.length===2)for(var R=0,O=C.length,D;R<O;R++)(D||!(R in C))&&(D||(D=Array.prototype.slice.call(C,0,R)),D[R]=C[R]);return _.concat(D||Array.prototype.slice.call(C))},m=function(){function _(C,w,R){this.name=C,this.version=w,this.os=R,this.type="browser"}return n(_,"BrowserInfo"),_}(),v=function(){function _(C){this.version=C,this.type="node",this.name="node",this.os=(void 0).platform}return n(_,"NodeInfo"),_}(),g=function(){function _(C,w,R,O){this.name=C,this.version=w,this.os=R,this.bot=O,this.type="bot-device"}return n(_,"SearchBotDeviceInfo"),_}(),s=function(){function _(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n(_,"BotInfo"),_}(),a=function(){function _(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n(_,"ReactNativeInfo"),_}(),i=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,e=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,t=3,r=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",i]],o=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function f(_){return _?d(_):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new a:typeof navigator<"u"?d(navigator.userAgent):S()}n(f,"detect");function h(_){return _!==""&&r.reduce(function(C,w){var R=w[0],O=w[1];if(C)return C;var D=O.exec(_);return!!D&&[R,D]},!1)}n(h,"matchUserAgent");function p(_){var C=h(_);return C?C[0]:null}n(p,"browserName");function d(_){var C=h(_);if(!C)return null;var w=C[0],R=C[1];if(w==="searchbot")return new s;var O=R[1]&&R[1].split(".").join("_").split("_").slice(0,3);O?O.length<t&&(O=u(u([],O,!0),b(t-O.length),!0)):O=[];var D=O.join("."),I=y(_),M=e.exec(_);return M&&M[1]?new g(w,D,I,M[1]):new m(w,D,I)}n(d,"parseUserAgent");function y(_){for(var C=0,w=o.length;C<w;C++){var R=o[C],O=R[0],D=R[1],I=D.exec(_);if(I)return O}return null}n(y,"detectOS");function S(){var _=!1;return _?new v((void 0).version.slice(1)):null}n(S,"getNodeVersion");function b(_){for(var C=[],w=0;w<_;w++)C.push("0");return C}n(b,"createVersionParts")},434544446:H=>{"use strict";H.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}},344860614:(H,l,c)=>{"use strict";c.d(l,{zy:()=>zi,Zp:()=>qo,wQ:()=>co,g:()=>Fe});var u=c(3134334389),m=c.t(u,2);/**
 * @remix-run/router v1.15.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function v(){return v=Object.assign?Object.assign.bind():function(me){for(var Ie=1;Ie<arguments.length;Ie++){var $e=arguments[Ie];for(var ot in $e)Object.prototype.hasOwnProperty.call($e,ot)&&(me[ot]=$e[ot])}return me},v.apply(this,arguments)}n(v,"_extends");var g;(function(me){me.Pop="POP",me.Push="PUSH",me.Replace="REPLACE"})(g||(g={}));const s="popstate";function a(me){me===void 0&&(me={});let{initialEntries:Ie=["/"],initialIndex:$e,v5Compat:ot=!1}=me,Et;Et=Ie.map((oi,Si)=>In(oi,typeof oi=="string"?null:oi.state,Si===0?"default":void 0));let Yt=Sn($e??Et.length-1),jt=g.Pop,yn=null;function Sn(oi){return Math.min(Math.max(oi,0),Et.length-1)}n(Sn,"clampIndex");function Pn(){return Et[Yt]}n(Pn,"getCurrentLocation");function In(oi,Si,yi){Si===void 0&&(Si=null);let li=h(Et?Pn().pathname:"/",oi,Si,yi);return r(li.pathname.charAt(0)==="/","relative pathnames are not supported in memory history: "+JSON.stringify(oi)),li}n(In,"createMemoryLocation");function Jn(oi){return typeof oi=="string"?oi:p(oi)}return n(Jn,"createHref"),{get index(){return Yt},get action(){return jt},get location(){return Pn()},createHref:Jn,createURL(oi){return new URL(Jn(oi),"http://localhost")},encodeLocation(oi){let Si=typeof oi=="string"?d(oi):oi;return{pathname:Si.pathname||"",search:Si.search||"",hash:Si.hash||""}},push(oi,Si){jt=g.Push;let yi=In(oi,Si);Yt+=1,Et.splice(Yt,Et.length,yi),ot&&yn&&yn({action:jt,location:yi,delta:1})},replace(oi,Si){jt=g.Replace;let yi=In(oi,Si);Et[Yt]=yi,ot&&yn&&yn({action:jt,location:yi,delta:0})},go(oi){jt=g.Pop;let Si=Sn(Yt+oi),yi=Et[Si];Yt=Si,yn&&yn({action:jt,location:yi,delta:oi})},listen(oi){return yn=oi,()=>{yn=null}}}}n(a,"router_createMemoryHistory");function i(me){me===void 0&&(me={});function Ie(ot,Et){let{pathname:Yt,search:jt,hash:yn}=ot.location;return h("",{pathname:Yt,search:jt,hash:yn},Et.state&&Et.state.usr||null,Et.state&&Et.state.key||"default")}n(Ie,"createBrowserLocation");function $e(ot,Et){return typeof Et=="string"?Et:p(Et)}return n($e,"createBrowserHref"),y(Ie,$e,null,me)}n(i,"createBrowserHistory");function e(me){me===void 0&&(me={});function Ie(Et,Yt){let{pathname:jt="/",search:yn="",hash:Sn=""}=d(Et.location.hash.substr(1));return!jt.startsWith("/")&&!jt.startsWith(".")&&(jt="/"+jt),h("",{pathname:jt,search:yn,hash:Sn},Yt.state&&Yt.state.usr||null,Yt.state&&Yt.state.key||"default")}n(Ie,"createHashLocation");function $e(Et,Yt){let jt=Et.document.querySelector("base"),yn="";if(jt&&jt.getAttribute("href")){let Sn=Et.location.href,Pn=Sn.indexOf("#");yn=Pn===-1?Sn:Sn.slice(0,Pn)}return yn+"#"+(typeof Yt=="string"?Yt:p(Yt))}n($e,"createHashHref");function ot(Et,Yt){r(Et.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(Yt)+")")}return n(ot,"validateHashLocation"),y(Ie,$e,ot,me)}n(e,"createHashHistory");function t(me,Ie){if(me===!1||me===null||typeof me>"u")throw new Error(Ie)}n(t,"invariant");function r(me,Ie){if(!me){typeof console<"u"&&console.warn(Ie);try{throw new Error(Ie)}catch{}}}n(r,"warning");function o(){return Math.random().toString(36).substr(2,8)}n(o,"createKey");function f(me,Ie){return{usr:me.state,key:me.key,idx:Ie}}n(f,"getHistoryState");function h(me,Ie,$e,ot){return $e===void 0&&($e=null),v({pathname:typeof me=="string"?me:me.pathname,search:"",hash:""},typeof Ie=="string"?d(Ie):Ie,{state:$e,key:Ie&&Ie.key||ot||o()})}n(h,"createLocation");function p(me){let{pathname:Ie="/",search:$e="",hash:ot=""}=me;return $e&&$e!=="?"&&(Ie+=$e.charAt(0)==="?"?$e:"?"+$e),ot&&ot!=="#"&&(Ie+=ot.charAt(0)==="#"?ot:"#"+ot),Ie}n(p,"createPath");function d(me){let Ie={};if(me){let $e=me.indexOf("#");$e>=0&&(Ie.hash=me.substr($e),me=me.substr(0,$e));let ot=me.indexOf("?");ot>=0&&(Ie.search=me.substr(ot),me=me.substr(0,ot)),me&&(Ie.pathname=me)}return Ie}n(d,"router_parsePath");function y(me,Ie,$e,ot){ot===void 0&&(ot={});let{window:Et=document.defaultView,v5Compat:Yt=!1}=ot,jt=Et.history,yn=g.Pop,Sn=null,Pn=In();Pn==null&&(Pn=0,jt.replaceState(v({},jt.state,{idx:Pn}),""));function In(){return(jt.state||{idx:null}).idx}n(In,"getIndex");function Jn(){yn=g.Pop;let li=In(),Yn=li==null?null:li-Pn;Pn=li,Sn&&Sn({action:yn,location:yi.location,delta:Yn})}n(Jn,"handlePop");function ei(li,Yn){yn=g.Push;let Gi=h(yi.location,li,Yn);$e&&$e(Gi,li),Pn=In()+1;let Wr=f(Gi,Pn),oo=yi.createHref(Gi);try{jt.pushState(Wr,"",oo)}catch(lo){if(lo instanceof DOMException&&lo.name==="DataCloneError")throw lo;Et.location.assign(oo)}Yt&&Sn&&Sn({action:yn,location:yi.location,delta:1})}n(ei,"push");function oi(li,Yn){yn=g.Replace;let Gi=h(yi.location,li,Yn);$e&&$e(Gi,li),Pn=In();let Wr=f(Gi,Pn),oo=yi.createHref(Gi);jt.replaceState(Wr,"",oo),Yt&&Sn&&Sn({action:yn,location:yi.location,delta:0})}n(oi,"replace");function Si(li){let Yn=Et.location.origin!=="null"?Et.location.origin:Et.location.href,Gi=typeof li=="string"?li:p(li);return Gi=Gi.replace(/ $/,"%20"),t(Yn,"No window.location.(origin|href) available to create URL for href: "+Gi),new URL(Gi,Yn)}n(Si,"createURL");let yi={get action(){return yn},get location(){return me(Et,jt)},listen(li){if(Sn)throw new Error("A history only accepts one active listener");return Et.addEventListener(s,Jn),Sn=li,()=>{Et.removeEventListener(s,Jn),Sn=null}},createHref(li){return Ie(Et,li)},createURL:Si,encodeLocation(li){let Yn=Si(li);return{pathname:Yn.pathname,search:Yn.search,hash:Yn.hash}},push:ei,replace:oi,go(li){return jt.go(li)}};return yi}n(y,"getUrlBasedHistory");var S;(function(me){me.data="data",me.deferred="deferred",me.redirect="redirect",me.error="error"})(S||(S={}));const b=new Set(["lazy","caseSensitive","path","id","index","children"]);function _(me){return me.index===!0}n(_,"isIndexRoute");function C(me,Ie,$e,ot){return $e===void 0&&($e=[]),ot===void 0&&(ot={}),me.map((Et,Yt)=>{let jt=[...$e,Yt],yn=typeof Et.id=="string"?Et.id:jt.join("-");if(t(Et.index!==!0||!Et.children,"Cannot specify children on an index route"),t(!ot[yn],'Found a route id collision on id "'+yn+`".  Route id's must be globally unique within Data Router usages`),_(Et)){let Sn=v({},Et,Ie(Et),{id:yn});return ot[yn]=Sn,Sn}else{let Sn=v({},Et,Ie(Et),{id:yn,children:void 0});return ot[yn]=Sn,Et.children&&(Sn.children=C(Et.children,Ie,jt,ot)),Sn}})}n(C,"convertRoutesToDataRoutes");function w(me,Ie,$e){$e===void 0&&($e="/");let ot=typeof Ie=="string"?d(Ie):Ie,Et=De(ot.pathname||"/",$e);if(Et==null)return null;let Yt=O(me);I(Yt);let jt=null;for(let yn=0;jt==null&&yn<Yt.length;++yn){let Sn=be(Et);jt=he(Yt[yn],Sn)}return jt}n(w,"router_matchRoutes");function R(me,Ie){let{route:$e,pathname:ot,params:Et}=me;return{id:$e.id,pathname:ot,params:Et,data:Ie[$e.id],handle:$e.handle}}n(R,"convertRouteMatchToUiMatch");function O(me,Ie,$e,ot){Ie===void 0&&(Ie=[]),$e===void 0&&($e=[]),ot===void 0&&(ot="");let Et=n((Yt,jt,yn)=>{let Sn={relativePath:yn===void 0?Yt.path||"":yn,caseSensitive:Yt.caseSensitive===!0,childrenIndex:jt,route:Yt};Sn.relativePath.startsWith("/")&&(t(Sn.relativePath.startsWith(ot),'Absolute route path "'+Sn.relativePath+'" nested under path '+('"'+ot+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),Sn.relativePath=Sn.relativePath.slice(ot.length));let Pn=dt([ot,Sn.relativePath]),In=$e.concat(Sn);Yt.children&&Yt.children.length>0&&(t(Yt.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+Pn+'".')),O(Yt.children,Ie,In,Pn)),!(Yt.path==null&&!Yt.index)&&Ie.push({path:Pn,score:oe(Pn,Yt.index),routesMeta:In})},"flattenRoute");return me.forEach((Yt,jt)=>{var yn;if(Yt.path===""||!((yn=Yt.path)!=null&&yn.includes("?")))Et(Yt,jt);else for(let Sn of D(Yt.path))Et(Yt,jt,Sn)}),Ie}n(O,"flattenRoutes");function D(me){let Ie=me.split("/");if(Ie.length===0)return[];let[$e,...ot]=Ie,Et=$e.endsWith("?"),Yt=$e.replace(/\?$/,"");if(ot.length===0)return Et?[Yt,""]:[Yt];let jt=D(ot.join("/")),yn=[];return yn.push(...jt.map(Sn=>Sn===""?Yt:[Yt,Sn].join("/"))),Et&&yn.push(...jt),yn.map(Sn=>me.startsWith("/")&&Sn===""?"/":Sn)}n(D,"explodeOptionalSegments");function I(me){me.sort((Ie,$e)=>Ie.score!==$e.score?$e.score-Ie.score:$(Ie.routesMeta.map(ot=>ot.childrenIndex),$e.routesMeta.map(ot=>ot.childrenIndex)))}n(I,"rankRouteBranches");const M=/^:[\w-]+$/,k=3,N=2,j=1,B=10,J=null,Q=n(me=>me==="*","isSplat");function oe(me,Ie){let $e=me.split("/"),ot=$e.length;return $e.some(Q)&&(ot+=J),Ie&&(ot+=N),$e.filter(Et=>!Q(Et)).reduce((Et,Yt)=>Et+(M.test(Yt)?k:Yt===""?j:B),ot)}n(oe,"computeScore");function $(me,Ie){return me.length===Ie.length&&me.slice(0,-1).every((ot,Et)=>ot===Ie[Et])?me[me.length-1]-Ie[Ie.length-1]:0}n($,"compareIndexes");function he(me,Ie){let{routesMeta:$e}=me,ot={},Et="/",Yt=[];for(let jt=0;jt<$e.length;++jt){let yn=$e[jt],Sn=jt===$e.length-1,Pn=Et==="/"?Ie:Ie.slice(Et.length)||"/",In=Ee({path:yn.relativePath,caseSensitive:yn.caseSensitive,end:Sn},Pn);if(!In)return null;Object.assign(ot,In.params);let Jn=yn.route;Yt.push({params:ot,pathname:dt([Et,In.pathname]),pathnameBase:Cn(dt([Et,In.pathnameBase])),route:Jn}),In.pathnameBase!=="/"&&(Et=dt([Et,In.pathnameBase]))}return Yt}n(he,"matchRouteBranch");function Ae(me,Ie){Ie===void 0&&(Ie={});let $e=me;$e.endsWith("*")&&$e!=="*"&&!$e.endsWith("/*")&&(r(!1,'Route path "'+$e+'" will be treated as if it were '+('"'+$e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+$e.replace(/\*$/,"/*")+'".')),$e=$e.replace(/\*$/,"/*"));const ot=$e.startsWith("/")?"/":"",Et=n(jt=>jt==null?"":typeof jt=="string"?jt:String(jt),"stringify"),Yt=$e.split(/\/+/).map((jt,yn,Sn)=>{if(yn===Sn.length-1&&jt==="*")return Et(Ie["*"]);const In=jt.match(/^:([\w-]+)(\??)$/);if(In){const[,Jn,ei]=In;let oi=Ie[Jn];return t(ei==="?"||oi!=null,'Missing ":'+Jn+'" param'),Et(oi)}return jt.replace(/\?$/g,"")}).filter(jt=>!!jt);return ot+Yt.join("/")}n(Ae,"generatePath");function Ee(me,Ie){typeof me=="string"&&(me={path:me,caseSensitive:!1,end:!0});let[$e,ot]=Oe(me.path,me.caseSensitive,me.end),Et=Ie.match($e);if(!Et)return null;let Yt=Et[0],jt=Yt.replace(/(.)\/+$/,"$1"),yn=Et.slice(1);return{params:ot.reduce((Pn,In,Jn)=>{let{paramName:ei,isOptional:oi}=In;if(ei==="*"){let yi=yn[Jn]||"";jt=Yt.slice(0,Yt.length-yi.length).replace(/(.)\/+$/,"$1")}const Si=yn[Jn];return oi&&!Si?Pn[ei]=void 0:Pn[ei]=(Si||"").replace(/%2F/g,"/"),Pn},{}),pathname:Yt,pathnameBase:jt,pattern:me}}n(Ee,"router_matchPath");function Oe(me,Ie,$e){Ie===void 0&&(Ie=!1),$e===void 0&&($e=!0),r(me==="*"||!me.endsWith("*")||me.endsWith("/*"),'Route path "'+me+'" will be treated as if it were '+('"'+me.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+me.replace(/\*$/,"/*")+'".'));let ot=[],Et="^"+me.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(jt,yn,Sn)=>(ot.push({paramName:yn,isOptional:Sn!=null}),Sn?"/?([^\\/]+)?":"/([^\\/]+)"));return me.endsWith("*")?(ot.push({paramName:"*"}),Et+=me==="*"||me==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):$e?Et+="\\/*$":me!==""&&me!=="/"&&(Et+="(?:(?=\\/|$))"),[new RegExp(Et,Ie?void 0:"i"),ot]}n(Oe,"compilePath");function be(me){try{return me.split("/").map(Ie=>decodeURIComponent(Ie).replace(/\//g,"%2F")).join("/")}catch(Ie){return r(!1,'The URL path "'+me+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+Ie+").")),me}}n(be,"decodePath");function De(me,Ie){if(Ie==="/")return me;if(!me.toLowerCase().startsWith(Ie.toLowerCase()))return null;let $e=Ie.endsWith("/")?Ie.length-1:Ie.length,ot=me.charAt($e);return ot&&ot!=="/"?null:me.slice($e)||"/"}n(De,"router_stripBasename");function ut(me,Ie){Ie===void 0&&(Ie="/");let{pathname:$e,search:ot="",hash:Et=""}=typeof me=="string"?d(me):me;return{pathname:$e?$e.startsWith("/")?$e:St($e,Ie):Ie,search:gt(ot),hash:Ut(Et)}}n(ut,"resolvePath");function St(me,Ie){let $e=Ie.replace(/\/+$/,"").split("/");return me.split("/").forEach(Et=>{Et===".."?$e.length>1&&$e.pop():Et!=="."&&$e.push(Et)}),$e.length>1?$e.join("/"):"/"}n(St,"resolvePathname");function Rt(me,Ie,$e,ot){return"Cannot include a '"+me+"' character in a manually specified "+("`to."+Ie+"` field ["+JSON.stringify(ot)+"].  Please separate it out to the ")+("`to."+$e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}n(Rt,"getInvalidPathError");function Ze(me){return me.filter((Ie,$e)=>$e===0||Ie.route.path&&Ie.route.path.length>0)}n(Ze,"getPathContributingMatches");function mt(me,Ie){let $e=Ze(me);return Ie?$e.map((ot,Et)=>Et===me.length-1?ot.pathname:ot.pathnameBase):$e.map(ot=>ot.pathnameBase)}n(mt,"getResolveToMatches");function At(me,Ie,$e,ot){ot===void 0&&(ot=!1);let Et;typeof me=="string"?Et=d(me):(Et=v({},me),t(!Et.pathname||!Et.pathname.includes("?"),Rt("?","pathname","search",Et)),t(!Et.pathname||!Et.pathname.includes("#"),Rt("#","pathname","hash",Et)),t(!Et.search||!Et.search.includes("#"),Rt("#","search","hash",Et)));let Yt=me===""||Et.pathname==="",jt=Yt?"/":Et.pathname,yn;if(jt==null)yn=$e;else{let Jn=Ie.length-1;if(!ot&&jt.startsWith("..")){let ei=jt.split("/");for(;ei[0]==="..";)ei.shift(),Jn-=1;Et.pathname=ei.join("/")}yn=Jn>=0?Ie[Jn]:"/"}let Sn=ut(Et,yn),Pn=jt&&jt!=="/"&&jt.endsWith("/"),In=(Yt||jt===".")&&$e.endsWith("/");return!Sn.pathname.endsWith("/")&&(Pn||In)&&(Sn.pathname+="/"),Sn}n(At,"router_resolveTo");function Vt(me){return me===""||me.pathname===""?"/":typeof me=="string"?d(me).pathname:me.pathname}n(Vt,"getToPathname");const dt=n(me=>me.join("/").replace(/\/\/+/g,"/"),"router_joinPaths"),Cn=n(me=>me.replace(/\/+$/,"").replace(/^\/*/,"/"),"normalizePathname"),gt=n(me=>!me||me==="?"?"":me.startsWith("?")?me:"?"+me,"normalizeSearch"),Ut=n(me=>!me||me==="#"?"":me.startsWith("#")?me:"#"+me,"normalizeHash"),en=n(function(Ie,$e){$e===void 0&&($e={});let ot=typeof $e=="number"?{status:$e}:$e,Et=new Headers(ot.headers);return Et.has("Content-Type")||Et.set("Content-Type","application/json; charset=utf-8"),new Response(JSON.stringify(Ie),v({},ot,{headers:Et}))},"json");class sn extends Error{}n(sn,"AbortedDeferredError");class $t{constructor(Ie,$e){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],t(Ie&&typeof Ie=="object"&&!Array.isArray(Ie),"defer() only accepts plain objects");let ot;this.abortPromise=new Promise((Yt,jt)=>ot=jt),this.controller=new AbortController;let Et=n(()=>ot(new sn("Deferred data aborted")),"onAbort");this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",Et),this.controller.signal.addEventListener("abort",Et),this.data=Object.entries(Ie).reduce((Yt,jt)=>{let[yn,Sn]=jt;return Object.assign(Yt,{[yn]:this.trackPromise(yn,Sn)})},{}),this.done&&this.unlistenAbortSignal(),this.init=$e}trackPromise(Ie,$e){if(!($e instanceof Promise))return $e;this.deferredKeys.push(Ie),this.pendingKeysSet.add(Ie);let ot=Promise.race([$e,this.abortPromise]).then(Et=>this.onSettle(ot,Ie,void 0,Et),Et=>this.onSettle(ot,Ie,Et));return ot.catch(()=>{}),Object.defineProperty(ot,"_tracked",{get:()=>!0}),ot}onSettle(Ie,$e,ot,Et){if(this.controller.signal.aborted&&ot instanceof sn)return this.unlistenAbortSignal(),Object.defineProperty(Ie,"_error",{get:()=>ot}),Promise.reject(ot);if(this.pendingKeysSet.delete($e),this.done&&this.unlistenAbortSignal(),ot===void 0&&Et===void 0){let Yt=new Error('Deferred data for key "'+$e+'" resolved/rejected with `undefined`, you must resolve/reject with a value or `null`.');return Object.defineProperty(Ie,"_error",{get:()=>Yt}),this.emit(!1,$e),Promise.reject(Yt)}return Et===void 0?(Object.defineProperty(Ie,"_error",{get:()=>ot}),this.emit(!1,$e),Promise.reject(ot)):(Object.defineProperty(Ie,"_data",{get:()=>Et}),this.emit(!1,$e),Et)}emit(Ie,$e){this.subscribers.forEach(ot=>ot(Ie,$e))}subscribe(Ie){return this.subscribers.add(Ie),()=>this.subscribers.delete(Ie)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((Ie,$e)=>this.pendingKeysSet.delete($e)),this.emit(!0)}async resolveData(Ie){let $e=!1;if(!this.done){let ot=n(()=>this.cancel(),"onAbort");Ie.addEventListener("abort",ot),$e=await new Promise(Et=>{this.subscribe(Yt=>{Ie.removeEventListener("abort",ot),(Yt||this.done)&&Et(Yt)})})}return $e}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return t(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((Ie,$e)=>{let[ot,Et]=$e;return Object.assign(Ie,{[ot]:di(Et)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}n($t,"DeferredData");function Rn(me){return me instanceof Promise&&me._tracked===!0}n(Rn,"isTrackedPromise");function di(me){if(!Rn(me))return me;if(me._error)throw me._error;return me._data}n(di,"unwrapTrackedPromise");const ii=n(function(Ie,$e){$e===void 0&&($e={});let ot=typeof $e=="number"?{status:$e}:$e;return new $t(Ie,ot)},"defer"),Kn=n(function(Ie,$e){$e===void 0&&($e=302);let ot=$e;typeof ot=="number"?ot={status:ot}:typeof ot.status>"u"&&(ot.status=302);let Et=new Headers(ot.headers);return Et.set("Location",Ie),new Response(null,v({},ot,{headers:Et}))},"redirect"),hi=n((me,Ie)=>{let $e=Kn(me,Ie);return $e.headers.set("X-Remix-Reload-Document","true"),$e},"redirectDocument");class Ln{constructor(Ie,$e,ot,Et){Et===void 0&&(Et=!1),this.status=Ie,this.statusText=$e||"",this.internal=Et,ot instanceof Error?(this.data=ot.toString(),this.error=ot):this.data=ot}}n(Ln,"ErrorResponseImpl");function Hn(me){return me!=null&&typeof me.status=="number"&&typeof me.statusText=="string"&&typeof me.internal=="boolean"&&"data"in me}n(Hn,"router_isRouteErrorResponse");const ui=["post","put","patch","delete"],jn=new Set(ui),ri=["get",...ui],ie=new Set(ri),Mt=new Set([301,302,303,307,308]),Ot=new Set([307,308]),Ht={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},hn={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},tn={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},xe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dt=n(me=>({hasErrorBoundary:Boolean(me.hasErrorBoundary)}),"defaultMapRouteProperties"),Y="remix-router-transitions";function fe(me){const Ie=me.window?me.window:typeof window<"u"?window:void 0,$e=typeof Ie<"u"&&typeof Ie.document<"u"&&typeof Ie.document.createElement<"u",ot=!$e;t(me.routes.length>0,"You must provide a non-empty routes array to createRouter");let Et;if(me.mapRouteProperties)Et=me.mapRouteProperties;else if(me.detectErrorBoundary){let rn=me.detectErrorBoundary;Et=n(gn=>({hasErrorBoundary:rn(gn)}),"mapRouteProperties")}else Et=Dt;let Yt={},jt=C(me.routes,Et,void 0,Yt),yn,Sn=me.basename||"/",Pn=v({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},me.future),In=null,Jn=new Set,ei=null,oi=null,Si=null,yi=me.hydrationData!=null,li=w(jt,me.history.location,Sn),Yn=null;if(li==null){let rn=qi(404,{pathname:me.history.location.pathname}),{matches:gn,route:Tn}=ki(jt);li=gn,Yn={[Tn.id]:rn}}let Gi,Wr=li.some(rn=>rn.route.lazy),oo=li.some(rn=>rn.route.loader);if(Wr)Gi=!1;else if(!oo)Gi=!0;else if(Pn.v7_partialHydration){let rn=me.hydrationData?me.hydrationData.loaderData:null,gn=me.hydrationData?me.hydrationData.errors:null;Gi=li.every(Tn=>Tn.route.loader&&Tn.route.loader.hydrate!==!0&&(rn&&rn[Tn.route.id]!==void 0||gn&&gn[Tn.route.id]!==void 0))}else Gi=me.hydrationData!=null;let lo,dn={historyAction:me.history.action,location:me.history.location,matches:li,initialized:Gi,navigation:Ht,restoreScrollPosition:me.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:me.hydrationData&&me.hydrationData.loaderData||{},actionData:me.hydrationData&&me.hydrationData.actionData||null,errors:me.hydrationData&&me.hydrationData.errors||Yn,fetchers:new Map,blockers:new Map},fo=g.Pop,to=!1,fr,xo=!1,_o=new Map,fa=null,la=!1,ps=!1,_s=[],As=[],aa=new Map,il=0,Ws=-1,is=new Map,rs=new Set,Ds=new Map,Ts=new Map,Ya=new Set,Ua=new Map,ms=new Map,Rs=!1;function ql(){if(In=me.history.listen(rn=>{let{action:gn,location:Tn,delta:Ai}=rn;if(Rs){Rs=!1;return}r(ms.size===0||Ai!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let $i=Js({currentLocation:dn.location,nextLocation:Tn,historyAction:gn});if($i&&Ai!=null){Rs=!0,me.history.go(Ai*-1),Ks($i,{state:"blocked",location:Tn,proceed(){Ks($i,{state:"proceeding",proceed:void 0,reset:void 0,location:Tn}),me.history.go(Ai)},reset(){let Ar=new Map(dn.blockers);Ar.set($i,tn),La({blockers:Ar})}});return}return vs(gn,Tn)}),$e){fi(Ie,_o);let rn=n(()=>Li(Ie,_o),"_saveAppliedTransitions");Ie.addEventListener("pagehide",rn),fa=n(()=>Ie.removeEventListener("pagehide",rn),"removePageHideEventListener")}return dn.initialized||vs(g.Pop,dn.location,{initialHydration:!0}),lo}n(ql,"initialize");function pl(){In&&In(),fa&&fa(),Jn.clear(),fr&&fr.abort(),dn.fetchers.forEach((rn,gn)=>Gs(gn)),dn.blockers.forEach((rn,gn)=>xl(gn))}n(pl,"dispose");function Rl(rn){return Jn.add(rn),()=>Jn.delete(rn)}n(Rl,"subscribe");function La(rn,gn){gn===void 0&&(gn={}),dn=v({},dn,rn);let Tn=[],Ai=[];Pn.v7_fetcherPersist&&dn.fetchers.forEach(($i,Ar)=>{$i.state==="idle"&&(Ya.has(Ar)?Ai.push(Ar):Tn.push(Ar))}),[...Jn].forEach($i=>$i(dn,{deletedFetchers:Ai,unstable_viewTransitionOpts:gn.viewTransitionOpts,unstable_flushSync:gn.flushSync===!0})),Pn.v7_fetcherPersist&&(Tn.forEach($i=>dn.fetchers.delete($i)),Ai.forEach($i=>Gs($i)))}n(La,"updateState");function gs(rn,gn,Tn){var Ai,$i;let{flushSync:Ar}=Tn===void 0?{}:Tn,Dr=dn.actionData!=null&&dn.navigation.formMethod!=null&&Ur(dn.navigation.formMethod)&&dn.navigation.state==="loading"&&((Ai=rn.state)==null?void 0:Ai._isRedirect)!==!0,vr;gn.actionData?Object.keys(gn.actionData).length>0?vr=gn.actionData:vr=null:Dr?vr=dn.actionData:vr=null;let dr=gn.loaderData?Vi(dn.loaderData,gn.loaderData,gn.matches||[],gn.errors):dn.loaderData,ao=dn.blockers;ao.size>0&&(ao=new Map(ao),ao.forEach((mi,rr)=>ao.set(rr,tn)));let zo=to===!0||dn.navigation.formMethod!=null&&Ur(dn.navigation.formMethod)&&(($i=rn.state)==null?void 0:$i._isRedirect)!==!0;yn&&(jt=yn,yn=void 0),la||fo===g.Pop||(fo===g.Push?me.history.push(rn,rn.state):fo===g.Replace&&me.history.replace(rn,rn.state));let Yr;if(fo===g.Pop){let mi=_o.get(dn.location.pathname);mi&&mi.has(rn.pathname)?Yr={currentLocation:dn.location,nextLocation:rn}:_o.has(rn.pathname)&&(Yr={currentLocation:rn,nextLocation:dn.location})}else if(xo){let mi=_o.get(dn.location.pathname);mi?mi.add(rn.pathname):(mi=new Set([rn.pathname]),_o.set(dn.location.pathname,mi)),Yr={currentLocation:dn.location,nextLocation:rn}}La(v({},gn,{actionData:vr,loaderData:dr,historyAction:fo,location:rn,initialized:!0,navigation:Ht,revalidation:"idle",restoreScrollPosition:Wi(rn,gn.matches||dn.matches),preventScrollReset:zo,blockers:ao}),{viewTransitionOpts:Yr,flushSync:Ar===!0}),fo=g.Pop,to=!1,xo=!1,la=!1,ps=!1,_s=[],As=[]}n(gs,"completeNavigation");async function Ml(rn,gn){if(typeof rn=="number"){me.history.go(rn);return}let Tn=Ke(dn.location,dn.matches,Sn,Pn.v7_prependBasename,rn,Pn.v7_relativeSplatPath,gn==null?void 0:gn.fromRouteId,gn==null?void 0:gn.relative),{path:Ai,submission:$i,error:Ar}=vt(Pn.v7_normalizeFormMethod,!1,Tn,gn),Dr=dn.location,vr=h(dn.location,Ai,gn&&gn.state);vr=v({},vr,me.history.encodeLocation(vr));let dr=gn&&gn.replace!=null?gn.replace:void 0,ao=g.Push;dr===!0?ao=g.Replace:dr===!1||$i!=null&&Ur($i.formMethod)&&$i.formAction===dn.location.pathname+dn.location.search&&(ao=g.Replace);let zo=gn&&"preventScrollReset"in gn?gn.preventScrollReset===!0:void 0,Yr=(gn&&gn.unstable_flushSync)===!0,mi=Js({currentLocation:Dr,nextLocation:vr,historyAction:ao});if(mi){Ks(mi,{state:"blocked",location:vr,proceed(){Ks(mi,{state:"proceeding",proceed:void 0,reset:void 0,location:vr}),Ml(rn,gn)},reset(){let rr=new Map(dn.blockers);rr.set(mi,tn),La({blockers:rr})}});return}return await vs(ao,vr,{submission:$i,pendingError:Ar,preventScrollReset:zo,replace:gn&&gn.replace,enableViewTransition:gn&&gn.unstable_viewTransition,flushSync:Yr})}n(Ml,"navigate");function Ms(){if(gl(),La({revalidation:"loading"}),dn.navigation.state!=="submitting"){if(dn.navigation.state==="idle"){vs(dn.historyAction,dn.location,{startUninterruptedRevalidation:!0});return}vs(fo||dn.historyAction,dn.navigation.location,{overrideNavigation:dn.navigation})}}n(Ms,"revalidate");async function vs(rn,gn,Tn){fr&&fr.abort(),fr=null,fo=rn,la=(Tn&&Tn.startUninterruptedRevalidation)===!0,hr(dn.location,dn.matches),to=(Tn&&Tn.preventScrollReset)===!0,xo=(Tn&&Tn.enableViewTransition)===!0;let Ai=yn||jt,$i=Tn&&Tn.overrideNavigation,Ar=w(Ai,gn,Sn),Dr=(Tn&&Tn.flushSync)===!0;if(!Ar){let rr=qi(404,{pathname:gn.pathname}),{matches:ti,route:ga}=ki(Ai);Cs(),gs(gn,{matches:ti,loaderData:{},errors:{[ga.id]:rr}},{flushSync:Dr});return}if(dn.initialized&&!ps&&Xn(dn.location,gn)&&!(Tn&&Tn.submission&&Ur(Tn.submission.formMethod))){gs(gn,{matches:Ar},{flushSync:Dr});return}fr=new AbortController;let vr=pn(me.history,gn,fr.signal,Tn&&Tn.submission),dr,ao;if(Tn&&Tn.pendingError)ao={[or(Ar).route.id]:Tn.pendingError};else if(Tn&&Tn.submission&&Ur(Tn.submission.formMethod)){let rr=await Pl(vr,gn,Tn.submission,Ar,{replace:Tn.replace,flushSync:Dr});if(rr.shortCircuited)return;dr=rr.pendingActionData,ao=rr.pendingActionError,$i=V(gn,Tn.submission),Dr=!1,vr=new Request(vr.url,{signal:vr.signal})}let{shortCircuited:zo,loaderData:Yr,errors:mi}=await rl(vr,gn,Ar,$i,Tn&&Tn.submission,Tn&&Tn.fetcherSubmission,Tn&&Tn.replace,Tn&&Tn.initialHydration===!0,Dr,dr,ao);zo||(fr=null,gs(gn,v({matches:Ar},dr?{actionData:dr}:{},{loaderData:Yr,errors:mi})))}n(vs,"startNavigation");async function Pl(rn,gn,Tn,Ai,$i){$i===void 0&&($i={}),gl();let Ar=we(gn,Tn);La({navigation:Ar},{flushSync:$i.flushSync===!0});let Dr,vr=$r(Ai,gn);if(!vr.route.action&&!vr.route.lazy)Dr={type:S.error,error:qi(405,{method:rn.method,pathname:gn.pathname,routeId:vr.route.id})};else if(Dr=await Xt("action",rn,vr,Ai,Yt,Et,Sn,Pn.v7_relativeSplatPath),rn.signal.aborted)return{shortCircuited:!0};if(pi(Dr)){let dr;return $i&&$i.replace!=null?dr=$i.replace:dr=Dr.location===dn.location.pathname+dn.location.search,await zs(dn,Dr,{submission:Tn,replace:dr}),{shortCircuited:!0}}if(Ni(Dr)){let dr=or(Ai,vr.route.id);return($i&&$i.replace)!==!0&&(fo=g.Push),{pendingActionData:{},pendingActionError:{[dr.route.id]:Dr.error}}}if(Dn(Dr))throw qi(400,{type:"defer-action"});return{pendingActionData:{[vr.route.id]:Dr.data}}}n(Pl,"handleAction");async function rl(rn,gn,Tn,Ai,$i,Ar,Dr,vr,dr,ao,zo){let Yr=Ai||V(gn,$i),mi=$i||Ar||Vo(Yr),rr=yn||jt,[ti,ga]=Ye(me.history,dn,Tn,mi,gn,Pn.v7_partialHydration&&vr===!0,ps,_s,As,Ya,Ds,rs,rr,Sn,ao,zo);if(Cs(To=>!(Tn&&Tn.some(Po=>Po.route.id===To))||ti&&ti.some(Po=>Po.route.id===To)),Ws=++il,ti.length===0&&ga.length===0){let To=Ll();return gs(gn,v({matches:Tn,loaderData:{},errors:zo||null},ao?{actionData:ao}:{},To?{fetchers:new Map(dn.fetchers)}:{}),{flushSync:dr}),{shortCircuited:!0}}if(!la&&(!Pn.v7_partialHydration||!vr)){ga.forEach(Po=>{let Ha=dn.fetchers.get(Po.key),yl=ct(void 0,Ha?Ha.data:void 0);dn.fetchers.set(Po.key,yl)});let To=ao||dn.actionData;La(v({navigation:Yr},To?Object.keys(To).length===0?{actionData:null}:{actionData:To}:{},ga.length>0?{fetchers:new Map(dn.fetchers)}:{}),{flushSync:dr})}ga.forEach(To=>{aa.has(To.key)&&os(To.key),To.controller&&aa.set(To.key,To.controller)});let ks=n(()=>ga.forEach(To=>os(To.key)),"abortPendingFetchRevalidations");fr&&fr.signal.addEventListener("abort",ks);let{results:Bl,loaderResults:Ys,fetcherResults:as}=await ml(dn.matches,Tn,ti,ga,rn);if(rn.signal.aborted)return{shortCircuited:!0};fr&&fr.signal.removeEventListener("abort",ks),ga.forEach(To=>aa.delete(To.key));let Va=Or(Bl);if(Va){if(Va.idx>=ti.length){let To=ga[Va.idx-ti.length].key;rs.add(To)}return await zs(dn,Va.result,{replace:Dr}),{shortCircuited:!0}}let{loaderData:Ul,errors:Xs}=no(dn,Tn,ti,Ys,zo,ga,as,Ua);Ua.forEach((To,Po)=>{To.subscribe(Ha=>{(Ha||To.done)&&Ua.delete(Po)})}),Pn.v7_partialHydration&&vr&&dn.errors&&Object.entries(dn.errors).filter(To=>{let[Po]=To;return!ti.some(Ha=>Ha.route.id===Po)}).forEach(To=>{let[Po,Ha]=To;Xs=Object.assign(Xs||{},{[Po]:Ha})});let Vl=Ll(),Qs=$s(Ws),Zs=Vl||Qs||ga.length>0;return v({loaderData:Ul,errors:Xs},Zs?{fetchers:new Map(dn.fetchers)}:{})}n(rl,"handleLoaders");function ec(rn,gn,Tn,Ai){if(ot)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");aa.has(rn)&&os(rn);let $i=(Ai&&Ai.unstable_flushSync)===!0,Ar=yn||jt,Dr=Ke(dn.location,dn.matches,Sn,Pn.v7_prependBasename,Tn,Pn.v7_relativeSplatPath,gn,Ai==null?void 0:Ai.relative),vr=w(Ar,Dr,Sn);if(!vr){Ps(rn,gn,qi(404,{pathname:Dr}),{flushSync:$i});return}let{path:dr,submission:ao,error:zo}=vt(Pn.v7_normalizeFormMethod,!0,Dr,Ai);if(zo){Ps(rn,gn,zo,{flushSync:$i});return}let Yr=$r(vr,dr);if(to=(Ai&&Ai.preventScrollReset)===!0,ao&&Ur(ao.formMethod)){ol(rn,gn,dr,Yr,vr,$i,ao);return}Ds.set(rn,{routeId:gn,path:dr}),al(rn,gn,dr,Yr,vr,$i,ao)}n(ec,"fetch");async function ol(rn,gn,Tn,Ai,$i,Ar,Dr){if(gl(),Ds.delete(rn),!Ai.route.action&&!Ai.route.lazy){let Po=qi(405,{method:Dr.formMethod,pathname:Tn,routeId:gn});Ps(rn,gn,Po,{flushSync:Ar});return}let vr=dn.fetchers.get(rn);ys(rn,Wt(Dr,vr),{flushSync:Ar});let dr=new AbortController,ao=pn(me.history,Tn,dr.signal,Dr);aa.set(rn,dr);let zo=il,Yr=await Xt("action",ao,Ai,$i,Yt,Et,Sn,Pn.v7_relativeSplatPath);if(ao.signal.aborted){aa.get(rn)===dr&&aa.delete(rn);return}if(Pn.v7_fetcherPersist&&Ya.has(rn)){if(pi(Yr)||Ni(Yr)){ys(rn,On(void 0));return}}else{if(pi(Yr))if(aa.delete(rn),Ws>zo){ys(rn,On(void 0));return}else return rs.add(rn),ys(rn,ct(Dr)),zs(dn,Yr,{fetcherSubmission:Dr});if(Ni(Yr)){Ps(rn,gn,Yr.error);return}}if(Dn(Yr))throw qi(400,{type:"defer-action"});let mi=dn.navigation.location||dn.location,rr=pn(me.history,mi,dr.signal),ti=yn||jt,ga=dn.navigation.state!=="idle"?w(ti,dn.navigation.location,Sn):dn.matches;t(ga,"Didn't find any matches after fetcher action");let ks=++il;is.set(rn,ks);let Bl=ct(Dr,Yr.data);dn.fetchers.set(rn,Bl);let[Ys,as]=Ye(me.history,dn,ga,Dr,mi,!1,ps,_s,As,Ya,Ds,rs,ti,Sn,{[Ai.route.id]:Yr.data},void 0);as.filter(Po=>Po.key!==rn).forEach(Po=>{let Ha=Po.key,yl=dn.fetchers.get(Ha),iu=ct(void 0,yl?yl.data:void 0);dn.fetchers.set(Ha,iu),aa.has(Ha)&&os(Ha),Po.controller&&aa.set(Ha,Po.controller)}),La({fetchers:new Map(dn.fetchers)});let Va=n(()=>as.forEach(Po=>os(Po.key)),"abortPendingFetchRevalidations");dr.signal.addEventListener("abort",Va);let{results:Ul,loaderResults:Xs,fetcherResults:Vl}=await ml(dn.matches,ga,Ys,as,rr);if(dr.signal.aborted)return;dr.signal.removeEventListener("abort",Va),is.delete(rn),aa.delete(rn),as.forEach(Po=>aa.delete(Po.key));let Qs=Or(Ul);if(Qs){if(Qs.idx>=Ys.length){let Po=as[Qs.idx-Ys.length].key;rs.add(Po)}return zs(dn,Qs.result)}let{loaderData:Zs,errors:To}=no(dn,dn.matches,Ys,Xs,void 0,as,Vl,Ua);if(dn.fetchers.has(rn)){let Po=On(Yr.data);dn.fetchers.set(rn,Po)}$s(ks),dn.navigation.state==="loading"&&ks>Ws?(t(fo,"Expected pending action"),fr&&fr.abort(),gs(dn.navigation.location,{matches:ga,loaderData:Zs,errors:To,fetchers:new Map(dn.fetchers)})):(La({errors:To,loaderData:Vi(dn.loaderData,Zs,ga,To),fetchers:new Map(dn.fetchers)}),ps=!1)}n(ol,"handleFetcherAction");async function al(rn,gn,Tn,Ai,$i,Ar,Dr){let vr=dn.fetchers.get(rn);ys(rn,ct(Dr,vr?vr.data:void 0),{flushSync:Ar});let dr=new AbortController,ao=pn(me.history,Tn,dr.signal);aa.set(rn,dr);let zo=il,Yr=await Xt("loader",ao,Ai,$i,Yt,Et,Sn,Pn.v7_relativeSplatPath);if(Dn(Yr)&&(Yr=await ur(Yr,ao.signal,!0)||Yr),aa.get(rn)===dr&&aa.delete(rn),!ao.signal.aborted){if(Ya.has(rn)){ys(rn,On(void 0));return}if(pi(Yr))if(Ws>zo){ys(rn,On(void 0));return}else{rs.add(rn),await zs(dn,Yr);return}if(Ni(Yr)){Ps(rn,gn,Yr.error);return}t(!Dn(Yr),"Unhandled fetcher deferred data"),ys(rn,On(Yr.data))}}n(al,"handleFetcherLoader");async function zs(rn,gn,Tn){let{submission:Ai,fetcherSubmission:$i,replace:Ar}=Tn===void 0?{}:Tn;gn.revalidate&&(ps=!0);let Dr=h(rn.location,gn.location,{_isRedirect:!0});if(t(Dr,"Expected a location on the redirect navigation"),$e){let mi=!1;if(gn.reloadDocument)mi=!0;else if(xe.test(gn.location)){const rr=me.history.createURL(gn.location);mi=rr.origin!==Ie.location.origin||De(rr.pathname,Sn)==null}if(mi){Ar?Ie.location.replace(gn.location):Ie.location.assign(gn.location);return}}fr=null;let vr=Ar===!0?g.Replace:g.Push,{formMethod:dr,formAction:ao,formEncType:zo}=rn.navigation;!Ai&&!$i&&dr&&ao&&zo&&(Ai=Vo(rn.navigation));let Yr=Ai||$i;if(Ot.has(gn.status)&&Yr&&Ur(Yr.formMethod))await vs(vr,Dr,{submission:v({},Yr,{formAction:gn.location}),preventScrollReset:to});else{let mi=V(Dr,Ai);await vs(vr,Dr,{overrideNavigation:mi,fetcherSubmission:$i,preventScrollReset:to})}}n(zs,"startRedirectNavigation");async function ml(rn,gn,Tn,Ai,$i){let Ar=await Promise.all([...Tn.map(dr=>Xt("loader",$i,dr,gn,Yt,Et,Sn,Pn.v7_relativeSplatPath)),...Ai.map(dr=>dr.matches&&dr.match&&dr.controller?Xt("loader",pn(me.history,dr.path,dr.controller.signal),dr.match,dr.matches,Yt,Et,Sn,Pn.v7_relativeSplatPath):{type:S.error,error:qi(404,{pathname:dr.path})})]),Dr=Ar.slice(0,Tn.length),vr=Ar.slice(Tn.length);return await Promise.all([io(rn,Tn,Dr,Dr.map(()=>$i.signal),!1,dn.loaderData),io(rn,Ai.map(dr=>dr.match),vr,Ai.map(dr=>dr.controller?dr.controller.signal:null),!0)]),{results:Ar,loaderResults:Dr,fetcherResults:vr}}n(ml,"callLoadersAndMaybeResolveData");function gl(){ps=!0,_s.push(...Cs()),Ds.forEach((rn,gn)=>{aa.has(gn)&&(As.push(gn),os(gn))})}n(gl,"interruptActiveLoads");function ys(rn,gn,Tn){Tn===void 0&&(Tn={}),dn.fetchers.set(rn,gn),La({fetchers:new Map(dn.fetchers)},{flushSync:(Tn&&Tn.flushSync)===!0})}n(ys,"updateFetcherState");function Ps(rn,gn,Tn,Ai){Ai===void 0&&(Ai={});let $i=or(dn.matches,gn);Gs(rn),La({errors:{[$i.route.id]:Tn},fetchers:new Map(dn.fetchers)},{flushSync:(Ai&&Ai.flushSync)===!0})}n(Ps,"setFetcherError");function kl(rn){return Pn.v7_fetcherPersist&&(Ts.set(rn,(Ts.get(rn)||0)+1),Ya.has(rn)&&Ya.delete(rn)),dn.fetchers.get(rn)||hn}n(kl,"getFetcher");function Gs(rn){let gn=dn.fetchers.get(rn);aa.has(rn)&&!(gn&&gn.state==="loading"&&is.has(rn))&&os(rn),Ds.delete(rn),is.delete(rn),rs.delete(rn),Ya.delete(rn),dn.fetchers.delete(rn)}n(Gs,"deleteFetcher");function vl(rn){if(Pn.v7_fetcherPersist){let gn=(Ts.get(rn)||0)-1;gn<=0?(Ts.delete(rn),Ya.add(rn)):Ts.set(rn,gn)}else Gs(rn);La({fetchers:new Map(dn.fetchers)})}n(vl,"deleteFetcherAndUpdateState");function os(rn){let gn=aa.get(rn);t(gn,"Expected fetch controller: "+rn),gn.abort(),aa.delete(rn)}n(os,"abortFetcher");function Nl(rn){for(let gn of rn){let Tn=kl(gn),Ai=On(Tn.data);dn.fetchers.set(gn,Ai)}}n(Nl,"markFetchersDone");function Ll(){let rn=[],gn=!1;for(let Tn of rs){let Ai=dn.fetchers.get(Tn);t(Ai,"Expected fetcher: "+Tn),Ai.state==="loading"&&(rs.delete(Tn),rn.push(Tn),gn=!0)}return Nl(rn),gn}n(Ll,"markFetchRedirectsDone");function $s(rn){let gn=[];for(let[Tn,Ai]of is)if(Ai<rn){let $i=dn.fetchers.get(Tn);t($i,"Expected fetcher: "+Tn),$i.state==="loading"&&(os(Tn),is.delete(Tn),gn.push(Tn))}return Nl(gn),gn.length>0}n($s,"abortStaleFetchLoads");function tc(rn,gn){let Tn=dn.blockers.get(rn)||tn;return ms.get(rn)!==gn&&ms.set(rn,gn),Tn}n(tc,"getBlocker");function xl(rn){dn.blockers.delete(rn),ms.delete(rn)}n(xl,"deleteBlocker");function Ks(rn,gn){let Tn=dn.blockers.get(rn)||tn;t(Tn.state==="unblocked"&&gn.state==="blocked"||Tn.state==="blocked"&&gn.state==="blocked"||Tn.state==="blocked"&&gn.state==="proceeding"||Tn.state==="blocked"&&gn.state==="unblocked"||Tn.state==="proceeding"&&gn.state==="unblocked","Invalid blocker state transition: "+Tn.state+" -> "+gn.state);let Ai=new Map(dn.blockers);Ai.set(rn,gn),La({blockers:Ai})}n(Ks,"updateBlocker");function Js(rn){let{currentLocation:gn,nextLocation:Tn,historyAction:Ai}=rn;if(ms.size===0)return;ms.size>1&&r(!1,"A router only supports one blocker at a time");let $i=Array.from(ms.entries()),[Ar,Dr]=$i[$i.length-1],vr=dn.blockers.get(Ar);if(!(vr&&vr.state==="proceeding")&&Dr({currentLocation:gn,nextLocation:Tn,historyAction:Ai}))return Ar}n(Js,"shouldBlockNavigation");function Cs(rn){let gn=[];return Ua.forEach((Tn,Ai)=>{(!rn||rn(Ai))&&(Tn.cancel(),gn.push(Ai),Ua.delete(Ai))}),gn}n(Cs,"cancelActiveDeferreds");function Fl(rn,gn,Tn){if(ei=rn,Si=gn,oi=Tn||null,!yi&&dn.navigation===Ht){yi=!0;let Ai=Wi(dn.location,dn.matches);Ai!=null&&La({restoreScrollPosition:Ai})}return()=>{ei=null,Si=null,oi=null}}n(Fl,"enableScrollRestoration");function sl(rn,gn){return oi&&oi(rn,gn.map(Ai=>R(Ai,dn.loaderData)))||rn.key}n(sl,"getScrollKey");function hr(rn,gn){if(ei&&Si){let Tn=sl(rn,gn);ei[Tn]=Si()}}n(hr,"saveScrollPosition");function Wi(rn,gn){if(ei){let Tn=sl(rn,gn),Ai=ei[Tn];if(typeof Ai=="number")return Ai}return null}n(Wi,"getSavedScrollPosition");function ll(rn){Yt={},yn=C(rn,Et,void 0,Yt)}return n(ll,"_internalSetRoutes"),lo={get basename(){return Sn},get future(){return Pn},get state(){return dn},get routes(){return jt},get window(){return Ie},initialize:ql,subscribe:Rl,enableScrollRestoration:Fl,navigate:Ml,fetch:ec,revalidate:Ms,createHref:rn=>me.history.createHref(rn),encodeLocation:rn=>me.history.encodeLocation(rn),getFetcher:kl,deleteFetcher:vl,dispose:pl,getBlocker:tc,deleteBlocker:xl,_internalFetchControllers:aa,_internalActiveDeferreds:Ua,_internalSetRoutes:ll},lo}n(fe,"router_createRouter");const et=Symbol("deferred");function nt(me,Ie){t(me.length>0,"You must provide a non-empty routes array to createStaticHandler");let $e={},ot=(Ie?Ie.basename:null)||"/",Et;if(Ie!=null&&Ie.mapRouteProperties)Et=Ie.mapRouteProperties;else if(Ie!=null&&Ie.detectErrorBoundary){let ei=Ie.detectErrorBoundary;Et=n(oi=>({hasErrorBoundary:ei(oi)}),"mapRouteProperties")}else Et=Dt;let Yt=v({v7_relativeSplatPath:!1,v7_throwAbortReason:!1},Ie?Ie.future:null),jt=C(me,Et,void 0,$e);async function yn(ei,oi){let{requestContext:Si}=oi===void 0?{}:oi,yi=new URL(ei.url),li=ei.method,Yn=h("",p(yi),null,"default"),Gi=w(jt,Yn,ot);if(!mr(li)&&li!=="HEAD"){let oo=qi(405,{method:li}),{matches:lo,route:dn}=ki(jt);return{basename:ot,location:Yn,matches:lo,loaderData:{},actionData:null,errors:{[dn.id]:oo},statusCode:oo.status,loaderHeaders:{},actionHeaders:{},activeDeferreds:null}}else if(!Gi){let oo=qi(404,{pathname:Yn.pathname}),{matches:lo,route:dn}=ki(jt);return{basename:ot,location:Yn,matches:lo,loaderData:{},actionData:null,errors:{[dn.id]:oo},statusCode:oo.status,loaderHeaders:{},actionHeaders:{},activeDeferreds:null}}let Wr=await Pn(ei,Yn,Gi,Si);return br(Wr)?Wr:v({location:Yn,basename:ot},Wr)}n(yn,"query");async function Sn(ei,oi){let{routeId:Si,requestContext:yi}=oi===void 0?{}:oi,li=new URL(ei.url),Yn=ei.method,Gi=h("",p(li),null,"default"),Wr=w(jt,Gi,ot);if(!mr(Yn)&&Yn!=="HEAD"&&Yn!=="OPTIONS")throw qi(405,{method:Yn});if(!Wr)throw qi(404,{pathname:Gi.pathname});let oo=Si?Wr.find(to=>to.route.id===Si):$r(Wr,Gi);if(Si&&!oo)throw qi(403,{pathname:Gi.pathname,routeId:Si});if(!oo)throw qi(404,{pathname:Gi.pathname});let lo=await Pn(ei,Gi,Wr,yi,oo);if(br(lo))return lo;let dn=lo.errors?Object.values(lo.errors)[0]:void 0;if(dn!==void 0)throw dn;if(lo.actionData)return Object.values(lo.actionData)[0];if(lo.loaderData){var fo;let to=Object.values(lo.loaderData)[0];return(fo=lo.activeDeferreds)!=null&&fo[oo.route.id]&&(to[et]=lo.activeDeferreds[oo.route.id]),to}}n(Sn,"queryRoute");async function Pn(ei,oi,Si,yi,li){t(ei.signal,"query()/queryRoute() requests must contain an AbortController signal");try{if(Ur(ei.method.toLowerCase()))return await In(ei,Si,li||$r(Si,oi),yi,li!=null);let Yn=await Jn(ei,Si,yi,li);return br(Yn)?Yn:v({},Yn,{actionData:null,actionHeaders:{}})}catch(Yn){if(pr(Yn)){if(Yn.type===S.error)throw Yn.response;return Yn.response}if(zr(Yn))return Yn;throw Yn}}n(Pn,"queryImpl");async function In(ei,oi,Si,yi,li){let Yn;if(!Si.route.action&&!Si.route.lazy){let oo=qi(405,{method:ei.method,pathname:new URL(ei.url).pathname,routeId:Si.route.id});if(li)throw oo;Yn={type:S.error,error:oo}}else Yn=await Xt("action",ei,Si,oi,$e,Et,ot,Yt.v7_relativeSplatPath,{isStaticRequest:!0,isRouteRequest:li,requestContext:yi}),ei.signal.aborted&&kt(ei,li,Yt);if(pi(Yn))throw new Response(null,{status:Yn.status,headers:{Location:Yn.location}});if(Dn(Yn)){let oo=qi(400,{type:"defer-action"});if(li)throw oo;Yn={type:S.error,error:oo}}if(li){if(Ni(Yn))throw Yn.error;return{matches:[Si],loaderData:{},actionData:{[Si.route.id]:Yn.data},errors:null,statusCode:200,loaderHeaders:{},actionHeaders:{},activeDeferreds:null}}if(Ni(Yn)){let oo=or(oi,Si.route.id),lo=await Jn(ei,oi,yi,void 0,{[oo.route.id]:Yn.error});return v({},lo,{statusCode:Hn(Yn.error)?Yn.error.status:500,actionData:null,actionHeaders:v({},Yn.headers?{[Si.route.id]:Yn.headers}:{})})}let Gi=new Request(ei.url,{headers:ei.headers,redirect:ei.redirect,signal:ei.signal}),Wr=await Jn(Gi,oi,yi);return v({},Wr,Yn.statusCode?{statusCode:Yn.statusCode}:{},{actionData:{[Si.route.id]:Yn.data},actionHeaders:v({},Yn.headers?{[Si.route.id]:Yn.headers}:{})})}n(In,"submit");async function Jn(ei,oi,Si,yi,li){let Yn=yi!=null;if(Yn&&!(yi!=null&&yi.route.loader)&&!(yi!=null&&yi.route.lazy))throw qi(400,{method:ei.method,pathname:new URL(ei.url).pathname,routeId:yi==null?void 0:yi.route.id});let Wr=(yi?[yi]:x(oi,Object.keys(li||{})[0])).filter(to=>to.route.loader||to.route.lazy);if(Wr.length===0)return{matches:oi,loaderData:oi.reduce((to,fr)=>Object.assign(to,{[fr.route.id]:null}),{}),errors:li||null,statusCode:200,loaderHeaders:{},activeDeferreds:null};let oo=await Promise.all([...Wr.map(to=>Xt("loader",ei,to,oi,$e,Et,ot,Yt.v7_relativeSplatPath,{isStaticRequest:!0,isRouteRequest:Yn,requestContext:Si}))]);ei.signal.aborted&&kt(ei,Yn,Yt);let lo=new Map,dn=yo(oi,Wr,oo,li,lo),fo=new Set(Wr.map(to=>to.route.id));return oi.forEach(to=>{fo.has(to.route.id)||(dn.loaderData[to.route.id]=null)}),v({},dn,{matches:oi,activeDeferreds:lo.size>0?Object.fromEntries(lo.entries()):null})}return n(Jn,"loadRouteData"),{dataRoutes:jt,query:yn,queryRoute:Sn}}n(nt,"createStaticHandler");function nn(me,Ie,$e){return v({},Ie,{statusCode:Hn($e)?$e.status:500,errors:{[Ie._deepestRenderedBoundaryId||me[0].id]:$e}})}n(nn,"getStaticContextFromError");function kt(me,Ie,$e){if($e.v7_throwAbortReason&&me.signal.reason!==void 0)throw me.signal.reason;let ot=Ie?"queryRoute":"query";throw new Error(ot+"() call aborted: "+me.method+" "+me.url)}n(kt,"throwStaticHandlerAbortedError");function Jt(me){return me!=null&&("formData"in me&&me.formData!=null||"body"in me&&me.body!==void 0)}n(Jt,"isSubmissionNavigation");function Ke(me,Ie,$e,ot,Et,Yt,jt,yn){let Sn,Pn;if(jt){Sn=[];for(let Jn of Ie)if(Sn.push(Jn),Jn.route.id===jt){Pn=Jn;break}}else Sn=Ie,Pn=Ie[Ie.length-1];let In=At(Et||".",mt(Sn,Yt),De(me.pathname,$e)||me.pathname,yn==="path");return Et==null&&(In.search=me.search,In.hash=me.hash),(Et==null||Et===""||Et===".")&&Pn&&Pn.route.index&&!wo(In.search)&&(In.search=In.search?In.search.replace(/^\?/,"?index&"):"?index"),ot&&$e!=="/"&&(In.pathname=In.pathname==="/"?$e:dt([$e,In.pathname])),p(In)}n(Ke,"normalizeTo");function vt(me,Ie,$e,ot){if(!ot||!Jt(ot))return{path:$e};if(ot.formMethod&&!mr(ot.formMethod))return{path:$e,error:qi(405,{method:ot.formMethod})};let Et=n(()=>({path:$e,error:qi(400,{type:"invalid-body"})}),"getInvalidBodyError"),Yt=ot.formMethod||"get",jt=me?Yt.toUpperCase():Yt.toLowerCase(),yn=Zo($e);if(ot.body!==void 0){if(ot.formEncType==="text/plain"){if(!Ur(jt))return Et();let ei=typeof ot.body=="string"?ot.body:ot.body instanceof FormData||ot.body instanceof URLSearchParams?Array.from(ot.body.entries()).reduce((oi,Si)=>{let[yi,li]=Si;return""+oi+yi+"="+li+`
`},""):String(ot.body);return{path:$e,submission:{formMethod:jt,formAction:yn,formEncType:ot.formEncType,formData:void 0,json:void 0,text:ei}}}else if(ot.formEncType==="application/json"){if(!Ur(jt))return Et();try{let ei=typeof ot.body=="string"?JSON.parse(ot.body):ot.body;return{path:$e,submission:{formMethod:jt,formAction:yn,formEncType:ot.formEncType,formData:void 0,json:ei,text:void 0}}}catch{return Et()}}}t(typeof FormData=="function","FormData is not available in this environment");let Sn,Pn;if(ot.formData)Sn=Bi(ot.formData),Pn=ot.formData;else if(ot.body instanceof FormData)Sn=Bi(ot.body),Pn=ot.body;else if(ot.body instanceof URLSearchParams)Sn=ot.body,Pn=Gn(Sn);else if(ot.body==null)Sn=new URLSearchParams,Pn=new FormData;else try{Sn=new URLSearchParams(ot.body),Pn=Gn(Sn)}catch{return Et()}let In={formMethod:jt,formAction:yn,formEncType:ot&&ot.formEncType||"application/x-www-form-urlencoded",formData:Pn,json:void 0,text:void 0};if(Ur(In.formMethod))return{path:$e,submission:In};let Jn=d($e);return Ie&&Jn.search&&wo(Jn.search)&&Sn.append("index",""),Jn.search="?"+Sn,{path:p(Jn),submission:In}}n(vt,"normalizeNavigateOptions");function x(me,Ie){let $e=me;if(Ie){let ot=me.findIndex(Et=>Et.route.id===Ie);ot>=0&&($e=me.slice(0,ot))}return $e}n(x,"getLoaderMatchesUntilBoundary");function Ye(me,Ie,$e,ot,Et,Yt,jt,yn,Sn,Pn,In,Jn,ei,oi,Si,yi){let li=yi?Object.values(yi)[0]:Si?Object.values(Si)[0]:void 0,Yn=me.createURL(Ie.location),Gi=me.createURL(Et),Wr=yi?Object.keys(yi)[0]:void 0,lo=x($e,Wr).filter((fo,to)=>{let{route:fr}=fo;if(fr.lazy)return!0;if(fr.loader==null)return!1;if(Yt)return fr.loader.hydrate?!0:Ie.loaderData[fr.id]===void 0&&(!Ie.errors||Ie.errors[fr.id]===void 0);if(it(Ie.loaderData,Ie.matches[to],fo)||yn.some(fa=>fa===fo.route.id))return!0;let xo=Ie.matches[to],_o=fo;return ge(fo,v({currentUrl:Yn,currentParams:xo.params,nextUrl:Gi,nextParams:_o.params},ot,{actionResult:li,defaultShouldRevalidate:jt||Yn.pathname+Yn.search===Gi.pathname+Gi.search||Yn.search!==Gi.search||ft(xo,_o)}))}),dn=[];return In.forEach((fo,to)=>{if(Yt||!$e.some(la=>la.route.id===fo.routeId)||Pn.has(to))return;let fr=w(ei,fo.path,oi);if(!fr){dn.push({key:to,routeId:fo.routeId,path:fo.path,matches:null,match:null,controller:null});return}let xo=Ie.fetchers.get(to),_o=$r(fr,fo.path),fa=!1;Jn.has(to)?fa=!1:Sn.includes(to)?fa=!0:xo&&xo.state!=="idle"&&xo.data===void 0?fa=jt:fa=ge(_o,v({currentUrl:Yn,currentParams:Ie.matches[Ie.matches.length-1].params,nextUrl:Gi,nextParams:$e[$e.length-1].params},ot,{actionResult:li,defaultShouldRevalidate:jt})),fa&&dn.push({key:to,routeId:fo.routeId,path:fo.path,matches:fr,match:_o,controller:new AbortController})}),[lo,dn]}n(Ye,"getMatchesToLoad");function it(me,Ie,$e){let ot=!Ie||$e.route.id!==Ie.route.id,Et=me[$e.route.id]===void 0;return ot||Et}n(it,"isNewLoader");function ft(me,Ie){let $e=me.route.path;return me.pathname!==Ie.pathname||$e!=null&&$e.endsWith("*")&&me.params["*"]!==Ie.params["*"]}n(ft,"isNewRouteInstance");function ge(me,Ie){if(me.route.shouldRevalidate){let $e=me.route.shouldRevalidate(Ie);if(typeof $e=="boolean")return $e}return Ie.defaultShouldRevalidate}n(ge,"shouldRevalidateLoader");async function Zn(me,Ie,$e){if(!me.lazy)return;let ot=await me.lazy();if(!me.lazy)return;let Et=$e[me.id];t(Et,"No route found in manifest");let Yt={};for(let jt in ot){let Sn=Et[jt]!==void 0&&jt!=="hasErrorBoundary";r(!Sn,'Route "'+Et.id+'" has a static property "'+jt+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+jt+'" will be ignored.')),!Sn&&!b.has(jt)&&(Yt[jt]=ot[jt])}Object.assign(Et,Yt),Object.assign(Et,v({},Ie(Et),{lazy:void 0}))}n(Zn,"loadLazyRouteModule");async function Xt(me,Ie,$e,ot,Et,Yt,jt,yn,Sn){Sn===void 0&&(Sn={});let Pn,In,Jn,ei=n(yi=>{let li,Yn=new Promise((Gi,Wr)=>li=Wr);return Jn=n(()=>li(),"onReject"),Ie.signal.addEventListener("abort",Jn),Promise.race([yi({request:Ie,params:$e.params,context:Sn.requestContext}),Yn])},"runHandler");try{let yi=$e.route[me];if($e.route.lazy)if(yi){let li,Yn=await Promise.all([ei(yi).catch(Gi=>{li=Gi}),Zn($e.route,Yt,Et)]);if(li)throw li;In=Yn[0]}else if(await Zn($e.route,Yt,Et),yi=$e.route[me],yi)In=await ei(yi);else if(me==="action"){let li=new URL(Ie.url),Yn=li.pathname+li.search;throw qi(405,{method:Ie.method,pathname:Yn,routeId:$e.route.id})}else return{type:S.data,data:void 0};else if(yi)In=await ei(yi);else{let li=new URL(Ie.url),Yn=li.pathname+li.search;throw qi(404,{pathname:Yn})}t(In!==void 0,"You defined "+(me==="action"?"an action":"a loader")+" for route "+('"'+$e.route.id+"\" but didn't return anything from your `"+me+"` ")+"function. Please return a value or `null`.")}catch(yi){Pn=S.error,In=yi}finally{Jn&&Ie.signal.removeEventListener("abort",Jn)}if(br(In)){let yi=In.status;if(Mt.has(yi)){let Yn=In.headers.get("Location");if(t(Yn,"Redirects returned/thrown from loaders/actions must have a Location header"),!xe.test(Yn))Yn=Ke(new URL(Ie.url),ot.slice(0,ot.indexOf($e)+1),jt,!0,Yn,yn);else if(!Sn.isStaticRequest){let Gi=new URL(Ie.url),Wr=Yn.startsWith("//")?new URL(Gi.protocol+Yn):new URL(Yn),oo=De(Wr.pathname,jt)!=null;Wr.origin===Gi.origin&&oo&&(Yn=Wr.pathname+Wr.search+Wr.hash)}if(Sn.isStaticRequest)throw In.headers.set("Location",Yn),In;return{type:S.redirect,status:yi,location:Yn,revalidate:In.headers.get("X-Remix-Revalidate")!==null,reloadDocument:In.headers.get("X-Remix-Reload-Document")!==null}}if(Sn.isRouteRequest)throw{type:Pn===S.error?S.error:S.data,response:In};let li;try{let Yn=In.headers.get("Content-Type");Yn&&/\bapplication\/json\b/.test(Yn)?In.body==null?li=null:li=await In.json():li=await In.text()}catch(Yn){return{type:S.error,error:Yn}}return Pn===S.error?{type:Pn,error:new Ln(yi,In.statusText,li),headers:In.headers}:{type:S.data,data:li,statusCode:In.status,headers:In.headers}}if(Pn===S.error)return{type:Pn,error:In};if(ir(In)){var oi,Si;return{type:S.deferred,deferredData:In,statusCode:(oi=In.init)==null?void 0:oi.status,headers:((Si=In.init)==null?void 0:Si.headers)&&new Headers(In.init.headers)}}return{type:S.data,data:In}}n(Xt,"callLoaderOrAction");function pn(me,Ie,$e,ot){let Et=me.createURL(Zo(Ie)).toString(),Yt={signal:$e};if(ot&&Ur(ot.formMethod)){let{formMethod:jt,formEncType:yn}=ot;Yt.method=jt.toUpperCase(),yn==="application/json"?(Yt.headers=new Headers({"Content-Type":yn}),Yt.body=JSON.stringify(ot.json)):yn==="text/plain"?Yt.body=ot.text:yn==="application/x-www-form-urlencoded"&&ot.formData?Yt.body=Bi(ot.formData):Yt.body=ot.formData}return new Request(Et,Yt)}n(pn,"createClientSideRequest");function Bi(me){let Ie=new URLSearchParams;for(let[$e,ot]of me.entries())Ie.append($e,typeof ot=="string"?ot:ot.name);return Ie}n(Bi,"convertFormDataToSearchParams");function Gn(me){let Ie=new FormData;for(let[$e,ot]of me.entries())Ie.append($e,ot);return Ie}n(Gn,"convertSearchParamsToFormData");function yo(me,Ie,$e,ot,Et){let Yt={},jt=null,yn,Sn=!1,Pn={};return $e.forEach((In,Jn)=>{let ei=Ie[Jn].route.id;if(t(!pi(In),"Cannot handle redirect results in processLoaderData"),Ni(In)){let oi=or(me,ei),Si=In.error;ot&&(Si=Object.values(ot)[0],ot=void 0),jt=jt||{},jt[oi.route.id]==null&&(jt[oi.route.id]=Si),Yt[ei]=void 0,Sn||(Sn=!0,yn=Hn(In.error)?In.error.status:500),In.headers&&(Pn[ei]=In.headers)}else Dn(In)?(Et.set(ei,In.deferredData),Yt[ei]=In.deferredData.data):Yt[ei]=In.data,In.statusCode!=null&&In.statusCode!==200&&!Sn&&(yn=In.statusCode),In.headers&&(Pn[ei]=In.headers)}),ot&&(jt=ot,Yt[Object.keys(ot)[0]]=void 0),{loaderData:Yt,errors:jt,statusCode:yn||200,loaderHeaders:Pn}}n(yo,"processRouteLoaderData");function no(me,Ie,$e,ot,Et,Yt,jt,yn){let{loaderData:Sn,errors:Pn}=yo(Ie,$e,ot,Et,yn);for(let In=0;In<Yt.length;In++){let{key:Jn,match:ei,controller:oi}=Yt[In];t(jt!==void 0&&jt[In]!==void 0,"Did not find corresponding fetcher result");let Si=jt[In];if(!(oi&&oi.signal.aborted))if(Ni(Si)){let yi=or(me.matches,ei==null?void 0:ei.route.id);Pn&&Pn[yi.route.id]||(Pn=v({},Pn,{[yi.route.id]:Si.error})),me.fetchers.delete(Jn)}else if(pi(Si))t(!1,"Unhandled fetcher revalidation redirect");else if(Dn(Si))t(!1,"Unhandled fetcher deferred data");else{let yi=On(Si.data);me.fetchers.set(Jn,yi)}}return{loaderData:Sn,errors:Pn}}n(no,"processLoaderData");function Vi(me,Ie,$e,ot){let Et=v({},Ie);for(let Yt of $e){let jt=Yt.route.id;if(Ie.hasOwnProperty(jt)?Ie[jt]!==void 0&&(Et[jt]=Ie[jt]):me[jt]!==void 0&&Yt.route.loader&&(Et[jt]=me[jt]),ot&&ot.hasOwnProperty(jt))break}return Et}n(Vi,"mergeLoaderData");function or(me,Ie){return(Ie?me.slice(0,me.findIndex(ot=>ot.route.id===Ie)+1):[...me]).reverse().find(ot=>ot.route.hasErrorBoundary===!0)||me[0]}n(or,"findNearestBoundary");function ki(me){let Ie=me.length===1?me[0]:me.find($e=>$e.index||!$e.path||$e.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:Ie}],route:Ie}}n(ki,"getShortCircuitMatches");function qi(me,Ie){let{pathname:$e,routeId:ot,method:Et,type:Yt}=Ie===void 0?{}:Ie,jt="Unknown Server Error",yn="Unknown @remix-run/router error";return me===400?(jt="Bad Request",Et&&$e&&ot?yn="You made a "+Et+' request to "'+$e+'" but '+('did not provide a `loader` for route "'+ot+'", ')+"so there is no way to handle the request.":Yt==="defer-action"?yn="defer() is not supported in actions":Yt==="invalid-body"&&(yn="Unable to encode submission body")):me===403?(jt="Forbidden",yn='Route "'+ot+'" does not match URL "'+$e+'"'):me===404?(jt="Not Found",yn='No route matches URL "'+$e+'"'):me===405&&(jt="Method Not Allowed",Et&&$e&&ot?yn="You made a "+Et.toUpperCase()+' request to "'+$e+'" but '+('did not provide an `action` for route "'+ot+'", ')+"so there is no way to handle the request.":Et&&(yn='Invalid request method "'+Et.toUpperCase()+'"')),new Ln(me||500,jt,new Error(yn),!0)}n(qi,"getInternalRouterError");function Or(me){for(let Ie=me.length-1;Ie>=0;Ie--){let $e=me[Ie];if(pi($e))return{result:$e,idx:Ie}}}n(Or,"findRedirect");function Zo(me){let Ie=typeof me=="string"?d(me):me;return p(v({},Ie,{hash:""}))}n(Zo,"stripHashFromPath");function Xn(me,Ie){return me.pathname!==Ie.pathname||me.search!==Ie.search?!1:me.hash===""?Ie.hash!=="":me.hash===Ie.hash?!0:Ie.hash!==""}n(Xn,"isHashChangeOnly");function Dn(me){return me.type===S.deferred}n(Dn,"isDeferredResult");function Ni(me){return me.type===S.error}n(Ni,"isErrorResult");function pi(me){return(me&&me.type)===S.redirect}n(pi,"isRedirectResult");function ir(me){let Ie=me;return Ie&&typeof Ie=="object"&&typeof Ie.data=="object"&&typeof Ie.subscribe=="function"&&typeof Ie.cancel=="function"&&typeof Ie.resolveData=="function"}n(ir,"isDeferredData");function br(me){return me!=null&&typeof me.status=="number"&&typeof me.statusText=="string"&&typeof me.headers=="object"&&typeof me.body<"u"}n(br,"isResponse");function zr(me){if(!br(me))return!1;let Ie=me.status,$e=me.headers.get("Location");return Ie>=300&&Ie<=399&&$e!=null}n(zr,"isRedirectResponse");function pr(me){return me&&br(me.response)&&(me.type===S.data||me.type===S.error)}n(pr,"isQueryRouteResponse");function mr(me){return ie.has(me.toLowerCase())}n(mr,"isValidMethod");function Ur(me){return jn.has(me.toLowerCase())}n(Ur,"isMutationMethod");async function io(me,Ie,$e,ot,Et,Yt){for(let jt=0;jt<$e.length;jt++){let yn=$e[jt],Sn=Ie[jt];if(!Sn)continue;let Pn=me.find(Jn=>Jn.route.id===Sn.route.id),In=Pn!=null&&!ft(Pn,Sn)&&(Yt&&Yt[Sn.route.id])!==void 0;if(Dn(yn)&&(Et||In)){let Jn=ot[jt];t(Jn,"Expected an AbortSignal for revalidating fetcher deferred result"),await ur(yn,Jn,Et).then(ei=>{ei&&($e[jt]=ei||$e[jt])})}}}n(io,"resolveDeferredResults");async function ur(me,Ie,$e){if($e===void 0&&($e=!1),!await me.deferredData.resolveData(Ie)){if($e)try{return{type:S.data,data:me.deferredData.unwrappedData}}catch(Et){return{type:S.error,error:Et}}return{type:S.data,data:me.deferredData.data}}}n(ur,"resolveDeferredData");function wo(me){return new URLSearchParams(me).getAll("index").some(Ie=>Ie==="")}n(wo,"hasNakedIndexQuery");function $r(me,Ie){let $e=typeof Ie=="string"?d(Ie).search:Ie.search;if(me[me.length-1].route.index&&wo($e||""))return me[me.length-1];let ot=Ze(me);return ot[ot.length-1]}n($r,"getTargetMatch");function Vo(me){let{formMethod:Ie,formAction:$e,formEncType:ot,text:Et,formData:Yt,json:jt}=me;if(!(!Ie||!$e||!ot)){if(Et!=null)return{formMethod:Ie,formAction:$e,formEncType:ot,formData:void 0,json:void 0,text:Et};if(Yt!=null)return{formMethod:Ie,formAction:$e,formEncType:ot,formData:Yt,json:void 0,text:void 0};if(jt!==void 0)return{formMethod:Ie,formAction:$e,formEncType:ot,formData:void 0,json:jt,text:void 0}}}n(Vo,"getSubmissionFromNavigation");function V(me,Ie){return Ie?{state:"loading",location:me,formMethod:Ie.formMethod,formAction:Ie.formAction,formEncType:Ie.formEncType,formData:Ie.formData,json:Ie.json,text:Ie.text}:{state:"loading",location:me,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}n(V,"getLoadingNavigation");function we(me,Ie){return{state:"submitting",location:me,formMethod:Ie.formMethod,formAction:Ie.formAction,formEncType:Ie.formEncType,formData:Ie.formData,json:Ie.json,text:Ie.text}}n(we,"getSubmittingNavigation");function ct(me,Ie){return me?{state:"loading",formMethod:me.formMethod,formAction:me.formAction,formEncType:me.formEncType,formData:me.formData,json:me.json,text:me.text,data:Ie}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:Ie}}n(ct,"getLoadingFetcher");function Wt(me,Ie){return{state:"submitting",formMethod:me.formMethod,formAction:me.formAction,formEncType:me.formEncType,formData:me.formData,json:me.json,text:me.text,data:Ie?Ie.data:void 0}}n(Wt,"getSubmittingFetcher");function On(me){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:me}}n(On,"getDoneFetcher");function fi(me,Ie){try{let $e=me.sessionStorage.getItem(Y);if($e){let ot=JSON.parse($e);for(let[Et,Yt]of Object.entries(ot||{}))Yt&&Array.isArray(Yt)&&Ie.set(Et,new Set(Yt||[]))}}catch{}}n(fi,"restoreAppliedTransitions");function Li(me,Ie){if(Ie.size>0){let $e={};for(let[ot,Et]of Ie)$e[ot]=[...Et];try{me.sessionStorage.setItem(Y,JSON.stringify($e))}catch(ot){r(!1,"Failed to save applied view transitions in sessionStorage ("+ot+").")}}}n(Li,"persistAppliedTransitions");/**
 * React Router v6.22.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gi(){return gi=Object.assign?Object.assign.bind():function(me){for(var Ie=1;Ie<arguments.length;Ie++){var $e=arguments[Ie];for(var ot in $e)Object.prototype.hasOwnProperty.call($e,ot)&&(me[ot]=$e[ot])}return me},gi.apply(this,arguments)}n(gi,"dist_extends");const Mi=u.createContext(null),Oi=null,Yi=u.createContext(null),Cr=u.createContext(null),wr=u.createContext(null),Kr=u.createContext({outlet:null,matches:[],isDataRoute:!1}),bo=u.createContext(null);function ia(me,Ie){let{relative:$e}=Ie===void 0?{}:Ie;Fo()||UNSAFE_invariant(!1);let{basename:ot,navigator:Et}=React.useContext(Cr),{hash:Yt,pathname:jt,search:yn}=tt(me,{relative:$e}),Sn=jt;return ot!=="/"&&(Sn=jt==="/"?ot:joinPaths([ot,jt])),Et.createHref({pathname:Sn,search:yn,hash:Yt})}n(ia,"useHref");function Fo(){return u.useContext(wr)!=null}n(Fo,"useInRouterContext");function zi(){return Fo()||t(!1),u.useContext(wr).location}n(zi,"useLocation");function co(){return u.useContext(wr).navigationType}n(co,"useNavigationType");function Zr(me){Fo()||UNSAFE_invariant(!1);let{pathname:Ie}=zi();return React.useMemo(()=>matchPath(me,Ie),[Ie,me])}n(Zr,"useMatch");const Ao=null;function No(me){u.useContext(Cr).static||u.useLayoutEffect(me)}n(No,"useIsomorphicLayoutEffect");function qo(){let{isDataRoute:me}=u.useContext(Kr);return me?Qa():ca()}n(qo,"useNavigate");function ca(){Fo()||t(!1);let me=u.useContext(Mi),{basename:Ie,future:$e,navigator:ot}=u.useContext(Cr),{matches:Et}=u.useContext(Kr),{pathname:Yt}=zi(),jt=JSON.stringify(mt(Et,$e.v7_relativeSplatPath)),yn=u.useRef(!1);return No(()=>{yn.current=!0}),u.useCallback(function(Pn,In){if(In===void 0&&(In={}),!yn.current)return;if(typeof Pn=="number"){ot.go(Pn);return}let Jn=At(Pn,JSON.parse(jt),Yt,In.relative==="path");me==null&&Ie!=="/"&&(Jn.pathname=Jn.pathname==="/"?Ie:dt([Ie,Jn.pathname])),(In.replace?ot.replace:ot.push)(Jn,In.state,In)},[Ie,ot,jt,Yt,me])}n(ca,"useNavigateUnstable");const Bo=null;function ba(){return React.useContext(Bo)}n(ba,"useOutletContext");function Ho(me){let Ie=React.useContext(Kr).outlet;return Ie&&React.createElement(Bo.Provider,{value:me},Ie)}n(Ho,"useOutlet");function Fe(){let{matches:me}=u.useContext(Kr),Ie=me[me.length-1];return Ie?Ie.params:{}}n(Fe,"useParams");function tt(me,Ie){let{relative:$e}=Ie===void 0?{}:Ie,{future:ot}=React.useContext(Cr),{matches:Et}=React.useContext(Kr),{pathname:Yt}=zi(),jt=JSON.stringify(UNSAFE_getResolveToMatches(Et,ot.v7_relativeSplatPath));return React.useMemo(()=>resolveTo(me,JSON.parse(jt),Yt,$e==="path"),[me,jt,Yt,$e])}n(tt,"useResolvedPath");function It(me,Ie){return Qt(me,Ie)}n(It,"useRoutes");function Qt(me,Ie,$e,ot){Fo()||UNSAFE_invariant(!1);let{navigator:Et}=React.useContext(Cr),{matches:Yt}=React.useContext(Kr),jt=Yt[Yt.length-1],yn=jt?jt.params:{},Sn=jt?jt.pathname:"/",Pn=jt?jt.pathnameBase:"/",In=jt&&jt.route,Jn=zi(),ei;if(Ie){var oi;let Gi=typeof Ie=="string"?parsePath(Ie):Ie;Pn==="/"||(oi=Gi.pathname)!=null&&oi.startsWith(Pn)||UNSAFE_invariant(!1),ei=Gi}else ei=Jn;let Si=ei.pathname||"/",yi=Si;if(Pn!=="/"){let Gi=Pn.replace(/^\//,"").split("/");yi="/"+Si.replace(/^\//,"").split("/").slice(Gi.length).join("/")}let li=matchRoutes(me,{pathname:yi}),Yn=bi(li&&li.map(Gi=>Object.assign({},Gi,{params:Object.assign({},yn,Gi.params),pathname:joinPaths([Pn,Et.encodeLocation?Et.encodeLocation(Gi.pathname).pathname:Gi.pathname]),pathnameBase:Gi.pathnameBase==="/"?Pn:joinPaths([Pn,Et.encodeLocation?Et.encodeLocation(Gi.pathnameBase).pathname:Gi.pathnameBase])})),Yt,$e,ot);return Ie&&Yn?React.createElement(wr.Provider,{value:{location:gi({pathname:"/",search:"",hash:"",state:null,key:"default"},ei),navigationType:Action.Pop}},Yn):Yn}n(Qt,"useRoutesImpl");function cn(){let me=gr(),Ie=isRouteErrorResponse(me)?me.status+" "+me.statusText:me instanceof Error?me.message:JSON.stringify(me),$e=me instanceof Error?me.stack:null,ot="rgba(200,200,200, 0.5)",Et={padding:"0.5rem",backgroundColor:ot},Yt={padding:"2px 4px",backgroundColor:ot},jt=null;return React.createElement(React.Fragment,null,React.createElement("h2",null,"Unexpected Application Error!"),React.createElement("h3",{style:{fontStyle:"italic"}},Ie),$e?React.createElement("pre",{style:Et},$e):null,jt)}n(cn,"DefaultErrorComponent");const fn=null;class ci extends u.Component{constructor(Ie){super(Ie),this.state={location:Ie.location,revalidation:Ie.revalidation,error:Ie.error}}static getDerivedStateFromError(Ie){return{error:Ie}}static getDerivedStateFromProps(Ie,$e){return $e.location!==Ie.location||$e.revalidation!=="idle"&&Ie.revalidation==="idle"?{error:Ie.error,location:Ie.location,revalidation:Ie.revalidation}:{error:Ie.error!==void 0?Ie.error:$e.error,location:$e.location,revalidation:Ie.revalidation||$e.revalidation}}componentDidCatch(Ie,$e){console.error("React Router caught the following error during render",Ie,$e)}render(){return this.state.error!==void 0?u.createElement(Kr.Provider,{value:this.props.routeContext},u.createElement(bo.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}n(ci,"RenderErrorBoundary");function _i(me){let{routeContext:Ie,match:$e,children:ot}=me,Et=React.useContext(Mi);return Et&&Et.static&&Et.staticContext&&($e.route.errorElement||$e.route.ErrorBoundary)&&(Et.staticContext._deepestRenderedBoundaryId=$e.route.id),React.createElement(Kr.Provider,{value:Ie},ot)}n(_i,"RenderedRoute");function bi(me,Ie,$e,ot){var Et;if(Ie===void 0&&(Ie=[]),$e===void 0&&($e=null),ot===void 0&&(ot=null),me==null){var Yt;if((Yt=$e)!=null&&Yt.errors)me=$e.matches;else return null}let jt=me,yn=(Et=$e)==null?void 0:Et.errors;if(yn!=null){let In=jt.findIndex(Jn=>Jn.route.id&&(yn==null?void 0:yn[Jn.route.id]));In>=0||UNSAFE_invariant(!1),jt=jt.slice(0,Math.min(jt.length,In+1))}let Sn=!1,Pn=-1;if($e&&ot&&ot.v7_partialHydration)for(let In=0;In<jt.length;In++){let Jn=jt[In];if((Jn.route.HydrateFallback||Jn.route.hydrateFallbackElement)&&(Pn=In),Jn.route.id){let{loaderData:ei,errors:oi}=$e,Si=Jn.route.loader&&ei[Jn.route.id]===void 0&&(!oi||oi[Jn.route.id]===void 0);if(Jn.route.lazy||Si){Sn=!0,Pn>=0?jt=jt.slice(0,Pn+1):jt=[jt[0]];break}}}return jt.reduceRight((In,Jn,ei)=>{let oi,Si=!1,yi=null,li=null;$e&&(oi=yn&&Jn.route.id?yn[Jn.route.id]:void 0,yi=Jn.route.errorElement||fn,Sn&&(Pn<0&&ei===0?(Wa("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),Si=!0,li=null):Pn===ei&&(Si=!0,li=Jn.route.hydrateFallbackElement||null)));let Yn=Ie.concat(jt.slice(0,ei+1)),Gi=n(()=>{let Wr;return oi?Wr=yi:Si?Wr=li:Jn.route.Component?Wr=React.createElement(Jn.route.Component,null):Jn.route.element?Wr=Jn.route.element:Wr=In,React.createElement(_i,{match:Jn,routeContext:{outlet:In,matches:Yn,isDataRoute:$e!=null},children:Wr})},"getChildren");return $e&&(Jn.route.ErrorBoundary||Jn.route.errorElement||ei===0)?React.createElement(ci,{location:$e.location,revalidation:$e.revalidation,component:yi,error:oi,children:Gi(),routeContext:{outlet:null,matches:Yn,isDataRoute:!0}}):Gi()},null)}n(bi,"_renderMatches");var si=function(me){return me.UseBlocker="useBlocker",me.UseRevalidator="useRevalidator",me.UseNavigateStable="useNavigate",me}(si||{}),Ui=function(me){return me.UseBlocker="useBlocker",me.UseLoaderData="useLoaderData",me.UseActionData="useActionData",me.UseRouteError="useRouteError",me.UseNavigation="useNavigation",me.UseRouteLoaderData="useRouteLoaderData",me.UseMatches="useMatches",me.UseRevalidator="useRevalidator",me.UseNavigateStable="useNavigate",me.UseRouteId="useRouteId",me}(Ui||{});function Nn(me){return me+" must be used within a data router.  See https://reactrouter.com/routers/picking-a-router."}n(Nn,"getDataRouterConsoleError");function Sr(me){let Ie=u.useContext(Mi);return Ie||t(!1),Ie}n(Sr,"useDataRouterContext");function wi(me){let Ie=React.useContext(Oi);return Ie||UNSAFE_invariant(!1),Ie}n(wi,"useDataRouterState");function qr(me){let Ie=u.useContext(Kr);return Ie||t(!1),Ie}n(qr,"useRouteContext");function uo(me){let Ie=qr(me),$e=Ie.matches[Ie.matches.length-1];return $e.route.id||t(!1),$e.route.id}n(uo,"useCurrentRouteId");function go(){return uo(Ui.UseRouteId)}n(go,"useRouteId");function ji(){return wi(Ui.UseNavigation).navigation}n(ji,"useNavigation");function Qi(){let me=Sr(si.UseRevalidator),Ie=wi(Ui.UseRevalidator);return React.useMemo(()=>({revalidate:me.router.revalidate,state:Ie.revalidation}),[me.router.revalidate,Ie.revalidation])}n(Qi,"useRevalidator");function _r(){let{matches:me,loaderData:Ie}=wi(Ui.UseMatches);return React.useMemo(()=>me.map($e=>UNSAFE_convertRouteMatchToUiMatch($e,Ie)),[me,Ie])}n(_r,"useMatches");function Jr(){let me=wi(Ui.UseLoaderData),Ie=uo(Ui.UseLoaderData);if(me.errors&&me.errors[Ie]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+Ie+")");return}return me.loaderData[Ie]}n(Jr,"useLoaderData");function jo(me){return wi(Ui.UseRouteLoaderData).loaderData[me]}n(jo,"useRouteLoaderData");function ea(){let me=wi(Ui.UseActionData),Ie=uo(Ui.UseLoaderData);return me.actionData?me.actionData[Ie]:void 0}n(ea,"useActionData");function gr(){var me;let Ie=React.useContext(bo),$e=wi(Ui.UseRouteError),ot=uo(Ui.UseRouteError);return Ie!==void 0?Ie:(me=$e.errors)==null?void 0:me[ot]}n(gr,"useRouteError");function ua(){let me=React.useContext(Yi);return me==null?void 0:me._data}n(ua,"useAsyncValue");function so(){let me=React.useContext(Yi);return me==null?void 0:me._error}n(so,"useAsyncError");let Jo=0;function $a(me){let{router:Ie,basename:$e}=Sr(si.UseBlocker),ot=wi(Ui.UseBlocker),[Et,Yt]=React.useState(""),jt=React.useCallback(yn=>{if(typeof me!="function")return!!me;if($e==="/")return me(yn);let{currentLocation:Sn,nextLocation:Pn,historyAction:In}=yn;return me({currentLocation:gi({},Sn,{pathname:stripBasename(Sn.pathname,$e)||Sn.pathname}),nextLocation:gi({},Pn,{pathname:stripBasename(Pn.pathname,$e)||Pn.pathname}),historyAction:In})},[$e,me]);return React.useEffect(()=>{let yn=String(++Jo);return Yt(yn),()=>Ie.deleteBlocker(yn)},[Ie]),React.useEffect(()=>{Et!==""&&Ie.getBlocker(Et,jt)},[Ie,Et,jt]),Et&&ot.blockers.has(Et)?ot.blockers.get(Et):IDLE_BLOCKER}n($a,"useBlocker");function Qa(){let{router:me}=Sr(si.UseNavigateStable),Ie=uo(Ui.UseNavigateStable),$e=u.useRef(!1);return No(()=>{$e.current=!0}),u.useCallback(function(Et,Yt){Yt===void 0&&(Yt={}),$e.current&&(typeof Et=="number"?me.navigate(Et):me.navigate(Et,gi({fromRouteId:Ie},Yt)))},[me,Ie])}n(Qa,"useNavigateStable");const _a={};function Wa(me,Ie,$e){!Ie&&!_a[me]&&(_a[me]=!0)}n(Wa,"warningOnce");const Na=m["startTransition"];function sa(me){let{fallbackElement:Ie,router:$e,future:ot}=me,[Et,Yt]=React.useState($e.state),{v7_startTransition:jt}=ot||{},yn=React.useCallback(Jn=>{jt&&Na?Na(()=>Yt(Jn)):Yt(Jn)},[Yt,jt]);React.useLayoutEffect(()=>$e.subscribe(yn),[$e,yn]),React.useEffect(()=>{},[]);let Sn=React.useMemo(()=>({createHref:$e.createHref,encodeLocation:$e.encodeLocation,go:Jn=>$e.navigate(Jn),push:(Jn,ei,oi)=>$e.navigate(Jn,{state:ei,preventScrollReset:oi==null?void 0:oi.preventScrollReset}),replace:(Jn,ei,oi)=>$e.navigate(Jn,{replace:!0,state:ei,preventScrollReset:oi==null?void 0:oi.preventScrollReset})}),[$e]),Pn=$e.basename||"/",In=React.useMemo(()=>({router:$e,navigator:Sn,static:!1,basename:Pn}),[$e,Sn,Pn]);return React.createElement(React.Fragment,null,React.createElement(Mi.Provider,{value:In},React.createElement(Oi.Provider,{value:Et},React.createElement(Ta,{basename:Pn,location:Et.location,navigationType:Et.historyAction,navigator:Sn,future:{v7_relativeSplatPath:$e.future.v7_relativeSplatPath}},Et.initialized||$e.future.v7_partialHydration?React.createElement(pa,{routes:$e.routes,future:$e.future,state:Et}):Ie))),null)}n(sa,"RouterProvider");function pa(me){let{routes:Ie,future:$e,state:ot}=me;return Qt(Ie,void 0,ot,$e)}n(pa,"DataRoutes");function Ka(me){let{basename:Ie,children:$e,initialEntries:ot,initialIndex:Et,future:Yt}=me,jt=React.useRef();jt.current==null&&(jt.current=createMemoryHistory({initialEntries:ot,initialIndex:Et,v5Compat:!0}));let yn=jt.current,[Sn,Pn]=React.useState({action:yn.action,location:yn.location}),{v7_startTransition:In}=Yt||{},Jn=React.useCallback(ei=>{In&&Na?Na(()=>Pn(ei)):Pn(ei)},[Pn,In]);return React.useLayoutEffect(()=>yn.listen(Jn),[yn,Jn]),React.createElement(Ta,{basename:Ie,children:$e,location:Sn.location,navigationType:Sn.action,navigator:yn,future:Yt})}n(Ka,"MemoryRouter");function Lo(me){let{to:Ie,replace:$e,state:ot,relative:Et}=me;Fo()||UNSAFE_invariant(!1);let{future:Yt,static:jt}=React.useContext(Cr),{matches:yn}=React.useContext(Kr),{pathname:Sn}=zi(),Pn=qo(),In=resolveTo(Ie,UNSAFE_getResolveToMatches(yn,Yt.v7_relativeSplatPath),Sn,Et==="path"),Jn=JSON.stringify(In);return React.useEffect(()=>Pn(JSON.parse(Jn),{replace:$e,state:ot,relative:Et}),[Pn,Jn,Et,$e,ot]),null}n(Lo,"Navigate");function ma(me){return Ho(me.context)}n(ma,"Outlet");function Ja(me){UNSAFE_invariant(!1)}n(Ja,"Route");function Ta(me){let{basename:Ie="/",children:$e=null,location:ot,navigationType:Et=Action.Pop,navigator:Yt,static:jt=!1,future:yn}=me;Fo()&&UNSAFE_invariant(!1);let Sn=Ie.replace(/^\/*/,"/"),Pn=React.useMemo(()=>({basename:Sn,navigator:Yt,static:jt,future:gi({v7_relativeSplatPath:!1},yn)}),[Sn,yn,Yt,jt]);typeof ot=="string"&&(ot=parsePath(ot));let{pathname:In="/",search:Jn="",hash:ei="",state:oi=null,key:Si="default"}=ot,yi=React.useMemo(()=>{let li=stripBasename(In,Sn);return li==null?null:{location:{pathname:li,search:Jn,hash:ei,state:oi,key:Si},navigationType:Et}},[Sn,In,Jn,ei,oi,Si,Et]);return yi==null?null:React.createElement(Cr.Provider,{value:Pn},React.createElement(wr.Provider,{children:$e,value:yi}))}n(Ta,"Router");function ns(me){let{children:Ie,location:$e}=me;return It(Uo(Ie),$e)}n(ns,"Routes");function bs(me){let{children:Ie,errorElement:$e,resolve:ot}=me;return React.createElement(So,{resolve:ot,errorElement:$e},React.createElement(Wo,null,Ie))}n(bs,"Await");var da=function(me){return me[me.pending=0]="pending",me[me.success=1]="success",me[me.error=2]="error",me}(da||{});const fs=new Promise(()=>{});class So extends u.Component{constructor(Ie){super(Ie),this.state={error:null}}static getDerivedStateFromError(Ie){return{error:Ie}}componentDidCatch(Ie,$e){console.error("<Await> caught the following error during render",Ie,$e)}render(){let{children:Ie,errorElement:$e,resolve:ot}=this.props,Et=null,Yt=da.pending;if(!(ot instanceof Promise))Yt=da.success,Et=Promise.resolve(),Object.defineProperty(Et,"_tracked",{get:()=>!0}),Object.defineProperty(Et,"_data",{get:()=>ot});else if(this.state.error){Yt=da.error;let jt=this.state.error;Et=Promise.reject().catch(()=>{}),Object.defineProperty(Et,"_tracked",{get:()=>!0}),Object.defineProperty(Et,"_error",{get:()=>jt})}else ot._tracked?(Et=ot,Yt=Et._error!==void 0?da.error:Et._data!==void 0?da.success:da.pending):(Yt=da.pending,Object.defineProperty(ot,"_tracked",{get:()=>!0}),Et=ot.then(jt=>Object.defineProperty(ot,"_data",{get:()=>jt}),jt=>Object.defineProperty(ot,"_error",{get:()=>jt})));if(Yt===da.error&&Et._error instanceof sn)throw fs;if(Yt===da.error&&!$e)throw Et._error;if(Yt===da.error)return u.createElement(Yi.Provider,{value:Et,children:$e});if(Yt===da.success)return u.createElement(Yi.Provider,{value:Et,children:Ie});throw Et}}n(So,"AwaitErrorBoundary");function Wo(me){let{children:Ie}=me,$e=ua(),ot=typeof Ie=="function"?Ie($e):Ie;return React.createElement(React.Fragment,null,ot)}n(Wo,"ResolveAwait");function Uo(me,Ie){Ie===void 0&&(Ie=[]);let $e=[];return React.Children.forEach(me,(ot,Et)=>{if(!React.isValidElement(ot))return;let Yt=[...Ie,Et];if(ot.type===React.Fragment){$e.push.apply($e,Uo(ot.props.children,Yt));return}ot.type!==Ja&&UNSAFE_invariant(!1),!ot.props.index||!ot.props.children||UNSAFE_invariant(!1);let jt={id:ot.props.id||Yt.join("-"),caseSensitive:ot.props.caseSensitive,element:ot.props.element,Component:ot.props.Component,index:ot.props.index,path:ot.props.path,loader:ot.props.loader,action:ot.props.action,errorElement:ot.props.errorElement,ErrorBoundary:ot.props.ErrorBoundary,hasErrorBoundary:ot.props.ErrorBoundary!=null||ot.props.errorElement!=null,shouldRevalidate:ot.props.shouldRevalidate,handle:ot.props.handle,lazy:ot.props.lazy};ot.props.children&&(jt.children=Uo(ot.props.children,Yt)),$e.push(jt)}),$e}n(Uo,"createRoutesFromChildren");function ra(me){return bi(me)}n(ra,"renderMatches");function oa(me){let Ie={hasErrorBoundary:me.ErrorBoundary!=null||me.errorElement!=null};return me.Component&&Object.assign(Ie,{element:React.createElement(me.Component),Component:void 0}),me.HydrateFallback&&Object.assign(Ie,{hydrateFallbackElement:React.createElement(me.HydrateFallback),HydrateFallback:void 0}),me.ErrorBoundary&&Object.assign(Ie,{errorElement:React.createElement(me.ErrorBoundary),ErrorBoundary:void 0}),Ie}n(oa,"mapRouteProperties");function hs(me,Ie){return createRouter({basename:Ie==null?void 0:Ie.basename,future:gi({},Ie==null?void 0:Ie.future,{v7_prependBasename:!0}),history:createMemoryHistory({initialEntries:Ie==null?void 0:Ie.initialEntries,initialIndex:Ie==null?void 0:Ie.initialIndex}),hydrationData:Ie==null?void 0:Ie.hydrationData,routes:me,mapRouteProperties:oa}).initialize()}n(hs,"createMemoryRouter")},7763652800:(H,l,c)=>{"use strict";c.d(l,{P:()=>m});function u(g){return n(({dispatch:a,getState:i})=>e=>t=>typeof t=="function"?t(a,i,g):e(t),"middleware")}n(u,"createThunkMiddleware");var m=u(),v=null},4473827453:()=>{(function(){var H=["user-blocking","user-visible","background"];class l{constructor(){this.channel_=new MessageChannel,this.sendPort_=this.channel_.port2,this.messages_={},this.nextMessageHandle_=1,this.channel_.port1.onmessage=i=>this.onMessageReceived_(i)}queueCallback(i){var e=this.nextMessageHandle_++;return this.messages_[e]=i,this.sendPort_.postMessage(e),e}cancelCallback(i){delete this.messages_[i]}onMessageReceived_(i){var e=i.data;if(e in this.messages_){var t=this.messages_[e];delete this.messages_[e],t()}}}n(l,"t");function c(){return c.instance_||(c.instance_=new l),c.instance_}n(c,"i");class u{constructor(i,e,t){t===void 0&&(t=0),this.callback_=i,this.callbackType_=null,this.handle_=null,this.canceled_=!1,this.schedule_(e,t)}isIdleCallback(){return this.callbackType_===0}isMessageChannelCallback(){return this.callbackType_===2}cancel(){if(!this.canceled_)switch(this.canceled_=!0,this.callbackType_){case 0:cancelIdleCallback(this.handle_);break;case 1:clearTimeout(this.handle_);break;case 2:c().cancelCallback(this.handle_);break;default:throw new TypeError("Unknown CallbackType")}}schedule_(i,e){if(e&&e>0)return this.callbackType_=1,void(this.handle_=setTimeout(()=>{this.runCallback_()},e));if(!H.includes(i))throw new TypeError("Invalid task priority : "+i);return i==="background"&&typeof requestIdleCallback=="function"?(this.callbackType_=0,void(this.handle_=requestIdleCallback(()=>{this.runCallback_()}))):typeof MessageChannel=="function"?(this.callbackType_=2,void(this.handle_=c().queueCallback(()=>{this.runCallback_()}))):(this.callbackType_=1,void(this.handle_=setTimeout(()=>{this.runCallback_()})))}runCallback_(){this.canceled_||this.callback_()}}n(u,"s");var m=0;class v{constructor(){this.head_=null,this.tail_=null}isEmpty(){return this.head_==null}push(i){if(typeof i!="object")throw new TypeError("Task must be an Object");i.tq_sequence_=m++,this.isEmpty()?(i.tq_prev_=null,this.head_=i):(i.tq_prev_=this.tail_,this.tail_.tq_next_=i),i.tq_next_=null,this.tail_=i}takeNextTask(){if(this.isEmpty())return null;var i=this.head_;return this.remove_(i),i}merge(i,e){if(typeof e!="function")throw new TypeError("Must provide a selector function.");if(i==null)throw new Error("sourceQueue cannot be null");for(var t=this.head_,r=null,o=i.head_;o;){var f=o;if(o=o.tq_next_,e(f)){for(i.remove_(f);t&&t.tq_sequence_<f.tq_sequence_;)r=t,t=t.tq_next_;this.insert_(f,r),r=f}}}toArray(){for(var i=this.head_,e=[];i!==null;)e.push(i),i=i.tq_next_;return e}insert_(i,e){if(e!=this.tail_){var t=e?e.tq_next_:this.head_;i.tq_next_=t,t.tq_prev_=i,i.tq_prev_=e,e!=null?e.tq_next_=i:this.head_=i}else this.push(i)}remove_(i){if(i==null)throw new Error("Expected task to be non-null");i===this.head_&&(this.head_=i.tq_next_),i===this.tail_&&(this.tail_=this.tail_.tq_prev_),i.tq_next_&&(i.tq_next_.tq_prev_=i.tq_prev_),i.tq_prev_&&(i.tq_prev_.tq_next_=i.tq_next_)}}n(v,"a");class g extends Event{constructor(i,e){if(!e||!H.includes(e.previousPriority))throw new TypeError("Invalid task priority: '"+e.previousPriority+"'");super(i),this.previousPriority=e.previousPriority}}n(g,"n");class s extends AbortController{constructor(i){if(i===void 0&&(i={}),super(),i==null&&(i={}),typeof i!="object")throw new TypeError("'init' is not an object");var e,t,r=i.priority===void 0?"user-visible":i.priority;if(!H.includes(r))throw new TypeError("Invalid task priority: '"+r+"'");this.priority_=r,this.isPriorityChanging_=!1,t=(e=this).signal,Object.defineProperties(t,{priority:{get:function(){return e.priority_},enumerable:!0},onprioritychange:{value:null,writable:!0,enumerable:!0}}),t.addEventListener("prioritychange",o=>{t.onprioritychange&&t.onprioritychange(o)})}setPriority(i){if(!H.includes(i))throw new TypeError("Invalid task priority: "+i);if(this.isPriorityChanging_)throw new DOMException("","NotAllowedError");if(this.signal.priority!==i){this.isPriorityChanging_=!0;var e=this.priority_;this.priority_=i;var t=new g("prioritychange",{previousPriority:e});this.signal.dispatchEvent(t),this.isPriorityChanging_=!1}}}n(s,"l"),self.scheduler===void 0&&(self.scheduler=new class{constructor(){this.queues_={},H.forEach(a=>{this.queues_[a]=new v}),this.pendingHostCallback_=null,this.signals_=new WeakMap}postTask(a,i){if((i=Object.assign({},i)).signal!==void 0){if(i.signal===null||!("aborted"in i.signal)||typeof i.signal.addEventListener!="function")return Promise.reject(new TypeError("'signal' is not a valid 'AbortSignal'"));if(i.signal&&i.signal.priority&&!H.includes(i.signal.priority))return Promise.reject(new TypeError("Invalid task priority: '"+i.signal.priority+"'"))}if(i.priority!==void 0&&(i.priority===null||!H.includes(i.priority)))return Promise.reject(new TypeError("Invalid task priority: '"+i.priority+"'"));if(i.delay===void 0&&(i.delay=0),i.delay=Number(i.delay),i.delay<0)return Promise.reject(new TypeError("'delay' must be a positive number."));var e={callback:a,options:i,resolve:null,reject:null,hostCallback:null,abortCallback:null,onTaskCompleted:function(){this.options.signal&&this.abortCallback&&(this.options.signal.removeEventListener("abort",this.abortCallback),this.abortCallback=null)},onTaskAborted:function(){this.hostCallback&&(this.hostCallback.cancel(),this.hostCallback=null),this.options.signal.removeEventListener("abort",this.abortCallback),this.abortCallback=null,this.reject(this.options.signal.reason)},isAborted:function(){return this.options.signal&&this.options.signal.aborted}},t=new Promise((r,o)=>{e.resolve=r,e.reject=o});return this.schedule_(e),t}schedule_(a){var i=a.options.signal;if(i){if(i.aborted)return void a.reject(i.reason);a.abortCallback=()=>{a.onTaskAborted()},i.addEventListener("abort",a.abortCallback)}a.options.delay>0?a.hostCallback=new u(()=>{a.hostCallback=null,this.onTaskDelayExpired_(a)},null,a.options.delay):(this.pushTask_(a),this.scheduleHostCallbackIfNeeded_())}onTaskDelayExpired_(a){this.pushTask_(a),this.pendingHostCallback_&&(this.pendingHostCallback_.cancel(),this.pendingHostCallback_=null),this.schedulerEntryCallback_()}onPriorityChange_(a){var i=this.signals_.get(a);if(i===void 0)throw new Error("Attempting to change priority on an unregistered signal");i!==a.priority&&(this.queues_[a.priority].merge(this.queues_[i],e=>e.options.signal===a),this.signals_.set(a,a.priority))}schedulerEntryCallback_(){this.pendingHostCallback_=null,this.runNextTask_(),this.scheduleHostCallbackIfNeeded_()}scheduleHostCallbackIfNeeded_(){var a=this.nextTaskPriority_();a!=null&&(a!=="background"&&this.pendingHostCallback_&&this.pendingHostCallback_.isIdleCallback()&&(this.pendingHostCallback_.cancel(),this.pendingHostCallback_=null),this.pendingHostCallback_||(this.pendingHostCallback_=new u(()=>{this.schedulerEntryCallback_()},a,0)))}pushTask_(a){var i;if(!H.includes(i=a.options.priority?a.options.priority:a.options.signal&&a.options.signal.priority?a.options.signal.priority:"user-visible"))throw new TypeError("Invalid task priority: "+i);if(a.options.signal&&a.options.signal.priority){var e=a.options.signal;this.signals_.has(e)||(e.addEventListener("prioritychange",()=>{this.onPriorityChange_(e)}),this.signals_.set(e,e.priority))}this.queues_[i].push(a)}runNextTask_(){var a=null;do{var i=this.nextTaskPriority_();if(i==null)return;a=this.queues_[i].takeNextTask()}while(a.isAborted());try{var e=a.callback();a.resolve(e)}catch(t){a.reject(t)}finally{a.onTaskCompleted()}}nextTaskPriority_(){for(var a=0;a<H.length;a++){var i=H[a];if(!this.queues_[i].isEmpty())return i}return null}},self.TaskController=s,self.TaskPriorityChangeEvent=g)})()},3803027235:()=>{/*! http://mths.be/fromcodepoint v0.2.1 by @mathias */String.fromCodePoint||function(){var H=function(){try{var m={},v=Object.defineProperty,g=v(m,m,m)&&v}catch{}return g}(),l=String.fromCharCode,c=Math.floor,u=n(function(m){var v=16384,g=[],s,a,i=-1,e=arguments.length;if(!e)return"";for(var t="";++i<e;){var r=Number(arguments[i]);if(!isFinite(r)||r<0||r>1114111||c(r)!=r)throw RangeError("Invalid code point: "+r);r<=65535?g.push(r):(r-=65536,s=(r>>10)+55296,a=r%1024+56320,g.push(s,a)),(i+1==e||g.length>v)&&(t+=l.apply(null,g),g.length=0)}return t},"fromCodePoint");H?H(String,"fromCodePoint",{value:u,configurable:!0,writable:!0}):String.fromCodePoint=u}()},8274921051:(H,l,c)=>{"use strict";c.d(l,{Q:()=>u,c:()=>m});var u;(function(v){v[v.ID=25]="ID",v[v.FRECENCY=0]="FRECENCY",v[v.RAW_FRECENCY=65]="RAW_FRECENCY",v[v.FRECENCY_BONUS=76]="FRECENCY_BONUS",v[v.FRECENCY_WEIGHT_HIT_VISITS=91]="FRECENCY_WEIGHT_HIT_VISITS",v[v.FRECENCY_HIT_COUNT=92]="FRECENCY_HIT_COUNT",v[v.FRECENCY_WEIGHT_ITEM_VISITS=93]="FRECENCY_WEIGHT_ITEM_VISITS",v[v.FRECENCY_ITEM_COUNT=94]="FRECENCY_ITEM_COUNT",v[v.FRECENCY_LOG_HIT_COUNT=105]="FRECENCY_LOG_HIT_COUNT",v[v.FRECENCY_LOG_HIT_COUNT_SCALED=106]="FRECENCY_LOG_HIT_COUNT_SCALED",v[v.FRECENCY_LOG_ITEM_COUNT=159]="FRECENCY_LOG_ITEM_COUNT",v[v.FRECENCY_LOG_ITEM_COUNT_SCALED=160]="FRECENCY_LOG_ITEM_COUNT_SCALED",v[v.FRECENCY_HIT_VISIT_DECAY_2H=162]="FRECENCY_HIT_VISIT_DECAY_2H",v[v.FRECENCY_HIT_VISIT_DECAY_7D=163]="FRECENCY_HIT_VISIT_DECAY_7D",v[v.FRECENCY_ITEM_VISIT_DECAY_2H=164]="FRECENCY_ITEM_VISIT_DECAY_2H",v[v.FRECENCY_ITEM_VISIT_DECAY_7D=165]="FRECENCY_ITEM_VISIT_DECAY_7D",v[v.FRECENCY_HIT_VISITS_4H=242]="FRECENCY_HIT_VISITS_4H",v[v.FRECENCY_HIT_VISITS_1D=243]="FRECENCY_HIT_VISITS_1D",v[v.FRECENCY_HIT_VISITS_3D=244]="FRECENCY_HIT_VISITS_3D",v[v.FRECENCY_HIT_VISITS_1W=245]="FRECENCY_HIT_VISITS_1W",v[v.FRECENCY_HIT_VISITS_1M=246]="FRECENCY_HIT_VISITS_1M",v[v.FRECENCY_HIT_VISITS_90D=247]="FRECENCY_HIT_VISITS_90D",v[v.FRECENCY_ITEM_VISITS_4H=248]="FRECENCY_ITEM_VISITS_4H",v[v.FRECENCY_ITEM_VISITS_1D=249]="FRECENCY_ITEM_VISITS_1D",v[v.FRECENCY_ITEM_VISITS_3D=250]="FRECENCY_ITEM_VISITS_3D",v[v.FRECENCY_ITEM_VISITS_1W=251]="FRECENCY_ITEM_VISITS_1W",v[v.FRECENCY_ITEM_VISITS_1M=252]="FRECENCY_ITEM_VISITS_1M",v[v.FRECENCY_ITEM_VISITS_90D=253]="FRECENCY_ITEM_VISITS_90D",v[v.TYPE_NAVIGATION_CHANNEL=2]="TYPE_NAVIGATION_CHANNEL",v[v.TYPE_NAVIGATION_LINK=172]="TYPE_NAVIGATION_LINK",v[v.TYPE_NAVIGATION_MPIM=4]="TYPE_NAVIGATION_MPIM",v[v.TYPE_NAVIGATION_MODAL=177]="TYPE_NAVIGATION_MODAL",v[v.TYPE_NAVIGATION_USER=5]="TYPE_NAVIGATION_USER",v[v.TYPE_QUERY=6]="TYPE_QUERY",v[v.TYPE_QUERY_HISTORY=7]="TYPE_QUERY_HISTORY",v[v.TYPE_EMOJI=178]="TYPE_EMOJI",v[v.ACTIVE_TOKEN_FILTER_IN=8]="ACTIVE_TOKEN_FILTER_IN",v[v.ACTIVE_TOKEN_FILTER_FROM=9]="ACTIVE_TOKEN_FILTER_FROM",v[v.ACTIVE_TOKEN_FILTER_TO=10]="ACTIVE_TOKEN_FILTER_TO",v[v.ACTIVE_TOKEN_FILTER_BEFORE=11]="ACTIVE_TOKEN_FILTER_BEFORE",v[v.ACTIVE_TOKEN_FILTER_DURING=12]="ACTIVE_TOKEN_FILTER_DURING",v[v.ACTIVE_TOKEN_FILTER_ON=13]="ACTIVE_TOKEN_FILTER_ON",v[v.ACTIVE_TOKEN_FILTER_AFTER=14]="ACTIVE_TOKEN_FILTER_AFTER",v[v.ACTIVE_TOKEN_FILTER_HAS=15]="ACTIVE_TOKEN_FILTER_HAS",v[v.ACTIVE_TOKEN_FILTER_IS=155]="ACTIVE_TOKEN_FILTER_IS",v[v.ACTIVE_TOKEN_FILTER_WITH=233]="ACTIVE_TOKEN_FILTER_WITH",v[v.ACTIVE_TOKEN_MEMBER=16]="ACTIVE_TOKEN_MEMBER",v[v.ACTIVE_TOKEN_STRING=17]="ACTIVE_TOKEN_STRING",v[v.ACTIVE_TOKEN_PHRASE=18]="ACTIVE_TOKEN_PHRASE",v[v.STRING_EXACT_MATCH=19]="STRING_EXACT_MATCH",v[v.STRING_EXACT_PREFIX_MATCH=20]="STRING_EXACT_PREFIX_MATCH",v[v.STRING_NORMAL_MATCH=21]="STRING_NORMAL_MATCH",v[v.STRING_NORMAL_PREFIX_MATCH=22]="STRING_NORMAL_PREFIX_MATCH",v[v.STRING_SAME_NUMBER_WORDS=23]="STRING_SAME_NUMBER_WORDS",v[v.EXCESS_STRING_LENGTH=24]="EXCESS_STRING_LENGTH",v[v.EXACT_MATCH_LOG_RESULTS=229]="EXACT_MATCH_LOG_RESULTS",v[v.FILE_SUGGESTION_SCORE=26]="FILE_SUGGESTION_SCORE",v[v.ACTIVE_TOKEN_QUERY_SUGGESTION=27]="ACTIVE_TOKEN_QUERY_SUGGESTION",v[v.QUERY_SUGGESTION_SCORE_V2=28]="QUERY_SUGGESTION_SCORE_V2",v[v.TYPE_NAVIGATION_TEAM=31]="TYPE_NAVIGATION_TEAM",v[v.TYPE_NAVIGATION_VIEW=32]="TYPE_NAVIGATION_VIEW",v[v.TYPE_USER_QUERY=33]="TYPE_USER_QUERY",v[v.NAV_EXACT_MATCH=35]="NAV_EXACT_MATCH",v[v.NAV_EXACT_PREFIX_MATCH=36]="NAV_EXACT_PREFIX_MATCH",v[v.NAV_NORMAL_MATCH=37]="NAV_NORMAL_MATCH",v[v.NAV_NORMAL_PREFIX_MATCH=75]="NAV_NORMAL_PREFIX_MATCH",v[v.CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH=38]="CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH",v[v.CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH=39]="CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH",v[v.CHANNEL_IS_ARCHIVED=40]="CHANNEL_IS_ARCHIVED",v[v.CHANNEL_IS_MEMBER=41]="CHANNEL_IS_MEMBER",v[v.CHANNEL_IS_STARRED=42]="CHANNEL_IS_STARRED",v[v.MPIM_IS_STARRED=43]="MPIM_IS_STARRED",v[v.CHANNEL_IS_UNREAD=44]="CHANNEL_IS_UNREAD",v[v.MPIM_IS_UNREAD=45]="MPIM_IS_UNREAD",v[v.CHANNEL_IS_OTHER_TEAM=46]="CHANNEL_IS_OTHER_TEAM",v[v.USER_IS_ACTIVE=47]="USER_IS_ACTIVE",v[v.USER_IS_CURRENT_USER=48]="USER_IS_CURRENT_USER",v[v.USER_DM_IS_STARRED=49]="USER_DM_IS_STARRED",v[v.USER_DM_IS_UNREAD=50]="USER_DM_IS_UNREAD",v[v.CHANNEL_PRIORITY=51]="CHANNEL_PRIORITY",v[v.CHANNEL_READ_AGE_DECAY_7D=52]="CHANNEL_READ_AGE_DECAY_7D",v[v.CHANNEL_READ_AGE_DECAY_2H=53]="CHANNEL_READ_AGE_DECAY_2H",v[v.MPIM_READ_AGE_DECAY_2H=54]="MPIM_READ_AGE_DECAY_2H",v[v.MPIM_READ_AGE_DECAY_7D=55]="MPIM_READ_AGE_DECAY_7D",v[v.USER_DM_READ_AGE_DECAY_7D=56]="USER_DM_READ_AGE_DECAY_7D",v[v.USER_DM_READ_AGE_DECAY_2H=57]="USER_DM_READ_AGE_DECAY_2H",v[v.USER_DM_READ_AGE_DECAY_7D_V2=274]="USER_DM_READ_AGE_DECAY_7D_V2",v[v.USER_DM_READ_AGE_DECAY_2H_V2=275]="USER_DM_READ_AGE_DECAY_2H_V2",v[v.QUERY_LENGTH=61]="QUERY_LENGTH",v[v.NAV_QUERY_LENGTH=62]="NAV_QUERY_LENGTH",v[v.SUGGESTION_TEXT_LENGTH=63]="SUGGESTION_TEXT_LENGTH",v[v.NAV_TEXT_LENGTH=64]="NAV_TEXT_LENGTH",v[v.MPIM_PRIORITY=66]="MPIM_PRIORITY",v[v.QUERY_RATIO_LENGTH_STRING=68]="QUERY_RATIO_LENGTH_STRING",v[v.NAV_QUERY_RATIO_LENGTH_STRING=69]="NAV_QUERY_RATIO_LENGTH_STRING",v[v.USER_QUERY_RATIO_LENGTH_STRING=70]="USER_QUERY_RATIO_LENGTH_STRING",v[v.CHANNEL_QUERY_RATIO_LENGTH_STRING=71]="CHANNEL_QUERY_RATIO_LENGTH_STRING",v[v.MPIM_QUERY_RATIO_LENGTH_STRING=72]="MPIM_QUERY_RATIO_LENGTH_STRING",v[v.FUZZY_SCORE=73]="FUZZY_SCORE",v[v.MPIM_WITH_DEACTIVATED_USER=74]="MPIM_WITH_DEACTIVATED_USER",v[v.USER_FIRST_NAME_EXACT_MATCH=81]="USER_FIRST_NAME_EXACT_MATCH",v[v.USER_FIRST_NAME_EXACT_PREFIX_MATCH=82]="USER_FIRST_NAME_EXACT_PREFIX_MATCH",v[v.USER_FIRST_NAME_NORMAL_MATCH=83]="USER_FIRST_NAME_NORMAL_MATCH",v[v.USER_FIRST_NAME_NORMAL_PREFIX_MATCH=84]="USER_FIRST_NAME_NORMAL_PREFIX_MATCH",v[v.USER_LAST_NAME_EXACT_MATCH=85]="USER_LAST_NAME_EXACT_MATCH",v[v.USER_LAST_NAME_EXACT_PREFIX_MATCH=86]="USER_LAST_NAME_EXACT_PREFIX_MATCH",v[v.USER_LAST_NAME_NORMAL_MATCH=87]="USER_LAST_NAME_NORMAL_MATCH",v[v.USER_LAST_NAME_NORMAL_PREFIX_MATCH=88]="USER_LAST_NAME_NORMAL_PREFIX_MATCH",v[v.USER_PRIORITY=89]="USER_PRIORITY",v[v.ONLY_MATCHES_PREVIOUS_NAME=90]="ONLY_MATCHES_PREVIOUS_NAME",v[v.NAV_NORMAL_MATCH_USER=95]="NAV_NORMAL_MATCH_USER",v[v.NAV_NORMAL_PREFIX_MATCH_USER=96]="NAV_NORMAL_PREFIX_MATCH_USER",v[v.NAV_NORMAL_MATCH_NO_USER=97]="NAV_NORMAL_MATCH_NO_USER",v[v.NAV_NORMAL_PREFIX_MATCH_NO_USER=98]="NAV_NORMAL_PREFIX_MATCH_NO_USER",v[v.CHANNEL_LATEST_MSG_AGE_DECAY_7D=99]="CHANNEL_LATEST_MSG_AGE_DECAY_7D",v[v.CHANNEL_LATEST_MSG_AGE_DECAY_2H=100]="CHANNEL_LATEST_MSG_AGE_DECAY_2H",v[v.MPIM_LATEST_MSG_AGE_DECAY_2H=101]="MPIM_LATEST_MSG_AGE_DECAY_2H",v[v.MPIM_LATEST_MSG_AGE_DECAY_7D=102]="MPIM_LATEST_MSG_AGE_DECAY_7D",v[v.USER_DM_LATEST_MSG_AGE_DECAY_7D=103]="USER_DM_LATEST_MSG_AGE_DECAY_7D",v[v.USER_DM_LATEST_MSG_AGE_DECAY_2H=104]="USER_DM_LATEST_MSG_AGE_DECAY_2H",v[v.USER_DM_LATEST_MSG_AGE_DECAY_7D_V2=260]="USER_DM_LATEST_MSG_AGE_DECAY_7D_V2",v[v.USER_DM_LATEST_MSG_AGE_DECAY_2H_V2=261]="USER_DM_LATEST_MSG_AGE_DECAY_2H_V2",v[v.FUZZY_SCORE_50=127]="FUZZY_SCORE_50",v[v.FUZZY_SCORE_25=128]="FUZZY_SCORE_25",v[v.FUZZY_SCORE_ALL=129]="FUZZY_SCORE_ALL",v[v.FUZZY_SCORE_SCALED_EXP=291]="FUZZY_SCORE_SCALED_EXP",v[v.FUZZY_SCORE_SCALED_FLIPPED=292]="FUZZY_SCORE_SCALED_FLIPPED",v[v.FUZZY_SCORE_SCALED_SUBTRACT=293]="FUZZY_SCORE_SCALED_SUBTRACT",v[v.HERE_KEYWORD=131]="HERE_KEYWORD",v[v.HERE_KEYWORD_EXACT_MATCH=132]="HERE_KEYWORD_EXACT_MATCH",v[v.IS_BROADCAST_KEYWORD=133]="IS_BROADCAST_KEYWORD",v[v.BROADCAST_KEYWORD_NORMAL_MATCH=134]="BROADCAST_KEYWORD_NORMAL_MATCH",v[v.MEMBER_OF_CURRENT_CHANNEL=153]="MEMBER_OF_CURRENT_CHANNEL",v[v.QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL=154]="QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL",v[v.USER_EMAIL_MATCH=170]="USER_EMAIL_MATCH",v[v.USER_EMAIL_ONLY_MATCH=171]="USER_EMAIL_ONLY_MATCH",v[v.QUERY_IS_SELF=193]="QUERY_IS_SELF",v[v.CURRENT_USER_TEXTY=194]="CURRENT_USER_TEXTY",v[v.USER_IS_EXTERNAL=234]="USER_IS_EXTERNAL",v[v.USER_SAME_TEAM=235]="USER_SAME_TEAM",v[v.USER_IS_BOT=254]="USER_IS_BOT",v[v.CHANNEL_TEAM_CTR_90DD=189]="CHANNEL_TEAM_CTR_90DD",v[v.CHANNEL_USER_CTR_30DD=190]="CHANNEL_USER_CTR_30DD",v[v.NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS=199]="NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS",v[v.HISTORY_AGE_DECAY_2H=230]="HISTORY_AGE_DECAY_2H",v[v.HISTORY_AGE_DECAY_7D=231]="HISTORY_AGE_DECAY_7D",v[v.HISTORY_POSITION=232]="HISTORY_POSITION",v[v.USER_DM_NULL=179]="USER_DM_NULL",v[v.USER_DM_EMPTY=180]="USER_DM_EMPTY",v[v.USER_DM_NOT_OPEN=181]="USER_DM_NOT_OPEN",v[v.USER_DM_OPEN=182]="USER_DM_OPEN",v[v.USER_DM_LATEST_OLDER_30D=183]="USER_DM_LATEST_OLDER_30D",v[v.USER_DM_LATEST_OLDER_90D=184]="USER_DM_LATEST_OLDER_90D",v[v.USER_DM_EMPTY_V2=257]="USER_DM_EMPTY_V2",v[v.USER_DM_LATEST_OLDER_30D_V2=258]="USER_DM_LATEST_OLDER_30D_V2",v[v.USER_DM_LATEST_OLDER_90D_V2=259]="USER_DM_LATEST_OLDER_90D_V2",v[v.USER_HAS_DMED=284]="USER_HAS_DMED",v[v.USER_DM_READ_AGE_DECAY_2H_V3=285]="USER_DM_READ_AGE_DECAY_2H_V3",v[v.USER_DM_READ_AGE_DECAY_7D_V3=286]="USER_DM_READ_AGE_DECAY_7D_V3",v[v.USER_DM_READ_OLDER_7D=287]="USER_DM_READ_OLDER_7D",v[v.USER_DM_READ_OLDER_30D=288]="USER_DM_READ_OLDER_30D",v[v.USER_DM_READ_OLDER_90D=289]="USER_DM_READ_OLDER_90D",v[v.USER_MPIM_READ_AGE_DECAY_7D=236]="USER_MPIM_READ_AGE_DECAY_7D",v[v.USER_MPIM_READ_AGE_DECAY_2H=237]="USER_MPIM_READ_AGE_DECAY_2H",v[v.USER_MPIM_LATEST_MSG_AGE_DECAY_7D=238]="USER_MPIM_LATEST_MSG_AGE_DECAY_7D",v[v.USER_MPIM_LATEST_MSG_AGE_DECAY_2H=239]="USER_MPIM_LATEST_MSG_AGE_DECAY_2H",v[v.USER_MPIM_FRECENCY_LOG_HIT_COUNT=240]="USER_MPIM_FRECENCY_LOG_HIT_COUNT",v[v.USER_MPIM_FRECENCY_LOG_ITEM_COUNT=241]="USER_MPIM_FRECENCY_LOG_ITEM_COUNT",v[v.MPIM_MEMBERS=166]="MPIM_MEMBERS",v[v.MPIM_MEMBER_NAME_MATCHES=167]="MPIM_MEMBER_NAME_MATCHES",v[v.MPIM_MEMBER_ALL_MATCHES=168]="MPIM_MEMBER_ALL_MATCHES",v[v.MPIM_MATCHER_SCORE=169]="MPIM_MATCHER_SCORE",v[v.MPIM_MATCHER_SCORE_0=173]="MPIM_MATCHER_SCORE_0",v[v.MPIM_MATCHER_SCORE_1=174]="MPIM_MATCHER_SCORE_1",v[v.MPIM_MATCHER_SCORE_2=175]="MPIM_MATCHER_SCORE_2",v[v.MPIM_MATCHER_SCORE_3=176]="MPIM_MATCHER_SCORE_3",v[v.MPIM_TEAM_CTR_90DD=187]="MPIM_TEAM_CTR_90DD",v[v.MPIM_USER_CTR_30DD=188]="MPIM_USER_CTR_30DD",v[v.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H=262]="MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H",v[v.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D=263]="MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D",v[v.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H=264]="MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H",v[v.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D=265]="MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D",v[v.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H=266]="MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H",v[v.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D=267]="MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D",v[v.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H=268]="MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H",v[v.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D=269]="MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D",v[v.MPIM_USERS_PCT_NON_EMPTY_DMS=270]="MPIM_USERS_PCT_NON_EMPTY_DMS",v[v.MPIM_USERS_PCT_NON_NULL_DMS=271]="MPIM_USERS_PCT_NON_NULL_DMS",v[v.MPIM_USERS_ALL_INTERNAL=272]="MPIM_USERS_ALL_INTERNAL",v[v.EMOJI_EXACT_MATCH=136]="EMOJI_EXACT_MATCH",v[v.EMOJI_QUERY_LENGTH_RATIO=150]="EMOJI_QUERY_LENGTH_RATIO",v[v.EMOJI_TOTAL_COMBO_BREAKS=151]="EMOJI_TOTAL_COMBO_BREAKS",v[v.EMOJI_COMBO_BREAK_0=161]="EMOJI_COMBO_BREAK_0",v[v.EMOJI_COMBO_BREAK_1=156]="EMOJI_COMBO_BREAK_1",v[v.EMOJI_COMBO_BREAK_2=157]="EMOJI_COMBO_BREAK_2",v[v.EMOJI_COMBO_BREAK_3=158]="EMOJI_COMBO_BREAK_3",v[v.EMOJI_TEAM_CTR_90DD=185]="EMOJI_TEAM_CTR_90DD",v[v.EMOJI_USER_CTR_30DD=186]="EMOJI_USER_CTR_30DD",v[v.CHANNEL_IS_FROZEN=146]="CHANNEL_IS_FROZEN",v[v.USER_DM_IS_FROZEN=147]="USER_DM_IS_FROZEN",v[v.CHANNEL_HAS_DRAFT=148]="CHANNEL_HAS_DRAFT",v[v.USER_DM_HAS_DRAFT=149]="USER_DM_HAS_DRAFT",v[v.QUERY_FRECENCY_RAW=107]="QUERY_FRECENCY_RAW",v[v.QUERY_FRECENCY_WEIGHT_HIT_VISITS=108]="QUERY_FRECENCY_WEIGHT_HIT_VISITS",v[v.QUERY_FRECENCY_HIT_COUNT=109]="QUERY_FRECENCY_HIT_COUNT",v[v.QUERY_FRECENCY_WEIGHT_ITEM_VISITS=110]="QUERY_FRECENCY_WEIGHT_ITEM_VISITS",v[v.QUERY_FRECENCY_ITEM_COUNT=111]="QUERY_FRECENCY_ITEM_COUNT",v[v.QUERY_FUZZY_SCORE=112]="QUERY_FUZZY_SCORE",v[v.QUERY_FRECENCY_BONUS=113]="QUERY_FRECENCY_BONUS",v[v.QUERY_LOG_HIT_COUNT=130]="QUERY_LOG_HIT_COUNT",v[v.QUERY_TOKEN_NORMAL_MATCH=137]="QUERY_TOKEN_NORMAL_MATCH",v[v.QUERY_TOKEN_NORMAL_PREFIX_MATCH=138]="QUERY_TOKEN_NORMAL_PREFIX_MATCH",v[v.QUERY_HISTORY_AGE_DECAY_30D=282]="QUERY_HISTORY_AGE_DECAY_30D",v[v.QUERY_HISTORY_LOG_INDEX=283]="QUERY_HISTORY_LOG_INDEX",v[v.FILTER_USER_IS_ACTIVE=114]="FILTER_USER_IS_ACTIVE",v[v.FILTER_USER_IS_CURRENT_USER=115]="FILTER_USER_IS_CURRENT_USER",v[v.FILTER_USER_DM_IS_STARRED=116]="FILTER_USER_DM_IS_STARRED",v[v.FILTER_USER_DM_IS_UNREAD=117]="FILTER_USER_DM_IS_UNREAD",v[v.FILTER_USER_DM_READ_AGE_DECAY_7D=118]="FILTER_USER_DM_READ_AGE_DECAY_7D",v[v.FILTER_USER_DM_READ_AGE_DECAY_2H=119]="FILTER_USER_DM_READ_AGE_DECAY_2H",v[v.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D=120]="FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D",v[v.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H=121]="FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H",v[v.FILTER_USER_FIRST_NAME_NORMAL_MATCH=122]="FILTER_USER_FIRST_NAME_NORMAL_MATCH",v[v.FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH=123]="FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH",v[v.FILTER_USER_LAST_NAME_NORMAL_MATCH=124]="FILTER_USER_LAST_NAME_NORMAL_MATCH",v[v.FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH=125]="FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH",v[v.FILTER_USER_PRIORITY=126]="FILTER_USER_PRIORITY",v[v.FILTER_CHANNEL_IS_ARCHIVED=139]="FILTER_CHANNEL_IS_ARCHIVED",v[v.FILTER_CHANNEL_IS_MEMBER=140]="FILTER_CHANNEL_IS_MEMBER",v[v.FILTER_CHANNEL_IS_STARRED=141]="FILTER_CHANNEL_IS_STARRED",v[v.FILTER_CHANNEL_IS_UNREAD=142]="FILTER_CHANNEL_IS_UNREAD",v[v.FILTER_CHANNEL_READ_AGE_DECAY_7D=143]="FILTER_CHANNEL_READ_AGE_DECAY_7D",v[v.FILTER_CHANNEL_READ_AGE_DECAY_2H=144]="FILTER_CHANNEL_READ_AGE_DECAY_2H",v[v.FILTER_CHANNEL_PRIORITY=145]="FILTER_CHANNEL_PRIORITY",v[v.USER_ENTITY_TYPE_CTR_30DD=191]="USER_ENTITY_TYPE_CTR_30DD",v[v.NUM_RESULTS=192]="NUM_RESULTS",v[v.TYPE_NAVIGATION_FILE=3]="TYPE_NAVIGATION_FILE",v[v.FILE_AGE_DECAY_7D=195]="FILE_AGE_DECAY_7D",v[v.FILE_AGE_DECAY_28D=196]="FILE_AGE_DECAY_28D",v[v.FILE_AGE_DECAY_90D=197]="FILE_AGE_DECAY_90D",v[v.FILE_FROM_CURRENT_USER=198]="FILE_FROM_CURRENT_USER",v[v.FILE_LOG_PRIVATE_SHARES=200]="FILE_LOG_PRIVATE_SHARES",v[v.FILE_LOG_PUBLIC_SHARES=201]="FILE_LOG_PUBLIC_SHARES",v[v.FILE_LOG_ACTIONS=202]="FILE_LOG_ACTIONS",v[v.FILE_LATEST_ACTION_AGE_DECAY_2H=203]="FILE_LATEST_ACTION_AGE_DECAY_2H",v[v.FILE_LATEST_ACTION_AGE_DECAY_7D=204]="FILE_LATEST_ACTION_AGE_DECAY_7D",v[v.FILE_LATEST_ACTION_AGE_DECAY_90D=205]="FILE_LATEST_ACTION_AGE_DECAY_90D",v[v.FILE_LATEST_SHARE_AGE_DECAY_2H=206]="FILE_LATEST_SHARE_AGE_DECAY_2H",v[v.FILE_LATEST_SHARE_AGE_DECAY_7D=207]="FILE_LATEST_SHARE_AGE_DECAY_7D",v[v.FILE_LATEST_SHARE_AGE_DECAY_90D=208]="FILE_LATEST_SHARE_AGE_DECAY_90D",v[v.FILE_CHANNEL_CTR=209]="FILE_CHANNEL_CTR",v[v.FILE_SUGGESTIONS_SEARCHER=210]="FILE_SUGGESTIONS_SEARCHER",v[v.FILE_USER_CTR=211]="FILE_USER_CTR",v[v.FILE_NAME_CONTAINS_QUERY_NORMALIZED=273]="FILE_NAME_CONTAINS_QUERY_NORMALIZED",v[v.FILE_IS_CANVAS=276]="FILE_IS_CANVAS",v[v.FILE_HAS_DMS_WITH_CREATOR=277]="FILE_HAS_DMS_WITH_CREATOR",v[v.FILE_LATEST_VIEW_BY_USER_OLDER_90D=278]="FILE_LATEST_VIEW_BY_USER_OLDER_90D",v[v.FILE_HAS_DMS_WITH_CREATOR_V2=290]="FILE_HAS_DMS_WITH_CREATOR_V2",v[v.APP_NAME_PREFIX_MATCH=215]="APP_NAME_PREFIX_MATCH",v[v.BEST_NAME_MATCH_LOG_RESULTS=218]="BEST_NAME_MATCH_LOG_RESULTS",v[v.SHORTCUT_ENTITY_TYPE_CTR=226]="SHORTCUT_ENTITY_TYPE_CTR",v[v.TYPE_SLASH_COMMAND=212]="TYPE_SLASH_COMMAND",v[v.SLASH_COMMAND_TEAM_CTR=227]="SLASH_COMMAND_TEAM_CTR",v[v.SLASH_COMMAND_USER_CTR=219]="SLASH_COMMAND_USER_CTR",v[v.TYPE_GLOBAL_ACTION=213]="TYPE_GLOBAL_ACTION",v[v.IS_INVITE_WORKSPACE=217]="IS_INVITE_WORKSPACE",v[v.GLOBAL_ACTION_TEAM_CTR=220]="GLOBAL_ACTION_TEAM_CTR",v[v.GLOBAL_ACTION_USER_CTR=221]="GLOBAL_ACTION_USER_CTR",v[v.TYPE_CHANNEL_ACTION=214]="TYPE_CHANNEL_ACTION",v[v.CHANNEL_ACTION_TEAM_CTR=222]="CHANNEL_ACTION_TEAM_CTR",v[v.CHANNEL_ACTION_USER_CTR=223]="CHANNEL_ACTION_USER_CTR",v[v.TYPE_APP_ACTION=152]="TYPE_APP_ACTION",v[v.APP_ACTION_TEAM_CTR=224]="APP_ACTION_TEAM_CTR",v[v.APP_ACTION_USER_CTR=225]="APP_ACTION_USER_CTR",v[v.OS_APP_ACTION=228]="OS_APP_ACTION",v[v.TYPE_APP=216]="TYPE_APP",v[v.TYPE_NAVIGATION_MESSAGE=255]="TYPE_NAVIGATION_MESSAGE",v[v.TYPE_WORKFLOW_TRIGGER=256]="TYPE_WORKFLOW_TRIGGER",v[v.WORKFLOW_TRIGGER_TEAM_CTR=279]="WORKFLOW_TRIGGER_TEAM_CTR",v[v.WORKFLOW_TRIGGER_USER_CTR=280]="WORKFLOW_TRIGGER_USER_CTR",v[v.HAS_CHANNEL_ASSOCIATION=281]="HAS_CHANNEL_ASSOCIATION",v[v.DEPRECATED_QUERY_SUGGESTION_SCORE=1]="DEPRECATED_QUERY_SUGGESTION_SCORE",v[v.DEPRECATED_TYPE_NAVIGATION_EXPERT_CHANNEL=29]="DEPRECATED_TYPE_NAVIGATION_EXPERT_CHANNEL",v[v.DEPRECATED_BM25_SCORE=30]="DEPRECATED_BM25_SCORE",v[v.DEPRECATED_NAV_EXCESS_STRING_LENGTH=34]="DEPRECATED_NAV_EXCESS_STRING_LENGTH",v[v.DEPRECATED_CHANNEL_EXCESS_STRING_LENGTH=58]="DEPRECATED_CHANNEL_EXCESS_STRING_LENGTH",v[v.DEPRECATED_USER_EXCESS_STRING_LENGTH=59]="DEPRECATED_USER_EXCESS_STRING_LENGTH",v[v.DEPRECATED_MPIM_EXCESS_STRING_LENGTH=60]="DEPRECATED_MPIM_EXCESS_STRING_LENGTH",v[v.DEPRECATED_LOG_FRECENCY=67]="DEPRECATED_LOG_FRECENCY",v[v.DEPRECATED_LOG_FRECENCY_BONUS=77]="DEPRECATED_LOG_FRECENCY_BONUS",v[v.DEPRECATED_LOG_FRECENCY_CHANNEL=78]="DEPRECATED_LOG_FRECENCY_CHANNEL",v[v.DEPRECATED_LOG_FRECENCY_USER=79]="DEPRECATED_LOG_FRECENCY_USER",v[v.DEPRECATED_LOG_FRECENCY_MPIM=80]="DEPRECATED_LOG_FRECENCY_MPIM",v[v.DEPRECATED_EMOJI_SCORE_BONUS=135]="DEPRECATED_EMOJI_SCORE_BONUS",v[v.TEST_FEATURE_1=1e3]="TEST_FEATURE_1",v[v.TEST_FEATURE_2=1001]="TEST_FEATURE_2",v[v.TEST_FEATURE_3=1002]="TEST_FEATURE_3",v[v.TEST_FEATURE_4=1003]="TEST_FEATURE_4",v[v.TEST_FEATURE_5=1004]="TEST_FEATURE_5",v[v.TEST_FEATURE_6=1005]="TEST_FEATURE_6",v[v.TEST_FEATURE_7=1006]="TEST_FEATURE_7",v[v.TEST_FEATURE_8=1007]="TEST_FEATURE_8",v[v.TEST_FEATURE_9=1008]="TEST_FEATURE_9",v[v.TEST_FEATURE_10=1009]="TEST_FEATURE_10"})(u||(u={}));var m;(function(v){v[v.NUMERICAL=1]="NUMERICAL",v[v.BINARY=2]="BINARY",v[v.TEXT=3]="TEXT"})(m||(m={}))},9372409576:(H,l,c)=>{"use strict";c.d(l,{$:()=>i});var u=c(4224187311),m=c.n(u);const v=u.Reader,g=u.Writer,s=u.util,a=u.roots.default||(u.roots.default={}),i=a.slack=(()=>{const e={};return e.calls=function(){const t={};return t.analytics=function(){const r={};return r.RecvMedia=function(){function o(h){if(h)for(let p=Object.keys(h),d=0;d<p.length;++d)h[p[d]]!=null&&(this[p[d]]=h[p[d]])}n(o,"RecvMedia"),o.prototype.peerId=s.Long?s.Long.fromBits(0,0,!0):0,o.prototype.bytesReceived=s.Long?s.Long.fromBits(0,0,!0):0,o.prototype.packetsReceived=s.Long?s.Long.fromBits(0,0,!0):0,o.prototype.fractionLost=0,o.prototype.jitter=0,o.prototype.packetsLost=s.Long?s.Long.fromBits(0,0,!0):0,o.prototype.codec=0,o.prototype.userId="",o.prototype.peerIdString="",o.prototype.audioStats=null,o.prototype.videoStats=null;let f;return Object.defineProperty(o.prototype,"mediaType",{get:s.oneOfGetter(f=["audioStats","videoStats"]),set:s.oneOfSetter(f)}),o.create=n(function(p){return new o(p)},"create"),o.encode=n(function(p,d){return d||(d=g.create()),p.peerId!=null&&Object.hasOwnProperty.call(p,"peerId")&&d.uint32(8).uint64(p.peerId),p.bytesReceived!=null&&Object.hasOwnProperty.call(p,"bytesReceived")&&d.uint32(16).uint64(p.bytesReceived),p.packetsReceived!=null&&Object.hasOwnProperty.call(p,"packetsReceived")&&d.uint32(24).uint64(p.packetsReceived),p.fractionLost!=null&&Object.hasOwnProperty.call(p,"fractionLost")&&d.uint32(33).double(p.fractionLost),p.jitter!=null&&Object.hasOwnProperty.call(p,"jitter")&&d.uint32(41).double(p.jitter),p.packetsLost!=null&&Object.hasOwnProperty.call(p,"packetsLost")&&d.uint32(48).uint64(p.packetsLost),p.codec!=null&&Object.hasOwnProperty.call(p,"codec")&&d.uint32(56).int32(p.codec),p.audioStats!=null&&Object.hasOwnProperty.call(p,"audioStats")&&a.slack.calls.analytics.RecvMedia.Audio.encode(p.audioStats,d.uint32(66).fork()).ldelim(),p.videoStats!=null&&Object.hasOwnProperty.call(p,"videoStats")&&a.slack.calls.analytics.RecvMedia.Video.encode(p.videoStats,d.uint32(74).fork()).ldelim(),p.userId!=null&&Object.hasOwnProperty.call(p,"userId")&&d.uint32(82).string(p.userId),p.peerIdString!=null&&Object.hasOwnProperty.call(p,"peerIdString")&&d.uint32(90).string(p.peerIdString),d},"encode"),o.encodeDelimited=n(function(p,d){return this.encode(p,d).ldelim()},"encodeDelimited"),o.decode=n(function(p,d){p instanceof v||(p=v.create(p));let y=d===void 0?p.len:p.pos+d,S=new a.slack.calls.analytics.RecvMedia;for(;p.pos<y;){let b=p.uint32();switch(b>>>3){case 1:{S.peerId=p.uint64();break}case 2:{S.bytesReceived=p.uint64();break}case 3:{S.packetsReceived=p.uint64();break}case 4:{S.fractionLost=p.double();break}case 5:{S.jitter=p.double();break}case 6:{S.packetsLost=p.uint64();break}case 7:{S.codec=p.int32();break}case 10:{S.userId=p.string();break}case 11:{S.peerIdString=p.string();break}case 8:{S.audioStats=a.slack.calls.analytics.RecvMedia.Audio.decode(p,p.uint32());break}case 9:{S.videoStats=a.slack.calls.analytics.RecvMedia.Video.decode(p,p.uint32());break}default:p.skipType(b&7);break}}return S},"decode"),o.decodeDelimited=n(function(p){return p instanceof v||(p=new v(p)),this.decode(p,p.uint32())},"decodeDelimited"),o.verify=n(function(p){if(typeof p!="object"||p===null)return"object expected";let d={};if(p.peerId!=null&&p.hasOwnProperty("peerId")&&!s.isInteger(p.peerId)&&!(p.peerId&&s.isInteger(p.peerId.low)&&s.isInteger(p.peerId.high)))return"peerId: integer|Long expected";if(p.bytesReceived!=null&&p.hasOwnProperty("bytesReceived")&&!s.isInteger(p.bytesReceived)&&!(p.bytesReceived&&s.isInteger(p.bytesReceived.low)&&s.isInteger(p.bytesReceived.high)))return"bytesReceived: integer|Long expected";if(p.packetsReceived!=null&&p.hasOwnProperty("packetsReceived")&&!s.isInteger(p.packetsReceived)&&!(p.packetsReceived&&s.isInteger(p.packetsReceived.low)&&s.isInteger(p.packetsReceived.high)))return"packetsReceived: integer|Long expected";if(p.fractionLost!=null&&p.hasOwnProperty("fractionLost")&&typeof p.fractionLost!="number")return"fractionLost: number expected";if(p.jitter!=null&&p.hasOwnProperty("jitter")&&typeof p.jitter!="number")return"jitter: number expected";if(p.packetsLost!=null&&p.hasOwnProperty("packetsLost")&&!s.isInteger(p.packetsLost)&&!(p.packetsLost&&s.isInteger(p.packetsLost.low)&&s.isInteger(p.packetsLost.high)))return"packetsLost: integer|Long expected";if(p.codec!=null&&p.hasOwnProperty("codec"))switch(p.codec){default:return"codec: enum value expected";case 0:case 1:case 2:case 3:case 4:break}if(p.userId!=null&&p.hasOwnProperty("userId")&&!s.isString(p.userId))return"userId: string expected";if(p.peerIdString!=null&&p.hasOwnProperty("peerIdString")&&!s.isString(p.peerIdString))return"peerIdString: string expected";if(p.audioStats!=null&&p.hasOwnProperty("audioStats")){d.mediaType=1;{let y=a.slack.calls.analytics.RecvMedia.Audio.verify(p.audioStats);if(y)return"audioStats."+y}}if(p.videoStats!=null&&p.hasOwnProperty("videoStats")){if(d.mediaType===1)return"mediaType: multiple values";d.mediaType=1;{let y=a.slack.calls.analytics.RecvMedia.Video.verify(p.videoStats);if(y)return"videoStats."+y}}return null},"verify"),o.fromObject=n(function(p){if(p instanceof a.slack.calls.analytics.RecvMedia)return p;let d=new a.slack.calls.analytics.RecvMedia;switch(p.peerId!=null&&(s.Long?(d.peerId=s.Long.fromValue(p.peerId)).unsigned=!0:typeof p.peerId=="string"?d.peerId=parseInt(p.peerId,10):typeof p.peerId=="number"?d.peerId=p.peerId:typeof p.peerId=="object"&&(d.peerId=new s.LongBits(p.peerId.low>>>0,p.peerId.high>>>0).toNumber(!0))),p.bytesReceived!=null&&(s.Long?(d.bytesReceived=s.Long.fromValue(p.bytesReceived)).unsigned=!0:typeof p.bytesReceived=="string"?d.bytesReceived=parseInt(p.bytesReceived,10):typeof p.bytesReceived=="number"?d.bytesReceived=p.bytesReceived:typeof p.bytesReceived=="object"&&(d.bytesReceived=new s.LongBits(p.bytesReceived.low>>>0,p.bytesReceived.high>>>0).toNumber(!0))),p.packetsReceived!=null&&(s.Long?(d.packetsReceived=s.Long.fromValue(p.packetsReceived)).unsigned=!0:typeof p.packetsReceived=="string"?d.packetsReceived=parseInt(p.packetsReceived,10):typeof p.packetsReceived=="number"?d.packetsReceived=p.packetsReceived:typeof p.packetsReceived=="object"&&(d.packetsReceived=new s.LongBits(p.packetsReceived.low>>>0,p.packetsReceived.high>>>0).toNumber(!0))),p.fractionLost!=null&&(d.fractionLost=Number(p.fractionLost)),p.jitter!=null&&(d.jitter=Number(p.jitter)),p.packetsLost!=null&&(s.Long?(d.packetsLost=s.Long.fromValue(p.packetsLost)).unsigned=!0:typeof p.packetsLost=="string"?d.packetsLost=parseInt(p.packetsLost,10):typeof p.packetsLost=="number"?d.packetsLost=p.packetsLost:typeof p.packetsLost=="object"&&(d.packetsLost=new s.LongBits(p.packetsLost.low>>>0,p.packetsLost.high>>>0).toNumber(!0))),p.codec){default:if(typeof p.codec=="number"){d.codec=p.codec;break}break;case"UNKNOWN":case 0:d.codec=0;break;case"OPUS":case 1:d.codec=1;break;case"VP8":case 2:d.codec=2;break;case"VP9":case 3:d.codec=3;break;case"H264":case 4:d.codec=4;break}if(p.userId!=null&&(d.userId=String(p.userId)),p.peerIdString!=null&&(d.peerIdString=String(p.peerIdString)),p.audioStats!=null){if(typeof p.audioStats!="object")throw TypeError(".slack.calls.analytics.RecvMedia.audioStats: object expected");d.audioStats=a.slack.calls.analytics.RecvMedia.Audio.fromObject(p.audioStats)}if(p.videoStats!=null){if(typeof p.videoStats!="object")throw TypeError(".slack.calls.analytics.RecvMedia.videoStats: object expected");d.videoStats=a.slack.calls.analytics.RecvMedia.Video.fromObject(p.videoStats)}return d},"fromObject"),o.toObject=n(function(p,d){d||(d={});let y={};if(d.defaults){if(s.Long){let S=new s.Long(0,0,!0);y.peerId=d.longs===String?S.toString():d.longs===Number?S.toNumber():S}else y.peerId=d.longs===String?"0":0;if(s.Long){let S=new s.Long(0,0,!0);y.bytesReceived=d.longs===String?S.toString():d.longs===Number?S.toNumber():S}else y.bytesReceived=d.longs===String?"0":0;if(s.Long){let S=new s.Long(0,0,!0);y.packetsReceived=d.longs===String?S.toString():d.longs===Number?S.toNumber():S}else y.packetsReceived=d.longs===String?"0":0;if(y.fractionLost=0,y.jitter=0,s.Long){let S=new s.Long(0,0,!0);y.packetsLost=d.longs===String?S.toString():d.longs===Number?S.toNumber():S}else y.packetsLost=d.longs===String?"0":0;y.codec=d.enums===String?"UNKNOWN":0,y.userId="",y.peerIdString=""}return p.peerId!=null&&p.hasOwnProperty("peerId")&&(typeof p.peerId=="number"?y.peerId=d.longs===String?String(p.peerId):p.peerId:y.peerId=d.longs===String?s.Long.prototype.toString.call(p.peerId):d.longs===Number?new s.LongBits(p.peerId.low>>>0,p.peerId.high>>>0).toNumber(!0):p.peerId),p.bytesReceived!=null&&p.hasOwnProperty("bytesReceived")&&(typeof p.bytesReceived=="number"?y.bytesReceived=d.longs===String?String(p.bytesReceived):p.bytesReceived:y.bytesReceived=d.longs===String?s.Long.prototype.toString.call(p.bytesReceived):d.longs===Number?new s.LongBits(p.bytesReceived.low>>>0,p.bytesReceived.high>>>0).toNumber(!0):p.bytesReceived),p.packetsReceived!=null&&p.hasOwnProperty("packetsReceived")&&(typeof p.packetsReceived=="number"?y.packetsReceived=d.longs===String?String(p.packetsReceived):p.packetsReceived:y.packetsReceived=d.longs===String?s.Long.prototype.toString.call(p.packetsReceived):d.longs===Number?new s.LongBits(p.packetsReceived.low>>>0,p.packetsReceived.high>>>0).toNumber(!0):p.packetsReceived),p.fractionLost!=null&&p.hasOwnProperty("fractionLost")&&(y.fractionLost=d.json&&!isFinite(p.fractionLost)?String(p.fractionLost):p.fractionLost),p.jitter!=null&&p.hasOwnProperty("jitter")&&(y.jitter=d.json&&!isFinite(p.jitter)?String(p.jitter):p.jitter),p.packetsLost!=null&&p.hasOwnProperty("packetsLost")&&(typeof p.packetsLost=="number"?y.packetsLost=d.longs===String?String(p.packetsLost):p.packetsLost:y.packetsLost=d.longs===String?s.Long.prototype.toString.call(p.packetsLost):d.longs===Number?new s.LongBits(p.packetsLost.low>>>0,p.packetsLost.high>>>0).toNumber(!0):p.packetsLost),p.codec!=null&&p.hasOwnProperty("codec")&&(y.codec=d.enums===String?a.slack.calls.analytics.Codec[p.codec]===void 0?p.codec:a.slack.calls.analytics.Codec[p.codec]:p.codec),p.audioStats!=null&&p.hasOwnProperty("audioStats")&&(y.audioStats=a.slack.calls.analytics.RecvMedia.Audio.toObject(p.audioStats,d),d.oneofs&&(y.mediaType="audioStats")),p.videoStats!=null&&p.hasOwnProperty("videoStats")&&(y.videoStats=a.slack.calls.analytics.RecvMedia.Video.toObject(p.videoStats,d),d.oneofs&&(y.mediaType="videoStats")),p.userId!=null&&p.hasOwnProperty("userId")&&(y.userId=p.userId),p.peerIdString!=null&&p.hasOwnProperty("peerIdString")&&(y.peerIdString=p.peerIdString),y},"toObject"),o.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),o.getTypeUrl=n(function(p){return p===void 0&&(p="type.googleapis.com"),p+"/slack.calls.analytics.RecvMedia"},"getTypeUrl"),o.Audio=function(){function h(p){if(p)for(let d=Object.keys(p),y=0;y<d.length;++y)p[d[y]]!=null&&(this[d[y]]=p[d[y]])}return n(h,"Audio"),h.prototype.audioLevel=0,h.prototype.jitterBufferDelay=0,h.prototype.concealmentEvents=s.Long?s.Long.fromBits(0,0,!0):0,h.prototype.concealedSamples=s.Long?s.Long.fromBits(0,0,!0):0,h.create=n(function(d){return new h(d)},"create"),h.encode=n(function(d,y){return y||(y=g.create()),d.audioLevel!=null&&Object.hasOwnProperty.call(d,"audioLevel")&&y.uint32(9).double(d.audioLevel),d.jitterBufferDelay!=null&&Object.hasOwnProperty.call(d,"jitterBufferDelay")&&y.uint32(17).double(d.jitterBufferDelay),d.concealmentEvents!=null&&Object.hasOwnProperty.call(d,"concealmentEvents")&&y.uint32(24).uint64(d.concealmentEvents),d.concealedSamples!=null&&Object.hasOwnProperty.call(d,"concealedSamples")&&y.uint32(32).uint64(d.concealedSamples),y},"encode"),h.encodeDelimited=n(function(d,y){return this.encode(d,y).ldelim()},"encodeDelimited"),h.decode=n(function(d,y){d instanceof v||(d=v.create(d));let S=y===void 0?d.len:d.pos+y,b=new a.slack.calls.analytics.RecvMedia.Audio;for(;d.pos<S;){let _=d.uint32();switch(_>>>3){case 1:{b.audioLevel=d.double();break}case 2:{b.jitterBufferDelay=d.double();break}case 3:{b.concealmentEvents=d.uint64();break}case 4:{b.concealedSamples=d.uint64();break}default:d.skipType(_&7);break}}return b},"decode"),h.decodeDelimited=n(function(d){return d instanceof v||(d=new v(d)),this.decode(d,d.uint32())},"decodeDelimited"),h.verify=n(function(d){return typeof d!="object"||d===null?"object expected":d.audioLevel!=null&&d.hasOwnProperty("audioLevel")&&typeof d.audioLevel!="number"?"audioLevel: number expected":d.jitterBufferDelay!=null&&d.hasOwnProperty("jitterBufferDelay")&&typeof d.jitterBufferDelay!="number"?"jitterBufferDelay: number expected":d.concealmentEvents!=null&&d.hasOwnProperty("concealmentEvents")&&!s.isInteger(d.concealmentEvents)&&!(d.concealmentEvents&&s.isInteger(d.concealmentEvents.low)&&s.isInteger(d.concealmentEvents.high))?"concealmentEvents: integer|Long expected":d.concealedSamples!=null&&d.hasOwnProperty("concealedSamples")&&!s.isInteger(d.concealedSamples)&&!(d.concealedSamples&&s.isInteger(d.concealedSamples.low)&&s.isInteger(d.concealedSamples.high))?"concealedSamples: integer|Long expected":null},"verify"),h.fromObject=n(function(d){if(d instanceof a.slack.calls.analytics.RecvMedia.Audio)return d;let y=new a.slack.calls.analytics.RecvMedia.Audio;return d.audioLevel!=null&&(y.audioLevel=Number(d.audioLevel)),d.jitterBufferDelay!=null&&(y.jitterBufferDelay=Number(d.jitterBufferDelay)),d.concealmentEvents!=null&&(s.Long?(y.concealmentEvents=s.Long.fromValue(d.concealmentEvents)).unsigned=!0:typeof d.concealmentEvents=="string"?y.concealmentEvents=parseInt(d.concealmentEvents,10):typeof d.concealmentEvents=="number"?y.concealmentEvents=d.concealmentEvents:typeof d.concealmentEvents=="object"&&(y.concealmentEvents=new s.LongBits(d.concealmentEvents.low>>>0,d.concealmentEvents.high>>>0).toNumber(!0))),d.concealedSamples!=null&&(s.Long?(y.concealedSamples=s.Long.fromValue(d.concealedSamples)).unsigned=!0:typeof d.concealedSamples=="string"?y.concealedSamples=parseInt(d.concealedSamples,10):typeof d.concealedSamples=="number"?y.concealedSamples=d.concealedSamples:typeof d.concealedSamples=="object"&&(y.concealedSamples=new s.LongBits(d.concealedSamples.low>>>0,d.concealedSamples.high>>>0).toNumber(!0))),y},"fromObject"),h.toObject=n(function(d,y){y||(y={});let S={};if(y.defaults){if(S.audioLevel=0,S.jitterBufferDelay=0,s.Long){let b=new s.Long(0,0,!0);S.concealmentEvents=y.longs===String?b.toString():y.longs===Number?b.toNumber():b}else S.concealmentEvents=y.longs===String?"0":0;if(s.Long){let b=new s.Long(0,0,!0);S.concealedSamples=y.longs===String?b.toString():y.longs===Number?b.toNumber():b}else S.concealedSamples=y.longs===String?"0":0}return d.audioLevel!=null&&d.hasOwnProperty("audioLevel")&&(S.audioLevel=y.json&&!isFinite(d.audioLevel)?String(d.audioLevel):d.audioLevel),d.jitterBufferDelay!=null&&d.hasOwnProperty("jitterBufferDelay")&&(S.jitterBufferDelay=y.json&&!isFinite(d.jitterBufferDelay)?String(d.jitterBufferDelay):d.jitterBufferDelay),d.concealmentEvents!=null&&d.hasOwnProperty("concealmentEvents")&&(typeof d.concealmentEvents=="number"?S.concealmentEvents=y.longs===String?String(d.concealmentEvents):d.concealmentEvents:S.concealmentEvents=y.longs===String?s.Long.prototype.toString.call(d.concealmentEvents):y.longs===Number?new s.LongBits(d.concealmentEvents.low>>>0,d.concealmentEvents.high>>>0).toNumber(!0):d.concealmentEvents),d.concealedSamples!=null&&d.hasOwnProperty("concealedSamples")&&(typeof d.concealedSamples=="number"?S.concealedSamples=y.longs===String?String(d.concealedSamples):d.concealedSamples:S.concealedSamples=y.longs===String?s.Long.prototype.toString.call(d.concealedSamples):y.longs===Number?new s.LongBits(d.concealedSamples.low>>>0,d.concealedSamples.high>>>0).toNumber(!0):d.concealedSamples),S},"toObject"),h.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),h.getTypeUrl=n(function(d){return d===void 0&&(d="type.googleapis.com"),d+"/slack.calls.analytics.RecvMedia.Audio"},"getTypeUrl"),h}(),o.Video=function(){function h(p){if(p)for(let d=Object.keys(p),y=0;y<d.length;++y)p[d[y]]!=null&&(this[d[y]]=p[d[y]])}return n(h,"Video"),h.prototype.firCount=s.Long?s.Long.fromBits(0,0,!0):0,h.prototype.nackCount=s.Long?s.Long.fromBits(0,0,!0):0,h.prototype.pliCount=s.Long?s.Long.fromBits(0,0,!0):0,h.prototype.sliCount=s.Long?s.Long.fromBits(0,0,!0):0,h.prototype.frameHeight=s.Long?s.Long.fromBits(0,0,!0):0,h.prototype.frameWidth=s.Long?s.Long.fromBits(0,0,!0):0,h.prototype.framesPerSecond=0,h.prototype.framesCorrupted=s.Long?s.Long.fromBits(0,0,!0):0,h.prototype.framesDecoded=s.Long?s.Long.fromBits(0,0,!0):0,h.prototype.framesDropped=s.Long?s.Long.fromBits(0,0,!0):0,h.prototype.framesReceived=s.Long?s.Long.fromBits(0,0,!0):0,h.create=n(function(d){return new h(d)},"create"),h.encode=n(function(d,y){return y||(y=g.create()),d.firCount!=null&&Object.hasOwnProperty.call(d,"firCount")&&y.uint32(8).uint64(d.firCount),d.nackCount!=null&&Object.hasOwnProperty.call(d,"nackCount")&&y.uint32(16).uint64(d.nackCount),d.pliCount!=null&&Object.hasOwnProperty.call(d,"pliCount")&&y.uint32(24).uint64(d.pliCount),d.sliCount!=null&&Object.hasOwnProperty.call(d,"sliCount")&&y.uint32(32).uint64(d.sliCount),d.frameHeight!=null&&Object.hasOwnProperty.call(d,"frameHeight")&&y.uint32(40).uint64(d.frameHeight),d.frameWidth!=null&&Object.hasOwnProperty.call(d,"frameWidth")&&y.uint32(48).uint64(d.frameWidth),d.framesPerSecond!=null&&Object.hasOwnProperty.call(d,"framesPerSecond")&&y.uint32(57).double(d.framesPerSecond),d.framesCorrupted!=null&&Object.hasOwnProperty.call(d,"framesCorrupted")&&y.uint32(64).uint64(d.framesCorrupted),d.framesDecoded!=null&&Object.hasOwnProperty.call(d,"framesDecoded")&&y.uint32(72).uint64(d.framesDecoded),d.framesDropped!=null&&Object.hasOwnProperty.call(d,"framesDropped")&&y.uint32(80).uint64(d.framesDropped),d.framesReceived!=null&&Object.hasOwnProperty.call(d,"framesReceived")&&y.uint32(88).uint64(d.framesReceived),y},"encode"),h.encodeDelimited=n(function(d,y){return this.encode(d,y).ldelim()},"encodeDelimited"),h.decode=n(function(d,y){d instanceof v||(d=v.create(d));let S=y===void 0?d.len:d.pos+y,b=new a.slack.calls.analytics.RecvMedia.Video;for(;d.pos<S;){let _=d.uint32();switch(_>>>3){case 1:{b.firCount=d.uint64();break}case 2:{b.nackCount=d.uint64();break}case 3:{b.pliCount=d.uint64();break}case 4:{b.sliCount=d.uint64();break}case 5:{b.frameHeight=d.uint64();break}case 6:{b.frameWidth=d.uint64();break}case 7:{b.framesPerSecond=d.double();break}case 8:{b.framesCorrupted=d.uint64();break}case 9:{b.framesDecoded=d.uint64();break}case 10:{b.framesDropped=d.uint64();break}case 11:{b.framesReceived=d.uint64();break}default:d.skipType(_&7);break}}return b},"decode"),h.decodeDelimited=n(function(d){return d instanceof v||(d=new v(d)),this.decode(d,d.uint32())},"decodeDelimited"),h.verify=n(function(d){return typeof d!="object"||d===null?"object expected":d.firCount!=null&&d.hasOwnProperty("firCount")&&!s.isInteger(d.firCount)&&!(d.firCount&&s.isInteger(d.firCount.low)&&s.isInteger(d.firCount.high))?"firCount: integer|Long expected":d.nackCount!=null&&d.hasOwnProperty("nackCount")&&!s.isInteger(d.nackCount)&&!(d.nackCount&&s.isInteger(d.nackCount.low)&&s.isInteger(d.nackCount.high))?"nackCount: integer|Long expected":d.pliCount!=null&&d.hasOwnProperty("pliCount")&&!s.isInteger(d.pliCount)&&!(d.pliCount&&s.isInteger(d.pliCount.low)&&s.isInteger(d.pliCount.high))?"pliCount: integer|Long expected":d.sliCount!=null&&d.hasOwnProperty("sliCount")&&!s.isInteger(d.sliCount)&&!(d.sliCount&&s.isInteger(d.sliCount.low)&&s.isInteger(d.sliCount.high))?"sliCount: integer|Long expected":d.frameHeight!=null&&d.hasOwnProperty("frameHeight")&&!s.isInteger(d.frameHeight)&&!(d.frameHeight&&s.isInteger(d.frameHeight.low)&&s.isInteger(d.frameHeight.high))?"frameHeight: integer|Long expected":d.frameWidth!=null&&d.hasOwnProperty("frameWidth")&&!s.isInteger(d.frameWidth)&&!(d.frameWidth&&s.isInteger(d.frameWidth.low)&&s.isInteger(d.frameWidth.high))?"frameWidth: integer|Long expected":d.framesPerSecond!=null&&d.hasOwnProperty("framesPerSecond")&&typeof d.framesPerSecond!="number"?"framesPerSecond: number expected":d.framesCorrupted!=null&&d.hasOwnProperty("framesCorrupted")&&!s.isInteger(d.framesCorrupted)&&!(d.framesCorrupted&&s.isInteger(d.framesCorrupted.low)&&s.isInteger(d.framesCorrupted.high))?"framesCorrupted: integer|Long expected":d.framesDecoded!=null&&d.hasOwnProperty("framesDecoded")&&!s.isInteger(d.framesDecoded)&&!(d.framesDecoded&&s.isInteger(d.framesDecoded.low)&&s.isInteger(d.framesDecoded.high))?"framesDecoded: integer|Long expected":d.framesDropped!=null&&d.hasOwnProperty("framesDropped")&&!s.isInteger(d.framesDropped)&&!(d.framesDropped&&s.isInteger(d.framesDropped.low)&&s.isInteger(d.framesDropped.high))?"framesDropped: integer|Long expected":d.framesReceived!=null&&d.hasOwnProperty("framesReceived")&&!s.isInteger(d.framesReceived)&&!(d.framesReceived&&s.isInteger(d.framesReceived.low)&&s.isInteger(d.framesReceived.high))?"framesReceived: integer|Long expected":null},"verify"),h.fromObject=n(function(d){if(d instanceof a.slack.calls.analytics.RecvMedia.Video)return d;let y=new a.slack.calls.analytics.RecvMedia.Video;return d.firCount!=null&&(s.Long?(y.firCount=s.Long.fromValue(d.firCount)).unsigned=!0:typeof d.firCount=="string"?y.firCount=parseInt(d.firCount,10):typeof d.firCount=="number"?y.firCount=d.firCount:typeof d.firCount=="object"&&(y.firCount=new s.LongBits(d.firCount.low>>>0,d.firCount.high>>>0).toNumber(!0))),d.nackCount!=null&&(s.Long?(y.nackCount=s.Long.fromValue(d.nackCount)).unsigned=!0:typeof d.nackCount=="string"?y.nackCount=parseInt(d.nackCount,10):typeof d.nackCount=="number"?y.nackCount=d.nackCount:typeof d.nackCount=="object"&&(y.nackCount=new s.LongBits(d.nackCount.low>>>0,d.nackCount.high>>>0).toNumber(!0))),d.pliCount!=null&&(s.Long?(y.pliCount=s.Long.fromValue(d.pliCount)).unsigned=!0:typeof d.pliCount=="string"?y.pliCount=parseInt(d.pliCount,10):typeof d.pliCount=="number"?y.pliCount=d.pliCount:typeof d.pliCount=="object"&&(y.pliCount=new s.LongBits(d.pliCount.low>>>0,d.pliCount.high>>>0).toNumber(!0))),d.sliCount!=null&&(s.Long?(y.sliCount=s.Long.fromValue(d.sliCount)).unsigned=!0:typeof d.sliCount=="string"?y.sliCount=parseInt(d.sliCount,10):typeof d.sliCount=="number"?y.sliCount=d.sliCount:typeof d.sliCount=="object"&&(y.sliCount=new s.LongBits(d.sliCount.low>>>0,d.sliCount.high>>>0).toNumber(!0))),d.frameHeight!=null&&(s.Long?(y.frameHeight=s.Long.fromValue(d.frameHeight)).unsigned=!0:typeof d.frameHeight=="string"?y.frameHeight=parseInt(d.frameHeight,10):typeof d.frameHeight=="number"?y.frameHeight=d.frameHeight:typeof d.frameHeight=="object"&&(y.frameHeight=new s.LongBits(d.frameHeight.low>>>0,d.frameHeight.high>>>0).toNumber(!0))),d.frameWidth!=null&&(s.Long?(y.frameWidth=s.Long.fromValue(d.frameWidth)).unsigned=!0:typeof d.frameWidth=="string"?y.frameWidth=parseInt(d.frameWidth,10):typeof d.frameWidth=="number"?y.frameWidth=d.frameWidth:typeof d.frameWidth=="object"&&(y.frameWidth=new s.LongBits(d.frameWidth.low>>>0,d.frameWidth.high>>>0).toNumber(!0))),d.framesPerSecond!=null&&(y.framesPerSecond=Number(d.framesPerSecond)),d.framesCorrupted!=null&&(s.Long?(y.framesCorrupted=s.Long.fromValue(d.framesCorrupted)).unsigned=!0:typeof d.framesCorrupted=="string"?y.framesCorrupted=parseInt(d.framesCorrupted,10):typeof d.framesCorrupted=="number"?y.framesCorrupted=d.framesCorrupted:typeof d.framesCorrupted=="object"&&(y.framesCorrupted=new s.LongBits(d.framesCorrupted.low>>>0,d.framesCorrupted.high>>>0).toNumber(!0))),d.framesDecoded!=null&&(s.Long?(y.framesDecoded=s.Long.fromValue(d.framesDecoded)).unsigned=!0:typeof d.framesDecoded=="string"?y.framesDecoded=parseInt(d.framesDecoded,10):typeof d.framesDecoded=="number"?y.framesDecoded=d.framesDecoded:typeof d.framesDecoded=="object"&&(y.framesDecoded=new s.LongBits(d.framesDecoded.low>>>0,d.framesDecoded.high>>>0).toNumber(!0))),d.framesDropped!=null&&(s.Long?(y.framesDropped=s.Long.fromValue(d.framesDropped)).unsigned=!0:typeof d.framesDropped=="string"?y.framesDropped=parseInt(d.framesDropped,10):typeof d.framesDropped=="number"?y.framesDropped=d.framesDropped:typeof d.framesDropped=="object"&&(y.framesDropped=new s.LongBits(d.framesDropped.low>>>0,d.framesDropped.high>>>0).toNumber(!0))),d.framesReceived!=null&&(s.Long?(y.framesReceived=s.Long.fromValue(d.framesReceived)).unsigned=!0:typeof d.framesReceived=="string"?y.framesReceived=parseInt(d.framesReceived,10):typeof d.framesReceived=="number"?y.framesReceived=d.framesReceived:typeof d.framesReceived=="object"&&(y.framesReceived=new s.LongBits(d.framesReceived.low>>>0,d.framesReceived.high>>>0).toNumber(!0))),y},"fromObject"),h.toObject=n(function(d,y){y||(y={});let S={};if(y.defaults){if(s.Long){let b=new s.Long(0,0,!0);S.firCount=y.longs===String?b.toString():y.longs===Number?b.toNumber():b}else S.firCount=y.longs===String?"0":0;if(s.Long){let b=new s.Long(0,0,!0);S.nackCount=y.longs===String?b.toString():y.longs===Number?b.toNumber():b}else S.nackCount=y.longs===String?"0":0;if(s.Long){let b=new s.Long(0,0,!0);S.pliCount=y.longs===String?b.toString():y.longs===Number?b.toNumber():b}else S.pliCount=y.longs===String?"0":0;if(s.Long){let b=new s.Long(0,0,!0);S.sliCount=y.longs===String?b.toString():y.longs===Number?b.toNumber():b}else S.sliCount=y.longs===String?"0":0;if(s.Long){let b=new s.Long(0,0,!0);S.frameHeight=y.longs===String?b.toString():y.longs===Number?b.toNumber():b}else S.frameHeight=y.longs===String?"0":0;if(s.Long){let b=new s.Long(0,0,!0);S.frameWidth=y.longs===String?b.toString():y.longs===Number?b.toNumber():b}else S.frameWidth=y.longs===String?"0":0;if(S.framesPerSecond=0,s.Long){let b=new s.Long(0,0,!0);S.framesCorrupted=y.longs===String?b.toString():y.longs===Number?b.toNumber():b}else S.framesCorrupted=y.longs===String?"0":0;if(s.Long){let b=new s.Long(0,0,!0);S.framesDecoded=y.longs===String?b.toString():y.longs===Number?b.toNumber():b}else S.framesDecoded=y.longs===String?"0":0;if(s.Long){let b=new s.Long(0,0,!0);S.framesDropped=y.longs===String?b.toString():y.longs===Number?b.toNumber():b}else S.framesDropped=y.longs===String?"0":0;if(s.Long){let b=new s.Long(0,0,!0);S.framesReceived=y.longs===String?b.toString():y.longs===Number?b.toNumber():b}else S.framesReceived=y.longs===String?"0":0}return d.firCount!=null&&d.hasOwnProperty("firCount")&&(typeof d.firCount=="number"?S.firCount=y.longs===String?String(d.firCount):d.firCount:S.firCount=y.longs===String?s.Long.prototype.toString.call(d.firCount):y.longs===Number?new s.LongBits(d.firCount.low>>>0,d.firCount.high>>>0).toNumber(!0):d.firCount),d.nackCount!=null&&d.hasOwnProperty("nackCount")&&(typeof d.nackCount=="number"?S.nackCount=y.longs===String?String(d.nackCount):d.nackCount:S.nackCount=y.longs===String?s.Long.prototype.toString.call(d.nackCount):y.longs===Number?new s.LongBits(d.nackCount.low>>>0,d.nackCount.high>>>0).toNumber(!0):d.nackCount),d.pliCount!=null&&d.hasOwnProperty("pliCount")&&(typeof d.pliCount=="number"?S.pliCount=y.longs===String?String(d.pliCount):d.pliCount:S.pliCount=y.longs===String?s.Long.prototype.toString.call(d.pliCount):y.longs===Number?new s.LongBits(d.pliCount.low>>>0,d.pliCount.high>>>0).toNumber(!0):d.pliCount),d.sliCount!=null&&d.hasOwnProperty("sliCount")&&(typeof d.sliCount=="number"?S.sliCount=y.longs===String?String(d.sliCount):d.sliCount:S.sliCount=y.longs===String?s.Long.prototype.toString.call(d.sliCount):y.longs===Number?new s.LongBits(d.sliCount.low>>>0,d.sliCount.high>>>0).toNumber(!0):d.sliCount),d.frameHeight!=null&&d.hasOwnProperty("frameHeight")&&(typeof d.frameHeight=="number"?S.frameHeight=y.longs===String?String(d.frameHeight):d.frameHeight:S.frameHeight=y.longs===String?s.Long.prototype.toString.call(d.frameHeight):y.longs===Number?new s.LongBits(d.frameHeight.low>>>0,d.frameHeight.high>>>0).toNumber(!0):d.frameHeight),d.frameWidth!=null&&d.hasOwnProperty("frameWidth")&&(typeof d.frameWidth=="number"?S.frameWidth=y.longs===String?String(d.frameWidth):d.frameWidth:S.frameWidth=y.longs===String?s.Long.prototype.toString.call(d.frameWidth):y.longs===Number?new s.LongBits(d.frameWidth.low>>>0,d.frameWidth.high>>>0).toNumber(!0):d.frameWidth),d.framesPerSecond!=null&&d.hasOwnProperty("framesPerSecond")&&(S.framesPerSecond=y.json&&!isFinite(d.framesPerSecond)?String(d.framesPerSecond):d.framesPerSecond),d.framesCorrupted!=null&&d.hasOwnProperty("framesCorrupted")&&(typeof d.framesCorrupted=="number"?S.framesCorrupted=y.longs===String?String(d.framesCorrupted):d.framesCorrupted:S.framesCorrupted=y.longs===String?s.Long.prototype.toString.call(d.framesCorrupted):y.longs===Number?new s.LongBits(d.framesCorrupted.low>>>0,d.framesCorrupted.high>>>0).toNumber(!0):d.framesCorrupted),d.framesDecoded!=null&&d.hasOwnProperty("framesDecoded")&&(typeof d.framesDecoded=="number"?S.framesDecoded=y.longs===String?String(d.framesDecoded):d.framesDecoded:S.framesDecoded=y.longs===String?s.Long.prototype.toString.call(d.framesDecoded):y.longs===Number?new s.LongBits(d.framesDecoded.low>>>0,d.framesDecoded.high>>>0).toNumber(!0):d.framesDecoded),d.framesDropped!=null&&d.hasOwnProperty("framesDropped")&&(typeof d.framesDropped=="number"?S.framesDropped=y.longs===String?String(d.framesDropped):d.framesDropped:S.framesDropped=y.longs===String?s.Long.prototype.toString.call(d.framesDropped):y.longs===Number?new s.LongBits(d.framesDropped.low>>>0,d.framesDropped.high>>>0).toNumber(!0):d.framesDropped),d.framesReceived!=null&&d.hasOwnProperty("framesReceived")&&(typeof d.framesReceived=="number"?S.framesReceived=y.longs===String?String(d.framesReceived):d.framesReceived:S.framesReceived=y.longs===String?s.Long.prototype.toString.call(d.framesReceived):y.longs===Number?new s.LongBits(d.framesReceived.low>>>0,d.framesReceived.high>>>0).toNumber(!0):d.framesReceived),S},"toObject"),h.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),h.getTypeUrl=n(function(d){return d===void 0&&(d="type.googleapis.com"),d+"/slack.calls.analytics.RecvMedia.Video"},"getTypeUrl"),h}(),o}(),r.SendMedia=function(){function o(h){if(h)for(let p=Object.keys(h),d=0;d<p.length;++d)h[p[d]]!=null&&(this[p[d]]=h[p[d]])}n(o,"SendMedia"),o.prototype.peerId=s.Long?s.Long.fromBits(0,0,!0):0,o.prototype.bytesSent=s.Long?s.Long.fromBits(0,0,!0):0,o.prototype.packetsSent=s.Long?s.Long.fromBits(0,0,!0):0,o.prototype.codec=0,o.prototype.peerIdString="",o.prototype.audioStats=null,o.prototype.videoStats=null;let f;return Object.defineProperty(o.prototype,"mediaType",{get:s.oneOfGetter(f=["audioStats","videoStats"]),set:s.oneOfSetter(f)}),o.create=n(function(p){return new o(p)},"create"),o.encode=n(function(p,d){return d||(d=g.create()),p.peerId!=null&&Object.hasOwnProperty.call(p,"peerId")&&d.uint32(8).uint64(p.peerId),p.bytesSent!=null&&Object.hasOwnProperty.call(p,"bytesSent")&&d.uint32(16).uint64(p.bytesSent),p.packetsSent!=null&&Object.hasOwnProperty.call(p,"packetsSent")&&d.uint32(24).uint64(p.packetsSent),p.codec!=null&&Object.hasOwnProperty.call(p,"codec")&&d.uint32(32).int32(p.codec),p.audioStats!=null&&Object.hasOwnProperty.call(p,"audioStats")&&a.slack.calls.analytics.SendMedia.Audio.encode(p.audioStats,d.uint32(42).fork()).ldelim(),p.videoStats!=null&&Object.hasOwnProperty.call(p,"videoStats")&&a.slack.calls.analytics.SendMedia.Video.encode(p.videoStats,d.uint32(50).fork()).ldelim(),p.peerIdString!=null&&Object.hasOwnProperty.call(p,"peerIdString")&&d.uint32(58).string(p.peerIdString),d},"encode"),o.encodeDelimited=n(function(p,d){return this.encode(p,d).ldelim()},"encodeDelimited"),o.decode=n(function(p,d){p instanceof v||(p=v.create(p));let y=d===void 0?p.len:p.pos+d,S=new a.slack.calls.analytics.SendMedia;for(;p.pos<y;){let b=p.uint32();switch(b>>>3){case 1:{S.peerId=p.uint64();break}case 2:{S.bytesSent=p.uint64();break}case 3:{S.packetsSent=p.uint64();break}case 4:{S.codec=p.int32();break}case 7:{S.peerIdString=p.string();break}case 5:{S.audioStats=a.slack.calls.analytics.SendMedia.Audio.decode(p,p.uint32());break}case 6:{S.videoStats=a.slack.calls.analytics.SendMedia.Video.decode(p,p.uint32());break}default:p.skipType(b&7);break}}return S},"decode"),o.decodeDelimited=n(function(p){return p instanceof v||(p=new v(p)),this.decode(p,p.uint32())},"decodeDelimited"),o.verify=n(function(p){if(typeof p!="object"||p===null)return"object expected";let d={};if(p.peerId!=null&&p.hasOwnProperty("peerId")&&!s.isInteger(p.peerId)&&!(p.peerId&&s.isInteger(p.peerId.low)&&s.isInteger(p.peerId.high)))return"peerId: integer|Long expected";if(p.bytesSent!=null&&p.hasOwnProperty("bytesSent")&&!s.isInteger(p.bytesSent)&&!(p.bytesSent&&s.isInteger(p.bytesSent.low)&&s.isInteger(p.bytesSent.high)))return"bytesSent: integer|Long expected";if(p.packetsSent!=null&&p.hasOwnProperty("packetsSent")&&!s.isInteger(p.packetsSent)&&!(p.packetsSent&&s.isInteger(p.packetsSent.low)&&s.isInteger(p.packetsSent.high)))return"packetsSent: integer|Long expected";if(p.codec!=null&&p.hasOwnProperty("codec"))switch(p.codec){default:return"codec: enum value expected";case 0:case 1:case 2:case 3:case 4:break}if(p.peerIdString!=null&&p.hasOwnProperty("peerIdString")&&!s.isString(p.peerIdString))return"peerIdString: string expected";if(p.audioStats!=null&&p.hasOwnProperty("audioStats")){d.mediaType=1;{let y=a.slack.calls.analytics.SendMedia.Audio.verify(p.audioStats);if(y)return"audioStats."+y}}if(p.videoStats!=null&&p.hasOwnProperty("videoStats")){if(d.mediaType===1)return"mediaType: multiple values";d.mediaType=1;{let y=a.slack.calls.analytics.SendMedia.Video.verify(p.videoStats);if(y)return"videoStats."+y}}return null},"verify"),o.fromObject=n(function(p){if(p instanceof a.slack.calls.analytics.SendMedia)return p;let d=new a.slack.calls.analytics.SendMedia;switch(p.peerId!=null&&(s.Long?(d.peerId=s.Long.fromValue(p.peerId)).unsigned=!0:typeof p.peerId=="string"?d.peerId=parseInt(p.peerId,10):typeof p.peerId=="number"?d.peerId=p.peerId:typeof p.peerId=="object"&&(d.peerId=new s.LongBits(p.peerId.low>>>0,p.peerId.high>>>0).toNumber(!0))),p.bytesSent!=null&&(s.Long?(d.bytesSent=s.Long.fromValue(p.bytesSent)).unsigned=!0:typeof p.bytesSent=="string"?d.bytesSent=parseInt(p.bytesSent,10):typeof p.bytesSent=="number"?d.bytesSent=p.bytesSent:typeof p.bytesSent=="object"&&(d.bytesSent=new s.LongBits(p.bytesSent.low>>>0,p.bytesSent.high>>>0).toNumber(!0))),p.packetsSent!=null&&(s.Long?(d.packetsSent=s.Long.fromValue(p.packetsSent)).unsigned=!0:typeof p.packetsSent=="string"?d.packetsSent=parseInt(p.packetsSent,10):typeof p.packetsSent=="number"?d.packetsSent=p.packetsSent:typeof p.packetsSent=="object"&&(d.packetsSent=new s.LongBits(p.packetsSent.low>>>0,p.packetsSent.high>>>0).toNumber(!0))),p.codec){default:if(typeof p.codec=="number"){d.codec=p.codec;break}break;case"UNKNOWN":case 0:d.codec=0;break;case"OPUS":case 1:d.codec=1;break;case"VP8":case 2:d.codec=2;break;case"VP9":case 3:d.codec=3;break;case"H264":case 4:d.codec=4;break}if(p.peerIdString!=null&&(d.peerIdString=String(p.peerIdString)),p.audioStats!=null){if(typeof p.audioStats!="object")throw TypeError(".slack.calls.analytics.SendMedia.audioStats: object expected");d.audioStats=a.slack.calls.analytics.SendMedia.Audio.fromObject(p.audioStats)}if(p.videoStats!=null){if(typeof p.videoStats!="object")throw TypeError(".slack.calls.analytics.SendMedia.videoStats: object expected");d.videoStats=a.slack.calls.analytics.SendMedia.Video.fromObject(p.videoStats)}return d},"fromObject"),o.toObject=n(function(p,d){d||(d={});let y={};if(d.defaults){if(s.Long){let S=new s.Long(0,0,!0);y.peerId=d.longs===String?S.toString():d.longs===Number?S.toNumber():S}else y.peerId=d.longs===String?"0":0;if(s.Long){let S=new s.Long(0,0,!0);y.bytesSent=d.longs===String?S.toString():d.longs===Number?S.toNumber():S}else y.bytesSent=d.longs===String?"0":0;if(s.Long){let S=new s.Long(0,0,!0);y.packetsSent=d.longs===String?S.toString():d.longs===Number?S.toNumber():S}else y.packetsSent=d.longs===String?"0":0;y.codec=d.enums===String?"UNKNOWN":0,y.peerIdString=""}return p.peerId!=null&&p.hasOwnProperty("peerId")&&(typeof p.peerId=="number"?y.peerId=d.longs===String?String(p.peerId):p.peerId:y.peerId=d.longs===String?s.Long.prototype.toString.call(p.peerId):d.longs===Number?new s.LongBits(p.peerId.low>>>0,p.peerId.high>>>0).toNumber(!0):p.peerId),p.bytesSent!=null&&p.hasOwnProperty("bytesSent")&&(typeof p.bytesSent=="number"?y.bytesSent=d.longs===String?String(p.bytesSent):p.bytesSent:y.bytesSent=d.longs===String?s.Long.prototype.toString.call(p.bytesSent):d.longs===Number?new s.LongBits(p.bytesSent.low>>>0,p.bytesSent.high>>>0).toNumber(!0):p.bytesSent),p.packetsSent!=null&&p.hasOwnProperty("packetsSent")&&(typeof p.packetsSent=="number"?y.packetsSent=d.longs===String?String(p.packetsSent):p.packetsSent:y.packetsSent=d.longs===String?s.Long.prototype.toString.call(p.packetsSent):d.longs===Number?new s.LongBits(p.packetsSent.low>>>0,p.packetsSent.high>>>0).toNumber(!0):p.packetsSent),p.codec!=null&&p.hasOwnProperty("codec")&&(y.codec=d.enums===String?a.slack.calls.analytics.Codec[p.codec]===void 0?p.codec:a.slack.calls.analytics.Codec[p.codec]:p.codec),p.audioStats!=null&&p.hasOwnProperty("audioStats")&&(y.audioStats=a.slack.calls.analytics.SendMedia.Audio.toObject(p.audioStats,d),d.oneofs&&(y.mediaType="audioStats")),p.videoStats!=null&&p.hasOwnProperty("videoStats")&&(y.videoStats=a.slack.calls.analytics.SendMedia.Video.toObject(p.videoStats,d),d.oneofs&&(y.mediaType="videoStats")),p.peerIdString!=null&&p.hasOwnProperty("peerIdString")&&(y.peerIdString=p.peerIdString),y},"toObject"),o.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),o.getTypeUrl=n(function(p){return p===void 0&&(p="type.googleapis.com"),p+"/slack.calls.analytics.SendMedia"},"getTypeUrl"),o.Audio=function(){function h(p){if(p)for(let d=Object.keys(p),y=0;y<d.length;++y)p[d[y]]!=null&&(this[d[y]]=p[d[y]])}return n(h,"Audio"),h.prototype.audioLevel=0,h.prototype.echoReturnLoss=0,h.prototype.echoReturnLossEnhancement=0,h.prototype.totalAudioEnergy=0,h.prototype.totalSamplesDuration=0,h.create=n(function(d){return new h(d)},"create"),h.encode=n(function(d,y){return y||(y=g.create()),d.audioLevel!=null&&Object.hasOwnProperty.call(d,"audioLevel")&&y.uint32(9).double(d.audioLevel),d.echoReturnLoss!=null&&Object.hasOwnProperty.call(d,"echoReturnLoss")&&y.uint32(17).double(d.echoReturnLoss),d.echoReturnLossEnhancement!=null&&Object.hasOwnProperty.call(d,"echoReturnLossEnhancement")&&y.uint32(25).double(d.echoReturnLossEnhancement),d.totalAudioEnergy!=null&&Object.hasOwnProperty.call(d,"totalAudioEnergy")&&y.uint32(33).double(d.totalAudioEnergy),d.totalSamplesDuration!=null&&Object.hasOwnProperty.call(d,"totalSamplesDuration")&&y.uint32(41).double(d.totalSamplesDuration),y},"encode"),h.encodeDelimited=n(function(d,y){return this.encode(d,y).ldelim()},"encodeDelimited"),h.decode=n(function(d,y){d instanceof v||(d=v.create(d));let S=y===void 0?d.len:d.pos+y,b=new a.slack.calls.analytics.SendMedia.Audio;for(;d.pos<S;){let _=d.uint32();switch(_>>>3){case 1:{b.audioLevel=d.double();break}case 2:{b.echoReturnLoss=d.double();break}case 3:{b.echoReturnLossEnhancement=d.double();break}case 4:{b.totalAudioEnergy=d.double();break}case 5:{b.totalSamplesDuration=d.double();break}default:d.skipType(_&7);break}}return b},"decode"),h.decodeDelimited=n(function(d){return d instanceof v||(d=new v(d)),this.decode(d,d.uint32())},"decodeDelimited"),h.verify=n(function(d){return typeof d!="object"||d===null?"object expected":d.audioLevel!=null&&d.hasOwnProperty("audioLevel")&&typeof d.audioLevel!="number"?"audioLevel: number expected":d.echoReturnLoss!=null&&d.hasOwnProperty("echoReturnLoss")&&typeof d.echoReturnLoss!="number"?"echoReturnLoss: number expected":d.echoReturnLossEnhancement!=null&&d.hasOwnProperty("echoReturnLossEnhancement")&&typeof d.echoReturnLossEnhancement!="number"?"echoReturnLossEnhancement: number expected":d.totalAudioEnergy!=null&&d.hasOwnProperty("totalAudioEnergy")&&typeof d.totalAudioEnergy!="number"?"totalAudioEnergy: number expected":d.totalSamplesDuration!=null&&d.hasOwnProperty("totalSamplesDuration")&&typeof d.totalSamplesDuration!="number"?"totalSamplesDuration: number expected":null},"verify"),h.fromObject=n(function(d){if(d instanceof a.slack.calls.analytics.SendMedia.Audio)return d;let y=new a.slack.calls.analytics.SendMedia.Audio;return d.audioLevel!=null&&(y.audioLevel=Number(d.audioLevel)),d.echoReturnLoss!=null&&(y.echoReturnLoss=Number(d.echoReturnLoss)),d.echoReturnLossEnhancement!=null&&(y.echoReturnLossEnhancement=Number(d.echoReturnLossEnhancement)),d.totalAudioEnergy!=null&&(y.totalAudioEnergy=Number(d.totalAudioEnergy)),d.totalSamplesDuration!=null&&(y.totalSamplesDuration=Number(d.totalSamplesDuration)),y},"fromObject"),h.toObject=n(function(d,y){y||(y={});let S={};return y.defaults&&(S.audioLevel=0,S.echoReturnLoss=0,S.echoReturnLossEnhancement=0,S.totalAudioEnergy=0,S.totalSamplesDuration=0),d.audioLevel!=null&&d.hasOwnProperty("audioLevel")&&(S.audioLevel=y.json&&!isFinite(d.audioLevel)?String(d.audioLevel):d.audioLevel),d.echoReturnLoss!=null&&d.hasOwnProperty("echoReturnLoss")&&(S.echoReturnLoss=y.json&&!isFinite(d.echoReturnLoss)?String(d.echoReturnLoss):d.echoReturnLoss),d.echoReturnLossEnhancement!=null&&d.hasOwnProperty("echoReturnLossEnhancement")&&(S.echoReturnLossEnhancement=y.json&&!isFinite(d.echoReturnLossEnhancement)?String(d.echoReturnLossEnhancement):d.echoReturnLossEnhancement),d.totalAudioEnergy!=null&&d.hasOwnProperty("totalAudioEnergy")&&(S.totalAudioEnergy=y.json&&!isFinite(d.totalAudioEnergy)?String(d.totalAudioEnergy):d.totalAudioEnergy),d.totalSamplesDuration!=null&&d.hasOwnProperty("totalSamplesDuration")&&(S.totalSamplesDuration=y.json&&!isFinite(d.totalSamplesDuration)?String(d.totalSamplesDuration):d.totalSamplesDuration),S},"toObject"),h.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),h.getTypeUrl=n(function(d){return d===void 0&&(d="type.googleapis.com"),d+"/slack.calls.analytics.SendMedia.Audio"},"getTypeUrl"),h}(),o.Video=function(){function h(p){if(p)for(let d=Object.keys(p),y=0;y<d.length;++y)p[d[y]]!=null&&(this[d[y]]=p[d[y]])}return n(h,"Video"),h.prototype.frameHeight=s.Long?s.Long.fromBits(0,0,!0):0,h.prototype.frameWidth=s.Long?s.Long.fromBits(0,0,!0):0,h.prototype.framesPerSecond=0,h.prototype.framesSent=s.Long?s.Long.fromBits(0,0,!0):0,h.prototype.framesEncoded=s.Long?s.Long.fromBits(0,0,!0):0,h.prototype.hugeFramesSent=s.Long?s.Long.fromBits(0,0,!0):0,h.create=n(function(d){return new h(d)},"create"),h.encode=n(function(d,y){return y||(y=g.create()),d.frameHeight!=null&&Object.hasOwnProperty.call(d,"frameHeight")&&y.uint32(8).uint64(d.frameHeight),d.frameWidth!=null&&Object.hasOwnProperty.call(d,"frameWidth")&&y.uint32(16).uint64(d.frameWidth),d.framesPerSecond!=null&&Object.hasOwnProperty.call(d,"framesPerSecond")&&y.uint32(25).double(d.framesPerSecond),d.framesSent!=null&&Object.hasOwnProperty.call(d,"framesSent")&&y.uint32(32).uint64(d.framesSent),d.framesEncoded!=null&&Object.hasOwnProperty.call(d,"framesEncoded")&&y.uint32(40).uint64(d.framesEncoded),d.hugeFramesSent!=null&&Object.hasOwnProperty.call(d,"hugeFramesSent")&&y.uint32(48).uint64(d.hugeFramesSent),y},"encode"),h.encodeDelimited=n(function(d,y){return this.encode(d,y).ldelim()},"encodeDelimited"),h.decode=n(function(d,y){d instanceof v||(d=v.create(d));let S=y===void 0?d.len:d.pos+y,b=new a.slack.calls.analytics.SendMedia.Video;for(;d.pos<S;){let _=d.uint32();switch(_>>>3){case 1:{b.frameHeight=d.uint64();break}case 2:{b.frameWidth=d.uint64();break}case 3:{b.framesPerSecond=d.double();break}case 4:{b.framesSent=d.uint64();break}case 5:{b.framesEncoded=d.uint64();break}case 6:{b.hugeFramesSent=d.uint64();break}default:d.skipType(_&7);break}}return b},"decode"),h.decodeDelimited=n(function(d){return d instanceof v||(d=new v(d)),this.decode(d,d.uint32())},"decodeDelimited"),h.verify=n(function(d){return typeof d!="object"||d===null?"object expected":d.frameHeight!=null&&d.hasOwnProperty("frameHeight")&&!s.isInteger(d.frameHeight)&&!(d.frameHeight&&s.isInteger(d.frameHeight.low)&&s.isInteger(d.frameHeight.high))?"frameHeight: integer|Long expected":d.frameWidth!=null&&d.hasOwnProperty("frameWidth")&&!s.isInteger(d.frameWidth)&&!(d.frameWidth&&s.isInteger(d.frameWidth.low)&&s.isInteger(d.frameWidth.high))?"frameWidth: integer|Long expected":d.framesPerSecond!=null&&d.hasOwnProperty("framesPerSecond")&&typeof d.framesPerSecond!="number"?"framesPerSecond: number expected":d.framesSent!=null&&d.hasOwnProperty("framesSent")&&!s.isInteger(d.framesSent)&&!(d.framesSent&&s.isInteger(d.framesSent.low)&&s.isInteger(d.framesSent.high))?"framesSent: integer|Long expected":d.framesEncoded!=null&&d.hasOwnProperty("framesEncoded")&&!s.isInteger(d.framesEncoded)&&!(d.framesEncoded&&s.isInteger(d.framesEncoded.low)&&s.isInteger(d.framesEncoded.high))?"framesEncoded: integer|Long expected":d.hugeFramesSent!=null&&d.hasOwnProperty("hugeFramesSent")&&!s.isInteger(d.hugeFramesSent)&&!(d.hugeFramesSent&&s.isInteger(d.hugeFramesSent.low)&&s.isInteger(d.hugeFramesSent.high))?"hugeFramesSent: integer|Long expected":null},"verify"),h.fromObject=n(function(d){if(d instanceof a.slack.calls.analytics.SendMedia.Video)return d;let y=new a.slack.calls.analytics.SendMedia.Video;return d.frameHeight!=null&&(s.Long?(y.frameHeight=s.Long.fromValue(d.frameHeight)).unsigned=!0:typeof d.frameHeight=="string"?y.frameHeight=parseInt(d.frameHeight,10):typeof d.frameHeight=="number"?y.frameHeight=d.frameHeight:typeof d.frameHeight=="object"&&(y.frameHeight=new s.LongBits(d.frameHeight.low>>>0,d.frameHeight.high>>>0).toNumber(!0))),d.frameWidth!=null&&(s.Long?(y.frameWidth=s.Long.fromValue(d.frameWidth)).unsigned=!0:typeof d.frameWidth=="string"?y.frameWidth=parseInt(d.frameWidth,10):typeof d.frameWidth=="number"?y.frameWidth=d.frameWidth:typeof d.frameWidth=="object"&&(y.frameWidth=new s.LongBits(d.frameWidth.low>>>0,d.frameWidth.high>>>0).toNumber(!0))),d.framesPerSecond!=null&&(y.framesPerSecond=Number(d.framesPerSecond)),d.framesSent!=null&&(s.Long?(y.framesSent=s.Long.fromValue(d.framesSent)).unsigned=!0:typeof d.framesSent=="string"?y.framesSent=parseInt(d.framesSent,10):typeof d.framesSent=="number"?y.framesSent=d.framesSent:typeof d.framesSent=="object"&&(y.framesSent=new s.LongBits(d.framesSent.low>>>0,d.framesSent.high>>>0).toNumber(!0))),d.framesEncoded!=null&&(s.Long?(y.framesEncoded=s.Long.fromValue(d.framesEncoded)).unsigned=!0:typeof d.framesEncoded=="string"?y.framesEncoded=parseInt(d.framesEncoded,10):typeof d.framesEncoded=="number"?y.framesEncoded=d.framesEncoded:typeof d.framesEncoded=="object"&&(y.framesEncoded=new s.LongBits(d.framesEncoded.low>>>0,d.framesEncoded.high>>>0).toNumber(!0))),d.hugeFramesSent!=null&&(s.Long?(y.hugeFramesSent=s.Long.fromValue(d.hugeFramesSent)).unsigned=!0:typeof d.hugeFramesSent=="string"?y.hugeFramesSent=parseInt(d.hugeFramesSent,10):typeof d.hugeFramesSent=="number"?y.hugeFramesSent=d.hugeFramesSent:typeof d.hugeFramesSent=="object"&&(y.hugeFramesSent=new s.LongBits(d.hugeFramesSent.low>>>0,d.hugeFramesSent.high>>>0).toNumber(!0))),y},"fromObject"),h.toObject=n(function(d,y){y||(y={});let S={};if(y.defaults){if(s.Long){let b=new s.Long(0,0,!0);S.frameHeight=y.longs===String?b.toString():y.longs===Number?b.toNumber():b}else S.frameHeight=y.longs===String?"0":0;if(s.Long){let b=new s.Long(0,0,!0);S.frameWidth=y.longs===String?b.toString():y.longs===Number?b.toNumber():b}else S.frameWidth=y.longs===String?"0":0;if(S.framesPerSecond=0,s.Long){let b=new s.Long(0,0,!0);S.framesSent=y.longs===String?b.toString():y.longs===Number?b.toNumber():b}else S.framesSent=y.longs===String?"0":0;if(s.Long){let b=new s.Long(0,0,!0);S.framesEncoded=y.longs===String?b.toString():y.longs===Number?b.toNumber():b}else S.framesEncoded=y.longs===String?"0":0;if(s.Long){let b=new s.Long(0,0,!0);S.hugeFramesSent=y.longs===String?b.toString():y.longs===Number?b.toNumber():b}else S.hugeFramesSent=y.longs===String?"0":0}return d.frameHeight!=null&&d.hasOwnProperty("frameHeight")&&(typeof d.frameHeight=="number"?S.frameHeight=y.longs===String?String(d.frameHeight):d.frameHeight:S.frameHeight=y.longs===String?s.Long.prototype.toString.call(d.frameHeight):y.longs===Number?new s.LongBits(d.frameHeight.low>>>0,d.frameHeight.high>>>0).toNumber(!0):d.frameHeight),d.frameWidth!=null&&d.hasOwnProperty("frameWidth")&&(typeof d.frameWidth=="number"?S.frameWidth=y.longs===String?String(d.frameWidth):d.frameWidth:S.frameWidth=y.longs===String?s.Long.prototype.toString.call(d.frameWidth):y.longs===Number?new s.LongBits(d.frameWidth.low>>>0,d.frameWidth.high>>>0).toNumber(!0):d.frameWidth),d.framesPerSecond!=null&&d.hasOwnProperty("framesPerSecond")&&(S.framesPerSecond=y.json&&!isFinite(d.framesPerSecond)?String(d.framesPerSecond):d.framesPerSecond),d.framesSent!=null&&d.hasOwnProperty("framesSent")&&(typeof d.framesSent=="number"?S.framesSent=y.longs===String?String(d.framesSent):d.framesSent:S.framesSent=y.longs===String?s.Long.prototype.toString.call(d.framesSent):y.longs===Number?new s.LongBits(d.framesSent.low>>>0,d.framesSent.high>>>0).toNumber(!0):d.framesSent),d.framesEncoded!=null&&d.hasOwnProperty("framesEncoded")&&(typeof d.framesEncoded=="number"?S.framesEncoded=y.longs===String?String(d.framesEncoded):d.framesEncoded:S.framesEncoded=y.longs===String?s.Long.prototype.toString.call(d.framesEncoded):y.longs===Number?new s.LongBits(d.framesEncoded.low>>>0,d.framesEncoded.high>>>0).toNumber(!0):d.framesEncoded),d.hugeFramesSent!=null&&d.hasOwnProperty("hugeFramesSent")&&(typeof d.hugeFramesSent=="number"?S.hugeFramesSent=y.longs===String?String(d.hugeFramesSent):d.hugeFramesSent:S.hugeFramesSent=y.longs===String?s.Long.prototype.toString.call(d.hugeFramesSent):y.longs===Number?new s.LongBits(d.hugeFramesSent.low>>>0,d.hugeFramesSent.high>>>0).toNumber(!0):d.hugeFramesSent),S},"toObject"),h.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),h.getTypeUrl=n(function(d){return d===void 0&&(d="type.googleapis.com"),d+"/slack.calls.analytics.SendMedia.Video"},"getTypeUrl"),h}(),o}(),r.MemoryInfo=function(){function o(f){if(f)for(let h=Object.keys(f),p=0;p<h.length;++p)f[h[p]]!=null&&(this[h[p]]=f[h[p]])}return n(o,"MemoryInfo"),o.prototype.workingSetSize=0,o.prototype.peakWorkingSetSize=0,o.create=n(function(h){return new o(h)},"create"),o.encode=n(function(h,p){return p||(p=g.create()),h.workingSetSize!=null&&Object.hasOwnProperty.call(h,"workingSetSize")&&p.uint32(9).double(h.workingSetSize),h.peakWorkingSetSize!=null&&Object.hasOwnProperty.call(h,"peakWorkingSetSize")&&p.uint32(17).double(h.peakWorkingSetSize),p},"encode"),o.encodeDelimited=n(function(h,p){return this.encode(h,p).ldelim()},"encodeDelimited"),o.decode=n(function(h,p){h instanceof v||(h=v.create(h));let d=p===void 0?h.len:h.pos+p,y=new a.slack.calls.analytics.MemoryInfo;for(;h.pos<d;){let S=h.uint32();switch(S>>>3){case 1:{y.workingSetSize=h.double();break}case 2:{y.peakWorkingSetSize=h.double();break}default:h.skipType(S&7);break}}return y},"decode"),o.decodeDelimited=n(function(h){return h instanceof v||(h=new v(h)),this.decode(h,h.uint32())},"decodeDelimited"),o.verify=n(function(h){return typeof h!="object"||h===null?"object expected":h.workingSetSize!=null&&h.hasOwnProperty("workingSetSize")&&typeof h.workingSetSize!="number"?"workingSetSize: number expected":h.peakWorkingSetSize!=null&&h.hasOwnProperty("peakWorkingSetSize")&&typeof h.peakWorkingSetSize!="number"?"peakWorkingSetSize: number expected":null},"verify"),o.fromObject=n(function(h){if(h instanceof a.slack.calls.analytics.MemoryInfo)return h;let p=new a.slack.calls.analytics.MemoryInfo;return h.workingSetSize!=null&&(p.workingSetSize=Number(h.workingSetSize)),h.peakWorkingSetSize!=null&&(p.peakWorkingSetSize=Number(h.peakWorkingSetSize)),p},"fromObject"),o.toObject=n(function(h,p){p||(p={});let d={};return p.defaults&&(d.workingSetSize=0,d.peakWorkingSetSize=0),h.workingSetSize!=null&&h.hasOwnProperty("workingSetSize")&&(d.workingSetSize=p.json&&!isFinite(h.workingSetSize)?String(h.workingSetSize):h.workingSetSize),h.peakWorkingSetSize!=null&&h.hasOwnProperty("peakWorkingSetSize")&&(d.peakWorkingSetSize=p.json&&!isFinite(h.peakWorkingSetSize)?String(h.peakWorkingSetSize):h.peakWorkingSetSize),d},"toObject"),o.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),o.getTypeUrl=n(function(h){return h===void 0&&(h="type.googleapis.com"),h+"/slack.calls.analytics.MemoryInfo"},"getTypeUrl"),o}(),r.AppMetrics=function(){function o(f){if(f)for(let h=Object.keys(f),p=0;p<h.length;++p)f[h[p]]!=null&&(this[h[p]]=f[h[p]])}return n(o,"AppMetrics"),o.prototype.cpu=0,o.prototype.memory=null,o.create=n(function(h){return new o(h)},"create"),o.encode=n(function(h,p){return p||(p=g.create()),h.cpu!=null&&Object.hasOwnProperty.call(h,"cpu")&&p.uint32(9).double(h.cpu),h.memory!=null&&Object.hasOwnProperty.call(h,"memory")&&a.slack.calls.analytics.MemoryInfo.encode(h.memory,p.uint32(18).fork()).ldelim(),p},"encode"),o.encodeDelimited=n(function(h,p){return this.encode(h,p).ldelim()},"encodeDelimited"),o.decode=n(function(h,p){h instanceof v||(h=v.create(h));let d=p===void 0?h.len:h.pos+p,y=new a.slack.calls.analytics.AppMetrics;for(;h.pos<d;){let S=h.uint32();switch(S>>>3){case 1:{y.cpu=h.double();break}case 2:{y.memory=a.slack.calls.analytics.MemoryInfo.decode(h,h.uint32());break}default:h.skipType(S&7);break}}return y},"decode"),o.decodeDelimited=n(function(h){return h instanceof v||(h=new v(h)),this.decode(h,h.uint32())},"decodeDelimited"),o.verify=n(function(h){if(typeof h!="object"||h===null)return"object expected";if(h.cpu!=null&&h.hasOwnProperty("cpu")&&typeof h.cpu!="number")return"cpu: number expected";if(h.memory!=null&&h.hasOwnProperty("memory")){let p=a.slack.calls.analytics.MemoryInfo.verify(h.memory);if(p)return"memory."+p}return null},"verify"),o.fromObject=n(function(h){if(h instanceof a.slack.calls.analytics.AppMetrics)return h;let p=new a.slack.calls.analytics.AppMetrics;if(h.cpu!=null&&(p.cpu=Number(h.cpu)),h.memory!=null){if(typeof h.memory!="object")throw TypeError(".slack.calls.analytics.AppMetrics.memory: object expected");p.memory=a.slack.calls.analytics.MemoryInfo.fromObject(h.memory)}return p},"fromObject"),o.toObject=n(function(h,p){p||(p={});let d={};return p.defaults&&(d.cpu=0,d.memory=null),h.cpu!=null&&h.hasOwnProperty("cpu")&&(d.cpu=p.json&&!isFinite(h.cpu)?String(h.cpu):h.cpu),h.memory!=null&&h.hasOwnProperty("memory")&&(d.memory=a.slack.calls.analytics.MemoryInfo.toObject(h.memory,p)),d},"toObject"),o.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),o.getTypeUrl=n(function(h){return h===void 0&&(h="type.googleapis.com"),h+"/slack.calls.analytics.AppMetrics"},"getTypeUrl"),o}(),r.Codec=function(){const o={},f=Object.create(o);return f[o[0]="UNKNOWN"]=0,f[o[1]="OPUS"]=1,f[o[2]="VP8"]=2,f[o[3]="VP9"]=3,f[o[4]="H264"]=4,f}(),r.Protocol=function(){const o={},f=Object.create(o);return f[o[0]="UDP"]=0,f[o[1]="TCP"]=1,f}(),r.PathType=function(){const o={},f=Object.create(o);return f[o[0]="DIRECT"]=0,f[o[1]="RELAY"]=1,f}(),r.Report=function(){function o(f){if(this.recv=[],this.send=[],f)for(let h=Object.keys(f),p=0;p<h.length;++p)f[h[p]]!=null&&(this[h[p]]=f[h[p]])}return n(o,"Report"),o.prototype.totalBytesSent=s.Long?s.Long.fromBits(0,0,!0):0,o.prototype.totalBytesReceived=s.Long?s.Long.fromBits(0,0,!0):0,o.prototype.totalRoundTripTime=0,o.prototype.currentRoundTripTime=0,o.prototype.availableOutgoingBitrate=s.Long?s.Long.fromBits(0,0,!0):0,o.prototype.protocol=0,o.prototype.pathType=0,o.prototype.recv=s.emptyArray,o.prototype.send=s.emptyArray,o.prototype.clientTime=s.Long?s.Long.fromBits(0,0,!0):0,o.prototype.availableIncomingBitrate=s.Long?s.Long.fromBits(0,0,!0):0,o.prototype.appMetrics=null,o.create=n(function(h){return new o(h)},"create"),o.encode=n(function(h,p){if(p||(p=g.create()),h.totalBytesSent!=null&&Object.hasOwnProperty.call(h,"totalBytesSent")&&p.uint32(8).uint64(h.totalBytesSent),h.totalBytesReceived!=null&&Object.hasOwnProperty.call(h,"totalBytesReceived")&&p.uint32(16).uint64(h.totalBytesReceived),h.totalRoundTripTime!=null&&Object.hasOwnProperty.call(h,"totalRoundTripTime")&&p.uint32(25).double(h.totalRoundTripTime),h.currentRoundTripTime!=null&&Object.hasOwnProperty.call(h,"currentRoundTripTime")&&p.uint32(33).double(h.currentRoundTripTime),h.availableOutgoingBitrate!=null&&Object.hasOwnProperty.call(h,"availableOutgoingBitrate")&&p.uint32(40).uint64(h.availableOutgoingBitrate),h.protocol!=null&&Object.hasOwnProperty.call(h,"protocol")&&p.uint32(48).int32(h.protocol),h.pathType!=null&&Object.hasOwnProperty.call(h,"pathType")&&p.uint32(56).int32(h.pathType),h.recv!=null&&h.recv.length)for(let d=0;d<h.recv.length;++d)a.slack.calls.analytics.RecvMedia.encode(h.recv[d],p.uint32(66).fork()).ldelim();if(h.send!=null&&h.send.length)for(let d=0;d<h.send.length;++d)a.slack.calls.analytics.SendMedia.encode(h.send[d],p.uint32(74).fork()).ldelim();return h.clientTime!=null&&Object.hasOwnProperty.call(h,"clientTime")&&p.uint32(80).uint64(h.clientTime),h.availableIncomingBitrate!=null&&Object.hasOwnProperty.call(h,"availableIncomingBitrate")&&p.uint32(88).uint64(h.availableIncomingBitrate),h.appMetrics!=null&&Object.hasOwnProperty.call(h,"appMetrics")&&a.slack.calls.analytics.AppMetrics.encode(h.appMetrics,p.uint32(98).fork()).ldelim(),p},"encode"),o.encodeDelimited=n(function(h,p){return this.encode(h,p).ldelim()},"encodeDelimited"),o.decode=n(function(h,p){h instanceof v||(h=v.create(h));let d=p===void 0?h.len:h.pos+p,y=new a.slack.calls.analytics.Report;for(;h.pos<d;){let S=h.uint32();switch(S>>>3){case 1:{y.totalBytesSent=h.uint64();break}case 2:{y.totalBytesReceived=h.uint64();break}case 3:{y.totalRoundTripTime=h.double();break}case 4:{y.currentRoundTripTime=h.double();break}case 5:{y.availableOutgoingBitrate=h.uint64();break}case 6:{y.protocol=h.int32();break}case 7:{y.pathType=h.int32();break}case 8:{y.recv&&y.recv.length||(y.recv=[]),y.recv.push(a.slack.calls.analytics.RecvMedia.decode(h,h.uint32()));break}case 9:{y.send&&y.send.length||(y.send=[]),y.send.push(a.slack.calls.analytics.SendMedia.decode(h,h.uint32()));break}case 10:{y.clientTime=h.uint64();break}case 11:{y.availableIncomingBitrate=h.uint64();break}case 12:{y.appMetrics=a.slack.calls.analytics.AppMetrics.decode(h,h.uint32());break}default:h.skipType(S&7);break}}return y},"decode"),o.decodeDelimited=n(function(h){return h instanceof v||(h=new v(h)),this.decode(h,h.uint32())},"decodeDelimited"),o.verify=n(function(h){if(typeof h!="object"||h===null)return"object expected";if(h.totalBytesSent!=null&&h.hasOwnProperty("totalBytesSent")&&!s.isInteger(h.totalBytesSent)&&!(h.totalBytesSent&&s.isInteger(h.totalBytesSent.low)&&s.isInteger(h.totalBytesSent.high)))return"totalBytesSent: integer|Long expected";if(h.totalBytesReceived!=null&&h.hasOwnProperty("totalBytesReceived")&&!s.isInteger(h.totalBytesReceived)&&!(h.totalBytesReceived&&s.isInteger(h.totalBytesReceived.low)&&s.isInteger(h.totalBytesReceived.high)))return"totalBytesReceived: integer|Long expected";if(h.totalRoundTripTime!=null&&h.hasOwnProperty("totalRoundTripTime")&&typeof h.totalRoundTripTime!="number")return"totalRoundTripTime: number expected";if(h.currentRoundTripTime!=null&&h.hasOwnProperty("currentRoundTripTime")&&typeof h.currentRoundTripTime!="number")return"currentRoundTripTime: number expected";if(h.availableOutgoingBitrate!=null&&h.hasOwnProperty("availableOutgoingBitrate")&&!s.isInteger(h.availableOutgoingBitrate)&&!(h.availableOutgoingBitrate&&s.isInteger(h.availableOutgoingBitrate.low)&&s.isInteger(h.availableOutgoingBitrate.high)))return"availableOutgoingBitrate: integer|Long expected";if(h.protocol!=null&&h.hasOwnProperty("protocol"))switch(h.protocol){default:return"protocol: enum value expected";case 0:case 1:break}if(h.pathType!=null&&h.hasOwnProperty("pathType"))switch(h.pathType){default:return"pathType: enum value expected";case 0:case 1:break}if(h.recv!=null&&h.hasOwnProperty("recv")){if(!Array.isArray(h.recv))return"recv: array expected";for(let p=0;p<h.recv.length;++p){let d=a.slack.calls.analytics.RecvMedia.verify(h.recv[p]);if(d)return"recv."+d}}if(h.send!=null&&h.hasOwnProperty("send")){if(!Array.isArray(h.send))return"send: array expected";for(let p=0;p<h.send.length;++p){let d=a.slack.calls.analytics.SendMedia.verify(h.send[p]);if(d)return"send."+d}}if(h.clientTime!=null&&h.hasOwnProperty("clientTime")&&!s.isInteger(h.clientTime)&&!(h.clientTime&&s.isInteger(h.clientTime.low)&&s.isInteger(h.clientTime.high)))return"clientTime: integer|Long expected";if(h.availableIncomingBitrate!=null&&h.hasOwnProperty("availableIncomingBitrate")&&!s.isInteger(h.availableIncomingBitrate)&&!(h.availableIncomingBitrate&&s.isInteger(h.availableIncomingBitrate.low)&&s.isInteger(h.availableIncomingBitrate.high)))return"availableIncomingBitrate: integer|Long expected";if(h.appMetrics!=null&&h.hasOwnProperty("appMetrics")){let p=a.slack.calls.analytics.AppMetrics.verify(h.appMetrics);if(p)return"appMetrics."+p}return null},"verify"),o.fromObject=n(function(h){if(h instanceof a.slack.calls.analytics.Report)return h;let p=new a.slack.calls.analytics.Report;switch(h.totalBytesSent!=null&&(s.Long?(p.totalBytesSent=s.Long.fromValue(h.totalBytesSent)).unsigned=!0:typeof h.totalBytesSent=="string"?p.totalBytesSent=parseInt(h.totalBytesSent,10):typeof h.totalBytesSent=="number"?p.totalBytesSent=h.totalBytesSent:typeof h.totalBytesSent=="object"&&(p.totalBytesSent=new s.LongBits(h.totalBytesSent.low>>>0,h.totalBytesSent.high>>>0).toNumber(!0))),h.totalBytesReceived!=null&&(s.Long?(p.totalBytesReceived=s.Long.fromValue(h.totalBytesReceived)).unsigned=!0:typeof h.totalBytesReceived=="string"?p.totalBytesReceived=parseInt(h.totalBytesReceived,10):typeof h.totalBytesReceived=="number"?p.totalBytesReceived=h.totalBytesReceived:typeof h.totalBytesReceived=="object"&&(p.totalBytesReceived=new s.LongBits(h.totalBytesReceived.low>>>0,h.totalBytesReceived.high>>>0).toNumber(!0))),h.totalRoundTripTime!=null&&(p.totalRoundTripTime=Number(h.totalRoundTripTime)),h.currentRoundTripTime!=null&&(p.currentRoundTripTime=Number(h.currentRoundTripTime)),h.availableOutgoingBitrate!=null&&(s.Long?(p.availableOutgoingBitrate=s.Long.fromValue(h.availableOutgoingBitrate)).unsigned=!0:typeof h.availableOutgoingBitrate=="string"?p.availableOutgoingBitrate=parseInt(h.availableOutgoingBitrate,10):typeof h.availableOutgoingBitrate=="number"?p.availableOutgoingBitrate=h.availableOutgoingBitrate:typeof h.availableOutgoingBitrate=="object"&&(p.availableOutgoingBitrate=new s.LongBits(h.availableOutgoingBitrate.low>>>0,h.availableOutgoingBitrate.high>>>0).toNumber(!0))),h.protocol){default:if(typeof h.protocol=="number"){p.protocol=h.protocol;break}break;case"UDP":case 0:p.protocol=0;break;case"TCP":case 1:p.protocol=1;break}switch(h.pathType){default:if(typeof h.pathType=="number"){p.pathType=h.pathType;break}break;case"DIRECT":case 0:p.pathType=0;break;case"RELAY":case 1:p.pathType=1;break}if(h.recv){if(!Array.isArray(h.recv))throw TypeError(".slack.calls.analytics.Report.recv: array expected");p.recv=[];for(let d=0;d<h.recv.length;++d){if(typeof h.recv[d]!="object")throw TypeError(".slack.calls.analytics.Report.recv: object expected");p.recv[d]=a.slack.calls.analytics.RecvMedia.fromObject(h.recv[d])}}if(h.send){if(!Array.isArray(h.send))throw TypeError(".slack.calls.analytics.Report.send: array expected");p.send=[];for(let d=0;d<h.send.length;++d){if(typeof h.send[d]!="object")throw TypeError(".slack.calls.analytics.Report.send: object expected");p.send[d]=a.slack.calls.analytics.SendMedia.fromObject(h.send[d])}}if(h.clientTime!=null&&(s.Long?(p.clientTime=s.Long.fromValue(h.clientTime)).unsigned=!0:typeof h.clientTime=="string"?p.clientTime=parseInt(h.clientTime,10):typeof h.clientTime=="number"?p.clientTime=h.clientTime:typeof h.clientTime=="object"&&(p.clientTime=new s.LongBits(h.clientTime.low>>>0,h.clientTime.high>>>0).toNumber(!0))),h.availableIncomingBitrate!=null&&(s.Long?(p.availableIncomingBitrate=s.Long.fromValue(h.availableIncomingBitrate)).unsigned=!0:typeof h.availableIncomingBitrate=="string"?p.availableIncomingBitrate=parseInt(h.availableIncomingBitrate,10):typeof h.availableIncomingBitrate=="number"?p.availableIncomingBitrate=h.availableIncomingBitrate:typeof h.availableIncomingBitrate=="object"&&(p.availableIncomingBitrate=new s.LongBits(h.availableIncomingBitrate.low>>>0,h.availableIncomingBitrate.high>>>0).toNumber(!0))),h.appMetrics!=null){if(typeof h.appMetrics!="object")throw TypeError(".slack.calls.analytics.Report.appMetrics: object expected");p.appMetrics=a.slack.calls.analytics.AppMetrics.fromObject(h.appMetrics)}return p},"fromObject"),o.toObject=n(function(h,p){p||(p={});let d={};if((p.arrays||p.defaults)&&(d.recv=[],d.send=[]),p.defaults){if(s.Long){let y=new s.Long(0,0,!0);d.totalBytesSent=p.longs===String?y.toString():p.longs===Number?y.toNumber():y}else d.totalBytesSent=p.longs===String?"0":0;if(s.Long){let y=new s.Long(0,0,!0);d.totalBytesReceived=p.longs===String?y.toString():p.longs===Number?y.toNumber():y}else d.totalBytesReceived=p.longs===String?"0":0;if(d.totalRoundTripTime=0,d.currentRoundTripTime=0,s.Long){let y=new s.Long(0,0,!0);d.availableOutgoingBitrate=p.longs===String?y.toString():p.longs===Number?y.toNumber():y}else d.availableOutgoingBitrate=p.longs===String?"0":0;if(d.protocol=p.enums===String?"UDP":0,d.pathType=p.enums===String?"DIRECT":0,s.Long){let y=new s.Long(0,0,!0);d.clientTime=p.longs===String?y.toString():p.longs===Number?y.toNumber():y}else d.clientTime=p.longs===String?"0":0;if(s.Long){let y=new s.Long(0,0,!0);d.availableIncomingBitrate=p.longs===String?y.toString():p.longs===Number?y.toNumber():y}else d.availableIncomingBitrate=p.longs===String?"0":0;d.appMetrics=null}if(h.totalBytesSent!=null&&h.hasOwnProperty("totalBytesSent")&&(typeof h.totalBytesSent=="number"?d.totalBytesSent=p.longs===String?String(h.totalBytesSent):h.totalBytesSent:d.totalBytesSent=p.longs===String?s.Long.prototype.toString.call(h.totalBytesSent):p.longs===Number?new s.LongBits(h.totalBytesSent.low>>>0,h.totalBytesSent.high>>>0).toNumber(!0):h.totalBytesSent),h.totalBytesReceived!=null&&h.hasOwnProperty("totalBytesReceived")&&(typeof h.totalBytesReceived=="number"?d.totalBytesReceived=p.longs===String?String(h.totalBytesReceived):h.totalBytesReceived:d.totalBytesReceived=p.longs===String?s.Long.prototype.toString.call(h.totalBytesReceived):p.longs===Number?new s.LongBits(h.totalBytesReceived.low>>>0,h.totalBytesReceived.high>>>0).toNumber(!0):h.totalBytesReceived),h.totalRoundTripTime!=null&&h.hasOwnProperty("totalRoundTripTime")&&(d.totalRoundTripTime=p.json&&!isFinite(h.totalRoundTripTime)?String(h.totalRoundTripTime):h.totalRoundTripTime),h.currentRoundTripTime!=null&&h.hasOwnProperty("currentRoundTripTime")&&(d.currentRoundTripTime=p.json&&!isFinite(h.currentRoundTripTime)?String(h.currentRoundTripTime):h.currentRoundTripTime),h.availableOutgoingBitrate!=null&&h.hasOwnProperty("availableOutgoingBitrate")&&(typeof h.availableOutgoingBitrate=="number"?d.availableOutgoingBitrate=p.longs===String?String(h.availableOutgoingBitrate):h.availableOutgoingBitrate:d.availableOutgoingBitrate=p.longs===String?s.Long.prototype.toString.call(h.availableOutgoingBitrate):p.longs===Number?new s.LongBits(h.availableOutgoingBitrate.low>>>0,h.availableOutgoingBitrate.high>>>0).toNumber(!0):h.availableOutgoingBitrate),h.protocol!=null&&h.hasOwnProperty("protocol")&&(d.protocol=p.enums===String?a.slack.calls.analytics.Protocol[h.protocol]===void 0?h.protocol:a.slack.calls.analytics.Protocol[h.protocol]:h.protocol),h.pathType!=null&&h.hasOwnProperty("pathType")&&(d.pathType=p.enums===String?a.slack.calls.analytics.PathType[h.pathType]===void 0?h.pathType:a.slack.calls.analytics.PathType[h.pathType]:h.pathType),h.recv&&h.recv.length){d.recv=[];for(let y=0;y<h.recv.length;++y)d.recv[y]=a.slack.calls.analytics.RecvMedia.toObject(h.recv[y],p)}if(h.send&&h.send.length){d.send=[];for(let y=0;y<h.send.length;++y)d.send[y]=a.slack.calls.analytics.SendMedia.toObject(h.send[y],p)}return h.clientTime!=null&&h.hasOwnProperty("clientTime")&&(typeof h.clientTime=="number"?d.clientTime=p.longs===String?String(h.clientTime):h.clientTime:d.clientTime=p.longs===String?s.Long.prototype.toString.call(h.clientTime):p.longs===Number?new s.LongBits(h.clientTime.low>>>0,h.clientTime.high>>>0).toNumber(!0):h.clientTime),h.availableIncomingBitrate!=null&&h.hasOwnProperty("availableIncomingBitrate")&&(typeof h.availableIncomingBitrate=="number"?d.availableIncomingBitrate=p.longs===String?String(h.availableIncomingBitrate):h.availableIncomingBitrate:d.availableIncomingBitrate=p.longs===String?s.Long.prototype.toString.call(h.availableIncomingBitrate):p.longs===Number?new s.LongBits(h.availableIncomingBitrate.low>>>0,h.availableIncomingBitrate.high>>>0).toNumber(!0):h.availableIncomingBitrate),h.appMetrics!=null&&h.hasOwnProperty("appMetrics")&&(d.appMetrics=a.slack.calls.analytics.AppMetrics.toObject(h.appMetrics,p)),d},"toObject"),o.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),o.getTypeUrl=n(function(h){return h===void 0&&(h="type.googleapis.com"),h+"/slack.calls.analytics.Report"},"getTypeUrl"),o}(),r}(),t}(),e})()},9240258658:(H,l,c)=>{"use strict";c.d(l,{Y:()=>i});var u=c(4224187311),m=c.n(u);const v=u.Reader,g=u.Writer,s=u.util,a=u.roots.default||(u.roots.default={}),i=a.PeerMessage=(()=>{function e(t){if(t)for(let r=Object.keys(t),o=0;o<r.length;++o)t[r[o]]!=null&&(this[r[o]]=t[r[o]])}return n(e,"PeerMessage1"),e.prototype.reacji=null,e.prototype.draw=null,e.prototype.fromPeerId=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.fromPeerIdString="",e.prototype.capabilities=null,e.prototype.background=null,e.prototype.muteRequest=null,e.prototype.awarenessBroadcast=null,e.prototype.awarenessQuery=null,e.prototype.awarenessClose=null,e.prototype.jukeboxRequest=null,e.prototype.contentShareDetails=null,e.prototype.recordingStartNotification=null,e.create=n(function(r){return new e(r)},"create"),e.encode=n(function(r,o){return o||(o=g.create()),r.reacji!=null&&Object.hasOwnProperty.call(r,"reacji")&&a.PeerMessage.Reacji.encode(r.reacji,o.uint32(10).fork()).ldelim(),r.draw!=null&&Object.hasOwnProperty.call(r,"draw")&&a.PeerMessage.Draw.encode(r.draw,o.uint32(18).fork()).ldelim(),r.fromPeerId!=null&&Object.hasOwnProperty.call(r,"fromPeerId")&&o.uint32(24).uint64(r.fromPeerId),r.fromPeerIdString!=null&&Object.hasOwnProperty.call(r,"fromPeerIdString")&&o.uint32(34).string(r.fromPeerIdString),r.capabilities!=null&&Object.hasOwnProperty.call(r,"capabilities")&&a.PeerMessage.Capabilities.encode(r.capabilities,o.uint32(42).fork()).ldelim(),r.background!=null&&Object.hasOwnProperty.call(r,"background")&&a.PeerMessage.Background.encode(r.background,o.uint32(50).fork()).ldelim(),r.muteRequest!=null&&Object.hasOwnProperty.call(r,"muteRequest")&&a.PeerMessage.MuteRequest.encode(r.muteRequest,o.uint32(82).fork()).ldelim(),r.awarenessBroadcast!=null&&Object.hasOwnProperty.call(r,"awarenessBroadcast")&&a.PeerMessage.AwarenessBroadcast.encode(r.awarenessBroadcast,o.uint32(90).fork()).ldelim(),r.awarenessQuery!=null&&Object.hasOwnProperty.call(r,"awarenessQuery")&&a.PeerMessage.AwarenessQuery.encode(r.awarenessQuery,o.uint32(98).fork()).ldelim(),r.awarenessClose!=null&&Object.hasOwnProperty.call(r,"awarenessClose")&&a.PeerMessage.AwarenessClose.encode(r.awarenessClose,o.uint32(106).fork()).ldelim(),r.jukeboxRequest!=null&&Object.hasOwnProperty.call(r,"jukeboxRequest")&&a.PeerMessage.JukeboxRequest.encode(r.jukeboxRequest,o.uint32(114).fork()).ldelim(),r.contentShareDetails!=null&&Object.hasOwnProperty.call(r,"contentShareDetails")&&a.PeerMessage.ContentShareDetails.encode(r.contentShareDetails,o.uint32(122).fork()).ldelim(),r.recordingStartNotification!=null&&Object.hasOwnProperty.call(r,"recordingStartNotification")&&a.PeerMessage.RecordingStartNotification.encode(r.recordingStartNotification,o.uint32(130).fork()).ldelim(),o},"encode"),e.encodeDelimited=n(function(r,o){return this.encode(r,o).ldelim()},"encodeDelimited"),e.decode=n(function(r,o){r instanceof v||(r=v.create(r));let f=o===void 0?r.len:r.pos+o,h=new a.PeerMessage;for(;r.pos<f;){let p=r.uint32();switch(p>>>3){case 1:{h.reacji=a.PeerMessage.Reacji.decode(r,r.uint32());break}case 2:{h.draw=a.PeerMessage.Draw.decode(r,r.uint32());break}case 3:{h.fromPeerId=r.uint64();break}case 4:{h.fromPeerIdString=r.string();break}case 5:{h.capabilities=a.PeerMessage.Capabilities.decode(r,r.uint32());break}case 6:{h.background=a.PeerMessage.Background.decode(r,r.uint32());break}case 10:{h.muteRequest=a.PeerMessage.MuteRequest.decode(r,r.uint32());break}case 11:{h.awarenessBroadcast=a.PeerMessage.AwarenessBroadcast.decode(r,r.uint32());break}case 12:{h.awarenessQuery=a.PeerMessage.AwarenessQuery.decode(r,r.uint32());break}case 13:{h.awarenessClose=a.PeerMessage.AwarenessClose.decode(r,r.uint32());break}case 14:{h.jukeboxRequest=a.PeerMessage.JukeboxRequest.decode(r,r.uint32());break}case 15:{h.contentShareDetails=a.PeerMessage.ContentShareDetails.decode(r,r.uint32());break}case 16:{h.recordingStartNotification=a.PeerMessage.RecordingStartNotification.decode(r,r.uint32());break}default:r.skipType(p&7);break}}return h},"decode"),e.decodeDelimited=n(function(r){return r instanceof v||(r=new v(r)),this.decode(r,r.uint32())},"decodeDelimited"),e.verify=n(function(r){if(typeof r!="object"||r===null)return"object expected";if(r.reacji!=null&&r.hasOwnProperty("reacji")){let o=a.PeerMessage.Reacji.verify(r.reacji);if(o)return"reacji."+o}if(r.draw!=null&&r.hasOwnProperty("draw")){let o=a.PeerMessage.Draw.verify(r.draw);if(o)return"draw."+o}if(r.fromPeerId!=null&&r.hasOwnProperty("fromPeerId")&&!s.isInteger(r.fromPeerId)&&!(r.fromPeerId&&s.isInteger(r.fromPeerId.low)&&s.isInteger(r.fromPeerId.high)))return"fromPeerId: integer|Long expected";if(r.fromPeerIdString!=null&&r.hasOwnProperty("fromPeerIdString")&&!s.isString(r.fromPeerIdString))return"fromPeerIdString: string expected";if(r.capabilities!=null&&r.hasOwnProperty("capabilities")){let o=a.PeerMessage.Capabilities.verify(r.capabilities);if(o)return"capabilities."+o}if(r.background!=null&&r.hasOwnProperty("background")){let o=a.PeerMessage.Background.verify(r.background);if(o)return"background."+o}if(r.muteRequest!=null&&r.hasOwnProperty("muteRequest")){let o=a.PeerMessage.MuteRequest.verify(r.muteRequest);if(o)return"muteRequest."+o}if(r.awarenessBroadcast!=null&&r.hasOwnProperty("awarenessBroadcast")){let o=a.PeerMessage.AwarenessBroadcast.verify(r.awarenessBroadcast);if(o)return"awarenessBroadcast."+o}if(r.awarenessQuery!=null&&r.hasOwnProperty("awarenessQuery")){let o=a.PeerMessage.AwarenessQuery.verify(r.awarenessQuery);if(o)return"awarenessQuery."+o}if(r.awarenessClose!=null&&r.hasOwnProperty("awarenessClose")){let o=a.PeerMessage.AwarenessClose.verify(r.awarenessClose);if(o)return"awarenessClose."+o}if(r.jukeboxRequest!=null&&r.hasOwnProperty("jukeboxRequest")){let o=a.PeerMessage.JukeboxRequest.verify(r.jukeboxRequest);if(o)return"jukeboxRequest."+o}if(r.contentShareDetails!=null&&r.hasOwnProperty("contentShareDetails")){let o=a.PeerMessage.ContentShareDetails.verify(r.contentShareDetails);if(o)return"contentShareDetails."+o}if(r.recordingStartNotification!=null&&r.hasOwnProperty("recordingStartNotification")){let o=a.PeerMessage.RecordingStartNotification.verify(r.recordingStartNotification);if(o)return"recordingStartNotification."+o}return null},"verify"),e.fromObject=n(function(r){if(r instanceof a.PeerMessage)return r;let o=new a.PeerMessage;if(r.reacji!=null){if(typeof r.reacji!="object")throw TypeError(".PeerMessage.reacji: object expected");o.reacji=a.PeerMessage.Reacji.fromObject(r.reacji)}if(r.draw!=null){if(typeof r.draw!="object")throw TypeError(".PeerMessage.draw: object expected");o.draw=a.PeerMessage.Draw.fromObject(r.draw)}if(r.fromPeerId!=null&&(s.Long?(o.fromPeerId=s.Long.fromValue(r.fromPeerId)).unsigned=!0:typeof r.fromPeerId=="string"?o.fromPeerId=parseInt(r.fromPeerId,10):typeof r.fromPeerId=="number"?o.fromPeerId=r.fromPeerId:typeof r.fromPeerId=="object"&&(o.fromPeerId=new s.LongBits(r.fromPeerId.low>>>0,r.fromPeerId.high>>>0).toNumber(!0))),r.fromPeerIdString!=null&&(o.fromPeerIdString=String(r.fromPeerIdString)),r.capabilities!=null){if(typeof r.capabilities!="object")throw TypeError(".PeerMessage.capabilities: object expected");o.capabilities=a.PeerMessage.Capabilities.fromObject(r.capabilities)}if(r.background!=null){if(typeof r.background!="object")throw TypeError(".PeerMessage.background: object expected");o.background=a.PeerMessage.Background.fromObject(r.background)}if(r.muteRequest!=null){if(typeof r.muteRequest!="object")throw TypeError(".PeerMessage.muteRequest: object expected");o.muteRequest=a.PeerMessage.MuteRequest.fromObject(r.muteRequest)}if(r.awarenessBroadcast!=null){if(typeof r.awarenessBroadcast!="object")throw TypeError(".PeerMessage.awarenessBroadcast: object expected");o.awarenessBroadcast=a.PeerMessage.AwarenessBroadcast.fromObject(r.awarenessBroadcast)}if(r.awarenessQuery!=null){if(typeof r.awarenessQuery!="object")throw TypeError(".PeerMessage.awarenessQuery: object expected");o.awarenessQuery=a.PeerMessage.AwarenessQuery.fromObject(r.awarenessQuery)}if(r.awarenessClose!=null){if(typeof r.awarenessClose!="object")throw TypeError(".PeerMessage.awarenessClose: object expected");o.awarenessClose=a.PeerMessage.AwarenessClose.fromObject(r.awarenessClose)}if(r.jukeboxRequest!=null){if(typeof r.jukeboxRequest!="object")throw TypeError(".PeerMessage.jukeboxRequest: object expected");o.jukeboxRequest=a.PeerMessage.JukeboxRequest.fromObject(r.jukeboxRequest)}if(r.contentShareDetails!=null){if(typeof r.contentShareDetails!="object")throw TypeError(".PeerMessage.contentShareDetails: object expected");o.contentShareDetails=a.PeerMessage.ContentShareDetails.fromObject(r.contentShareDetails)}if(r.recordingStartNotification!=null){if(typeof r.recordingStartNotification!="object")throw TypeError(".PeerMessage.recordingStartNotification: object expected");o.recordingStartNotification=a.PeerMessage.RecordingStartNotification.fromObject(r.recordingStartNotification)}return o},"fromObject"),e.toObject=n(function(r,o){o||(o={});let f={};if(o.defaults){if(f.reacji=null,f.draw=null,s.Long){let h=new s.Long(0,0,!0);f.fromPeerId=o.longs===String?h.toString():o.longs===Number?h.toNumber():h}else f.fromPeerId=o.longs===String?"0":0;f.fromPeerIdString="",f.capabilities=null,f.background=null,f.muteRequest=null,f.awarenessBroadcast=null,f.awarenessQuery=null,f.awarenessClose=null,f.jukeboxRequest=null,f.contentShareDetails=null,f.recordingStartNotification=null}return r.reacji!=null&&r.hasOwnProperty("reacji")&&(f.reacji=a.PeerMessage.Reacji.toObject(r.reacji,o)),r.draw!=null&&r.hasOwnProperty("draw")&&(f.draw=a.PeerMessage.Draw.toObject(r.draw,o)),r.fromPeerId!=null&&r.hasOwnProperty("fromPeerId")&&(typeof r.fromPeerId=="number"?f.fromPeerId=o.longs===String?String(r.fromPeerId):r.fromPeerId:f.fromPeerId=o.longs===String?s.Long.prototype.toString.call(r.fromPeerId):o.longs===Number?new s.LongBits(r.fromPeerId.low>>>0,r.fromPeerId.high>>>0).toNumber(!0):r.fromPeerId),r.fromPeerIdString!=null&&r.hasOwnProperty("fromPeerIdString")&&(f.fromPeerIdString=r.fromPeerIdString),r.capabilities!=null&&r.hasOwnProperty("capabilities")&&(f.capabilities=a.PeerMessage.Capabilities.toObject(r.capabilities,o)),r.background!=null&&r.hasOwnProperty("background")&&(f.background=a.PeerMessage.Background.toObject(r.background,o)),r.muteRequest!=null&&r.hasOwnProperty("muteRequest")&&(f.muteRequest=a.PeerMessage.MuteRequest.toObject(r.muteRequest,o)),r.awarenessBroadcast!=null&&r.hasOwnProperty("awarenessBroadcast")&&(f.awarenessBroadcast=a.PeerMessage.AwarenessBroadcast.toObject(r.awarenessBroadcast,o)),r.awarenessQuery!=null&&r.hasOwnProperty("awarenessQuery")&&(f.awarenessQuery=a.PeerMessage.AwarenessQuery.toObject(r.awarenessQuery,o)),r.awarenessClose!=null&&r.hasOwnProperty("awarenessClose")&&(f.awarenessClose=a.PeerMessage.AwarenessClose.toObject(r.awarenessClose,o)),r.jukeboxRequest!=null&&r.hasOwnProperty("jukeboxRequest")&&(f.jukeboxRequest=a.PeerMessage.JukeboxRequest.toObject(r.jukeboxRequest,o)),r.contentShareDetails!=null&&r.hasOwnProperty("contentShareDetails")&&(f.contentShareDetails=a.PeerMessage.ContentShareDetails.toObject(r.contentShareDetails,o)),r.recordingStartNotification!=null&&r.hasOwnProperty("recordingStartNotification")&&(f.recordingStartNotification=a.PeerMessage.RecordingStartNotification.toObject(r.recordingStartNotification,o)),f},"toObject"),e.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),e.getTypeUrl=n(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage"},"getTypeUrl"),e.Reacji=function(){function t(r){if(r)for(let o=Object.keys(r),f=0;f<o.length;++f)r[o[f]]!=null&&(this[o[f]]=r[o[f]])}return n(t,"Reacji"),t.prototype.emoji="",t.prototype.type=0,t.create=n(function(o){return new t(o)},"create"),t.encode=n(function(o,f){return f||(f=g.create()),o.emoji!=null&&Object.hasOwnProperty.call(o,"emoji")&&f.uint32(10).string(o.emoji),o.type!=null&&Object.hasOwnProperty.call(o,"type")&&f.uint32(16).int32(o.type),f},"encode"),t.encodeDelimited=n(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=n(function(o,f){o instanceof v||(o=v.create(o));let h=f===void 0?o.len:o.pos+f,p=new a.PeerMessage.Reacji;for(;o.pos<h;){let d=o.uint32();switch(d>>>3){case 1:{p.emoji=o.string();break}case 2:{p.type=o.int32();break}default:o.skipType(d&7);break}}return p},"decode"),t.decodeDelimited=n(function(o){return o instanceof v||(o=new v(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=n(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.emoji!=null&&o.hasOwnProperty("emoji")&&!s.isString(o.emoji))return"emoji: string expected";if(o.type!=null&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:break}return null},"verify"),t.fromObject=n(function(o){if(o instanceof a.PeerMessage.Reacji)return o;let f=new a.PeerMessage.Reacji;switch(o.emoji!=null&&(f.emoji=String(o.emoji)),o.type){default:if(typeof o.type=="number"){f.type=o.type;break}break;case"Unknown_reaction_type":case 0:f.type=0;break;case"Effect":case 1:f.type=1;break;case"Standard":case 2:f.type=2;break;case"Gif":case 3:f.type=3;break}return f},"fromObject"),t.toObject=n(function(o,f){f||(f={});let h={};return f.defaults&&(h.emoji="",h.type=f.enums===String?"Unknown_reaction_type":0),o.emoji!=null&&o.hasOwnProperty("emoji")&&(h.emoji=o.emoji),o.type!=null&&o.hasOwnProperty("type")&&(h.type=f.enums===String?a.PeerMessage.Reacji.Type[o.type]===void 0?o.type:a.PeerMessage.Reacji.Type[o.type]:o.type),h},"toObject"),t.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=n(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Reacji"},"getTypeUrl"),t.Type=function(){const r={},o=Object.create(r);return o[r[0]="Unknown_reaction_type"]=0,o[r[1]="Effect"]=1,o[r[2]="Standard"]=2,o[r[3]="Gif"]=3,o}(),t}(),e.Point=function(){function t(r){if(r)for(let o=Object.keys(r),f=0;f<o.length;++f)r[o[f]]!=null&&(this[o[f]]=r[o[f]])}return n(t,"Point"),t.prototype.x=0,t.prototype.y=0,t.create=n(function(o){return new t(o)},"create"),t.encode=n(function(o,f){return f||(f=g.create()),o.x!=null&&Object.hasOwnProperty.call(o,"x")&&f.uint32(9).double(o.x),o.y!=null&&Object.hasOwnProperty.call(o,"y")&&f.uint32(17).double(o.y),f},"encode"),t.encodeDelimited=n(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=n(function(o,f){o instanceof v||(o=v.create(o));let h=f===void 0?o.len:o.pos+f,p=new a.PeerMessage.Point;for(;o.pos<h;){let d=o.uint32();switch(d>>>3){case 1:{p.x=o.double();break}case 2:{p.y=o.double();break}default:o.skipType(d&7);break}}return p},"decode"),t.decodeDelimited=n(function(o){return o instanceof v||(o=new v(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=n(function(o){return typeof o!="object"||o===null?"object expected":o.x!=null&&o.hasOwnProperty("x")&&typeof o.x!="number"?"x: number expected":o.y!=null&&o.hasOwnProperty("y")&&typeof o.y!="number"?"y: number expected":null},"verify"),t.fromObject=n(function(o){if(o instanceof a.PeerMessage.Point)return o;let f=new a.PeerMessage.Point;return o.x!=null&&(f.x=Number(o.x)),o.y!=null&&(f.y=Number(o.y)),f},"fromObject"),t.toObject=n(function(o,f){f||(f={});let h={};return f.defaults&&(h.x=0,h.y=0),o.x!=null&&o.hasOwnProperty("x")&&(h.x=f.json&&!isFinite(o.x)?String(o.x):o.x),o.y!=null&&o.hasOwnProperty("y")&&(h.y=f.json&&!isFinite(o.y)?String(o.y):o.y),h},"toObject"),t.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=n(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Point"},"getTypeUrl"),t}(),e.Segment=function(){function t(r){if(r)for(let o=Object.keys(r),f=0;f<o.length;++f)r[o[f]]!=null&&(this[o[f]]=r[o[f]])}return n(t,"Segment"),t.prototype.a=null,t.prototype.b=null,t.prototype.c=null,t.prototype.d=null,t.create=n(function(o){return new t(o)},"create"),t.encode=n(function(o,f){return f||(f=g.create()),o.a!=null&&Object.hasOwnProperty.call(o,"a")&&a.PeerMessage.Point.encode(o.a,f.uint32(10).fork()).ldelim(),o.b!=null&&Object.hasOwnProperty.call(o,"b")&&a.PeerMessage.Point.encode(o.b,f.uint32(18).fork()).ldelim(),o.c!=null&&Object.hasOwnProperty.call(o,"c")&&a.PeerMessage.Point.encode(o.c,f.uint32(26).fork()).ldelim(),o.d!=null&&Object.hasOwnProperty.call(o,"d")&&a.PeerMessage.Point.encode(o.d,f.uint32(34).fork()).ldelim(),f},"encode"),t.encodeDelimited=n(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=n(function(o,f){o instanceof v||(o=v.create(o));let h=f===void 0?o.len:o.pos+f,p=new a.PeerMessage.Segment;for(;o.pos<h;){let d=o.uint32();switch(d>>>3){case 1:{p.a=a.PeerMessage.Point.decode(o,o.uint32());break}case 2:{p.b=a.PeerMessage.Point.decode(o,o.uint32());break}case 3:{p.c=a.PeerMessage.Point.decode(o,o.uint32());break}case 4:{p.d=a.PeerMessage.Point.decode(o,o.uint32());break}default:o.skipType(d&7);break}}return p},"decode"),t.decodeDelimited=n(function(o){return o instanceof v||(o=new v(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=n(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.a!=null&&o.hasOwnProperty("a")){let f=a.PeerMessage.Point.verify(o.a);if(f)return"a."+f}if(o.b!=null&&o.hasOwnProperty("b")){let f=a.PeerMessage.Point.verify(o.b);if(f)return"b."+f}if(o.c!=null&&o.hasOwnProperty("c")){let f=a.PeerMessage.Point.verify(o.c);if(f)return"c."+f}if(o.d!=null&&o.hasOwnProperty("d")){let f=a.PeerMessage.Point.verify(o.d);if(f)return"d."+f}return null},"verify"),t.fromObject=n(function(o){if(o instanceof a.PeerMessage.Segment)return o;let f=new a.PeerMessage.Segment;if(o.a!=null){if(typeof o.a!="object")throw TypeError(".PeerMessage.Segment.a: object expected");f.a=a.PeerMessage.Point.fromObject(o.a)}if(o.b!=null){if(typeof o.b!="object")throw TypeError(".PeerMessage.Segment.b: object expected");f.b=a.PeerMessage.Point.fromObject(o.b)}if(o.c!=null){if(typeof o.c!="object")throw TypeError(".PeerMessage.Segment.c: object expected");f.c=a.PeerMessage.Point.fromObject(o.c)}if(o.d!=null){if(typeof o.d!="object")throw TypeError(".PeerMessage.Segment.d: object expected");f.d=a.PeerMessage.Point.fromObject(o.d)}return f},"fromObject"),t.toObject=n(function(o,f){f||(f={});let h={};return f.defaults&&(h.a=null,h.b=null,h.c=null,h.d=null),o.a!=null&&o.hasOwnProperty("a")&&(h.a=a.PeerMessage.Point.toObject(o.a,f)),o.b!=null&&o.hasOwnProperty("b")&&(h.b=a.PeerMessage.Point.toObject(o.b,f)),o.c!=null&&o.hasOwnProperty("c")&&(h.c=a.PeerMessage.Point.toObject(o.c,f)),o.d!=null&&o.hasOwnProperty("d")&&(h.d=a.PeerMessage.Point.toObject(o.d,f)),h},"toObject"),t.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=n(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Segment"},"getTypeUrl"),t}(),e.Draw=function(){function t(r){if(r)for(let o=Object.keys(r),f=0;f<o.length;++f)r[o[f]]!=null&&(this[o[f]]=r[o[f]])}return n(t,"Draw"),t.prototype.type=0,t.prototype.segment=null,t.prototype.hue=0,t.prototype.itemId="",t.prototype.x=0,t.prototype.y=0,t.create=n(function(o){return new t(o)},"create"),t.encode=n(function(o,f){return f||(f=g.create()),o.type!=null&&Object.hasOwnProperty.call(o,"type")&&f.uint32(8).int32(o.type),o.segment!=null&&Object.hasOwnProperty.call(o,"segment")&&a.PeerMessage.Segment.encode(o.segment,f.uint32(18).fork()).ldelim(),o.hue!=null&&Object.hasOwnProperty.call(o,"hue")&&f.uint32(24).int32(o.hue),o.itemId!=null&&Object.hasOwnProperty.call(o,"itemId")&&f.uint32(34).string(o.itemId),o.x!=null&&Object.hasOwnProperty.call(o,"x")&&f.uint32(41).double(o.x),o.y!=null&&Object.hasOwnProperty.call(o,"y")&&f.uint32(49).double(o.y),f},"encode"),t.encodeDelimited=n(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=n(function(o,f){o instanceof v||(o=v.create(o));let h=f===void 0?o.len:o.pos+f,p=new a.PeerMessage.Draw;for(;o.pos<h;){let d=o.uint32();switch(d>>>3){case 1:{p.type=o.int32();break}case 2:{p.segment=a.PeerMessage.Segment.decode(o,o.uint32());break}case 3:{p.hue=o.int32();break}case 4:{p.itemId=o.string();break}case 5:{p.x=o.double();break}case 6:{p.y=o.double();break}default:o.skipType(d&7);break}}return p},"decode"),t.decodeDelimited=n(function(o){return o instanceof v||(o=new v(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=n(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.type!=null&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:break}if(o.segment!=null&&o.hasOwnProperty("segment")){let f=a.PeerMessage.Segment.verify(o.segment);if(f)return"segment."+f}return o.hue!=null&&o.hasOwnProperty("hue")&&!s.isInteger(o.hue)?"hue: integer expected":o.itemId!=null&&o.hasOwnProperty("itemId")&&!s.isString(o.itemId)?"itemId: string expected":o.x!=null&&o.hasOwnProperty("x")&&typeof o.x!="number"?"x: number expected":o.y!=null&&o.hasOwnProperty("y")&&typeof o.y!="number"?"y: number expected":null},"verify"),t.fromObject=n(function(o){if(o instanceof a.PeerMessage.Draw)return o;let f=new a.PeerMessage.Draw;switch(o.type){default:if(typeof o.type=="number"){f.type=o.type;break}break;case"UNKNOWN_DRAW_TYPE":case 0:f.type=0;break;case"NEW":case 1:f.type=1;break;case"EDIT":case 2:f.type=2;break;case"END":case 3:f.type=3;break;case"CHANGE_HUE":case 4:f.type=4;break;case"POSITION":case 5:f.type=5;break}if(o.segment!=null){if(typeof o.segment!="object")throw TypeError(".PeerMessage.Draw.segment: object expected");f.segment=a.PeerMessage.Segment.fromObject(o.segment)}return o.hue!=null&&(f.hue=o.hue|0),o.itemId!=null&&(f.itemId=String(o.itemId)),o.x!=null&&(f.x=Number(o.x)),o.y!=null&&(f.y=Number(o.y)),f},"fromObject"),t.toObject=n(function(o,f){f||(f={});let h={};return f.defaults&&(h.type=f.enums===String?"UNKNOWN_DRAW_TYPE":0,h.segment=null,h.hue=0,h.itemId="",h.x=0,h.y=0),o.type!=null&&o.hasOwnProperty("type")&&(h.type=f.enums===String?a.PeerMessage.Draw.Type[o.type]===void 0?o.type:a.PeerMessage.Draw.Type[o.type]:o.type),o.segment!=null&&o.hasOwnProperty("segment")&&(h.segment=a.PeerMessage.Segment.toObject(o.segment,f)),o.hue!=null&&o.hasOwnProperty("hue")&&(h.hue=o.hue),o.itemId!=null&&o.hasOwnProperty("itemId")&&(h.itemId=o.itemId),o.x!=null&&o.hasOwnProperty("x")&&(h.x=f.json&&!isFinite(o.x)?String(o.x):o.x),o.y!=null&&o.hasOwnProperty("y")&&(h.y=f.json&&!isFinite(o.y)?String(o.y):o.y),h},"toObject"),t.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=n(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Draw"},"getTypeUrl"),t.Type=function(){const r={},o=Object.create(r);return o[r[0]="UNKNOWN_DRAW_TYPE"]=0,o[r[1]="NEW"]=1,o[r[2]="EDIT"]=2,o[r[3]="END"]=3,o[r[4]="CHANGE_HUE"]=4,o[r[5]="POSITION"]=5,o}(),t}(),e.Capabilities=function(){function t(r){if(r)for(let o=Object.keys(r),f=0;f<o.length;++f)r[o[f]]!=null&&(this[o[f]]=r[o[f]])}return n(t,"Capabilities"),t.prototype.isDrawEnabled=!1,t.create=n(function(o){return new t(o)},"create"),t.encode=n(function(o,f){return f||(f=g.create()),o.isDrawEnabled!=null&&Object.hasOwnProperty.call(o,"isDrawEnabled")&&f.uint32(8).bool(o.isDrawEnabled),f},"encode"),t.encodeDelimited=n(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=n(function(o,f){o instanceof v||(o=v.create(o));let h=f===void 0?o.len:o.pos+f,p=new a.PeerMessage.Capabilities;for(;o.pos<h;){let d=o.uint32();switch(d>>>3){case 1:{p.isDrawEnabled=o.bool();break}default:o.skipType(d&7);break}}return p},"decode"),t.decodeDelimited=n(function(o){return o instanceof v||(o=new v(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=n(function(o){return typeof o!="object"||o===null?"object expected":o.isDrawEnabled!=null&&o.hasOwnProperty("isDrawEnabled")&&typeof o.isDrawEnabled!="boolean"?"isDrawEnabled: boolean expected":null},"verify"),t.fromObject=n(function(o){if(o instanceof a.PeerMessage.Capabilities)return o;let f=new a.PeerMessage.Capabilities;return o.isDrawEnabled!=null&&(f.isDrawEnabled=Boolean(o.isDrawEnabled)),f},"fromObject"),t.toObject=n(function(o,f){f||(f={});let h={};return f.defaults&&(h.isDrawEnabled=!1),o.isDrawEnabled!=null&&o.hasOwnProperty("isDrawEnabled")&&(h.isDrawEnabled=o.isDrawEnabled),h},"toObject"),t.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=n(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Capabilities"},"getTypeUrl"),t}(),e.ContentShareDetails=function(){function t(r){if(r)for(let o=Object.keys(r),f=0;f<o.length;++f)r[o[f]]!=null&&(this[o[f]]=r[o[f]])}return n(t,"ContentShareDetails"),t.prototype.sourceType="",t.prototype.itemId="",t.create=n(function(o){return new t(o)},"create"),t.encode=n(function(o,f){return f||(f=g.create()),o.sourceType!=null&&Object.hasOwnProperty.call(o,"sourceType")&&f.uint32(10).string(o.sourceType),o.itemId!=null&&Object.hasOwnProperty.call(o,"itemId")&&f.uint32(18).string(o.itemId),f},"encode"),t.encodeDelimited=n(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=n(function(o,f){o instanceof v||(o=v.create(o));let h=f===void 0?o.len:o.pos+f,p=new a.PeerMessage.ContentShareDetails;for(;o.pos<h;){let d=o.uint32();switch(d>>>3){case 1:{p.sourceType=o.string();break}case 2:{p.itemId=o.string();break}default:o.skipType(d&7);break}}return p},"decode"),t.decodeDelimited=n(function(o){return o instanceof v||(o=new v(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=n(function(o){return typeof o!="object"||o===null?"object expected":o.sourceType!=null&&o.hasOwnProperty("sourceType")&&!s.isString(o.sourceType)?"sourceType: string expected":o.itemId!=null&&o.hasOwnProperty("itemId")&&!s.isString(o.itemId)?"itemId: string expected":null},"verify"),t.fromObject=n(function(o){if(o instanceof a.PeerMessage.ContentShareDetails)return o;let f=new a.PeerMessage.ContentShareDetails;return o.sourceType!=null&&(f.sourceType=String(o.sourceType)),o.itemId!=null&&(f.itemId=String(o.itemId)),f},"fromObject"),t.toObject=n(function(o,f){f||(f={});let h={};return f.defaults&&(h.sourceType="",h.itemId=""),o.sourceType!=null&&o.hasOwnProperty("sourceType")&&(h.sourceType=o.sourceType),o.itemId!=null&&o.hasOwnProperty("itemId")&&(h.itemId=o.itemId),h},"toObject"),t.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=n(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.ContentShareDetails"},"getTypeUrl"),t}(),e.Background=function(){function t(r){if(r)for(let o=Object.keys(r),f=0;f<o.length;++f)r[o[f]]!=null&&(this[o[f]]=r[o[f]])}return n(t,"Background"),t.prototype.url="",t.create=n(function(o){return new t(o)},"create"),t.encode=n(function(o,f){return f||(f=g.create()),o.url!=null&&Object.hasOwnProperty.call(o,"url")&&f.uint32(10).string(o.url),f},"encode"),t.encodeDelimited=n(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=n(function(o,f){o instanceof v||(o=v.create(o));let h=f===void 0?o.len:o.pos+f,p=new a.PeerMessage.Background;for(;o.pos<h;){let d=o.uint32();switch(d>>>3){case 1:{p.url=o.string();break}default:o.skipType(d&7);break}}return p},"decode"),t.decodeDelimited=n(function(o){return o instanceof v||(o=new v(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=n(function(o){return typeof o!="object"||o===null?"object expected":o.url!=null&&o.hasOwnProperty("url")&&!s.isString(o.url)?"url: string expected":null},"verify"),t.fromObject=n(function(o){if(o instanceof a.PeerMessage.Background)return o;let f=new a.PeerMessage.Background;return o.url!=null&&(f.url=String(o.url)),f},"fromObject"),t.toObject=n(function(o,f){f||(f={});let h={};return f.defaults&&(h.url=""),o.url!=null&&o.hasOwnProperty("url")&&(h.url=o.url),h},"toObject"),t.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=n(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Background"},"getTypeUrl"),t}(),e.MuteRequest=function(){function t(r){if(r)for(let o=Object.keys(r),f=0;f<o.length;++f)r[o[f]]!=null&&(this[o[f]]=r[o[f]])}return n(t,"MuteRequest"),t.prototype.peerId="",t.create=n(function(o){return new t(o)},"create"),t.encode=n(function(o,f){return f||(f=g.create()),o.peerId!=null&&Object.hasOwnProperty.call(o,"peerId")&&f.uint32(10).string(o.peerId),f},"encode"),t.encodeDelimited=n(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=n(function(o,f){o instanceof v||(o=v.create(o));let h=f===void 0?o.len:o.pos+f,p=new a.PeerMessage.MuteRequest;for(;o.pos<h;){let d=o.uint32();switch(d>>>3){case 1:{p.peerId=o.string();break}default:o.skipType(d&7);break}}return p},"decode"),t.decodeDelimited=n(function(o){return o instanceof v||(o=new v(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=n(function(o){return typeof o!="object"||o===null?"object expected":o.peerId!=null&&o.hasOwnProperty("peerId")&&!s.isString(o.peerId)?"peerId: string expected":null},"verify"),t.fromObject=n(function(o){if(o instanceof a.PeerMessage.MuteRequest)return o;let f=new a.PeerMessage.MuteRequest;return o.peerId!=null&&(f.peerId=String(o.peerId)),f},"fromObject"),t.toObject=n(function(o,f){f||(f={});let h={};return f.defaults&&(h.peerId=""),o.peerId!=null&&o.hasOwnProperty("peerId")&&(h.peerId=o.peerId),h},"toObject"),t.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=n(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.MuteRequest"},"getTypeUrl"),t}(),e.JukeboxRequest=function(){function t(r){if(r)for(let o=Object.keys(r),f=0;f<o.length;++f)r[o[f]]!=null&&(this[o[f]]=r[o[f]])}return n(t,"JukeboxRequest"),t.prototype.songKey="",t.prototype.stop=!1,t.create=n(function(o){return new t(o)},"create"),t.encode=n(function(o,f){return f||(f=g.create()),o.songKey!=null&&Object.hasOwnProperty.call(o,"songKey")&&f.uint32(10).string(o.songKey),o.stop!=null&&Object.hasOwnProperty.call(o,"stop")&&f.uint32(16).bool(o.stop),f},"encode"),t.encodeDelimited=n(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=n(function(o,f){o instanceof v||(o=v.create(o));let h=f===void 0?o.len:o.pos+f,p=new a.PeerMessage.JukeboxRequest;for(;o.pos<h;){let d=o.uint32();switch(d>>>3){case 1:{p.songKey=o.string();break}case 2:{p.stop=o.bool();break}default:o.skipType(d&7);break}}return p},"decode"),t.decodeDelimited=n(function(o){return o instanceof v||(o=new v(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=n(function(o){return typeof o!="object"||o===null?"object expected":o.songKey!=null&&o.hasOwnProperty("songKey")&&!s.isString(o.songKey)?"songKey: string expected":o.stop!=null&&o.hasOwnProperty("stop")&&typeof o.stop!="boolean"?"stop: boolean expected":null},"verify"),t.fromObject=n(function(o){if(o instanceof a.PeerMessage.JukeboxRequest)return o;let f=new a.PeerMessage.JukeboxRequest;return o.songKey!=null&&(f.songKey=String(o.songKey)),o.stop!=null&&(f.stop=Boolean(o.stop)),f},"fromObject"),t.toObject=n(function(o,f){f||(f={});let h={};return f.defaults&&(h.songKey="",h.stop=!1),o.songKey!=null&&o.hasOwnProperty("songKey")&&(h.songKey=o.songKey),o.stop!=null&&o.hasOwnProperty("stop")&&(h.stop=o.stop),h},"toObject"),t.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=n(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.JukeboxRequest"},"getTypeUrl"),t}(),e.RecordingStartNotification=function(){function t(r){if(r)for(let o=Object.keys(r),f=0;f<o.length;++f)r[o[f]]!=null&&(this[o[f]]=r[o[f]])}return n(t,"RecordingStartNotification"),t.prototype.type=0,t.create=n(function(o){return new t(o)},"create"),t.encode=n(function(o,f){return f||(f=g.create()),o.type!=null&&Object.hasOwnProperty.call(o,"type")&&f.uint32(8).int32(o.type),f},"encode"),t.encodeDelimited=n(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=n(function(o,f){o instanceof v||(o=v.create(o));let h=f===void 0?o.len:o.pos+f,p=new a.PeerMessage.RecordingStartNotification;for(;o.pos<h;){let d=o.uint32();switch(d>>>3){case 1:{p.type=o.int32();break}default:o.skipType(d&7);break}}return p},"decode"),t.decodeDelimited=n(function(o){return o instanceof v||(o=new v(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=n(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.type!=null&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:break}return null},"verify"),t.fromObject=n(function(o){if(o instanceof a.PeerMessage.RecordingStartNotification)return o;let f=new a.PeerMessage.RecordingStartNotification;switch(o.type){default:if(typeof o.type=="number"){f.type=o.type;break}break;case"UNKNOWN_TYPE":case 0:f.type=0;break;case"SUMMARY":case 1:f.type=1;break}return f},"fromObject"),t.toObject=n(function(o,f){f||(f={});let h={};return f.defaults&&(h.type=f.enums===String?"UNKNOWN_TYPE":0),o.type!=null&&o.hasOwnProperty("type")&&(h.type=f.enums===String?a.PeerMessage.RecordingStartNotification.Type[o.type]===void 0?o.type:a.PeerMessage.RecordingStartNotification.Type[o.type]:o.type),h},"toObject"),t.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=n(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.RecordingStartNotification"},"getTypeUrl"),t.Type=function(){const r={},o=Object.create(r);return o[r[0]="UNKNOWN_TYPE"]=0,o[r[1]="SUMMARY"]=1,o}(),t}(),e.AwarenessPayload=function(){function t(o){if(o)for(let f=Object.keys(o),h=0;h<f.length;++h)o[f[h]]!=null&&(this[f[h]]=o[f[h]])}n(t,"AwarenessPayload"),t.prototype.fieldName="",t.prototype.fieldValue="",t.prototype.fieldTimestampMs=null;let r;return Object.defineProperty(t.prototype,"_fieldTimestampMs",{get:s.oneOfGetter(r=["fieldTimestampMs"]),set:s.oneOfSetter(r)}),t.create=n(function(f){return new t(f)},"create"),t.encode=n(function(f,h){return h||(h=g.create()),f.fieldName!=null&&Object.hasOwnProperty.call(f,"fieldName")&&h.uint32(10).string(f.fieldName),f.fieldValue!=null&&Object.hasOwnProperty.call(f,"fieldValue")&&h.uint32(18).string(f.fieldValue),f.fieldTimestampMs!=null&&Object.hasOwnProperty.call(f,"fieldTimestampMs")&&h.uint32(24).int64(f.fieldTimestampMs),h},"encode"),t.encodeDelimited=n(function(f,h){return this.encode(f,h).ldelim()},"encodeDelimited"),t.decode=n(function(f,h){f instanceof v||(f=v.create(f));let p=h===void 0?f.len:f.pos+h,d=new a.PeerMessage.AwarenessPayload;for(;f.pos<p;){let y=f.uint32();switch(y>>>3){case 1:{d.fieldName=f.string();break}case 2:{d.fieldValue=f.string();break}case 3:{d.fieldTimestampMs=f.int64();break}default:f.skipType(y&7);break}}return d},"decode"),t.decodeDelimited=n(function(f){return f instanceof v||(f=new v(f)),this.decode(f,f.uint32())},"decodeDelimited"),t.verify=n(function(f){if(typeof f!="object"||f===null)return"object expected";let h={};return f.fieldName!=null&&f.hasOwnProperty("fieldName")&&!s.isString(f.fieldName)?"fieldName: string expected":f.fieldValue!=null&&f.hasOwnProperty("fieldValue")&&!s.isString(f.fieldValue)?"fieldValue: string expected":f.fieldTimestampMs!=null&&f.hasOwnProperty("fieldTimestampMs")&&(h._fieldTimestampMs=1,!s.isInteger(f.fieldTimestampMs)&&!(f.fieldTimestampMs&&s.isInteger(f.fieldTimestampMs.low)&&s.isInteger(f.fieldTimestampMs.high)))?"fieldTimestampMs: integer|Long expected":null},"verify"),t.fromObject=n(function(f){if(f instanceof a.PeerMessage.AwarenessPayload)return f;let h=new a.PeerMessage.AwarenessPayload;return f.fieldName!=null&&(h.fieldName=String(f.fieldName)),f.fieldValue!=null&&(h.fieldValue=String(f.fieldValue)),f.fieldTimestampMs!=null&&(s.Long?(h.fieldTimestampMs=s.Long.fromValue(f.fieldTimestampMs)).unsigned=!1:typeof f.fieldTimestampMs=="string"?h.fieldTimestampMs=parseInt(f.fieldTimestampMs,10):typeof f.fieldTimestampMs=="number"?h.fieldTimestampMs=f.fieldTimestampMs:typeof f.fieldTimestampMs=="object"&&(h.fieldTimestampMs=new s.LongBits(f.fieldTimestampMs.low>>>0,f.fieldTimestampMs.high>>>0).toNumber())),h},"fromObject"),t.toObject=n(function(f,h){h||(h={});let p={};return h.defaults&&(p.fieldName="",p.fieldValue=""),f.fieldName!=null&&f.hasOwnProperty("fieldName")&&(p.fieldName=f.fieldName),f.fieldValue!=null&&f.hasOwnProperty("fieldValue")&&(p.fieldValue=f.fieldValue),f.fieldTimestampMs!=null&&f.hasOwnProperty("fieldTimestampMs")&&(typeof f.fieldTimestampMs=="number"?p.fieldTimestampMs=h.longs===String?String(f.fieldTimestampMs):f.fieldTimestampMs:p.fieldTimestampMs=h.longs===String?s.Long.prototype.toString.call(f.fieldTimestampMs):h.longs===Number?new s.LongBits(f.fieldTimestampMs.low>>>0,f.fieldTimestampMs.high>>>0).toNumber():f.fieldTimestampMs,h.oneofs&&(p._fieldTimestampMs="fieldTimestampMs")),p},"toObject"),t.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=n(function(f){return f===void 0&&(f="type.googleapis.com"),f+"/PeerMessage.AwarenessPayload"},"getTypeUrl"),t}(),e.AwarenessBroadcast=function(){function t(r){if(this.awarenessState=[],r)for(let o=Object.keys(r),f=0;f<o.length;++f)r[o[f]]!=null&&(this[o[f]]=r[o[f]])}return n(t,"AwarenessBroadcast"),t.prototype.channel="",t.prototype.user="",t.prototype.awarenessState=s.emptyArray,t.create=n(function(o){return new t(o)},"create"),t.encode=n(function(o,f){if(f||(f=g.create()),o.channel!=null&&Object.hasOwnProperty.call(o,"channel")&&f.uint32(10).string(o.channel),o.user!=null&&Object.hasOwnProperty.call(o,"user")&&f.uint32(18).string(o.user),o.awarenessState!=null&&o.awarenessState.length)for(let h=0;h<o.awarenessState.length;++h)a.PeerMessage.AwarenessPayload.encode(o.awarenessState[h],f.uint32(26).fork()).ldelim();return f},"encode"),t.encodeDelimited=n(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=n(function(o,f){o instanceof v||(o=v.create(o));let h=f===void 0?o.len:o.pos+f,p=new a.PeerMessage.AwarenessBroadcast;for(;o.pos<h;){let d=o.uint32();switch(d>>>3){case 1:{p.channel=o.string();break}case 2:{p.user=o.string();break}case 3:{p.awarenessState&&p.awarenessState.length||(p.awarenessState=[]),p.awarenessState.push(a.PeerMessage.AwarenessPayload.decode(o,o.uint32()));break}default:o.skipType(d&7);break}}return p},"decode"),t.decodeDelimited=n(function(o){return o instanceof v||(o=new v(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=n(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.channel!=null&&o.hasOwnProperty("channel")&&!s.isString(o.channel))return"channel: string expected";if(o.user!=null&&o.hasOwnProperty("user")&&!s.isString(o.user))return"user: string expected";if(o.awarenessState!=null&&o.hasOwnProperty("awarenessState")){if(!Array.isArray(o.awarenessState))return"awarenessState: array expected";for(let f=0;f<o.awarenessState.length;++f){let h=a.PeerMessage.AwarenessPayload.verify(o.awarenessState[f]);if(h)return"awarenessState."+h}}return null},"verify"),t.fromObject=n(function(o){if(o instanceof a.PeerMessage.AwarenessBroadcast)return o;let f=new a.PeerMessage.AwarenessBroadcast;if(o.channel!=null&&(f.channel=String(o.channel)),o.user!=null&&(f.user=String(o.user)),o.awarenessState){if(!Array.isArray(o.awarenessState))throw TypeError(".PeerMessage.AwarenessBroadcast.awarenessState: array expected");f.awarenessState=[];for(let h=0;h<o.awarenessState.length;++h){if(typeof o.awarenessState[h]!="object")throw TypeError(".PeerMessage.AwarenessBroadcast.awarenessState: object expected");f.awarenessState[h]=a.PeerMessage.AwarenessPayload.fromObject(o.awarenessState[h])}}return f},"fromObject"),t.toObject=n(function(o,f){f||(f={});let h={};if((f.arrays||f.defaults)&&(h.awarenessState=[]),f.defaults&&(h.channel="",h.user=""),o.channel!=null&&o.hasOwnProperty("channel")&&(h.channel=o.channel),o.user!=null&&o.hasOwnProperty("user")&&(h.user=o.user),o.awarenessState&&o.awarenessState.length){h.awarenessState=[];for(let p=0;p<o.awarenessState.length;++p)h.awarenessState[p]=a.PeerMessage.AwarenessPayload.toObject(o.awarenessState[p],f)}return h},"toObject"),t.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=n(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.AwarenessBroadcast"},"getTypeUrl"),t}(),e.AwarenessQuery=function(){function t(r){if(r)for(let o=Object.keys(r),f=0;f<o.length;++f)r[o[f]]!=null&&(this[o[f]]=r[o[f]])}return n(t,"AwarenessQuery"),t.prototype.channel="",t.prototype.user="",t.create=n(function(o){return new t(o)},"create"),t.encode=n(function(o,f){return f||(f=g.create()),o.channel!=null&&Object.hasOwnProperty.call(o,"channel")&&f.uint32(10).string(o.channel),o.user!=null&&Object.hasOwnProperty.call(o,"user")&&f.uint32(18).string(o.user),f},"encode"),t.encodeDelimited=n(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=n(function(o,f){o instanceof v||(o=v.create(o));let h=f===void 0?o.len:o.pos+f,p=new a.PeerMessage.AwarenessQuery;for(;o.pos<h;){let d=o.uint32();switch(d>>>3){case 1:{p.channel=o.string();break}case 2:{p.user=o.string();break}default:o.skipType(d&7);break}}return p},"decode"),t.decodeDelimited=n(function(o){return o instanceof v||(o=new v(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=n(function(o){return typeof o!="object"||o===null?"object expected":o.channel!=null&&o.hasOwnProperty("channel")&&!s.isString(o.channel)?"channel: string expected":o.user!=null&&o.hasOwnProperty("user")&&!s.isString(o.user)?"user: string expected":null},"verify"),t.fromObject=n(function(o){if(o instanceof a.PeerMessage.AwarenessQuery)return o;let f=new a.PeerMessage.AwarenessQuery;return o.channel!=null&&(f.channel=String(o.channel)),o.user!=null&&(f.user=String(o.user)),f},"fromObject"),t.toObject=n(function(o,f){f||(f={});let h={};return f.defaults&&(h.channel="",h.user=""),o.channel!=null&&o.hasOwnProperty("channel")&&(h.channel=o.channel),o.user!=null&&o.hasOwnProperty("user")&&(h.user=o.user),h},"toObject"),t.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=n(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.AwarenessQuery"},"getTypeUrl"),t}(),e.AwarenessClose=function(){function t(r){if(r)for(let o=Object.keys(r),f=0;f<o.length;++f)r[o[f]]!=null&&(this[o[f]]=r[o[f]])}return n(t,"AwarenessClose"),t.prototype.channel="",t.prototype.user="",t.create=n(function(o){return new t(o)},"create"),t.encode=n(function(o,f){return f||(f=g.create()),o.channel!=null&&Object.hasOwnProperty.call(o,"channel")&&f.uint32(10).string(o.channel),o.user!=null&&Object.hasOwnProperty.call(o,"user")&&f.uint32(18).string(o.user),f},"encode"),t.encodeDelimited=n(function(o,f){return this.encode(o,f).ldelim()},"encodeDelimited"),t.decode=n(function(o,f){o instanceof v||(o=v.create(o));let h=f===void 0?o.len:o.pos+f,p=new a.PeerMessage.AwarenessClose;for(;o.pos<h;){let d=o.uint32();switch(d>>>3){case 1:{p.channel=o.string();break}case 2:{p.user=o.string();break}default:o.skipType(d&7);break}}return p},"decode"),t.decodeDelimited=n(function(o){return o instanceof v||(o=new v(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=n(function(o){return typeof o!="object"||o===null?"object expected":o.channel!=null&&o.hasOwnProperty("channel")&&!s.isString(o.channel)?"channel: string expected":o.user!=null&&o.hasOwnProperty("user")&&!s.isString(o.user)?"user: string expected":null},"verify"),t.fromObject=n(function(o){if(o instanceof a.PeerMessage.AwarenessClose)return o;let f=new a.PeerMessage.AwarenessClose;return o.channel!=null&&(f.channel=String(o.channel)),o.user!=null&&(f.user=String(o.user)),f},"fromObject"),t.toObject=n(function(o,f){f||(f={});let h={};return f.defaults&&(h.channel="",h.user=""),o.channel!=null&&o.hasOwnProperty("channel")&&(h.channel=o.channel),o.user!=null&&o.hasOwnProperty("user")&&(h.user=o.user),h},"toObject"),t.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=n(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.AwarenessClose"},"getTypeUrl"),t}(),e})()},9648131521:(H,l,c)=>{"use strict";c.d(l,{X:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={InvalidCursor:"invalid_cursor",InvalidArguments:"invalid_arguments"},t=(0,s.A)("activity.feed generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"activity.feed",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to activity.feed
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcheractivityFeedFetcher",description:"activity.feed generated fetcher"}},1605540670:(H,l,c)=>{"use strict";c.d(l,{O:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={InvalidInviteType:"invalid_invite_type",Ratelimited:"ratelimited"},t=(0,s.A)("connectInvites.list generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"connectInvites.list",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to connectInvites.list
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconnectInvitesListFetcher",description:"connectInvites.list generated fetcher"}},1614054140:(H,l,c)=>{"use strict";c.d(l,{T:()=>e,W:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={ChannelConversionInProgress:"channel_conversion_in_progress",ConnectionLimitExceeded:"connection_limit_exceeded",EmailDoesNotMatch:"email_does_not_match",FailedToStartTrial:"failed_to_start_trial",HasAlreadyConnectedToOrg:"has_already_connected_to_org",InvalidArguments:"invalid_arguments",InvalidEmojiNotAllowed:"invalid_emoji_not_allowed",InvalidHostTeam:"invalid_host_team",InvalidLink:"invalid_link",InvalidName:"invalid_name",InvalidNameMaxlength:"invalid_name_maxlength",InvalidNamePunctuation:"invalid_name_punctuation",InvalidNameRequired:"invalid_name_required",InvalidNameSpecials:"invalid_name_specials",InviteFromSameOrg:"invite_from_same_org",InviteNotFound:"invite_not_found",InvalidPrivacy:"invalid_privacy",InvalidRecipientTeam:"invalid_recipient_team",InvalidTargetTeam:"invalid_target_team",InviteUsed:"invite_used",IsPendingConnectedToOrg:"is_pending_connected_to_org",LegacyConnectionInvalidOrg:"legacy_connection_invalid_org",LegacyConnectionLimitExceeded:"legacy_connection_limit_exceeded",NameTaken:"name_taken",NotAllowedForGridWorkspace:"not_allowed_for_grid_workspace",NotPaid:"not_paid",RestrictedAction:"restricted_action",TeamNotFound:"team_not_found",UserCannotCreateChannel:"user_cannot_create_channel",UserIsRestricted:"user_is_restricted",UserNotFound:"user_not_found",UserRequiredToAcceptAsPrivateButCannot:"user_required_to_accept_as_private_but_cannot"},t=(0,s.A)("conversations.acceptSharedInvite generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"conversations.acceptSharedInvite",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to conversations.acceptSharedInvite
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconversationsAcceptSharedInviteFetcher",description:"conversations.acceptSharedInvite generated fetcher"}},6772985425:(H,l,c)=>{"use strict";c.d(l,{d:()=>e,y:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={DisallowedAction:"disallowed_action",RestrictedAction:"restricted_action",InvalidArguments:"invalid_arguments",ChannelNotFound:"channel_not_found",FileNotFound:"file_not_found",TooManyTabs:"too_many_tabs"},t=(0,s.A)("conversations.addTab generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"conversations.addTab",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to conversations.addTab
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconversationsAddTabFetcher",description:"conversations.addTab generated fetcher"}},6639221719:(H,l,c)=>{"use strict";c.d(l,{U:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={FeatureNotEnabled:"feature_not_enabled",ChannelNotFound:"channel_not_found",ErrorFetchingChannelPrefs:"error_fetching_channel_prefs"},t=(0,s.A)("conversations.listPrefs generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"conversations.listPrefs",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to conversations.listPrefs
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconversationsListPrefsFetcher",description:"conversations.listPrefs generated fetcher"}},1783582283:(H,l,c)=>{"use strict";c.d(l,{i:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={DisallowedAction:"disallowed_action",RestrictedAction:"restricted_action",InvalidArguments:"invalid_arguments",ChannelNotFound:"channel_not_found",FileNotFound:"file_not_found",TabNotFound:"tab_not_found"},t=(0,s.A)("conversations.moveTab generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"conversations.moveTab",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to conversations.moveTab
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconversationsMoveTabFetcher",description:"conversations.moveTab generated fetcher"}},4347488242:(H,l,c)=>{"use strict";c.d(l,{D:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={DisallowedAction:"disallowed_action",RestrictedAction:"restricted_action",InvalidArguments:"invalid_arguments",ChannelNotFound:"channel_not_found"},t=(0,s.A)("conversations.setProperties generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"conversations.setProperties",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to conversations.setProperties
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconversationsSetPropertiesFetcher",description:"conversations.setProperties generated fetcher"}},4349526263:(H,l,c)=>{"use strict";c.d(l,{Sv:()=>e,a0:()=>r,jB:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={Unknown:"unknown",UserCannotCreateChannel:"user_cannot_create_channel",IsPendingConnectedToOrg:"is_pending_connected_to_org",HasAlreadyConnectedToOrg:"has_already_connected_to_org",EmailDoesNotMatch:"email_does_not_match",InviteFromSameOrg:"invite_from_same_org",UserIsRestricted:"user_is_restricted",NotAllowedForGridWorkspace:"not_allowed_for_grid_workspace",GridWorkspaceRequired:"grid_workspace_required",RestrictedAction:"restricted_action",ConnectionLimitExceeded:"connection_limit_exceeded",LegacyConnectionLimitExceeded:"legacy_connection_limit_exceeded",LegacyConnectionInvalidOrg:"legacy_connection_invalid_org",UserRequiredToAcceptAsPrivateButCannot:"user_required_to_accept_as_private_but_cannot",NotPaid:"not_paid",UpgradeRequiredButUserCannot:"upgrade_required_but_user_cannot",InvalidRecipientTeam:"invalid_recipient_team"},t={InvalidArguments:"invalid_arguments",InviteNotFound:"invite_not_found",TeamNotFound:"team_not_found",UserNotFound:"user_not_found",DomainClaimed:"domain_claimed"},r=(0,s.A)("conversations.sharedInviteAcceptanceEligibility generated fetcher",function(){var o=(0,u.coroutine)(function*(f,h,p){try{const d=["reason"],y=(0,v.A)(p,d),S=(0,i.VA)(y);return yield f((0,g.apiCall)({method:"conversations.sharedInviteAcceptanceEligibility",args:S,reason:p.reason}))}catch(d){throw(0,a.Ay)({getState:h}).error(`API call to conversations.sharedInviteAcceptanceEligibility
				with reason ${p.reason} failed, initiated by generated fetcher`),d}});return function(f,h,p){return o.apply(this,arguments)}}());r.meta={name:"createFetcher",key:"createFetcherconversationsSharedInviteAcceptanceEligibilityFetcher",description:"conversations.sharedInviteAcceptanceEligibility generated fetcher"}},7056498591:(H,l,c)=>{"use strict";c.d(l,{k:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={DisallowedAction:"disallowed_action",RestrictedAction:"restricted_action",InvalidArguments:"invalid_arguments",ChannelNotFound:"channel_not_found",TabNotFound:"tab_not_found",FileNotFound:"file_not_found",TooManyTabs:"too_many_tabs"},t=(0,s.A)("conversations.updateTab generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"conversations.updateTab",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to conversations.updateTab
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconversationsUpdateTabFetcher",description:"conversations.updateTab generated fetcher"}},3456937405:(H,l,c)=>{"use strict";c.d(l,{W:()=>e,l:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={NoAliasSelected:"no_alias_selected",RateLimited:"rate_limited",NoImageUploaded:"no_image_uploaded",InvalidMode:"invalid_mode",ErrorBadNameI18N:"error_bad_name_i18n",ErrorNameTaken:"error_name_taken",ErrorNameTakenI18N:"error_name_taken_i18n",ErrorLowerCaseNamesOnly:"error_lower_case_names_only",ErrorInvalidAlias:"error_invalid_alias",ErrorBadUpload:"error_bad_upload",ErrorTooBig:"error_too_big",ErrorBadWide:"error_bad_wide",ErrorMissingName:"error_missing_name",ErrorNoImage:"error_no_image",ErrorBadFormat:"error_bad_format",ResizedButStillTooLarge:"resized_but_still_too_large",UnableToEnqueue:"unable_to_enqueue",TooManyFrames:"too_many_frames",UnknownMethod:"unknown_method",NoPermission:"no_permission",UnableToFetchEmoji:"unable_to_fetch_emoji",EmojiLimitReached:"emoji_limit_reached",NoUrlProvided:"no_url_provided",NoUrlImage:"no_url_image"},t=(0,s.A)("emoji.add generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"emoji.add",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to emoji.add
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcheremojiAddFetcher",description:"emoji.add generated fetcher"}},5216556985:(H,l,c)=>{"use strict";c.d(l,{D:()=>t,G:()=>e});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={FeatureNotEnabled:"feature_not_enabled",InviteNotFound:"invite_not_found",WorkspaceNotFound:"workspace_not_found",OperationNotAllowed:"operation_not_allowed",ExternalWorkspaceLimitReached:"external_workspace_limit_reached",FailedToFetchTermsOfService:"failed_to_fetch_terms_of_service",TermsOfServiceNotAccepted:"terms_of_service_not_accepted",GuestUserNotAllowed:"guest_user_not_allowed",EmailDoesNotMatch:"email_does_not_match",InvalidRecipientTeam:"invalid_recipient_team",DomainClaimed:"domain_claimed",NotPaid:"not_paid"},t=(0,s.A)("externalWorkspaces.invites.accept generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"externalWorkspaces.invites.accept",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to externalWorkspaces.invites.accept
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherexternalWorkspacesInvitesAcceptFetcher",description:"externalWorkspaces.invites.accept generated fetcher"}},8485081141:(H,l,c)=>{"use strict";c.d(l,{I:()=>e,l:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={InviteNotFound:"invite_not_found",InviteInvalid:"invite_invalid",RateLimited:"rate_limited",InviteUsed:"invite_used",FailedGeneratingInviteOutput:"failed_generating_invite_output"},t=(0,s.A)("externalWorkspaces.invites.info generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason","token"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"externalWorkspaces.invites.info",args:y,reason:h.reason,computeToken:!1}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to externalWorkspaces.invites.info
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherexternalWorkspacesInvitesInfoFetcher",description:"externalWorkspaces.invites.info generated fetcher"}},5502459222:(H,l,c)=>{"use strict";c.d(l,{R:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={FileNotFound:"file_not_found",ExperimentNotEnabled:"experiment_not_enabled"},t=(0,s.A)("files.readStatus generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"files.readStatus",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to files.readStatus
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherfilesReadStatusFetcher",description:"files.readStatus generated fetcher"}},6801073238:(H,l,c)=>{"use strict";c.d(l,{x:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={FileNotFound:"file_not_found",UnknownMethod:"unknown_method",FiletypeNotSupported:"filetype_not_supported",CannotUpgradeAccess:"cannot_upgrade_access",UpgradeNotSupported:"upgrade_not_supported"},t=(0,s.A)("files.requestPermission generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"files.requestPermission",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to files.requestPermission
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherfilesRequestPermissionFetcher",description:"files.requestPermission generated fetcher"}},8726791251:(H,l,c)=>{"use strict";c.d(l,{I:()=>e});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e=(0,s.A)("help.issues.ticketStats generated fetcher",function(){var t=(0,u.coroutine)(function*(r,o,f){try{const h=["reason"],p=(0,v.A)(f,h),d=(0,i.VA)(p);return yield r((0,g.apiCall)({method:"help.issues.ticketStats",args:d,reason:f.reason}))}catch(h){throw(0,a.Ay)({getState:o}).error(`API call to help.issues.ticketStats
				with reason ${f.reason} failed, initiated by generated fetcher`),h}});return function(r,o,f){return t.apply(this,arguments)}}());e.meta={name:"createFetcher",key:"createFetcherhelpIssuesTicketStatsFetcher",description:"help.issues.ticketStats generated fetcher"}},930270247:(H,l,c)=>{"use strict";c.d(l,{l:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={},t=(0,s.A)("help.productHelpCard.list generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"help.productHelpCard.list",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to help.productHelpCard.list
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpProductHelpCardListFetcher",description:"help.productHelpCard.list generated fetcher"}},138202077:(H,l,c)=>{"use strict";c.d(l,{H:()=>e});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e=(0,s.A)("help.getRecommendedArticles generated fetcher",function(){var t=(0,u.coroutine)(function*(r,o,f){try{const h=["reason"],p=(0,v.A)(f,h),d=(0,i.VA)(p);return yield r((0,g.apiCall)({method:"help.getRecommendedArticles",args:d,reason:f.reason}))}catch(h){throw(0,a.Ay)({getState:o}).error(`API call to help.getRecommendedArticles
				with reason ${f.reason} failed, initiated by generated fetcher`),h}});return function(r,o,f){return t.apply(this,arguments)}}());e.meta={name:"createFetcher",key:"createFetcherhelpGetRecommendedArticlesFetcher",description:"help.getRecommendedArticles generated fetcher"}},6936450040:(H,l,c)=>{"use strict";c.d(l,{G:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={InvalidAuth:"invalid_auth",MissingArgument:"missing_argument",Shrug:"shrug"},t=(0,s.A)("helpdesk.categories generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason","token"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"helpdesk.categories",args:y,reason:h.reason,computeToken:!1}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to helpdesk.categories
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpdeskCategoriesFetcher",description:"helpdesk.categories generated fetcher"}},3593297427:(H,l,c)=>{"use strict";c.d(l,{w:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={CouldNotFindArticle:"could_not_find_article"},t=(0,s.A)("helpdesk.getArticle generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"helpdesk.getArticle",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to helpdesk.getArticle
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpdeskGetArticleFetcher",description:"helpdesk.getArticle generated fetcher"}},8745755260:(H,l,c)=>{"use strict";c.d(l,{h:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={CouldNotFetchSections:"could_not_fetch_sections"},t=(0,s.A)("helpdesk.getSectionsAndArticlesByCategory generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason","token"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"helpdesk.getSectionsAndArticlesByCategory",args:y,reason:h.reason,computeToken:!1}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to helpdesk.getSectionsAndArticlesByCategory
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpdeskGetSectionsAndArticlesByCategoryFetcher",description:"helpdesk.getSectionsAndArticlesByCategory generated fetcher"}},9532047472:(H,l,c)=>{"use strict";c.d(l,{a:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={MissingArgument:"missing_argument",InvalidAuth:"invalid_auth",UnknownError:"unknown_error"},t=(0,s.A)("helpdesk.get generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason","token"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"helpdesk.get",args:y,reason:h.reason,computeToken:!1}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to helpdesk.get
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpdeskGetFetcher",description:"helpdesk.get generated fetcher"}},3810796320:(H,l,c)=>{"use strict";c.d(l,{V:()=>e,o:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={ChannelNotFound:"channel_not_found",MissingScope:"missing_scope",InvalidApp:"invalid_app",InternalError:"internal_error",UriNotHandledByApp:"uri_not_handled_by_app",UriNotFoundInMessage:"uri_not_found_in_message",EmailNotVerified:"email_not_verified",UnsupportedEmailAddress:"unsupported_email_address",InvalidClientCache:"invalid_client_cache",SsoNotAllowed:"sso_not_allowed"},t=(0,s.A)("links.getTransferPayload generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"links.getTransferPayload",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to links.getTransferPayload
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherlinksGetTransferPayloadFetcher",description:"links.getTransferPayload generated fetcher"}},2694081143:(H,l,c)=>{"use strict";c.d(l,{Q:()=>e,T:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={ListNotFound:"list_not_found",RecordNotFound:"record_not_found",RecordDeleted:"record_deleted",TeamNotFound:"team_not_found",UserNotFound:"user_not_found"},t=(0,s.A)("lists.records.info generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"lists.records.info",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to lists.records.info
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherlistsRecordsInfoFetcher",description:"lists.records.info generated fetcher"}},444762595:(H,l,c)=>{"use strict";c.d(l,{z:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={ListNotFound:"list_not_found",TeamNotFound:"team_not_found",UserNotFound:"user_not_found",InvalidCursor:"invalid_cursor",SortsNotSupported:"sorts_not_supported",FiltersNotSupported:"filters_not_supported"},t=(0,s.A)("lists.records.list generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"lists.records.list",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to lists.records.list
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherlistsRecordsListFetcher",description:"lists.records.list generated fetcher"}},6485511687:(H,l,c)=>{"use strict";c.d(l,{a:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={NotificationNotFound:"notification_not_found",InvalidAction:"invalid_action",ErrorPersistingImpression:"error_persisting_impression",ChannelNotFound:"channel_not_found",InvalidNotificationParams:"invalid_notification_params",CannotProvideChannelAndEntityId:"cannot_provide_channel_and_entity_id",MissingEntityType:"missing_entity_type",InvalidEntityType:"invalid_entity_type"},t=(0,s.A)("megaphone.setNotificationAsSeen generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"megaphone.setNotificationAsSeen",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to megaphone.setNotificationAsSeen
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchermegaphoneSetNotificationAsSeenFetcher",description:"megaphone.setNotificationAsSeen generated fetcher"}},3048437087:(H,l,c)=>{"use strict";c.d(l,{n:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={NotImplemented:"not_implemented",NoProductSelected:"no_product_selected",InvalidRequest:"invalid_request",UnableToSetProductId:"unable_to_set_product_id",UnableToSetAddonIds:"unable_to_set_addon_ids",InvalidProductId:"invalid_product_id",AddonListTooLong:"addon_list_too_long",InvalidAddonIdInList:"invalid_addon_id_in_list",MultipleAddonsWithSameType:"multiple_addons_with_same_type"},t=(0,s.A)("payments.checkout.config generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"payments.checkout.config",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to payments.checkout.config
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherpaymentsCheckoutConfigFetcher",description:"payments.checkout.config generated fetcher"}},9869343146:(H,l,c)=>{"use strict";c.d(l,{V:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={InvalidCampaign:"invalid_campaign"},t=(0,s.A)("promo.campaigns.eligibilityInfo generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d),S=yield o((0,g.apiCall)({method:"promo.campaigns.eligibilityInfo",args:y,reason:h.reason}));return(0,i.XK)(S)}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to promo.campaigns.eligibilityInfo
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherpromoCampaignsEligibilityInfoFetcher",description:"promo.campaigns.eligibilityInfo generated fetcher"}},2332966328:(H,l,c)=>{"use strict";c.d(l,{I:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={NotFound:"not_found"},t=(0,s.A)("quip.lookupFileId generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"quip.lookupFileId",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to quip.lookupFileId
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherquipLookupFileIdFetcher",description:"quip.lookupFileId generated fetcher"}},1131121:(H,l,c)=>{"use strict";c.d(l,{V:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={ChannelNotFound:"channel_not_found"},t=(0,s.A)("recordChannels.info generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"recordChannels.info",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to recordChannels.info
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherrecordChannelsInfoFetcher",description:"recordChannels.info generated fetcher"}},5170073955:(H,l,c)=>{"use strict";c.d(l,{Q:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={UserNotFound:"user_not_found",AlreadyInCall:"already_in_call",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",InvalidResponse:"invalid_response",InviteNotFound:"invite_not_found",PermissionDenied:"permission_denied",TeamNotFound:"team_not_found"},t=(0,s.A)("rooms.inviteResponse generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"rooms.inviteResponse",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to rooms.inviteResponse
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherroomsInviteResponseFetcher",description:"rooms.inviteResponse generated fetcher"}},5142752606:(H,l,c)=>{"use strict";c.d(l,{g:()=>e});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={InvalidUser:"invalid_user",ChannelNotFound:"channel_not_found",InvalidChannelId:"invalid_channel_id",PermissionDenied:"permission_denied",CannotInviteExternal:"cannot_invite_external",InviteFailed:"invite_failed",HuddleNotFound:"huddle_not_found",TeamNotFound:"team_not_found",MaxPotentialParticipants:"max_potential_participants",RecipientHuddlesDisabled:"recipient_huddles_disabled",FreemiumMaxParticipants:"freemium_max_participants"},t=(0,s.A)("rooms.notifyMember generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"rooms.notifyMember",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to rooms.notifyMember
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherroomsNotifyMemberFetcher",description:"rooms.notifyMember generated fetcher"}},727128009:(H,l,c)=>{"use strict";c.d(l,{i:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={InvalidCallId:"invalid_call_id",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",TeamNotFound:"team_not_found",InvalidHuddle:"invalid_huddle",ExternalApiFailed:"external_api_failed",PermissionDenied:"permission_denied"},t=(0,s.A)("rooms.startTranscription generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"rooms.startTranscription",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to rooms.startTranscription
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherroomsStartTranscriptionFetcher",description:"rooms.startTranscription generated fetcher"}},580220061:(H,l,c)=>{"use strict";c.d(l,{W:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={InvalidCallId:"invalid_call_id",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",TeamNotFound:"team_not_found",InvalidHuddle:"invalid_huddle",InvalidTranscriptionCache:"invalid_transcription_cache",ExternalApiFailed:"external_api_failed",PermissionDenied:"permission_denied"},t=(0,s.A)("rooms.stopTranscription generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"rooms.stopTranscription",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to rooms.stopTranscription
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherroomsStopTranscriptionFetcher",description:"rooms.stopTranscription generated fetcher"}},5276466411:(H,l,c)=>{"use strict";c.d(l,{z:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={},t=(0,s.A)("search.autocomplete.topEngagedFiles generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"search.autocomplete.topEngagedFiles",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to search.autocomplete.topEngagedFiles
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchersearchAutocompleteTopEngagedFilesFetcher",description:"search.autocomplete.topEngagedFiles generated fetcher"}},6494470131:(H,l,c)=>{"use strict";c.d(l,{v:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={AuthError:"auth_error"},t=(0,s.A)("search.autocomplete.triggers generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"search.autocomplete.triggers",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to search.autocomplete.triggers
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchersearchAutocompleteTriggersFetcher",description:"search.autocomplete.triggers generated fetcher"}},7217613594:(H,l,c)=>{"use strict";c.d(l,{H:()=>t,c:()=>e});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={InsufficientRecordAccess:"insufficient_record_access",RecordNotFound:"record_not_found",SalesHomeUserConfigNotFound:"sales_home_user_config_not_found",TokenNotFound:"token_not_found",SalesforceTimeout:"salesforce_timeout",AccessTokenExchangeFailed:"access_token_exchange_failed"},t=(0,s.A)("sfdc.getRecordLayoutDetails generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"sfdc.getRecordLayoutDetails",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to sfdc.getRecordLayoutDetails
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchersfdcGetRecordLayoutDetailsFetcher",description:"sfdc.getRecordLayoutDetails generated fetcher"}},8480246703:(H,l,c)=>{"use strict";c.d(l,{k:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={},t=(0,s.A)("sfdc.orgInfo generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"sfdc.orgInfo",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to sfdc.orgInfo
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchersfdcOrgInfoFetcher",description:"sfdc.orgInfo generated fetcher"}},6515569951:(H,l,c)=>{"use strict";c.d(l,{Z:()=>t,q:()=>e});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={MissingArgument:"missing_argument",NotPaid:"not_paid",InvalidLink:"invalid_link",InviteInactive:"invite_inactive",InviteAlreadyUsed:"invite_already_used",InviteNotAllowed:"invite_not_allowed",AcceptNotAllowed:"accept_not_allowed",FeatureDisabled:"feature_disabled",OrgsSevered:"orgs_severed",InternalError:"internal_error",CustomInvitesNotSupported:"custom_invites_not_supported",InvalidRecipientTeam:"invalid_recipient_team",EmailDoesNotMatch:"email_does_not_match",SlackConnectDmNotAllowedOnTeam:"slack_connect_dm_not_allowed_on_team"},t=(0,s.A)("sharedInvites.accept generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"sharedInvites.accept",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to sharedInvites.accept
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchersharedInvitesAcceptFetcher",description:"sharedInvites.accept generated fetcher"}},9673616141:(H,l,c)=>{"use strict";c.d(l,{p:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={NoSuchSubteam:"no_such_subteam",PlanUpgradeRequired:"plan_upgrade_required",InvalidCursor:"invalid_cursor"},t=(0,s.A)("usergroups.users.list generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"usergroups.users.list",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to usergroups.users.list
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherusergroupsUsersListFetcher",description:"usergroups.users.list generated fetcher"}},9291336591:(H,l,c)=>{"use strict";c.d(l,{k:()=>e,n:()=>t});var u=c(9706240641),m=c.n(u),v=c(1649982175),g=c(1269227002),s=c(5257368278),a=c(796111729),i=c(5873468694);const e={BadUsername:"bad_username",CannotUpdateAdminUser:"cannot_update_admin_user",EmailBad:"email_bad",EmailTaken:"email_taken",DisplayNameNotAllowed:"display_name_not_allowed",InvalidNamePunctuation:"invalid_name_punctuation",InvalidNameRequired:"invalid_name_required",InvalidNameSpecials:"invalid_name_specials",InvalidProfile:"invalid_profile",InvalidReservedWord:"invalid_reserved_word",InvalidUser:"invalid_user",LongUsername:"long_username",MustClearBothStatusTextAndStatusEmoji:"must_clear_both_status_text_and_status_emoji",NameNotAllowed:"name_not_allowed",NotAdmin:"not_admin",NotAppAdmin:"not_app_admin",PartialProfileSetFailed:"partial_profile_set_failed",ProfileSetFailed:"profile_set_failed",ProfileStatusSetFailedNotEmojiSyntax:"profile_status_set_failed_not_emoji_syntax",ProfileStatusSetFailedNotValidEmoji:"profile_status_set_failed_not_valid_emoji",ProfileStatusSetFailedWritingExpiration:"profile_status_set_failed_writing_expiration",ReadOnlyProfileField:"read_only_profile_field",ReservedName:"reserved_name",SudoRequired:"sudo_required",TooLong:"too_long",UserNotFound:"user_not_found",UserNotSpecified:"user_not_specified",UserRemovedFromTeam:"user_removed_from_team",UsernameEmpty:"username_empty",UsernameTaken:"username_taken"},t=(0,s.A)("users.profile.set generated fetcher",function(){var r=(0,u.coroutine)(function*(o,f,h){try{const p=["reason"],d=(0,v.A)(h,p),y=(0,i.VA)(d);return yield o((0,g.apiCall)({method:"users.profile.set",args:y,reason:h.reason}))}catch(p){throw(0,a.Ay)({getState:f}).error(`API call to users.profile.set
				with reason ${h.reason} failed, initiated by generated fetcher`),p}});return function(o,f,h){return r.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherusersProfileSetFetcher",description:"users.profile.set generated fetcher"}},4097827290:(H,l,c)=>{"use strict";c.d(l,{p:()=>u,t:()=>m});const u={Equal:"equal",NotEqual:"not_equal",GreaterThan:"greater_than",LessThan:"less_than",GreaterThanOrEqual:"greater_than_or_equal",LessThanOrEqual:"less_than_or_equal",Contains:"contains",DoesNotContain:"does_not_contain",IsEmpty:"is_empty",IsNotEmpty:"is_not_empty",IsMe:"is_me",IsNotMe:"is_not_me"},m={Equal:"equal",NotEqual:"not_equal",GreaterThan:"greater_than",LessThan:"less_than",GreaterThanOrEqual:"greater_than_or_equal",LessThanOrEqual:"less_than_or_equal",Contains:"contains",DoesNotContain:"does_not_contain",IsEmpty:"is_empty",IsNotEmpty:"is_not_empty",IsMe:"is_me",IsNotMe:"is_not_me"}},2164700852:(H,l,c)=>{"use strict";c.d(l,{k:()=>u});const u={NotPaid:"not_paid",InvalidLink:"invalid_link",InviteInactive:"invite_inactive",InviteAlreadyUsed:"invite_already_used",InviteNotAllowed:"invite_not_allowed",AcceptNotAllowed:"accept_not_allowed",OrgsSevered:"orgs_severed",OrgNotVerified:"org_not_verified",UserIsRestricted:"user_is_restricted",InvalidRecipientTeam:"invalid_recipient_team",EmailDoesNotMatch:"email_does_not_match",Generic:"generic",SlackConnectDmNotAllowedOnTeam:"slack_connect_dm_not_allowed_on_team"}},7135774191:(H,l,c)=>{"use strict";c.r(l),c.d(l,{$Command:()=>hr,AllowNotifications:()=>Qf,AssociateChannelFlowCommand:()=>Ic,BadRequestException:()=>dc,BatchChannelMembershipsFilterSensitiveLog:()=>fd,BatchCreateChannelMembershipCommand:()=>Oc,BatchCreateChannelMembershipResponseFilterSensitiveLog:()=>hd,ChannelAssociatedWithFlowSummaryFilterSensitiveLog:()=>md,ChannelBanFilterSensitiveLog:()=>gd,ChannelBanSummaryFilterSensitiveLog:()=>vd,ChannelFilterSensitiveLog:()=>pd,ChannelFlowCallbackCommand:()=>wc,ChannelFlowCallbackRequestFilterSensitiveLog:()=>Ed,ChannelFlowFilterSensitiveLog:()=>yd,ChannelFlowSummaryFilterSensitiveLog:()=>bd,ChannelMembershipFilterSensitiveLog:()=>_d,ChannelMembershipForAppInstanceUserSummaryFilterSensitiveLog:()=>Hu,ChannelMembershipPreferencesFilterSensitiveLog:()=>lu,ChannelMembershipSummaryFilterSensitiveLog:()=>Cd,ChannelMembershipType:()=>Zf,ChannelMessageCallbackFilterSensitiveLog:()=>Sd,ChannelMessageFilterSensitiveLog:()=>Id,ChannelMessagePersistenceType:()=>ah,ChannelMessageStatus:()=>sh,ChannelMessageSummaryFilterSensitiveLog:()=>Od,ChannelMessageType:()=>lh,ChannelMode:()=>th,ChannelModeratedByAppInstanceUserSummaryFilterSensitiveLog:()=>ju,ChannelModeratorFilterSensitiveLog:()=>wd,ChannelModeratorSummaryFilterSensitiveLog:()=>Ad,ChannelPrivacy:()=>nh,ChannelSummaryFilterSensitiveLog:()=>_c,ChimeSDKMessaging:()=>yt,ChimeSDKMessagingClient:()=>qa,ChimeSDKMessagingServiceException:()=>es,ConflictException:()=>fc,CreateChannelBanCommand:()=>Ac,CreateChannelBanResponseFilterSensitiveLog:()=>Rd,CreateChannelCommand:()=>Dc,CreateChannelFlowCommand:()=>Rc,CreateChannelFlowRequestFilterSensitiveLog:()=>Md,CreateChannelMembershipCommand:()=>Mc,CreateChannelMembershipResponseFilterSensitiveLog:()=>Pd,CreateChannelModeratorCommand:()=>Pc,CreateChannelModeratorResponseFilterSensitiveLog:()=>kd,CreateChannelRequestFilterSensitiveLog:()=>Dd,DeleteChannelBanCommand:()=>kc,DeleteChannelCommand:()=>Nc,DeleteChannelFlowCommand:()=>Lc,DeleteChannelMembershipCommand:()=>Z,DeleteChannelMessageCommand:()=>X,DeleteChannelModeratorCommand:()=>xc,DeleteMessagingStreamingConfigurationsCommand:()=>Fc,DescribeChannelBanCommand:()=>Bc,DescribeChannelBanResponseFilterSensitiveLog:()=>Ld,DescribeChannelCommand:()=>Uc,DescribeChannelFlowCommand:()=>Vc,DescribeChannelFlowResponseFilterSensitiveLog:()=>xd,DescribeChannelMembershipCommand:()=>Hc,DescribeChannelMembershipForAppInstanceUserCommand:()=>jc,DescribeChannelMembershipForAppInstanceUserResponseFilterSensitiveLog:()=>Bd,DescribeChannelMembershipResponseFilterSensitiveLog:()=>Fd,DescribeChannelModeratedByAppInstanceUserCommand:()=>Wc,DescribeChannelModeratedByAppInstanceUserResponseFilterSensitiveLog:()=>Ud,DescribeChannelModeratorCommand:()=>zc,DescribeChannelModeratorResponseFilterSensitiveLog:()=>Vd,DescribeChannelResponseFilterSensitiveLog:()=>Nd,DisassociateChannelFlowCommand:()=>Gc,ErrorCode:()=>qf,ExpirationCriterion:()=>eh,FallbackAction:()=>rh,ForbiddenException:()=>hc,GetChannelMembershipPreferencesCommand:()=>$c,GetChannelMembershipPreferencesResponseFilterSensitiveLog:()=>Hd,GetChannelMessageCommand:()=>Gt,GetChannelMessageResponseFilterSensitiveLog:()=>jd,GetChannelMessageStatusCommand:()=>We,GetMessagingSessionEndpointCommand:()=>_e,GetMessagingStreamingConfigurationsCommand:()=>Xe,IdentityFilterSensitiveLog:()=>Ca,InvocationType:()=>ih,ListChannelBansCommand:()=>Qe,ListChannelBansRequestFilterSensitiveLog:()=>Wd,ListChannelBansResponseFilterSensitiveLog:()=>zd,ListChannelFlowsCommand:()=>Ve,ListChannelFlowsRequestFilterSensitiveLog:()=>Gd,ListChannelFlowsResponseFilterSensitiveLog:()=>$d,ListChannelMembershipsCommand:()=>Re,ListChannelMembershipsForAppInstanceUserCommand:()=>Me,ListChannelMembershipsForAppInstanceUserRequestFilterSensitiveLog:()=>cu,ListChannelMembershipsForAppInstanceUserResponseFilterSensitiveLog:()=>Yd,ListChannelMembershipsRequestFilterSensitiveLog:()=>Kd,ListChannelMembershipsResponseFilterSensitiveLog:()=>Jd,ListChannelMessagesCommand:()=>ne,ListChannelMessagesRequestFilterSensitiveLog:()=>Xd,ListChannelMessagesResponseFilterSensitiveLog:()=>Qd,ListChannelModeratorsCommand:()=>ce,ListChannelModeratorsRequestFilterSensitiveLog:()=>Zd,ListChannelModeratorsResponseFilterSensitiveLog:()=>qd,ListChannelsAssociatedWithChannelFlowCommand:()=>se,ListChannelsAssociatedWithChannelFlowRequestFilterSensitiveLog:()=>nf,ListChannelsAssociatedWithChannelFlowResponseFilterSensitiveLog:()=>rf,ListChannelsCommand:()=>te,ListChannelsModeratedByAppInstanceUserCommand:()=>Se,ListChannelsModeratedByAppInstanceUserRequestFilterSensitiveLog:()=>of,ListChannelsModeratedByAppInstanceUserResponseFilterSensitiveLog:()=>af,ListChannelsRequestFilterSensitiveLog:()=>ef,ListChannelsResponseFilterSensitiveLog:()=>tf,ListSubChannelsCommand:()=>de,ListSubChannelsRequestFilterSensitiveLog:()=>sf,ListSubChannelsResponseFilterSensitiveLog:()=>lf,ListTagsForResourceCommand:()=>ue,ListTagsForResourceResponseFilterSensitiveLog:()=>cf,MessageAttributeValueFilterSensitiveLog:()=>bc,MessagingDataType:()=>ch,NotFoundException:()=>pc,ProcessorFilterSensitiveLog:()=>Ec,PushNotificationConfigurationFilterSensitiveLog:()=>Vu,PushNotificationPreferencesFilterSensitiveLog:()=>Td,PushNotificationType:()=>oh,PutChannelExpirationSettingsCommand:()=>ae,PutChannelMembershipPreferencesCommand:()=>q,PutChannelMembershipPreferencesRequestFilterSensitiveLog:()=>uf,PutChannelMembershipPreferencesResponseFilterSensitiveLog:()=>df,PutMessagingStreamingConfigurationsCommand:()=>ve,RedactChannelMessageCommand:()=>le,ResourceLimitExceededException:()=>Sc,SearchChannelsCommand:()=>Ce,SearchChannelsRequestFilterSensitiveLog:()=>ff,SearchChannelsResponseFilterSensitiveLog:()=>hf,SearchFieldKey:()=>dh,SearchFieldOperator:()=>fh,SendChannelMessageCommand:()=>st,SendChannelMessageRequestFilterSensitiveLog:()=>pf,ServiceFailureException:()=>mc,ServiceUnavailableException:()=>gc,SortOrder:()=>uh,TagFilterSensitiveLog:()=>Tc,TagResourceCommand:()=>Ge,TagResourceRequestFilterSensitiveLog:()=>mf,ThrottledClientException:()=>vc,UnauthorizedClientException:()=>yc,UntagResourceCommand:()=>Je,UntagResourceRequestFilterSensitiveLog:()=>gf,UpdateChannelCommand:()=>pt,UpdateChannelFlowCommand:()=>He,UpdateChannelFlowRequestFilterSensitiveLog:()=>yf,UpdateChannelMessageCommand:()=>ke,UpdateChannelMessageRequestFilterSensitiveLog:()=>Sf,UpdateChannelReadMarkerCommand:()=>Ue,UpdateChannelRequestFilterSensitiveLog:()=>vf,__Client:()=>sl,paginateListChannelBans:()=>qt,paginateListChannelFlows:()=>zt,paginateListChannelMemberships:()=>an,paginateListChannelMembershipsForAppInstanceUser:()=>wt,paginateListChannelMessages:()=>_n,paginateListChannelModerators:()=>Xi,paginateListChannels:()=>Hi,paginateListChannelsAssociatedWithChannelFlow:()=>mo,paginateListChannelsModeratedByAppInstanceUser:()=>wn,paginateListSubChannels:()=>Tr,paginateSearchChannels:()=>Bs});var u={};c.r(u),c.d(u,{getUserAgentPrefix:()=>to,isVirtualHostableS3Bucket:()=>As,parseArn:()=>aa,partition:()=>lo,setPartitionInfo:()=>dn,useDefaultPartitionInfo:()=>fo});var m={};c.r(m),c.d(m,{aws:()=>u,booleanEquals:()=>il,getAttr:()=>is,isSet:()=>rs,isValidHostLabel:()=>_s,not:()=>Ds,parseURL:()=>ql,stringEquals:()=>pl,substring:()=>Rl,uriEncode:()=>La});var v;(function(A){A.ENV="env",A.CONFIG="shared config entry"})(v||(v={}));const g=n((A,E,T)=>{if(E in A){if(A[E]==="true")return!0;if(A[E]==="false")return!1;throw new Error(`Cannot load ${T} "${E}". Expected "true" or "false", got ${A[E]}.`)}},"booleanSelector"),s="AWS_USE_DUALSTACK_ENDPOINT",a="use_dualstack_endpoint",i=!1,e={environmentVariableSelector:A=>g(A,s,v.ENV),configFileSelector:A=>g(A,a,v.CONFIG),default:!1},t="AWS_USE_FIPS_ENDPOINT",r="use_fips_endpoint",o=!1,f={environmentVariableSelector:A=>g(A,t,v.ENV),configFileSelector:A=>g(A,r,v.CONFIG),default:!1};var h=c(9706240641);const p=function(){var A=(0,h.coroutine)(function*(E){const{tls:T=!0}=E,P=yield E.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(P))throw new Error("Invalid region in client config");const G=yield E.useDualstackEndpoint(),ee=yield E.useFipsEndpoint();var Be;const{hostname:Te}=(Be=yield E.regionInfoProvider(P,{useDualstackEndpoint:G,useFipsEndpoint:ee}))!==null&&Be!==void 0?Be:{};if(!Te)throw new Error("Cannot resolve hostname from client config");return E.urlParser(`${T?"https:":"http:"}//${Te}`)});return n(function(T){return A.apply(this,arguments)},"getEndpointFromRegion")}(),d=n(A=>{var E;const T=normalizeProvider((E=A.useDualstackEndpoint)!==null&&E!==void 0?E:!1),{endpoint:P,useFipsEndpoint:z,urlParser:G}=A;var ee;return{...A,tls:(ee=A.tls)!==null&&ee!==void 0?ee:!0,endpoint:P?normalizeProvider(typeof P=="string"?G(P):P):()=>getEndpointFromRegion({...A,useDualstackEndpoint:T,useFipsEndpoint:z}),isCustomEndpoint:!!P,useDualstackEndpoint:T}},"resolveEndpointsConfig"),y="AWS_REGION",S="region",b={environmentVariableSelector:A=>A[y],configFileSelector:A=>A[S],default:()=>{throw new Error("Region is missing")}},_={preferredFile:"credentials"},C=n(A=>typeof A=="string"&&(A.startsWith("fips-")||A.endsWith("-fips")),"isFipsRegion"),w=n(A=>C(A)?["fips-aws-global","aws-fips"].includes(A)?"us-east-1":A.replace(/fips-(dkr-|prod-)?|-fips/,""):A,"getRealRegion"),R=n(A=>{const{region:E,useFipsEndpoint:T}=A;if(!E)throw new Error("Region is missing");return{...A,region:(0,h.coroutine)(function*(){if(typeof E=="string")return w(E);const P=yield E();return w(P)}),useFipsEndpoint:(0,h.coroutine)(function*(){const P=typeof E=="string"?E:yield E();return C(P)?!0:typeof T!="function"?Promise.resolve(!!T):T()})}},"resolveRegionConfig");var O;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})(O||(O={}));class D{add(E){this.values.push(E)}set(E){this.values=E}remove(E){this.values=this.values.filter(T=>T!==E)}toString(){return this.values.map(E=>E.includes(",")||E.includes(" ")?`"${E}"`:E).join(", ")}get(){return this.values}constructor({name:E,kind:T=FieldPosition.HEADER,values:P=[]}){this.name=E,this.kind=T,this.values=P}}n(D,"Field");class I{static isInstance(E){if(!E)return!1;const T=E;return"method"in T&&"protocol"in T&&"hostname"in T&&"path"in T&&typeof T.query=="object"&&typeof T.headers=="object"}clone(){const E=new I({...this,headers:{...this.headers}});return E.query&&(E.query=M(E.query)),E}constructor(E){this.method=E.method||"GET",this.hostname=E.hostname||"localhost",this.port=E.port,this.query=E.query||{},this.headers=E.headers||{},this.body=E.body,this.protocol=E.protocol?E.protocol.slice(-1)!==":"?`${E.protocol}:`:E.protocol:"https:",this.path=E.path?E.path.charAt(0)!=="/"?`/${E.path}`:E.path:"/"}}n(I,"httpRequest_HttpRequest");function M(A){return Object.keys(A).reduce((E,T)=>{const P=A[T];return{...E,[T]:Array.isArray(P)?[...P]:P}},{})}n(M,"cloneQuery");class k{static isInstance(E){if(!E)return!1;const T=E;return typeof T.statusCode=="number"&&typeof T.headers=="object"}constructor(E){this.statusCode=E.statusCode,this.headers=E.headers||{},this.body=E.body}}n(k,"HttpResponse");const N="content-length";function j(A){return E=>function(){var T=(0,h.coroutine)(function*(P){const z=P.request;if(I.isInstance(z)){const{body:G,headers:ee}=z;if(G&&Object.keys(ee).map(Be=>Be.toLowerCase()).indexOf(N)===-1)try{const Be=A(G);z.headers={...z.headers,[N]:String(Be)}}catch{}}return E({...P,request:z})});return function(P){return T.apply(this,arguments)}}()}n(j,"contentLengthMiddleware");const B={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},J=n(A=>({applyToStack:E=>{E.add(j(A.bodyLengthChecker),B)}}),"getContentLengthPlugin"),Q=function(){var A=(0,h.coroutine)(function*(E){const T=(E==null?void 0:E.Bucket)||"";if(typeof E.Bucket=="string"&&(E.Bucket=T.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),be(T)){if(E.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Oe(T)||T.indexOf(".")!==-1&&!String(E.Endpoint).startsWith("http:")||T.toLowerCase()!==T||T.length<3)&&(E.ForcePathStyle=!0);return E.DisableMultiRegionAccessPoints&&(E.disableMultiRegionAccessPoints=!0,E.DisableMRAP=!0),E});return n(function(T){return A.apply(this,arguments)},"resolveParamsForS3")}(),oe=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,$=/(\d+\.){3}\d+/,he=/\.\./,Ae=/\./,Ee=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./,Oe=n(A=>oe.test(A)&&!$.test(A)&&!he.test(A),"isDnsCompatibleBucketName"),be=n(A=>{const[E,T,P,z,G,ee]=A.split(":"),Be=E==="arn"&&A.split(":").length>=6,Te=[E,T,P,G,ee].filter(Boolean).length===5;if(Be&&!Te)throw new Error(`Invalid ARN: ${A} was an invalid ARN.`);return E==="arn"&&!!T&&!!P&&!!G&&!!ee},"isArnBucketName"),De=n((A,E,T)=>{const P=function(){var z=(0,h.coroutine)(function*(){var G;const ee=(G=T[A])!==null&&G!==void 0?G:T[E];return typeof ee=="function"?ee():ee});return n(function(){return z.apply(this,arguments)},"configProvider")}();return A==="endpoint"||E==="endpoint"?(0,h.coroutine)(function*(){const z=yield P();if(z&&typeof z=="object"){if("url"in z)return z.url.href;if("hostname"in z){const{protocol:G,hostname:ee,port:Be,path:Te}=z;return`${G}//${ee}${Be?":"+Be:""}${Te}`}}return z}):P},"createConfigValueProvider"),ut=function(){var A=(0,h.coroutine)(function*(E,T,P,z){const G=yield St(E,T,P);if(typeof P.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return P.endpointProvider(G,z)});return n(function(T,P,z,G){return A.apply(this,arguments)},"getEndpointFromInstructions")}(),St=function(){var A=(0,h.coroutine)(function*(E,T,P){var z;const G={},ee=(T==null||(z=T.getEndpointParameterInstructions)===null||z===void 0?void 0:z.call(T))||{};for(const[Be,Te]of Object.entries(ee))switch(Te.type){case"staticContextParams":G[Be]=Te.value;break;case"contextParams":G[Be]=E[Te.name];break;case"clientContextParams":case"builtInParams":G[Be]=yield De(Te.name,Be,P)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(Te))}return Object.keys(ee).length===0&&Object.assign(G,P),String(P.serviceId).toLowerCase()==="s3"&&(yield Q(G)),G});return n(function(T,P,z){return A.apply(this,arguments)},"resolveParams")}(),Rt=n(A=>{let{config:E,instructions:T}=A;return(P,z)=>function(){var G=(0,h.coroutine)(function*(ee){var Be,Te;const qe=yield ut(ee.input,{getEndpointParameterInstructions(){return T}},{...E},z);z.endpointV2=qe,z.authSchemes=(Be=qe.properties)===null||Be===void 0?void 0:Be.authSchemes;const Le=(Te=z.authSchemes)===null||Te===void 0?void 0:Te[0];return Le&&(z.signing_region=Le.signingRegion,z.signing_service=Le.signingName),P({...ee})});return function(ee){return G.apply(this,arguments)}}()},"endpointMiddleware"),Ze=n((A,E)=>(T,P)=>function(){var z=(0,h.coroutine)(function*(G){const{response:ee}=yield T(G);try{const Be=yield E(ee,A);return{response:ee,output:Be}}catch(Be){if(Object.defineProperty(Be,"$response",{value:ee}),!("$metadata"in Be)){const Te="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";Be.message+=`
  `+Te}throw Be}});return function(G){return z.apply(this,arguments)}}(),"deserializerMiddleware"),mt=n((A,E)=>(T,P)=>function(){var z=(0,h.coroutine)(function*(G){var ee;const Be=!((ee=P.endpointV2)===null||ee===void 0)&&ee.url&&A.urlParser?(0,h.coroutine)(function*(){return A.urlParser(P.endpointV2.url)}):A.endpoint;if(!Be)throw new Error("No valid endpoint provider available.");const Te=yield E(G.input,{...A,endpoint:Be});return T({...G,request:Te})});return function(G){return z.apply(this,arguments)}}(),"serializerMiddleware"),At={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Vt={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function dt(A,E,T){return{applyToStack:P=>{P.add(Ze(A,T),At),P.add(mt(A,E),Vt)}}}n(dt,"getSerdePlugin");const Cn={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Vt.name},gt=n((A,E)=>({applyToStack:T=>{T.addRelativeTo(Rt({config:A,instructions:E}),Cn)}}),"getEndpointPlugin"),Ut=n(A=>{if(typeof A=="function")return A;const E=Promise.resolve(A);return()=>E},"normalizeProvider_normalizeProvider");function en(A){const E={};if(A=A.replace(/^\?/,""),A)for(const T of A.split("&")){let[P,z=null]=T.split("=");P=decodeURIComponent(P),z&&(z=decodeURIComponent(z)),P in E?Array.isArray(E[P])?E[P].push(z):E[P]=[E[P],z]:E[P]=z}return E}n(en,"parseQueryString");const sn=n(A=>{if(typeof A=="string")return sn(new URL(A));const{hostname:E,pathname:T,port:P,protocol:z,search:G}=A;let ee;return G&&(ee=en(G)),{hostname:E,port:P?parseInt(P):void 0,protocol:z,path:T,query:ee}},"parseUrl"),$t=n(A=>typeof A=="object"?"url"in A?sn(A.url):A:sn(A),"toEndpointV1"),Rn=n(A=>{var E;const T=(E=A.tls)!==null&&E!==void 0?E:!0,{endpoint:P}=A,z=P!=null?(0,h.coroutine)(function*(){return $t(yield Ut(P)())}):void 0,G=!!P;var ee,Be;return{...A,endpoint:z,tls:T,isCustomEndpoint:G,useDualstackEndpoint:Ut((ee=A.useDualstackEndpoint)!==null&&ee!==void 0?ee:!1),useFipsEndpoint:Ut((Be=A.useFipsEndpoint)!==null&&Be!==void 0?Be:!1)}},"resolveEndpointConfig");function di(A){return A}n(di,"resolveHostHeaderConfig");const ii=n(A=>E=>function(){var T=(0,h.coroutine)(function*(P){if(!I.isInstance(P.request))return E(P);const{request:z}=P,{handlerProtocol:G=""}=A.requestHandler.metadata||{};if(G.indexOf("h2")>=0&&!z.headers[":authority"])delete z.headers.host,z.headers[":authority"]="";else if(!z.headers.host){let ee=z.hostname;z.port!=null&&(ee+=`:${z.port}`),z.headers.host=ee}return E(P)});return function(P){return T.apply(this,arguments)}}(),"hostHeaderMiddleware"),Kn={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},hi=n(A=>({applyToStack:E=>{E.add(ii(A),Kn)}}),"getHostHeaderPlugin"),Ln=n(()=>(A,E)=>function(){var T=(0,h.coroutine)(function*(P){try{var z;const ee=yield A(P),{clientName:Be,commandName:Te,logger:qe,dynamoDbDocumentClientOptions:Le={}}=E,{overrideInputFilterSensitiveLog:Fn,overrideOutputFilterSensitiveLog:Ei}=Le,Ki=Fn??E.inputFilterSensitiveLog,Ji=Ei??E.outputFilterSensitiveLog,{$metadata:Ci,...nr}=ee.output;return qe==null||(z=qe.info)===null||z===void 0||z.call(qe,{clientName:Be,commandName:Te,input:Ki(P.input),output:Ji(nr),metadata:Ci}),ee}catch(ee){var G;const{clientName:Be,commandName:Te,logger:qe,dynamoDbDocumentClientOptions:Le={}}=E,{overrideInputFilterSensitiveLog:Fn}=Le,Ei=Fn??E.inputFilterSensitiveLog;throw qe==null||(G=qe.error)===null||G===void 0||G.call(qe,{clientName:Be,commandName:Te,input:Ei(P.input),error:ee,metadata:ee.$metadata}),ee}});return function(P){return T.apply(this,arguments)}}(),"loggerMiddleware"),Hn={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},ui=n(A=>({applyToStack:E=>{E.add(Ln(),Hn)}}),"getLoggerPlugin"),jn="X-Amzn-Trace-Id",ri="AWS_LAMBDA_FUNCTION_NAME",ie="_X_AMZN_TRACE_ID",Mt=n(A=>E=>function(){var T=(0,h.coroutine)(function*(P){const{request:z}=P;if(!I.isInstance(z)||A.runtime!=="node"||z.headers.hasOwnProperty(jn))return E(P);const G={NODE_ENV:"production"}[ri],ee={NODE_ENV:"production"}[ie],Be=n(Te=>typeof Te=="string"&&Te.length>0,"nonEmptyString");return Be(G)&&Be(ee)&&(z.headers[jn]=ee),E({...P,request:z})});return function(P){return T.apply(this,arguments)}}(),"recursionDetectionMiddleware"),Ot={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Ht=n(A=>({applyToStack:E=>{E.add(Mt(A),Ot)}}),"getRecursionDetectionPlugin");var hn;(function(A){A.STANDARD="standard",A.ADAPTIVE="adaptive"})(hn||(hn={}));const tn=3,xe=hn.STANDARD,Dt=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],Y=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],fe=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],et=[500,502,503,504],nt=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],nn=n(A=>A.$retryable!==void 0,"isRetryableByTrait"),kt=n(A=>Dt.includes(A.name),"isClockSkewError"),Jt=n(A=>{var E,T;return((E=A.$metadata)===null||E===void 0?void 0:E.httpStatusCode)===429||Y.includes(A.name)||((T=A.$retryable)===null||T===void 0?void 0:T.throttling)==!0},"isThrottlingError"),Ke=n(A=>{var E;return fe.includes(A.name)||nt.includes((A==null?void 0:A.code)||"")||et.includes(((E=A.$metadata)===null||E===void 0?void 0:E.httpStatusCode)||0)},"isTransientError"),vt=n(A=>{var E;if(((E=A.$metadata)===null||E===void 0?void 0:E.httpStatusCode)!==void 0){const T=A.$metadata.httpStatusCode;return 500<=T&&T<=599&&!Ke(A)}return!1},"isServerError");class x{getCurrentTimeInSeconds(){return Date.now()/1e3}getSendToken(){var E=this;return(0,h.coroutine)(function*(){return E.acquireTokenBucket(1)})()}acquireTokenBucket(E){var T=this;return(0,h.coroutine)(function*(){if(T.enabled){if(T.refillTokenBucket(),E>T.currentCapacity){const P=(E-T.currentCapacity)/T.fillRate*1e3;yield new Promise(z=>setTimeout(z,P))}T.currentCapacity=T.currentCapacity-E}})()}refillTokenBucket(){const E=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=E;return}const T=(E-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+T),this.lastTimestamp=E}updateClientSendingRate(E){let T;if(this.updateMeasuredRate(),Jt(E)){const z=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=z,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),T=this.cubicThrottle(z),this.enableTokenBucket()}else this.calculateTimeWindow(),T=this.cubicSuccess(this.getCurrentTimeInSeconds());const P=Math.min(T,2*this.measuredTxRate);this.updateTokenBucketRate(P)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(E){return this.getPrecise(E*this.beta)}cubicSuccess(E){return this.getPrecise(this.scaleConstant*Math.pow(E-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(E){this.refillTokenBucket(),this.fillRate=Math.max(E,this.minFillRate),this.maxCapacity=Math.max(E,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const E=this.getCurrentTimeInSeconds(),T=Math.floor(E*2)/2;if(this.requestCount++,T>this.lastTxRateBucket){const P=this.requestCount/(T-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(P*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=T}}getPrecise(E){return parseFloat(E.toFixed(8))}constructor(E){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0;var T;this.beta=(T=E==null?void 0:E.beta)!==null&&T!==void 0?T:.7;var P;this.minCapacity=(P=E==null?void 0:E.minCapacity)!==null&&P!==void 0?P:1;var z;this.minFillRate=(z=E==null?void 0:E.minFillRate)!==null&&z!==void 0?z:.5;var G;this.scaleConstant=(G=E==null?void 0:E.scaleConstant)!==null&&G!==void 0?G:.4;var ee;this.smooth=(ee=E==null?void 0:E.smooth)!==null&&ee!==void 0?ee:.8;const Be=this.getCurrentTimeInSeconds();this.lastThrottleTime=Be,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}}n(x,"DefaultRateLimiter");const Ye=100,it=20*1e3,ft=500,ge=500,Zn=5,Xt=10,pn=1,Bi="amz-sdk-invocation-id",Gn="amz-sdk-request",yo=n(()=>{let A=Ye;return{computeNextBackoffDelay:n(P=>Math.floor(Math.min(it,Math.random()*2**P*A)),"computeNextBackoffDelay"),setDelayBase:n(P=>{A=P},"setDelayBase")}},"getDefaultRetryBackoffStrategy"),no=n(A=>{let{retryDelay:E,retryCount:T,retryCost:P}=A;return{getRetryCount:n(()=>T,"getRetryCount"),getRetryDelay:n(()=>Math.min(it,E),"getRetryDelay"),getRetryCost:n(()=>P,"getRetryCost")}},"createDefaultRetryToken");class Vi{acquireInitialRetryToken(E){return(0,h.coroutine)(function*(){return no({retryDelay:Ye,retryCount:0})})()}refreshRetryTokenForRetry(E,T){var P=this;return(0,h.coroutine)(function*(){const z=yield P.getMaxAttempts();if(P.shouldRetry(E,T,z)){const G=T.errorType;P.retryBackoffStrategy.setDelayBase(G==="THROTTLING"?ft:Ye);const ee=P.retryBackoffStrategy.computeNextBackoffDelay(E.getRetryCount()),Be=T.retryAfterHint?Math.max(T.retryAfterHint.getTime()-Date.now()||0,ee):ee,Te=P.getCapacityCost(G);return P.capacity-=Te,no({retryDelay:Be,retryCount:E.getRetryCount()+1,retryCost:Te})}throw new Error("No retry token available")})()}recordSuccess(E){var T;this.capacity=Math.max(ge,this.capacity+((T=E.getRetryCost())!==null&&T!==void 0?T:pn))}getCapacity(){return this.capacity}getMaxAttempts(){var E=this;return(0,h.coroutine)(function*(){try{return yield E.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${tn}`),tn}})()}shouldRetry(E,T,P){return E.getRetryCount()<P&&this.capacity>=this.getCapacityCost(T.errorType)&&this.isRetryableError(T.errorType)}getCapacityCost(E){return E==="TRANSIENT"?Xt:Zn}isRetryableError(E){return E==="THROTTLING"||E==="TRANSIENT"}constructor(E){this.maxAttempts=E,this.mode=hn.STANDARD,this.capacity=ge,this.retryBackoffStrategy=yo(),this.maxAttemptsProvider=typeof E=="function"?E:(0,h.coroutine)(function*(){return E})}}n(Vi,"StandardRetryStrategy");class or{acquireInitialRetryToken(E){var T=this;return(0,h.coroutine)(function*(){return yield T.rateLimiter.getSendToken(),T.standardRetryStrategy.acquireInitialRetryToken(E)})()}refreshRetryTokenForRetry(E,T){var P=this;return(0,h.coroutine)(function*(){return P.rateLimiter.updateClientSendingRate(T),P.standardRetryStrategy.refreshRetryTokenForRetry(E,T)})()}recordSuccess(E){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(E)}constructor(E,T){this.maxAttemptsProvider=E,this.mode=hn.ADAPTIVE;const{rateLimiter:P}=T??{};this.rateLimiter=P??new x,this.standardRetryStrategy=new Vi(E)}}n(or,"AdaptiveRetryStrategy");class ki extends Vi{refreshRetryTokenForRetry(E,T){var P=this,z=n(()=>super.refreshRetryTokenForRetry,"_superprop_get_refreshRetryTokenForRetry");return(0,h.coroutine)(function*(){const G=yield z().call(P,E,T);return G.getRetryDelay=()=>P.computeNextBackoffDelay(G.getRetryCount()),G})()}constructor(E,T=Ye){super(typeof E=="function"?E:(0,h.coroutine)(function*(){return E})),typeof T=="number"?this.computeNextBackoffDelay=()=>T:this.computeNextBackoffDelay=T}}n(ki,"ConfiguredRetryStrategy");var qi,Or=new Uint8Array(16);function Zo(){if(!qi&&(qi=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!qi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return qi(Or)}n(Zo,"rng");const Xn=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Dn(A){return typeof A=="string"&&Xn.test(A)}n(Dn,"validate");const Ni=Dn;for(var pi=[],ir=0;ir<256;++ir)pi.push((ir+256).toString(16).substr(1));function br(A){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,T=(pi[A[E+0]]+pi[A[E+1]]+pi[A[E+2]]+pi[A[E+3]]+"-"+pi[A[E+4]]+pi[A[E+5]]+"-"+pi[A[E+6]]+pi[A[E+7]]+"-"+pi[A[E+8]]+pi[A[E+9]]+"-"+pi[A[E+10]]+pi[A[E+11]]+pi[A[E+12]]+pi[A[E+13]]+pi[A[E+14]]+pi[A[E+15]]).toLowerCase();if(!Ni(T))throw TypeError("Stringified UUID is invalid");return T}n(br,"stringify");const zr=br;function pr(A,E,T){A=A||{};var P=A.random||(A.rng||Zo)();if(P[6]=P[6]&15|64,P[8]=P[8]&63|128,E){T=T||0;for(var z=0;z<16;++z)E[T+z]=P[z];return E}return zr(P)}n(pr,"v4");const mr=pr,Ur=n((A,E)=>{const T=A;var P;const z=(P=E==null?void 0:E.noRetryIncrement)!==null&&P!==void 0?P:pn;var G;const ee=(G=E==null?void 0:E.retryCost)!==null&&G!==void 0?G:Zn;var Be;const Te=(Be=E==null?void 0:E.timeoutRetryCost)!==null&&Be!==void 0?Be:Xt;let qe=A;const Le=n(Ji=>Ji.name==="TimeoutError"?Te:ee,"getCapacityAmount"),Fn=n(Ji=>Le(Ji)<=qe,"hasRetryTokens");return Object.freeze({hasRetryTokens:Fn,retrieveRetryTokens:n(Ji=>{if(!Fn(Ji))throw new Error("No retry token available");const Ci=Le(Ji);return qe-=Ci,Ci},"retrieveRetryTokens"),releaseRetryTokens:n(Ji=>{qe+=Ji??z,qe=Math.min(qe,T)},"releaseRetryTokens")})},"getDefaultRetryQuota"),io=n((A,E)=>Math.floor(Math.min(it,Math.random()*2**E*A)),"defaultDelayDecider"),ur=n(A=>A?nn(A)||kt(A)||Jt(A)||Ke(A):!1,"defaultRetryDecider"),wo=n(A=>A instanceof Error?A:A instanceof Object?Object.assign(new Error,A):typeof A=="string"?new Error(A):new Error(`AWS SDK error wrapper for ${A}`),"asSdkError");class $r{shouldRetry(E,T,P){return T<P&&this.retryDecider(E)&&this.retryQuota.hasRetryTokens(E)}getMaxAttempts(){var E=this;return(0,h.coroutine)(function*(){let T;try{T=yield E.maxAttemptsProvider()}catch{T=tn}return T})()}retry(E,T,P){var z=this;return(0,h.coroutine)(function*(){let G,ee=0,Be=0;const Te=yield z.getMaxAttempts(),{request:qe}=T;for(I.isInstance(qe)&&(qe.headers[Bi]=mr());;)try{I.isInstance(qe)&&(qe.headers[Gn]=`attempt=${ee+1}; max=${Te}`),P!=null&&P.beforeRequest&&(yield P.beforeRequest());const{response:Le,output:Fn}=yield E(T);return P!=null&&P.afterRequest&&P.afterRequest(Le),z.retryQuota.releaseRetryTokens(G),Fn.$metadata.attempts=ee+1,Fn.$metadata.totalRetryDelay=Be,{response:Le,output:Fn}}catch(Le){const Fn=wo(Le);if(ee++,z.shouldRetry(Fn,ee,Te)){G=z.retryQuota.retrieveRetryTokens(Fn);const Ei=z.delayDecider(Jt(Fn)?ft:Ye,ee),Ki=Vo(Fn.$response),Ji=Math.max(Ki||0,Ei);Be+=Ji,yield new Promise(Ci=>setTimeout(Ci,Ji));continue}throw Fn.$metadata||(Fn.$metadata={}),Fn.$metadata.attempts=ee,Fn.$metadata.totalRetryDelay=Be,Fn}})()}constructor(E,T){this.maxAttemptsProvider=E,this.mode=hn.STANDARD;var P;this.retryDecider=(P=T==null?void 0:T.retryDecider)!==null&&P!==void 0?P:ur;var z;this.delayDecider=(z=T==null?void 0:T.delayDecider)!==null&&z!==void 0?z:io;var G;this.retryQuota=(G=T==null?void 0:T.retryQuota)!==null&&G!==void 0?G:Ur(ge)}}n($r,"StandardRetryStrategy_StandardRetryStrategy");const Vo=n(A=>{if(!k.isInstance(A))return;const E=Object.keys(A.headers).find(G=>G.toLowerCase()==="retry-after");if(!E)return;const T=A.headers[E],P=Number(T);return Number.isNaN(P)?new Date(T).getTime()-Date.now():P*1e3},"getDelayFromRetryAfterHeader");class V extends $r{retry(E,T){var P=this,z=n(()=>super.retry,"_superprop_get_retry");return(0,h.coroutine)(function*(){return z().call(P,E,T,{beforeRequest:(0,h.coroutine)(function*(){return P.rateLimiter.getSendToken()}),afterRequest:G=>{P.rateLimiter.updateClientSendingRate(G)}})})()}constructor(E,T){const{rateLimiter:P,...z}=T??{};super(E,z),this.rateLimiter=P??new x,this.mode=hn.ADAPTIVE}}n(V,"AdaptiveRetryStrategy_AdaptiveRetryStrategy");const we="AWS_MAX_ATTEMPTS",ct="max_attempts",Wt={environmentVariableSelector:A=>{const E=A[we];if(!E)return;const T=parseInt(E);if(Number.isNaN(T))throw new Error(`Environment variable ${we} mast be a number, got "${E}"`);return T},configFileSelector:A=>{const E=A[ct];if(!E)return;const T=parseInt(E);if(Number.isNaN(T))throw new Error(`Shared config file entry ${ct} mast be a number, got "${E}"`);return T},default:tn},On=n(A=>{const{retryStrategy:E}=A;var T;const P=Ut((T=A.maxAttempts)!==null&&T!==void 0?T:tn);return{...A,maxAttempts:P,retryStrategy:(0,h.coroutine)(function*(){return E||((yield Ut(A.retryMode)())===hn.ADAPTIVE?new or(P):new Vi(P))})}},"resolveRetryConfig"),fi="AWS_RETRY_MODE",Li="retry_mode",gi={environmentVariableSelector:A=>A[fi],configFileSelector:A=>A[Li],default:xe},Mi=n(()=>A=>function(){var E=_bluebirdCoroutine(function*(T){const{request:P}=T;return HttpRequest.isInstance(P)&&(delete P.headers[INVOCATION_ID_HEADER],delete P.headers[REQUEST_HEADER]),A(T)});return function(T){return E.apply(this,arguments)}}(),"omitRetryHeadersMiddleware"),Oi={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},Yi=n(A=>({applyToStack:E=>{E.addRelativeTo(Mi(),Oi)}}),"getOmitRetryHeadersPlugin"),Cr=n(A=>(E,T)=>function(){var P=(0,h.coroutine)(function*(z){let G=yield A.retryStrategy();const ee=yield A.maxAttempts();if(wr(G)){G=G;let Be=yield G.acquireInitialRetryToken(T.partition_id),Te=new Error,qe=0,Le=0;const{request:Fn}=z;for(I.isInstance(Fn)&&(Fn.headers[Bi]=mr());;)try{I.isInstance(Fn)&&(Fn.headers[Gn]=`attempt=${qe+1}; max=${ee}`);const{response:Ei,output:Ki}=yield E(z);return G.recordSuccess(Be),Ki.$metadata.attempts=qe+1,Ki.$metadata.totalRetryDelay=Le,{response:Ei,output:Ki}}catch(Ei){const Ki=Kr(Ei);Te=wo(Ei);try{Be=yield G.refreshRetryTokenForRetry(Be,Ki)}catch{throw Te.$metadata||(Te.$metadata={}),Te.$metadata.attempts=qe+1,Te.$metadata.totalRetryDelay=Le,Te}qe=Be.getRetryCount();const Ji=Be.getRetryDelay();Le+=Ji,yield new Promise(Ci=>setTimeout(Ci,Ji))}}else return G=G,G!=null&&G.mode&&(T.userAgent=[...T.userAgent||[],["cfg/retry-mode",G.mode]]),G.retry(E,z)});return function(z){return P.apply(this,arguments)}}(),"retryMiddleware"),wr=n(A=>typeof A.acquireInitialRetryToken<"u"&&typeof A.refreshRetryTokenForRetry<"u"&&typeof A.recordSuccess<"u","isRetryStrategyV2"),Kr=n(A=>{const E={errorType:bo(A)},T=zi(A.$response);return T&&(E.retryAfterHint=T),E},"getRetryErrorInfo"),bo=n(A=>Jt(A)?"THROTTLING":Ke(A)?"TRANSIENT":vt(A)?"SERVER_ERROR":"CLIENT_ERROR","getRetryErrorType"),ia={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Fo=n(A=>({applyToStack:E=>{E.add(Cr(A),ia)}}),"getRetryPlugin"),zi=n(A=>{if(!k.isInstance(A))return;const E=Object.keys(A.headers).find(G=>G.toLowerCase()==="retry-after");if(!E)return;const T=A.headers[E],P=Number(T);return Number.isNaN(P)?new Date(T):new Date(P*1e3)},"getRetryAfterHint");class co extends Error{static from(E){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Object.assign(new this(E.message,T),E)}constructor(E,T=!0){super(E),this.tryNextLink=T,this.name="ProviderError",Object.setPrototypeOf(this,co.prototype)}}n(co,"ProviderError_ProviderError");class Zr extends co{constructor(E,T=!0){super(E,T),this.tryNextLink=T,this.name="CredentialsProviderError",Object.setPrototypeOf(this,Zr.prototype)}}n(Zr,"CredentialsProviderError");class Ao extends co{constructor(E,T=!0){super(E,T),this.tryNextLink=T,this.name="TokenProviderError",Object.setPrototypeOf(this,Ao.prototype)}}n(Ao,"TokenProviderError");function No(){for(var A=arguments.length,E=new Array(A),T=0;T<A;T++)E[T]=arguments[T];return()=>{let P=Promise.reject(new ProviderError("No providers in chain"));for(const z of E)P=P.catch(G=>{if(G!=null&&G.tryNextLink)return z();throw G});return P}}n(No,"chain");const qo=n((A,E,T)=>{let P,z,G,ee=!1;const Be=function(){var Te=(0,h.coroutine)(function*(){z||(z=A());try{P=yield z,G=!0,ee=!1}finally{z=void 0}return P});return n(function(){return Te.apply(this,arguments)},"coalesceProvider")}();return E===void 0?function(){var Te=(0,h.coroutine)(function*(qe){return(!G||qe!=null&&qe.forceRefresh)&&(P=yield Be()),P});return function(qe){return Te.apply(this,arguments)}}():function(){var Te=(0,h.coroutine)(function*(qe){return(!G||qe!=null&&qe.forceRefresh)&&(P=yield Be()),ee?P:T&&!T(P)?(ee=!0,P):(E(P)&&(yield Be()),P)});return function(qe){return Te.apply(this,arguments)}}()},"memoize"),ca={},Bo={};for(let A=0;A<256;A++){let E=A.toString(16).toLowerCase();E.length===1&&(E=`0${E}`),ca[A]=E,Bo[E]=A}function ba(A){if(A.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const E=new Uint8Array(A.length/2);for(let T=0;T<A.length;T+=2){const P=A.slice(T,T+2).toLowerCase();if(P in Bo)E[T/2]=Bo[P];else throw new Error(`Cannot decode unrecognized sequence ${P} as hexadecimal`)}return E}n(ba,"fromHex");function Ho(A){let E="";for(let T=0;T<A.byteLength;T++)E+=ca[A[T]];return E}n(Ho,"toHex");const Fe=n(A=>new TextEncoder().encode(A),"fromUtf8"),tt=n(A=>typeof A=="string"?Fe(A):ArrayBuffer.isView(A)?new Uint8Array(A.buffer,A.byteOffset,A.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(A),"toUint8Array"),It="X-Amz-Algorithm",Qt="X-Amz-Credential",cn="X-Amz-Date",fn="X-Amz-SignedHeaders",ci="X-Amz-Expires",_i="X-Amz-Signature",bi="X-Amz-Security-Token",si="X-Amz-Region-Set",Ui="authorization",Nn=cn.toLowerCase(),wi=[Ui,Nn,"date"],qr=_i.toLowerCase(),uo="x-amz-content-sha256",go=bi.toLowerCase(),ji="host",Qi={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},_r=/^proxy-/,Jr=/^sec-/,jo=null,ea="AWS4-HMAC-SHA256",gr="AWS4-ECDSA-P256-SHA256",ua="AWS4-HMAC-SHA256-PAYLOAD",so="UNSIGNED-PAYLOAD",Jo=50,$a="aws4_request",Qa=60*60*24*7,_a={},Wa=[],za=n((A,E,T)=>`${A}/${E}/${T}/${$a}`,"createScope"),Na=function(){var A=(0,h.coroutine)(function*(E,T,P,z,G){const ee=yield pa(E,T.secretAccessKey,T.accessKeyId),Be=`${P}:${z}:${G}:${Ho(ee)}:${T.sessionToken}`;if(Be in _a)return _a[Be];for(Wa.push(Be);Wa.length>Jo;)delete _a[Wa.shift()];let Te=`AWS4${T.secretAccessKey}`;for(const qe of[P,z,G,$a])Te=yield pa(E,Te,qe);return _a[Be]=Te});return n(function(T,P,z,G,ee){return A.apply(this,arguments)},"getSigningKey")}(),sa=n(()=>{Wa.length=0,Object.keys(_a).forEach(A=>{delete _a[A]})},"clearCredentialCache"),pa=n((A,E,T)=>{const P=new A(E);return P.update(tt(T)),P.digest()},"hmac"),Ka=n((A,E,T)=>{let{headers:P}=A;const z={};for(const G of Object.keys(P).sort()){if(P[G]==null)continue;const ee=G.toLowerCase();(ee in Qi||E!=null&&E.has(ee)||_r.test(ee)||Jr.test(ee))&&(!T||T&&!T.has(ee))||(z[ee]=P[G].trim().replace(/\s+/g," "))}return z},"getCanonicalHeaders"),Lo=n(A=>encodeURIComponent(A).replace(/[!'()*]/g,ma),"escapeUri"),ma=n(A=>`%${A.charCodeAt(0).toString(16).toUpperCase()}`,"hexEncode"),Ja=n(A=>{let{query:E={}}=A;const T=[],P={};for(const z of Object.keys(E).sort()){if(z.toLowerCase()===qr)continue;T.push(z);const G=E[z];typeof G=="string"?P[z]=`${Lo(z)}=${Lo(G)}`:Array.isArray(G)&&(P[z]=G.slice(0).sort().reduce((ee,Be)=>ee.concat([`${Lo(z)}=${Lo(Be)}`]),[]).join("&"))}return T.map(z=>P[z]).filter(z=>z).join("&")},"getCanonicalQuery"),Ta=n(A=>typeof ArrayBuffer=="function"&&A instanceof ArrayBuffer||Object.prototype.toString.call(A)==="[object ArrayBuffer]","isArrayBuffer"),ns=function(){var A=(0,h.coroutine)(function*(E,T){let{headers:P,body:z}=E;for(const G of Object.keys(P))if(G.toLowerCase()===uo)return P[G];if(z==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof z=="string"||ArrayBuffer.isView(z)||Ta(z)){const G=new T;return G.update(tt(z)),Ho(yield G.digest())}return so});return n(function(T,P){return A.apply(this,arguments)},"getPayloadHash")}(),bs=n((A,E)=>{A=A.toLowerCase();for(const T of Object.keys(E))if(A===T.toLowerCase())return!0;return!1},"hasHeader"),da=n((A,E)=>{A=A.toLowerCase();for(const T of Object.keys(E))if(A===T.toLowerCase())return E[T]},"getHeaderValue"),fs=n((A,E)=>{A=A.toLowerCase();for(const T of Object.keys(E))A===T.toLowerCase()&&delete E[T]},"deleteHeader"),So=n(A=>{let{headers:E,query:T,...P}=A;return{...P,headers:{...E},query:T?Wo(T):void 0}},"cloneRequest"),Wo=n(A=>Object.keys(A).reduce((E,T)=>{const P=A[T];return{...E,[T]:Array.isArray(P)?[...P]:P}},{}),"cloneRequest_cloneQuery"),Uo=n(function(A){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{headers:T,query:P={}}=typeof A.clone=="function"?A.clone():So(A);for(const G of Object.keys(T)){var z;const ee=G.toLowerCase();ee.slice(0,6)==="x-amz-"&&!(!((z=E.unhoistableHeaders)===null||z===void 0)&&z.has(ee))&&(P[G]=T[G],delete T[G])}return{...A,headers:T,query:P}},"moveHeadersToQuery"),ra=n(A=>{A=typeof A.clone=="function"?A.clone():So(A);for(const E of Object.keys(A.headers))wi.indexOf(E.toLowerCase())>-1&&delete A.headers[E];return A},"prepareRequest"),oa=n(A=>hs(A).toISOString().replace(/\.\d{3}Z$/,"Z"),"iso8601"),hs=n(A=>typeof A=="number"?new Date(A*1e3):typeof A=="string"?Number(A)?new Date(Number(A)*1e3):new Date(A):A,"toDate");class me{presign(E){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var P=this;return(0,h.coroutine)(function*(){const{signingDate:z=new Date,expiresIn:G=3600,unsignableHeaders:ee,unhoistableHeaders:Be,signableHeaders:Te,signingRegion:qe,signingService:Le}=T,Fn=yield P.credentialProvider();P.validateResolvedCredentials(Fn);const Ei=qe??(yield P.regionProvider()),{longDate:Ki,shortDate:Ji}=Ie(z);if(G>Qa)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const Ci=za(Ji,Ei,Le??P.service),nr=Uo(ra(E),{unhoistableHeaders:Be});Fn.sessionToken&&(nr.query[bi]=Fn.sessionToken),nr.query[It]=ea,nr.query[Qt]=`${Fn.accessKeyId}/${Ci}`,nr.query[cn]=Ki,nr.query[ci]=G.toString(10);const Oa=Ka(nr,ee,Te);return nr.query[fn]=$e(Oa),nr.query[_i]=yield P.getSignature(Ki,Ci,P.getSigningKey(Fn,Ei,Ji,Le),P.createCanonicalRequest(nr,Oa,yield ns(E,P.sha256))),nr})()}sign(E,T){var P=this;return(0,h.coroutine)(function*(){return typeof E=="string"?P.signString(E,T):E.headers&&E.payload?P.signEvent(E,T):P.signRequest(E,T)})()}signEvent(E,T){let{headers:P,payload:z}=E,{signingDate:G=new Date,priorSignature:ee,signingRegion:Be,signingService:Te}=T;var qe=this;return(0,h.coroutine)(function*(){const Le=Be??(yield qe.regionProvider()),{shortDate:Fn,longDate:Ei}=Ie(G),Ki=za(Fn,Le,Te??qe.service),Ji=yield ns({headers:{},body:z},qe.sha256),Ci=new qe.sha256;Ci.update(P);const nr=Ho(yield Ci.digest()),Oa=[ua,Ei,Ki,ee,nr,Ji].join(`
`);return qe.signString(Oa,{signingDate:G,signingRegion:Le,signingService:Te})})()}signString(E){let{signingDate:T=new Date,signingRegion:P,signingService:z}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var G=this;return(0,h.coroutine)(function*(){const ee=yield G.credentialProvider();G.validateResolvedCredentials(ee);const Be=P??(yield G.regionProvider()),{shortDate:Te}=Ie(T),qe=new G.sha256(yield G.getSigningKey(ee,Be,Te,z));return qe.update(tt(E)),Ho(yield qe.digest())})()}signRequest(E){let{signingDate:T=new Date,signableHeaders:P,unsignableHeaders:z,signingRegion:G,signingService:ee}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var Be=this;return(0,h.coroutine)(function*(){const Te=yield Be.credentialProvider();Be.validateResolvedCredentials(Te);const qe=G??(yield Be.regionProvider()),Le=ra(E),{longDate:Fn,shortDate:Ei}=Ie(T),Ki=za(Ei,qe,ee??Be.service);Le.headers[Nn]=Fn,Te.sessionToken&&(Le.headers[go]=Te.sessionToken);const Ji=yield ns(Le,Be.sha256);!bs(uo,Le.headers)&&Be.applyChecksum&&(Le.headers[uo]=Ji);const Ci=Ka(Le,z,P),nr=yield Be.getSignature(Fn,Ki,Be.getSigningKey(Te,qe,Ei,ee),Be.createCanonicalRequest(Le,Ci,Ji));return Le.headers[Ui]=`${ea} Credential=${Te.accessKeyId}/${Ki}, SignedHeaders=${$e(Ci)}, Signature=${nr}`,Le})()}createCanonicalRequest(E,T,P){const z=Object.keys(T).sort();return`${E.method}
${this.getCanonicalPath(E)}
${Ja(E)}
${z.map(G=>`${G}:${T[G]}`).join(`
`)}

${z.join(";")}
${P}`}createStringToSign(E,T,P){var z=this;return(0,h.coroutine)(function*(){const G=new z.sha256;G.update(tt(P));const ee=yield G.digest();return`${ea}
${E}
${T}
${Ho(ee)}`})()}getCanonicalPath(E){let{path:T}=E;if(this.uriEscapePath){const P=[];for(const ee of T.split("/"))(ee==null?void 0:ee.length)!==0&&ee!=="."&&(ee===".."?P.pop():P.push(ee));const z=`${T!=null&&T.startsWith("/")?"/":""}${P.join("/")}${P.length>0&&(T!=null&&T.endsWith("/"))?"/":""}`;return encodeURIComponent(z).replace(/%2F/g,"/")}return T}getSignature(E,T,P,z){var G=this;return(0,h.coroutine)(function*(){const ee=yield G.createStringToSign(E,T,z),Be=new G.sha256(yield P);return Be.update(tt(ee)),Ho(yield Be.digest())})()}getSigningKey(E,T,P,z){return Na(this.sha256,E,P,T,z||this.service)}validateResolvedCredentials(E){if(typeof E!="object"||typeof E.accessKeyId!="string"||typeof E.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}constructor({applyChecksum:E,credentials:T,region:P,service:z,sha256:G,uriEscapePath:ee=!0}){this.service=z,this.sha256=G,this.uriEscapePath=ee,this.applyChecksum=typeof E=="boolean"?E:!0,this.regionProvider=Ut(P),this.credentialProvider=Ut(T)}}n(me,"SignatureV4_SignatureV4");const Ie=n(A=>{const E=oa(A).replace(/[\-:]/g,"");return{longDate:E,shortDate:E.slice(0,8)}},"formatDate"),$e=n(A=>Object.keys(A).sort().join(";"),"getCanonicalHeaderList"),ot=3e5,Et=n(A=>{const E=A.credentials?jt(A.credentials):A.credentialDefaultProvider(A),{signingEscapePath:T=!0,systemClockOffset:P=A.systemClockOffset||0,sha256:z}=A;let G;return A.signer?G=Ut(A.signer):A.regionInfoProvider?G=n(()=>Ut(A.region)().then(function(){var ee=(0,h.coroutine)(function*(Be){return[(yield A.regionInfoProvider(Be,{useFipsEndpoint:yield A.useFipsEndpoint(),useDualstackEndpoint:yield A.useDualstackEndpoint()}))||{},Be]});return function(Be){return ee.apply(this,arguments)}}()).then(ee=>{let[Be,Te]=ee;const{signingRegion:qe,signingService:Le}=Be;A.signingRegion=A.signingRegion||qe||Te,A.signingName=A.signingName||Le||A.serviceId;const Fn={...A,credentials:E,region:A.signingRegion,service:A.signingName,sha256:z,uriEscapePath:T},Ei=A.signerConstructor||me;return new Ei(Fn)}),"signer"):G=function(){var ee=(0,h.coroutine)(function*(Be){Be=Object.assign({},{name:"sigv4",signingName:A.signingName||A.defaultSigningName,signingRegion:yield Ut(A.region)(),properties:{}},Be);const Te=Be.signingRegion,qe=Be.signingName;A.signingRegion=A.signingRegion||Te,A.signingName=A.signingName||qe||A.serviceId;const Le={...A,credentials:E,region:A.signingRegion,service:A.signingName,sha256:z,uriEscapePath:T},Fn=A.signerConstructor||me;return new Fn(Le)});return function(Be){return ee.apply(this,arguments)}}(),{...A,systemClockOffset:P,signingEscapePath:T,credentials:E,signer:G}},"resolveAwsAuthConfig"),Yt=n(A=>{const E=A.credentials?jt(A.credentials):A.credentialDefaultProvider(A),{signingEscapePath:T=!0,systemClockOffset:P=A.systemClockOffset||0,sha256:z}=A;let G;return A.signer?G=normalizeProvider(A.signer):G=normalizeProvider(new SignatureV4({credentials:E,region:A.region,service:A.signingName,sha256:z,uriEscapePath:T})),{...A,systemClockOffset:P,signingEscapePath:T,credentials:E,signer:G}},"resolveSigV4AuthConfig"),jt=n(A=>typeof A=="function"?qo(A,E=>E.expiration!==void 0&&E.expiration.getTime()-Date.now()<ot,E=>E.expiration!==void 0):Ut(A),"normalizeCredentialProvider"),yn=n(A=>new Date(Date.now()+A),"getSkewCorrectedDate"),Sn=n((A,E)=>Math.abs(yn(E).getTime()-A)>=3e5,"isClockSkewed"),Pn=n((A,E)=>{const T=Date.parse(A);return Sn(T,E)?T-Date.now():E},"getUpdatedSystemClockOffset"),In=n(A=>(E,T)=>function(){var P=(0,h.coroutine)(function*(z){var G,ee,Be,Te;if(!I.isInstance(z.request))return E(z);const qe=(G=T.endpointV2)===null||G===void 0||(ee=G.properties)===null||ee===void 0||(Be=ee.authSchemes)===null||Be===void 0?void 0:Be[0],Le=(qe==null?void 0:qe.name)==="sigv4a"?qe==null||(Te=qe.signingRegionSet)===null||Te===void 0?void 0:Te.join(","):void 0,Fn=yield A.signer(qe),Ei=yield E({...z,request:yield Fn.sign(z.request,{signingDate:yn(A.systemClockOffset),signingRegion:Le||T.signing_region,signingService:T.signing_service})}).catch(Ji=>{var Ci;const nr=(Ci=Ji.ServerTime)!==null&&Ci!==void 0?Ci:ei(Ji.$response);throw nr&&(A.systemClockOffset=Pn(nr,A.systemClockOffset)),Ji}),Ki=ei(Ei.response);return Ki&&(A.systemClockOffset=Pn(Ki,A.systemClockOffset)),Ei});return function(z){return P.apply(this,arguments)}}(),"awsAuthMiddleware");var Jn;const ei=n(A=>{var E,T;return k.isInstance(A)?(Jn=(E=A.headers)===null||E===void 0?void 0:E.date)!==null&&Jn!==void 0?Jn:(T=A.headers)===null||T===void 0?void 0:T.Date:void 0},"getDateHeader"),oi={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},Si=n(A=>({applyToStack:E=>{E.addRelativeTo(In(A),oi)}}),"getAwsAuthPlugin"),yi=null;function li(A){return{...A,customUserAgent:typeof A.customUserAgent=="string"?[[A.customUserAgent]]:A.customUserAgent}}n(li,"resolveUserAgentConfig");var Yn=c(1209174152),Gi=c.n(Yn);let Wr=Gi(),oo="";const lo=n(A=>{const{partitions:E}=Wr;for(const P of E){const{regions:z,outputs:G}=P;for(const[ee,Be]of Object.entries(z))if(ee===A)return{...G,...Be}}for(const P of E){const{regionRegex:z,outputs:G}=P;if(new RegExp(z).test(A))return{...G}}const T=E.find(P=>P.id==="aws");if(!T)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...T.outputs}},"partition"),dn=n(function(A){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";Wr=A,oo=E},"setPartitionInfo"),fo=n(()=>{dn(Gi(),"")},"useDefaultPartitionInfo"),to=n(()=>oo,"getUserAgentPrefix"),fr="endpoints";function xo(A){return typeof A!="object"||A==null?A:"ref"in A?`$${xo(A.ref)}`:"fn"in A?`${A.fn}(${(A.argv||[]).map(xo).join(", ")})`:JSON.stringify(A,null,2)}n(xo,"toDebugString");class _o extends Error{constructor(E){super(E),this.name="EndpointError"}}n(_o,"EndpointError");const fa=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),la=n(A=>fa.test(A)||A.startsWith("[")&&A.endsWith("]"),"isIpAddress"),ps=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),_s=n(function(A){if(!(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1))return ps.test(A);const T=A.split(".");for(const P of T)if(!_s(P))return!1;return!0},"isValidHostLabel"),As=n(function(A){if(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1){for(const T of A.split("."))if(!As(T))return!1;return!0}return!(!_s(A)||A.length<3||A.length>63||A!==A.toLowerCase()||la(A))},"isVirtualHostableS3Bucket"),aa=n(A=>{const E=A.split(":");if(E.length<6)return null;const[T,P,z,G,ee,...Be]=E;return T!=="arn"||P===""||z===""||Be[0]===""?null:{partition:P,service:z,region:G,accountId:ee,resourceId:Be[0].includes("/")?Be[0].split("/"):Be}},"parseArn"),il=n((A,E)=>A===E,"booleanEquals"),Ws=n(A=>{const E=A.split("."),T=[];for(const P of E){const z=P.indexOf("[");if(z!==-1){if(P.indexOf("]")!==P.length-1)throw new _o(`Path: '${A}' does not end with ']'`);const G=P.slice(z+1,-1);if(Number.isNaN(parseInt(G)))throw new _o(`Invalid array index: '${G}' in path: '${A}'`);z!==0&&T.push(P.slice(0,z)),T.push(G)}else T.push(P)}return T},"getAttrPathList"),is=n((A,E)=>Ws(E).reduce((T,P)=>{if(typeof T!="object")throw new _o(`Index '${P}' in '${E}' not found in '${JSON.stringify(A)}'`);return Array.isArray(T)?T[parseInt(P)]:T[P]},A),"getAttr"),rs=n(A=>A!=null,"isSet"),Ds=n(A=>!A,"not");var Ts;(function(A){A.HEADER="header",A.QUERY="query"})(Ts||(Ts={}));var Ya;(function(A){A.AAAA="AAAA",A.A="A"})(Ya||(Ya={}));var Ua;(function(A){A.HTTP="http",A.HTTPS="https"})(Ua||(Ua={}));var ms;(function(A){A.HTTP_0_9="http/0.9",A.HTTP_1_0="http/1.0",A.TDS_8_0="tds/8.0"})(ms||(ms={}));const Rs={[Ua.HTTP]:80,[Ua.HTTPS]:443},ql=n(A=>{const E=(()=>{try{if(A instanceof URL)return A;if(typeof A=="object"&&"hostname"in A){const{hostname:Ei,port:Ki,protocol:Ji="",path:Ci="",query:nr={}}=A,Oa=new URL(`${Ji}//${Ei}${Ki?`:${Ki}`:""}${Ci}`);return Oa.search=Object.entries(nr).map(If=>{let[el,Ku]=If;return`${el}=${Ku}`}).join("&"),Oa}return new URL(A)}catch{return null}})();if(!E)return console.error(`Unable to parse ${JSON.stringify(A)} as a whatwg URL.`),null;const T=E.href,{host:P,hostname:z,pathname:G,protocol:ee,search:Be}=E;if(Be)return null;const Te=ee.slice(0,-1);if(!Object.values(Ua).includes(Te))return null;const qe=la(z),Le=T.includes(`${P}:${Rs[Te]}`)||typeof A=="string"&&A.includes(`${P}:${Rs[Te]}`),Fn=`${P}${Le?`:${Rs[Te]}`:""}`;return{scheme:Te,authority:Fn,path:G,normalizedPath:G.endsWith("/")?G:`${G}/`,isIp:qe}},"parseURL"),pl=n((A,E)=>A===E,"stringEquals"),Rl=n((A,E,T,P)=>E>=T||A.length<T?null:P?A.substring(A.length-T,A.length-E):A.substring(E,T),"substring"),La=n(A=>encodeURIComponent(A).replace(/[!*'()]/g,E=>`%${E.charCodeAt(0).toString(16).toUpperCase()}`),"uriEncode"),gs=n((A,E)=>{const T=[],P={...E.endpointParams,...E.referenceRecord};let z=0;for(;z<A.length;){const G=A.indexOf("{",z);if(G===-1){T.push(A.slice(z));break}T.push(A.slice(z,G));const ee=A.indexOf("}",G);if(ee===-1){T.push(A.slice(G));break}A[G+1]==="{"&&A[ee+1]==="}"&&(T.push(A.slice(G+1,ee)),z=ee+2);const Be=A.substring(G+1,ee);if(Be.includes("#")){const[Te,qe]=Be.split("#");T.push(is(P[Te],qe))}else T.push(P[Be]);z=ee+1}return T.join("")},"evaluateTemplate"),Ml=n((A,E)=>{let{ref:T}=A;return{...E.endpointParams,...E.referenceRecord}[T]},"getReferenceValue"),Ms=n((A,E,T)=>{if(typeof A=="string")return gs(A,T);if(A.fn)return vs(A,T);if(A.ref)return Ml(A,T);throw new _o(`'${E}': ${String(A)} is not a string, function or reference.`)},"evaluateExpression"),vs=n((A,E)=>{let{fn:T,argv:P}=A;const z=P.map(G=>["boolean","number"].includes(typeof G)?G:Ms(G,"arg",E));return T.split(".").reduce((G,ee)=>G[ee],m)(...z)},"callFunction"),Pl=n((A,E)=>{let{assign:T,...P}=A;var z,G;if(T&&T in E.referenceRecord)throw new _o(`'${T}' is already defined in Reference Record.`);const ee=vs(P,E);return(z=E.logger)===null||z===void 0||(G=z.debug)===null||G===void 0||G.call(z,fr,`evaluateCondition: ${xo(P)} = ${xo(ee)}`),{result:ee===""?!0:!!ee,...T!=null&&{toAssign:{name:T,value:ee}}}},"evaluateCondition"),rl=n(function(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],E=arguments.length>1?arguments[1]:void 0;const T={};for(const G of A){const{result:ee,toAssign:Be}=Pl(G,{...E,referenceRecord:{...E.referenceRecord,...T}});if(!ee)return{result:ee};if(Be){var P,z;T[Be.name]=Be.value,(P=E.logger)===null||P===void 0||(z=P.debug)===null||z===void 0||z.call(P,fr,`assign: ${Be.name} := ${xo(Be.value)}`)}}return{result:!0,referenceRecord:T}},"evaluateConditions"),ec=n((A,E)=>Object.entries(A).reduce((T,P)=>{let[z,G]=P;return{...T,[z]:G.map(ee=>{const Be=Ms(ee,"Header value entry",E);if(typeof Be!="string")throw new _o(`Header '${z}' value '${Be}' is not a string`);return Be})}},{}),"getEndpointHeaders"),ol=n((A,E)=>{if(Array.isArray(A))return A.map(T=>ol(T,E));switch(typeof A){case"string":return gs(A,E);case"object":if(A===null)throw new _o(`Unexpected endpoint property: ${A}`);return al(A,E);case"boolean":return A;default:throw new _o(`Unexpected endpoint property type: ${typeof A}`)}},"getEndpointProperty"),al=n((A,E)=>Object.entries(A).reduce((T,P)=>{let[z,G]=P;return{...T,[z]:ol(G,E)}},{}),"getEndpointProperties"),zs=n((A,E)=>{const T=Ms(A,"Endpoint URL",E);if(typeof T=="string")try{return new URL(T)}catch(P){throw console.error(`Failed to construct URL with ${T}`,P),P}throw new _o(`Endpoint URL must be a string, got ${typeof T}`)},"getEndpointUrl"),ml=n((A,E)=>{var T,P;const{conditions:z,endpoint:G}=A,{result:ee,referenceRecord:Be}=rl(z,E);if(!ee)return;const Te={...E,referenceRecord:{...E.referenceRecord,...Be}},{url:qe,properties:Le,headers:Fn}=G;return(T=E.logger)===null||T===void 0||(P=T.debug)===null||P===void 0||P.call(T,fr,`Resolving endpoint from template: ${xo(G)}`),{...Fn!=null&&{headers:ec(Fn,Te)},...Le!=null&&{properties:al(Le,Te)},url:zs(qe,Te)}},"evaluateEndpointRule"),gl=n((A,E)=>{const{conditions:T,error:P}=A,{result:z,referenceRecord:G}=rl(T,E);if(z)throw new _o(Ms(P,"Error",{...E,referenceRecord:{...E.referenceRecord,...G}}))},"evaluateErrorRule"),ys=n((A,E)=>{const{conditions:T,rules:P}=A,{result:z,referenceRecord:G}=rl(T,E);if(z)return Ps(P,{...E,referenceRecord:{...E.referenceRecord,...G}})},"evaluateTreeRule"),Ps=n((A,E)=>{for(const T of A)if(T.type==="endpoint"){const P=ml(T,E);if(P)return P}else if(T.type==="error")gl(T,E);else if(T.type==="tree"){const P=ys(T,E);if(P)return P}else throw new _o(`Unknown endpoint rule: ${T}`);throw new _o("Rules evaluation failed")},"evaluateRules"),kl=n((A,E)=>{var T,P,z,G,ee;const{endpointParams:Be,logger:Te}=E,{parameters:qe,rules:Le}=A;(T=E.logger)===null||T===void 0||(P=T.debug)===null||P===void 0||P.call(T,`${fr} Initial EndpointParams: ${xo(Be)}`);const Fn=Object.entries(qe).filter(Ci=>{let[,nr]=Ci;return nr.default!=null}).map(Ci=>{let[nr,Oa]=Ci;return[nr,Oa.default]});if(Fn.length>0)for(const[Ci,nr]of Fn){var Ei;Be[Ci]=(Ei=Be[Ci])!==null&&Ei!==void 0?Ei:nr}const Ki=Object.entries(qe).filter(Ci=>{let[,nr]=Ci;return nr.required}).map(Ci=>{let[nr]=Ci;return nr});for(const Ci of Ki)if(Be[Ci]==null)throw new _o(`Missing required parameter: '${Ci}'`);const Ji=Ps(Le,{endpointParams:Be,logger:Te,referenceRecord:{}});if(!((z=E.endpointParams)===null||z===void 0)&&z.Endpoint)try{const Ci=new URL(E.endpointParams.Endpoint),{protocol:nr,port:Oa}=Ci;Ji.url.protocol=nr,Ji.url.port=Oa}catch{}return(G=E.logger)===null||G===void 0||(ee=G.debug)===null||ee===void 0||ee.call(G,`${fr} Resolved endpoint: ${xo(Ji)}`),Ji},"resolveEndpoint"),Gs="user-agent",vl="x-amz-user-agent",os=" ",Nl=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Ll=n(A=>(E,T)=>function(){var P=(0,h.coroutine)(function*(z){var G,ee;const{request:Be}=z;if(!I.isInstance(Be))return E(z);const{headers:Te}=Be,qe=(T==null||(G=T.userAgent)===null||G===void 0?void 0:G.map($s))||[],Le=(yield A.defaultUserAgentProvider()).map($s),Fn=(A==null||(ee=A.customUserAgent)===null||ee===void 0?void 0:ee.map($s))||[],Ei=to(),Ki=(Ei?[Ei]:[]).concat([...Le,...qe,...Fn]).join(os),Ji=[...Le.filter(Ci=>Ci.startsWith("aws-sdk-")),...Fn].join(os);return A.runtime!=="browser"?(Ji&&(Te[vl]=Te[vl]?`${Te[Gs]} ${Ji}`:Ji),Te[Gs]=Ki):Te[vl]=Ki,E({...z,request:Be})});return function(z){return P.apply(this,arguments)}}(),"userAgentMiddleware"),$s=n(A=>{let[E,T]=A;const P=E.indexOf("/"),z=E.substring(0,P);let G=E.substring(P+1);return z==="api"&&(G=G.toLowerCase()),[z,G,T].filter(ee=>ee&&ee.length>0).map(ee=>ee==null?void 0:ee.replace(Nl,"_")).join("/")},"escapeUserAgent"),tc={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},xl=n(A=>({applyToStack:E=>{E.add(Ll(A),tc)}}),"getUserAgentPlugin");class Ks{trace(){}debug(){}info(){}warn(){}error(){}}n(Ks,"NoOpLogger");const Js=n(()=>{let A=[],E=[];const T=new Set,P=n(Le=>Le.sort((Fn,Ei)=>Cs[Ei.step]-Cs[Fn.step]||Fl[Ei.priority||"normal"]-Fl[Fn.priority||"normal"]),"sort"),z=n(Le=>{let Fn=!1;const Ei=n(Ki=>Ki.name&&Ki.name===Le?(Fn=!0,T.delete(Le),!1):!0,"filterCb");return A=A.filter(Ei),E=E.filter(Ei),Fn},"removeByName"),G=n(Le=>{let Fn=!1;const Ei=n(Ki=>Ki.middleware===Le?(Fn=!0,Ki.name&&T.delete(Ki.name),!1):!0,"filterCb");return A=A.filter(Ei),E=E.filter(Ei),Fn},"removeByReference"),ee=n(Le=>(A.forEach(Fn=>{Le.add(Fn.middleware,{...Fn})}),E.forEach(Fn=>{Le.addRelativeTo(Fn.middleware,{...Fn})}),Le),"cloneTo"),Be=n(Le=>{const Fn=[];return Le.before.forEach(Ei=>{Ei.before.length===0&&Ei.after.length===0?Fn.push(Ei):Fn.push(...Be(Ei))}),Fn.push(Le),Le.after.reverse().forEach(Ei=>{Ei.before.length===0&&Ei.after.length===0?Fn.push(Ei):Fn.push(...Be(Ei))}),Fn},"expandRelativeMiddlewareList"),Te=n(function(){let Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const Fn=[],Ei=[],Ki={};return A.forEach(Ci=>{const nr={...Ci,before:[],after:[]};nr.name&&(Ki[nr.name]=nr),Fn.push(nr)}),E.forEach(Ci=>{const nr={...Ci,before:[],after:[]};nr.name&&(Ki[nr.name]=nr),Ei.push(nr)}),Ei.forEach(Ci=>{if(Ci.toMiddleware){const nr=Ki[Ci.toMiddleware];if(nr===void 0){if(Le)return;throw new Error(`${Ci.toMiddleware} is not found when adding ${Ci.name||"anonymous"} middleware ${Ci.relation} ${Ci.toMiddleware}`)}Ci.relation==="after"&&nr.after.push(Ci),Ci.relation==="before"&&nr.before.push(Ci)}}),P(Fn).map(Be).reduce((Ci,nr)=>(Ci.push(...nr),Ci),[])},"getMiddlewareList"),qe={add:function(Le){let Fn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{name:Ei,override:Ki}=Fn,Ji={step:"initialize",priority:"normal",middleware:Le,...Fn};if(Ei){if(T.has(Ei)){if(!Ki)throw new Error(`Duplicate middleware name '${Ei}'`);const Ci=A.findIndex(Oa=>Oa.name===Ei),nr=A[Ci];if(nr.step!==Ji.step||nr.priority!==Ji.priority)throw new Error(`"${Ei}" middleware with ${nr.priority} priority in ${nr.step} step cannot be overridden by same-name middleware with ${Ji.priority} priority in ${Ji.step} step.`);A.splice(Ci,1)}T.add(Ei)}A.push(Ji)},addRelativeTo:(Le,Fn)=>{const{name:Ei,override:Ki}=Fn,Ji={middleware:Le,...Fn};if(Ei){if(T.has(Ei)){if(!Ki)throw new Error(`Duplicate middleware name '${Ei}'`);const Ci=E.findIndex(Oa=>Oa.name===Ei),nr=E[Ci];if(nr.toMiddleware!==Ji.toMiddleware||nr.relation!==Ji.relation)throw new Error(`"${Ei}" middleware ${nr.relation} "${nr.toMiddleware}" middleware cannot be overridden by same-name middleware ${Ji.relation} "${Ji.toMiddleware}" middleware.`);E.splice(Ci,1)}T.add(Ei)}E.push(Ji)},clone:()=>ee(Js()),use:Le=>{Le.applyToStack(qe)},remove:Le=>typeof Le=="string"?z(Le):G(Le),removeByTag:Le=>{let Fn=!1;const Ei=n(Ki=>{const{tags:Ji,name:Ci}=Ki;return Ji&&Ji.includes(Le)?(Ci&&T.delete(Ci),Fn=!0,!1):!0},"filterCb");return A=A.filter(Ei),E=E.filter(Ei),Fn},concat:Le=>{const Fn=ee(Js());return Fn.use(Le),Fn},applyToStack:ee,identify:()=>Te(!0).map(Le=>Le.name+": "+(Le.tags||[]).join(",")),resolve:(Le,Fn)=>{for(const Ei of Te().map(Ki=>Ki.middleware).reverse())Le=Ei(Le,Fn);return Le}};return qe},"constructStack"),Cs={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Fl={high:3,normal:2,low:1};class sl{send(E,T,P){const z=typeof T!="function"?T:void 0,G=typeof T=="function"?T:P,ee=E.resolveMiddleware(this.middlewareStack,this.config,z);if(G)ee(E).then(Be=>G(null,Be.output),Be=>G(Be)).catch(()=>{});else return ee(E).then(Be=>Be.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}constructor(E){this.middlewareStack=Js(),this.config=E}}n(sl,"Client");class hr{constructor(){this.middlewareStack=Js()}}n(hr,"Command");const Wi="***SensitiveInformation***",ll=n((A,E)=>{for(const T of Object.keys(A)){const P=A[T],z=function(){var ee=(0,h.coroutine)(function*(Be,Te,qe){const Le=new P(Be);if(typeof Te=="function")this.send(Le,Te);else if(typeof qe=="function"){if(typeof Te!="object")throw new Error(`Expected http options but got ${typeof Te}`);this.send(Le,Te||{},qe)}else return this.send(Le,Te)});return n(function(Te,qe,Le){return ee.apply(this,arguments)},"methodImpl")}(),G=(T[0].toLowerCase()+T.slice(1)).replace(/Command$/,"");E.prototype[G]=z}},"createAggregatedClient"),rn=n(A=>{switch(A){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${A}"`)}},"parseBoolean"),gn=n(A=>{if(A!=null){if(typeof A=="number"){if((A===0||A===1)&&jl.warn(Hl(`Expected boolean, got ${typeof A}: ${A}`)),A===0)return!1;if(A===1)return!0}if(typeof A=="string"){const E=A.toLowerCase();if((E==="false"||E==="true")&&jl.warn(Hl(`Expected boolean, got ${typeof A}: ${A}`)),E==="false")return!1;if(E==="true")return!0}if(typeof A=="boolean")return A;throw new TypeError(`Expected boolean, got ${typeof A}: ${A}`)}},"expectBoolean"),Tn=n(A=>{if(A!=null){if(typeof A=="string"){const E=parseFloat(A);if(!Number.isNaN(E))return String(E)!==String(A)&&jl.warn(Hl(`Expected number but observed string: ${A}`)),E}if(typeof A=="number")return A;throw new TypeError(`Expected number, got ${typeof A}: ${A}`)}},"expectNumber"),Ai=Math.ceil(2**127*(2-2**-23)),$i=n(A=>{const E=Tn(A);if(E!==void 0&&!Number.isNaN(E)&&E!==1/0&&E!==-1/0&&Math.abs(E)>Ai)throw new TypeError(`Expected 32-bit float, got ${A}`);return E},"expectFloat32"),Ar=n(A=>{if(A!=null){if(Number.isInteger(A)&&!Number.isNaN(A))return A;throw new TypeError(`Expected integer, got ${typeof A}: ${A}`)}},"expectLong"),Dr=null,vr=n(A=>zo(A,32),"expectInt32"),dr=n(A=>zo(A,16),"expectShort"),ao=n(A=>zo(A,8),"expectByte"),zo=n((A,E)=>{const T=Ar(A);if(T!==void 0&&Yr(T,E)!==T)throw new TypeError(`Expected ${E}-bit integer, got ${A}`);return T},"expectSizedInt"),Yr=n((A,E)=>{switch(E){case 32:return Int32Array.of(A)[0];case 16:return Int16Array.of(A)[0];case 8:return Int8Array.of(A)[0]}},"castInt"),mi=n((A,E)=>{if(A==null)throw E?new TypeError(`Expected a non-null value for ${E}`):new TypeError("Expected a non-null value");return A},"expectNonNull"),rr=n(A=>{if(A==null)return;if(typeof A=="object"&&!Array.isArray(A))return A;const E=Array.isArray(A)?"array":typeof A;throw new TypeError(`Expected object, got ${E}: ${A}`)},"expectObject"),ti=n(A=>{if(A!=null){if(typeof A=="string")return A;if(["boolean","number","bigint"].includes(typeof A))return jl.warn(Hl(`Expected string, got ${typeof A}: ${A}`)),String(A);throw new TypeError(`Expected string, got ${typeof A}: ${A}`)}},"expectString"),ga=n(A=>{if(A==null)return;const E=rr(A),T=Object.entries(E).filter(P=>{let[,z]=P;return z!=null}).map(P=>{let[z]=P;return z});if(T.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(T.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${T} were not null.`);return E},"expectUnion"),ks=n(A=>Tn(typeof A=="string"?Va(A):A),"strictParseDouble"),Bl=null,Ys=n(A=>$i(typeof A=="string"?Va(A):A),"parse_utils_strictParseFloat32"),as=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Va=n(A=>{const E=A.match(as);if(E===null||E[0].length!==A.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(A)},"parseNumber"),Ul=n(A=>typeof A=="string"?Zs(A):Tn(A),"limitedParseDouble"),Xs=null,Vl=null,Qs=n(A=>typeof A=="string"?Zs(A):$i(A),"limitedParseFloat32"),Zs=n(A=>{switch(A){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${A}`)}},"parseFloatString"),To=n(A=>Ar(typeof A=="string"?Va(A):A),"strictParseLong"),Po=null,Ha=n(A=>vr(typeof A=="string"?Va(A):A),"strictParseInt32"),yl=n(A=>dr(typeof A=="string"?Va(A):A),"parse_utils_strictParseShort"),iu=n(A=>ao(typeof A=="string"?Va(A):A),"parse_utils_strictParseByte"),Hl=n(A=>String(new TypeError(A).stack||A).split(`
`).slice(0,5).filter(E=>!E.includes("stackTraceWarning")).join(`
`),"stackTraceWarning"),jl={warn:console.warn},Tu=null,nc=null;function sd(A){const E=A.getUTCFullYear(),T=A.getUTCMonth(),P=A.getUTCDay(),z=A.getUTCDate(),G=A.getUTCHours(),ee=A.getUTCMinutes(),Be=A.getUTCSeconds(),Te=z<10?`0${z}`:`${z}`,qe=G<10?`0${G}`:`${G}`,Le=ee<10?`0${ee}`:`${ee}`,Fn=Be<10?`0${Be}`:`${Be}`;return`${Tu[P]}, ${Te} ${nc[T]} ${E} ${qe}:${Le}:${Fn} GMT`}n(sd,"dateToUtcString");const Cu=null,ld=n(A=>{if(A==null)return;if(typeof A!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const E=Cu.exec(A);if(!E)throw new TypeError("Invalid RFC-3339 date-time value");const[T,P,z,G,ee,Be,Te,qe]=E,Le=strictParseShort(Ga(P)),Fn=ss(z,"month",1,12),Ei=ss(G,"day",1,31);return Sl(Le,Fn,Ei,{hours:ee,minutes:Be,seconds:Te,fractionalMilliseconds:qe})},"parseRfc3339DateTime"),Iu=null,cd=n(A=>{if(A==null)return;if(typeof A!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const E=Iu.exec(A);if(!E)throw new TypeError("Invalid RFC-3339 date-time value");const[T,P,z,G,ee,Be,Te,qe,Le]=E,Fn=strictParseShort(Ga(P)),Ei=ss(z,"month",1,12),Ki=ss(G,"day",1,31),Ji=Sl(Fn,Ei,Ki,{hours:ee,minutes:Be,seconds:Te,fractionalMilliseconds:qe});return Le.toUpperCase()!="Z"&&Ji.setTime(Ji.getTime()-Pu(Le)),Ji},"parseRfc3339DateTimeWithOffset"),Ou=null,wu=null,Au=null,ud=n(A=>{if(A==null)return;if(typeof A!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let E=Ou.exec(A);if(E){const[T,P,z,G,ee,Be,Te,qe]=E;return Sl(strictParseShort(Ga(G)),Wl(z),ss(P,"day",1,31),{hours:ee,minutes:Be,seconds:Te,fractionalMilliseconds:qe})}if(E=wu.exec(A),E){const[T,P,z,G,ee,Be,Te,qe]=E;return Mu(Sl(Du(G),Wl(z),ss(P,"day",1,31),{hours:ee,minutes:Be,seconds:Te,fractionalMilliseconds:qe}))}if(E=Au.exec(A),E){const[T,P,z,G,ee,Be,Te,qe]=E;return Sl(strictParseShort(Ga(qe)),Wl(P),ss(z.trimLeft(),"day",1,31),{hours:G,minutes:ee,seconds:Be,fractionalMilliseconds:Te})}throw new TypeError("Invalid RFC-7231 date-time value")},"parseRfc7231DateTime"),wa=n(A=>{if(A==null)return;let E;if(typeof A=="number")E=A;else if(typeof A=="string")E=ks(A);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(E)||E===1/0||E===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(E*1e3))},"parseEpochTimestamp"),Sl=n((A,E,T,P)=>{const z=E-1;return rc(A,z,T),new Date(Date.UTC(A,z,T,ss(P.hours,"hour",0,23),ss(P.minutes,"minute",0,59),ss(P.seconds,"seconds",0,60),El(P.fractionalMilliseconds)))},"buildDate"),Du=n(A=>{const E=new Date().getUTCFullYear(),T=Math.floor(E/100)*100+strictParseShort(Ga(A));return T<E?T+100:T},"parseTwoDigitYear"),Ru=null,Mu=n(A=>A.getTime()-new Date().getTime()>Ru?new Date(Date.UTC(A.getUTCFullYear()-100,A.getUTCMonth(),A.getUTCDate(),A.getUTCHours(),A.getUTCMinutes(),A.getUTCSeconds(),A.getUTCMilliseconds())):A,"adjustRfc850Year"),Wl=n(A=>{const E=nc.indexOf(A);if(E<0)throw new TypeError(`Invalid month: ${A}`);return E+1},"parseMonthByShortName"),ic=null,rc=n((A,E,T)=>{let P=ic[E];if(E===1&&ru(A)&&(P=29),T>P)throw new TypeError(`Invalid day for ${nc[E]} in ${A}: ${T}`)},"validateDayOfMonth"),ru=n(A=>A%4===0&&(A%100!==0||A%400===0),"isLeapYear"),ss=n((A,E,T,P)=>{const z=strictParseByte(Ga(A));if(z<T||z>P)throw new TypeError(`${E} must be between ${T} and ${P}, inclusive`);return z},"parseDateValue"),El=n(A=>A==null?0:strictParseFloat32("0."+A)*1e3,"parseMilliseconds"),Pu=n(A=>{const E=A[0];let T=1;if(E=="+")T=1;else if(E=="-")T=-1;else throw new TypeError(`Offset direction, ${E}, must be "+" or "-"`);const P=Number(A.substring(1,3)),z=Number(A.substring(4,6));return T*(P*60+z)*60*1e3},"parseOffsetToMilliseconds"),Ga=n(A=>{let E=0;for(;E<A.length-1&&A.charAt(E)==="0";)E++;return E===0?A:A.slice(E)},"stripLeadingZeroes");class Yo extends Error{constructor(E){super(E.message),Object.setPrototypeOf(this,Yo.prototype),this.name=E.name,this.$fault=E.$fault,this.$metadata=E.$metadata}}n(Yo,"ServiceException");const Ss=n(function(A){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Object.entries(E).filter(P=>{let[,z]=P;return z!==void 0}).forEach(P=>{let[z,G]=P;(A[z]==null||A[z]==="")&&(A[z]=G)});const T=A.message||A.Message||"UnknownError";return A.message=T,delete A.Message,A},"decorateServiceException"),ku=n(A=>{let{output:E,parsedBody:T,exceptionCtor:P,errorCode:z}=A;const G=Nu(E),ee=G.httpStatusCode?G.httpStatusCode+"":void 0,Be=new P({name:(T==null?void 0:T.code)||(T==null?void 0:T.Code)||z||ee||"UnknownError",$fault:"client",$metadata:G});throw Ss(Be,T)},"throwDefaultError"),ou=n(A=>E=>{let{output:T,parsedBody:P,errorCode:z}=E;ku({output:T,parsedBody:P,exceptionCtor:A,errorCode:z})},"withBaseException");var oc,zl;const Nu=n(A=>({httpStatusCode:A.statusCode,requestId:(zl=(oc=A.headers["x-amzn-requestid"])!==null&&oc!==void 0?oc:A.headers["x-amzn-request-id"])!==null&&zl!==void 0?zl:A.headers["x-amz-request-id"],extendedRequestId:A.headers["x-amz-id-2"],cfId:A.headers["x-amz-cf-id"]}),"deserializeMetadata"),bl=n(A=>{switch(A){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},"loadConfigsForDefaultMode"),ac=n(function(){const A=Object.getPrototypeOf(this).constructor,E=Function.bind.apply(String,[null,...arguments]),T=new E;return Object.setPrototypeOf(T,A.prototype),T},"StringWrapper");ac.prototype=Object.create(String.prototype,{constructor:{value:ac,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(ac,String);class cl extends null{deserializeJSON(){return JSON.parse(super.toString())}toJSON(){return super.toString()}static fromObject(E){return E instanceof cl?E:E instanceof String||typeof E=="string"?new cl(E):new cl(JSON.stringify(E))}}n(cl,"LazyJsonString");function Bn(A,E,T){let P,z,G;if(typeof E>"u"&&typeof T>"u")P={},G=A;else{if(P=A,typeof E=="function")return z=E,G=T,K(P,z,G);G=E}for(const ee of Object.keys(G)){if(!Array.isArray(G[ee])){P[ee]=G[ee];continue}pe(P,null,G,ee)}return P}n(Bn,"map");const L=n(A=>{const E={};for(const[T,P]of Object.entries(A||{}))E[T]=[,P];return E},"convertMap"),F=n((A,E)=>{const T={};for(const P in E)pe(T,A,E,P);return T},"take"),K=n((A,E,T)=>Bn(A,Object.entries(T).reduce((P,z)=>{let[G,ee]=z;return Array.isArray(ee)?P[G]=ee:typeof ee=="function"?P[G]=[E,ee()]:P[G]=[E,ee],P},{})),"mapWithFilter"),pe=n((A,E,T,P)=>{if(E!==null){let ee=T[P];typeof ee=="function"&&(ee=[,ee]);const[Be=je,Te=ht,qe=P]=ee;(typeof Be=="function"&&Be(E[qe])||typeof Be!="function"&&Be)&&(A[P]=Te(E[qe]));return}let[z,G]=T[P];if(typeof G=="function"){let ee;const Be=z===void 0&&(ee=G())!=null,Te=typeof z=="function"&&!!z(void 0)||typeof z!="function"&&!!z;Be?A[P]=ee:Te&&(A[P]=G())}else{const ee=z===void 0&&G!=null,Be=typeof z=="function"&&!!z(G)||typeof z!="function"&&!!z;(ee||Be)&&(A[P]=G)}},"applyInstruction"),je=n(A=>A!=null,"nonNullish"),ht=n(A=>A,"pass");function Lt(A){return encodeURIComponent(A).replace(/[!'()*]/g,function(E){return"%"+E.charCodeAt(0).toString(16).toUpperCase()})}n(Lt,"extendedEncodeURIComponent");const Bt=n((A,E,T,P,z,G)=>{if(E!=null&&E[T]!==void 0){const ee=P();if(ee.length<=0)throw new Error("Empty value provided for input HTTP label: "+T+".");A=A.replace(z,G?ee.split("/").map(Be=>Lt(Be)).join("/"):Lt(ee))}else throw new Error("No value provided for input HTTP label: "+T+".");return A},"resolve_path_resolvedPath"),Tt=n(A=>{if(A==null)return{};if(Array.isArray(A))return A.filter(E=>E!=null);if(typeof A=="object"){const E={};for(const T of Object.keys(A))A[T]!=null&&(E[T]=Tt(A[T]));return E}return A},"_json"),bn=n(A=>{var E,T;return{...A,useDualstackEndpoint:(E=A.useDualstackEndpoint)!==null&&E!==void 0?E:!1,useFipsEndpoint:(T=A.useFipsEndpoint)!==null&&T!==void 0?T:!1,defaultSigningName:"chime"}},"resolveClientEndpointParameters");var zn=c(7229287800),Vn=c.n(zn),Qn=c(3661302631);function Ii(A){const E=[];for(let T of Object.keys(A).sort()){const P=A[T];if(T=Lo(T),Array.isArray(P))for(let z=0,G=P.length;z<G;z++)E.push(`${T}=${Lo(P[z])}`);else{let z=T;(P||typeof P=="string")&&(z+=`=${Lo(P)}`),E.push(z)}}return E.join("&")}n(Ii,"buildQueryString");function Ti(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Promise((E,T)=>{A&&setTimeout(()=>{const P=new Error(`Request did not complete within ${A} ms`);P.name="TimeoutError",T(P)},A)})}n(Ti,"requestTimeout");class Zi{destroy(){}handle(E){let{abortSignal:T}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var P=this;return(0,h.coroutine)(function*(){P.config||(P.config=yield P.configProvider);const z=P.config.requestTimeout;if(T!=null&&T.aborted){const Ki=new Error("Request aborted");return Ki.name="AbortError",Promise.reject(Ki)}let G=E.path;if(E.query){const Ki=Ii(E.query);Ki&&(G+=`?${Ki}`)}const{port:ee,method:Be}=E,Te=`${E.protocol}//${E.hostname}${ee?`:${ee}`:""}${G}`,Le={body:Be==="GET"||Be==="HEAD"?void 0:E.body,headers:new Headers(E.headers),method:Be};typeof AbortController<"u"&&(Le.signal=T);const Fn=new Request(Te,Le),Ei=[fetch(Fn).then(Ki=>{const Ji=Ki.headers,Ci={};for(const Oa of Ji.entries())Ci[Oa[0]]=Oa[1];return Ki.body!=null?{response:new k({headers:Ci,statusCode:Ki.status,body:Ki.body})}:Ki.blob().then(Oa=>({response:new k({headers:Ci,statusCode:Ki.status,body:Oa})}))}),Ti(z)];return T&&Ei.push(new Promise((Ki,Ji)=>{T.onabort=()=>{const Ci=new Error("Request aborted");Ci.name="AbortError",Ji(Ci)}})),Promise.race(Ei)})()}constructor(E){typeof E=="function"?this.configProvider=E().then(T=>T||{}):(this.config=E??{},this.configProvider=Promise.resolve(this.config))}}n(Zi,"FetchHttpHandler");const yr={},tr=new Array(64);for(let A=0,E="A".charCodeAt(0),T="Z".charCodeAt(0);A+E<=T;A++){const P=String.fromCharCode(A+E);yr[P]=A,tr[A]=P}for(let A=0,E="a".charCodeAt(0),T="z".charCodeAt(0);A+E<=T;A++){const P=String.fromCharCode(A+E),z=A+26;yr[P]=z,tr[z]=P}for(let A=0;A<10;A++){yr[A.toString(10)]=A+52;const E=A.toString(10),T=A+52;yr[E]=T,tr[T]=E}yr["+"]=62,tr[62]="+",yr["/"]=63,tr[63]="/";const Gr=6,Co=8,Io=63,Go=n(A=>{let E=A.length/4*3;A.slice(-2)==="=="?E-=2:A.slice(-1)==="="&&E--;const T=new ArrayBuffer(E),P=new DataView(T);for(let z=0;z<A.length;z+=4){let G=0,ee=0;for(let qe=z,Le=z+3;qe<=Le;qe++)if(A[qe]!=="="){if(!(A[qe]in yr))throw new TypeError(`Invalid character ${A[qe]} in base64 string.`);G|=yr[A[qe]]<<(Le-qe)*Gr,ee+=Gr}else G>>=Gr;const Be=z/4*3;G>>=ee%Co;const Te=Math.floor(ee/Co);for(let qe=0;qe<Te;qe++){const Le=(Te-qe-1)*Co;P.setUint8(Be+qe,(G&255<<Le)>>Le)}}return new Uint8Array(T)},"fromBase64");function Xr(A){let E="";for(let T=0;T<A.length;T+=3){let P=0,z=0;for(let ee=T,Be=Math.min(T+3,A.length);ee<Be;ee++)P|=A[ee]<<(Be-ee-1)*Co,z+=Co;const G=Math.ceil(z/Gr);P<<=G*Gr-z;for(let ee=1;ee<=G;ee++){const Be=(G-ee)*Gr;E+=tr[(P&Io<<Be)>>Be]}E+="==".slice(0,4-G)}return E}n(Xr,"toBase64");const ar=n(A=>typeof Blob=="function"&&A instanceof Blob?ho(A):cr(A),"streamCollector");function ho(A){return ta.apply(this,arguments)}n(ho,"collectBlob");function ta(){return ta=(0,h.coroutine)(function*(A){const E=yield $o(A),T=Go(E);return new Uint8Array(T)}),ta.apply(this,arguments)}n(ta,"_collectBlob");function cr(A){return Qr.apply(this,arguments)}n(cr,"collectStream");function Qr(){return Qr=(0,h.coroutine)(function*(A){let E=new Uint8Array(0);const T=A.getReader();let P=!1;for(;!P;){const{done:z,value:G}=yield T.read();if(G){const ee=E;E=new Uint8Array(ee.length+G.length),E.set(ee),E.set(G,ee.length)}P=z}return E}),Qr.apply(this,arguments)}n(Qr,"_collectStream");function $o(A){return new Promise((E,T)=>{const P=new FileReader;P.onloadend=()=>{if(P.readyState!==2)return T(new Error("Reader aborted too early"));var z;const G=(z=P.result)!==null&&z!==void 0?z:"",ee=G.indexOf(","),Be=ee>-1?ee+1:G.length;E(G.substring(Be))},P.onabort=()=>T(new Error("Read aborted")),P.onerror=()=>T(P.error),P.readAsDataURL(A)})}n($o,"readToBase64");const va=n(A=>()=>Promise.reject(A),"invalidProvider"),ha=n(A=>{if(typeof A=="string"){let E=A.length;for(let T=E-1;T>=0;T--){const P=A.charCodeAt(T);P>127&&P<=2047?E++:P>2047&&P<=65535&&(E+=2),P>=56320&&P<=57343&&T--}return E}else{if(typeof A.byteLength=="number")return A.byteLength;if(typeof A.size=="number")return A.size}throw new Error(`Body Length computation failed for ${A}`)},"calculateBodyLength");var ja=c(1874409785),ko=c.n(ja);const Za=n(A=>{let{serviceId:E,clientVersion:T}=A;return(0,h.coroutine)(function*(){var P,z,G,ee,Be;const Te=typeof window<"u"&&(!(window==null||(P=window.navigator)===null||P===void 0)&&P.userAgent)?ko().parse(window.navigator.userAgent):void 0;var qe,Le;const Fn=[["aws-sdk-js",T],[`os/${(Te==null||(z=Te.os)===null||z===void 0?void 0:z.name)||"other"}`,Te==null||(G=Te.os)===null||G===void 0?void 0:G.version],["lang/js"],["md/browser",`${(qe=Te==null||(ee=Te.browser)===null||ee===void 0?void 0:ee.name)!==null&&qe!==void 0?qe:"unknown"}_${(Le=Te==null||(Be=Te.browser)===null||Be===void 0?void 0:Be.version)!==null&&Le!==void 0?Le:"unknown"}`]];return E&&Fn.push([`api/${E}`,T]),Fn})},"defaultUserAgent"),ya=n(A=>new TextDecoder("utf-8").decode(A),"toUtf8"),Xa="required",Aa="fn",Is="argv",Ns="ref",_l="isSet",Da="tree",Ls="error",qs="endpoint",Tl="PartitionResult",sc={[Xa]:!1,type:"String"},Cl={[Xa]:!0,default:!1,type:"Boolean"},lc={[Ns]:"Endpoint"},au={[Aa]:"booleanEquals",[Is]:[{[Ns]:"UseFIPS"},!0]},su={[Aa]:"booleanEquals",[Is]:[{[Ns]:"UseDualStack"},!0]},xa={},xs={[Aa]:"booleanEquals",[Is]:[!0,{[Aa]:"getAttr",[Is]:[{[Ns]:Tl},"supportsFIPS"]}]},Gl={[Aa]:"booleanEquals",[Is]:[!0,{[Aa]:"getAttr",[Is]:[{[Ns]:Tl},"supportsDualStack"]}]},cc=[au],Il=[su],$l=[{[Ns]:"Region"}],ls={version:"1.0",parameters:{Region:sc,UseDualStack:Cl,UseFIPS:Cl,Endpoint:sc},rules:[{conditions:[{[Aa]:_l,[Is]:[lc]}],type:Da,rules:[{conditions:cc,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ls},{type:Da,rules:[{conditions:Il,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ls},{endpoint:{url:lc,properties:xa,headers:xa},type:qs}]}]},{type:Da,rules:[{conditions:[{[Aa]:_l,[Is]:$l}],type:Da,rules:[{conditions:[{[Aa]:"aws.partition",[Is]:$l,assign:Tl}],type:Da,rules:[{conditions:[au,su],type:Da,rules:[{conditions:[xs,Gl],type:Da,rules:[{type:Da,rules:[{endpoint:{url:"https://messaging-chime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:xa,headers:xa},type:qs}]}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ls}]},{conditions:cc,type:Da,rules:[{conditions:[xs],type:Da,rules:[{type:Da,rules:[{endpoint:{url:"https://messaging-chime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:xa,headers:xa},type:qs}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Ls}]},{conditions:Il,type:Da,rules:[{conditions:[Gl],type:Da,rules:[{type:Da,rules:[{endpoint:{url:"https://messaging-chime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:xa,headers:xa},type:qs}]}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Ls}]},{type:Da,rules:[{endpoint:{url:"https://messaging-chime.{Region}.{PartitionResult#dnsSuffix}",properties:xa,headers:xa},type:qs}]}]}]},{error:"Invalid Configuration: Missing Region",type:Ls}]}]},Oo=n(function(A){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return kl(ls,{endpointParams:A,logger:E.logger})},"defaultEndpointResolver");var Ko,Eo,Os,uc,Lu,xu,Fu,Bu,Uu;const zf=n(A=>({apiVersion:"2021-05-15",base64Decoder:(Ko=A==null?void 0:A.base64Decoder)!==null&&Ko!==void 0?Ko:Go,base64Encoder:(Eo=A==null?void 0:A.base64Encoder)!==null&&Eo!==void 0?Eo:Xr,disableHostPrefix:(Os=A==null?void 0:A.disableHostPrefix)!==null&&Os!==void 0?Os:!1,endpointProvider:(uc=A==null?void 0:A.endpointProvider)!==null&&uc!==void 0?uc:Oo,logger:(Lu=A==null?void 0:A.logger)!==null&&Lu!==void 0?Lu:new Ks,serviceId:(xu=A==null?void 0:A.serviceId)!==null&&xu!==void 0?xu:"Chime SDK Messaging",urlParser:(Fu=A==null?void 0:A.urlParser)!==null&&Fu!==void 0?Fu:sn,utf8Decoder:(Bu=A==null?void 0:A.utf8Decoder)!==null&&Bu!==void 0?Bu:Fe,utf8Encoder:(Uu=A==null?void 0:A.utf8Encoder)!==null&&Uu!==void 0?Uu:ya}),"getRuntimeConfig"),Gf=["in-region","cross-region","mobile","standard","legacy"],$f=n(function(){let{defaultsMode:A}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return qo((0,h.coroutine)(function*(){const E=typeof A=="function"?yield A():A;switch(E==null?void 0:E.toLowerCase()){case"auto":return Promise.resolve(Kf()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(E==null?void 0:E.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Gf.join(", ")}, got ${E}`)}}))},"resolveDefaultsModeConfig"),Kf=n(()=>{var A,E;const T=typeof window<"u"&&(!(window==null||(A=window.navigator)===null||A===void 0)&&A.userAgent)?ko().parse(window.navigator.userAgent):void 0,P=T==null||(E=T.platform)===null||E===void 0?void 0:E.type;return P==="tablet"||P==="mobile"},"isMobileBrowser"),Jf=n(A=>{const E=$f(A),T=n(()=>E().then(bl),"defaultConfigProvider"),P=zf(A);var z,G,ee,Be,Te,qe,Le,Fn,Ei,Ki,Ji;return{...P,...A,runtime:"browser",defaultsMode:E,bodyLengthChecker:(z=A==null?void 0:A.bodyLengthChecker)!==null&&z!==void 0?z:ha,credentialDefaultProvider:(G=A==null?void 0:A.credentialDefaultProvider)!==null&&G!==void 0?G:Ci=>()=>Promise.reject(new Error("Credential is missing")),defaultUserAgentProvider:(ee=A==null?void 0:A.defaultUserAgentProvider)!==null&&ee!==void 0?ee:Za({serviceId:P.serviceId,clientVersion:Vn().version}),maxAttempts:(Be=A==null?void 0:A.maxAttempts)!==null&&Be!==void 0?Be:tn,region:(Te=A==null?void 0:A.region)!==null&&Te!==void 0?Te:va("Region is missing"),requestHandler:(qe=A==null?void 0:A.requestHandler)!==null&&qe!==void 0?qe:new Zi(T),retryMode:(Le=A==null?void 0:A.retryMode)!==null&&Le!==void 0?Le:(0,h.coroutine)(function*(){return(yield T()).retryMode||xe}),sha256:(Fn=A==null?void 0:A.sha256)!==null&&Fn!==void 0?Fn:Qn.Sha256,streamCollector:(Ei=A==null?void 0:A.streamCollector)!==null&&Ei!==void 0?Ei:ar,useDualstackEndpoint:(Ki=A==null?void 0:A.useDualstackEndpoint)!==null&&Ki!==void 0?Ki:()=>Promise.resolve(i),useFipsEndpoint:(Ji=A==null?void 0:A.useFipsEndpoint)!==null&&Ji!==void 0?Ji:()=>Promise.resolve(o)}},"runtimeConfig_browser_getRuntimeConfig");class qa extends sl{destroy(){super.destroy()}constructor(E){const T=Jf(E),P=bn(T),z=R(P),G=Rn(z),ee=On(G),Be=ee,Te=Et(Be),qe=li(Te);super(qe),this.config=qe,this.middlewareStack.use(Fo(this.config)),this.middlewareStack.use(J(this.config)),this.middlewareStack.use(hi(this.config)),this.middlewareStack.use(ui(this.config)),this.middlewareStack.use(Ht(this.config)),this.middlewareStack.use(Si(this.config)),this.middlewareStack.use(xl(this.config))}}n(qa,"ChimeSDKMessagingClient");var dd;(function(A){A[A.HEADER=0]="HEADER",A[A.TRAILER=1]="TRAILER"})(dd||(dd={}));class Yf{constructor({name:E,kind:T=FieldPosition.HEADER,values:P=[]}){this.name=E,this.kind=T,this.values=P}add(E){this.values.push(E)}set(E){this.values=E}remove(E){this.values=this.values.filter(T=>T!==E)}toString(){return this.values.map(E=>E.includes(",")||E.includes(" ")?`"${E}"`:E).join(", ")}get(){return this.values}}n(Yf,"Field_Field");class Er{constructor(E){this.method=E.method||"GET",this.hostname=E.hostname||"localhost",this.port=E.port,this.query=E.query||{},this.headers=E.headers||{},this.body=E.body,this.protocol=E.protocol?E.protocol.slice(-1)!==":"?`${E.protocol}:`:E.protocol:"https:",this.path=E.path?E.path.charAt(0)!=="/"?`/${E.path}`:E.path:"/"}static isInstance(E){if(!E)return!1;const T=E;return"method"in T&&"protocol"in T&&"hostname"in T&&"path"in T&&typeof T.query=="object"&&typeof T.headers=="object"}clone(){const E=new Er({...this,headers:{...this.headers}});return E.query&&(E.query=Xf(E.query)),E}}n(Er,"dist_es_httpRequest_HttpRequest");function Xf(A){return Object.keys(A).reduce((E,T)=>{const P=A[T];return{...E,[T]:Array.isArray(P)?[...P]:P}},{})}n(Xf,"httpRequest_cloneQuery");class es extends Yo{constructor(E){super(E),Object.setPrototypeOf(this,es.prototype)}}n(es,"ChimeSDKMessagingServiceException");const Qf={ALL:"ALL",FILTERED:"FILTERED",NONE:"NONE"},Zf={DEFAULT:"DEFAULT",HIDDEN:"HIDDEN"},qf={AccessDenied:"AccessDenied",BadRequest:"BadRequest",Conflict:"Conflict",Forbidden:"Forbidden",NotFound:"NotFound",PhoneNumberAssociationsExist:"PhoneNumberAssociationsExist",PreconditionFailed:"PreconditionFailed",ResourceLimitExceeded:"ResourceLimitExceeded",ServiceFailure:"ServiceFailure",ServiceUnavailable:"ServiceUnavailable",Throttled:"Throttled",Throttling:"Throttling",Unauthorized:"Unauthorized",Unprocessable:"Unprocessable",VoiceConnectorGroupAssociationsExist:"VoiceConnectorGroupAssociationsExist"};class dc extends es{constructor(E){super({name:"BadRequestException",$fault:"client",...E}),this.name="BadRequestException",this.$fault="client",Object.setPrototypeOf(this,dc.prototype),this.Code=E.Code,this.Message=E.Message}}n(dc,"BadRequestException");class fc extends es{constructor(E){super({name:"ConflictException",$fault:"client",...E}),this.name="ConflictException",this.$fault="client",Object.setPrototypeOf(this,fc.prototype),this.Code=E.Code,this.Message=E.Message}}n(fc,"ConflictException");class hc extends es{constructor(E){super({name:"ForbiddenException",$fault:"client",...E}),this.name="ForbiddenException",this.$fault="client",Object.setPrototypeOf(this,hc.prototype),this.Code=E.Code,this.Message=E.Message}}n(hc,"ForbiddenException");class pc extends es{constructor(E){super({name:"NotFoundException",$fault:"client",...E}),this.name="NotFoundException",this.$fault="client",Object.setPrototypeOf(this,pc.prototype),this.Code=E.Code,this.Message=E.Message}}n(pc,"NotFoundException");class mc extends es{constructor(E){super({name:"ServiceFailureException",$fault:"server",...E}),this.name="ServiceFailureException",this.$fault="server",Object.setPrototypeOf(this,mc.prototype),this.Code=E.Code,this.Message=E.Message}}n(mc,"ServiceFailureException");class gc extends es{constructor(E){super({name:"ServiceUnavailableException",$fault:"server",...E}),this.name="ServiceUnavailableException",this.$fault="server",Object.setPrototypeOf(this,gc.prototype),this.Code=E.Code,this.Message=E.Message}}n(gc,"ServiceUnavailableException");class vc extends es{constructor(E){super({name:"ThrottledClientException",$fault:"client",...E}),this.name="ThrottledClientException",this.$fault="client",Object.setPrototypeOf(this,vc.prototype),this.Code=E.Code,this.Message=E.Message}}n(vc,"ThrottledClientException");class yc extends es{constructor(E){super({name:"UnauthorizedClientException",$fault:"client",...E}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,yc.prototype),this.Code=E.Code,this.Message=E.Message}}n(yc,"UnauthorizedClientException");class Sc extends es{constructor(E){super({name:"ResourceLimitExceededException",$fault:"client",...E}),this.name="ResourceLimitExceededException",this.$fault="client",Object.setPrototypeOf(this,Sc.prototype),this.Code=E.Code,this.Message=E.Message}}n(Sc,"ResourceLimitExceededException");const eh={CREATED_TIMESTAMP:"CREATED_TIMESTAMP",LAST_MESSAGE_TIMESTAMP:"LAST_MESSAGE_TIMESTAMP"},th={RESTRICTED:"RESTRICTED",UNRESTRICTED:"UNRESTRICTED"},nh={PRIVATE:"PRIVATE",PUBLIC:"PUBLIC"},ih={ASYNC:"ASYNC"},rh={ABORT:"ABORT",CONTINUE:"CONTINUE"},oh={DEFAULT:"DEFAULT",VOIP:"VOIP"},ah={NON_PERSISTENT:"NON_PERSISTENT",PERSISTENT:"PERSISTENT"},sh={DENIED:"DENIED",FAILED:"FAILED",PENDING:"PENDING",SENT:"SENT"},lh={CONTROL:"CONTROL",STANDARD:"STANDARD"},ch={Channel:"Channel",ChannelMessage:"ChannelMessage"},uh={ASCENDING:"ASCENDING",DESCENDING:"DESCENDING"},dh={MEMBERS:"MEMBERS"},fh={EQUALS:"EQUALS",INCLUDES:"INCLUDES"},Ca=n(A=>({...A,...A.Name&&{Name:Wi}}),"IdentityFilterSensitiveLog"),fd=n(A=>({...A,...A.InvitedBy&&{InvitedBy:Ca(A.InvitedBy)},...A.Members&&{Members:A.Members.map(E=>Ca(E))}}),"BatchChannelMembershipsFilterSensitiveLog"),hd=n(A=>({...A,...A.BatchChannelMemberships&&{BatchChannelMemberships:fd(A.BatchChannelMemberships)}}),"BatchCreateChannelMembershipResponseFilterSensitiveLog"),pd=n(A=>({...A,...A.Name&&{Name:Wi},...A.Metadata&&{Metadata:Wi},...A.CreatedBy&&{CreatedBy:Ca(A.CreatedBy)}}),"ChannelFilterSensitiveLog"),md=n(A=>({...A,...A.Name&&{Name:Wi},...A.Metadata&&{Metadata:Wi}}),"ChannelAssociatedWithFlowSummaryFilterSensitiveLog"),gd=n(A=>({...A,...A.Member&&{Member:Ca(A.Member)},...A.CreatedBy&&{CreatedBy:Ca(A.CreatedBy)}}),"ChannelBanFilterSensitiveLog"),vd=n(A=>({...A,...A.Member&&{Member:Ca(A.Member)}}),"ChannelBanSummaryFilterSensitiveLog"),Ec=n(A=>({...A,...A.Name&&{Name:Wi}}),"ProcessorFilterSensitiveLog"),yd=n(A=>({...A,...A.Processors&&{Processors:A.Processors.map(E=>Ec(E))},...A.Name&&{Name:Wi}}),"ChannelFlowFilterSensitiveLog"),bc=n(A=>({...A,...A.StringValues&&{StringValues:Wi}}),"MessageAttributeValueFilterSensitiveLog"),Vu=n(A=>({...A,...A.Title&&{Title:Wi},...A.Body&&{Body:Wi}}),"PushNotificationConfigurationFilterSensitiveLog"),Sd=n(A=>({...A,...A.Content&&{Content:Wi},...A.Metadata&&{Metadata:Wi},...A.PushNotification&&{PushNotification:Vu(A.PushNotification)},...A.MessageAttributes&&{MessageAttributes:Object.entries(A.MessageAttributes).reduce((E,T)=>{let[P,z]=T;return E[P]=bc(z),E},{})},...A.ContentType&&{ContentType:Wi}}),"ChannelMessageCallbackFilterSensitiveLog"),Ed=n(A=>({...A,...A.ChannelMessage&&{ChannelMessage:Sd(A.ChannelMessage)}}),"ChannelFlowCallbackRequestFilterSensitiveLog"),bd=n(A=>({...A,...A.Name&&{Name:Wi},...A.Processors&&{Processors:A.Processors.map(E=>Ec(E))}}),"ChannelFlowSummaryFilterSensitiveLog"),_d=n(A=>({...A,...A.InvitedBy&&{InvitedBy:Ca(A.InvitedBy)},...A.Member&&{Member:Ca(A.Member)}}),"ChannelMembershipFilterSensitiveLog"),_c=n(A=>({...A,...A.Name&&{Name:Wi},...A.Metadata&&{Metadata:Wi}}),"ChannelSummaryFilterSensitiveLog"),Hu=n(A=>({...A,...A.ChannelSummary&&{ChannelSummary:_c(A.ChannelSummary)}}),"ChannelMembershipForAppInstanceUserSummaryFilterSensitiveLog"),Td=n(A=>({...A,...A.FilterRule&&{FilterRule:Wi}}),"PushNotificationPreferencesFilterSensitiveLog"),lu=n(A=>({...A,...A.PushNotifications&&{PushNotifications:Td(A.PushNotifications)}}),"ChannelMembershipPreferencesFilterSensitiveLog"),Cd=n(A=>({...A,...A.Member&&{Member:Ca(A.Member)}}),"ChannelMembershipSummaryFilterSensitiveLog"),Id=n(A=>({...A,...A.Content&&{Content:Wi},...A.Metadata&&{Metadata:Wi},...A.Sender&&{Sender:Ca(A.Sender)},...A.MessageAttributes&&{MessageAttributes:Object.entries(A.MessageAttributes).reduce((E,T)=>{let[P,z]=T;return E[P]=bc(z),E},{})},...A.ContentType&&{ContentType:Wi}}),"ChannelMessageFilterSensitiveLog"),Od=n(A=>({...A,...A.Content&&{Content:Wi},...A.Metadata&&{Metadata:Wi},...A.Sender&&{Sender:Ca(A.Sender)},...A.MessageAttributes&&{MessageAttributes:Object.entries(A.MessageAttributes).reduce((E,T)=>{let[P,z]=T;return E[P]=bc(z),E},{})},...A.ContentType&&{ContentType:Wi}}),"ChannelMessageSummaryFilterSensitiveLog"),ju=n(A=>({...A,...A.ChannelSummary&&{ChannelSummary:_c(A.ChannelSummary)}}),"ChannelModeratedByAppInstanceUserSummaryFilterSensitiveLog"),wd=n(A=>({...A,...A.Moderator&&{Moderator:Ca(A.Moderator)},...A.CreatedBy&&{CreatedBy:Ca(A.CreatedBy)}}),"ChannelModeratorFilterSensitiveLog"),Ad=n(A=>({...A,...A.Moderator&&{Moderator:Ca(A.Moderator)}}),"ChannelModeratorSummaryFilterSensitiveLog"),Tc=n(A=>({...A,...A.Key&&{Key:Wi},...A.Value&&{Value:Wi}}),"TagFilterSensitiveLog"),Dd=n(A=>({...A,...A.Name&&{Name:Wi},...A.Metadata&&{Metadata:Wi},...A.ClientRequestToken&&{ClientRequestToken:Wi},...A.Tags&&{Tags:A.Tags.map(E=>Tc(E))},...A.ChannelId&&{ChannelId:Wi}}),"CreateChannelRequestFilterSensitiveLog"),Rd=n(A=>({...A,...A.Member&&{Member:Ca(A.Member)}}),"CreateChannelBanResponseFilterSensitiveLog"),Md=n(A=>({...A,...A.Processors&&{Processors:A.Processors.map(E=>Ec(E))},...A.Name&&{Name:Wi},...A.Tags&&{Tags:A.Tags.map(E=>Tc(E))},...A.ClientRequestToken&&{ClientRequestToken:Wi}}),"CreateChannelFlowRequestFilterSensitiveLog"),Pd=n(A=>({...A,...A.Member&&{Member:Ca(A.Member)}}),"CreateChannelMembershipResponseFilterSensitiveLog"),kd=n(A=>({...A,...A.ChannelModerator&&{ChannelModerator:Ca(A.ChannelModerator)}}),"CreateChannelModeratorResponseFilterSensitiveLog"),Nd=n(A=>({...A,...A.Channel&&{Channel:pd(A.Channel)}}),"DescribeChannelResponseFilterSensitiveLog"),Ld=n(A=>({...A,...A.ChannelBan&&{ChannelBan:gd(A.ChannelBan)}}),"DescribeChannelBanResponseFilterSensitiveLog"),xd=n(A=>({...A,...A.ChannelFlow&&{ChannelFlow:yd(A.ChannelFlow)}}),"DescribeChannelFlowResponseFilterSensitiveLog"),Fd=n(A=>({...A,...A.ChannelMembership&&{ChannelMembership:_d(A.ChannelMembership)}}),"DescribeChannelMembershipResponseFilterSensitiveLog"),Bd=n(A=>({...A,...A.ChannelMembership&&{ChannelMembership:Hu(A.ChannelMembership)}}),"DescribeChannelMembershipForAppInstanceUserResponseFilterSensitiveLog"),Ud=n(A=>({...A,...A.Channel&&{Channel:ju(A.Channel)}}),"DescribeChannelModeratedByAppInstanceUserResponseFilterSensitiveLog"),Vd=n(A=>({...A,...A.ChannelModerator&&{ChannelModerator:wd(A.ChannelModerator)}}),"DescribeChannelModeratorResponseFilterSensitiveLog"),Hd=n(A=>({...A,...A.Member&&{Member:Ca(A.Member)},...A.Preferences&&{Preferences:lu(A.Preferences)}}),"GetChannelMembershipPreferencesResponseFilterSensitiveLog"),jd=n(A=>({...A,...A.ChannelMessage&&{ChannelMessage:Id(A.ChannelMessage)}}),"GetChannelMessageResponseFilterSensitiveLog"),Wd=n(A=>({...A,...A.NextToken&&{NextToken:Wi}}),"ListChannelBansRequestFilterSensitiveLog"),zd=n(A=>({...A,...A.NextToken&&{NextToken:Wi},...A.ChannelBans&&{ChannelBans:A.ChannelBans.map(E=>vd(E))}}),"ListChannelBansResponseFilterSensitiveLog"),Gd=n(A=>({...A,...A.NextToken&&{NextToken:Wi}}),"ListChannelFlowsRequestFilterSensitiveLog"),$d=n(A=>({...A,...A.ChannelFlows&&{ChannelFlows:A.ChannelFlows.map(E=>bd(E))},...A.NextToken&&{NextToken:Wi}}),"ListChannelFlowsResponseFilterSensitiveLog"),Kd=n(A=>({...A,...A.NextToken&&{NextToken:Wi}}),"ListChannelMembershipsRequestFilterSensitiveLog"),Jd=n(A=>({...A,...A.ChannelMemberships&&{ChannelMemberships:A.ChannelMemberships.map(E=>Cd(E))},...A.NextToken&&{NextToken:Wi}}),"ListChannelMembershipsResponseFilterSensitiveLog"),cu=n(A=>({...A,...A.NextToken&&{NextToken:Wi}}),"ListChannelMembershipsForAppInstanceUserRequestFilterSensitiveLog"),Yd=n(A=>({...A,...A.ChannelMemberships&&{ChannelMemberships:A.ChannelMemberships.map(E=>Hu(E))},...A.NextToken&&{NextToken:Wi}}),"ListChannelMembershipsForAppInstanceUserResponseFilterSensitiveLog"),Xd=n(A=>({...A,...A.NextToken&&{NextToken:Wi}}),"ListChannelMessagesRequestFilterSensitiveLog"),Qd=n(A=>({...A,...A.NextToken&&{NextToken:Wi},...A.ChannelMessages&&{ChannelMessages:A.ChannelMessages.map(E=>Od(E))}}),"ListChannelMessagesResponseFilterSensitiveLog"),Zd=n(A=>({...A,...A.NextToken&&{NextToken:Wi}}),"ListChannelModeratorsRequestFilterSensitiveLog"),qd=n(A=>({...A,...A.NextToken&&{NextToken:Wi},...A.ChannelModerators&&{ChannelModerators:A.ChannelModerators.map(E=>Ad(E))}}),"ListChannelModeratorsResponseFilterSensitiveLog"),ef=n(A=>({...A,...A.NextToken&&{NextToken:Wi}}),"ListChannelsRequestFilterSensitiveLog"),tf=n(A=>({...A,...A.Channels&&{Channels:A.Channels.map(E=>_c(E))},...A.NextToken&&{NextToken:Wi}}),"ListChannelsResponseFilterSensitiveLog"),nf=n(A=>({...A,...A.NextToken&&{NextToken:Wi}}),"ListChannelsAssociatedWithChannelFlowRequestFilterSensitiveLog"),rf=n(A=>({...A,...A.Channels&&{Channels:A.Channels.map(E=>md(E))},...A.NextToken&&{NextToken:Wi}}),"ListChannelsAssociatedWithChannelFlowResponseFilterSensitiveLog"),of=n(A=>({...A,...A.NextToken&&{NextToken:Wi}}),"ListChannelsModeratedByAppInstanceUserRequestFilterSensitiveLog"),af=n(A=>({...A,...A.Channels&&{Channels:A.Channels.map(E=>ju(E))},...A.NextToken&&{NextToken:Wi}}),"ListChannelsModeratedByAppInstanceUserResponseFilterSensitiveLog"),sf=n(A=>({...A,...A.NextToken&&{NextToken:Wi}}),"ListSubChannelsRequestFilterSensitiveLog"),lf=n(A=>({...A,...A.NextToken&&{NextToken:Wi}}),"ListSubChannelsResponseFilterSensitiveLog"),cf=n(A=>({...A,...A.Tags&&{Tags:A.Tags.map(E=>Tc(E))}}),"ListTagsForResourceResponseFilterSensitiveLog"),uf=n(A=>({...A,...A.Preferences&&{Preferences:lu(A.Preferences)}}),"PutChannelMembershipPreferencesRequestFilterSensitiveLog"),df=n(A=>({...A,...A.Member&&{Member:Ca(A.Member)},...A.Preferences&&{Preferences:lu(A.Preferences)}}),"PutChannelMembershipPreferencesResponseFilterSensitiveLog"),ff=n(A=>({...A,...A.NextToken&&{NextToken:Wi}}),"SearchChannelsRequestFilterSensitiveLog"),hf=n(A=>({...A,...A.Channels&&{Channels:A.Channels.map(E=>_c(E))},...A.NextToken&&{NextToken:Wi}}),"SearchChannelsResponseFilterSensitiveLog"),pf=n(A=>({...A,...A.Content&&{Content:Wi},...A.Metadata&&{Metadata:Wi},...A.ClientRequestToken&&{ClientRequestToken:Wi},...A.PushNotification&&{PushNotification:Vu(A.PushNotification)},...A.MessageAttributes&&{MessageAttributes:Object.entries(A.MessageAttributes).reduce((E,T)=>{let[P,z]=T;return E[P]=bc(z),E},{})},...A.ContentType&&{ContentType:Wi}}),"SendChannelMessageRequestFilterSensitiveLog"),mf=n(A=>({...A,...A.Tags&&{Tags:A.Tags.map(E=>Tc(E))}}),"TagResourceRequestFilterSensitiveLog"),gf=n(A=>({...A,...A.TagKeys&&{TagKeys:Wi}}),"UntagResourceRequestFilterSensitiveLog"),vf=n(A=>({...A,...A.Name&&{Name:Wi},...A.Metadata&&{Metadata:Wi}}),"UpdateChannelRequestFilterSensitiveLog"),yf=n(A=>({...A,...A.Processors&&{Processors:A.Processors.map(E=>Ec(E))},...A.Name&&{Name:Wi}}),"UpdateChannelFlowRequestFilterSensitiveLog"),Sf=n(A=>({...A,...A.Content&&{Content:Wi},...A.Metadata&&{Metadata:Wi},...A.ContentType&&{ContentType:Wi}}),"UpdateChannelMessageRequestFilterSensitiveLog"),hh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"content-type":"application/json","x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/channel-flow`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);let qe;return qe=JSON.stringify(F(E,{ChannelFlowArn:[]})),new Er({protocol:z,hostname:P,port:G,method:"PUT",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_AssociateChannelFlowCommand")}(),ph=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"content-type":"application/json","x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/memberships`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);const qe=Bn({operation:[,"batch-create"]});let Le;return Le=JSON.stringify(F(E,{MemberArns:Fn=>Tt(Fn),SubChannelId:[],Type:[]})),new Er({protocol:z,hostname:P,port:G,method:"POST",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_BatchCreateChannelMembershipCommand")}(),mh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be={"content-type":"application/json"};let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);const qe=Bn({operation:[,"channel-flow-callback"]});let Le;return Le=JSON.stringify(F(E,{CallbackId:[!0,Fn=>Fn??mr()],ChannelMessage:Fn=>Tt(Fn),DeleteResource:[]})),new Er({protocol:z,hostname:P,port:G,method:"POST",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_ChannelFlowCallbackCommand")}(),gh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"content-type":"application/json","x-amz-chime-bearer":E.ChimeBearer}),Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels`;let qe;return qe=JSON.stringify(F(E,{AppInstanceArn:[],ChannelId:[],ClientRequestToken:[!0,Le=>Le??mr()],ElasticChannelConfiguration:Le=>Tt(Le),ExpirationSettings:Le=>Tt(Le),MemberArns:Le=>Tt(Le),Metadata:[],Mode:[],ModeratorArns:Le=>Tt(Le),Name:[],Privacy:[],Tags:Le=>Tt(Le)})),new Er({protocol:z,hostname:P,port:G,method:"POST",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_CreateChannelCommand")}(),vh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"content-type":"application/json","x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/bans`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);let qe;return qe=JSON.stringify(F(E,{MemberArn:[]})),new Er({protocol:z,hostname:P,port:G,method:"POST",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_CreateChannelBanCommand")}(),yh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be={"content-type":"application/json"},Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channel-flows`;let qe;return qe=JSON.stringify(F(E,{AppInstanceArn:[],ClientRequestToken:[!0,Le=>Le??mr()],Name:[],Processors:Le=>Tt(Le),Tags:Le=>Tt(Le)})),new Er({protocol:z,hostname:P,port:G,method:"POST",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_CreateChannelFlowCommand")}(),Sh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"content-type":"application/json","x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/memberships`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);let qe;return qe=JSON.stringify(F(E,{MemberArn:[],SubChannelId:[],Type:[]})),new Er({protocol:z,hostname:P,port:G,method:"POST",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_CreateChannelMembershipCommand")}(),Eh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"content-type":"application/json","x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/moderators`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);let qe;return qe=JSON.stringify(F(E,{ChannelModeratorArn:[]})),new Er({protocol:z,hostname:P,port:G,method:"POST",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_CreateChannelModeratorCommand")}(),bh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);let qe;return new Er({protocol:z,hostname:P,port:G,method:"DELETE",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_DeleteChannelCommand")}(),_h=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/bans/{MemberArn}`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),Te=Bt(Te,E,"MemberArn",()=>E.MemberArn,"{MemberArn}",!1);let qe;return new Er({protocol:z,hostname:P,port:G,method:"DELETE",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_DeleteChannelBanCommand")}(),Th=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be={};let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channel-flows/{ChannelFlowArn}`;Te=Bt(Te,E,"ChannelFlowArn",()=>E.ChannelFlowArn,"{ChannelFlowArn}",!1);let qe;return new Er({protocol:z,hostname:P,port:G,method:"DELETE",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_DeleteChannelFlowCommand")}(),Ch=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/memberships/{MemberArn}`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),Te=Bt(Te,E,"MemberArn",()=>E.MemberArn,"{MemberArn}",!1);const qe=Bn({"sub-channel-id":[,E.SubChannelId]});let Le;return new Er({protocol:z,hostname:P,port:G,method:"DELETE",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_DeleteChannelMembershipCommand")}(),Ih=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/messages/{MessageId}`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),Te=Bt(Te,E,"MessageId",()=>E.MessageId,"{MessageId}",!1);const qe=Bn({"sub-channel-id":[,E.SubChannelId]});let Le;return new Er({protocol:z,hostname:P,port:G,method:"DELETE",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_DeleteChannelMessageCommand")}(),Oh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/moderators/{ChannelModeratorArn}`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),Te=Bt(Te,E,"ChannelModeratorArn",()=>E.ChannelModeratorArn,"{ChannelModeratorArn}",!1);let qe;return new Er({protocol:z,hostname:P,port:G,method:"DELETE",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_DeleteChannelModeratorCommand")}(),wh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be={};let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/app-instances/{AppInstanceArn}/streaming-configurations`;Te=Bt(Te,E,"AppInstanceArn",()=>E.AppInstanceArn,"{AppInstanceArn}",!1);let qe;return new Er({protocol:z,hostname:P,port:G,method:"DELETE",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_DeleteMessagingStreamingConfigurationsCommand")}(),Ah=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);let qe;return new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_DescribeChannelCommand")}(),Dh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/bans/{MemberArn}`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),Te=Bt(Te,E,"MemberArn",()=>E.MemberArn,"{MemberArn}",!1);let qe;return new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_DescribeChannelBanCommand")}(),Rh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be={};let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channel-flows/{ChannelFlowArn}`;Te=Bt(Te,E,"ChannelFlowArn",()=>E.ChannelFlowArn,"{ChannelFlowArn}",!1);let qe;return new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_DescribeChannelFlowCommand")}(),Mh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/memberships/{MemberArn}`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),Te=Bt(Te,E,"MemberArn",()=>E.MemberArn,"{MemberArn}",!1);const qe=Bn({"sub-channel-id":[,E.SubChannelId]});let Le;return new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_DescribeChannelMembershipCommand")}(),Ph=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);const qe=Bn({scope:[,"app-instance-user-membership"],"app-instance-user-arn":[,mi(E.AppInstanceUserArn,"AppInstanceUserArn")]});let Le;return new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_DescribeChannelMembershipForAppInstanceUserCommand")}(),kh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);const qe=Bn({scope:[,"app-instance-user-moderated-channel"],"app-instance-user-arn":[,mi(E.AppInstanceUserArn,"AppInstanceUserArn")]});let Le;return new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_DescribeChannelModeratedByAppInstanceUserCommand")}(),Nh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/moderators/{ChannelModeratorArn}`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),Te=Bt(Te,E,"ChannelModeratorArn",()=>E.ChannelModeratorArn,"{ChannelModeratorArn}",!1);let qe;return new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_DescribeChannelModeratorCommand")}(),Lh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/channel-flow/{ChannelFlowArn}`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),Te=Bt(Te,E,"ChannelFlowArn",()=>E.ChannelFlowArn,"{ChannelFlowArn}",!1);let qe;return new Er({protocol:z,hostname:P,port:G,method:"DELETE",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_DisassociateChannelFlowCommand")}(),xh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/memberships/{MemberArn}/preferences`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),Te=Bt(Te,E,"MemberArn",()=>E.MemberArn,"{MemberArn}",!1);let qe;return new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_GetChannelMembershipPreferencesCommand")}(),Fh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/messages/{MessageId}`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),Te=Bt(Te,E,"MessageId",()=>E.MessageId,"{MessageId}",!1);const qe=Bn({"sub-channel-id":[,E.SubChannelId]});let Le;return new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_GetChannelMessageCommand")}(),Bh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/messages/{MessageId}`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),Te=Bt(Te,E,"MessageId",()=>E.MessageId,"{MessageId}",!1);const qe=Bn({scope:[,"message-status"],"sub-channel-id":[,E.SubChannelId]});let Le;return new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_GetChannelMessageStatusCommand")}(),Wu=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be={"content-type":"application/json"},Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/endpoints/messaging-session`;let qe;return qe="",new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_GetMessagingSessionEndpointCommand")}(),Cc=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be={};let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/app-instances/{AppInstanceArn}/streaming-configurations`;Te=Bt(Te,E,"AppInstanceArn",()=>E.AppInstanceArn,"{AppInstanceArn}",!1);let qe;return new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_GetMessagingStreamingConfigurationsCommand")}(),Uh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/bans`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);const qe=Bn({"max-results":[()=>E.MaxResults!==void 0,()=>E.MaxResults.toString()],"next-token":[,E.NextToken]});let Le;return new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_ListChannelBansCommand")}(),Vh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be={},Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channel-flows`,qe=Bn({"app-instance-arn":[,mi(E.AppInstanceArn,"AppInstanceArn")],"max-results":[()=>E.MaxResults!==void 0,()=>E.MaxResults.toString()],"next-token":[,E.NextToken]});let Le;return new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_ListChannelFlowsCommand")}(),Hh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/memberships`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);const qe=Bn({type:[,E.Type],"max-results":[()=>E.MaxResults!==void 0,()=>E.MaxResults.toString()],"next-token":[,E.NextToken],"sub-channel-id":[,E.SubChannelId]});let Le;return new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_ListChannelMembershipsCommand")}(),jh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer}),Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels`,qe=Bn({scope:[,"app-instance-user-memberships"],"app-instance-user-arn":[,E.AppInstanceUserArn],"max-results":[()=>E.MaxResults!==void 0,()=>E.MaxResults.toString()],"next-token":[,E.NextToken]});let Le;return new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_ListChannelMembershipsForAppInstanceUserCommand")}(),Ol=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/messages`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);const qe=Bn({"sort-order":[,E.SortOrder],"not-before":[()=>E.NotBefore!==void 0,()=>(E.NotBefore.toISOString().split(".")[0]+"Z").toString()],"not-after":[()=>E.NotAfter!==void 0,()=>(E.NotAfter.toISOString().split(".")[0]+"Z").toString()],"max-results":[()=>E.MaxResults!==void 0,()=>E.MaxResults.toString()],"next-token":[,E.NextToken],"sub-channel-id":[,E.SubChannelId]});let Le;return new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_ListChannelMessagesCommand")}(),Ef=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/moderators`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);const qe=Bn({"max-results":[()=>E.MaxResults!==void 0,()=>E.MaxResults.toString()],"next-token":[,E.NextToken]});let Le;return new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_ListChannelModeratorsCommand")}(),Wh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer}),Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels`,qe=Bn({"app-instance-arn":[,mi(E.AppInstanceArn,"AppInstanceArn")],privacy:[,E.Privacy],"max-results":[()=>E.MaxResults!==void 0,()=>E.MaxResults.toString()],"next-token":[,E.NextToken]});let Le;return new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_ListChannelsCommand")}(),zh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be={},Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels`,qe=Bn({scope:[,"channel-flow-associations"],"channel-flow-arn":[,mi(E.ChannelFlowArn,"ChannelFlowArn")],"max-results":[()=>E.MaxResults!==void 0,()=>E.MaxResults.toString()],"next-token":[,E.NextToken]});let Le;return new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_ListChannelsAssociatedWithChannelFlowCommand")}(),Gh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer}),Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels`,qe=Bn({scope:[,"app-instance-user-moderated-channels"],"app-instance-user-arn":[,E.AppInstanceUserArn],"max-results":[()=>E.MaxResults!==void 0,()=>E.MaxResults.toString()],"next-token":[,E.NextToken]});let Le;return new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_ListChannelsModeratedByAppInstanceUserCommand")}(),$h=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/subchannels`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);const qe=Bn({"max-results":[()=>E.MaxResults!==void 0,()=>E.MaxResults.toString()],"next-token":[,E.NextToken]});let Le;return new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_ListSubChannelsCommand")}(),Kh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be={},Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/tags`,qe=Bn({arn:[,mi(E.ResourceARN,"ResourceARN")]});let Le;return new Er({protocol:z,hostname:P,port:G,method:"GET",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_ListTagsForResourceCommand")}(),Jh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"content-type":"application/json","x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/expiration-settings`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);let qe;return qe=JSON.stringify(F(E,{ExpirationSettings:Le=>Tt(Le)})),new Er({protocol:z,hostname:P,port:G,method:"PUT",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_PutChannelExpirationSettingsCommand")}(),Yh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"content-type":"application/json","x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/memberships/{MemberArn}/preferences`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),Te=Bt(Te,E,"MemberArn",()=>E.MemberArn,"{MemberArn}",!1);let qe;return qe=JSON.stringify(F(E,{Preferences:Le=>Tt(Le)})),new Er({protocol:z,hostname:P,port:G,method:"PUT",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_PutChannelMembershipPreferencesCommand")}(),Xh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be={"content-type":"application/json"};let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/app-instances/{AppInstanceArn}/streaming-configurations`;Te=Bt(Te,E,"AppInstanceArn",()=>E.AppInstanceArn,"{AppInstanceArn}",!1);let qe;return qe=JSON.stringify(F(E,{StreamingConfigurations:Le=>Tt(Le)})),new Er({protocol:z,hostname:P,port:G,method:"PUT",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_PutMessagingStreamingConfigurationsCommand")}(),Qh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"content-type":"application/json","x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/messages/{MessageId}`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),Te=Bt(Te,E,"MessageId",()=>E.MessageId,"{MessageId}",!1);const qe=Bn({operation:[,"redact"]});let Le;return Le=JSON.stringify(F(E,{SubChannelId:[]})),new Er({protocol:z,hostname:P,port:G,method:"POST",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_RedactChannelMessageCommand")}(),Zh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"content-type":"application/json","x-amz-chime-bearer":E.ChimeBearer}),Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels`,qe=Bn({operation:[,"search"],"max-results":[()=>E.MaxResults!==void 0,()=>E.MaxResults.toString()],"next-token":[,E.NextToken]});let Le;return Le=JSON.stringify(F(E,{Fields:Fn=>Tt(Fn)})),new Er({protocol:z,hostname:P,port:G,method:"POST",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_SearchChannelsCommand")}(),qh=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"content-type":"application/json","x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/messages`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);let qe;return qe=JSON.stringify(F(E,{ClientRequestToken:[!0,Le=>Le??mr()],Content:[],ContentType:[],MessageAttributes:Le=>Tt(Le),Metadata:[],Persistence:[],PushNotification:Le=>Tt(Le),SubChannelId:[],Type:[]})),new Er({protocol:z,hostname:P,port:G,method:"POST",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_SendChannelMessageCommand")}(),ep=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be={"content-type":"application/json"},Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/tags`,qe=Bn({operation:[,"tag-resource"]});let Le;return Le=JSON.stringify(F(E,{ResourceARN:[],Tags:Fn=>Tt(Fn)})),new Er({protocol:z,hostname:P,port:G,method:"POST",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_TagResourceCommand")}(),tp=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be={"content-type":"application/json"},Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/tags`,qe=Bn({operation:[,"untag-resource"]});let Le;return Le=JSON.stringify(F(E,{ResourceARN:[],TagKeys:Fn=>Tt(Fn)})),new Er({protocol:z,hostname:P,port:G,method:"POST",headers:Be,path:Te,query:qe,body:Le})});return n(function(T,P){return A.apply(this,arguments)},"se_UntagResourceCommand")}(),np=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"content-type":"application/json","x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);let qe;return qe=JSON.stringify(F(E,{Metadata:[],Mode:[],Name:[]})),new Er({protocol:z,hostname:P,port:G,method:"PUT",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_UpdateChannelCommand")}(),ip=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be={"content-type":"application/json"};let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channel-flows/{ChannelFlowArn}`;Te=Bt(Te,E,"ChannelFlowArn",()=>E.ChannelFlowArn,"{ChannelFlowArn}",!1);let qe;return qe=JSON.stringify(F(E,{Name:[],Processors:Le=>Tt(Le)})),new Er({protocol:z,hostname:P,port:G,method:"PUT",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_UpdateChannelFlowCommand")}(),rp=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"content-type":"application/json","x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/messages/{MessageId}`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1),Te=Bt(Te,E,"MessageId",()=>E.MessageId,"{MessageId}",!1);let qe;return qe=JSON.stringify(F(E,{Content:[],ContentType:[],Metadata:[],SubChannelId:[]})),new Er({protocol:z,hostname:P,port:G,method:"PUT",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_UpdateChannelMessageCommand")}(),op=function(){var A=(0,h.coroutine)(function*(E,T){const{hostname:P,protocol:z="https",port:G,path:ee}=yield T.endpoint(),Be=Bn({},po,{"x-amz-chime-bearer":E.ChimeBearer});let Te=`${ee!=null&&ee.endsWith("/")?ee.slice(0,-1):ee||""}/channels/{ChannelArn}/readMarker`;Te=Bt(Te,E,"ChannelArn",()=>E.ChannelArn,"{ChannelArn}",!1);let qe;return new Er({protocol:z,hostname:P,port:G,method:"PUT",headers:Be,path:Te,body:qe})});return n(function(T,P){return A.apply(this,arguments)},"se_UpdateChannelReadMarkerCommand")}(),ap=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return sp(E,T);const P=Bn({$metadata:sr(E)});return yield Es(E.body,T),P});return n(function(T,P){return A.apply(this,arguments)},"de_AssociateChannelFlowCommand")}(),sp=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Ia(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Fs(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_AssociateChannelFlowCommandError")}(),lp=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return cp(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{BatchChannelMemberships:Tt,Errors:Tt});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_BatchCreateChannelMembershipCommand")}(),cp=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Fs(P,T);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield wl(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_BatchCreateChannelMembershipCommandError")}(),up=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return dp(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{CallbackId:ti,ChannelArn:ti});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_ChannelFlowCallbackCommand")}(),dp=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Ia(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_ChannelFlowCallbackCommandError")}(),fp=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==201&&E.statusCode>=300)return hp(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelArn:ti});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_CreateChannelCommand")}(),hp=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Ia(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield wl(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_CreateChannelCommandError")}(),pp=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==201&&E.statusCode>=300)return mp(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelArn:ti,Member:Tt});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_CreateChannelBanCommand")}(),mp=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Ia(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield wl(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_CreateChannelBanCommandError")}(),gp=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==201&&E.statusCode>=300)return vp(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelFlowArn:ti});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_CreateChannelFlowCommand")}(),vp=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Ia(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield wl(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_CreateChannelFlowCommandError")}(),yp=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==201&&E.statusCode>=300)return Sp(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelArn:ti,Member:Tt,SubChannelId:ti});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_CreateChannelMembershipCommand")}(),Sp=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Ia(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Fs(P,T);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield wl(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_CreateChannelMembershipCommandError")}(),Ep=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==201&&E.statusCode>=300)return bp(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelArn:ti,ChannelModerator:Tt});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_CreateChannelModeratorCommand")}(),bp=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Ia(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield wl(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_CreateChannelModeratorCommandError")}(),_p=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==204&&E.statusCode>=300)return Tp(E,T);const P=Bn({$metadata:sr(E)});return yield Es(E.body,T),P});return n(function(T,P){return A.apply(this,arguments)},"de_DeleteChannelCommand")}(),Tp=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Ia(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_DeleteChannelCommandError")}(),Cp=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==204&&E.statusCode>=300)return Ip(E,T);const P=Bn({$metadata:sr(E)});return yield Es(E.body,T),P});return n(function(T,P){return A.apply(this,arguments)},"de_DeleteChannelBanCommand")}(),Ip=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_DeleteChannelBanCommandError")}(),Op=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==204&&E.statusCode>=300)return wp(E,T);const P=Bn({$metadata:sr(E)});return yield Es(E.body,T),P});return n(function(T,P){return A.apply(this,arguments)},"de_DeleteChannelFlowCommand")}(),wp=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Ia(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_DeleteChannelFlowCommandError")}(),Ap=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==204&&E.statusCode>=300)return Dp(E,T);const P=Bn({$metadata:sr(E)});return yield Es(E.body,T),P});return n(function(T,P){return A.apply(this,arguments)},"de_DeleteChannelMembershipCommand")}(),Dp=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Ia(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_DeleteChannelMembershipCommandError")}(),Rp=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==204&&E.statusCode>=300)return Mp(E,T);const P=Bn({$metadata:sr(E)});return yield Es(E.body,T),P});return n(function(T,P){return A.apply(this,arguments)},"de_DeleteChannelMessageCommand")}(),Mp=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_DeleteChannelMessageCommandError")}(),Pp=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==204&&E.statusCode>=300)return kp(E,T);const P=Bn({$metadata:sr(E)});return yield Es(E.body,T),P});return n(function(T,P){return A.apply(this,arguments)},"de_DeleteChannelModeratorCommand")}(),kp=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_DeleteChannelModeratorCommandError")}(),Np=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==204&&E.statusCode>=300)return Lp(E,T);const P=Bn({$metadata:sr(E)});return yield Es(E.body,T),P});return n(function(T,P){return A.apply(this,arguments)},"de_DeleteMessagingStreamingConfigurationsCommand")}(),Lp=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_DeleteMessagingStreamingConfigurationsCommandError")}(),xp=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return Fp(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{Channel:ee=>eg(ee,T)});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_DescribeChannelCommand")}(),Fp=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_DescribeChannelCommandError")}(),Bp=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return Up(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelBan:ee=>tg(ee,T)});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_DescribeChannelBanCommand")}(),Up=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Fs(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_DescribeChannelBanCommandError")}(),Vp=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return Hp(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelFlow:ee=>ng(ee,T)});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_DescribeChannelFlowCommand")}(),Hp=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_DescribeChannelFlowCommandError")}(),jp=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return Wp(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelMembership:ee=>ig(ee,T)});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_DescribeChannelMembershipCommand")}(),Wp=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Fs(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_DescribeChannelMembershipCommandError")}(),zp=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return Gp(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelMembership:ee=>bf(ee,T)});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_DescribeChannelMembershipForAppInstanceUserCommand")}(),Gp=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_DescribeChannelMembershipForAppInstanceUserCommandError")}(),$p=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return Kp(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{Channel:ee=>Tf(ee,T)});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_DescribeChannelModeratedByAppInstanceUserCommand")}(),Kp=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_DescribeChannelModeratedByAppInstanceUserCommandError")}(),Jp=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return Yp(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelModerator:ee=>lg(ee,T)});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_DescribeChannelModeratorCommand")}(),Yp=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Fs(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_DescribeChannelModeratorCommandError")}(),Xp=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==204&&E.statusCode>=300)return Qp(E,T);const P=Bn({$metadata:sr(E)});return yield Es(E.body,T),P});return n(function(T,P){return A.apply(this,arguments)},"de_DisassociateChannelFlowCommand")}(),Qp=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Ia(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Fs(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_DisassociateChannelFlowCommandError")}(),Zp=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return qp(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelArn:ti,Member:Tt,Preferences:Tt});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_GetChannelMembershipPreferencesCommand")}(),qp=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_GetChannelMembershipPreferencesCommandError")}(),em=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return tm(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelMessage:ee=>_f(ee,T)});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_GetChannelMessageCommand")}(),tm=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Fs(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_GetChannelMessageCommandError")}(),nm=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return im(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{Status:Tt});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_GetChannelMessageStatusCommand")}(),im=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_GetChannelMessageStatusCommandError")}(),rm=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return om(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{Endpoint:Tt});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_GetMessagingSessionEndpointCommand")}(),om=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_GetMessagingSessionEndpointCommandError")}(),am=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return sm(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{StreamingConfigurations:Tt});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_GetMessagingStreamingConfigurationsCommand")}(),sm=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Fs(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_GetMessagingStreamingConfigurationsCommandError")}(),lm=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return cm(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelArn:ti,ChannelBans:Tt,NextToken:ti});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_ListChannelBansCommand")}(),cm=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_ListChannelBansCommandError")}(),um=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return dm(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelFlows:Tt,NextToken:ti});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_ListChannelFlowsCommand")}(),dm=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_ListChannelFlowsCommandError")}(),fm=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return hm(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelArn:ti,ChannelMemberships:Tt,NextToken:ti});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_ListChannelMembershipsCommand")}(),hm=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_ListChannelMembershipsCommandError")}(),pm=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return mm(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelMemberships:ee=>rg(ee,T),NextToken:ti});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_ListChannelMembershipsForAppInstanceUserCommand")}(),mm=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_ListChannelMembershipsForAppInstanceUserCommandError")}(),gm=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return vm(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelArn:ti,ChannelMessages:ee=>ag(ee,T),NextToken:ti,SubChannelId:ti});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_ListChannelMessagesCommand")}(),vm=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_ListChannelMessagesCommandError")}(),ym=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return Sm(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelArn:ti,ChannelModerators:Tt,NextToken:ti});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_ListChannelModeratorsCommand")}(),Sm=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_ListChannelModeratorsCommandError")}(),Em=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return bm(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{Channels:ee=>Cf(ee,T),NextToken:ti});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_ListChannelsCommand")}(),bm=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_ListChannelsCommandError")}(),_m=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return Tm(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{Channels:Tt,NextToken:ti});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_ListChannelsAssociatedWithChannelFlowCommand")}(),Tm=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_ListChannelsAssociatedWithChannelFlowCommandError")}(),Cm=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return Im(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{Channels:ee=>sg(ee,T),NextToken:ti});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_ListChannelsModeratedByAppInstanceUserCommand")}(),Im=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_ListChannelsModeratedByAppInstanceUserCommandError")}(),Om=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return wm(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelArn:ti,NextToken:ti,SubChannels:Tt});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_ListSubChannelsCommand")}(),wm=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_ListSubChannelsCommandError")}(),Am=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return Dm(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{Tags:Tt});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_ListTagsForResourceCommand")}(),Dm=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_ListTagsForResourceCommandError")}(),Rm=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return Mm(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelArn:ti,ExpirationSettings:Tt});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_PutChannelExpirationSettingsCommand")}(),Mm=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Ia(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_PutChannelExpirationSettingsCommandError")}(),Pm=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return km(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelArn:ti,Member:Tt,Preferences:Tt});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_PutChannelMembershipPreferencesCommand")}(),km=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Ia(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_PutChannelMembershipPreferencesCommandError")}(),Nm=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return Lm(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{StreamingConfigurations:Tt});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_PutMessagingStreamingConfigurationsCommand")}(),Lm=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Ia(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Fs(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_PutMessagingStreamingConfigurationsCommandError")}(),xm=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return Fm(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelArn:ti,MessageId:ti,SubChannelId:ti});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_RedactChannelMessageCommand")}(),Fm=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Ia(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_RedactChannelMessageCommandError")}(),Bm=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return Um(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{Channels:ee=>Cf(ee,T),NextToken:ti});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_SearchChannelsCommand")}(),Um=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_SearchChannelsCommandError")}(),Vm=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==201&&E.statusCode>=300)return Hm(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelArn:ti,MessageId:ti,Status:Tt,SubChannelId:ti});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_SendChannelMessageCommand")}(),Hm=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Ia(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_SendChannelMessageCommandError")}(),jm=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==204&&E.statusCode>=300)return Wm(E,T);const P=Bn({$metadata:sr(E)});return yield Es(E.body,T),P});return n(function(T,P){return A.apply(this,arguments)},"de_TagResourceCommand")}(),Wm=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield wl(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_TagResourceCommandError")}(),zm=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==204&&E.statusCode>=300)return Gm(E,T);const P=Bn({$metadata:sr(E)});return yield Es(E.body,T),P});return n(function(T,P){return A.apply(this,arguments)},"de_UntagResourceCommand")}(),Gm=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_UntagResourceCommandError")}(),$m=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return Km(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelArn:ti});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_UpdateChannelCommand")}(),Km=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Ia(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_UpdateChannelCommandError")}(),Jm=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return Ym(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelFlowArn:ti});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_UpdateChannelFlowCommand")}(),Ym=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Ia(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_UpdateChannelFlowCommandError")}(),Xm=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return Qm(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelArn:ti,MessageId:ti,Status:Tt,SubChannelId:ti});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_UpdateChannelMessageCommand")}(),Qm=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Ia(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_UpdateChannelMessageCommandError")}(),Kl=function(){var A=(0,h.coroutine)(function*(E,T){if(E.statusCode!==200&&E.statusCode>=300)return Zm(E,T);const P=Bn({$metadata:sr(E)}),z=mi(rr(yield ro(E.body,T)),"body"),G=F(z,{ChannelArn:ti});return Object.assign(P,G),P});return n(function(T,P){return A.apply(this,arguments)},"de_UpdateChannelReadMarkerCommand")}(),Zm=function(){var A=(0,h.coroutine)(function*(E,T){const P={...E,body:yield xr(E.body,T)},z=Fr(E,P.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield Vr(P,T);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Ia(P,T);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Mr(P,T);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Pr(P,T);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield kr(P,T);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield Nr(P,T);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Lr(P,T);default:const G=P.body;return Rr({output:E,parsedBody:G,errorCode:z})}});return n(function(T,P){return A.apply(this,arguments)},"de_UpdateChannelReadMarkerCommandError")}(),Rr=ou(es),Vr=function(){var A=(0,h.coroutine)(function*(E,T){const P=Bn({}),z=E.body,G=F(z,{Code:ti,Message:ti});Object.assign(P,G);const ee=new dc({$metadata:sr(E),...P});return Ss(ee,E.body)});return n(function(T,P){return A.apply(this,arguments)},"de_BadRequestExceptionRes")}(),Ia=function(){var A=(0,h.coroutine)(function*(E,T){const P=Bn({}),z=E.body,G=F(z,{Code:ti,Message:ti});Object.assign(P,G);const ee=new fc({$metadata:sr(E),...P});return Ss(ee,E.body)});return n(function(T,P){return A.apply(this,arguments)},"de_ConflictExceptionRes")}(),Mr=function(){var A=(0,h.coroutine)(function*(E,T){const P=Bn({}),z=E.body,G=F(z,{Code:ti,Message:ti});Object.assign(P,G);const ee=new hc({$metadata:sr(E),...P});return Ss(ee,E.body)});return n(function(T,P){return A.apply(this,arguments)},"de_ForbiddenExceptionRes")}(),Fs=function(){var A=(0,h.coroutine)(function*(E,T){const P=Bn({}),z=E.body,G=F(z,{Code:ti,Message:ti});Object.assign(P,G);const ee=new pc({$metadata:sr(E),...P});return Ss(ee,E.body)});return n(function(T,P){return A.apply(this,arguments)},"de_NotFoundExceptionRes")}(),wl=function(){var A=(0,h.coroutine)(function*(E,T){const P=Bn({}),z=E.body,G=F(z,{Code:ti,Message:ti});Object.assign(P,G);const ee=new Sc({$metadata:sr(E),...P});return Ss(ee,E.body)});return n(function(T,P){return A.apply(this,arguments)},"de_ResourceLimitExceededExceptionRes")}(),Pr=function(){var A=(0,h.coroutine)(function*(E,T){const P=Bn({}),z=E.body,G=F(z,{Code:ti,Message:ti});Object.assign(P,G);const ee=new mc({$metadata:sr(E),...P});return Ss(ee,E.body)});return n(function(T,P){return A.apply(this,arguments)},"de_ServiceFailureExceptionRes")}(),kr=function(){var A=(0,h.coroutine)(function*(E,T){const P=Bn({}),z=E.body,G=F(z,{Code:ti,Message:ti});Object.assign(P,G);const ee=new gc({$metadata:sr(E),...P});return Ss(ee,E.body)});return n(function(T,P){return A.apply(this,arguments)},"de_ServiceUnavailableExceptionRes")}(),Nr=function(){var A=(0,h.coroutine)(function*(E,T){const P=Bn({}),z=E.body,G=F(z,{Code:ti,Message:ti});Object.assign(P,G);const ee=new vc({$metadata:sr(E),...P});return Ss(ee,E.body)});return n(function(T,P){return A.apply(this,arguments)},"de_ThrottledClientExceptionRes")}(),Lr=function(){var A=(0,h.coroutine)(function*(E,T){const P=Bn({}),z=E.body,G=F(z,{Code:ti,Message:ti});Object.assign(P,G);const ee=new yc({$metadata:sr(E),...P});return Ss(ee,E.body)});return n(function(T,P){return A.apply(this,arguments)},"de_UnauthorizedClientExceptionRes")}(),qm=n((A,E)=>F(A,{ReadMarkerTimestamp:T=>mi(wa(Tn(T))),SubChannelId:ti,Type:ti}),"de_AppInstanceUserMembershipSummary"),eg=n((A,E)=>F(A,{ChannelArn:ti,ChannelFlowArn:ti,CreatedBy:Tt,CreatedTimestamp:T=>mi(wa(Tn(T))),ElasticChannelConfiguration:Tt,ExpirationSettings:Tt,LastMessageTimestamp:T=>mi(wa(Tn(T))),LastUpdatedTimestamp:T=>mi(wa(Tn(T))),Metadata:ti,Mode:ti,Name:ti,Privacy:ti}),"de_Channel"),tg=n((A,E)=>F(A,{ChannelArn:ti,CreatedBy:Tt,CreatedTimestamp:T=>mi(wa(Tn(T))),Member:Tt}),"de_ChannelBan"),ng=n((A,E)=>F(A,{ChannelFlowArn:ti,CreatedTimestamp:T=>mi(wa(Tn(T))),LastUpdatedTimestamp:T=>mi(wa(Tn(T))),Name:ti,Processors:Tt}),"de_ChannelFlow"),ig=n((A,E)=>F(A,{ChannelArn:ti,CreatedTimestamp:T=>mi(wa(Tn(T))),InvitedBy:Tt,LastUpdatedTimestamp:T=>mi(wa(Tn(T))),Member:Tt,SubChannelId:ti,Type:ti}),"de_ChannelMembership"),bf=n((A,E)=>F(A,{AppInstanceUserMembershipSummary:T=>qm(T,E),ChannelSummary:T=>zu(T,E)}),"de_ChannelMembershipForAppInstanceUserSummary"),rg=n((A,E)=>(A||[]).filter(P=>P!=null).map(P=>bf(P,E)),"de_ChannelMembershipForAppInstanceUserSummaryList"),_f=n((A,E)=>F(A,{ChannelArn:ti,Content:ti,ContentType:ti,CreatedTimestamp:T=>mi(wa(Tn(T))),LastEditedTimestamp:T=>mi(wa(Tn(T))),LastUpdatedTimestamp:T=>mi(wa(Tn(T))),MessageAttributes:Tt,MessageId:ti,Metadata:ti,Persistence:ti,Redacted:gn,Sender:Tt,Status:Tt,SubChannelId:ti,Type:ti}),"de_ChannelMessage"),og=n((A,E)=>F(A,{Content:ti,ContentType:ti,CreatedTimestamp:T=>mi(wa(Tn(T))),LastEditedTimestamp:T=>mi(wa(Tn(T))),LastUpdatedTimestamp:T=>mi(wa(Tn(T))),MessageAttributes:Tt,MessageId:ti,Metadata:ti,Redacted:gn,Sender:Tt,Status:Tt,Type:ti}),"de_ChannelMessageSummary"),ag=n((A,E)=>(A||[]).filter(P=>P!=null).map(P=>og(P,E)),"de_ChannelMessageSummaryList"),Tf=n((A,E)=>F(A,{ChannelSummary:T=>zu(T,E)}),"de_ChannelModeratedByAppInstanceUserSummary"),sg=n((A,E)=>(A||[]).filter(P=>P!=null).map(P=>Tf(P,E)),"de_ChannelModeratedByAppInstanceUserSummaryList"),lg=n((A,E)=>F(A,{ChannelArn:ti,CreatedBy:Tt,CreatedTimestamp:T=>mi(wa(Tn(T))),Moderator:Tt}),"de_ChannelModerator"),zu=n((A,E)=>F(A,{ChannelArn:ti,LastMessageTimestamp:T=>mi(wa(Tn(T))),Metadata:ti,Mode:ti,Name:ti,Privacy:ti}),"de_ChannelSummary"),Cf=n((A,E)=>(A||[]).filter(P=>P!=null).map(P=>zu(P,E)),"de_ChannelSummaryList");var Gu,$u;const sr=n(A=>({httpStatusCode:A.statusCode,requestId:($u=(Gu=A.headers["x-amzn-requestid"])!==null&&Gu!==void 0?Gu:A.headers["x-amzn-request-id"])!==null&&$u!==void 0?$u:A.headers["x-amz-request-id"],extendedRequestId:A.headers["x-amz-id-2"],cfId:A.headers["x-amz-cf-id"]}),"Aws_restJson1_deserializeMetadata"),Es=n(function(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Uint8Array,E=arguments.length>1?arguments[1]:void 0;return A instanceof Uint8Array?Promise.resolve(A):E.streamCollector(A)||Promise.resolve(new Uint8Array)},"collectBody"),cg=n((A,E)=>Es(A,E).then(T=>E.utf8Encoder(T)),"collectBodyString"),po=n(A=>A!=null&&A!==""&&(!Object.getOwnPropertyNames(A).includes("length")||A.length!=0)&&(!Object.getOwnPropertyNames(A).includes("size")||A.size!=0),"isSerializableHeaderValue"),ro=n((A,E)=>cg(A,E).then(T=>T.length?JSON.parse(T):{}),"parseBody"),xr=function(){var A=(0,h.coroutine)(function*(E,T){const P=yield ro(E,T);var z;return P.message=(z=P.message)!==null&&z!==void 0?z:P.Message,P});return n(function(T,P){return A.apply(this,arguments)},"parseErrorBody")}(),Fr=n((A,E)=>{const T=n((G,ee)=>Object.keys(G).find(Be=>Be.toLowerCase()===ee.toLowerCase()),"findKey"),P=n(G=>{let ee=G;return typeof ee=="number"&&(ee=ee.toString()),ee.indexOf(",")>=0&&(ee=ee.split(",")[0]),ee.indexOf(":")>=0&&(ee=ee.split(":")[0]),ee.indexOf("#")>=0&&(ee=ee.split("#")[1]),ee},"sanitizeErrorCode"),z=T(A.headers,"x-amzn-errortype");if(z!==void 0)return P(A.headers[z]);if(E.code!==void 0)return P(E.code);if(E.__type!==void 0)return P(E.__type)},"loadRestJsonErrorCode");class Ic extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Ic.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"AssociateChannelFlowCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return hh(E,T)}deserialize(E,T){return ap(E,T)}constructor(E){super(),this.input=E}}n(Ic,"AssociateChannelFlowCommand");class Oc extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Oc.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"BatchCreateChannelMembershipCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:hd},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return ph(E,T)}deserialize(E,T){return lp(E,T)}constructor(E){super(),this.input=E}}n(Oc,"BatchCreateChannelMembershipCommand");class wc extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,wc.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ChannelFlowCallbackCommand",inputFilterSensitiveLog:Ed,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return mh(E,T)}deserialize(E,T){return up(E,T)}constructor(E){super(),this.input=E}}n(wc,"ChannelFlowCallbackCommand");class Ac extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Ac.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelBanCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Rd},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return vh(E,T)}deserialize(E,T){return pp(E,T)}constructor(E){super(),this.input=E}}n(Ac,"CreateChannelBanCommand");class Dc extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Dc.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelCommand",inputFilterSensitiveLog:Dd,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return gh(E,T)}deserialize(E,T){return fp(E,T)}constructor(E){super(),this.input=E}}n(Dc,"CreateChannelCommand");class Rc extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Rc.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelFlowCommand",inputFilterSensitiveLog:Md,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return yh(E,T)}deserialize(E,T){return gp(E,T)}constructor(E){super(),this.input=E}}n(Rc,"CreateChannelFlowCommand");class Mc extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Mc.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelMembershipCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Pd},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Sh(E,T)}deserialize(E,T){return yp(E,T)}constructor(E){super(),this.input=E}}n(Mc,"CreateChannelMembershipCommand");class Pc extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Pc.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelModeratorCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:kd},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Eh(E,T)}deserialize(E,T){return Ep(E,T)}constructor(E){super(),this.input=E}}n(Pc,"CreateChannelModeratorCommand");class kc extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,kc.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelBanCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return _h(E,T)}deserialize(E,T){return Cp(E,T)}constructor(E){super(),this.input=E}}n(kc,"DeleteChannelBanCommand");class Nc extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Nc.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return bh(E,T)}deserialize(E,T){return _p(E,T)}constructor(E){super(),this.input=E}}n(Nc,"DeleteChannelCommand");class Lc extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Lc.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelFlowCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Th(E,T)}deserialize(E,T){return Op(E,T)}constructor(E){super(),this.input=E}}n(Lc,"DeleteChannelFlowCommand");class Z extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Z.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelMembershipCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Ch(E,T)}deserialize(E,T){return Ap(E,T)}constructor(E){super(),this.input=E}}n(Z,"DeleteChannelMembershipCommand");class X extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,X.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelMessageCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Ih(E,T)}deserialize(E,T){return Rp(E,T)}constructor(E){super(),this.input=E}}n(X,"DeleteChannelMessageCommand");class xc extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,xc.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelModeratorCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Oh(E,T)}deserialize(E,T){return Pp(E,T)}constructor(E){super(),this.input=E}}n(xc,"DeleteChannelModeratorCommand");class Fc extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Fc.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DeleteMessagingStreamingConfigurationsCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return wh(E,T)}deserialize(E,T){return Np(E,T)}constructor(E){super(),this.input=E}}n(Fc,"DeleteMessagingStreamingConfigurationsCommand");class Bc extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Bc.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelBanCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Ld},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Dh(E,T)}deserialize(E,T){return Bp(E,T)}constructor(E){super(),this.input=E}}n(Bc,"DescribeChannelBanCommand");class Uc extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Uc.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Nd},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Ah(E,T)}deserialize(E,T){return xp(E,T)}constructor(E){super(),this.input=E}}n(Uc,"DescribeChannelCommand");class Vc extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Vc.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelFlowCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:xd},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Rh(E,T)}deserialize(E,T){return Vp(E,T)}constructor(E){super(),this.input=E}}n(Vc,"DescribeChannelFlowCommand");class Hc extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Hc.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelMembershipCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Fd},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Mh(E,T)}deserialize(E,T){return jp(E,T)}constructor(E){super(),this.input=E}}n(Hc,"DescribeChannelMembershipCommand");class jc extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,jc.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelMembershipForAppInstanceUserCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Bd},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Ph(E,T)}deserialize(E,T){return zp(E,T)}constructor(E){super(),this.input=E}}n(jc,"DescribeChannelMembershipForAppInstanceUserCommand");class Wc extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Wc.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelModeratedByAppInstanceUserCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Ud},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return kh(E,T)}deserialize(E,T){return $p(E,T)}constructor(E){super(),this.input=E}}n(Wc,"DescribeChannelModeratedByAppInstanceUserCommand");class zc extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,zc.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelModeratorCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Vd},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Nh(E,T)}deserialize(E,T){return Jp(E,T)}constructor(E){super(),this.input=E}}n(zc,"DescribeChannelModeratorCommand");class Gc extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Gc.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DisassociateChannelFlowCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Lh(E,T)}deserialize(E,T){return Xp(E,T)}constructor(E){super(),this.input=E}}n(Gc,"DisassociateChannelFlowCommand");class $c extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,$c.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"GetChannelMembershipPreferencesCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Hd},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return xh(E,T)}deserialize(E,T){return Zp(E,T)}constructor(E){super(),this.input=E}}n($c,"GetChannelMembershipPreferencesCommand");class Gt extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Gt.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"GetChannelMessageCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:jd},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Fh(E,T)}deserialize(E,T){return em(E,T)}constructor(E){super(),this.input=E}}n(Gt,"GetChannelMessageCommand");class We extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,We.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"GetChannelMessageStatusCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Bh(E,T)}deserialize(E,T){return nm(E,T)}constructor(E){super(),this.input=E}}n(We,"GetChannelMessageStatusCommand");class _e extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,_e.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"GetMessagingSessionEndpointCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Wu(E,T)}deserialize(E,T){return rm(E,T)}constructor(E){super(),this.input=E}}n(_e,"GetMessagingSessionEndpointCommand");class Xe extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Xe.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"GetMessagingStreamingConfigurationsCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Cc(E,T)}deserialize(E,T){return am(E,T)}constructor(E){super(),this.input=E}}n(Xe,"GetMessagingStreamingConfigurationsCommand");class Qe extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Qe.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelBansCommand",inputFilterSensitiveLog:Wd,outputFilterSensitiveLog:zd},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Uh(E,T)}deserialize(E,T){return lm(E,T)}constructor(E){super(),this.input=E}}n(Qe,"ListChannelBansCommand");class Ve extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Ve.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelFlowsCommand",inputFilterSensitiveLog:Gd,outputFilterSensitiveLog:$d},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Vh(E,T)}deserialize(E,T){return um(E,T)}constructor(E){super(),this.input=E}}n(Ve,"ListChannelFlowsCommand");class Re extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Re.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelMembershipsCommand",inputFilterSensitiveLog:Kd,outputFilterSensitiveLog:Jd},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Hh(E,T)}deserialize(E,T){return fm(E,T)}constructor(E){super(),this.input=E}}n(Re,"ListChannelMembershipsCommand");class Me extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Me.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelMembershipsForAppInstanceUserCommand",inputFilterSensitiveLog:cu,outputFilterSensitiveLog:Yd},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return jh(E,T)}deserialize(E,T){return pm(E,T)}constructor(E){super(),this.input=E}}n(Me,"ListChannelMembershipsForAppInstanceUserCommand");class ne extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,ne.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelMessagesCommand",inputFilterSensitiveLog:Xd,outputFilterSensitiveLog:Qd},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Ol(E,T)}deserialize(E,T){return gm(E,T)}constructor(E){super(),this.input=E}}n(ne,"ListChannelMessagesCommand");class ce extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,ce.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelModeratorsCommand",inputFilterSensitiveLog:Zd,outputFilterSensitiveLog:qd},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Ef(E,T)}deserialize(E,T){return ym(E,T)}constructor(E){super(),this.input=E}}n(ce,"ListChannelModeratorsCommand");class se extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,se.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelsAssociatedWithChannelFlowCommand",inputFilterSensitiveLog:nf,outputFilterSensitiveLog:rf},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return zh(E,T)}deserialize(E,T){return _m(E,T)}constructor(E){super(),this.input=E}}n(se,"ListChannelsAssociatedWithChannelFlowCommand");class te extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,te.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelsCommand",inputFilterSensitiveLog:ef,outputFilterSensitiveLog:tf},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Wh(E,T)}deserialize(E,T){return Em(E,T)}constructor(E){super(),this.input=E}}n(te,"ListChannelsCommand");class Se extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Se.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelsModeratedByAppInstanceUserCommand",inputFilterSensitiveLog:of,outputFilterSensitiveLog:af},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Gh(E,T)}deserialize(E,T){return Cm(E,T)}constructor(E){super(),this.input=E}}n(Se,"ListChannelsModeratedByAppInstanceUserCommand");class de extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,de.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ListSubChannelsCommand",inputFilterSensitiveLog:sf,outputFilterSensitiveLog:lf},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return $h(E,T)}deserialize(E,T){return Om(E,T)}constructor(E){super(),this.input=E}}n(de,"ListSubChannelsCommand");class ue extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,ue.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ListTagsForResourceCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:cf},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Kh(E,T)}deserialize(E,T){return Am(E,T)}constructor(E){super(),this.input=E}}n(ue,"ListTagsForResourceCommand");class ae extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,ae.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"PutChannelExpirationSettingsCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Jh(E,T)}deserialize(E,T){return Rm(E,T)}constructor(E){super(),this.input=E}}n(ae,"PutChannelExpirationSettingsCommand");class q extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,q.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"PutChannelMembershipPreferencesCommand",inputFilterSensitiveLog:uf,outputFilterSensitiveLog:df},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Yh(E,T)}deserialize(E,T){return Pm(E,T)}constructor(E){super(),this.input=E}}n(q,"PutChannelMembershipPreferencesCommand");class ve extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,ve.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"PutMessagingStreamingConfigurationsCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Xh(E,T)}deserialize(E,T){return Nm(E,T)}constructor(E){super(),this.input=E}}n(ve,"PutMessagingStreamingConfigurationsCommand");class le extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,le.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"RedactChannelMessageCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Qh(E,T)}deserialize(E,T){return xm(E,T)}constructor(E){super(),this.input=E}}n(le,"RedactChannelMessageCommand");class Ce extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Ce.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"SearchChannelsCommand",inputFilterSensitiveLog:ff,outputFilterSensitiveLog:hf},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return Zh(E,T)}deserialize(E,T){return Bm(E,T)}constructor(E){super(),this.input=E}}n(Ce,"SearchChannelsCommand");class st extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,st.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"SendChannelMessageCommand",inputFilterSensitiveLog:pf,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return qh(E,T)}deserialize(E,T){return Vm(E,T)}constructor(E){super(),this.input=E}}n(st,"SendChannelMessageCommand");class Ge extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Ge.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"TagResourceCommand",inputFilterSensitiveLog:mf,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return ep(E,T)}deserialize(E,T){return jm(E,T)}constructor(E){super(),this.input=E}}n(Ge,"TagResourceCommand");class Je extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Je.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"UntagResourceCommand",inputFilterSensitiveLog:gf,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return tp(E,T)}deserialize(E,T){return zm(E,T)}constructor(E){super(),this.input=E}}n(Je,"UntagResourceCommand");class pt extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,pt.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"UpdateChannelCommand",inputFilterSensitiveLog:vf,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return np(E,T)}deserialize(E,T){return $m(E,T)}constructor(E){super(),this.input=E}}n(pt,"UpdateChannelCommand");class He extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,He.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"UpdateChannelFlowCommand",inputFilterSensitiveLog:yf,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return ip(E,T)}deserialize(E,T){return Jm(E,T)}constructor(E){super(),this.input=E}}n(He,"UpdateChannelFlowCommand");class ke extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,ke.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"UpdateChannelMessageCommand",inputFilterSensitiveLog:Sf,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return rp(E,T)}deserialize(E,T){return Xm(E,T)}constructor(E){super(),this.input=E}}n(ke,"UpdateChannelMessageCommand");class Ue extends hr{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(E,T,P){this.middlewareStack.use(dt(T,this.serialize,this.deserialize)),this.middlewareStack.use(gt(T,Ue.getEndpointParameterInstructions()));const z=E.concat(this.middlewareStack),{logger:G}=T,Te={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"UpdateChannelReadMarkerCommand",inputFilterSensitiveLog:Le=>Le,outputFilterSensitiveLog:Le=>Le},{requestHandler:qe}=T;return z.resolve(Le=>qe.handle(Le.request,P||{}),Te)}serialize(E,T){return op(E,T)}deserialize(E,T){return Kl(E,T)}constructor(E){super(),this.input=E}}n(Ue,"UpdateChannelReadMarkerCommand");const rt={AssociateChannelFlowCommand:Ic,BatchCreateChannelMembershipCommand:Oc,ChannelFlowCallbackCommand:wc,CreateChannelCommand:Dc,CreateChannelBanCommand:Ac,CreateChannelFlowCommand:Rc,CreateChannelMembershipCommand:Mc,CreateChannelModeratorCommand:Pc,DeleteChannelCommand:Nc,DeleteChannelBanCommand:kc,DeleteChannelFlowCommand:Lc,DeleteChannelMembershipCommand:Z,DeleteChannelMessageCommand:X,DeleteChannelModeratorCommand:xc,DeleteMessagingStreamingConfigurationsCommand:Fc,DescribeChannelCommand:Uc,DescribeChannelBanCommand:Bc,DescribeChannelFlowCommand:Vc,DescribeChannelMembershipCommand:Hc,DescribeChannelMembershipForAppInstanceUserCommand:jc,DescribeChannelModeratedByAppInstanceUserCommand:Wc,DescribeChannelModeratorCommand:zc,DisassociateChannelFlowCommand:Gc,GetChannelMembershipPreferencesCommand:$c,GetChannelMessageCommand:Gt,GetChannelMessageStatusCommand:We,GetMessagingSessionEndpointCommand:_e,GetMessagingStreamingConfigurationsCommand:Xe,ListChannelBansCommand:Qe,ListChannelFlowsCommand:Ve,ListChannelMembershipsCommand:Re,ListChannelMembershipsForAppInstanceUserCommand:Me,ListChannelMessagesCommand:ne,ListChannelModeratorsCommand:ce,ListChannelsCommand:te,ListChannelsAssociatedWithChannelFlowCommand:se,ListChannelsModeratedByAppInstanceUserCommand:Se,ListSubChannelsCommand:de,ListTagsForResourceCommand:ue,PutChannelExpirationSettingsCommand:ae,PutChannelMembershipPreferencesCommand:q,PutMessagingStreamingConfigurationsCommand:ve,RedactChannelMessageCommand:le,SearchChannelsCommand:Ce,SendChannelMessageCommand:st,TagResourceCommand:Ge,UntagResourceCommand:Je,UpdateChannelCommand:pt,UpdateChannelFlowCommand:He,UpdateChannelMessageCommand:ke,UpdateChannelReadMarkerCommand:Ue};class yt extends qa{}n(yt,"ChimeSDKMessaging"),ll(rt,yt);const Pt=function(){var A=(0,h.coroutine)(function*(E,T){for(var P=arguments.length,z=new Array(P>2?P-2:0),G=2;G<P;G++)z[G-2]=arguments[G];return yield E.send(new Qe(T),...z)});return n(function(T,P){return A.apply(this,arguments)},"makePagedClientRequest")}();function qt(A,E){return on.apply(this,arguments)}n(qt,"paginateListChannelBans");function on(){return on=_wrapAsyncGenerator(function*(A,E){for(var T=arguments.length,P=new Array(T>2?T-2:0),z=2;z<T;z++)P[z-2]=arguments[z];let G=A.startingToken||void 0,ee=!0,Be;for(;ee;){if(E.NextToken=G,E.MaxResults=A.pageSize,A.client instanceof qa)Be=yield _awaitAsyncGenerator(Pt(A.client,E,...P));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield Be;const Te=G;G=Be.NextToken,ee=!!(G&&(!A.stopOnSameToken||G!==Te))}}),on.apply(this,arguments)}n(on,"_paginateListChannelBans");const Un=function(){var A=(0,h.coroutine)(function*(E,T){for(var P=arguments.length,z=new Array(P>2?P-2:0),G=2;G<P;G++)z[G-2]=arguments[G];return yield E.send(new Ve(T),...z)});return n(function(T,P){return A.apply(this,arguments)},"makePagedClientRequest")}();function zt(A,E){return xt.apply(this,arguments)}n(zt,"paginateListChannelFlows");function xt(){return xt=_wrapAsyncGenerator(function*(A,E){for(var T=arguments.length,P=new Array(T>2?T-2:0),z=2;z<T;z++)P[z-2]=arguments[z];let G=A.startingToken||void 0,ee=!0,Be;for(;ee;){if(E.NextToken=G,E.MaxResults=A.pageSize,A.client instanceof qa)Be=yield _awaitAsyncGenerator(Un(A.client,E,...P));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield Be;const Te=G;G=Be.NextToken,ee=!!(G&&(!A.stopOnSameToken||G!==Te))}}),xt.apply(this,arguments)}n(xt,"_paginateListChannelFlows");const at=function(){var A=(0,h.coroutine)(function*(E,T){for(var P=arguments.length,z=new Array(P>2?P-2:0),G=2;G<P;G++)z[G-2]=arguments[G];return yield E.send(new Me(T),...z)});return n(function(T,P){return A.apply(this,arguments)},"makePagedClientRequest")}();function wt(A,E){return Nt.apply(this,arguments)}n(wt,"paginateListChannelMembershipsForAppInstanceUser");function Nt(){return Nt=_wrapAsyncGenerator(function*(A,E){for(var T=arguments.length,P=new Array(T>2?T-2:0),z=2;z<T;z++)P[z-2]=arguments[z];let G=A.startingToken||void 0,ee=!0,Be;for(;ee;){if(E.NextToken=G,E.MaxResults=A.pageSize,A.client instanceof qa)Be=yield _awaitAsyncGenerator(at(A.client,E,...P));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield Be;const Te=G;G=Be.NextToken,ee=!!(G&&(!A.stopOnSameToken||G!==Te))}}),Nt.apply(this,arguments)}n(Nt,"_paginateListChannelMembershipsForAppInstanceUser");const ln=function(){var A=(0,h.coroutine)(function*(E,T){for(var P=arguments.length,z=new Array(P>2?P-2:0),G=2;G<P;G++)z[G-2]=arguments[G];return yield E.send(new Re(T),...z)});return n(function(T,P){return A.apply(this,arguments)},"makePagedClientRequest")}();function an(A,E){return bt.apply(this,arguments)}n(an,"paginateListChannelMemberships");function bt(){return bt=_wrapAsyncGenerator(function*(A,E){for(var T=arguments.length,P=new Array(T>2?T-2:0),z=2;z<T;z++)P[z-2]=arguments[z];let G=A.startingToken||void 0,ee=!0,Be;for(;ee;){if(E.NextToken=G,E.MaxResults=A.pageSize,A.client instanceof qa)Be=yield _awaitAsyncGenerator(ln(A.client,E,...P));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield Be;const Te=G;G=Be.NextToken,ee=!!(G&&(!A.stopOnSameToken||G!==Te))}}),bt.apply(this,arguments)}n(bt,"_paginateListChannelMemberships");const Kt=function(){var A=(0,h.coroutine)(function*(E,T){for(var P=arguments.length,z=new Array(P>2?P-2:0),G=2;G<P;G++)z[G-2]=arguments[G];return yield E.send(new ne(T),...z)});return n(function(T,P){return A.apply(this,arguments)},"makePagedClientRequest")}();function _n(A,E){return En.apply(this,arguments)}n(_n,"paginateListChannelMessages");function En(){return En=_wrapAsyncGenerator(function*(A,E){for(var T=arguments.length,P=new Array(T>2?T-2:0),z=2;z<T;z++)P[z-2]=arguments[z];let G=A.startingToken||void 0,ee=!0,Be;for(;ee;){if(E.NextToken=G,E.MaxResults=A.pageSize,A.client instanceof qa)Be=yield _awaitAsyncGenerator(Kt(A.client,E,...P));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield Be;const Te=G;G=Be.NextToken,ee=!!(G&&(!A.stopOnSameToken||G!==Te))}}),En.apply(this,arguments)}n(En,"_paginateListChannelMessages");const qn=function(){var A=(0,h.coroutine)(function*(E,T){for(var P=arguments.length,z=new Array(P>2?P-2:0),G=2;G<P;G++)z[G-2]=arguments[G];return yield E.send(new ce(T),...z)});return n(function(T,P){return A.apply(this,arguments)},"makePagedClientRequest")}();function Xi(A,E){return Hr.apply(this,arguments)}n(Xi,"paginateListChannelModerators");function Hr(){return Hr=_wrapAsyncGenerator(function*(A,E){for(var T=arguments.length,P=new Array(T>2?T-2:0),z=2;z<T;z++)P[z-2]=arguments[z];let G=A.startingToken||void 0,ee=!0,Be;for(;ee;){if(E.NextToken=G,E.MaxResults=A.pageSize,A.client instanceof qa)Be=yield _awaitAsyncGenerator(qn(A.client,E,...P));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield Be;const Te=G;G=Be.NextToken,ee=!!(G&&(!A.stopOnSameToken||G!==Te))}}),Hr.apply(this,arguments)}n(Hr,"_paginateListChannelModerators");const jr=function(){var A=(0,h.coroutine)(function*(E,T){for(var P=arguments.length,z=new Array(P>2?P-2:0),G=2;G<P;G++)z[G-2]=arguments[G];return yield E.send(new se(T),...z)});return n(function(T,P){return A.apply(this,arguments)},"makePagedClientRequest")}();function mo(A,E){return vn.apply(this,arguments)}n(mo,"paginateListChannelsAssociatedWithChannelFlow");function vn(){return vn=_wrapAsyncGenerator(function*(A,E){for(var T=arguments.length,P=new Array(T>2?T-2:0),z=2;z<T;z++)P[z-2]=arguments[z];let G=A.startingToken||void 0,ee=!0,Be;for(;ee;){if(E.NextToken=G,E.MaxResults=A.pageSize,A.client instanceof qa)Be=yield _awaitAsyncGenerator(jr(A.client,E,...P));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield Be;const Te=G;G=Be.NextToken,ee=!!(G&&(!A.stopOnSameToken||G!==Te))}}),vn.apply(this,arguments)}n(vn,"_paginateListChannelsAssociatedWithChannelFlow");const Ra=function(){var A=(0,h.coroutine)(function*(E,T){for(var P=arguments.length,z=new Array(P>2?P-2:0),G=2;G<P;G++)z[G-2]=arguments[G];return yield E.send(new Se(T),...z)});return n(function(T,P){return A.apply(this,arguments)},"makePagedClientRequest")}();function wn(A,E){return xn.apply(this,arguments)}n(wn,"paginateListChannelsModeratedByAppInstanceUser");function xn(){return xn=_wrapAsyncGenerator(function*(A,E){for(var T=arguments.length,P=new Array(T>2?T-2:0),z=2;z<T;z++)P[z-2]=arguments[z];let G=A.startingToken||void 0,ee=!0,Be;for(;ee;){if(E.NextToken=G,E.MaxResults=A.pageSize,A.client instanceof qa)Be=yield _awaitAsyncGenerator(Ra(A.client,E,...P));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield Be;const Te=G;G=Be.NextToken,ee=!!(G&&(!A.stopOnSameToken||G!==Te))}}),xn.apply(this,arguments)}n(xn,"_paginateListChannelsModeratedByAppInstanceUser");const Di=function(){var A=(0,h.coroutine)(function*(E,T){for(var P=arguments.length,z=new Array(P>2?P-2:0),G=2;G<P;G++)z[G-2]=arguments[G];return yield E.send(new te(T),...z)});return n(function(T,P){return A.apply(this,arguments)},"makePagedClientRequest")}();function Hi(A,E){return Ri.apply(this,arguments)}n(Hi,"paginateListChannels");function Ri(){return Ri=_wrapAsyncGenerator(function*(A,E){for(var T=arguments.length,P=new Array(T>2?T-2:0),z=2;z<T;z++)P[z-2]=arguments[z];let G=A.startingToken||void 0,ee=!0,Be;for(;ee;){if(E.NextToken=G,E.MaxResults=A.pageSize,A.client instanceof qa)Be=yield _awaitAsyncGenerator(Di(A.client,E,...P));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield Be;const Te=G;G=Be.NextToken,ee=!!(G&&(!A.stopOnSameToken||G!==Te))}}),Ri.apply(this,arguments)}n(Ri,"_paginateListChannels");const lr=function(){var A=(0,h.coroutine)(function*(E,T){for(var P=arguments.length,z=new Array(P>2?P-2:0),G=2;G<P;G++)z[G-2]=arguments[G];return yield E.send(new de(T),...z)});return n(function(T,P){return A.apply(this,arguments)},"makePagedClientRequest")}();function Tr(A,E){return eo.apply(this,arguments)}n(Tr,"paginateListSubChannels");function eo(){return eo=_wrapAsyncGenerator(function*(A,E){for(var T=arguments.length,P=new Array(T>2?T-2:0),z=2;z<T;z++)P[z-2]=arguments[z];let G=A.startingToken||void 0,ee=!0,Be;for(;ee;){if(E.NextToken=G,E.MaxResults=A.pageSize,A.client instanceof qa)Be=yield _awaitAsyncGenerator(lr(A.client,E,...P));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield Be;const Te=G;G=Be.NextToken,ee=!!(G&&(!A.stopOnSameToken||G!==Te))}}),eo.apply(this,arguments)}n(eo,"_paginateListSubChannels");const Ma=function(){var A=(0,h.coroutine)(function*(E,T){for(var P=arguments.length,z=new Array(P>2?P-2:0),G=2;G<P;G++)z[G-2]=arguments[G];return yield E.send(new Ce(T),...z)});return n(function(T,P){return A.apply(this,arguments)},"makePagedClientRequest")}();function Bs(A,E){return cs.apply(this,arguments)}n(Bs,"paginateSearchChannels");function cs(){return cs=_wrapAsyncGenerator(function*(A,E){for(var T=arguments.length,P=new Array(T>2?T-2:0),z=2;z<T;z++)P[z-2]=arguments[z];let G=A.startingToken||void 0,ee=!0,Be;for(;ee;){if(E.NextToken=G,E.MaxResults=A.pageSize,A.client instanceof qa)Be=yield _awaitAsyncGenerator(Ma(A.client,E,...P));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield Be;const Te=G;G=Be.NextToken,ee=!!(G&&(!A.stopOnSameToken||G!==Te))}}),cs.apply(this,arguments)}n(cs,"_paginateSearchChannels")},6594694778:(H,l,c)=>{"use strict";c.r(l),c.d(l,{locateWindow:()=>m});const u={};function m(){return typeof window<"u"?window:typeof self<"u"?self:u}n(m,"locateWindow")},2412280125:(H,l,c)=>{"use strict";c.r(l),c.d(l,{fromUtf8:()=>s,toUtf8:()=>a});const u=n(i=>{const e=[];for(let t=0,r=i.length;t<r;t++){const o=i.charCodeAt(t);if(o<128)e.push(o);else if(o<2048)e.push(o>>6|192,o&63|128);else if(t+1<i.length&&(o&64512)===55296&&(i.charCodeAt(t+1)&64512)===56320){const f=65536+((o&1023)<<10)+(i.charCodeAt(++t)&1023);e.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}else e.push(o>>12|224,o>>6&63|128,o&63|128)}return Uint8Array.from(e)},"fromUtf8"),m=n(i=>{let e="";for(let t=0,r=i.length;t<r;t++){const o=i[t];if(o<128)e+=String.fromCharCode(o);else if(192<=o&&o<224){const f=i[++t];e+=String.fromCharCode((o&31)<<6|f&63)}else if(240<=o&&o<365){const h="%"+[o,i[++t],i[++t],i[++t]].map(p=>p.toString(16)).join("%");e+=decodeURIComponent(h)}else e+=String.fromCharCode((o&15)<<12|(i[++t]&63)<<6|i[++t]&63)}return e},"toUtf8");function v(i){return new TextEncoder().encode(i)}n(v,"whatwgEncodingApi_fromUtf8");function g(i){return new TextDecoder("utf-8").decode(i)}n(g,"whatwgEncodingApi_toUtf8");const s=n(i=>typeof TextEncoder=="function"?v(i):u(i),"dist_es_fromUtf8"),a=n(i=>typeof TextDecoder=="function"?g(i):m(i),"dist_es_toUtf8")},7581324406:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(s,a,i,e){function t(r){return r instanceof i?r:new i(function(o){o(r)})}return n(t,"adopt"),new(i||(i=Promise))(function(r,o){function f(d){try{p(e.next(d))}catch(y){o(y)}}n(f,"fulfilled");function h(d){try{p(e.throw(d))}catch(y){o(y)}}n(h,"rejected");function p(d){d.done?r(d.value):t(d.value).then(f,h)}n(p,"step"),p((e=e.apply(s,a||[])).next())})},m=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(9877075638));let g=n(class{needUpdate(a){return this.activeSpeakers?this.speakerScores[a]===0&&this.activeSpeakers.includes(a)||this.speakerScores[a]>0&&!this.activeSpeakers.includes(a):!0}updateActiveSpeakers(a,i,e){if(!this.needUpdate(e))return;const t=[],r=Object.keys(this.speakerScores);for(let d=0;d<r.length;d++){const y=r[d];t.push({attendeeId:y,activeScore:this.speakerScores[y]})}const o=t.sort((d,y)=>y.activeScore-d.activeScore).filter(function(d){return d.activeScore>0}).map(function(d){return d.attendeeId});this.activeSpeakers=o,i(o);const h=o.length>0&&o[0]===this.selfAttendeeId&&a.prioritizeVideoSendBandwidthForActiveSpeaker();this.hasBandwidthPriority!==h&&(this.hasBandwidthPriority=h,this.hasBandwidthPriorityCallback(h))}updateScore(a,i,e,t,r){const o=a.calculateScore(e,t,r);this.speakerScores[e]!==o&&(this.speakerScores[e]=o,this.mostRecentUpdateTimestamp[e]=Date.now(),this.updateActiveSpeakers(a,i,e))}subscribe(a,i,e,t){const r=n((f,h)=>{if(!h){this.speakerScores[f]=0,this.mostRecentUpdateTimestamp[f]=Date.now(),this.updateActiveSpeakers(a,i,f);return}this.realtimeController.realtimeSubscribeToVolumeIndicator(f,(p,d,y,S)=>{this.mostRecentUpdateTimestamp[p]=Date.now(),y!==null&&(this.speakerMuteState[p]=y),this.updateScore(a,i,p,d,y)})},"handler");this.detectorCallbackToHandler.set(i,r);const o=new v.default(this.updateIntervalMs);if(o.start(()=>{for(const f in this.speakerScores)Date.now()-this.mostRecentUpdateTimestamp[f]>this.waitIntervalMs&&this.updateScore(a,i,f,0,this.speakerMuteState[f])}),this.detectorCallbackToActivityTimer.set(i,o),e&&t){const f=new v.default(t);f.start(()=>{e(this.speakerScores)}),this.detectorCallbackToScoresTimer.set(i,f)}this.realtimeController.realtimeSubscribeToAttendeeIdPresence(r)}unsubscribe(a){const i=this.detectorCallbackToHandler.get(a);this.detectorCallbackToHandler.delete(a),i&&this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i);const e=this.detectorCallbackToActivityTimer.get(a);e&&(e.stop(),this.detectorCallbackToActivityTimer.delete(a));const t=this.detectorCallbackToScoresTimer.get(a);t&&(t.stop(),this.detectorCallbackToHandler.delete(a))}destroy(){return u(this,void 0,void 0,function*(){for(const a of this.detectorCallbackToHandler.values())this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(a);for(const a of this.detectorCallbackToActivityTimer.values())a.stop();for(const a of this.detectorCallbackToScoresTimer.values())a.stop();this.detectorCallbackToHandler.clear(),this.detectorCallbackToActivityTimer.clear(),this.detectorCallbackToScoresTimer.clear()})}constructor(a,i,e,t=1e3,r=200){this.realtimeController=a,this.selfAttendeeId=i,this.hasBandwidthPriorityCallback=e,this.waitIntervalMs=t,this.updateIntervalMs=r,this.speakerScores={},this.speakerMuteState={},this.detectorCallbackToHandler=new Map,this.detectorCallbackToScoresTimer=new Map,this.detectorCallbackToActivityTimer=new Map,this.hasBandwidthPriority=!1,this.mostRecentUpdateTimestamp={}}},"DefaultActiveSpeakerDetector");l.default=g},1473791890:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{calculateScore(m,v,g){(g||v===null)&&(v=0),this.volumes.hasOwnProperty(m)||(this.volumes[m]=0),v>this.silenceThreshold?v=1:v=0;const s=this.volumes[m]*this.speakerWeight+v*(1-this.speakerWeight);this.volumes[m]=s;for(const a in this.volumes)a!==m&&(this.volumes[a]=Math.max(this.volumes[a]-this.takeoverRate*v,0));return s<this.cutoffThreshold?0:s}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}constructor(m=.9,v=.01,g=.2,s=.2){this.speakerWeight=m,this.cutoffThreshold=v,this.silenceThreshold=g,this.takeoverRate=s,this.volumes={}}},"DefaultActiveSpeakerPolicy");l.default=c},1035256489:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class hv{static create(m,v){const g=/^[a-zA-Z0-9]+[a-zA-Z0-9_-]*[a-zA-Z0-9]+$/g;if(!m||m.length>32)throw new Error("appName should be a valid string and 1 to 32 characters in length");if(!g.test(m))throw new Error(`appName must satisfy ${g} regular expression`);const s=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/gm;if(!v||v.length>32)throw new Error("appVersion should be a valid string and 1 to 32 characters in length");if(!s.test(v))throw new Error("appVersion must satisfy Semantic Versioning format");return new hv(m,v)}constructor(m,v){this.appName=m,this.appVersion=v}},"ApplicationMetadata");l.default=c},9898009183:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"Attendee");l.default=c},9598694912:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(5546774952)),g=m(c(9649641385));let s=n(class{bindAudioElement(i){return u(this,void 0,void 0,function*(){if(!i)throw new Error(`Cannot bind audio element: ${i}`);return this.audioElement=i,this.audioElement.autoplay=!0,this.bindAudioMix()})}unbindAudioElement(){this.audioElement&&(this.audioElement.srcObject=null,this.audioElement=null,this.forEachObserver(i=>{this.audioStream&&i.meetingAudioStreamBecameInactive(this.audioStream)}))}bindAudioStream(i){return u(this,void 0,void 0,function*(){if(i){this.audioStream=i;try{yield this.bindAudioMix()}catch(e){this.logger&&this.logger.warn(`Failed to bind audio stream: ${e}`)}}})}bindAudioDevice(i){return u(this,void 0,void 0,function*(){if(i&&!this.browserBehavior.supportsSetSinkId())throw new Error("Cannot select audio output device. This browser does not support setSinkId.");return this.audioDevice=i,this.bindAudioMix()})}forEachObserver(i){for(const e of this.observers)g.default.nextTick(()=>{i(e)})}bindAudioMix(){var i,e;return u(this,void 0,void 0,function*(){if(!this.audioElement)return;const t=this.audioElement.srcObject;this.audioStream&&(this.audioElement.srcObject=this.audioStream),t!==this.audioStream&&this.forEachObserver(d=>{t&&d.meetingAudioStreamBecameInactive(t),this.audioStream&&d.meetingAudioStreamBecameActive(this.audioStream)});const r=((i=this.audioDevice)===null||i===void 0?void 0:i.deviceId)!==this.audioElement.sinkId;if(r&&typeof this.audioElement.sinkId>"u")throw new Error("Cannot select audio output device. This browser does not support setSinkId.");const o=this.audioDevice?this.audioDevice.deviceId:"",f=this.audioElement.sinkId;if(o===f)return;const h=this.audioElement,p=this.audioStream;if(this.browserBehavior.hasChromiumWebRTC()&&(h.srcObject=null),r)try{yield h.setSinkId(o)}catch(d){throw(e=this.logger)===null||e===void 0||e.error(`Failed to set sinkId for audio element: ${d}`),d}this.browserBehavior.hasChromiumWebRTC()&&(h.srcObject=p)})}getCurrentMeetingAudioStream(){return u(this,void 0,void 0,function*(){return this.audioStream})}addAudioMixObserver(i){return u(this,void 0,void 0,function*(){this.observers.add(i)})}removeAudioMixObserver(i){return u(this,void 0,void 0,function*(){this.observers.delete(i)})}audioOutputDidChange(i){return u(this,void 0,void 0,function*(){return this.logger.info("Receive an audio output change event"),this.bindAudioDevice(i)})}constructor(i){this.logger=i,this.audioDevice=null,this.audioElement=null,this.audioStream=null,this.browserBehavior=new v.default,this.observers=new Set}},"DefaultAudioMixController");l.default=s},5983965185:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(5546774952));let v=n(class Rf{static fullbandSpeechMono(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Rf(4e4,s)}static fullbandMusicMono(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Rf(64e3,s)}static fullbandMusicStereo(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Rf(128e3,s)}isStereo(){return this.audioBitrateBps===128e3}hasRedundancyEnabled(){return this.enableAudioRedundancy}constructor(s=null,a=!0){this.audioBitrateBps=s,this.enableAudioRedundancy=new m.default().supportsAudioRedundancy()&&a}},"AudioProfile");l.default=v},4610074022:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=void 0,l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=25;let c=n(class{resetConnectionSpecificState(){this.peer&&this.peer.close(),this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.transceiverController!==void 0&&this.transceiverController.reset(),this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.videoDownlinkBandwidthPolicy.reset(),this.videoUplinkBandwidthPolicy.reset&&this.videoUplinkBandwidthPolicy.reset(),this.lastVideosToReceive=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptions=null,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.videoDuplexMode=null}constructor(){this.logger=null,this.browserBehavior=null,this.meetingSessionConfiguration=null,this.signalingClient=null,this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.audioVideoController=null,this.realtimeController=null,this.videoTileController=null,this.mediaStreamBroker=null,this.activeAudioInput=void 0,this.activeVideoInput=void 0,this.audioMixController=null,this.transceiverController=null,this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.iceGatheringStateEventHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.reconnectController=null,this.removableObservers=[],this.audioProfile=null,this.videoStreamIndex=null,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.lastKnownVideoAvailability=null,this.videoCaptureAndEncodeParameter=null,this.videosToReceive=null,this.lastVideosToReceive=null,this.videoSubscriptions=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.videoSendCodecPreferences=[],this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.prioritizedSendVideoCodecCapabilities=[],this.degradedVideoSendCodecs=[],this.videosPaused=null,this.videoDuplexMode=null,this.volumeIndicatorAdapter=null,this.statsCollector=null,this.connectionMonitor=null,this.videoInputAttachedTimestampMs=0,this.audioDeviceInformation={},this.videoDeviceInformation={},this.enableSimulcast=!1,this.enableSVC=!1,this.eventController=null,this.signalingOpenDurationMs=null,this.iceGatheringDurationMs=null,this.startAudioVideoTimestamp=null,this.attendeePresenceDurationMs=null,this.meetingStartDurationMs=null,this.poorConnectionCount=0,this.maxVideoTileCount=0,this.startTimeMs=null}},"AudioVideoControllerState");l.default=c},1833994912:function(H,l,c){"use strict";var u=this&&this.__createBinding||(Object.create?function(Y,fe,et,nt){nt===void 0&&(nt=et),Object.defineProperty(Y,nt,{enumerable:!0,get:function(){return fe[et]}})}:function(Y,fe,et,nt){nt===void 0&&(nt=et),Y[nt]=fe[et]}),m=this&&this.__setModuleDefault||(Object.create?function(Y,fe){Object.defineProperty(Y,"default",{enumerable:!0,value:fe})}:function(Y,fe){Y.default=fe}),v=this&&this.__importStar||function(Y){if(Y&&Y.__esModule)return Y;var fe={};if(Y!=null)for(var et in Y)et!=="default"&&Object.prototype.hasOwnProperty.call(Y,et)&&u(fe,Y,et);return m(fe,Y),fe},g=this&&this.__awaiter||function(Y,fe,et,nt){function nn(kt){return kt instanceof et?kt:new et(function(Jt){Jt(kt)})}return n(nn,"adopt"),new(et||(et=Promise))(function(kt,Jt){function Ke(Ye){try{x(nt.next(Ye))}catch(it){Jt(it)}}n(Ke,"fulfilled");function vt(Ye){try{x(nt.throw(Ye))}catch(it){Jt(it)}}n(vt,"rejected");function x(Ye){Ye.done?kt(Ye.value):nn(Ye.value).then(Ke,vt)}n(x,"step"),x((nt=nt.apply(Y,fe||[])).next())})},s=this&&this.__importDefault||function(Y){return Y&&Y.__esModule?Y:{default:Y}};Object.defineProperty(l,"__esModule",{value:!0});const a=s(c(7581324406)),i=s(c(9598694912)),e=s(c(5983965185)),t=s(c(5546774952)),r=s(c(9200233701)),o=s(c(8619504925)),f=s(c(1197017824)),h=s(c(7551081659)),p=s(c(9447989038)),d=s(c(488357679)),y=s(c(8006173476)),S=s(c(6348496904)),b=s(c(7692233712)),_=s(c(9649641385)),C=s(c(6900744364)),w=s(c(3795683579)),R=s(c(2092275410)),O=s(c(583806999)),D=s(c(7570945794)),I=v(c(5393388022)),M=s(c(7969706599)),k=s(c(4804743313)),N=c(4136617125),j=s(c(4562177071)),B=s(c(4713678292)),J=s(c(9089081530)),Q=s(c(5703332651)),oe=s(c(9049733277)),$=s(c(4708498556)),he=s(c(2635066756)),Ae=s(c(9488451395)),Ee=s(c(9638153336)),Oe=s(c(7966229607)),be=s(c(1614136239)),De=s(c(3292077469)),ut=s(c(6085879951)),St=s(c(9588672479)),Rt=s(c(9531998674)),Ze=s(c(587698570)),mt=s(c(86955145)),At=s(c(8297256329)),Vt=s(c(7680112541)),dt=s(c(8872868578)),Cn=s(c(5976676062)),gt=s(c(339097629)),Ut=s(c(3248483798)),en=s(c(7638277718)),sn=s(c(4098780146)),$t=s(c(2392158736)),Rn=s(c(8213452704)),di=s(c(372560720)),ii=s(c(161472916)),Kn=c(6527539809),hi=s(c(1695739824)),Ln=s(c(9677745702)),Hn=s(c(3368465086)),ui=c(8071414974),jn=s(c(1865309432)),ri=s(c(2469210420)),ie=s(c(8697249276)),Mt=s(c(4675986794)),Ot=s(c(1309535200)),Ht=s(c(1604549269)),hn=s(c(9136055221)),tn=s(c(8058016368)),xe=s(c(4610074022));let Dt=n(class Mf{destroy(){return g(this,void 0,void 0,function*(){this.observerQueue.clear(),this._mediaStreamBroker.removeMediaStreamBrokerObserver(this._audioMixController),this.destroyed=!0})}get configuration(){return this._configuration}get realtimeController(){return this._realtimeController}get activeSpeakerDetector(){return this._activeSpeakerDetector||(this._activeSpeakerDetector=new a.default(this._realtimeController,this._configuration.credentials.attendeeId,this.handleHasBandwidthPriority.bind(this))),this._activeSpeakerDetector}get videoTileController(){return this._videoTileController}get audioMixController(){return this._audioMixController}get logger(){return this._logger}get rtcPeerConnection(){return this.meetingSessionContext&&this.meetingSessionContext.peer||null}get mediaStreamBroker(){return this._mediaStreamBroker}get eventController(){return this._eventController}getRTCPeerConnectionStats(fe){return this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent||(this.logger.warn("The `getRTCPeerConnectionStats()` is on its way to be deprecated. It makes an additional call to the `getStats` API and therefore may cause slight performance degradation. Please use the new API `clientMetricReport.getRTCStatsReport()` returned by `metricsDidReceive(clientMetricReport)` callback instead."),this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!0),this.rtcPeerConnection?this.rtcPeerConnection.getStats(fe):null}setAudioProfile(fe){this._audioProfile=fe}addObserver(fe){this.logger.info("adding meeting observer"),this.observerQueue.add(fe)}removeObserver(fe){this.logger.info("removing meeting observer"),this.observerQueue.delete(fe)}forEachObserver(fe){for(const et of this.observerQueue)_.default.nextTick(()=>{this.observerQueue.has(et)&&fe(et)})}initSignalingClient(){this.connectionHealthData.reset(),!this.meetingSessionContext.signalingClient&&(this.meetingSessionContext=new xe.default,this.meetingSessionContext.logger=this.logger,this.meetingSessionContext.eventController=this.eventController,this.meetingSessionContext.browserBehavior=new t.default,this.meetingSessionContext.videoSendCodecPreferences=this.videoSendCodecPreferences,this.meetingSessionContext.audioProfile=this._audioProfile,this.meetingSessionContext.meetingSessionConfiguration=this.configuration,this.meetingSessionContext.signalingClient=new D.default(this._webSocketAdapter,this.logger))}uninstallPreStartObserver(){this.meetingSessionContext.signalingClient.removeObserver(this.preStartObserver),this.preStartObserver=void 0}prestart(){return this.logger.info("Pre-connecting signaling connection."),this.createOrReuseSignalingTask().run().then(()=>{const fe=n(()=>g(this,void 0,void 0,function*(){this.logger.info("Early connection closed; discarding signaling task."),this.signalingTask=void 0,this.uninstallPreStartObserver()}),"handleClosed");this.preStartObserver={handleSignalingClientEvent(et){et.type===M.default.WebSocketClosed&&fe()}},this.meetingSessionContext.signalingClient.registerObserver(this.preStartObserver)}).catch(fe=>{this.logger.error(`Signaling task pre-start failed: ${fe}`),this.signalingTask=void 0})}start(fe){this.startReturningPromise(fe).then(()=>{this.logger.info("start completed")}).catch(et=>{this.logger.error(`start failed: ${et}`)})}startReturningPromise(fe){return(fe==null?void 0:fe.signalingOnly)===!0?this.prestart():(this.activeSpeakerDetector,new Promise((et,nt)=>{this.sessionStateController.perform(w.default.Connect,()=>{this.actionConnect(!1).then(et).catch(nt)})}))}connectWithPromises(fe){const et=this.meetingSessionContext,nt=n((ge,Zn)=>new en.default(this.logger,Zn,ge),"timeout");this.monitorTask=new be.default(et,this.configuration.connectionHealthPolicyConfiguration,this.connectionHealthData);const nn=this.monitorTask.once(),kt=new Rt.default(et).once();this.receiveIndexTask=new At.default(et),this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();const Jt=new dt.default(this.logger,"Signaling",[this.createOrReuseSignalingTask(),new Oe.default(et),new Vt.default(et),new Ae.default(et),this.receiveIndexTask]).once(),Ke=new oe.default(et).once(Jt),vt=new B.default(et).once(Ke,kt),x=new $.default(et).once(vt),Ye=new Cn.default(et).once(x),it=new he.default(et).once(Ye),ft=new Ut.default(et).once(it);return this.receiveRemotePauseResumeTask=new Ze.default(et),this.receiveRemotePauseResumeTask.once(ft),new dt.default(this.logger,this.wrapTaskName("AudioVideoStart"),[nn,nt(this.configuration.connectionTimeoutMs,new dt.default(this.logger,"Peer",[ft,this.receiveRemotePauseResumeTask,fe?new en.default(this.logger,new ut.default(this.logger,"FinalizeConnection",[new sn.default(et),new gt.default(et)]),this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs):new gt.default(et)]))])}actionConnect(fe){var et;return g(this,void 0,void 0,function*(){this.initSignalingClient(),this.uninstallPreStartObserver(),this.meetingSessionContext.mediaStreamBroker=this._mediaStreamBroker,this.meetingSessionContext.realtimeController=this._realtimeController,this.meetingSessionContext.audioMixController=this._audioMixController,this.meetingSessionContext.audioVideoController=this,this.enableSimulcast=this.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&new t.default().hasChromiumWebRTC(),this.enableSimulcast&&this.configuration.enableSVC&&this.logger.warn("SVC cannot be enabled at the same time as simulcast. Disabling SVC, using simulcast."),this.enableSVC=!this.enableSimulcast&&this.configuration.enableSVC&&new t.default().supportsScalableVideoCoding();const nt=!!this.configuration.urls.audioHostURL;if(nt?this.enableSimulcast?(this.logger.info("Using transceiver controller with simulcast support"),new y.default(this.configuration.credentials.attendeeId).hasModality(y.default.MODALITY_CONTENT)?this.meetingSessionContext.transceiverController=new Rn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext):this.meetingSessionContext.transceiverController=new di.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using default transceiver controller"),this.meetingSessionContext.transceiverController=new $t.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using video only transceiver controller"),this.meetingSessionContext.transceiverController=new ii.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)),this.meetingSessionContext.volumeIndicatorAdapter=new tn.default(this.logger,this._realtimeController,Mf.MIN_VOLUME_DECIBELS,Mf.MAX_VOLUME_DECIBELS,this.configuration.credentials.attendeeId),this.meetingSessionContext.videoTileController=this._videoTileController,this.meetingSessionContext.videoDownlinkBandwidthPolicy=this.configuration.videoDownlinkBandwidthPolicy,this.meetingSessionContext.videoUplinkBandwidthPolicy=this.configuration.videoUplinkBandwidthPolicy,this.meetingSessionContext.enableSimulcast=this.enableSimulcast,this.meetingSessionContext.enableSVC=this.enableSVC,this.enableSimulcast){let Jt=this.meetingSessionContext.videoUplinkBandwidthPolicy;Jt||(Jt=new Ht.default(this.configuration.credentials.attendeeId,this.meetingSessionContext.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy=Jt),Jt.addObserver(this),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new Hn.default(this.meetingSessionContext.logger)),this.meetingSessionContext.videoStreamIndex=new ie.default(this.logger)}else this.meetingSessionContext.enableSimulcast=!1,this.meetingSessionContext.videoStreamIndex=new ri.default(this.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy||(this.meetingSessionContext.videoUplinkBandwidthPolicy=new hn.default(this.configuration.credentials.attendeeId,!this.meetingSessionContext.browserBehavior.disableResolutionScaleDown(),this.meetingSessionContext.logger,this.meetingSessionContext.browserBehavior),this.meetingSessionContext.videoUplinkBandwidthPolicy.setSVCEnabled(this.enableSVC)),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new Ln.default(this.configuration.credentials.attendeeId)),this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController&&this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController&&(this.useUpdateTransceiverControllerForUplink=!0,this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController(this.meetingSessionContext.transceiverController)),this.meetingSessionContext.audioProfile=this._audioProfile;if(new y.default(this.configuration.credentials.attendeeId).hasModality(y.default.MODALITY_CONTENT)){const Jt=this.configuration.meetingFeatures.contentMaxResolution===f.default.VideoResolutionUHD;Jt&&this.setVideoMaxBandwidthKbps(2500),this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Jt)}else{const Jt=this.configuration.meetingFeatures.videoMaxResolution===f.default.VideoResolutionFHD;this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Jt)}this.meetingSessionContext.videoUplinkBandwidthPolicy&&this.maxUplinkBandwidthKbps&&this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(this.maxUplinkBandwidthKbps),this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController(this._videoTileController),this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver(()=>this.update({needsRenegotiation:!1})),this.meetingSessionContext.lastKnownVideoAvailability=new d.default,this.meetingSessionContext.videoCaptureAndEncodeParameter=new hi.default(0,0,0,0,!1),this.meetingSessionContext.videosToReceive=new jn.default,this.meetingSessionContext.videosPaused=new jn.default,this.meetingSessionContext.statsCollector=new j.default(this,this.logger),this.meetingSessionContext.connectionMonitor=new o.default(this,this._realtimeController,this.connectionHealthData,new S.default(this.meetingSessionContext.signalingClient,Mf.PING_PONG_INTERVAL_MS,this.logger),this.meetingSessionContext.statsCollector),this.meetingSessionContext.reconnectController=this._reconnectController,this.meetingSessionContext.videoDeviceInformation={},fe||(this.totalRetryCount=0,this._reconnectController.reset(),this.startAudioVideoTimestamp=Date.now(),this.forEachObserver(Jt=>{Kn.Maybe.of(Jt.audioVideoDidStartConnecting).map(Ke=>Ke.bind(Jt)(!1))}),(et=this.eventController)===null||et===void 0||et.publishEvent("meetingStartRequested")),this.meetingSessionContext.startAudioVideoTimestamp=this.startAudioVideoTimestamp,this._reconnectController.hasStartedConnectionAttempt()?this._reconnectController.startedConnectionAttempt(!1):this._reconnectController.startedConnectionAttempt(!0);const nn=nt&&this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs>0;this.logger.info("Needs to wait for attendee presence? "+nn);const kt=this.connectWithPromises(nn);try{yield kt.run(),this.connectionHealthData.setConnectionStartTime(),this._mediaStreamBroker.addMediaStreamBrokerObserver(this),this.sessionStateController.perform(w.default.FinishConnecting,()=>{this.eventController&&(this.meetingSessionContext.meetingStartDurationMs=Date.now()-this.startAudioVideoTimestamp,this.eventController.publishEvent("meetingStartSucceeded",{maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,poorConnectionCount:this.meetingSessionContext.poorConnectionCount,retryCount:this.totalRetryCount,signalingOpenDurationMs:this.meetingSessionContext.signalingOpenDurationMs,iceGatheringDurationMs:this.meetingSessionContext.iceGatheringDurationMs,meetingStartDurationMs:this.meetingSessionContext.meetingStartDurationMs})),this.meetingSessionContext.startTimeMs=Date.now(),this.actionFinishConnecting()})}catch(Jt){this.signalingTask=void 0;const Ke=new h.default(this.getMeetingStatusCode(Jt)||p.default.TaskFailed);if(this.logger.info(`Start failed: ${Ke} due to error ${Jt}.`),this.sessionStateController.state()===R.default.NotConnected){this.logger.info("Start failed and not connected. Not cleaning up.");return}this.sessionStateController.perform(w.default.Fail,()=>g(this,void 0,void 0,function*(){yield this.actionDisconnect(Ke,!0,Jt),this.handleMeetingSessionStatus(Ke,Jt)||this.notifyStop(Ke,Jt)}))}})}createOrReuseSignalingTask(){return this.signalingTask||(this.initSignalingClient(),this.signalingTask=new en.default(this.logger,new De.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs).once()),this.signalingTask}actionFinishConnecting(){this.signalingTask=void 0,this.meetingSessionContext.videoDuplexMode=N.SdkStreamServiceType.RX,this.meetingSessionContext.enableSimulcast||(this.useUpdateTransceiverControllerForUplink?this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController():this.enforceBandwidthLimitationForSender(this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0])),this.forEachObserver(fe=>{Kn.Maybe.of(fe.audioVideoDidStart).map(et=>et.bind(fe)())}),this._reconnectController.reset(),this.receiveIndexTask.resumeIngestion(),this.monitorTask.resumeResubscribeCheck()}stopReturningPromise(){var fe;return this.sessionStateController.state()===R.default.NotConnected?((fe=this.meetingSessionContext.signalingClient)===null||fe===void 0||fe.closeConnection(),this.cleanUpMediaStreamsAfterStop(),Promise.resolve()):new Promise((et,nt)=>{this.sessionStateController.perform(w.default.Disconnect,()=>{this._reconnectController.disableReconnect(),this.logger.info("attendee left meeting, session will not be reconnected"),this.actionDisconnect(new h.default(p.default.Left),!1,null).then(et).catch(nt)})})}stop(){this.stopReturningPromise()}actionDisconnect(fe,et,nt){return g(this,void 0,void 0,function*(){try{yield new dt.default(this.logger,this.wrapTaskName("AudioVideoStop"),[new en.default(this.logger,new Ee.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)]).run()}catch{this.logger.info("fail to stop")}try{const nn=[new en.default(this.logger,new Q.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)];this.cleanUpMediaStreamsAfterStop(),yield new dt.default(this.logger,this.wrapTaskName("AudioVideoClean"),nn).run()}catch{this.logger.info("fail to clean")}this.sessionStateController.perform(w.default.FinishDisconnecting,()=>{et||this.notifyStop(fe,nt)})})}update(){let et=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{needsRenegotiation:!0}).needsRenegotiation;if(et||(et=this.meetingSessionContext.peer===void 0),et||(et=!this.updateRemoteVideosFromPolicy()),et||(et=!this.updateLocalVideoFromPolicy()),this.meetingSessionContext.lastVideosToReceive=this.meetingSessionContext.videosToReceive,!et)return this.logger.info("Update request does not require resubscribe"),this.actionFinishUpdating(),!0;this.logger.info("Update request requires resubscribe");const nt=this.sessionStateController.perform(w.default.Update,()=>{this.actionUpdateWithRenegotiation(!0)});return nt===O.default.Transitioned||nt===O.default.DeferredTransition}updateRemoteVideosFromPolicy(){if(this.meetingSessionContext.videoDownlinkBandwidthPolicy&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!I.serverSideNetworkAdaptionIsNoneOrDefault(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())){if(!this.sendRemoteVideoUpdate())return!1;if(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption()===I.default.BandwidthProbingAndRemoteVideoQualityAdaption)return this.isNotAddingOrRemovingStreams()}return this.updateRemoteVideosIfNotAddingOrRemovingStreams()}updateRemoteVideosIfNotAddingOrRemovingStreams(){const fe=this.detectChangesInVideosToReceive();if(fe===void 0)return!1;const et=fe.added,nt=fe.simulcastStreamUpdates,nn=fe.removed,kt=this.meetingSessionContext,Jt=[];for(const[Ke,vt]of nt.entries()){const x=new k.default;if(x.streamId=vt,x.attendeeId=kt.videoStreamIndex.attendeeIdForStreamId(vt),x.mid=kt.transceiverController.getMidForStreamId(Ke),x.mid===void 0)return this.logger.info(`No MID found for stream ID ${Ke}, cannot update stream without renegotiation`),!1;if(Jt.push(x),kt.transceiverController.setStreamIdForMid(x.mid,vt),kt.videoStreamIndex.overrideStreamIdMappings(Ke,vt),kt.videoTileController.haveVideoTileForAttendeeId(x.attendeeId)){const Ye=kt.videoTileController.getVideoTileForAttendeeId(x.attendeeId);if(!Ye.setStreamId)return!1;Ye.setStreamId(vt)}}return Jt.length!==0&&kt.signalingClient.remoteVideoUpdate(Jt,[]),et.length!==0||nn.length!==0?!1:(kt.videoStreamIndex.remoteVideoUpdateSent(),!0)}detectChangesInVideosToReceive(){const fe=this.meetingSessionContext;if(fe.videosToReceive===null||!fe.transceiverController||!fe.transceiverController.getMidForStreamId||!fe.transceiverController.setStreamIdForMid||!fe.videosToReceive.forEach||!fe.signalingClient.remoteVideoUpdate||!fe.videoStreamIndex.overrideStreamIdMappings)return;let et=[];const nt=new Map;let nn=[];if(fe.lastVideosToReceive===null)et=fe.videosToReceive.array();else{const kt=fe.videoStreamIndex;fe.videosToReceive.forEach(Jt=>{if(fe.lastVideosToReceive.contain(Jt))return;let Ke=!1;fe.lastVideosToReceive.forEach(vt=>{Ke||kt.StreamIdsInSameGroup(vt,Jt)&&(nt.set(vt,Jt),Ke=!0)}),Ke||et.push(Jt)}),nn=fe.lastVideosToReceive.array().filter(Jt=>{const Ke=fe.videosToReceive.contain(Jt),vt=nt.has(Jt);return!Ke&&!vt})}return this.logger.info(`Request to update remote videos with added: [${et}], updated: [${Array.from(nt.entries()).map(kt=>{let[Jt,Ke]=kt;return`${Jt}->${Ke}`}).join(",")}], removed: [${nn}]`),{added:et,removed:nn,simulcastStreamUpdates:nt}}isNotAddingOrRemovingStreams(){const fe=this.detectChangesInVideosToReceive();if(fe===void 0)return!1;const et=fe.added,nt=fe.removed;return et.length!==0||nt.length!==0?!1:(this.meetingSessionContext.videoStreamIndex.remoteVideoUpdateSent(),!0)}sendRemoteVideoUpdate(){const fe=this.meetingSessionContext;if(fe.videosToReceive===null)return!1;const et=fe.videosToReceive.array().map(Ke=>fe.videoStreamIndex.groupIdForStreamId(Ke));this.receiveRemotePauseResumeTask.updateSubscribedGroupdIds(new Set(et));const nt=ui.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(fe,et,fe.videoDownlinkBandwidthPolicy.getVideoPreferences()),nn=new Map,kt=[];for(const Ke of nt){let vt=!1;if(!fe.lastVideoSubscriptionConfiguration.has(Ke.groupId))vt=!0;else{const x=fe.lastVideoSubscriptionConfiguration.get(Ke.groupId);Ke.equals(x)||(this.logger.debug(`${JSON.stringify(Ke)} does not equal ${JSON.stringify(x)}, sending update`),vt=!0)}nn.set(Ke.groupId,Ke),vt&&kt.push(Ke)}fe.lastVideoSubscriptionConfiguration=nn;const Jt=[];if(fe.lastVideosToReceive!==null){const Ke=new Set(et);for(const vt of fe.lastVideosToReceive.array()){const x=fe.videoStreamIndex.groupIdForStreamId(vt);if(!Ke.has(x)){const Ye=fe.transceiverController.getMidForGroupId(x);if(Ye===void 0){fe.logger.warn(`Could not find MID for group ID to remove: ${x}`);continue}Jt.push(Ye)}}}return(kt.length!==0||Jt.length!==0)&&fe.signalingClient.remoteVideoUpdate(kt,Jt),!0}updateLocalVideoFromPolicy(){if(this.meetingSessionContext.enableSimulcast){const fe=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseEncodingParameters();if(this.mayNeedRenegotiationForSimulcastLayerChange&&this.meetingSessionContext.transceiverController.hasVideoInput()&&!this.negotiatedBitrateLayersAllocationRtpHeaderExtension())return this.logger.info("Needs regenotiation for local video simulcast layer change"),this.mayNeedRenegotiationForSimulcastLayerChange=!1,!1;this.meetingSessionContext.transceiverController.setEncodingParameters(fe)}else this.meetingSessionContext.videoCaptureAndEncodeParameter=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters();return this.logger.info("Updated local video from policy without renegotiation"),!0}negotiatedBitrateLayersAllocationRtpHeaderExtension(){if(!this.meetingSessionContext.transceiverController.localVideoTransceiver())return!1;const fe=this.meetingSessionContext.transceiverController.localVideoTransceiver().sender.getParameters();return!fe||!fe.headerExtensions?!1:fe.headerExtensions.some(et=>et.uri==="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00")}restartLocalVideo(fe){const et=n(()=>g(this,void 0,void 0,function*(){this._videoTileController.hasStartedLocalVideoTile()&&(this.logger.info("stopping local video tile prior to local video restart"),this._videoTileController.stopLocalVideoTile(),this.logger.info("preparing local video restart update"),yield this.actionUpdateWithRenegotiation(!1),this.logger.info("starting local video tile for local video restart"),this._videoTileController.startLocalVideoTile()),this.logger.info("finalizing local video restart update"),yield this.actionUpdateWithRenegotiation(!0),fe()}),"restartVideo"),nt=this.sessionStateController.perform(w.default.Update,()=>{et()});return nt===O.default.Transitioned||nt===O.default.DeferredTransition}replaceLocalVideo(fe){return g(this,void 0,void 0,function*(){if(!fe||fe.getVideoTracks().length<1)throw new Error("could not acquire video track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");const et=this.meetingSessionContext.videoTileController.getLocalVideoTile();if(et){const nt=et.state(),nn=fe.getVideoTracks()[0].getSettings();et.bindVideoStream(nt.boundAttendeeId,!0,fe,nn.width,nn.height,nt.streamId,nt.boundExternalUserId)}yield this.meetingSessionContext.transceiverController.setVideoInput(fe.getVideoTracks()[0]),this.meetingSessionContext.activeVideoInput=fe,this.logger.info("Local video input is updated")})}replaceLocalAudio(fe){return g(this,void 0,void 0,function*(){if(!fe||fe.getAudioTracks().length<1)throw new Error("could not acquire audio track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");if(this.connectionHealthData.reset(),this.connectionHealthData.setConnectionStartTime(),!(yield this.meetingSessionContext.transceiverController.replaceAudioTrack(fe.getAudioTracks()[0])))throw new Error("Failed to replace audio track");this.meetingSessionContext.activeAudioInput=fe,this.logger.info("Local audio input is updated")})}actionUpdateWithRenegotiation(fe){return g(this,void 0,void 0,function*(){this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();try{yield new dt.default(this.logger,this.wrapTaskName("AudioVideoUpdate"),[new mt.default(this.meetingSessionContext),new en.default(this.logger,new dt.default(this.logger,"UpdateSession",[new B.default(this.meetingSessionContext),new $.default(this.meetingSessionContext),new Cn.default(this.meetingSessionContext),new he.default(this.meetingSessionContext),new Ut.default(this.meetingSessionContext),new gt.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),fe&&this.sessionStateController.perform(w.default.FinishUpdating,()=>{this.actionFinishUpdating()})}catch(et){this.sessionStateController.perform(w.default.FinishUpdating,()=>{const nt=new h.default(this.getMeetingStatusCode(et)||p.default.TaskFailed);nt.statusCode()!==p.default.IncompatibleSDP&&this.logger.info("failed to update audio-video session"),this.handleMeetingSessionStatus(nt,et)})}})}notifyStop(fe,et){var nt;if(this.forEachObserver(nn=>{Kn.Maybe.of(nn.audioVideoDidStop).map(kt=>kt.bind(nn)(fe))}),this.eventController){const{signalingOpenDurationMs:nn,poorConnectionCount:kt,startTimeMs:Jt,iceGatheringDurationMs:Ke,attendeePresenceDurationMs:vt,meetingStartDurationMs:x}=this.meetingSessionContext,Ye={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Jt===null?0:Math.round(Date.now()-Jt),meetingStatus:p.default[fe.statusCode()],signalingOpenDurationMs:nn,iceGatheringDurationMs:Ke,attendeePresenceDurationMs:vt,poorConnectionCount:kt,meetingStartDurationMs:x,retryCount:this.totalRetryCount},it=et&&et.message||((nt=fe.toString)===null||nt===void 0?void 0:nt.call(fe))||"";Ye.meetingDurationMs===0?(Ye.meetingErrorMessage=it,delete Ye.meetingDurationMs,delete Ye.attendeePresenceDurationMs,delete Ye.meetingStartDurationMs,this.eventController.publishEvent("meetingStartFailed",Ye)):fe.isFailure()||fe.isAudioConnectionFailure()?(Ye.meetingErrorMessage=it,this.eventController.publishEvent("meetingFailed",Ye)):this.eventController.publishEvent("meetingEnded",Ye)}}actionFinishUpdating(){if(!this.meetingSessionContext.enableSimulcast)if(this.useUpdateTransceiverControllerForUplink)this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();else{const fe=this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0];this.enforceBandwidthLimitationForSender(fe)}this.monitorTask.resumeResubscribeCheck(),this.receiveIndexTask.resumeIngestion(),this.logger.info("updated audio-video session")}reconnect(fe,et){this.promotedToPrimaryMeeting&&(this.promotedToPrimaryMeeting=!1,this.forEachObserver(nn=>{Kn.Maybe.of(nn.audioVideoWasDemotedFromPrimaryMeeting).map(kt=>kt.bind(nn)(new h.default(p.default.AudioVideoDisconnectedWhilePromoted)))}));const nt=this._reconnectController.retryWithBackoff(()=>g(this,void 0,void 0,function*(){this.sessionStateController.state()===R.default.NotConnected?this.sessionStateController.perform(w.default.Connect,()=>{this.actionConnect(!0)}):this.sessionStateController.perform(w.default.Reconnect,()=>{this.actionReconnect(fe)}),this.totalRetryCount+=1}),()=>{this.logger.info("canceled retry")});return nt||this.sessionStateController.perform(w.default.Fail,()=>{this.actionDisconnect(fe,!1,et)}),nt}actionReconnect(fe){return g(this,void 0,void 0,function*(){this._reconnectController.hasStartedConnectionAttempt()||(this._reconnectController.startedConnectionAttempt(!1),this.forEachObserver(et=>{Kn.Maybe.of(et.audioVideoDidStartConnecting).map(nt=>nt.bind(et)(!0))})),this.meetingSessionContext.volumeIndicatorAdapter.onReconnect(),this.connectionHealthData.reset(),this.receiveRemotePauseResumeTask=new Ze.default(this.meetingSessionContext);try{yield new dt.default(this.logger,this.wrapTaskName("AudioVideoReconnect"),[new en.default(this.logger,new dt.default(this.logger,"Media",[new J.default(this.meetingSessionContext),new dt.default(this.logger,"Signaling",[new De.default(this.meetingSessionContext),new Ae.default(this.meetingSessionContext)]),new oe.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs),new mt.default(this.meetingSessionContext),new en.default(this.logger,new dt.default(this.logger,"UpdateSession",[new B.default(this.meetingSessionContext),new $.default(this.meetingSessionContext),new Cn.default(this.meetingSessionContext),new he.default(this.meetingSessionContext),new Ut.default(this.meetingSessionContext),new gt.default(this.meetingSessionContext),this.receiveRemotePauseResumeTask]),this.configuration.connectionTimeoutMs)]).run(),this.sessionStateController.perform(w.default.FinishConnecting,()=>{if(this.eventController){const{signalingOpenDurationMs:et,poorConnectionCount:nt,startTimeMs:nn,iceGatheringDurationMs:kt,attendeePresenceDurationMs:Jt,meetingStartDurationMs:Ke}=this.meetingSessionContext,vt={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Math.round(Date.now()-nn),meetingStatus:p.default[fe.statusCode()],signalingOpenDurationMs:et,iceGatheringDurationMs:kt,attendeePresenceDurationMs:Jt,poorConnectionCount:nt,meetingStartDurationMs:Ke,retryCount:this.totalRetryCount};this.eventController.publishEvent("meetingReconnected",vt)}this.actionFinishConnecting()})}catch(et){this.sessionStateController.perform(w.default.FinishConnecting,()=>{this.logger.info("failed to reconnect audio-video session");const nt=new h.default(this.getMeetingStatusCode(et)||p.default.TaskFailed);this.handleMeetingSessionStatus(nt,et)})}this.connectionHealthData.setConnectionStartTime()})}wrapTaskName(fe){return`${fe}/${this.configuration.meetingId}/${this.configuration.credentials.attendeeId}`}cleanUpMediaStreamsAfterStop(){this._mediaStreamBroker.removeMediaStreamBrokerObserver(this),this.meetingSessionContext.activeAudioInput=void 0,this.meetingSessionContext.activeVideoInput=void 0}getMeetingStatusCode(fe){const et=/the meeting status code: (\d+)/.exec(fe&&fe.message);return et&&et.length>1?Number.parseInt(et[1],10):null}enforceBandwidthLimitationForSender(fe){return g(this,void 0,void 0,function*(){yield this.meetingSessionContext.transceiverController.setVideoSendingBitrateKbps(fe)})}handleMeetingSessionStatus(fe,et){if(this.logger.info(`handling status: ${p.default[fe.statusCode()]}`),fe.isTerminal()||this.meetingSessionContext.statsCollector&&this.meetingSessionContext.statsCollector.logMeetingSessionStatus(fe),fe.statusCode()===p.default.IncompatibleSDP)return this.restartLocalVideo(()=>{this.logger.info("handled incompatible SDP by attempting to restart video")}),!0;if(fe.statusCode()===p.default.VideoCallSwitchToViewOnly)return this._videoTileController.removeLocalVideoTile(),this.forEachObserver(nt=>{Kn.Maybe.of(nt.videoSendDidBecomeUnavailable).map(nn=>nn.bind(nt)())}),!1;if(fe.statusCode()===p.default.AudioVideoWasRemovedFromPrimaryMeeting)return this.forEachObserver(nt=>{Kn.Maybe.of(nt.audioVideoWasDemotedFromPrimaryMeeting).map(nn=>nn.bind(nt)(fe))}),!1;if(fe.isTerminal()&&(this.logger.error("session will not be reconnected"),this.meetingSessionContext.reconnectController&&this.meetingSessionContext.reconnectController.disableReconnect()),(fe.isFailure()||fe.isTerminal())&&this.meetingSessionContext.reconnectController){const nt=this.reconnect(fe,et);return nt?this.logger.warn(`will retry due to status code ${p.default[fe.statusCode()]}${et?` and error: ${et.message}`:""}`):this.logger.error(`failed with status code ${p.default[fe.statusCode()]}${et?` and error: ${et.message}`:""}`),nt}return!1}setVideoMaxBandwidthKbps(fe){if(fe<=0)throw new Error("Max bandwidth kbps has to be greater than 0");this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&(this.logger.info(`video send has ideal max bandwidth ${fe} kbps`),this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(fe)),this.maxUplinkBandwidthKbps=fe}handleHasBandwidthPriority(fe){return g(this,void 0,void 0,function*(){if(this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&!this.meetingSessionContext.enableSimulcast){if(this.useUpdateTransceiverControllerForUplink){this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(fe),yield this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();return}const et=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(fe);const nt=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();et!==nt&&(this.logger.info(`video send bandwidth priority ${fe} max has changed from ${et} kbps to ${nt} kbps`),yield this.enforceBandwidthLimitationForSender(nt))}})}pauseReceivingStream(fe){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.pause([fe])}resumeReceivingStream(fe){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.resume([fe])}setVideoCodecSendPreferences(fe){this.videoSendCodecPreferences=fe,this.meetingSessionContext.videoSendCodecPreferences=fe,this.sessionStateController.state()!==R.default.NotConnected&&this.update({needsRenegotiation:!0})}getRemoteVideoSources(){const{videoStreamIndex:fe}=this.meetingSessionContext;if(!fe)return this.logger.info("meeting has not started"),[];const et=this.configuration.credentials.attendeeId;return fe.allVideoSendingSourcesExcludingSelf(et)}encodingSimulcastLayersDidChange(fe){this.mayNeedRenegotiationForSimulcastLayerChange=!0,this.forEachObserver(et=>{Kn.Maybe.of(et.encodingSimulcastLayersDidChange).map(nt=>nt.bind(et)(fe))})}promoteToPrimaryMeeting(fe){return this.actionPromoteToPrimaryMeeting(fe)}actionPromoteToPrimaryMeeting(fe){return g(this,void 0,void 0,function*(){let et=new h.default(p.default.SignalingRequestFailed);return yield new dt.default(this.logger,this.wrapTaskName("PromoteToPrimaryMeeting"),[new en.default(this.logger,new St.default(this.meetingSessionContext,fe,nt=>{et=nt}),this.configuration.connectionTimeoutMs)]).run(),this.promotedToPrimaryMeeting=et.statusCode()===p.default.OK,et})}demoteFromPrimaryMeeting(){this.meetingSessionContext.signalingClient.demoteFromPrimaryMeeting(),this.forEachObserver(fe=>{Kn.Maybe.of(fe.audioVideoWasDemotedFromPrimaryMeeting).map(et=>et.bind(fe)(new h.default(p.default.OK)))})}videoInputDidChange(fe){return g(this,void 0,void 0,function*(){if(this.logger.info("Receive a video input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating video input because there is no active meeting and peer connection");return}this._videoTileController.hasStartedLocalVideoTile()&&(fe?yield this.replaceLocalVideo(fe):this._videoTileController.stopLocalVideoTile())})}audioInputDidChange(fe){return g(this,void 0,void 0,function*(){if(this.logger.info("Receive an audio input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating audio input because there is no active meeting and peer connection");return}if(!fe)try{fe=yield this.mediaStreamBroker.acquireAudioInputStream()}catch{this.logger.error("Could not acquire audio track from mediaStreamBroker");return}yield this.replaceLocalAudio(fe)})}constructor(fe,et,nt,nn,kt,Jt){this._audioProfile=new e.default,this.connectionHealthData=new r.default,this.observerQueue=new Set,this.meetingSessionContext=new xe.default,this.enableSimulcast=!1,this.enableSVC=!1,this.useUpdateTransceiverControllerForUplink=!1,this.totalRetryCount=0,this.startAudioVideoTimestamp=0,this.mayNeedRenegotiationForSimulcastLayerChange=!1,this.promotedToPrimaryMeeting=!1,this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!1,this.receiveIndexTask=void 0,this.monitorTask=void 0,this.receiveRemotePauseResumeTask=void 0,this.destroyed=!1,this._logger=et,this.sessionStateController=new C.default(this._logger),this._configuration=fe,this._webSocketAdapter=nt,this._realtimeController=new b.default(nn),this._realtimeController.realtimeSetLocalAttendeeId(fe.credentials.attendeeId,fe.credentials.externalUserId),this._mediaStreamBroker=nn,this._reconnectController=kt,this._videoTileController=new Mt.default(new Ot.default,this,this._logger),this._audioMixController=new i.default(this._logger),this._mediaStreamBroker.addMediaStreamBrokerObserver(this._audioMixController),this.meetingSessionContext.logger=this._logger,this._eventController=Jt}},"DefaultAudioVideoController");l.default=Dt,Dt.MIN_VOLUME_DECIBELS=-42,Dt.MAX_VOLUME_DECIBELS=-14,Dt.PING_PONG_INTERVAL_MS=1e4},8589145157:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(4571447548)),v=u(c(913629600)),g=u(c(5047661014)),s=u(c(9437918857)),a=u(c(6226061697)),i=u(c(8023404193)),e=u(c(7551081659)),t=u(c(9447989038)),r=u(c(803810435)),o=u(c(2114525466)),f=u(c(7880459944)),h=u(c(1833994912));let p=n(class extends h.default{setAudioProfile(y){}start(){}stop(){}promoteToPrimaryMeeting(y){return Promise.resolve(new e.default(t.default.OK))}demoteFromPrimaryMeeting(){}constructor(y){const S=new a.default;S.meetingId="",S.externalMeetingId="",S.credentials=new i.default,S.credentials.attendeeId="",S.credentials.joinToken="",S.urls=new r.default,S.urls.turnControlURL="",S.urls.audioHostURL="",S.urls.signalingURL="wss://localhost/";const b=new g.default;super(y||S,b,new f.default(new g.default),new s.default,new o.default(0,new m.default(0,0,0)),new v.default(y||S,b))}},"NoOpAudioVideoController");l.default=p},9305916160:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(g,s,a,i){function e(t){return t instanceof a?t:new a(function(r){r(t)})}return n(e,"adopt"),new(a||(a=Promise))(function(t,r){function o(p){try{h(i.next(p))}catch(d){r(d)}}n(o,"fulfilled");function f(p){try{h(i.throw(p))}catch(d){r(d)}}n(f,"rejected");function h(p){p.done?t(p.value):e(p.value).then(o,f)}n(h,"step"),h((i=i.apply(g,s||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const m=c(7952414906);let v=n(class{addObserver(s){this.audioVideoController.addObserver(s),this.trace("addObserver")}removeObserver(s){this.audioVideoController.removeObserver(s),this.trace("removeObserver")}setAudioProfile(s){this.trace("setAudioProfile",s),this.audioVideoController.setAudioProfile(s)}start(s){this.audioVideoController.start(s),this.trace("start")}stop(){this.audioVideoController.stop(),this.trace("stop")}getRTCPeerConnectionStats(s){return this.trace("getRTCPeerConnectionStats",s?s.id:null),this.audioVideoController.getRTCPeerConnectionStats(s)}bindAudioElement(s){const a=this.audioMixController.bindAudioElement(s);return this.trace("bindAudioElement",s.id,a),a}unbindAudioElement(){this.audioMixController.unbindAudioElement(),this.trace("unbindAudioElement")}getCurrentMeetingAudioStream(){return this.trace("getCurrentConferenceStream"),this.audioMixController.getCurrentMeetingAudioStream()}addAudioMixObserver(s){this.trace("addAudioMixObserver"),this.audioMixController.addAudioMixObserver(s)}removeAudioMixObserver(s){this.trace("removeAudioMixObserver"),this.audioMixController.removeAudioMixObserver(s)}bindVideoElement(s,a){this.videoTileController.bindVideoElement(s,a),this.trace("bindVideoElement",{tileId:s,videoElementId:a.id})}unbindVideoElement(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.videoTileController.unbindVideoElement(s,a),this.trace("unbindVideoElement",{tileId:s,cleanUpVideoElement:a})}startLocalVideoTile(){const s=this.videoTileController.startLocalVideoTile();return this.trace("startLocalVideoTile",null,s),s}stopLocalVideoTile(){this.videoTileController.stopLocalVideoTile(),this.trace("stopLocalVideoTile")}hasStartedLocalVideoTile(){const s=this.videoTileController.hasStartedLocalVideoTile();return this.trace("hasStartedLocalVideoTile",null,s),s}removeLocalVideoTile(){this.videoTileController.removeLocalVideoTile(),this.trace("removeLocalVideoTile")}getLocalVideoTile(){const s=this.videoTileController.getLocalVideoTile();return this.trace("getLocalVideoTile"),s}pauseVideoTile(s){this.videoTileController.pauseVideoTile(s),this.trace("pauseVideoTile",s)}unpauseVideoTile(s){this.videoTileController.unpauseVideoTile(s),this.trace("unpauseVideoTile",s)}getVideoTile(s){const a=this.videoTileController.getVideoTile(s);return this.trace("getVideoTile",s),a}getAllRemoteVideoTiles(){const s=this.videoTileController.getAllRemoteVideoTiles();return this.trace("getAllRemoteVideoTiles"),s}getAllVideoTiles(){const s=this.videoTileController.getAllVideoTiles();return this.trace("getAllVideoTiles"),s}addVideoTile(){const s=this.videoTileController.addVideoTile();return this.trace("addVideoTile",null,s.state()),s}removeVideoTile(s){this.videoTileController.removeVideoTile(s),this.trace("removeVideoTile",s)}removeVideoTilesByAttendeeId(s){const a=this.videoTileController.removeVideoTilesByAttendeeId(s);return this.trace("removeVideoTilesByAttendeeId",s,a),a}removeAllVideoTiles(){this.videoTileController.removeAllVideoTiles(),this.trace("removeAllVideoTiles")}captureVideoTile(s){const a=this.videoTileController.captureVideoTile(s);return this.trace("captureVideoTile",s),a}realtimeSubscribeToAttendeeIdPresence(s){this.realtimeController.realtimeSubscribeToAttendeeIdPresence(s),this.trace("realtimeSubscribeToAttendeeIdPresence")}realtimeUnsubscribeToAttendeeIdPresence(s){this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(s),this.trace("realtimeUnsubscribeToAttendeeIdPresence")}realtimeSetCanUnmuteLocalAudio(s){this.realtimeController.realtimeSetCanUnmuteLocalAudio(s),this.trace("realtimeSetCanUnmuteLocalAudio",s)}realtimeSubscribeToSetCanUnmuteLocalAudio(s){this.realtimeController.realtimeSubscribeToSetCanUnmuteLocalAudio(s),this.trace("realtimeSubscribeToSetCanUnmuteLocalAudio")}realtimeUnsubscribeToSetCanUnmuteLocalAudio(s){this.realtimeController.realtimeUnsubscribeToSetCanUnmuteLocalAudio(s),this.trace("realtimeUnsubscribeToSetCanUnmuteLocalAudio")}realtimeCanUnmuteLocalAudio(){const s=this.realtimeController.realtimeCanUnmuteLocalAudio();return this.trace("realtimeCanUnmuteLocalAudio",null,s),s}realtimeMuteLocalAudio(){this.realtimeController.realtimeMuteLocalAudio(),this.trace("realtimeMuteLocalAudio")}realtimeUnmuteLocalAudio(){const s=this.realtimeController.realtimeUnmuteLocalAudio();return this.trace("realtimeUnmuteLocalAudio"),s}realtimeSubscribeToMuteAndUnmuteLocalAudio(s){this.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(s),this.trace("realtimeSubscribeToMuteAndUnmuteLocalAudio")}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(s){this.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(s),this.trace("realtimeUnsubscribeToMuteAndUnmuteLocalAudio")}realtimeIsLocalAudioMuted(){const s=this.realtimeController.realtimeIsLocalAudioMuted();return this.trace("realtimeIsLocalAudioMuted"),s}realtimeSubscribeToVolumeIndicator(s,a){this.realtimeController.realtimeSubscribeToVolumeIndicator(s,a),this.trace("realtimeSubscribeToVolumeIndicator",s)}realtimeUnsubscribeFromVolumeIndicator(s,a){this.realtimeController.realtimeUnsubscribeFromVolumeIndicator(s,a),this.trace("realtimeUnsubscribeFromVolumeIndicator",s,a)}realtimeSubscribeToLocalSignalStrengthChange(s){this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(s),this.trace("realtimeSubscribeToLocalSignalStrengthChange")}realtimeUnsubscribeToLocalSignalStrengthChange(s){this.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(s),this.trace("realtimeUnsubscribeToLocalSignalStrengthChange")}realtimeSendDataMessage(s,a,i){this.realtimeController.realtimeSendDataMessage(s,a,i),this.trace("realtimeSendDataMessage")}realtimeSubscribeToReceiveDataMessage(s,a){this.realtimeController.realtimeSubscribeToReceiveDataMessage(s,a),this.trace("realtimeSubscribeToReceiveDataMessage")}realtimeUnsubscribeFromReceiveDataMessage(s){this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(s),this.trace("realtimeUnsubscribeFromReceiveDataMessage")}realtimeSubscribeToFatalError(s){this.realtimeController.realtimeSubscribeToFatalError(s),this.trace("realtimeSubscribeToFatalError")}realtimeUnsubscribeToFatalError(s){this.realtimeController.realtimeUnsubscribeToFatalError(s),this.trace("realtimeUnsubscribeToFatalError")}subscribeToActiveSpeakerDetector(s,a,i,e){this.audioVideoController.activeSpeakerDetector.subscribe(s,a,i,e),this.trace("subscribeToActiveSpeakerDetector")}unsubscribeFromActiveSpeakerDetector(s){this.audioVideoController.activeSpeakerDetector.unsubscribe(s),this.trace("unsubscribeFromActiveSpeakerDetector")}listAudioInputDevices(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const a=yield this.deviceController.listAudioInputDevices(s);return this.trace("listAudioInputDevices",s,a),a})}listVideoInputDevices(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const a=yield this.deviceController.listVideoInputDevices(s);return this.trace("listVideoInputDevices",s,a),a})}listAudioOutputDevices(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const a=yield this.deviceController.listAudioOutputDevices(s);return this.trace("listAudioOutputDevices",s,a),a})}startAudioInput(s){return u(this,void 0,void 0,function*(){return this.trace("startAudioInput",s),this.deviceController.startAudioInput(s)})}stopAudioInput(){return u(this,void 0,void 0,function*(){return this.trace("stopAudioInput"),this.deviceController.stopAudioInput()})}startVideoInput(s){return u(this,void 0,void 0,function*(){return m.isVideoTransformDevice(s)?this.trace("startVideoInput with transform device"):this.trace("startVideoInput",s),this.deviceController.startVideoInput(s)})}stopVideoInput(){return u(this,void 0,void 0,function*(){return this.trace("stopVideoInput"),this.deviceController.stopVideoInput()})}chooseAudioOutput(s){const a=this.deviceController.chooseAudioOutput(s);return this.trace("chooseAudioOutput",s),a}addDeviceChangeObserver(s){this.deviceController.addDeviceChangeObserver(s),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(s){this.deviceController.removeDeviceChangeObserver(s),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){const s=this.deviceController.createAnalyserNodeForAudioInput();return this.trace("createAnalyserNodeForAudioInput"),s}startVideoPreviewForVideoInput(s){this.deviceController.startVideoPreviewForVideoInput(s),this.trace("startVideoPreviewForVideoInput",s.id)}stopVideoPreviewForVideoInput(s){this.deviceController.stopVideoPreviewForVideoInput(s),this.trace("stopVideoPreviewForVideoInput",s.id)}setDeviceLabelTrigger(s){this.deviceController.setDeviceLabelTrigger(s),this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(s){const a=this.deviceController.mixIntoAudioInput(s);return this.trace("mixIntoAudioInput",s.id),a}chooseVideoInputQuality(s,a,i){this.deviceController.chooseVideoInputQuality(s,a,i),this.trace("chooseVideoInputQuality",{width:s,height:a,frameRate:i})}setVideoMaxBandwidthKbps(s){this.audioVideoController.setVideoMaxBandwidthKbps(s),this.trace("setVideoMaxBandwidthKbps",s)}setVideoCodecSendPreferences(s){this.audioVideoController.setVideoCodecSendPreferences(s),this.trace("setVideoCodecSendPreferences",s)}getVideoInputQualitySettings(){const s=this.deviceController.getVideoInputQualitySettings();return this.trace("getVideoInputQualitySettings"),s}setContentAudioProfile(s){this.trace("setContentAudioProfile",s),this.contentShareController.setContentAudioProfile(s)}enableSimulcastForContentShare(s,a){this.trace("enableSimulcastForContentShare"),this.contentShareController.enableSimulcastForContentShare(s,a)}enableSVCForContentShare(s){this.trace("enableSVCForContentShare"),this.contentShareController.enableSVCForContentShare(s)}startContentShare(s){const a=this.contentShareController.startContentShare(s);return this.trace("startContentShare"),a}startContentShareFromScreenCapture(s,a){const i=this.contentShareController.startContentShareFromScreenCapture(s,a);return this.trace("startContentShareFromScreenCapture"),i}pauseContentShare(){this.contentShareController.pauseContentShare(),this.trace("pauseContentShare")}unpauseContentShare(){this.contentShareController.unpauseContentShare(),this.trace("unpauseContentShare")}stopContentShare(){this.contentShareController.stopContentShare(),this.trace("stopContentShare")}addContentShareObserver(s){this.contentShareController.addContentShareObserver(s),this.trace("addContentShareObserver")}removeContentShareObserver(s){this.contentShareController.removeContentShareObserver(s),this.trace("removeContentShareObserver")}setContentShareVideoCodecPreferences(s){this.contentShareController.setContentShareVideoCodecPreferences(s),this.trace("setContentShareVideoCodecPreferences")}trace(s,a,i){const e=this.audioVideoController.configuration.meetingId,t=this.audioVideoController.configuration.credentials.attendeeId;let r=`API/DefaultAudioVideoFacade/${e}/${t}/${s}`;typeof a<"u"&&(r+=` ${JSON.stringify(a)}`),typeof i<"u"&&(r+=` -> ${JSON.stringify(i)}`),this.audioVideoController.logger.info(r)}getRemoteVideoSources(){const s=this.audioVideoController.getRemoteVideoSources();return this.trace("getRemoteVideoSources",null,s),s}get transcriptionController(){return this.realtimeController.transcriptionController}promoteToPrimaryMeeting(s){this.audioVideoController.removeObserver(this),this.audioVideoController.addObserver(this);const a=this.audioVideoController.promoteToPrimaryMeeting(s);return this.trace("promoteToPrimaryMeeting",null,a),a}demoteFromPrimaryMeeting(){this.trace("demoteFromPrimaryMeeting"),this.audioVideoController.demoteFromPrimaryMeeting()}audioVideoWasDemotedFromPrimaryMeeting(s){this.contentShareController.stopContentShare(),this.audioVideoController.removeObserver(this)}constructor(s,a,i,e,t,r){this.audioVideoController=s,this.videoTileController=a,this.realtimeController=i,this.audioMixController=e,this.deviceController=t,this.contentShareController=r}},"DefaultAudioVideoFacade");l.default=v},5281791356:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(890779530)),g=c(1174868230);let s=n(class extends v.default{drawImageWithMask(i,e){const t=this.blurredImage,{canvasCtx:r,targetCanvas:o}=this,{width:f,height:h}=o;if(!e||!t){r.clearRect(0,0,f,h);return}this.scaledCanvas.getContext("2d").putImageData(e,0,0),this.blurCanvasCtx.putImageData(this.blurredImage,0,0),r.save(),r.clearRect(0,0,f,h),r.drawImage(this.scaledCanvas,0,0,f,h),r.globalCompositeOperation="source-in",r.drawImage(i,0,0,f,h),r.globalCompositeOperation="destination-over",r.drawImage(this.blurCanvas,0,0,f,h),r.restore()}setBlurStrength(i){if(super.setBlurStrength(i),this.worker){this.modelInitialized=!1,this.worker.postMessage({msg:"destroy"});const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}})}}setBlurPixels(){this.blurAmount=g.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:540}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}handleInitialize(i){if(this.logger.info(`received initialize message: ${this.stringify(i)}`),!i.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}}),this.initWorkerPromise.resolve({})}handlePredict(i){this.blurredImage=i.payload.blurOutput,super.handlePredict(i)}destroy(){const i=Object.create(null,{destroy:{get:()=>super.destroy}});var e;return u(this,void 0,void 0,function*(){i.destroy.call(this),(e=this.blurCanvas)===null||e===void 0||e.remove(),this.blurCanvas=void 0})}constructor(i,e){super(i,e),this.blurCanvas=document.createElement("canvas"),this.blurCanvasCtx=this.blurCanvas.getContext("2d"),this.blurCanvas.width=this.spec.model.input.width,this.blurCanvas.height=this.spec.model.input.height,this.logger.info("BackgroundBlur processor using builtin blur")}},"BackgroundBlurProcessorBuiltIn");l.default=s},890779530:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(5407648653)),g=c(1174868230),s=m(c(3724840282));let a=n(class extends v.default{validateOptions(e){if(super.validateOptions(e),!e.blurStrength)throw new Error("processor has null options - blurStrength")}initOnFirstExecution(){this.setBlurPixels()}drawImageWithMask(e,t){t||(t=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(t,0,0);const{canvasCtx:o,targetCanvas:f}=this,{width:h,height:p}=f;o.save(),o.clearRect(0,0,h,p),o.drawImage(this.scaledCanvas,0,0,h,p),o.globalCompositeOperation="source-in",o.drawImage(e,0,0,h,p),o.globalCompositeOperation="destination-over",o.filter=`blur(${this.blurAmount}px)`,o.drawImage(e,0,0,f.width,f.height),o.restore()}setBlurStrength(e){this._blurStrength=e,this.logger.info(`blur strength set to ${this._blurStrength}`),this.setBlurPixels()}setBlurPixels(){this.blurAmount=g.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:this.sourceHeight}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}addObserver(e){this.delegate.addObserver(e)}removeObserver(e){this.delegate.removeObserver(e)}static isSupported(){return u(this,void 0,void 0,function*(){const e=document.createElement("canvas"),t=e.getContext("2d").filter!==void 0;return e.remove(),t})}setEventController(e){this.eventController?this.eventController=e:(this.eventController=e,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const e={backgroundBlurEnabled:"true",backgroundBlurStrength:this._blurStrength,backgroundReplacementEnabled:"false",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",e)}constructor(e,t){super("background blur",e,t,new s.default),this.blurAmount=0,this.setBlurStrength(t.blurStrength),this.logger.info("BackgroundBlur processor successfully created"),this.logger.info(`BackgroundBlur spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundBlur options: ${this.stringify(t)}`)}},"BackgroundBlurProcessorProvided");l.default=a},1174868230:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.BlurStrengthMapper=void 0;const c={LOW:7,MEDIUM:15,HIGH:30};let u=n(class{static getBlurAmount(v,g){if(v<=0)throw new Error(`invalid value for blur strength: ${v}`);return Math.round(v*g.height/this.BLUR_STRENGTH_DIVISOR)}},"BlurStrengthMapper");l.BlurStrengthMapper=u,u.BLUR_STRENGTH_DIVISOR=540,l.default=c},3437938989:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(f,h,p,d){function y(S){return S instanceof p?S:new p(function(b){b(S)})}return n(y,"adopt"),new(p||(p=Promise))(function(S,b){function _(R){try{w(d.next(R))}catch(O){b(O)}}n(_,"fulfilled");function C(R){try{w(d.throw(R))}catch(O){b(O)}}n(C,"rejected");function w(R){R.done?S(R.value):y(R.value).then(_,C)}n(w,"step"),w((d=d.apply(f,h||[])).next())})},m=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(6828608641)),g=m(c(3714104304)),s=m(c(1370928943)),a=m(c(3814682321)),i=m(c(5281791356)),e=m(c(890779530)),t=m(c(1174868230));let r=n(class extends a.default{setBlurStrength(){}loadAssets(){return u(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}},"NoOpBackgroundBlurProcessor"),o=n(class hu extends v.default{static create(h,p){return u(this,void 0,void 0,function*(){h=hu.resolveSpec(h),p=hu.resolveOptions(p);const{logger:d}=p,y=yield hu.isSupported(h,p);if(d.info(`processor is ${y?"":"not"} supported`),!y)return d.warn("Using no-op processor because background blur is not supported"),new r;let S;return(yield e.default.isSupported())?(d.info("Using browser-provided background blur"),S=new e.default(h,p)):(d.info("Using built-in background blur"),S=new i.default(h,p)),yield S.loadAssets(),S})}static resolveOptions(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=Object.assign({},h);return p.blurStrength||(p.blurStrength=t.default.MEDIUM),p.logger||(p.logger=new g.default("BackgroundBlurProcessor",s.default.INFO)),p=super.resolveOptions(p),p}static isSupported(h,p){return h=hu.resolveSpec(h),p=hu.resolveOptions(p),super.isSupported(h,p)}},"BackgroundBlurVideoFrameProcessor");l.default=o},3724840282:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(5703733606));let v=n(class extends m.default{},"BackgroundBlurVideoFrameProcessorDelegate");l.default=v},3051230507:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class pv{static builder(){return new pv}withDefaultModel(){return this.withSelfieSegmentationDefaults()}withSelfieSegmentationDefaults(){const m={height:144,width:256,range:[0,1],channels:3},v={height:144,width:256,range:[0,1],channels:1},g="https://static.sdkassets.chime.aws/bgblur/models/selfie_segmentation_landscape.tflite";return this.path=g,this.input=m,this.output=v,this}withPath(m){return this.path=m,this}withInput(m){return this.input=m,this}withOutput(m){return this.output=m,this}validate(){if(!this.path)throw new Error("model spec path is not set");if(!this.input)throw new Error("model spec input is not set");if(!this.output)throw new Error("model spec output is not set")}build(){return this.validate(),{path:this.path,input:this.input,output:this.output}}constructor(){this.path=null,this.input=null,this.output=null}},"ModelSpecBuilder");l.default=c},3522273832:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const c=.8;let u=n(class{reportEvent(v){const g=v-this.lastReportedEventTimestamp;if(g>=this.reportingPeriodMillis){const s=this.filterCount,a=this.filterTotalMillis;if(this.filterCount=0,this.filterTotalMillis=0,this.lastReportedEventTimestamp=v,this.framerate===0||s===0)return;const i=Math.round(a/s),e=Math.round(this.framerate*(g/1e3))-s,t=Math.round(100*a/g);i>=this.filterDurationNotifyMillis&&this.delegate.filterFrameDurationHigh({framesDropped:e,avgFilterDurationMillis:i,framerate:this.framerate,periodMillis:g}),t>=this.filterCPUUtilization&&this.delegate.filterCPUUtilizationHigh({cpuUtilization:t,filterMillis:a,periodMillis:g})}}setSegmentationDuration(){this.filterDurationNotifyMillis=Math.round(1e3/this.framerate*c)}frameReceived(v){v!==this.framerate&&(this.framerate=v,this.logger.info(`frame counter setting frame rate to ${this.framerate}`),this.setSegmentationDuration());const g=Date.now();this.reportEvent(g)}filterSubmitted(){this._processingFilter=!0,this.lastFilterCompleteTimestamp=Date.now()}filterComplete(){this.filterTotalMillis+=Date.now()-this.lastFilterCompleteTimestamp,this._processingFilter=!1,this.filterCount++}get processingSegment(){return this._processingFilter}constructor(v,g,s,a){this.delegate=v,this.reportingPeriodMillis=g,this.filterCPUUtilization=s,this.logger=a,this._processingFilter=!0,this.lastReportedEventTimestamp=0,this.lastFilterCompleteTimestamp=0,this.filterTotalMillis=0,this.filterCount=0,this.framerate=0,this.filterDurationNotifyMillis=0,this.setSegmentationDuration()}},"BackgroundFilterFrameCounter");l.default=u},5407648653:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(t,r,o,f){function h(p){return p instanceof o?p:new o(function(d){d(p)})}return n(h,"adopt"),new(o||(o=Promise))(function(p,d){function y(_){try{b(f.next(_))}catch(C){d(C)}}n(y,"fulfilled");function S(_){try{b(f.throw(_))}catch(C){d(C)}}n(S,"rejected");function b(_){_.done?p(_.value):h(_.value).then(y,S)}n(b,"step"),b((f=f.apply(t,r||[])).next())})},m=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.BackgroundFilterMonitor=void 0;const v=c(5963876428),g=m(c(1458156729)),s=m(c(3522273832));let a=n(class{whenNext(){return this.promise||(this.promise=new Promise(r=>this.resolve=r)),this.promise}next(r){this.value=r,this.resolve(r),delete this.promise}constructor(){this.value=void 0,this.resolve=null}},"DeferredObservable"),i=n(class Tg{static createWorkerPromise(){const r={resolve:null,reject:null,promise:null};return r.promise=new Promise((o,f)=>{r.resolve=o,r.reject=f}),r}validateSpec(r){if(!r)throw new Error("processor has null spec");if(!r.model)throw new Error("processor spec has null model");if(!r.paths)throw new Error("processor spec has null paths")}validateOptions(r){if(!r)throw new Error("processor has null options");if(!r.logger)throw new Error("processor has null options - logger");if(!r.reportingPeriodMillis)throw new Error("processor has null options - reportingPeriodMillis");if(!r.filterCPUUtilization)throw new Error("processor has null options - filterCPUUtilization")}initCPUMonitor(r){this.videoFramesPerFilterUpdate=1,this.frameCounter=new s.default(this.delegate,r.reportingPeriodMillis,r.filterCPUUtilization,this.logger),this.cpuMonitor=new e(5e3,{reduceCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.min(this.videoFramesPerFilterUpdate+1,10))},increaseCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.max(this.videoFramesPerFilterUpdate-1,1))}}),this.delegate.addObserver(this.cpuMonitor)}stringify(r){return JSON.stringify(r,null,2)}handleInitialize(r){if(this.logger.info(`received initialize message: ${this.stringify(r)}`),!r.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const o=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:o.path,inputHeight:o.input.height,inputWidth:o.input.width,inputChannels:4,modelRangeMin:o.input.range[0],modelRangeMax:o.input.range[1],blurPixels:0}}),this.initWorkerPromise.resolve({})}handleLoadModel(r){if(this.logger.info(`received load model message: ${this.stringify(r)}`),r.payload!==2){this.logger.error("failed to load model! status: "+r.payload),this.loadModelPromise.reject(new Error("failed to load model! status: "+r.payload));return}this.modelInitialized=!0,this.loadModelPromise.resolve({})}handlePredict(r){this.mask$.next(r.payload.output)}handleWorkerEvent(r){const o=r.data;switch(o.msg){case"initialize":this.handleInitialize(o);break;case"loadModel":this.handleLoadModel(o);break;case"predict":this.handlePredict(o);break;default:this.logger.info(`unexpected event msg: ${this.stringify(o)}`);break}}loadAssets(){return u(this,void 0,void 0,function*(){this.logger.info("start initializing the processor");try{this.worker=yield v.loadWorker(this.spec.paths.worker,"BackgroundFilterWorker",{},null),this.worker.addEventListener("message",r=>this.handleWorkerEvent(r)),this.worker.postMessage({msg:"initialize",payload:{wasmPath:this.spec.paths.wasm,simdPath:this.spec.paths.simd}}),yield this.initWorkerPromise.promise,this.logger.info(`successfully initialized the ${this.filterType} worker`),yield this.loadModelPromise.promise,this.logger.info(`successfully loaded ${this.filterType} worker segmentation model`)}catch(r){throw new Error(`could not initialize the ${this.filterType} video frame processor due to '${r.message}'`)}this.logger.info(`successfully initialized the ${this.filterType} processor`)})}process(r){return u(this,void 0,void 0,function*(){if(this.destroyed)return r;this.frameCounter.frameReceived(r[0].framerate),this.cpuMonitor.frameReceived();const o=r[0].asCanvasElement();if(!o)return r;if(!this.modelInitialized)return r[0]=this.canvasVideoFrameBuffer,r;const f=o.width,h=o.height;if(f===0||h===0)return r;this.sourceWidth===0&&(this.sourceWidth=f,this.sourceHeight=h,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight,this.logger.info(`${this.filterType} source width: ${this.sourceWidth}`),this.logger.info(`${this.filterType} source height: ${this.sourceHeight}`),this.initOnFirstExecution()),(this.sourceWidth!==f||this.sourceHeight!==h)&&(this.sourceWidth=f,this.sourceHeight=h,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight);try{this.frameCounter.filterSubmitted();let p=this.mask$.value;const d=this.spec.model.input.width/o.width,y=this.spec.model.input.height/o.height;this.scaledCanvas===void 0&&(this.scaledCanvas=document.createElement("canvas"),this.scaledCanvas.width=this.spec.model.input.width,this.scaledCanvas.height=this.spec.model.input.height);const S=this.scaledCanvas.getContext("2d");S.save(),S.scale(d,y),S.drawImage(o,0,0),S.restore();const b=S.getImageData(0,0,this.scaledCanvas.width,this.scaledCanvas.height);if(this.frameNumber%this.videoFramesPerFilterUpdate===0){const _=this.mask$.whenNext();this.worker.postMessage({msg:"predict",payload:b},[b.data.buffer]),p=yield _}this.destroyed||this.drawImageWithMask(o,p)}catch(p){return this.logger.error(`could not process ${this.filterType} frame buffer due to ${p}`),r}finally{this.frameCounter.filterComplete(),this.frameNumber++}return r[0]=this.canvasVideoFrameBuffer,r})}updateVideoFramesPerFilterUpdate(r){r!==this.videoFramesPerFilterUpdate&&(this.videoFramesPerFilterUpdate=r,this.logger.info(`Adjusting filter rate to compensate for CPU utilization. Filter rate is ${this.videoFramesPerFilterUpdate} video frames per filter.`))}destroy(){var r,o,f,h;return u(this,void 0,void 0,function*(){this.destroyed=!0,this.delegate.removeObserver(this.cpuMonitor),this.canvasVideoFrameBuffer.destroy(),(r=this.worker)===null||r===void 0||r.postMessage({msg:"destroy"}),(o=this.worker)===null||o===void 0||o.postMessage({msg:"stop"}),(f=this.targetCanvas)===null||f===void 0||f.remove(),this.targetCanvas=void 0,(h=this.scaledCanvas)===null||h===void 0||h.remove(),this.scaledCanvas=void 0,this.logger.info(`${this.filterType} frame process destroyed`)})}constructor(r,o,f,h,p){this.targetCanvas=document.createElement("canvas"),this.canvasCtx=this.targetCanvas.getContext("2d"),this.canvasVideoFrameBuffer=new g.default(this.targetCanvas),this.mask$=new a,this.sourceWidth=0,this.sourceHeight=0,this.frameNumber=0,this.videoFramesPerFilterUpdate=1,this.initWorkerPromise=Tg.createWorkerPromise(),this.loadModelPromise=Tg.createWorkerPromise(),this.modelInitialized=!1,this.destroyed=!1,this.filterType=r,this.validateSpec(o),this.validateOptions(f),this.spec=o,this.logger=f.logger,this.delegate=h,this.initCPUMonitor(f),this.eventController=p}},"BackgroundFilterProcessor");l.default=i;let e=n(class{filterCPUUtilizationHigh(){const r=Date.now();r-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis&&(this.lastCPUChangeTimestamp=r,this.observer.reduceCPUUtilization())}frameReceived(){const r=Date.now();r-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis*2&&(this.lastCPUChangeTimestamp=r,this.observer.increaseCPUUtilization())}constructor(r,o){this.monitoringPeriodMillis=r,this.observer=o,this.lastCPUChangeTimestamp=0}},"BackgroundFilterMonitor");l.BackgroundFilterMonitor=e},6828608641:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(f,h,p,d){function y(S){return S instanceof p?S:new p(function(b){b(S)})}return n(y,"adopt"),new(p||(p=Promise))(function(S,b){function _(R){try{w(d.next(R))}catch(O){b(O)}}n(_,"fulfilled");function C(R){try{w(d.throw(R))}catch(O){b(O)}}n(C,"rejected");function w(R){R.done?S(R.value):y(R.value).then(_,C)}n(w,"step"),w((d=d.apply(f,h||[])).next())})},m=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(l,"__esModule",{value:!0});const v=c(5963876428),g=c(7984036634),s=m(c(3051230507)),a=m(c(5546774952)),i=m(c(6885109343)),e=n(()=>s.default.builder().withSelfieSegmentationDefaults().build(),"CREATE_DEFAULT_MODEL_SPEC"),t="https://static.sdkassets.chime.aws",r={worker:`${t}/bgblur/workers/worker.js`,wasm:`${t}/bgblur/wasm/_cwt-wasm.wasm`,simd:`${t}/bgblur/wasm/_cwt-wasm-simd.wasm`};let o=n(class{static defaultAssetSpec(){const h=i.default.sdkVersionSemVer;return{assetGroup:`sdk-${h.major}.${h.minor}`}}static createUrlWithParams(h,p){const d=new URL(h),y=Object.keys(p);for(const S of y)p[S]!==void 0&&d.searchParams.set(S,p[S]);return d.toString()}static resolveSpec(h){const{paths:p=r,model:d=e(),assetGroup:y=this.defaultAssetSpec().assetGroup,revisionID:S=this.defaultAssetSpec().revisionID}=h||{},b={assetGroup:y,revisionID:S,sdk:encodeURIComponent(i.default.sdkVersion),ua:encodeURIComponent(i.default.sdkUserAgentLowResolution)};return p.worker=this.createUrlWithParams(p.worker,b),p.wasm=this.createUrlWithParams(p.wasm,b),p.simd=this.createUrlWithParams(p.simd,b),d.path=this.createUrlWithParams(d.path,b),{paths:p,model:d,assetGroup:y,revisionID:S}}static resolveOptions(h){h.reportingPeriodMillis||(h.reportingPeriodMillis=1e3);const p=30;return h.filterCPUUtilization?(h.filterCPUUtilization<0||h.filterCPUUtilization>100)&&(h.logger.warn(`filterCPUUtilization must be set to a range between 0 and 100 percent. Falling back to default of ${p} percent`),h.filterCPUUtilization=p):h.filterCPUUtilization=p,h}static isSupported(h,p){const{logger:d}=p;return typeof globalThis>"u"?(d.info("Browser does not have globalThis."),Promise.resolve(!1)):new a.default().supportsBackgroundFilter()?g.supportsWASM(globalThis,d)?this.supportsBackgroundFilter(globalThis,h,d):(d.info("Browser does not support WASM."),Promise.resolve(!1)):(d.info("Browser is not supported."),Promise.resolve(!1))}static supportsBackgroundFilter(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,p=arguments.length>1?arguments[1]:void 0,d=arguments.length>2?arguments[2]:void 0;return u(this,void 0,void 0,function*(){if(!g.supportsWorker(h,d))return d.info("Browser does not support web workers."),!1;const y=p.paths.worker;try{const S=yield v.loadWorker(y,"BackgroundFilterWorker",{},null);try{S.terminate()}catch(b){d.info(`Failed to terminate worker. ${b.message}`)}return!0}catch(S){return d.info(`Failed to fetch and instantiate test worker ${S.message}`),!1}})}},"BackgroundFilterVideoFrameProcessor");l.default=o},5703733606:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{addObserver(m){this.observers.add(m)}removeObserver(m){this.observers.delete(m)}filterFrameDurationHigh(m){var v;for(const g of this.observers)(v=g.filterFrameDurationHigh)===null||v===void 0||v.call(g,m)}filterCPUUtilizationHigh(m){var v;for(const g of this.observers)(v=g.filterCPUUtilizationHigh)===null||v===void 0||v.call(g,m)}constructor(){this.observers=new Set}},"BackgroundFilterVideoFrameProcessorDelegate");l.default=c},4950936447:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(5407648653)),g=m(c(2254148388));let s=n(class Cg extends v.default{setImageBlob(i){return u(this,void 0,void 0,function*(){this.replacementBlob=i,this.replacementImage=yield Cg.loadImage(this.createReplacementObjectUrl())})}initOnFirstExecution(){}drawImageWithMask(i,e){e||(e=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(e,0,0);const{canvasCtx:r,targetCanvas:o}=this,{width:f,height:h}=o;r.save(),r.clearRect(0,0,f,h),r.drawImage(this.scaledCanvas,0,0,f,h),r.globalCompositeOperation="source-in",r.drawImage(i,0,0,f,h),r.globalCompositeOperation="destination-over",r.drawImage(this.replacementImage,0,0,o.width,o.height),r.restore()}static loadImageExecutor(i,e,t){const r=new Image;r.crossOrigin="Anonymous",r.addEventListener("load",()=>{i(r)},!1),r.addEventListener("error",o=>{e(new Error(`Could not load replacement image ${r.src}: ${o.message}`))},!1),r.src=t}static loadImage(i){return u(this,void 0,void 0,function*(){return new Promise((e,t)=>this.loadImageExecutor(e,t,i))})}revokeReplacementObjectUrl(){this.replacementObjectUrl&&URL.revokeObjectURL(this.replacementObjectUrl)}createReplacementObjectUrl(){return this.revokeReplacementObjectUrl(),this.replacementObjectUrl=URL.createObjectURL(this.replacementBlob),this.replacementObjectUrl}loadAssets(){const i=Object.create(null,{loadAssets:{get:()=>super.loadAssets}});return u(this,void 0,void 0,function*(){this.replacementImage=yield Cg.loadImage(this.createReplacementObjectUrl()),i.loadAssets.call(this)})}addObserver(i){this.delegate.addObserver(i)}removeObserver(i){this.delegate.removeObserver(i)}destroy(){const i=Object.create(null,{destroy:{get:()=>super.destroy}});return u(this,void 0,void 0,function*(){i.destroy.call(this),this.revokeReplacementObjectUrl()})}setEventController(i){this.eventController?this.eventController=i:(this.eventController=i,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const i={backgroundBlurEnabled:"false",backgroundBlurStrength:"low",backgroundReplacementEnabled:"true",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",i)}constructor(i,e){super("background replacement",i,e,new g.default),this.replacementBlob=e.imageBlob,this.logger.info("BackgroundReplacement processor successfully created"),this.logger.info(`BackgroundReplacement spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundReplacement options: ${this.stringify(e)}`)}},"BackgroundReplacementFilter");l.default=s},3561775467:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(r,o,f,h){function p(d){return d instanceof f?d:new f(function(y){y(d)})}return n(p,"adopt"),new(f||(f=Promise))(function(d,y){function S(C){try{_(h.next(C))}catch(w){y(w)}}n(S,"fulfilled");function b(C){try{_(h.throw(C))}catch(w){y(w)}}n(b,"rejected");function _(C){C.done?d(C.value):p(C.value).then(S,b)}n(_,"step"),_((h=h.apply(r,o||[])).next())})},m=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(6828608641)),g=m(c(3714104304)),s=m(c(1370928943)),a=m(c(3814682321)),i=m(c(4950936447));let e=n(class extends a.default{loadAssets(){return u(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}setImageBlob(){return u(this,void 0,void 0,function*(){})}},"NoOpBackgroundReplacementProcessor"),t=n(class mv extends v.default{static create(o,f){return u(this,void 0,void 0,function*(){o=this.resolveSpec(o),f=this.resolveOptions(f),yield this.resolveOptionsAsync(f);const{logger:h}=f;if(!(yield mv.isSupported(o,f)))return h.warn("Using no-op processor because background replacement is not supported"),new e;h.info("Using background replacement filter");const d=new i.default(o,f);return yield d.loadAssets(),d})}static resolveOptions(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const f=Object.assign({},o);return f.logger||(f.logger=new g.default("BackgroundReplacementProcessor",s.default.INFO)),super.resolveOptions(f)}static resolveOptionsAsync(o){return u(this,void 0,void 0,function*(){if(!o.imageBlob){const f=document.createElement("canvas");f.width=100,f.height=100;const h=f.getContext("2d");h.fillStyle="blue",h.fillRect(0,0,100,100);const p=yield new Promise(d=>{f.toBlob(d)});o.imageBlob=p}})}static isSupported(o,f){const h=Object.create(null,{isSupported:{get:()=>super.isSupported}});return u(this,void 0,void 0,function*(){o=this.resolveSpec(o),f=this.resolveOptions(f),yield this.resolveOptionsAsync(f);const p=f.imageBlob,d=URL.createObjectURL(p);try{yield i.default.loadImage(d)}catch(y){return f.logger.info(`Failed to fetch load replacement image ${y.message}`),!1}finally{URL.revokeObjectURL(d)}return h.isSupported.call(this,o,f)})}},"BackgroundReplacementVideoFrameProcessor");l.default=t},2254148388:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(5703733606));let v=n(class extends m.default{},"BackgroundReplacementVideoFrameProcessorDelegate");l.default=v},4571447548:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{reset(){this.currentRetry=0}nextBackoffAmountMs(){const m=Math.random()*Math.min(this.longBackoffMs,this.shortBackoffMs*Math.pow(2,this.currentRetry))+this.fixedWaitMs;return this.currentRetry+=1,m}constructor(m,v,g){this.fixedWaitMs=m,this.shortBackoffMs=v,this.longBackoffMs=g,this.currentRetry=0,this.fixedWaitMs<0&&(this.fixedWaitMs=0),this.shortBackoffMs<0&&(this.shortBackoffMs=0),this.longBackoffMs<0&&(this.longBackoffMs=0),this.reset()}},"FullJitterBackoff");l.default=c},4692955950:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(4571447548)),v=u(c(1733276918));let g=n(class{create(){return new m.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs)}createWithLimit(a){return new v.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs,a)}constructor(a,i,e){this.fixedWaitMs=a,this.shortBackoffMs=i,this.longBackoffMs=e}},"FullJitterBackoffFactory");l.default=g},1733276918:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(4571447548));let v=n(class extends m.default{nextBackoffAmountMs(){if(this.attempts++,this.attempts>this.limit)throw new Error("retry limit exceeded");return super.nextBackoffAmountMs()}constructor(s,a,i,e){super(s,a,i),this.limit=e,this.attempts=0}},"FullJitterLimitedBackoff");l.default=v},5546774952:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(s,a,i,e){function t(r){return r instanceof i?r:new i(function(o){o(r)})}return n(t,"adopt"),new(i||(i=Promise))(function(r,o){function f(d){try{p(e.next(d))}catch(y){o(y)}}n(f,"fulfilled");function h(d){try{p(e.throw(d))}catch(y){o(y)}}n(h,"rejected");function p(d){d.done?r(d.value):t(d.value).then(f,h)}n(p,"step"),p((e=e.apply(s,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const m=c(585669709),v=c(888724265);let g=n(class Ig{version(){return this.browser.version}majorVersion(){return this.version()!==null?parseInt(this.version().split(".")[0]):-1}osMajorVersion(){return parseInt(this.uaParserResult.os.version.split(".")[0])}engine(){return this.uaParserResult.engine.name}engineMajorVersion(){return parseInt(this.uaParserResult.engine.version.split(".")[0])}name(){return this.browser.name}hasChromiumWebRTC(){for(const a of this.chromeLike)if(a===this.browser.name)return!0;return!1}hasWebKitWebRTC(){for(const a of this.webkitBrowsers)if(a===this.browser.name)return!0;return!1}hasFirefoxWebRTC(){return this.isFirefox()}requiresPlaybackLatencyHintForAudioContext(){return navigator.userAgent.indexOf("Windows")!==-1}supportsCanvasCapturedStreamPlayback(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()&&!this.isIOSEdge()||this.isIOSSafari()&&this.majorVersion()>=Ig.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK||this.majorVersion()>=Ig.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK}supportsBackgroundFilter(){return!(this.name()==="safari"&&this.majorVersion()===15||!this.supportsCanvasCapturedStreamPlayback())}supportsVideoLayersAllocationRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsDependencyDescriptorRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsScalableVideoCoding(){return this.hasChromiumWebRTC()&&this.engine()==="Blink"&&this.engineMajorVersion()>=111}supportsAudioRedundancy(){return this.hasChromiumWebRTC()?this.engineMajorVersion()>=107:!this.hasFirefoxWebRTC()}requiresResolutionAlignment(a,i){return this.isAndroid()&&this.isPixel3()?[Math.ceil(a/64)*64,Math.ceil(i/64)*64]:[a,i]}requiresCheckForSdpConnectionAttributes(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()}requiresIceCandidateGatheringTimeoutWorkaround(){return this.hasChromiumWebRTC()}requiresBundlePolicy(){return"max-bundle"}requiresNoExactMediaStreamConstraints(){return this.isSamsungInternet()}requiresGroupIdMediaStreamConstraints(){return this.isSamsungInternet()}getDisplayMediaAudioCaptureSupport(){return this.isChrome()||this.isEdge()}doesNotSupportMediaDeviceLabels(){return this.browser.name==="chromium-webview"}isSupported(){return!(!this.browserSupport[this.browser.name]||this.majorVersion()<this.browserSupport[this.browser.name]||this.browser.name==="firefox"&&this.isAndroid())}isSimulcastSupported(){return this.hasChromiumWebRTC()}supportDownlinkBandwidthEstimation(){return!this.isFirefox()}supportString(){if(this.isAndroid())return`${this.browserName.chrome} ${this.browserSupport.chrome}+, ${this.browserName.samsung} ${this.browserSupport.samsung}+`;const a=[];for(const i in this.browserSupport)a.push(`${this.browserName[i]} ${this.browserSupport[i]}+`);return a.join(", ")}supportedVideoCodecs(){return u(this,void 0,void 0,function*(){const a=new RTCPeerConnection;return a.addTransceiver("video",{direction:"inactive",streams:[]}),(yield a.createOffer({offerToReceiveVideo:!0})).sdp.split(`\r
`).filter(i=>i.includes("a=rtpmap:")).map(i=>i.replace(/.* /,"").replace(/\/.*/,"")).filter((i,e,t)=>t.indexOf(i)===e).filter(i=>i!=="rtx"&&i!=="red"&&i!=="ulpfec")})}supportsSetSinkId(){return"setSinkId"in HTMLAudioElement.prototype}disableResolutionScaleDown(){return this.isAndroid()}disable480pResolutionScaleDown(){return/( Chrome\/98\.)/i.test(navigator.userAgent)&&this.browser.os.startsWith("Windows")}requiresDisablingH264Encoding(){return(this.isIOSSafari()||this.isIOSChrome()||this.isIOSFirefox())&&(this.version()==="15.1.0"||/( OS 15_1)/i.test(navigator.userAgent))}requiresVideoPlayWorkaround(){return this.isSafari()}isVideoFxSupportedBrowser(){return this.supportsBackgroundFilter()}isIOSSafari(){return this.browser.name==="ios"||this.browser.name==="ios-webview"||this.browser.name==="safari"&&/( Mac )/i.test(navigator.userAgent)&&navigator.maxTouchPoints>1}isSafari(){return this.browser.name==="safari"||this.isIOSSafari()}isFirefox(){return this.browser.name==="firefox"}isIOSFirefox(){return this.browser.name==="fxios"}isIOSChrome(){return this.browser.name==="crios"}isChrome(){return this.browser.name==="chrome"}isEdge(){return this.browser.name==="edge-chromium"}isIOSEdge(){return this.browser.name==="edge-ios"}isSamsungInternet(){return this.browser.name==="samsung"}isAndroid(){return/(android)/i.test(navigator.userAgent)}isPixel3(){return/( pixel 3)/i.test(navigator.userAgent)}constructor(){this.FALLBACK_BROWSER={type:"browser",name:"unknown",version:"unknown",os:"unknown"},this.browser=m.detect()||this.FALLBACK_BROWSER,this.uaParserResult=navigator&&navigator.userAgent?new v.UAParser(navigator.userAgent).getResult():null,this.browserSupport={chrome:78,"edge-chromium":79,electron:7,firefox:75,ios:13,safari:13,opera:66,samsung:12,crios:86,fxios:23,"ios-webview":605,"chromium-webview":92},this.browserName={chrome:"Google Chrome","edge-chromium":"Microsoft Edge",electron:"Electron",firefox:"Mozilla Firefox",ios:"Safari iOS",safari:"Safari",opera:"Opera",samsung:"Samsung Internet",crios:"Chrome iOS",fxios:"Firefox iOS","ios-webview":"WKWebView iOS","chromium-webview":"Chrome WebView"},this.chromeLike=["chrome","edge-chromium","chromium-webview","opera","samsung"],this.webkitBrowsers=["crios","fxios","safari","ios","ios-webview","edge-ios"]}},"DefaultBrowserBehavior");l.default=g,g.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK=16,g.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK=106},9029233041:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const m=c(4136617125),v=u(c(6502873558)),g=u(c(6132421099)),s=u(c(7966078085));let a=n(class gv{getMetricMap(e,t){switch(e){case g.default.AUDIO:switch(t){case v.default.UPSTREAM:return this.audioUpstreamMetricMap;case v.default.DOWNSTREAM:return this.audioDownstreamMetricMap}case g.default.VIDEO:switch(t){case v.default.UPSTREAM:return this.videoUpstreamMetricMap;case v.default.DOWNSTREAM:return this.videoDownstreamMetricMap}default:return this.globalMetricMap}}getStreamDimensionMap(){return this.streamDimensionMap}getObservableMetricValue(e){if(this.overriddenObservableMetrics.has(e))return this.overriddenObservableMetrics.get(e);const t=this.observableMetricSpec[e],o=this.getMetricMap(t.media,t.dir)[t.source],{transform:f,source:h}=o;if(t.hasOwnProperty("media"))for(const p in this.streamMetricReports){const d=this.streamMetricReports[p];if(d.direction===t.dir&&d.mediaType===t.media)return f(h||t.source,Number(p))}else return f(h||t.source);return 0}getObservableVideoMetricValue(e,t){const r=this.observableVideoMetricSpec[e],f=this.getMetricMap(r.media,r.dir)[r.source],{transform:h,source:p}=f;return h(p||r.source,t)}getVideoUpstreamSsrc(){for(const e in this.streamMetricReports)if(this.streamMetricReports[e].mediaType===g.default.VIDEO&&this.streamMetricReports[e].direction===v.default.UPSTREAM)return Number(e);return null}getObservableMetrics(){const e={};for(const t in this.observableMetricSpec)e[t]=this.getObservableMetricValue(t);return e}getObservableVideoMetrics(){const e={};if(!this.videoStreamIndex||!this.selfAttendeeId)return this.logger.error("Need to define VideoStreamIndex and selfAttendeeId if using getObservableVideoMetrics API"),e;for(const t in this.streamMetricReports)if(this.streamMetricReports[t].mediaType===g.default.VIDEO){const r={};for(const p in this.observableVideoMetricSpec)if(this.observableVideoMetricSpec[p].dir===this.streamMetricReports[t].direction){const d=this.getObservableVideoMetricValue(p,Number(t));isNaN(d)||(r[p]=d)}const o=this.streamMetricReports[t].groupId,f=this.streamMetricReports[t].streamId;let h="";this.videoStreamIndex.attendeeIdForGroupId!==void 0?h=o?this.videoStreamIndex.attendeeIdForGroupId(o):this.selfAttendeeId:h=f?this.videoStreamIndex.attendeeIdForStreamId(f):this.selfAttendeeId,e[h]=e[h]?e[h]:{},e[h][t]=r}return e}getRTCStatsReport(){return this.rtcStatsReport}clone(){const e=new gv(this.logger,this.videoStreamIndex,this.selfAttendeeId);return e.globalMetricReport=this.globalMetricReport,e.streamMetricReports=this.streamMetricReports,e.rtcStatsReport=this.rtcStatsReport,e.customStatsReports=this.customStatsReports,e.currentTimestampMs=this.currentTimestampMs,e.previousTimestampMs=this.previousTimestampMs,e.overriddenObservableMetrics=this.overriddenObservableMetrics,e}print(){const e={globalMetricReport:this.globalMetricReport,streamMetricReports:this.streamMetricReports,currentTimestampMs:this.currentTimestampMs,previousTimestampMs:this.previousTimestampMs};this.logger.debug(()=>`Client Metric Report: ${JSON.stringify(e)}`)}removeDestroyedSsrcs(){for(const e in this.streamMetricReports)this.currentSsrcs[e]||delete this.streamMetricReports[e]}overrideObservableMetric(e,t){this.overriddenObservableMetrics.set(e,t)}constructor(e,t,r){this.logger=e,this.videoStreamIndex=t,this.selfAttendeeId=r,this.globalMetricReport=new s.default,this.streamMetricReports={},this.rtcStatsReport={},this.customStatsReports=[],this.currentTimestampMs=0,this.previousTimestampMs=0,this.currentSsrcs={},this.overriddenObservableMetrics=new Map,this.identityValue=(o,f)=>{const h=f?this.streamMetricReports[f]:this.globalMetricReport;return Number(h.currentMetrics[o])},this.decoderLossPercent=(o,f)=>{const h=this.streamMetricReports[f],p=h.currentMetrics.concealedSamples-(h.previousMetrics.concealedSamples||0),d=h.currentMetrics.totalSamplesReceived-(h.previousMetrics.totalSamplesReceived||0);return d<=0||d-p<=0?0:p/d*100},this.packetLossPercent=(o,f)=>{const h=this.streamMetricReports[f],p=h.currentMetrics[o]-(h.previousMetrics[o]||0),d=h.currentMetrics.packetsLost-(h.previousMetrics.packetsLost||0),y=p+d;return y<=0||d<=0?0:d*100/y},this.jitterBufferMs=(o,f)=>{const h=this.streamMetricReports[f],p=h.currentMetrics.jitterBufferDelay-(h.previousMetrics.jitterBufferDelay||0),d=h.currentMetrics.jitterBufferEmittedCount-(h.previousMetrics.jitterBufferEmittedCount||0);return p<=0||d<=0?0:p/d*1e3},this.countPerSecond=(o,f)=>{const h=f?this.streamMetricReports[f]:this.globalMetricReport;let p=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(p<=0)return 0;this.previousTimestampMs<=0&&(p=1);const d=h.currentMetrics[o]-(h.previousMetrics[o]||0);return d<=0?0:Math.trunc(d/p)},this.bitsPerSecond=(o,f)=>{const h=f?this.streamMetricReports[f]:this.globalMetricReport;let p=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(p<=0)return 0;this.previousTimestampMs<=0&&(p=1);const d=(h.currentMetrics[o]-(h.previousMetrics[o]||0))*8;return d<=0?0:Math.trunc(d/p)},this.secondsToMilliseconds=(o,f)=>{const h=f?this.streamMetricReports[f]:this.globalMetricReport;return Number(h.currentMetrics[o]*1e3)},this.averageTimeSpentPerSecondInMilliseconds=(o,f)=>{const h=f?this.streamMetricReports[f]:this.globalMetricReport;let p=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(p<=0)return 0;this.previousTimestampMs<=0&&(p=1);const d=h.currentMetrics[o]-(h.previousMetrics[o]||0);return d<=0?0:d*1e3/p},this.averageCpuQualityLimitationDurationPerSecondInMilliseconds=(o,f)=>{const h=this.streamMetricReports[f];if(h.previousObjectMetrics[o]===void 0||h.currentObjectMetrics[o]===void 0)return NaN;let p=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(p<=0)return 0;this.previousTimestampMs<=0&&(p=1);let d=0,y=0;for(const[b,_]of Object.entries(h.previousObjectMetrics[o]))b==="cpu"&&(d=_);for(const[b,_]of Object.entries(h.currentObjectMetrics[o]))b==="cpu"&&(y=_);const S=y-d;return S<=0?0:S*1e3/p},this.isHardwareImplementation=(o,f)=>{const h=this.streamMetricReports[f];if(h.currentStringMetrics[o]===void 0)return NaN;const p=String(h.currentStringMetrics[o]),d=p.includes("ExternalDecoder")||p.includes("ExternalEncoder")||p.includes("EncodeAccelerator")||p.includes("DecodeAccelerator"),y=p.includes("fallback from");return d&&!y?1:0},this.globalMetricMap={retransmittedBytesSent:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_RETRANSMIT_BITRATE},totalEncodedBytesTarget:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_TARGET_ENCODER_BITRATE},totalPacketSendDelay:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_BUCKET_DELAY_MS},packetsDiscardedOnSend:{transform:this.countPerSecond,type:m.SdkMetric.Type.SOCKET_DISCARDED_PPS},availableIncomingBitrate:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_AVAILABLE_RECEIVE_BANDWIDTH},availableOutgoingBitrate:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_AVAILABLE_SEND_BANDWIDTH},currentRoundTripTime:{transform:this.secondsToMilliseconds,type:m.SdkMetric.Type.STUN_RTT_MS},audioLevel:{transform:this.identityValue,type:m.SdkMetric.Type.RTC_MIC_AUDIO_LEVEL,source:"audioLevel"}},this.audioUpstreamMetricMap={jitter:{transform:this.secondsToMilliseconds,type:m.SdkMetric.Type.RTC_MIC_JITTER_MS},packetsSent:{transform:this.countPerSecond,type:m.SdkMetric.Type.RTC_MIC_PPS},bytesSent:{transform:this.bitsPerSecond,type:m.SdkMetric.Type.RTC_MIC_BITRATE},roundTripTime:{transform:this.secondsToMilliseconds,type:m.SdkMetric.Type.RTC_MIC_RTT_MS},packetsLost:{transform:this.packetLossPercent,type:m.SdkMetric.Type.RTC_MIC_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"}},this.audioDownstreamMetricMap={concealedSamples:{transform:this.countPerSecond},totalSamplesReceived:{transform:this.countPerSecond},decoderLoss:{transform:this.decoderLossPercent,type:m.SdkMetric.Type.RTC_SPK_FRACTION_DECODER_LOSS_PERCENT},packetsReceived:{transform:this.countPerSecond,type:m.SdkMetric.Type.RTC_SPK_PPS},packetsLost:{transform:this.packetLossPercent,type:m.SdkMetric.Type.RTC_SPK_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},jitter:{transform:this.secondsToMilliseconds,type:m.SdkMetric.Type.RTC_SPK_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:m.SdkMetric.Type.RTC_SPK_JITTER_BUFFER_MS},bytesReceived:{transform:this.bitsPerSecond,type:m.SdkMetric.Type.RTC_SPK_BITRATE},audioLevel:{transform:this.identityValue,type:m.SdkMetric.Type.RTC_SPK_AUDIO_LEVEL},totalAudioPacketsLost:{transform:this.identityValue,type:m.SdkMetric.Type.RTC_SPK_TOTAL_LOST},totalAudioPacketsExpected:{transform:this.identityValue,type:m.SdkMetric.Type.RTC_SPK_TOTAL_EXPECTED},totalAudioPacketsRecoveredRed:{transform:this.identityValue,type:m.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_RED},totalAudioPacketsRecoveredFec:{transform:this.identityValue,type:m.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_FEC}},this.videoUpstreamMetricMap={roundTripTime:{transform:this.secondsToMilliseconds,type:m.SdkMetric.Type.VIDEO_SENT_RTT_MS},nackCount:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_NACKS_RECEIVED},pliCount:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_PLIS_RECEIVED},firCount:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_FIRS_RECEIVED},framesPerSecond:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_INPUT_FPS},framesEncoded:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_ENCODE_FPS},packetsSent:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_SENT_PPS},packetsLost:{transform:this.packetLossPercent,type:m.SdkMetric.Type.VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"},bytesSent:{transform:this.bitsPerSecond,type:m.SdkMetric.Type.VIDEO_SENT_BITRATE},qpSum:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_SENT_QP_SUM},frameHeight:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_ENCODE_HEIGHT},frameWidth:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_ENCODE_WIDTH},jitter:{transform:this.secondsToMilliseconds},totalEncodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:m.SdkMetric.Type.VIDEO_ENCODE_MS},encoderImplementation:{transform:this.isHardwareImplementation,type:m.SdkMetric.Type.VIDEO_ENCODER_IS_HARDWARE},qualityLimitationDurations:{transform:this.averageCpuQualityLimitationDurationPerSecondInMilliseconds,type:m.SdkMetric.Type.VIDEO_QUALITY_LIMITATION_DURATION_CPU},videoCodecDegradationHighEncodeCpu:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU},videoCodecDegradationEncodeFailure:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE}},this.videoDownstreamMetricMap={packetsReceived:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_RECEIVED_PPS},packetsLost:{transform:this.packetLossPercent,type:m.SdkMetric.Type.VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},framesReceived:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_RECEIVED_FPS},framesDecoded:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_DECODE_FPS},nackCount:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_NACKS_SENT},firCount:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_FIRS_SENT},pliCount:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_PLIS_SENT},bytesReceived:{transform:this.bitsPerSecond,type:m.SdkMetric.Type.VIDEO_RECEIVED_BITRATE},jitter:{transform:this.secondsToMilliseconds,type:m.SdkMetric.Type.VIDEO_RECEIVED_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:m.SdkMetric.Type.VIDEO_JITTER_BUFFER_MS},qpSum:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_RECEIVED_QP_SUM},frameHeight:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_DECODE_HEIGHT},frameWidth:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_DECODE_WIDTH},totalDecodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:m.SdkMetric.Type.VIDEO_DECODE_MS},decoderImplementation:{transform:this.isHardwareImplementation,type:m.SdkMetric.Type.VIDEO_DECODER_IS_HARDWARE},totalFreezesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:m.SdkMetric.Type.VIDEO_FREEZE_DURATION},freezeCount:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_FREEZE_COUNT},totalPausesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:m.SdkMetric.Type.VIDEO_PAUSE_DURATION},pauseCount:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_PAUSE_COUNT},framesDropped:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_DROPPED_FPS}},this.streamDimensionMap={encoderImplementation:m.SdkStreamDimension.Type.VIDEO_ENCODER_NAME,decoderImplementation:m.SdkStreamDimension.Type.VIDEO_DECODER_NAME},this.observableVideoMetricSpec={videoUpstreamBitrate:{source:"bytesSent",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoUpstreamPacketsSent:{source:"packetsSent",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoUpstreamPacketLossPercent:{source:"packetsLost",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoUpstreamFramesEncodedPerSecond:{source:"framesEncoded",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoUpstreamFramesInputPerSecond:{source:"framesPerSecond",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoUpstreamFrameHeight:{source:"frameHeight",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoUpstreamFrameWidth:{source:"frameWidth",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoUpstreamJitterMs:{source:"jitter",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoUpstreamRoundTripTimeMs:{source:"roundTripTime",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoUpstreamEncoderImplementation:{source:"encoderImplementation",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoUpstreamTotalEncodeTimePerSecond:{source:"totalEncodeTime",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoUpstreamCpuQualityLimitationDurationPerSecond:{source:"qualityLimitationDurations",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoDownstreamBitrate:{source:"bytesReceived",media:g.default.VIDEO,dir:v.default.DOWNSTREAM},videoDownstreamPacketLossPercent:{source:"packetsLost",media:g.default.VIDEO,dir:v.default.DOWNSTREAM},videoDownstreamPacketsReceived:{source:"packetsReceived",media:g.default.VIDEO,dir:v.default.DOWNSTREAM},videoDownstreamFramesDecodedPerSecond:{source:"framesDecoded",media:g.default.VIDEO,dir:v.default.DOWNSTREAM},videoDownstreamFrameHeight:{source:"frameHeight",media:g.default.VIDEO,dir:v.default.DOWNSTREAM},videoDownstreamFrameWidth:{source:"frameWidth",media:g.default.VIDEO,dir:v.default.DOWNSTREAM},videoDownstreamJitterMs:{source:"jitter",media:g.default.VIDEO,dir:v.default.DOWNSTREAM},videoDownstreamDelayMs:{source:"jitterBufferMs",media:g.default.VIDEO,dir:v.default.DOWNSTREAM}},this.observableMetricSpec={audioPacketsReceived:{source:"packetsReceived",media:g.default.AUDIO,dir:v.default.DOWNSTREAM},audioPacketsReceivedFractionLoss:{source:"packetsLost",media:g.default.AUDIO,dir:v.default.DOWNSTREAM},audioDecoderLoss:{source:"decoderLoss",media:g.default.AUDIO,dir:v.default.DOWNSTREAM},audioPacketsSent:{source:"packetsSent",media:g.default.AUDIO,dir:v.default.UPSTREAM},audioPacketLossPercent:{source:"packetsLost",media:g.default.AUDIO,dir:v.default.UPSTREAM},audioUpstreamRoundTripTimeMs:{source:"roundTripTime",media:g.default.AUDIO,dir:v.default.UPSTREAM},videoUpstreamBitrate:{source:"bytesSent",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoPacketSentPerSecond:{source:"packetsSent",media:g.default.VIDEO,dir:v.default.UPSTREAM},audioSpeakerDelayMs:{source:"jitterBufferMs",media:g.default.AUDIO,dir:v.default.DOWNSTREAM},audioUpstreamJitterMs:{source:"jitter",media:g.default.AUDIO,dir:v.default.UPSTREAM},audioDownstreamJitterMs:{source:"jitter",media:g.default.AUDIO,dir:v.default.DOWNSTREAM},nackCountReceivedPerSecond:{source:"nackCount",media:g.default.VIDEO,dir:v.default.UPSTREAM},availableOutgoingBitrate:{source:"availableOutgoingBitrate"},availableIncomingBitrate:{source:"availableIncomingBitrate"},currentRoundTripTimeMs:{source:"currentRoundTripTime"},audioDownstreamLevel:{source:"audioLevel",media:g.default.AUDIO,dir:v.default.DOWNSTREAM},audioUpstreamLevel:{source:"audioLevel"}}}},"ClientMetricReport");l.default=a},6502873558:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportDirection=void 0;var c;(function(u){u[u.UPSTREAM=0]="UPSTREAM",u[u.DOWNSTREAM=1]="DOWNSTREAM"})(c=l.ClientMetricReportDirection||(l.ClientMetricReportDirection={})),l.default=c},6132421099:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportMediaType=void 0;var c;(function(u){u[u.AUDIO=0]="AUDIO",u[u.VIDEO=1]="VIDEO"})(c=l.ClientMetricReportMediaType||(l.ClientMetricReportMediaType={})),l.default=c},863418510:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"ClientVideoStreamReceivingReport");l.default=c},7966078085:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"GlobalMetricReport");l.default=c},3237015968:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(){this.currentTimestampMs=0,this.ssrc=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsExpected=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}},"RedundantAudioRecoveryMetricReport");l.default=c},6172292806:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"StreamMetricReport");l.default=c},1516469294:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{minimumHealth(){return this.minHealth}maximumHealth(){return this.maxHealth}health(){return this.maximumHealth()}update(m){this.currentData=m}getConnectionHealthData(){return this.currentData.clone()}healthy(){return this.health()>this.minimumHealth()}healthIfChanged(){const m=this.health();return m!==this.currentHealth?(this.currentHealth=m,m):null}constructor(m,v,g){this.minHealth=m.minHealth,this.maxHealth=m.maxHealth,this.currentHealth=m.initialHealth,this.currentData=v.clone(),this.name=g}},"BaseConnectionHealthPolicy");l.default=c},9200233701:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class Yc{static isTimestampRecent(m,v){return Date.now()<m+v}setConnectionStartTime(){this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}reset(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now(),this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0}isConnectionStartRecent(m){return Yc.isTimestampRecent(this.connectionStartTimestampMs,m)}isLastPacketLossRecent(m){return Yc.isTimestampRecent(this.lastPacketLossInboundTimestampMs,m)}isGoodSignalRecent(m){return Yc.isTimestampRecent(this.lastGoodSignalTimestampMs,m)}isWeakSignalRecent(m){return Yc.isTimestampRecent(this.lastWeakSignalTimestampMs,m)}isNoSignalRecent(m){return Yc.isTimestampRecent(this.lastNoSignalTimestampMs,m)}clone(){const m=new Yc;return m.connectionStartTimestampMs=this.connectionStartTimestampMs,m.consecutiveStatsWithNoPackets=this.consecutiveStatsWithNoPackets,m.consecutiveStatsWithNoAudioPacketsSent=this.consecutiveStatsWithNoAudioPacketsSent,m.lastPacketLossInboundTimestampMs=this.lastPacketLossInboundTimestampMs,m.lastGoodSignalTimestampMs=this.lastGoodSignalTimestampMs,m.lastWeakSignalTimestampMs=this.lastWeakSignalTimestampMs,m.lastNoSignalTimestampMs=this.lastNoSignalTimestampMs,m.consecutiveMissedPongs=this.consecutiveMissedPongs,m.packetsReceivedInLastMinute=this.packetsReceivedInLastMinute.slice(0),m.fractionPacketsLostInboundInLastMinute=this.fractionPacketsLostInboundInLastMinute.slice(0),m.audioSpeakerDelayMs=this.audioSpeakerDelayMs,m.isVideoEncoderHardware=this.isVideoEncoderHardware,m.videoEncodingTimeInMs=this.videoEncodingTimeInMs,m.cpuLimitationDuration=this.cpuLimitationDuration,m.videoInputFps=this.videoInputFps,m.videoEncodeFps=this.videoEncodeFps,m}setConsecutiveMissedPongs(m){this.consecutiveMissedPongs=m}setConsecutiveStatsWithNoPackets(m){this.consecutiveStatsWithNoPackets=m}setConsecutiveStatsWithNoAudioPacketsSent(m){this.consecutiveStatsWithNoAudioPacketsSent=m}setLastPacketLossInboundTimestampMs(m){this.lastPacketLossInboundTimestampMs=m}setLastNoSignalTimestampMs(m){this.lastNoSignalTimestampMs=m}setLastWeakSignalTimestampMs(m){this.lastWeakSignalTimestampMs=m}setLastGoodSignalTimestampMs(m){this.lastGoodSignalTimestampMs=m}setAudioSpeakerDelayMs(m){this.audioSpeakerDelayMs=m}setIsVideoEncoderHardware(m){this.isVideoEncoderHardware=m}setVideoEncodingTimeInMs(m){this.videoEncodingTimeInMs=m}setCpuLimitationDuration(m){this.cpuLimitationDuration=m}setVideoInputFps(m){this.videoInputFps=m}setVideoEncodeFps(m){this.videoEncodeFps=m}constructor(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}},"ConnectionHealthData");l.default=c},8692068971:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(6661072615)),v=u(c(1502393534));let g=n(class{constructor(){this.minHealth=0,this.maxHealth=1,this.initialHealth=1,this.connectionUnhealthyThreshold=25,this.noSignalThresholdTimeMs=1e4,this.connectionWaitTimeMs=1e4,this.zeroBarsNoSignalTimeMs=5e3,this.oneBarWeakSignalTimeMs=5e3,this.twoBarsTimeMs=5e3,this.threeBarsTimeMs=1e4,this.fourBarsTimeMs=2e4,this.fiveBarsTimeMs=6e4,this.cooldownTimeMs=6e4,this.pastSamplesToConsider=15,this.goodSignalTimeMs=15e3,this.fractionalLoss=.5,this.packetsExpected=50,this.maximumTimesToWarn=2,this.missedPongsLowerThreshold=1,this.missedPongsUpperThreshold=4,this.maximumAudioDelayMs=6e4,this.maximumAudioDelayDataPoints=10,this.sendingAudioFailureSamplesToConsider=2,this.sendingAudioFailureInitialWaitTimeMs=3e3,this.videoEncodingHealthPolicies=[m.default,v.default],this.consecutiveHighEncodeCpuThreshold=10,this.highEncodeCpuMsThreshold=500,this.consecutiveVideoEncodingFailureThreshold=5}},"ConnectionHealthPolicyConfiguration");l.default=g},5850044630:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(1516469294));let v=n(class tl extends m.default{health(){if(this.currentData.isConnectionStartRecent(tl.CONNECTION_WAIT_TIME_MS))return 1;const a=this.currentData.consecutiveStatsWithNoPackets>=tl.CONNECTION_UNHEALTHY_THRESHOLD,i=this.currentData.consecutiveMissedPongs>=tl.MISSED_PONGS_THRESHOLD;this.currentData.audioSpeakerDelayMs>tl.MAXIMUM_AUDIO_DELAY_MS?this.audioDelayPointsOverMaximum+=1:this.audioDelayPointsOverMaximum=0;const e=this.audioDelayPointsOverMaximum>tl.MAXIMUM_AUDIO_DELAY_DATA_POINTS;return e&&(this.audioDelayPointsOverMaximum=0),a||i||e?(this.logger.warn(`reconnection recommended due to: no packets received: ${a}, missed pongs: ${i}, bad audio delay: ${e}`),0):1}constructor(s,a,i){super(a,i,"Reconnection Health"),this.logger=s,this.audioDelayPointsOverMaximum=0,tl.CONNECTION_UNHEALTHY_THRESHOLD=a.connectionUnhealthyThreshold,tl.CONNECTION_WAIT_TIME_MS=a.connectionWaitTimeMs,tl.MISSED_PONGS_THRESHOLD=a.missedPongsUpperThreshold,tl.MAXIMUM_AUDIO_DELAY_MS=a.maximumAudioDelayMs,tl.MAXIMUM_AUDIO_DELAY_DATA_POINTS=a.maximumAudioDelayDataPoints}},"ReconnectionHealthPolicy");l.default=v},4866586987:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(1516469294));let v=n(class extends m.default{isSendingAudioUnhealthy(){const s=!this.currentData.isConnectionStartRecent(this.sendingAudioFailureInitialWaitTimeMs),a=this.currentData.consecutiveStatsWithNoAudioPacketsSent>=this.sendingAudioFailureSamplesToConsider;return s&&a}health(){if(this.isSendingAudioUnhealthy()){const s=Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs;return this.currentHealth>this.minimumHealth()&&!s?(this.logger.warn(`Sending Audio is unhealthy for ${this.sendingAudioFailureSamplesToConsider} seconds consecutively.`),this.warnCount++,this.warnCount>this.maximumTimesToWarn?(this.logger.warn("SendingAudioFailure health policy maximum warnings breached. Falling back to reporting healthy."),this.maximumHealth()):(this.lastWarnTimestampMs=Date.now(),this.minimumHealth())):this.currentHealth}return this.maximumHealth()}constructor(s,a,i){super(a,i,"Sending Audio Health"),this.logger=s,this.sendingAudioFailureSamplesToConsider=a.sendingAudioFailureSamplesToConsider>0?a.sendingAudioFailureSamplesToConsider:1,this.sendingAudioFailureInitialWaitTimeMs=a.sendingAudioFailureInitialWaitTimeMs,this.maximumTimesToWarn=a.maximumTimesToWarn,this.coolDownTimeMs=a.cooldownTimeMs,this.lastWarnTimestampMs=0,this.warnCount=0}},"SendingAudioFailureConnectionHealthPolicy");l.default=v},174963938:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(1516469294));let v=n(class extends m.default{calculateFractionalLoss(){if(this.currentData.packetsReceivedInLastMinute.length<this.pastSamplesToConsider)return 0;const s=this.pastSamplesToConsider,a=s*this.packetsExpected;let i=0;for(let e=0;e<s;e++)i+=this.currentData.packetsReceivedInLastMinute[e];return Math.min(Math.max(1-i/a,0),1)}health(){return Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs?this.currentHealth:this.calculateFractionalLoss()>=this.fractionalLoss?this.currentHealth!==0&&(this.lastWarnTimestampMs=Date.now(),this.warnCount++,this.warnCount>this.maximumTimesToWarn)?1:0:1}constructor(s,a){super(s,a,"Unusable Audio Warning"),this.coolDownTimeMs=s.cooldownTimeMs,this.pastSamplesToConsider=s.pastSamplesToConsider,this.fractionalLoss=s.fractionalLoss,this.packetsExpected=s.packetsExpected,this.maximumTimesToWarn=s.maximumTimesToWarn,this.lastWarnTimestampMs=0,this.warnCount=0}},"UnusableAudioWarningConnectionHealthPolicy");l.default=v},3334420728:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoEncodingConnectionHealthPolicyName=void 0;var c;(function(u){u.VideoEncodingCpuHealth="Video Encoding CPU Health",u.VideoEncodingFramerateHealth="Video Encoding framerate Health"})(c=l.VideoEncodingConnectionHealthPolicyName||(l.VideoEncodingConnectionHealthPolicyName={})),l.default=c},6661072615:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(1516469294)),v=u(c(3334420728));let g=n(class extends m.default{health(){if(!this.currentData.isVideoEncoderHardware&&(this.currentData.videoEncodingTimeInMs>=this.highEncodeCpuMsThreshold||this.currentData.cpuLimitationDuration>0)){if(this.consecutiveHighEncodeCpuCnt++,this.consecutiveHighEncodeCpuCnt>this.consecutiveHighEncodeCpuThreshold)return this.consecutiveHighEncodeCpuCnt=0,this.minimumHealth()}else this.consecutiveHighEncodeCpuCnt=0;return this.maximumHealth()}constructor(a,i){super(a,i,v.default.VideoEncodingCpuHealth),this.consecutiveHighEncodeCpuCnt=0,this.consecutiveHighEncodeCpuThreshold=a.consecutiveHighEncodeCpuThreshold,this.highEncodeCpuMsThreshold=a.highEncodeCpuMsThreshold}},"VideoEncodingCpuConnectionHealthPolicy");l.default=g},1502393534:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(1516469294)),v=u(c(3334420728));let g=n(class extends m.default{health(){if(this.currentData.videoEncodeFps===0&&this.currentData.videoInputFps>0){if(this.consecutiveEncodeFailureCnt++,this.consecutiveEncodeFailureCnt>this.consecutiveVideoEncodingFailureThreshold)return this.consecutiveEncodeFailureCnt=0,this.minimumHealth()}else this.consecutiveEncodeFailureCnt=0;return this.maximumHealth()}constructor(a,i){super(a,i,v.default.VideoEncodingFramerateHealth),this.consecutiveEncodeFailureCnt=0,this.consecutiveVideoEncodingFailureThreshold=a.consecutiveVideoEncodingFailureThreshold}},"VideoEncodingFramerateConnectionHealthPolicy");l.default=g},8619504925:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=c(6527539809);let m=n(class{start(){this.isActive=!0,this.pingPong.addObserver(this),this.pingPong.start(),this.audioVideoController.addObserver(this)}stop(){this.isActive=!1,this.pingPong.removeObserver(this),this.pingPong.stop(),this.audioVideoController.removeObserver(this)}receiveSignalStrengthChange(g){g===0?this.connectionHealthData.setLastNoSignalTimestampMs(Date.now()):g<=.5?this.connectionHealthData.setLastWeakSignalTimestampMs(Date.now()):this.connectionHealthData.setLastGoodSignalTimestampMs(Date.now()),this.updateConnectionHealth()}didReceivePong(g,s,a){this.connectionHealthData.setConsecutiveMissedPongs(0),this.statsCollector.logLatency("ping_pong",s),this.statsCollector.logLatency("ping_pong_clock_skew",a),this.updateConnectionHealth()}didMissPongs(){this.connectionHealthData.setConsecutiveMissedPongs(this.connectionHealthData.consecutiveMissedPongs+1),this.updateConnectionHealth()}metricsDidReceive(g){let s=0,a=0;const i=g.getObservableMetrics(),e=i.audioPacketsReceived,t=i.audioPacketsReceivedFractionLoss,r=i.audioSpeakerDelayMs;typeof r=="number"&&!isNaN(r)&&this.connectionHealthData.setAudioSpeakerDelayMs(r);const o=g.getRTCStatsReport();let f=0;o.forEach(p=>{p.type==="candidate-pair"&&p.bytesReceived&&(f+=p.bytesReceived)});const h=f-this.lastTotalBytesReceived;if(this.lastTotalBytesReceived=f,typeof e=="number"&&typeof t=="number"){if(s=e,a=t,s<0||a<0||h<0)return}else return;this.addToMinuteWindow(this.connectionHealthData.packetsReceivedInLastMinute,s),this.addToMinuteWindow(this.connectionHealthData.fractionPacketsLostInboundInLastMinute,a),h>0?(this.hasSeenValidCandidatePairMetricsBefore=!0,this.connectionHealthData.setConsecutiveStatsWithNoPackets(0)):this.hasSeenValidCandidatePairMetricsBefore&&this.connectionHealthData.setConsecutiveStatsWithNoPackets(this.connectionHealthData.consecutiveStatsWithNoPackets+1),(s===0||a>0)&&this.connectionHealthData.setLastPacketLossInboundTimestampMs(Date.now()),typeof i.audioPacketsSent=="number"&&this.updateAudioPacketsSentInConnectionHealth(i.audioPacketsSent),this.updateVideoEncodingHealth(g),this.updateConnectionHealth()}updateAudioPacketsSentInConnectionHealth(g){g>0?this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(0):this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(this.connectionHealthData.consecutiveStatsWithNoAudioPacketsSent+1)}updateVideoEncodingHealth(g){const s=this.audioVideoController.videoTileController.hasStartedLocalVideoTile(),a=g.getVideoUpstreamSsrc();if(!s||a===null){this.connectionHealthData.setIsVideoEncoderHardware(!1),this.connectionHealthData.setVideoEncodingTimeInMs(0),this.connectionHealthData.setCpuLimitationDuration(0),this.connectionHealthData.setVideoInputFps(0),this.connectionHealthData.setVideoEncodeFps(0);return}const i=g.getObservableVideoMetricValue("videoUpstreamEncoderImplementation",a),e=g.getObservableVideoMetricValue("videoUpstreamTotalEncodeTimePerSecond",a),t=g.getObservableVideoMetricValue("videoUpstreamCpuQualityLimitationDurationPerSecond",a),r=g.getObservableVideoMetricValue("videoUpstreamFramesInputPerSecond",a),o=g.getObservableVideoMetricValue("videoUpstreamFramesEncodedPerSecond",a);this.connectionHealthData.setIsVideoEncoderHardware(Boolean(i)),this.connectionHealthData.setVideoEncodingTimeInMs(e),this.connectionHealthData.setCpuLimitationDuration(t),this.connectionHealthData.setVideoInputFps(r),this.connectionHealthData.setVideoEncodeFps(o)}addToMinuteWindow(g,s){g.unshift(s),g.length>60&&g.pop()}updateConnectionHealth(){this.audioVideoController.forEachObserver(g=>{u.Maybe.of(g.connectionHealthDidChange).map(s=>s.bind(g)(this.connectionHealthData.clone()))})}constructor(g,s,a,i,e){this.audioVideoController=g,this.realtimeController=s,this.connectionHealthData=a,this.pingPong=i,this.statsCollector=e,this.isActive=!1,this.hasSeenValidCandidatePairMetricsBefore=!1,this.lastTotalBytesReceived=0,this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(t=>{this.isActive&&this.receiveSignalStrengthChange(t)})}},"SignalingAndMetricsConnectionMonitor");l.default=m},805846668:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var c;(function(u){u.Modality="#content"})(c||(c={})),l.default=c},220809536:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(5546774952)),g=m(c(8503424008));let s=n(class Og{get mediaStream(){return this._mediaStream}set mediaStream(i){this._mediaStream=i}acquireAudioInputStream(){return u(this,void 0,void 0,function*(){return this._mediaStream.getAudioTracks().length===0?(this.logger.info("No audio stream available. Synthesizing an audio stream."),g.default.synthesizeAudioDevice(0)):this._mediaStream})}acquireVideoInputStream(){return u(this,void 0,void 0,function*(){return this._mediaStream})}acquireDisplayInputStream(i){return u(this,void 0,void 0,function*(){return i&&i.video&&i.video.mandatory&&i.video.mandatory.chromeMediaSource&&i.video.mandatory.chromeMediaSourceId?navigator.mediaDevices.getUserMedia(i):navigator.mediaDevices.getDisplayMedia(i)})}acquireScreenCaptureDisplayInputStream(i,e){return u(this,void 0,void 0,function*(){return this.acquireDisplayInputStream(this.screenCaptureDisplayMediaConstraints(i,e))})}screenCaptureDisplayMediaConstraints(i,e){return{audio:!!(!i&&new v.default().getDisplayMediaAudioCaptureSupport()),video:Object.assign(Object.assign({},!i&&{frameRate:{max:e||Og.defaultFrameRate}}),i&&{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:e||Og.defaultFrameRate}})}}toggleMediaStream(i){let e=!1;if(this.mediaStream)for(let t=0;t<this.mediaStream.getTracks().length;t++)this.mediaStream.getTracks()[t].enabled!==i&&(this.mediaStream.getTracks()[t].enabled=i,e=!0);return e}cleanup(){if(this.mediaStream)for(let i=0;i<this.mediaStream.getTracks().length;i++)this.mediaStream.getTracks()[i].stop();this.mediaStream=null}muteLocalAudioInputStream(){throw new Error("unsupported")}unmuteLocalAudioInputStream(){throw new Error("unsupported")}addMediaStreamBrokerObserver(i){}removeMediaStreamBrokerObserver(i){}constructor(i){this.logger=i}},"ContentShareMediaStreamBroker");l.default=s,s.defaultFrameRate=15},7050079116:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(h,p,d,y){function S(b){return b instanceof d?b:new d(function(_){_(b)})}return n(S,"adopt"),new(d||(d=Promise))(function(b,_){function C(O){try{R(y.next(O))}catch(D){_(D)}}n(C,"fulfilled");function w(O){try{R(y.throw(O))}catch(D){_(D)}}n(w,"rejected");function R(O){O.done?b(O.value):S(O.value).then(C,w)}n(R,"step"),R((y=y.apply(h,p||[])).next())})},m=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(1197017824)),g=m(c(6226061697)),s=m(c(8023404193)),a=m(c(8006173476)),i=m(c(9649641385)),e=c(6527539809),t=m(c(681222244)),r=m(c(4499376852)),o=m(c(805846668));let f=n(class{static createContentShareMeetingSessionConfigure(p){const d=new g.default;return d.meetingId=p.meetingId,d.externalMeetingId=p.externalMeetingId,d.urls=p.urls,d.disablePeriodicKeyframeRequestOnContentSender=p.disablePeriodicKeyframeRequestOnContentSender,d.credentials=new s.default,d.credentials.attendeeId=p.credentials.attendeeId+o.default.Modality,d.credentials.externalUserId=p.credentials.externalUserId,d.credentials.joinToken=p.credentials.joinToken+o.default.Modality,d.meetingFeatures=p.meetingFeatures.clone(),d.videoDownlinkBandwidthPolicy=new t.default,d}setContentAudioProfile(p){this.contentAudioVideo.setAudioProfile(p)}enableSimulcastForContentShare(p,d){p?(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=new r.default(this.contentAudioVideo.logger,d)):(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=void 0)}enableSVCForContentShare(p){p?this.contentAudioVideo.configuration.enableSVC=!0:this.contentAudioVideo.configuration.enableSVC=!1}startContentShare(p){return u(this,void 0,void 0,function*(){if(p){if(this.contentAudioVideo.configuration.meetingFeatures.contentMaxResolution===v.default.VideoDisabled){this.contentAudioVideo.logger.info("Could not start content because max content resolution was set to None");return}this.mediaStreamBroker.mediaStream=p;for(let d=0;d<this.mediaStreamBroker.mediaStream.getTracks().length;d++)this.mediaStreamBroker.mediaStream.getTracks()[d].addEventListener("ended",()=>{this.stopContentShare()});this.contentAudioVideo.start()}})}startContentShareFromScreenCapture(p,d){return u(this,void 0,void 0,function*(){const y=yield this.mediaStreamBroker.acquireScreenCaptureDisplayInputStream(p,d);return yield this.startContentShare(y),y})}pauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!1)&&this.forEachContentShareObserver(p=>{e.Maybe.of(p.contentShareDidPause).map(d=>d.call(p))})}unpauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!0)&&this.forEachContentShareObserver(p=>{e.Maybe.of(p.contentShareDidUnpause).map(d=>d.call(p))})}setContentShareVideoCodecPreferences(p){this.contentAudioVideo.setVideoCodecSendPreferences(p)}destroy(){return u(this,void 0,void 0,function*(){this.contentAudioVideo&&(this.destroyed=!0,this.contentAudioVideo.removeObserver(this),this.stopContentShare(),this.observerQueue.clear(),this.contentAudioVideo=void 0,this.attendeeAudioVideo=void 0,this.mediaStreamBroker=void 0)})}stopContentShare(){this.contentAudioVideo.stop(),this.mediaStreamBroker.cleanup()}addContentShareObserver(p){this.observerQueue.add(p)}removeContentShareObserver(p){this.observerQueue.delete(p)}forEachContentShareObserver(p){for(const d of this.observerQueue)i.default.nextTick(()=>{this.observerQueue.has(d)&&p(d)})}audioVideoDidStart(){var p;((p=this.mediaStreamBroker.mediaStream)===null||p===void 0?void 0:p.getVideoTracks().length)>0&&this.contentAudioVideo.videoTileController.startLocalVideoTile()}audioVideoDidStop(p){this.mediaStreamBroker.cleanup(),this.contentShareTile&&(this.attendeeAudioVideo.videoTileController.removeVideoTile(this.contentShareTile.id()),this.contentShareTile=null),this.forEachContentShareObserver(d=>{e.Maybe.of(d.contentShareDidStop).map(y=>y.call(d))})}setupContentShareEvents(){this.attendeeAudioVideo.realtimeController.realtimeSubscribeToAttendeeIdPresence((p,d,y,S)=>{const b=new a.default(p).hasModality(a.default.MODALITY_CONTENT),_=new a.default(p).base()===this.attendeeAudioVideo.configuration.credentials.attendeeId;if(!b||!_||!d||this.contentShareTile)return;const C=this.mediaStreamBroker.mediaStream;if(C!=null&&C.getVideoTracks().length){this.contentShareTile=this.attendeeAudioVideo.videoTileController.addVideoTile();const w=C.getVideoTracks()[0];let R,O;if(w.getSettings){const D=w.getSettings();R=D.width,O=D.height}else{const D=w.getCapabilities();R=D.width,O=D.height}this.contentShareTile.bindVideoStream(this.contentAudioVideo.configuration.credentials.attendeeId,!1,C,R,O,null,this.contentAudioVideo.configuration.credentials.externalUserId)}this.forEachContentShareObserver(w=>{e.Maybe.of(w.contentShareDidStart).map(R=>R.call(w))})})}constructor(p,d,y){this.mediaStreamBroker=p,this.contentAudioVideo=d,this.attendeeAudioVideo=y,this.observerQueue=new Set,this.destroyed=!1,this.contentAudioVideo.addObserver(this),this.setupContentShareEvents()}},"DefaultContentShareController");l.default=f},8207737579:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let u=n(class Us{static register(){!("document"in c.g)||!document.addEventListener||Us.shouldRegisterCSPMonitor&&(Us.added||(document.addEventListener("securitypolicyviolation",Us.listener),Us.added=!0))}static unregister(){!("document"in c.g)||!document.removeEventListener||(document.removeEventListener("securitypolicyviolation",Us.listener),Us.loggers=new Set,Us.added=!1)}static disable(){Us.shouldRegisterCSPMonitor=!1,Us.unregister()}static addLogger(v){v&&Us.loggers.add(v)}static removeLogger(v){v&&Us.loggers.delete(v)}},"CSPMonitor");l.default=u,u.loggers=new Set,u.shouldRegisterCSPMonitor=!0,u.added=!1,u.listener=m=>{const v=`Security Policy Violation
Blocked URI: ${m.blockedURI}
Violated Directive: ${m.violatedDirective}
Original Policy: ${m.originalPolicy}
Document URI: ${m.documentURI}
Source File: ${m.sourceFile}
Line No.: ${m.lineNumber}
`;for(const g of u.loggers)g.error(v);u.loggers.size===0&&console.error(v)}},9091803745:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{text(){return new TextDecoder().decode(this.data)}json(){return JSON.parse(new TextDecoder().decode(this.data))}constructor(m,v,g,s,a,i){this.timestampMs=m,this.topic=v,this.data=g,this.senderAttendeeId=s,this.senderExternalUserId=a,this.throttled=!!i}},"DataMessage");l.default=c},4236152345:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isDestroyable=void 0;function c(u){return u&&"destroy"in u}n(c,"isDestroyable"),l.isDestroyable=c},9678458173:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isAudioTransformDevice=void 0;function c(u){return!!u&&typeof u=="object"&&"mute"in u&&"stop"in u&&"intrinsicDevice"in u}n(c,"isAudioTransformDevice"),l.isAudioTransformDevice=c},8503424008:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(R,O,D,I){function M(k){return k instanceof D?k:new D(function(N){N(k)})}return n(M,"adopt"),new(D||(D=Promise))(function(k,N){function j(Q){try{J(I.next(Q))}catch(oe){N(oe)}}n(j,"fulfilled");function B(Q){try{J(I.throw(Q))}catch(oe){N(oe)}}n(B,"rejected");function J(Q){Q.done?k(Q.value):M(Q.value).then(j,B)}n(J,"step"),J((I=I.apply(R,O||[])).next())})},m=this&&this.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(5546774952)),g=m(c(1716952340)),s=m(c(9649641385)),a=m(c(3054351868)),i=c(6527539809),e=m(c(7309008175)),t=m(c(8089299542)),r=c(9678458173),o=m(c(1869028663)),f=m(c(7754931014)),h=m(c(1823340272)),p=m(c(566402552)),d=m(c(5336609685)),y=m(c(763542717)),S=m(c(9398215393)),b=m(c(1197017824)),_=c(7952414906);let C=n(class Do{isWatchingForDeviceChanges(){return!!this.onDeviceChangeCallback}ensureWatchingDeviceChanges(){var O;this.isWatchingForDeviceChanges()||(this.logger.info("Starting devicechange listener."),this.onDeviceChangeCallback=()=>{this.logger.info("Device change event callback is triggered"),this.handleDeviceChange()},(O=this.mediaDeviceWrapper)===null||O===void 0||O.addEventListener("devicechange",this.onDeviceChangeCallback))}stopWatchingDeviceChanges(){var O;this.isWatchingForDeviceChanges()&&(this.logger.info("Stopping devicechange listener."),(O=this.mediaDeviceWrapper)===null||O===void 0||O.removeEventListener("devicechange",this.onDeviceChangeCallback),this.onDeviceChangeCallback=void 0)}shouldObserveDeviceChanges(){return this.deviceChangeObservers.size?!0:this.activeDevices.audio&&this.activeDevices.audio.constraints!==null||this.activeDevices.video&&this.activeDevices.video.constraints!==null||!!this.audioOutputDeviceId}watchForDeviceChangesIfNecessary(){this.shouldObserveDeviceChanges()?this.ensureWatchingDeviceChanges():this.stopWatchingDeviceChanges()}destroy(){return u(this,void 0,void 0,function*(){this.stopWatchingDeviceChanges(),yield this.stopAudioInput(),yield this.stopVideoInput()})}listAudioInputDevices(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const D=yield this.listDevicesOfKind("audioinput",O);return this.trace("listAudioInputDevices",O,D),D})}listVideoInputDevices(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const D=yield this.listDevicesOfKind("videoinput",O);return this.trace("listVideoInputDevices",O,D),D})}listAudioOutputDevices(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const D=yield this.listDevicesOfKind("audiooutput",O);return this.trace("listAudioOutputDevices",O,D),D})}pushAudioMeetingStateForPermissions(O){var D;(D=this.eventController)===null||D===void 0||D.publishEvent(O===void 0?"audioInputUnselected":"audioInputSelected")}pushVideoMeetingStateForPermissions(O){var D;(D=this.eventController)===null||D===void 0||D.publishEvent(O===void 0?"videoInputUnselected":"videoInputSelected")}startAudioInput(O){return u(this,void 0,void 0,function*(){return yield this.audioInputTaskQueue.add(()=>this.startAudioInputTask(O))})}startAudioInputTask(O){var D;return u(this,void 0,void 0,function*(){if(O===void 0){this.logger.error("Audio input device cannot be undefined");return}try{return r.isAudioTransformDevice(O)?(this.logger.info(`Choosing transform input device ${O}`),yield this.chooseAudioTransformInputDevice(O)):(this.logger.info(`Choosing intrinsic audio input device ${O}`),this.removeTransform(),yield this.chooseInputIntrinsicDevice("audio",O)),this.trace("startAudioInputDevice",O,"success"),this.useWebAudio?(this.attachAudioInputStreamToAudioContext(this.activeDevices.audio.stream),this.pushAudioMeetingStateForPermissions(this.getMediaStreamDestinationNode().stream),yield(D=this.transform)===null||D===void 0?void 0:D.device.mute(this.muted),this.getMediaStreamDestinationNode().stream):(this.publishAudioInputDidChangeEvent(this.activeDevices.audio.stream),this.activeDevices.audio.stream)}catch(I){throw I}})}stopAudioInput(){return u(this,void 0,void 0,function*(){return this.audioInputTaskQueue.add(()=>this.stopAudioInputTask())})}stopAudioInputTask(){return u(this,void 0,void 0,function*(){try{if(this.useWebAudio){this.releaseAudioTransformStream();return}this.stopTracksAndRemoveCallbacks("audio")}finally{this.watchForDeviceChangesIfNecessary(),this.publishAudioInputDidChangeEvent(void 0)}})}chooseAudioTransformInputDevice(O){var D;return u(this,void 0,void 0,function*(){if(((D=this.transform)===null||D===void 0?void 0:D.device)===O)return;if(!this.useWebAudio)throw new Error("Cannot apply transform device without enabling Web Audio.");const I=Do.getAudioContext();if(!(I instanceof OfflineAudioContext))switch(I.state){case"running":break;case"closed":throw new Error("Cannot choose a transform device with a closed audio context.");case"suspended":yield I.resume()}let M;try{M=yield O.createAudioNode(I)}catch(N){throw this.logger.error(`Unable to create transform device node: ${N}.`),N}const k=yield O.intrinsicDevice();yield this.chooseInputIntrinsicDevice("audio",k),this.logger.debug(`Got inner stream: ${k}.`),this.setTransform(O,M)})}chooseVideoTransformInputDevice(O){var D;return u(this,void 0,void 0,function*(){if(this.eventController&&O instanceof e.default&&O.passEventControllerToProcessors(this.eventController),O===this.chosenVideoTransformDevice){this.logger.info("Reselecting same VideoTransformDevice");return}const I=this.chosenVideoTransformDevice;I&&this.logger.info("Switched from previous VideoTransformDevice");const M=!!I,k=yield O.intrinsicDevice();if(!this.isMediaStreamReusableByDeviceId((D=this.activeDevices.video)===null||D===void 0?void 0:D.stream,k)){this.logger.info("video transform device needs new intrinsic device"),M&&I.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=O,this.activeDevices.video=null,yield this.chooseInputIntrinsicDevice("video",k),this.logger.info("apply processors to transform"),yield this.chosenVideoTransformDevice.transformStream(this.activeDevices.video.stream);return}this.chosenVideoTransformDevice=O,this.logger.info("video transform device uses previous stream"),this.logger.info("apply processors to transform"),yield O.transformStream(this.activeDevices.video.stream)})}startVideoInput(O){return u(this,void 0,void 0,function*(){return yield this.videoInputTaskQueue.add(()=>this.startVideoInputTask(O))})}startVideoInputTask(O){return u(this,void 0,void 0,function*(){if(!O){this.logger.error("Invalid video input device");return}try{return _.isVideoTransformDevice(O)?(this.logger.info(`Choosing video transform device ${O}`),yield this.chooseVideoTransformInputDevice(O),this.publishVideoInputDidChangeEvent(this.chosenVideoTransformDevice.outputMediaStream),this.chosenVideoTransformDevice.outputMediaStream):(this.chosenVideoInputIsTransformDevice()&&(this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null),yield this.chooseInputIntrinsicDevice("video",O),this.trace("startVideoInputDevice",O),this.publishVideoInputDidChangeEvent(this.activeDevices.video.stream),this.activeDevices.video.stream)}catch(D){throw D}})}stopVideoInput(){return u(this,void 0,void 0,function*(){return this.videoInputTaskQueue.add(()=>this.stopVideoInputTask())})}stopVideoInputTask(){return u(this,void 0,void 0,function*(){try{if(this.chosenVideoInputIsTransformDevice()){this.releaseVideoTransformStream();return}this.stopTracksAndRemoveCallbacks("video")}finally{this.watchForDeviceChangesIfNecessary(),this.publishVideoInputDidChangeEvent(void 0)}})}chooseAudioOutput(O){return u(this,void 0,void 0,function*(){this.audioOutputDeviceId=O,this.watchForDeviceChangesIfNecessary();const D=this.deviceInfoFromDeviceId("audiooutput",this.audioOutputDeviceId);this.publishAudioOutputDidChangeEvent(D),this.trace("chooseAudioOutput",O,null)})}addDeviceChangeObserver(O){this.logger.info("adding device change observer"),this.deviceChangeObservers.add(O),this.watchForDeviceChangesIfNecessary(),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(O){this.logger.info("removing device change observer"),this.deviceChangeObservers.delete(O),this.watchForDeviceChangesIfNecessary(),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){var O,D;if(!this.activeDevices.audio)return null;const I=(D=(O=this.transform)===null||O===void 0?void 0:O.nodes)===null||D===void 0?void 0:D.end;if(I){const M=I.context.createAnalyser();return M.removeOriginalInputs=()=>{try{I.disconnect(M)}catch{}},I.connect(M),M}return this.createAnalyserNodeForRawAudioInput()}createAnalyserNodeForRawAudioInput(){return this.activeDevices.audio?this.createAnalyserNodeForStream(this.activeDevices.audio.stream):null}createAnalyserNodeForStream(O){const D=Do.getAudioContext(),I=D.createAnalyser(),M=D.createMediaStreamSource(O);return M.connect(I),this.trace("createAnalyserNodeForAudioInput"),I.removeOriginalInputs=()=>{try{M.disconnect(I)}catch{}},I}startVideoPreviewForVideoInput(O){if(!this.activeDevices.video){this.logger.warn("cannot bind video preview since video input device has not been chosen"),this.trace("startVideoPreviewForVideoInput",O.id);return}t.default.connectVideoStreamToVideoElement(this.chosenVideoTransformDevice?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream,O,!0),this.trace("startVideoPreviewForVideoInput",O.id)}stopVideoPreviewForVideoInput(O){t.default.disconnectVideoStreamFromVideoElement(O,!1),this.trace("stopVideoPreviewForVideoInput",O.id)}setDeviceLabelTrigger(O){if(this.deviceInfoCache){for(const D of this.deviceInfoCache)if(!D.label){this.deviceInfoCache=null;break}}this.deviceLabelTrigger=O,this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(O){let D=null;return this.useWebAudio?(D=Do.getAudioContext().createMediaStreamSource(O),D.connect(this.getMediaStreamOutputNode())):this.logger.warn("WebAudio is not enabled, mixIntoAudioInput will not work"),this.trace("mixIntoAudioInput",O.id),D}chooseVideoInputQuality(O,D,I){const M=this.browserBehavior.requiresResolutionAlignment(O,D);this.videoInputQualitySettings=new b.default(M[0],M[1],I)}getVideoInputQualitySettings(){return this.videoInputQualitySettings}acquireAudioInputStream(){return u(this,void 0,void 0,function*(){return this.activeDevices.audio||(this.logger.info("No audio device chosen, creating empty audio device"),yield this.startAudioInput(null)),this.useWebAudio?this.getMediaStreamDestinationNode().stream:this.activeDevices.audio.stream})}acquireVideoInputStream(){return u(this,void 0,void 0,function*(){if(!this.activeDevices.video)throw new Error("No video device chosen");return this.chosenVideoInputIsTransformDevice()?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream})}acquireDisplayInputStream(O){return u(this,void 0,void 0,function*(){throw new Error("unsupported")})}releaseAudioTransformStream(){this.logger.info("Stopping audio track for Web Audio graph"),this.stopTracksAndRemoveCallbacks("audio"),this.logger.info("Removing audio transform, if there is one."),this.removeTransform(),this.audioInputSourceNode&&(this.audioInputSourceNode.disconnect(),this.audioInputSourceNode=void 0),this.audioInputDestinationNode&&(this.audioInputDestinationNode.disconnect(),this.audioInputDestinationNode=void 0)}releaseVideoTransformStream(){this.logger.info("Stopping video track for transform"),this.stopTracksAndRemoveCallbacks("video"),this.logger.info("Disconnecting video transform"),this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null}stopTracksAndRemoveCallbacks(O){const D=this.activeDevices[O];if(!D)return;const I=D.endedCallback,M=D.trackMuteCallback,k=D.trackUnmuteCallback;for(const N of D.stream.getTracks())N.stop(),I&&N.removeEventListener("ended",I),M&&N.removeEventListener("mute",M),k&&N.removeEventListener("unmute",k),delete D.endedCallback,delete D.trackMuteCallback,delete D.trackUnmuteCallback,delete this.activeDevices[O]}chosenVideoInputIsTransformDevice(){return!!this.chosenVideoTransformDevice}muteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!1)}unmuteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!0)}toggleLocalAudioInputStream(O){var D;let I=this.activeDevices.audio;if(this.useWebAudio&&(I=this.getMediaStreamDestinationNode()),!!I){for(const M of I.stream.getTracks())M.enabled!==O&&(M.enabled=O);this.muted!==!O&&(this.muted=!O,(D=this.transform)===null||D===void 0||D.device.mute(this.muted))}}static getIntrinsicDeviceId(O){if(!O)return;if(typeof O=="string")return O;if(O.id)return O.id;const I=O.deviceId;if(!I)return;if(typeof I=="string"||Array.isArray(I))return I;const M=I;if(typeof M.exact=="string"||Array.isArray(M.exact))return M.exact}static createEmptyAudioDevice(){return Do.synthesizeAudioDevice(0)}static synthesizeAudioDevice(O){const D=Do.getAudioContext(),I=D.createMediaStreamDestination();if(O){const M=D.createGain();M.gain.value=.1,M.connect(I);const k=D.createOscillator();k.frequency.value=O,k.connect(M),k.start()}else{const M=D.createBufferSource();try{M.buffer=D.createBuffer(1,D.sampleRate*5,D.sampleRate)}catch(k){if(k&&k.name==="NotSupportedError")M.buffer=D.createBuffer(1,Do.defaultSampleRate*5,Do.defaultSampleRate);else throw k}M.buffer.getChannelData(0)[0]=3e-4,M.loop=!0,M.connect(I),M.start()}return I.stream}listDevicesOfKind(O,D){return u(this,void 0,void 0,function*(){return(D||this.deviceInfoCache===null||!this.isWatchingForDeviceChanges())&&(yield this.updateDeviceInfoCacheFromBrowser()),this.listCachedDevicesOfKind(O)})}updateDeviceInfoCacheFromBrowser(){var O;return u(this,void 0,void 0,function*(){if(typeof MediaDeviceInfo>"u"){this.deviceInfoCache=[];return}let I=yield navigator.mediaDevices.enumerateDevices(),M=!0;for(const k of I)if(!k.label){M=!1;break}if(!M)try{this.logger.info("attempting to trigger media device labels since they are hidden");const k=yield this.deviceLabelTrigger();I=yield navigator.mediaDevices.enumerateDevices();for(const N of k.getTracks())N.stop()}catch(k){this.logger.info("unable to get media device labels"),(O=this.eventController)===null||O===void 0||O.publishEvent("deviceLabelTriggerFailed",{deviceLabelTriggerErrorMessage:this.getErrorMessage(k)})}this.logger.debug(`Update device info cache with devices: ${JSON.stringify(I)}`),this.deviceInfoCache=I})}listCachedDevicesOfKind(O){const D=[];if(this.deviceInfoCache)for(const I of this.deviceInfoCache)I.kind===O&&D.push(I);return D}handleDeviceChange(){return u(this,void 0,void 0,function*(){if(this.deviceInfoCache===null)return;if(this.alreadyHandlingDeviceChange){s.default.nextTick(()=>{this.handleDeviceChange()});return}this.alreadyHandlingDeviceChange=!0;const O=this.listCachedDevicesOfKind("audioinput"),D=this.listCachedDevicesOfKind("videoinput"),I=this.listCachedDevicesOfKind("audiooutput");yield this.updateDeviceInfoCacheFromBrowser();const M=this.listCachedDevicesOfKind("audioinput"),k=this.listCachedDevicesOfKind("videoinput"),N=this.listCachedDevicesOfKind("audiooutput");this.forEachObserver(j=>{this.areDeviceListsEqual(O,M)||i.Maybe.of(j.audioInputsChanged).map(B=>B.bind(j)(M)),this.areDeviceListsEqual(D,k)||i.Maybe.of(j.videoInputsChanged).map(B=>B.bind(j)(k)),this.areDeviceListsEqual(I,N)||i.Maybe.of(j.audioOutputsChanged).map(B=>B.bind(j)(N))}),this.alreadyHandlingDeviceChange=!1})}handleDeviceStreamEnded(O,D){return u(this,void 0,void 0,function*(){try{O==="audio"?(this.logger.warn("Audio input device which was active is no longer available, resetting to null device"),yield this.startAudioInput(null)):(this.logger.warn("Video input device which was active is no longer available, stopping video"),yield this.stopVideoInput())}catch{this.logger.error("Failed to choose null device after stream ended.")}O==="audio"?this.forEachObserver(I=>{i.Maybe.of(I.audioInputStreamEnded).map(M=>M.bind(I)(D))}):this.forEachObserver(I=>{i.Maybe.of(I.videoInputStreamEnded).map(M=>M.bind(I)(D))})})}forEachObserver(O){for(const D of this.deviceChangeObservers)s.default.nextTick(()=>{this.deviceChangeObservers.has(D)&&O(D)})}forEachMediaStreamBrokerObserver(O){for(const D of this.mediaStreamBrokerObservers)s.default.nextTick(()=>{this.mediaStreamBrokerObservers.has(D)&&O(D)})}areDeviceListsEqual(O,D){return JSON.stringify(O.map(I=>JSON.stringify(I)).sort())===JSON.stringify(D.map(I=>JSON.stringify(I)).sort())}intrinsicDeviceAsMediaStream(O){return O&&O.id?O:null}hasSameMediaStreamId(O,D,I){var M,k,N,j;let B;return O==="audio"?(B=I==null?void 0:I.audio.streamId,!!B&&B===((k=(M=D.constraints)===null||M===void 0?void 0:M.audio)===null||k===void 0?void 0:k.streamId)):(B=I==null?void 0:I.video.streamId,!!B&&B===((j=(N=D==null?void 0:D.constraints)===null||N===void 0?void 0:N.video)===null||j===void 0?void 0:j.streamId))}hasSameGroupId(O,D,I){if(O==="")return!0;const M=Do.getIntrinsicDeviceId(I);return this.logger.debug(`Checking deviceIds ${M} of type ${typeof M} with groupId ${O}`),typeof M=="string"&&O===this.getGroupIdFromDeviceId(D,M)}getGroupIdFromDeviceId(O,D){if(this.deviceInfoCache!==null){const I=this.listCachedDevicesOfKind(`${O}input`).find(M=>M.deviceId===D);if(I&&I.groupId)return this.logger.debug(`GroupId of deviceId ${D} found in cache is ${I.groupId}`),I.groupId}return this.logger.debug(`GroupId of deviceId ${D} found in cache is empty`),""}handleGetUserMediaError(O,D){if(!O)throw new f.default(O);switch(O.name){case"NotReadableError":case"TrackStartError":throw new p.default(O);case"NotFoundError":case"DevicesNotFoundError":throw new h.default(O);case"NotAllowedError":case"PermissionDeniedError":case"SecurityError":throw D&&D<Do.permissionDeniedOriginDetectionThresholdMs?new y.default(O,"Permission denied by browser"):new y.default(O,"Permission denied by user");case"OverconstrainedError":case"ConstraintNotSatisfiedError":throw new d.default(O);case"TypeError":throw new S.default(O);case"AbortError":default:throw new f.default(O)}}matchesDeviceSelection(O,D,I,M){return I&&I.stream.active&&(this.hasSameMediaStreamId(O,I,M)||I.groupId!==null&&this.hasSameGroupId(I.groupId,O,D))?(this.logger.debug(`Compare current device constraint ${JSON.stringify(I.constraints)} to proposed constraints ${JSON.stringify(M)}`),I.matchesConstraints(M)):!1}chooseInputIntrinsicDevice(O,D){var I,M;return u(this,void 0,void 0,function*(){const k=this.getMediaStreamConstraints(O,D);if(this.matchesDeviceSelection(O,D,this.activeDevices[O],k)){this.logger.info(`reusing existing ${O} input device`);return}this.activeDevices[O]&&this.activeDevices[O].stream&&this.stopTracksAndRemoveCallbacks(O);const N=Date.now(),j=new o.default;try{this.logger.info(`requesting new ${O} device with constraint ${JSON.stringify(k)}`);const B=this.intrinsicDeviceAsMediaStream(D);O==="audio"&&D===null?(j.stream=Do.createEmptyAudioDevice(),j.constraints=null):B?(this.logger.info(`using media stream ${B.id} for ${O} device`),j.stream=B,j.constraints=k):(j.stream=yield navigator.mediaDevices.getUserMedia(k),j.constraints=k),yield this.handleNewInputDevice(O,j)}catch(B){const J=this.getErrorMessage(B);O==="audio"?(I=this.eventController)===null||I===void 0||I.publishEvent("audioInputFailed",{audioInputErrorMessage:J}):(M=this.eventController)===null||M===void 0||M.publishEvent("videoInputFailed",{videoInputErrorMessage:J}),this.logger.error(`failed to get ${O} device for constraints ${JSON.stringify(k)}: ${J}`);let Q=!0;if(B&&"constraint"in B&&(this.logger.error(`Over-constrained by constraint: ${B.constraint}`),this.useMediaConstraintsFallback)){const oe=this.getMediaStreamConstraints(O,D,!0),$=JSON.stringify(oe);if($!==JSON.stringify(k)){this.logger.info(`retry requesting new ${O} device with minimal constraint ${$}`);try{j.stream=yield navigator.mediaDevices.getUserMedia(oe),j.constraints=oe,yield this.handleNewInputDevice(O,j),Q=!1}catch(he){this.logger.error(`failed to get ${O} device for constraints ${$}: ${this.getErrorMessage(he)}`)}}}if(Q){if(O==="audio"){this.logger.info(`choosing null ${O} device instead`);try{j.stream=Do.createEmptyAudioDevice(),j.constraints=null,yield this.handleNewInputDevice(O,j)}catch(oe){this.logger.error(`failed to choose null ${O} device. ${oe.name}: ${oe.message}`)}}this.handleGetUserMediaError(B,Date.now()-N)}}finally{this.watchForDeviceChangesIfNecessary()}})}getErrorMessage(O){return O?O.name&&O.message?`${O.name}: ${O.message}`:O.name?O.name:O.message?O.message:"UnknownError":"UnknownError"}handleNewInputDevice(O,D){var I;return u(this,void 0,void 0,function*(){this.logger.info(`got ${O} device for constraints ${JSON.stringify(D.constraints)}`);const M=(I=this.getMediaTrackSettings(D.stream))===null||I===void 0?void 0:I.deviceId;D.groupId=M?this.getGroupIdFromDeviceId(O,M):"",this.activeDevices[O]=D,this.logger.debug(`Set activeDevice to ${JSON.stringify(D)}`),this.watchForDeviceChangesIfNecessary();const k=D.stream.getTracks()[0];if(k&&(D.endedCallback=()=>{this.activeDevices[O]&&this.activeDevices[O].stream===D.stream&&(this.handleDeviceStreamEnded(O,M),delete D.endedCallback)},k.addEventListener("ended",D.endedCallback,{once:!0})),O==="audio"){const N=D.stream.getAudioTracks()[0];if(N){const j=N.getSettings().deviceId||D.stream;D.trackMuteCallback=()=>{this.mediaStreamMuteObserver(j,!0)},D.trackUnmuteCallback=()=>{this.mediaStreamMuteObserver(j,!1)},N.addEventListener("mute",D.trackMuteCallback,{once:!1}),N.addEventListener("unmute",D.trackUnmuteCallback,{once:!1}),this.logger.debug("Notifying mute state after selection"),N.muted?D.trackMuteCallback():D.trackUnmuteCallback()}}})}calculateMediaStreamConstraints(O,D,I,M){if(M&&this.listCachedDevicesOfKind(`${O}input`).length===1)return!0;const k={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?k.deviceId=D:k.deviceId={exact:D},I&&(k.groupId=I),M?k:O==="video"?(k.width={ideal:this.videoInputQualitySettings.videoWidth},k.height={ideal:this.videoInputQualitySettings.videoHeight},k.frameRate={ideal:this.videoInputQualitySettings.videoFrameRate},k):(this.supportSampleRateConstraint()&&(k.sampleRate={ideal:Do.defaultSampleRate}),this.supportSampleSizeConstraint()&&(k.sampleSize={ideal:Do.defaultSampleSize}),this.supportChannelCountConstraint()&&(k.channelCount={ideal:Do.defaultChannelCount}),Object.assign({echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0},k))}getMediaStreamConstraintsFromTrackConstraints(O,D){return O==="audio"?{audio:D}:{video:D}}getMediaStreamConstraints(O,D){let I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,M={};if(!D)return null;const k=this.intrinsicDeviceAsMediaStream(D);if(k)return M.streamId=k.id,this.getMediaStreamConstraintsFromTrackConstraints(O,M);if(typeof D=="string"){let N="";return this.browserBehavior.requiresGroupIdMediaStreamConstraints()&&(this.deviceInfoCache!==null?N=this.getGroupIdFromDeviceId(O,D):this.logger.error("Device cache is not populated. Please make sure to call list devices first")),M=this.calculateMediaStreamConstraints(O,D,N,I),this.getMediaStreamConstraintsFromTrackConstraints(O,M)}return w(D)?(M=this.calculateMediaStreamConstraints(O,D.deviceId,D.groupId,I),this.getMediaStreamConstraintsFromTrackConstraints(O,M)):(M=D,this.getMediaStreamConstraintsFromTrackConstraints(O,M))}deviceInfoFromDeviceId(O,D){if(this.deviceInfoCache===null)return null;for(const I of this.deviceInfoCache)if(I.kind===O&&I.deviceId===D)return I;return null}hasAppliedTransform(){return!!this.transform}isMediaStreamReusableByDeviceId(O,D){if(!O||!O.active||!D)return!1;if(D.id)return O.id===D.id;const I=this.getMediaTrackSettings(O);if(!I.deviceId)return!1;const M=Do.getIntrinsicDeviceId(D);return typeof M=="string"?I.deviceId===M:!1}getMediaTrackSettings(O){var D;return(D=O.getTracks()[0])===null||D===void 0?void 0:D.getSettings()}reconnectAudioInputs(){if(!this.audioInputSourceNode)return;this.audioInputSourceNode.disconnect();const O=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(O)}setTransform(O,D){var I,M;(M=(I=this.transform)===null||I===void 0?void 0:I.nodes)===null||M===void 0||M.end.disconnect(),this.transform={nodes:D,device:O};const k=D==null?void 0:D.end,N=this.getMediaStreamDestinationNode();this.logger.debug(`Connecting transform node ${k} to destination ${N}.`),k==null||k.connect(N),this.reconnectAudioInputs()}removeTransform(){var O;const D=this.transform;if(D)return(O=this.transform.nodes)===null||O===void 0||O.end.disconnect(),this.transform=void 0,this.reconnectAudioInputs(),D}attachAudioInputStreamToAudioContext(O){var D;(D=this.audioInputSourceNode)===null||D===void 0||D.disconnect(),this.audioInputSourceNode=Do.getAudioContext().createMediaStreamSource(O);const I=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(I)}getMediaStreamDestinationNode(){return this.audioInputDestinationNode||(this.audioInputDestinationNode=Do.getAudioContext().createMediaStreamDestination()),this.audioInputDestinationNode}getMediaStreamOutputNode(){var O,D;return((D=(O=this.transform)===null||O===void 0?void 0:O.nodes)===null||D===void 0?void 0:D.start)||this.getMediaStreamDestinationNode()}static setDefaultLatencyHint(O){Do.defaultLatencyHint=O}static getAudioContext(){if(!Do.audioContext){const O={};navigator.mediaDevices.getSupportedConstraints().sampleRate&&(O.sampleRate=Do.defaultSampleRate),new v.default().requiresPlaybackLatencyHintForAudioContext()&&(O.latencyHint="playback"),Do.defaultLatencyHint&&(O.latencyHint=Do.defaultLatencyHint),Do.audioContext=new(window.AudioContext||window.webkitAudioContext)(O)}return Do.audioContext}static suspendAudioContext(){return u(this,void 0,void 0,function*(){return Do.audioContext?Do.audioContext.suspend():Promise.resolve()})}static resumeAudioContext(){return u(this,void 0,void 0,function*(){return Do.audioContext?Do.audioContext.resume():Promise.resolve()})}static closeAudioContext(){if(Do.audioContext)try{Do.audioContext.close()}catch{}Do.audioContext=null}addMediaStreamBrokerObserver(O){this.mediaStreamBrokerObservers.add(O)}removeMediaStreamBrokerObserver(O){this.mediaStreamBrokerObservers.delete(O)}publishVideoInputDidChangeEvent(O){this.forEachMediaStreamBrokerObserver(D=>{D.videoInputDidChange&&D.videoInputDidChange(O)}),this.pushVideoMeetingStateForPermissions(O)}publishAudioInputDidChangeEvent(O){this.forEachMediaStreamBrokerObserver(D=>{D.audioInputDidChange&&D.audioInputDidChange(O)}),this.pushAudioMeetingStateForPermissions(O)}publishAudioOutputDidChangeEvent(O){this.forEachMediaStreamBrokerObserver(D=>{D.audioOutputDidChange&&D.audioOutputDidChange(O)})}supportSampleRateConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleRate}supportSampleSizeConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleSize}supportChannelCountConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().channelCount}trace(O,D,I){let M=`API/DefaultDeviceController/${O}`;typeof D<"u"&&(M+=` ${JSON.stringify(D)}`),typeof I<"u"&&(M+=` -> ${JSON.stringify(I)}`),this.logger.info(M)}constructor(O,D,I=new v.default,M){this.logger=O,this.browserBehavior=I,this.eventController=M,this.deviceInfoCache=null,this.activeDevices={audio:null,video:null},this.chosenVideoTransformDevice=null,this.audioOutputDeviceId=void 0,this.deviceChangeObservers=new Set,this.mediaStreamBrokerObservers=new Set,this.deviceLabelTrigger=()=>navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),this.audioInputDestinationNode=null,this.audioInputSourceNode=null,this.videoInputQualitySettings=null,this.useWebAudio=!1,this.useMediaConstraintsFallback=!0,this.audioInputTaskQueue=new a.default,this.videoInputTaskQueue=new a.default,this.muted=!1,this.mediaStreamMuteObserver=(B,J)=>{for(const Q of this.deviceChangeObservers)s.default.nextTick(()=>{this.deviceChangeObservers.has(Q)&&Q.audioInputMuteStateChanged&&Q.audioInputMuteStateChanged(B,J)})},this.alreadyHandlingDeviceChange=!1;const{enableWebAudio:k=!1,useMediaConstraintsFallback:N=!0}=D||{};this.useWebAudio=k,this.useMediaConstraintsFallback=N,this.videoInputQualitySettings=new b.default(Do.defaultVideoWidth,Do.defaultVideoHeight,Do.defaultVideoFrameRate);const j=this.browserBehavior.requiresResolutionAlignment(this.videoInputQualitySettings.videoWidth,this.videoInputQualitySettings.videoHeight);this.videoInputQualitySettings.videoWidth=j[0],this.videoInputQualitySettings.videoHeight=j[1],this.logger.info(`DefaultDeviceController video dimension ${this.videoInputQualitySettings.videoWidth} x ${this.videoInputQualitySettings.videoHeight}`);try{this.mediaDeviceWrapper=new g.default().create();const B=navigator.mediaDevices.getSupportedConstraints();this.logger.info(`Supported Constraints in this browser ${JSON.stringify(B)}`)}catch(B){O.error(B.message)}}},"DefaultDeviceController");l.default=C,C.permissionDeniedOriginDetectionThresholdMs=500,C.defaultVideoWidth=960,C.defaultVideoHeight=540,C.defaultVideoFrameRate=15,C.defaultSampleRate=48e3,C.defaultSampleSize=16,C.defaultChannelCount=1,C.audioContext=null;function w(R){return typeof R=="object"&&"deviceId"in R&&"groupId"in R&&"kind"in R&&"label"in R}n(w,"isMediaDeviceInfo")},1869028663:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{matchesConstraints(m){return JSON.stringify(this.constraints)===JSON.stringify(m)}constructor(){this.groupId=""}},"DeviceSelection");l.default=c},7754931014:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class extends Error{constructor(m,v){super(v||"Error fetching device."),this.cause=m,this.name="GetUserMediaError"}},"GetUserMediaError");l.default=c},8082139119:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0}),l.NoOpDeviceControllerWithEventController=void 0;const v=m(c(9437918857)),g=m(c(1197017824));let s=n(class extends v.default{destroy(){return u(this,void 0,void 0,function*(){this.destroyed=!0})}listAudioInputDevices(){return Promise.resolve([])}listVideoInputDevices(){return Promise.resolve([])}listAudioOutputDevices(){return Promise.resolve([])}startAudioInput(e){return Promise.reject()}stopAudioInput(){return Promise.resolve()}startVideoInput(e){return Promise.reject()}stopVideoInput(){return Promise.resolve()}chooseAudioOutput(e){return Promise.reject()}addDeviceChangeObserver(e){}removeDeviceChangeObserver(e){}createAnalyserNodeForAudioInput(){return null}startVideoPreviewForVideoInput(e){}stopVideoPreviewForVideoInput(e){}setDeviceLabelTrigger(e){}mixIntoAudioInput(e){return null}chooseVideoInputQuality(e,t,r){}getVideoInputQualitySettings(){return g.default.VideoDisabled}constructor(e){super(),this.destroyed=!1}},"NoOpDeviceController");l.default=s;let a=n(class extends s{constructor(e){super(),this.eventController=e}},"NoOpDeviceControllerWithEventController");l.NoOpDeviceControllerWithEventController=a},1823340272:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(7754931014));let v=n(class extends m.default{constructor(s){super(s),this.name="NotFoundError"}},"NotFoundError");l.default=v},566402552:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(7754931014));let v=n(class extends m.default{constructor(s){super(s),this.name="NotReadableError"}},"NotReadableError");l.default=v},5336609685:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(7754931014));let v=n(class extends m.default{constructor(s,a){super(s),this.constraint=a,this.name="OverconstrainedError"}},"OverconstrainedError");l.default=v},763542717:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(7754931014));let v=n(class extends m.default{constructor(s,a){super(s,a),this.name="PermissionDeniedError"}},"PermissionDeniedError");l.default=v},2847388805:function(H,l){"use strict";var c=this&&this.__awaiter||function(m,v,g,s){function a(i){return i instanceof g?i:new g(function(e){e(i)})}return n(a,"adopt"),new(g||(g=Promise))(function(i,e){function t(f){try{o(s.next(f))}catch(h){e(h)}}n(t,"fulfilled");function r(f){try{o(s.throw(f))}catch(h){e(h)}}n(r,"rejected");function o(f){f.done?i(f.value):a(f.value).then(t,r)}n(o,"step"),o((s=s.apply(m,v||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=n(class{mute(v){return c(this,void 0,void 0,function*(){})}stop(){var v;return c(this,void 0,void 0,function*(){(v=this.node)===null||v===void 0||v.disconnect()})}intrinsicDevice(){return c(this,void 0,void 0,function*(){return this.inner})}createAudioNode(v){var g;return c(this,void 0,void 0,function*(){return(g=this.node)===null||g===void 0||g.disconnect(),this.node=yield this.createSingleAudioNode(v),{start:this.node,end:this.node}})}constructor(v){this.inner=v}},"SingleNodeAudioTransformDevice");l.default=u},9398215393:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(7754931014));let v=n(class extends m.default{constructor(s){super(s),this.name="TypeError"}},"TypeError");l.default=v},1197017824:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{equals(m){return this.videoWidth===m.videoWidth&&this.videoHeight===m.videoHeight&&this.videoFrameRate===m.videoFrameRate}constructor(m,v,g){this.videoWidth=m,this.videoHeight=v,this.videoFrameRate=g}},"VideoQualitySettings");l.default=c,c.VideoDisabled=new c(0,0,0),c.VideoResolutionHD=new c(1280,720,30),c.VideoResolutionFHD=new c(1920,1080,30),c.VideoResolutionUHD=new c(3840,2160,30)},7952414906:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isVideoTransformDevice=void 0;function c(u){return!!u&&typeof u=="object"&&"transformStream"in u&&"stop"in u&&"intrinsicDevice"in u}n(c,"isVideoTransformDevice"),l.isVideoTransformDevice=c},5163444346:function(H,l){"use strict";var c=this&&this.__awaiter||function(m,v,g,s){function a(i){return i instanceof g?i:new g(function(e){e(i)})}return n(a,"adopt"),new(g||(g=Promise))(function(i,e){function t(f){try{o(s.next(f))}catch(h){e(h)}}n(t,"fulfilled");function r(f){try{o(s.throw(f))}catch(h){e(h)}}n(r,"rejected");function o(f){f.done?i(f.value):a(f.value).then(t,r)}n(o,"step"),o((s=s.apply(m,v||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=n(class{destroy(){return c(this,void 0,void 0,function*(){this.mediaQueryList&&(typeof this.mediaQueryList.addEventListener=="function"?this.mediaQueryList.removeEventListener("change",this.mediaQueryListener):this.mediaQueryList.removeListener(this.mediaQueryListener)),delete this.mediaQueryListener,this.observerQueue.clear()})}registerObserver(v){this.observerQueue.add(v),v.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())}removeObserver(v){this.observerQueue.delete(v)}constructor(v,g){if(this.devicePixelRatioSource=v,this.observerQueue=new Set,this.mediaQueryListener=()=>{this.observerQueue.forEach(a=>{a.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())})},typeof window>"u")return;const s=matchMedia(`(resolution: ${this.devicePixelRatioSource.devicePixelRatio()}dppx)`);typeof s.addEventListener=="function"?(s.addEventListener("change",this.mediaQueryListener),this.mediaQueryList=s):typeof s.addListener=="function"?(s.addListener(this.mediaQueryListener),this.mediaQueryList=s):g.warn("ignoring DefaultDevicePixelRatioMonitor")}},"DefaultDevicePixelRatioMonitor");l.default=u},3563909523:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{devicePixelRatio(){return typeof window>"u"||!window||!window.devicePixelRatio?1:window.devicePixelRatio}},"DevicePixelRatioWindowSource");l.default=c},9004346135:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(t,r,o,f){function h(p){return p instanceof o?p:new o(function(d){d(p)})}return n(h,"adopt"),new(o||(o=Promise))(function(p,d){function y(_){try{b(f.next(_))}catch(C){d(C)}}n(y,"fulfilled");function S(_){try{b(f.throw(_))}catch(C){d(C)}}n(S,"rejected");function b(_){_.done?p(_.value):h(_.value).then(y,S)}n(b,"step"),b((f=f.apply(t,r||[])).next())})},m=this&&this.__rest||function(t,r){var o={};for(var f in t)Object.prototype.hasOwnProperty.call(t,f)&&r.indexOf(f)<0&&(o[f]=t[f]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,f=Object.getOwnPropertySymbols(t);h<f.length;h++)r.indexOf(f[h])<0&&Object.prototype.propertyIsEnumerable.call(t,f[h])&&(o[f[h]]=t[f[h]]);return o},v=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const g=v(c(4571447548)),s=v(c(9877075638)),a=v(c(3894274294)),i=c(5685319565);let e=n(class Yl{addEventListeners(){!this.beaconEventListener||!("window"in c.g)||!window.addEventListener||!("document"in c.g)||!document.addEventListener||(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - addEventListeners - adding pagehide and visibility change event listeners"),window.addEventListener("pagehide",this.beaconEventListener),document.addEventListener("visibilitychange",this.beaconEventListener))}beaconEventHandler(r){(r.type==="visibilitychange"&&document.visibilityState==="hidden"||r.type==="pagehide")&&(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - beaconEventHandler is triggered calling sendBeacon"),this.sendBeacon())}removeEventListeners(){!this.beaconEventListener||!("window"in c.g)||!window.removeEventListener||!("document"in c.g)||!document.removeEventListener||(window.removeEventListener("pagehide",this.beaconEventListener),document.removeEventListener("visibilitychange",this.beaconEventListener),this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - removeEventListeners - removing pagehide and visibility change event listeners"))}start(){var r;this.removeEventListeners(),this.addEventListeners(),(r=this.intervalScheduler)===null||r===void 0||r.stop(),this.intervalScheduler=new s.default(this.flushIntervalMs),this.intervalScheduler.start(()=>this.sendEvents())}stop(){var r;(r=this.intervalScheduler)===null||r===void 0||r.stop(),this.intervalScheduler=void 0,this.sendBeacon(),this.removeEventListeners()}addItem(r){return u(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - received event ${JSON.stringify(r)}`);const{name:o,ts:f,attributes:h}=r,p=h&&this.filterAttributes(h,this.attributesToFilter),d=Object.assign({name:o,ts:f},p);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - event after filtering attributes ${JSON.stringify(d)}`);const y=this.getSize(d);if(y>Yl.MAX_ITEM_SIZE_BYTES_ALLOWED)throw new Error(`Event Reporting - Item to be added has size ${y} bytes. Item cannot exceed max item size allowed of ${Yl.MAX_ITEM_SIZE_BYTES_ALLOWED} bytes.`);if(this.importantEvents.has(o)){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - sending important event ${JSON.stringify(d)}`),this.sendEventImmediately({name:o,ts:f,attributes:p});return}if(this.isFull())throw this.logger.warn("Event Reporting - Event buffer is full"),new Error("Buffer full");if(this.currentIngestionEvent.payloads.push(d),this.ingestionEventSize+=y,this.bufferItemThresholdReached(y)){const S=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);this.buffer.push(S),this.bufferSize+=this.ingestionEventSize,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - buffer item threshold reached updated buffer ${JSON.stringify(this.buffer)}`)}})}filterAttributes(r,o){const f=new Set(o);return Object.keys(r).filter(p=>f.has(p)).forEach(p=>delete r[p]),r}initializeAndGetCurrentIngestionEvent(){const r={type:this.type,v:this.v,payloads:[]};return this.ingestionEventSize=this.getSize(r),r}bufferItemThresholdReached(r){return r+this.ingestionEventSize>=this.maxBufferItemCapacityBytes||this.currentIngestionEvent.payloads.length===Yl.MAX_PAYLOAD_ITEMS}getSize(r){let o=0;if(typeof r=="object")for(const[f,h]of Object.entries(r))o+=this.getPrimitiveSize(f),o+=this.getSize(h);else o+=this.getPrimitiveSize(r);return o}getPrimitiveSize(r){let o=0;return typeof r=="string"?o+=r.length*2:typeof r=="number"&&(o+=8),o}isFull(){return this.bufferSize===this.maxBufferCapacityBytes||this.buffer.length===this.totalBufferItems}isEmpty(){return this.buffer.length===0||this.bufferSize===0}getItems(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.isEmpty()?[]:(r=Math.min(this.buffer.length,r+1),this.buffer.splice(o,r))}makeBeaconRequestBody(r){const o={metadata:this.metadata,events:r,authorization:this.authenticationToken};return JSON.stringify(o)}makeRequestBody(r){const o={metadata:this.metadata,events:r};return JSON.stringify(o)}sendEventImmediately(r){return u(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - important event received ${JSON.stringify(r)}`);const{name:o,ts:f,attributes:h}=r,p={type:this.type,v:this.v,payloads:[Object.assign({name:o,ts:f},h)]};let d=!1,y=null;const S=this.makeRequestBody([p]);try{if(y=yield this.send(S),y.ok){try{const b=yield y.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - send successful event: ${S}, message: ${JSON.stringify(b)}`)}catch(b){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Error reading OK response ${b} for event ${S}`)}return}else this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Failed to send an important event ${S} with response status ${y.status}`),d=!0}catch(b){this.logger.warn(`Event Reporting - There may be a failure in sending an important event ${S} to the ingestion endpoint ${b}.`),d=!0;try{if(this.metadata.browserName.toLowerCase()==="firefox"){const _=this.makeBeaconRequestBody([p]);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - beaconing data out ${_}`),navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,_)?d=!1:d=!0}}catch{this.logger.warn(`Event Reporting - Error sending beacon for an important event ${S}`),d=!0}}d&&(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - pushing to failed events ${S}`),this.failedIngestionEvents.push(p))})}send(r){return u(this,void 0,void 0,function*(){const o=new g.default(Yl.RETRY_FIXED_BACKOFF_WAIT_MS,Yl.RETRY_SHORT_BACKOFF_MS,Yl.RETRY_LONG_BACKOFF_MS);try{let f=0;for(;f<this.retryCountLimit;){const h=yield fetch(this.ingestionURL,{method:"POST",headers:{Authorization:`Bearer ${this.authenticationToken}`},body:r});if(h.ok||!Yl.SENDING_FAILURE_CODES.has(h.status))return h;if(this.logger.warn(`Will retry sending failure for ${r} due to status code ${h.status}.`),f++,f<this.retryCountLimit){const p=o.nextBackoffAmountMs();yield i.wait(p)}}if(f===this.retryCountLimit)throw new Error(`Retry count limit reached for ${r}`)}catch(f){throw f}})}sendBeacon(){return u(this,void 0,void 0,function*(){const r=this.buffer;if(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out buffer events ${JSON.stringify(r)}`),this.buffer=[],this.currentIngestionEvent.payloads.length>0){const f=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);r.push(f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out current ingestion event ${JSON.stringify(f)}`),this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent()}if(this.failedIngestionEvents.length>0){const f=this.failedIngestionEvents.map(h=>this.deepCopyCurrentIngestionEvent(h));r.push(...f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out any failed ingestion event ${JSON.stringify(f)}`),this.failedIngestionEvents=[]}if(this.cancellableEvents.size>0&&(this.cancellableEvents.forEach(f=>{r.push(...f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out each cancellable event ${JSON.stringify(f)}`)}),this.cancellableEvents.clear()),r.length===0)return;const o=this.makeBeaconRequestBody(r);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - beacon data to send ${o}`);try{navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,o)||this.logger.warn(`Event Reporting - Browser failed to queue beacon data ${o}`)}catch(f){this.logger.warn(`Event Reporting - Sending beacon data ${o} failed with error ${f}`)}})}reset(){this.maxBufferCapacityBytes=0,this.totalBufferItems=0,this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.lock=!1,this.beaconEventListener=void 0,this.cancellableEvents.clear()}destroy(){return u(this,void 0,void 0,function*(){this.stop(),this.reset()})}constructor(r,o,f,h,p){this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.retryCountLimit=15,this.lock=!1,this.cancellableEvents=new Map,this.attributesToFilter=["externalUserId","externalMeetingId","timestampMs"],this.deepCopyCurrentIngestionEvent=k=>({type:k.type,v:k.v,payloads:[...k.payloads]}),this.sendEvents=()=>u(this,void 0,void 0,function*(){if(this.lock)return;const k=this.getItems(this.flushSize);if(k.length===0)return;this.lock=!0;const N=this.makeRequestBody(k);let j=!1;const B=Date.now();this.metadata.browserName.toLowerCase()==="firefox"&&this.cancellableEvents.set(B,k);try{this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - sending body ${N}`);const J=yield this.send(N);if(this.cancellableEvents.delete(B),!J.ok)this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Failed to send events ${N} with response status ${J.status}`),j=!0;else try{const Q=yield J.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - send successful events: ${N} message: ${JSON.stringify(Q)}`)}catch(Q){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents error reading OK response ${Q} for events ${N}`)}}catch(J){j=!0,this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Error in sending events ${N} to the ingestion endpoint ${J}`)}finally{this.lock=!1}j&&(this.cancellableEvents.delete(B),this.failedIngestionEvents.push(...k))});const d=new a.default(p).getParserResult(),{browserMajorVersion:y}=d,S=m(d,["browserMajorVersion"]),b=o.toJSON(),{type:_,v:C}=b,w=m(b,["type","v"]);this.authenticationToken=o.getAuthenticationToken(),this.metadata=Object.assign(Object.assign({},S),w),Object.keys(this.metadata).forEach(k=>this.attributesToFilter.push(k)),this.type=_,this.v=C,this.ingestionURL=f,this.logger=p,this.importantEvents=new Set(h);const{maxBufferCapacityKb:R,totalBufferItems:O,flushSize:D,flushIntervalMs:I,retryCountLimit:M}=r;this.maxBufferCapacityBytes=R*1024,this.totalBufferItems=O,this.maxBufferItemCapacityBytes=Math.round(this.maxBufferCapacityBytes/O),this.flushIntervalMs=I,this.flushSize=D,this.retryCountLimit=M,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.beaconEventListener=k=>this.beaconEventHandler(k),this.addEventListeners()}},"InMemoryJSONEventBuffer");l.default=e,e.SENDING_FAILURE_CODES=new Set([408,429,500,502,503,504]),e.RETRY_FIXED_BACKOFF_WAIT_MS=0,e.RETRY_SHORT_BACKOFF_MS=1e3,e.RETRY_LONG_BACKOFF_MS=15e3,e.MAX_PAYLOAD_ITEMS=2,e.MAX_ITEM_SIZE_BYTES_ALLOWED=3e3},666910387:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(m=5e3,v=2,g=64,s=100,a=15){this.flushIntervalMs=m,this.flushSize=v,this.maxBufferCapacityKb=g,this.totalBufferItems=s,this.retryCountLimit=a}},"EventBufferConfiguration");l.default=c},913629600:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(f,h,p,d){function y(S){return S instanceof p?S:new p(function(b){b(S)})}return n(y,"adopt"),new(p||(p=Promise))(function(S,b){function _(R){try{w(d.next(R))}catch(O){b(O)}}n(_,"fulfilled");function C(R){try{w(d.throw(R))}catch(O){b(O)}}n(C,"rejected");function w(R){R.done?S(R.value):y(R.value).then(_,C)}n(w,"step"),w((d=d.apply(f,h||[])).next())})},m=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(l,"__esModule",{value:!0});const v=c(888724265),g=c(4236152345),s=m(c(8302308181)),a=m(c(7733481723)),i=m(c(2864685592)),e=m(c(9649641385)),t=m(c(6885109343)),r=m(c(7750779956));let o=n(class Xc{addObserver(h){this.observerSet.add(h)}removeObserver(h){this.observerSet.delete(h)}forEachObserver(h){for(const p of this.observerSet)e.default.nextTick(()=>{this.observerSet.has(p)&&h(p)})}publishEvent(h,p){return u(this,void 0,void 0,function*(){const d=Date.now();this.meetingHistoryStates.push({name:h,timestampMs:d});const y=Object.freeze(Object.assign(this.getAttributes(d),p));this.forEachObserver(S=>{S.eventDidReceive(h,y)}),this.reportEvent(h,d,p)})}reportEvent(h,p,d){var y;return u(this,void 0,void 0,function*(){let S;try{d&&(S=r.default(d)),yield(y=this.eventReporter)===null||y===void 0?void 0:y.reportEvent(p,h,S)}catch(b){this.logger.error(`Error reporting event ${b}`)}})}setupEventReporter(h,p,d){if(d)this._eventReporter=d;else if(h.urls){const y=h.urls.eventIngestionURL;if(y){this.logger.info("Event ingestion URL is present in the configuration");const{meetingId:S,credentials:{attendeeId:b,joinToken:_}}=h,C=new i.default(S,b,_),w=new s.default(C,y);this._eventReporter=new a.default(w,p)}}}getAttributes(h){var p,d;return{attendeeId:this.configuration.credentials.attendeeId,browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,externalMeetingId:typeof this.configuration.externalMeetingId=="string"?this.configuration.externalMeetingId:"",externalUserId:this.configuration.credentials.externalUserId,meetingHistory:this.meetingHistoryStates,meetingId:this.configuration.meetingId,osName:((p=this.parserResult)===null||p===void 0?void 0:p.os.name)||Xc.UNAVAILABLE,osVersion:((d=this.parserResult)===null||d===void 0?void 0:d.os.version)||Xc.UNAVAILABLE,sdkVersion:t.default.sdkVersion,sdkName:t.default.sdkName,timestampMs:h}}get eventReporter(){return this._eventReporter}destroy(){return u(this,void 0,void 0,function*(){g.isDestroyable(this.eventReporter)&&(yield this.eventReporter.destroy()),this.logger=void 0,this.configuration=void 0,this._eventReporter=void 0,this.destroyed=!0})}constructor(h,p,d){var y,S,b,_,C,w,R;this.meetingHistoryStates=[],this.observerSet=new Set,this.destroyed=!1,this.logger=p,this.configuration=h,this.setupEventReporter(h,p,d);try{this.parserResult=navigator&&navigator.userAgent?new v.UAParser(navigator.userAgent).getResult():null}catch(O){this.logger.error(O.message)}this.browserMajorVersion=((b=(S=(y=this.parserResult)===null||y===void 0?void 0:y.browser)===null||S===void 0?void 0:S.version)===null||b===void 0?void 0:b.split(".")[0])||Xc.UNAVAILABLE,this.browserName=((_=this.parserResult)===null||_===void 0?void 0:_.browser.name)||Xc.UNAVAILABLE,this.browserVersion=((C=this.parserResult)===null||C===void 0?void 0:C.browser.version)||Xc.UNAVAILABLE,this.deviceName=[((w=this.parserResult)===null||w===void 0?void 0:w.device.vendor)||"",((R=this.parserResult)===null||R===void 0?void 0:R.device.model)||""].join(" ").trim()||Xc.UNAVAILABLE}},"DefaultEventController");l.default=o,o.UNAVAILABLE="Unavailable"},7750779956:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const c=n(u=>{const m={};for(const[v,g]of Object.entries(u))if(!(g==null||g===""))if(typeof g=="number"||typeof g=="string")m[v]=g;else throw new TypeError("Unhandled type received while flattening attributes.");return m},"flattenEventAttributes");l.default=c},8302308181:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(666910387));let v=n(class{constructor(s,a,i=new m.default){this.eventsClientConfiguration=s,this.ingestionURL=a,this.eventBufferConfiguration=i}},"EventIngestionConfiguration");l.default=v},7733481723:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=c(4236152345),g=m(c(9004346135));let s=n(class{start(){if(!this.reportingEvents)try{this.eventBuffer.start(),this.logger.info("Event reporting started"),this.reportingEvents=!0}catch(i){this.logger.error(`Event Reporting - Error starting the event buffer ${i}`)}}stop(){if(this.reportingEvents)try{this.eventBuffer.stop(),this.logger.info("Event reporting stopped"),this.reportingEvents=!1}catch(i){this.logger.error(`Event Reporting - Error stopping the event buffer ${i}`)}}reportEvent(i,e,t){return u(this,void 0,void 0,function*(){if(this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - event received in reportEvent ${i}, ${e}, ${JSON.stringify(t)}`),this.eventsToIgnore.includes(e)){this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - ${e} event will be ignored as it is in events to ignore`);return}try{this.logger.debug("Event Reporting - DefaultMeetingEventReporter - adding item to event buffer"),yield this.eventBuffer.addItem({ts:i,name:e,attributes:t})}catch(r){this.logger.error(`Event Reporting - Error adding event to buffer ${r}`)}})}destroy(){return u(this,void 0,void 0,function*(){this.destroyed=!0,this.stop(),v.isDestroyable(this.eventBuffer)&&this.eventBuffer.destroy(),this.eventBuffer=void 0})}constructor(i,e){this.reportingEvents=!1,this.importantEvents=["meetingEnded","meetingFailed","meetingStartFailed","audioInputFailed","videoInputFailed","meetingStartSucceeded","deviceLabelTriggerFailed"],this.destroyed=!1;const{eventsClientConfiguration:t,ingestionURL:r,eventBufferConfiguration:o}=i,{eventsToIgnore:f}=t;this.eventBuffer=new g.default(o,t,r,this.importantEvents,e),this.logger=e,this.eventsToIgnore=f,this.start()}},"DefaultMeetingEventReporter");l.default=s},9931580517:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{reportEvent(m,v,g){}start(){}stop(){}constructor(){}},"NoOpEventReporter");l.default=c},2864685592:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{getAuthenticationToken(){return this.authenticationToken}toJSON(){const m={};return m.type=this.type,m.v=this.v,m.meetingId=this.meetingId,m.attendeeId=this.attendeeId,m}constructor(m,v,g,s=[]){this.type="Meet",this.v=1,this.meetingId=m,this.attendeeId=v,this.eventsToIgnore=s,this.authenticationToken=g}},"MeetingEventsClientConfiguration");l.default=c},3305135794:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(la){return la&&la.__esModule?la:{default:la}};Object.defineProperty(l,"__esModule",{value:!0}),l.DefaultEventController=l.DefaultDevicePixelRatioMonitor=l.DefaultDeviceController=l.DefaultContentShareController=l.DefaultBrowserBehavior=l.DefaultAudioVideoFacade=l.DefaultAudioVideoController=l.DefaultAudioMixController=l.DefaultActiveSpeakerPolicy=l.DefaultActiveSpeakerDetector=l.DataMessage=l.CreateSDPTask=l.CreatePeerConnectionTask=l.ContentShareMediaStreamBroker=l.ContentShareConstants=l.ConsoleLogger=l.ConnectionHealthPolicyConfiguration=l.ConnectionHealthData=l.ClientVideoStreamReceivingReport=l.ClientMetricReportMediaType=l.ClientMetricReportDirection=l.ClientMetricReport=l.CleanStoppedSessionTask=l.CleanRestartedSessionTask=l.CheckVideoInputFeedback=l.CheckVideoConnectivityFeedback=l.CheckNetworkUDPConnectivityFeedback=l.CheckNetworkTCPConnectivityFeedback=l.CheckContentShareConnectivityFeedback=l.CheckCameraResolutionFeedback=l.CheckAudioOutputFeedback=l.CheckAudioInputFeedback=l.CheckAudioConnectivityFeedback=l.CanvasVideoFrameBuffer=l.CSPMonitor=l.BitrateParameters=l.BaseTask=l.BaseConnectionHealthPolicy=l.BackgroundReplacementVideoFrameProcessor=l.BackgroundFilterVideoFrameProcessor=l.BackgroundBlurVideoFrameProcessor=l.BackgroundBlurStrength=l.AudioVideoControllerState=l.AudioProfile=l.AudioLogEvent=l.Attendee=l.AttachMediaInputTask=l.AsyncScheduler=l.ApplicationMetadata=l.AllHighestVideoBandwidthPolicy=void 0,l.MeetingReadinessCheckerConfiguration=l.MeetingFeatures=l.MeetingEventsClientConfiguration=l.MediaDeviceProxyHandler=l.Maybe=l.LogLevel=l.Log=l.ListenForVolumeIndicatorsTask=l.LeaveAndReceiveLeaveAckTask=l.JoinAndReceiveIndexTask=l.IntervalScheduler=l.InMemoryJSONEventBuffer=l.GlobalMetricReport=l.GetUserMediaError=l.FullJitterLimitedBackoff=l.FullJitterBackoffFactory=l.FullJitterBackoff=l.FinishGatheringICECandidatesTask=l.EventIngestionConfiguration=l.EventBufferConfiguration=l.DeviceSelection=l.DevicePixelRatioWindowSource=l.DefaultWebSocketAdapter=l.DefaultVolumeIndicatorAdapter=l.DefaultVideoTransformDevice=l.DefaultVideoTileFactory=l.DefaultVideoTileController=l.DefaultVideoTile=l.DefaultVideoStreamIndex=l.DefaultVideoStreamIdSet=l.DefaultVideoFrameProcessorTimer=l.DefaultVideoFrameProcessorPipeline=l.DefaultVideoCaptureAndEncodeParameter=l.DefaultUserAgentParser=l.DefaultTranscriptionController=l.DefaultTransceiverController=l.DefaultSimulcastUplinkPolicyForContentShare=l.DefaultSimulcastUplinkPolicy=l.DefaultSignalingClient=l.DefaultSigV4=l.DefaultSessionStateController=l.DefaultReconnectController=l.DefaultRealtimeController=l.DefaultPingPong=l.DefaultModality=l.DefaultMessagingSession=l.DefaultMeetingSession=l.DefaultMeetingReadinessChecker=l.DefaultMeetingEventReporter=l.DefaultMediaDeviceFactory=void 0,l.RedundantAudioEncoderWorkerCode=l.RedundantAudioEncoder=l.ReconnectionHealthPolicy=l.ReceiveVideoStreamIndexTask=l.ReceiveVideoInputTask=l.ReceiveRemoteVideoPauseResumeTask=l.ReceiveAudioInputTask=l.RealtimeVolumeIndicator=l.RealtimeState=l.RealtimeAttendeePositionInFrame=l.PromoteToPrimaryMeetingTask=l.PromiseQueue=l.PrefetchSortBy=l.PrefetchOn=l.PermissionDeniedError=l.ParallelGroupTask=l.POSTLogger=l.OverconstrainedError=l.OpenSignalingConnectionTask=l.OnceTask=l.NotReadableError=l.NotFoundError=l.None=l.NoVideoUplinkBandwidthPolicy=l.NoVideoDownlinkBandwidthPolicy=l.NoOpVideoFrameProcessor=l.NoOpVideoElementFactory=l.NoOpTask=l.NoOpMediaStreamBroker=l.NoOpLogger=l.NoOpEventReporter=l.NoOpDeviceController=l.NoOpDebugLogger=l.NoOpAudioVideoController=l.NScaleVideoUplinkBandwidthPolicy=l.MutableVideoPreferences=l.MultiLogger=l.MonitorTask=l.ModelSpecBuilder=l.MessagingSessionConfiguration=l.Message=l.MeetingSessionVideoAvailability=l.MeetingSessionURLs=l.MeetingSessionTURNCredentials=l.MeetingSessionStatusCode=l.MeetingSessionStatus=l.MeetingSessionLifecycleEventCondition=l.MeetingSessionLifecycleEvent=l.MeetingSessionCredentials=l.MeetingSessionConfiguration=void 0,l.VideoEncodingCpuConnectionHealthPolicy=l.VideoEncodingConnectionHealthPolicyName=l.VideoCodecCapability=l.VideoAdaptiveProbePolicy=l.Versioning=l.UnusableAudioWarningConnectionHealthPolicy=l.TypeError=l.TranscriptionStatusType=l.TranscriptionStatus=l.TranscriptResult=l.TranscriptLanguageWithScore=l.TranscriptItemType=l.TranscriptItem=l.TranscriptEntity=l.TranscriptAlternative=l.Transcript=l.TimeoutTask=l.TimeoutScheduler=l.TaskStatus=l.TargetDisplaySize=l.SubscribeAndReceiveSubscribeAckTask=l.StreamMetricReport=l.Some=l.SingleNodeAudioTransformDevice=l.SimulcastVideoStreamIndex=l.SimulcastTransceiverController=l.SimulcastLayers=l.SimulcastContentShareTransceiverController=l.SignalingClientVideoSubscriptionConfiguration=l.SignalingClientSubscribe=l.SignalingClientJoin=l.SignalingClientEventType=l.SignalingClientEvent=l.SignalingClientConnectionRequest=l.SignalingAndMetricsConnectionMonitor=l.SetRemoteDescriptionTask=l.SetLocalDescriptionTask=l.SessionStateControllerTransitionResult=l.SessionStateControllerState=l.SessionStateControllerDeferPriority=l.SessionStateControllerAction=l.ServerSideNetworkAdaption=l.SerialGroupTask=l.SendingAudioFailureConnectionHealthPolicy=l.SendAndReceiveDataMessagesTask=l.SDPMediaSection=l.SDPCandidateType=l.SDP=l.RunnableTask=l.RedundantAudioRecoveryMetricReport=void 0,l.isVideoTransformDevice=l.isDestroyable=l.isAudioTransformDevice=l.ZLIBTextCompressor=l.WebSocketReadyState=l.WaitForAttendeePresenceTask=l.VoiceFocusTransformDevice=l.VoiceFocusDeviceTransformer=l.VideoTileState=l.VideoStreamDescription=l.VideoSource=l.VideoQualitySettings=l.VideoQualityAdaptationPreference=l.VideoPriorityBasedPolicyConfig=l.VideoPriorityBasedPolicy=l.VideoPreferences=l.VideoPreference=l.VideoOnlyTransceiverController=l.VideoLogEvent=l.VideoFxProcessor=l.VideoEncodingFramerateConnectionHealthPolicy=void 0;const m=u(c(9677745702));l.AllHighestVideoBandwidthPolicy=m.default;const v=u(c(1035256489));l.ApplicationMetadata=v.default;const g=u(c(9649641385));l.AsyncScheduler=g.default;const s=u(c(4713678292));l.AttachMediaInputTask=s.default;const a=u(c(9898009183));l.Attendee=a.default;const i=u(c(4882678815));l.AudioLogEvent=i.default;const e=u(c(5983965185));l.AudioProfile=e.default;const t=u(c(4610074022));l.AudioVideoControllerState=t.default;const r=u(c(1174868230));l.BackgroundBlurStrength=r.default;const o=u(c(3437938989));l.BackgroundBlurVideoFrameProcessor=o.default;const f=u(c(6828608641));l.BackgroundFilterVideoFrameProcessor=f.default;const h=u(c(3561775467));l.BackgroundReplacementVideoFrameProcessor=h.default;const p=u(c(1516469294));l.BaseConnectionHealthPolicy=p.default;const d=u(c(5009059128));l.BaseTask=d.default;const y=u(c(4207915265));l.BitrateParameters=y.default;const S=u(c(8207737579));l.CSPMonitor=S.default;const b=u(c(1458156729));l.CanvasVideoFrameBuffer=b.default;const _=u(c(5131738647));l.CheckAudioConnectivityFeedback=_.default;const C=u(c(5912013634));l.CheckAudioInputFeedback=C.default;const w=u(c(5266008321));l.CheckAudioOutputFeedback=w.default;const R=u(c(492984661));l.CheckCameraResolutionFeedback=R.default;const O=u(c(1012711751));l.CheckContentShareConnectivityFeedback=O.default;const D=u(c(1711209018));l.CheckNetworkTCPConnectivityFeedback=D.default;const I=u(c(1519813406));l.CheckNetworkUDPConnectivityFeedback=I.default;const M=u(c(5425713910));l.CheckVideoConnectivityFeedback=M.default;const k=u(c(2656423953));l.CheckVideoInputFeedback=k.default;const N=u(c(9089081530));l.CleanRestartedSessionTask=N.default;const j=u(c(5703332651));l.CleanStoppedSessionTask=j.default;const B=u(c(9029233041));l.ClientMetricReport=B.default;const J=u(c(6502873558));l.ClientMetricReportDirection=J.default;const Q=u(c(6132421099));l.ClientMetricReportMediaType=Q.default;const oe=u(c(863418510));l.ClientVideoStreamReceivingReport=oe.default;const $=u(c(9200233701));l.ConnectionHealthData=$.default;const he=u(c(8692068971));l.ConnectionHealthPolicyConfiguration=he.default;const Ae=u(c(3714104304));l.ConsoleLogger=Ae.default;const Ee=u(c(805846668));l.ContentShareConstants=Ee.default;const Oe=u(c(220809536));l.ContentShareMediaStreamBroker=Oe.default;const be=u(c(9049733277));l.CreatePeerConnectionTask=be.default;const De=u(c(4708498556));l.CreateSDPTask=De.default;const ut=u(c(9091803745));l.DataMessage=ut.default;const St=u(c(7581324406));l.DefaultActiveSpeakerDetector=St.default;const Rt=u(c(1473791890));l.DefaultActiveSpeakerPolicy=Rt.default;const Ze=u(c(9598694912));l.DefaultAudioMixController=Ze.default;const mt=u(c(1833994912));l.DefaultAudioVideoController=mt.default;const At=u(c(9305916160));l.DefaultAudioVideoFacade=At.default;const Vt=u(c(5546774952));l.DefaultBrowserBehavior=Vt.default;const dt=u(c(7050079116));l.DefaultContentShareController=dt.default;const Cn=u(c(8503424008));l.DefaultDeviceController=Cn.default;const gt=u(c(5163444346));l.DefaultDevicePixelRatioMonitor=gt.default;const Ut=u(c(913629600));l.DefaultEventController=Ut.default;const en=u(c(1716952340));l.DefaultMediaDeviceFactory=en.default;const sn=u(c(7733481723));l.DefaultMeetingEventReporter=sn.default;const $t=u(c(5346911216));l.DefaultMeetingReadinessChecker=$t.default;const Rn=u(c(6643608480));l.DefaultMeetingSession=Rn.default;const di=u(c(9331325908));l.DefaultMessagingSession=di.default;const ii=u(c(8006173476));l.DefaultModality=ii.default;const Kn=u(c(6348496904));l.DefaultPingPong=Kn.default;const hi=u(c(7692233712));l.DefaultRealtimeController=hi.default;const Ln=u(c(2114525466));l.DefaultReconnectController=Ln.default;const Hn=u(c(6900744364));l.DefaultSessionStateController=Hn.default;const ui=u(c(7924674822));l.DefaultSigV4=ui.default;const jn=u(c(7570945794));l.DefaultSignalingClient=jn.default;const ri=u(c(1604549269));l.DefaultSimulcastUplinkPolicy=ri.default;const ie=u(c(4499376852));l.DefaultSimulcastUplinkPolicyForContentShare=ie.default;const Mt=u(c(2392158736));l.DefaultTransceiverController=Mt.default;const Ot=u(c(6391477986));l.DefaultTranscriptionController=Ot.default;const Ht=u(c(3894274294));l.DefaultUserAgentParser=Ht.default;const hn=u(c(1695739824));l.DefaultVideoCaptureAndEncodeParameter=hn.default;const tn=u(c(4353575046));l.DefaultVideoFrameProcessorPipeline=tn.default;const xe=u(c(4223139537));l.DefaultVideoFrameProcessorTimer=xe.default;const Dt=u(c(1865309432));l.DefaultVideoStreamIdSet=Dt.default;const Y=u(c(2469210420));l.DefaultVideoStreamIndex=Y.default;const fe=u(c(8089299542));l.DefaultVideoTile=fe.default;const et=u(c(4675986794));l.DefaultVideoTileController=et.default;const nt=u(c(1309535200));l.DefaultVideoTileFactory=nt.default;const nn=u(c(7309008175));l.DefaultVideoTransformDevice=nn.default;const kt=u(c(8058016368));l.DefaultVolumeIndicatorAdapter=kt.default;const Jt=u(c(7880459944));l.DefaultWebSocketAdapter=Jt.default;const Ke=u(c(3563909523));l.DevicePixelRatioWindowSource=Ke.default;const vt=u(c(1869028663));l.DeviceSelection=vt.default;const x=u(c(666910387));l.EventBufferConfiguration=x.default;const Ye=u(c(8302308181));l.EventIngestionConfiguration=Ye.default;const it=u(c(2635066756));l.FinishGatheringICECandidatesTask=it.default;const ft=u(c(4571447548));l.FullJitterBackoff=ft.default;const ge=u(c(4692955950));l.FullJitterBackoffFactory=ge.default;const Zn=u(c(1733276918));l.FullJitterLimitedBackoff=Zn.default;const Xt=u(c(7754931014));l.GetUserMediaError=Xt.default;const pn=u(c(7966078085));l.GlobalMetricReport=pn.default;const Bi=u(c(9004346135));l.InMemoryJSONEventBuffer=Bi.default;const Gn=u(c(9877075638));l.IntervalScheduler=Gn.default;const yo=u(c(9488451395));l.JoinAndReceiveIndexTask=yo.default;const no=u(c(9638153336));l.LeaveAndReceiveLeaveAckTask=no.default;const Vi=u(c(7966229607));l.ListenForVolumeIndicatorsTask=Vi.default;const or=u(c(4153358599));l.Log=or.default;const ki=u(c(1370928943));l.LogLevel=ki.default;const qi=u(c(7632020355));l.MediaDeviceProxyHandler=qi.default;const Or=u(c(2864685592));l.MeetingEventsClientConfiguration=Or.default;const Zo=u(c(2612255336));l.MeetingFeatures=Zo.default;const Xn=u(c(898490693));l.MeetingReadinessCheckerConfiguration=Xn.default;const Dn=u(c(6226061697));l.MeetingSessionConfiguration=Dn.default;const Ni=u(c(8023404193));l.MeetingSessionCredentials=Ni.default;const pi=u(c(2234819701));l.MeetingSessionLifecycleEvent=pi.default;const ir=u(c(546597810));l.MeetingSessionLifecycleEventCondition=ir.default;const br=u(c(7551081659));l.MeetingSessionStatus=br.default;const zr=u(c(9447989038));l.MeetingSessionStatusCode=zr.default;const pr=u(c(4943767904));l.MeetingSessionTURNCredentials=pr.default;const mr=u(c(803810435));l.MeetingSessionURLs=mr.default;const Ur=u(c(488357679));l.MeetingSessionVideoAvailability=Ur.default;const io=u(c(1261307249));l.Message=io.default;const ur=u(c(6589808043));l.MessagingSessionConfiguration=ur.default;const wo=u(c(3051230507));l.ModelSpecBuilder=wo.default;const $r=u(c(1614136239));l.MonitorTask=$r.default;const Vo=u(c(23593200));l.MultiLogger=Vo.default;const V=u(c(9136055221));l.NScaleVideoUplinkBandwidthPolicy=V.default;const we=u(c(8589145157));l.NoOpAudioVideoController=we.default;const ct=u(c(5047661014));l.NoOpDebugLogger=ct.default;const Wt=u(c(8082139119));l.NoOpDeviceController=Wt.default;const On=u(c(9931580517));l.NoOpEventReporter=On.default;const fi=u(c(1831006443));l.NoOpLogger=fi.default;const Li=u(c(9437918857));l.NoOpMediaStreamBroker=Li.default;const gi=u(c(5628139313));l.NoOpTask=gi.default;const Mi=u(c(3718889761));l.NoOpVideoElementFactory=Mi.default;const Oi=u(c(3814682321));l.NoOpVideoFrameProcessor=Oi.default;const Yi=u(c(681222244));l.NoVideoDownlinkBandwidthPolicy=Yi.default;const Cr=u(c(9871896518));l.NoVideoUplinkBandwidthPolicy=Cr.default;const wr=u(c(1823340272));l.NotFoundError=wr.default;const Kr=u(c(566402552));l.NotReadableError=Kr.default;const bo=u(c(7537135456));l.OnceTask=bo.default;const ia=u(c(3292077469));l.OpenSignalingConnectionTask=ia.default;const Fo=u(c(5336609685));l.OverconstrainedError=Fo.default;const zi=u(c(7722414101));l.POSTLogger=zi.default;const co=u(c(6085879951));l.ParallelGroupTask=co.default;const Zr=u(c(763542717));l.PermissionDeniedError=Zr.default;const Ao=u(c(4741303625));l.PrefetchOn=Ao.default;const No=u(c(2097622617));l.PrefetchSortBy=No.default;const qo=u(c(3054351868));l.PromiseQueue=qo.default;const ca=u(c(9588672479));l.PromoteToPrimaryMeetingTask=ca.default;const Bo=u(c(3171391796));l.RealtimeAttendeePositionInFrame=Bo.default;const ba=u(c(7618200138));l.RealtimeState=ba.default;const Ho=u(c(7832597620));l.RealtimeVolumeIndicator=Ho.default;const Fe=u(c(9531998674));l.ReceiveAudioInputTask=Fe.default;const tt=u(c(587698570));l.ReceiveRemoteVideoPauseResumeTask=tt.default;const It=u(c(86955145));l.ReceiveVideoInputTask=It.default;const Qt=u(c(8297256329));l.ReceiveVideoStreamIndexTask=Qt.default;const cn=u(c(5850044630));l.ReconnectionHealthPolicy=cn.default;const fn=u(c(3937896393));l.RedundantAudioEncoder=fn.default;const ci=u(c(9337558969));l.RedundantAudioEncoderWorkerCode=ci.default;const _i=u(c(3237015968));l.RedundantAudioRecoveryMetricReport=_i.default;const bi=u(c(457099596));l.RunnableTask=bi.default;const si=u(c(182939685));l.SDP=si.default;const Ui=u(c(9489740826));l.SDPCandidateType=Ui.default;const Nn=u(c(6818892922));l.SDPMediaSection=Nn.default;const Sr=u(c(7680112541));l.SendAndReceiveDataMessagesTask=Sr.default;const wi=u(c(4866586987));l.SendingAudioFailureConnectionHealthPolicy=wi.default;const qr=u(c(8872868578));l.SerialGroupTask=qr.default;const uo=u(c(5393388022));l.ServerSideNetworkAdaption=uo.default;const go=u(c(3795683579));l.SessionStateControllerAction=go.default;const ji=u(c(7012117651));l.SessionStateControllerDeferPriority=ji.default;const Qi=u(c(2092275410));l.SessionStateControllerState=Qi.default;const _r=u(c(583806999));l.SessionStateControllerTransitionResult=_r.default;const Jr=u(c(5976676062));l.SetLocalDescriptionTask=Jr.default;const jo=u(c(339097629));l.SetRemoteDescriptionTask=jo.default;const ea=u(c(8619504925));l.SignalingAndMetricsConnectionMonitor=ea.default;const gr=u(c(7263318766));l.SignalingClientConnectionRequest=gr.default;const ua=u(c(1578897375));l.SignalingClientEvent=ua.default;const so=u(c(7969706599));l.SignalingClientEventType=so.default;const Jo=u(c(3867485289));l.SignalingClientJoin=Jo.default;const $a=u(c(3735795291));l.SignalingClientSubscribe=$a.default;const Qa=u(c(4804743313));l.SignalingClientVideoSubscriptionConfiguration=Qa.default;const _a=u(c(8213452704));l.SimulcastContentShareTransceiverController=_a.default;const Wa=u(c(9131051489));l.SimulcastLayers=Wa.default;const za=u(c(372560720));l.SimulcastTransceiverController=za.default;const Na=u(c(8697249276));l.SimulcastVideoStreamIndex=Na.default;const sa=u(c(2847388805));l.SingleNodeAudioTransformDevice=sa.default;const pa=u(c(6172292806));l.StreamMetricReport=pa.default;const Ka=u(c(3248483798));l.SubscribeAndReceiveSubscribeAckTask=Ka.default;const Lo=u(c(2178339051));l.TargetDisplaySize=Lo.default;const ma=u(c(6013191119));l.TaskStatus=ma.default;const Ja=u(c(5824864644));l.TimeoutScheduler=Ja.default;const Ta=u(c(7638277718));l.TimeoutTask=Ta.default;const ns=u(c(4042214483));l.Transcript=ns.default;const bs=u(c(8928051514));l.TranscriptAlternative=bs.default;const da=u(c(3886666628));l.TranscriptEntity=da.default;const fs=u(c(6128278192));l.TranscriptItem=fs.default;const So=u(c(2855080400));l.TranscriptItemType=So.default;const Wo=u(c(2600940909));l.TranscriptLanguageWithScore=Wo.default;const Uo=u(c(3373821534));l.TranscriptResult=Uo.default;const ra=u(c(2832046333));l.TranscriptionStatus=ra.default;const oa=u(c(8532168277));l.TranscriptionStatusType=oa.default;const hs=u(c(9398215393));l.TypeError=hs.default;const me=u(c(174963938));l.UnusableAudioWarningConnectionHealthPolicy=me.default;const Ie=u(c(6885109343));l.Versioning=Ie.default;const $e=u(c(3368465086));l.VideoAdaptiveProbePolicy=$e.default;const ot=u(c(8804723777));l.VideoCodecCapability=ot.default;const Et=u(c(3334420728));l.VideoEncodingConnectionHealthPolicyName=Et.default;const Yt=u(c(6661072615));l.VideoEncodingCpuConnectionHealthPolicy=Yt.default;const jt=u(c(1502393534));l.VideoEncodingFramerateConnectionHealthPolicy=jt.default;const yn=u(c(1314104503));l.VideoFxProcessor=yn.default;const Sn=u(c(1404048602));l.VideoLogEvent=Sn.default;const Pn=u(c(161472916));l.VideoOnlyTransceiverController=Pn.default;const In=u(c(3803169181));l.VideoPreference=In.default;const Jn=u(c(8071414974));l.VideoPreferences=Jn.default;const ei=u(c(8681774825));l.VideoPriorityBasedPolicy=ei.default;const oi=u(c(3348721919));l.VideoPriorityBasedPolicyConfig=oi.default;const Si=u(c(4829581265));l.VideoQualityAdaptationPreference=Si.default;const yi=u(c(1197017824));l.VideoQualitySettings=yi.default;const li=u(c(8050111605));l.VideoSource=li.default;const Yn=u(c(6105894327));l.VideoStreamDescription=Yn.default;const Gi=u(c(6345807038));l.VideoTileState=Gi.default;const Wr=u(c(1644756024));l.VoiceFocusDeviceTransformer=Wr.default;const oo=u(c(7141525823));l.VoiceFocusTransformDevice=oo.default;const lo=u(c(4098780146));l.WaitForAttendeePresenceTask=lo.default;const dn=u(c(5638612424));l.WebSocketReadyState=dn.default;const fo=u(c(3475297719));l.ZLIBTextCompressor=fo.default;const to=c(8071414974);Object.defineProperty(l,"MutableVideoPreferences",{enumerable:!0,get:function(){return to.MutableVideoPreferences}});const fr=c(6527539809);Object.defineProperty(l,"Some",{enumerable:!0,get:function(){return fr.Some}}),Object.defineProperty(l,"None",{enumerable:!0,get:function(){return fr.None}}),Object.defineProperty(l,"Maybe",{enumerable:!0,get:function(){return fr.Maybe}});const xo=c(9678458173);Object.defineProperty(l,"isAudioTransformDevice",{enumerable:!0,get:function(){return xo.isAudioTransformDevice}});const _o=c(4236152345);Object.defineProperty(l,"isDestroyable",{enumerable:!0,get:function(){return _o.isDestroyable}});const fa=c(7952414906);Object.defineProperty(l,"isVideoTransformDevice",{enumerable:!0,get:function(){return fa.isVideoTransformDevice}})},3714104304:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(1370928943));let v=n(class{info(s){this.log(m.default.INFO,s)}warn(s){this.log(m.default.WARN,s)}error(s){this.log(m.default.ERROR,s)}debug(s){m.default.DEBUG<this.level||(typeof s=="string"?this.log(m.default.DEBUG,s):s?this.log(m.default.DEBUG,s()):this.log(m.default.DEBUG,""+s))}setLogLevel(s){this.level=s}getLogLevel(){return this.level}log(s,a){if(s<this.level)return;const e=`${new Date().toISOString()} [${m.default[s]}] ${this.name} - ${a}`;switch(s){case m.default.ERROR:console.error(e);break;case m.default.WARN:console.warn(e);break;case m.default.DEBUG:console.debug(e.replace(/\\r\\n/g,`
`));break;case m.default.INFO:console.info(e);break}}constructor(s,a=m.default.WARN){this.name=s,this.level=a}},"ConsoleLogger");l.default=v},4153358599:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(m,v,g,s){this.sequenceNumber=m,this.message=v,this.timestampMs=g,this.logLevel=s}},"Log");l.default=c},1370928943:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.LogLevel=void 0;var c;(function(u){u[u.DEBUG=0]="DEBUG",u[u.INFO=1]="INFO",u[u.WARN=2]="WARN",u[u.ERROR=3]="ERROR",u[u.OFF=4]="OFF"})(c=l.LogLevel||(l.LogLevel={})),l.default=c},23593200:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(1370928943));let v=n(class{info(s){for(const a of this._loggers)a.info(s)}warn(s){for(const a of this._loggers)a.warn(s)}error(s){for(const a of this._loggers)a.error(s)}debug(s){let a,i;typeof s=="string"?i=s:s?i=n(()=>(a||(a=s()),a),"memoized"):i=""+s;for(const e of this._loggers)e.debug(i)}setLogLevel(s){for(const a of this._loggers)a.setLogLevel(s)}getLogLevel(){for(const s of this._loggers)return s.getLogLevel();return m.default.OFF}constructor(...s){this._loggers=s}},"MultiLogger");l.default=v},5047661014:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(1370928943)),v=u(c(1831006443));let g=n(class extends v.default{constructor(){super(m.default.DEBUG)}},"NoOpDebugLogger");l.default=g},1831006443:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(1370928943));let v=n(class{info(s){}warn(s){}error(s){}debug(s){m.default.DEBUG<this.level||typeof s!="string"&&s()}setLogLevel(s){this.level=s}getLogLevel(){return this.level}constructor(s=m.default.OFF){this.level=s}},"NoOpLogger");l.default=v},7722414101:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(9877075638)),g=m(c(4153358599)),s=m(c(1370928943));let a=n(class wg{addEventListener(){!this.eventListener||!("window"in c.g)||!window.addEventListener||window.addEventListener("unload",this.eventListener)}removeEventListener(){!this.eventListener||!("window"in c.g)||!window.removeEventListener||window.removeEventListener("unload",this.eventListener)}debug(e){s.default.DEBUG<this.logLevel||(typeof e=="string"?this.log(s.default.DEBUG,e):e?this.log(s.default.DEBUG,e()):this.log(s.default.DEBUG,""+e))}info(e){this.log(s.default.INFO,e)}warn(e){this.log(s.default.WARN,e)}error(e){this.log(s.default.ERROR,e)}setLogLevel(e){this.logLevel=e}getLogLevel(){return this.logLevel}getLogCaptureSize(){return this.logCapture.length}start(){this.addEventListener(),this.intervalScheduler=new v.default(this.intervalMs),this.intervalScheduler.start(()=>u(this,void 0,void 0,function*(){if(this.lock===!0||this.getLogCaptureSize()===0)return;this.lock=!0;const e=this.logCapture.slice(0,this.batchSize),t=this.makeRequestBody(e);try{(yield fetch(this.url,Object.assign({method:"POST",body:t},this.headers?{headers:this.headers}:{}))).status===200&&(this.logCapture=this.logCapture.slice(e.length))}catch(r){console.warn("[POSTLogger] "+r.message)}finally{this.lock=!1}}))}stop(){var e;(e=this.intervalScheduler)===null||e===void 0||e.stop(),this.intervalScheduler=void 0,this.removeEventListener();const t=this.makeRequestBody(this.logCapture);navigator.sendBeacon(this.url,t)}destroy(){return u(this,void 0,void 0,function*(){this.stop(),this.metadata=void 0,this.headers=void 0,this.logCapture=[],this.sequenceNumber=0,this.lock=!1,this.batchSize=0,this.intervalMs=0,this.url=void 0})}makeRequestBody(e){return JSON.stringify(Object.assign(Object.assign({},this.metadata),{logs:e}))}log(e,t){if(e<this.logLevel)return;const r=Date.now();this.logCapture.push(new g.default(this.sequenceNumber,t,r,s.default[e])),this.sequenceNumber+=1}constructor(e){this.logCapture=[],this.lock=!1,this.sequenceNumber=0;const{url:t,batchSize:r=wg.BATCH_SIZE,intervalMs:o=wg.INTERVAL_MS,logLevel:f=s.default.WARN,metadata:h,headers:p}=e;this.url=t,this.batchSize=r,this.intervalMs=o,this.logLevel=f,this.metadata=h,this.headers=p,this.start(),this.eventListener=()=>{this.stop()},this.addEventListener()}},"POSTLogger");l.default=a,a.BATCH_SIZE=85,a.INTERVAL_MS=2e3},1716952340:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(7632020355));let v=n(class{create(){if(this.isMediaDevicesSupported)return new Proxy(navigator.mediaDevices,new m.default);throw new Error("navigator.mediaDevices is not supported")}constructor(){this.isMediaDevicesSupported=typeof navigator<"u"&&!!navigator.mediaDevices}},"DefaultMediaDeviceFactory");l.default=v},7632020355:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(9649641385)),g=m(c(9877075638));let s=n(class vv{sortedDeviceList(){return u(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).sort((e,t)=>e.deviceId<t.deviceId?1:e.deviceId>t.deviceId?-1:0)})}handleDeviceChangeEvent(){for(const i of this.deviceChangeListeners)v.default.nextTick(()=>{if(this.deviceChangeListeners.has(i)){const e=new Event("devicechange");typeof i=="function"?i(e):i.handleEvent(e)}})}constructor(){this.scheduler=null,this.devices=null,this.deviceChangeListeners=new Set,this.get=(i,e,t)=>{if(!Reflect.has(i,e))return;if(!("ondevicechange"in navigator.mediaDevices)){if(e==="addEventListener")return this.patchAddEventListener(i,e,t);if(e==="removeEventListener")return this.patchRemoveEventListener(i,e,t)}const r=Reflect.get(i,e,t);return typeof r=="function"?r.bind(i):r},this.patchAddEventListener=(i,e,t)=>{const r=Reflect.get(i,e,t);return(o,f,h)=>{if(o==="devicechange")this.deviceChangeListeners.add(f),this.scheduler||(this.scheduler=new g.default(vv.INTERVAL_MS),this.scheduler.start(this.pollDeviceLists));else return Reflect.apply(r,i,[o,f,h])}},this.patchRemoveEventListener=(i,e,t)=>{const r=Reflect.get(i,e,t);return(o,f,h)=>{if(o==="devicechange")this.deviceChangeListeners.delete(f),this.deviceChangeListeners.size===0&&this.scheduler&&(this.scheduler.stop(),this.scheduler=null);else return Reflect.apply(r,i,[o,f,h])}},this.pollDeviceLists=()=>u(this,void 0,void 0,function*(){const i=yield this.sortedDeviceList();this.devices&&(i.length!==this.devices.length||i.some((t,r)=>t.deviceId!==this.devices[r].deviceId))&&this.handleDeviceChangeEvent(),this.devices=i})}},"MediaDeviceProxyHandler");l.default=s,s.INTERVAL_MS=1e3},9437918857:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{acquireAudioInputStream(){return Promise.reject()}acquireVideoInputStream(){return Promise.reject()}acquireDisplayInputStream(m){return Promise.reject()}muteLocalAudioInputStream(){}unmuteLocalAudioInputStream(){}addMediaStreamBrokerObserver(m){}removeMediaStreamBrokerObserver(m){}},"NoOpMediaStreamBroker");l.default=c},5131738647:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioConnectivityFeedback=void 0;var c;(function(u){u[u.Succeeded=0]="Succeeded",u[u.AudioInputRequestFailed=1]="AudioInputRequestFailed",u[u.AudioInputPermissionDenied=2]="AudioInputPermissionDenied",u[u.ConnectionFailed=3]="ConnectionFailed",u[u.AudioNotReceived=4]="AudioNotReceived"})(c=l.CheckAudioConnectivityFeedback||(l.CheckAudioConnectivityFeedback={})),l.default=c},5912013634:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioInputFeedback=void 0;var c;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.PermissionDenied=2]="PermissionDenied"})(c=l.CheckAudioInputFeedback||(l.CheckAudioInputFeedback={})),l.default=c},5266008321:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioOutputFeedback=void 0;var c;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed"})(c=l.CheckAudioOutputFeedback||(l.CheckAudioOutputFeedback={})),l.default=c},492984661:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckCameraResolutionFeedback=void 0;var c;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.ResolutionNotSupported=2]="ResolutionNotSupported",u[u.PermissionDenied=3]="PermissionDenied"})(c=l.CheckCameraResolutionFeedback||(l.CheckCameraResolutionFeedback={})),l.default=c},1012711751:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckContentShareConnectivityFeedback=void 0;var c;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.PermissionDenied=2]="PermissionDenied",u[u.TimedOut=3]="TimedOut",u[u.ConnectionFailed=4]="ConnectionFailed"})(c=l.CheckContentShareConnectivityFeedback||(l.CheckContentShareConnectivityFeedback={})),l.default=c},1711209018:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkTCPConnectivityFeedback=void 0;var c;(function(u){u[u.Succeeded=0]="Succeeded",u[u.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",u[u.ConnectionFailed=2]="ConnectionFailed",u[u.ICENegotiationFailed=3]="ICENegotiationFailed"})(c=l.CheckNetworkTCPConnectivityFeedback||(l.CheckNetworkTCPConnectivityFeedback={})),l.default=c},1519813406:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkUDPConnectivityFeedback=void 0;var c;(function(u){u[u.Succeeded=0]="Succeeded",u[u.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",u[u.ConnectionFailed=2]="ConnectionFailed",u[u.ICENegotiationFailed=3]="ICENegotiationFailed"})(c=l.CheckNetworkUDPConnectivityFeedback||(l.CheckNetworkUDPConnectivityFeedback={})),l.default=c},5425713910:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoConnectivityFeedback=void 0;var c;(function(u){u[u.Succeeded=0]="Succeeded",u[u.VideoInputRequestFailed=1]="VideoInputRequestFailed",u[u.VideoInputPermissionDenied=2]="VideoInputPermissionDenied",u[u.ConnectionFailed=3]="ConnectionFailed",u[u.VideoNotSent=4]="VideoNotSent"})(c=l.CheckVideoConnectivityFeedback||(l.CheckVideoConnectivityFeedback={})),l.default=c},2656423953:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoInputFeedback=void 0;var c;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.PermissionDenied=2]="PermissionDenied"})(c=l.CheckVideoInputFeedback||(l.CheckVideoInputFeedback={})),l.default=c},5346911216:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(C,w,R,O){function D(I){return I instanceof R?I:new R(function(M){M(I)})}return n(D,"adopt"),new(R||(R=Promise))(function(I,M){function k(B){try{j(O.next(B))}catch(J){M(J)}}n(k,"fulfilled");function N(B){try{j(O.throw(B))}catch(J){M(J)}}n(N,"rejected");function j(B){B.done?I(B.value):D(B.value).then(k,N)}n(j,"step"),j((O=O.apply(C,w||[])).next())})},m=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(9598694912)),g=m(c(5546774952)),s=m(c(8503424008)),a=m(c(763542717)),i=m(c(5009059128)),e=m(c(7638277718)),t=m(c(5131738647)),r=m(c(5912013634)),o=m(c(5266008321)),f=m(c(492984661)),h=m(c(1012711751)),p=m(c(1711209018)),d=m(c(1519813406)),y=m(c(5425713910)),S=m(c(2656423953)),b=m(c(898490693));let _=n(class yv{static delay(w){return u(this,void 0,void 0,function*(){return new Promise(R=>setTimeout(R,w))})}checkAudioInput(w){return u(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startAudioInput(w),yield this.meetingSession.audioVideo.stopAudioInput(),r.default.Succeeded}catch(R){return this.logger.error(`MeetingReadinessChecker: Audio input check failed with error ${R}`),R instanceof a.default?r.default.PermissionDenied:r.default.Failed}})}checkAudioOutput(w,R){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return u(this,void 0,void 0,function*(){try{const D=w?s.default.getIntrinsicDeviceId(w):"";return yield this.playTone(D,this.configuration.audioOutputFrequency,O),(yield R())?o.default.Succeeded:o.default.Failed}catch(D){return this.logger.error(`MeetingReadinessChecker: Audio output check failed with error: ${D}`),o.default.Failed}finally{this.stopTone()}})}playTone(w,R,O){return u(this,void 0,void 0,function*(){const I=this.configuration.audioOutputGain;this.oscillatorNode&&this.stopTone(),this.audioContext=s.default.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=0,this.oscillatorNode=this.audioContext.createOscillator(),this.oscillatorNode.frequency.value=R,this.oscillatorNode.connect(this.gainNode),this.destinationStream=this.audioContext.createMediaStreamDestination(),this.gainNode.connect(this.destinationStream);const k=this.audioContext.currentTime+.1;this.gainNode.gain.linearRampToValueAtTime(0,k),this.gainNode.gain.linearRampToValueAtTime(I,k+.1),this.oscillatorNode.start();const N=new v.default(this.logger);try{this.browserBehavior.supportsSetSinkId()&&(yield N.bindAudioDevice({deviceId:w}))}catch(j){this.logger.error(`Failed to bind audio device: ${j}`)}try{yield N.bindAudioElement(O||new Audio)}catch(j){this.logger.error(`Failed to bind audio element: ${j}`)}yield N.bindAudioStream(this.destinationStream.stream)})}stopTone(){if(!this.audioContext||!this.gainNode||!this.oscillatorNode||!this.destinationStream)return;const w=1,R=.1,O=this.configuration.audioOutputGain,D=this.audioContext.currentTime;this.gainNode.gain.linearRampToValueAtTime(O,D+R+w),this.gainNode.gain.linearRampToValueAtTime(0,D+R*2+w),this.oscillatorNode.stop(),this.oscillatorNode.disconnect(this.gainNode),this.gainNode.disconnect(this.destinationStream),this.oscillatorNode=null,this.gainNode=null,this.destinationStream=null}checkVideoInput(w){return u(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startVideoInput(w),yield this.meetingSession.audioVideo.stopVideoInput(),S.default.Succeeded}catch(R){return this.logger.error(`MeetingReadinessChecker: Video check failed with error ${R}`),R instanceof a.default?S.default.PermissionDenied:S.default.Failed}})}checkCameraResolution(w,R,O){return u(this,void 0,void 0,function*(){let D;try{const I=s.default.getIntrinsicDeviceId(w),M={video:this.calculateVideoConstraint(I,R,O)};D=yield navigator.mediaDevices.getUserMedia(M)}catch(I){return this.logger.error(`MeetingReadinessChecker: Camera resolution check with width: ${R} height ${O} failed with error ${I}`),I&&I.name==="OverconstrainedError"?f.default.ResolutionNotSupported:I&&I.name==="NotAllowedError"?f.default.PermissionDenied:f.default.Failed}finally{D&&D.getTracks().forEach(function(I){I.stop()})}return f.default.Succeeded})}calculateVideoConstraint(w,R,O){const D=this.browserBehavior.requiresResolutionAlignment(R,O),I={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?(I.deviceId=w,I.width=R,I.height=O):(I.deviceId={exact:w},I.width={exact:D[0]},I.height={exact:D[1]}),I}checkContentShareConnectivity(w){return u(this,void 0,void 0,function*(){let R=!1,O=!1;const D={contentShareDidStart:()=>{R=!0}},I={audioVideoDidStart:()=>{O=!0}};try{return this.meetingSession.audioVideo.addObserver(I),this.meetingSession.audioVideo.start(),this.meetingSession.audioVideo.addContentShareObserver(D),yield this.meetingSession.audioVideo.startContentShareFromScreenCapture(w),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return O&&R})),O?(yield this.stopMeeting(),R?h.default.Succeeded:h.default.TimedOut):h.default.ConnectionFailed}catch(M){return this.logger.error(`MeetingReadinessChecker: Content share check failed with error ${M}`),M.name==="NotAllowedError"?h.default.PermissionDenied:h.default.Failed}finally{this.meetingSession.audioVideo.removeObserver(I),this.meetingSession.audioVideo.stopContentShare(),this.meetingSession.audioVideo.removeContentShareObserver(D)}})}checkAudioConnectivity(w){return u(this,void 0,void 0,function*(){let R=!1;const O={packetsReceived:0},D=this.meetingSession.audioVideo,I={metricsDidReceive(k){k.getRTCStatsReport().forEach(N=>{N.type==="inbound-rtp"&&(N.mediaType==="audio"||N.kind==="audio")&&(O.packetsReceived=N.packetsReceived)})}},M=n((k,N,j,B)=>{k===this.meetingSession.configuration.credentials.attendeeId&&N&&(R=!0)},"attendeePresenceHandler");try{yield D.startAudioInput(w)}catch(k){return this.logger.error(`MeetingReadinessChecker: Failed to get audio input device with error ${k}`),k instanceof a.default?t.default.AudioInputPermissionDenied:t.default.AudioInputRequestFailed}return D.realtimeSubscribeToAttendeeIdPresence(M),D.addObserver(I),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return this.isAudioConnectionSuccessful(R,O)})),D.removeObserver(I),D.realtimeUnsubscribeToAttendeeIdPresence(M),yield this.stopMeeting(),yield this.meetingSession.audioVideo.stopAudioInput(),this.isAudioConnectionSuccessful(R,O)?t.default.Succeeded:t.default.AudioNotReceived):(D.removeObserver(I),D.realtimeUnsubscribeToAttendeeIdPresence(M),yield this.meetingSession.audioVideo.stopAudioInput(),t.default.ConnectionFailed)})}checkVideoConnectivity(w){return u(this,void 0,void 0,function*(){const R=this.meetingSession.audioVideo;let O=0;const D={metricsDidReceive(I){I.getRTCStatsReport().forEach(k=>{k.type==="outbound-rtp"&&(k.mediaType==="video"||k.kind==="video")&&(O=k.packetsSent)})}};try{yield R.startVideoInput(w)}catch(I){return this.logger.error(`MeetingReadinessChecker: Failed to get video input device with error ${I}`),I instanceof a.default?y.default.VideoInputPermissionDenied:y.default.VideoInputRequestFailed}return R.addObserver(D),(yield this.startMeeting())?(R.startLocalVideoTile(),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return O>0})),yield R.stopVideoInput(),yield this.stopMeeting(),R.removeObserver(D),O<=0?y.default.VideoNotSent:y.default.Succeeded):y.default.ConnectionFailed})}checkNetworkUDPConnectivity(){return u(this,void 0,void 0,function*(){let w=!1;const R={metricsDidReceive(D){D.getRTCStatsReport().forEach(M=>{M.type==="candidate-pair"&&M.state==="succeeded"&&(w=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(D){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${D}`),d.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=D=>{const I=this.originalURLRewriter(D);return I.includes("transport=tcp")?"":I};const O=this.meetingSession.audioVideo;return O.addObserver(R),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return w})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),O.removeObserver(R),w?d.default.Succeeded:d.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,d.default.ConnectionFailed)})}checkNetworkTCPConnectivity(){return u(this,void 0,void 0,function*(){let w=!1;const R={metricsDidReceive(D){D.getRTCStatsReport().forEach(M=>{M.type==="candidate-pair"&&M.state==="succeeded"&&(w=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(D){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${D}`),p.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=D=>{const I=this.originalURLRewriter(D);return I.includes("transport=udp")?"":I};const O=this.meetingSession.audioVideo;return O.addObserver(R),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return w})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),O.removeObserver(R),w?p.default.Succeeded:p.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,p.default.ConnectionFailed)})}startMeeting(){return u(this,void 0,void 0,function*(){let w=!1;const R={audioVideoDidStart:()=>{w=!0}};return this.meetingSession.audioVideo.addObserver(R),this.meetingSession.audioVideo.start(),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return w})),this.meetingSession.audioVideo.removeObserver(R),w})}stopMeeting(){return u(this,void 0,void 0,function*(){let w=!1;const R={audioVideoDidStop:O=>{w=!0}};return this.meetingSession.audioVideo.addObserver(R),this.meetingSession.audioVideo.stop(),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return w})),this.meetingSession.audioVideo.removeObserver(R),w})}executeTimeoutTask(w){return u(this,void 0,void 0,function*(){let R=!1,O=n(class extends i.default{cancel(){this.isCancelled=!0}run(){return u(this,void 0,void 0,function*(){for(;!this.isCancelled;){if(yield w()){R=!0;break}yield yv.delay(this.waitDurationMs)}})}constructor(M,k){super(M),this.waitDurationMs=k,this.isCancelled=!1}},"CheckForConditionTask");return yield new e.default(this.logger,new O(this.logger,this.configuration.waitDurationMs),this.configuration.timeoutMs).run(),R})}isAudioConnectionSuccessful(w,R){return w&&R.packetsReceived>0}constructor(w,R,O=new b.default){this.logger=w,this.meetingSession=R,this.configuration=O,this.browserBehavior=new g.default}},"DefaultMeetingReadinessChecker");l.default=_},898490693:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(){this.timeoutMs=1e4,this.waitDurationMs=3e3,this.audioOutputFrequency=440,this.audioOutputGain=.1}},"MeetingReadinessCheckerConfiguration");l.default=c},6643608480:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(d,y,S,b){function _(C){return C instanceof S?C:new S(function(w){w(C)})}return n(_,"adopt"),new(S||(S=Promise))(function(C,w){function R(I){try{D(b.next(I))}catch(M){w(M)}}n(R,"fulfilled");function O(I){try{D(b.throw(I))}catch(M){w(M)}}n(O,"rejected");function D(I){I.done?C(I.value):_(I.value).then(R,O)}n(D,"step"),D((b=b.apply(d,y||[])).next())})},m=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(1833994912)),g=m(c(9305916160)),s=m(c(4571447548)),a=m(c(5546774952)),i=m(c(220809536)),e=m(c(7050079116)),t=m(c(8207737579)),r=c(4236152345),o=m(c(913629600)),f=m(c(2114525466)),h=m(c(7880459944));let p=n(class{get configuration(){return this._configuration}get logger(){return this._logger}get audioVideo(){return this.audioVideoFacade}get contentShare(){return this.contentShareController}get deviceController(){return this._deviceController}get eventController(){return this._eventController}destroy(){return u(this,void 0,void 0,function*(){r.isDestroyable(this.contentShareController)&&(yield this.contentShareController.destroy()),r.isDestroyable(this.audioVideoController)&&(yield this.audioVideoController.destroy()),r.isDestroyable(this.eventController)&&(yield this.eventController.destroy()),t.default.removeLogger(this._logger),this._logger=void 0,this._configuration=void 0,this._deviceController=void 0,this.audioVideoFacade=void 0,this.audioVideoController=void 0,this.contentShareController=void 0,this._eventController=void 0})}checkBrowserSupportAndFeatureConfiguration(){const y=new a.default,S=`${y.name()} ${y.majorVersion()} (${y.version()})`;if(this.logger.info(`browser is ${S}`),y.isSupported()||this.logger.warn(`this browser is not currently supported. Stability may suffer. Supported browsers are: ${y.supportString()}.`),this._configuration.videoUplinkBandwidthPolicy)if(this.isSimulcastUplinkPolicy(this._configuration.videoUplinkBandwidthPolicy)){if(!y.hasChromiumWebRTC())throw new Error("Simulcast is only supported on Chromium-based browsers");this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0}else this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1;this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&(y.hasChromiumWebRTC()?this.logger.info(`Simulcast is enabled for ${y.name()}`):(this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.logger.info("Simulcast is only supported on Chromium-based browsers")),this._configuration.enableSVC&&(this._configuration.enableSVC=!1,this.logger.info("SVC is not successfully enabled since simulcast is enabled"))),this._configuration.enableSVC&&!y.supportsScalableVideoCoding()&&(this._configuration.enableSVC=!1,this.logger.info("SVC is only supported on Chromium-based browsers with version 111 or above"))}isSimulcastUplinkPolicy(y){return!!(y&&y.addObserver)}constructor(y,S,b,_){this._eventController=_,this._configuration=y,this._logger=S,this.checkBrowserSupportAndFeatureConfiguration(),t.default.addLogger(this._logger),t.default.register(),this._eventController||(this._eventController=new o.default(y,S)),b.eventController||(b.eventController=this.eventController),this.audioVideoController=new v.default(this._configuration,this._logger,new h.default(this._logger),b,new f.default(this._configuration.reconnectTimeoutMs,new s.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs)),this.eventController),this._deviceController=b,this.logger.info(`MeetingFeatures: ${JSON.stringify(y.meetingFeatures)}`);const C=new i.default(this._logger);this.contentShareController=new e.default(C,new v.default(e.default.createContentShareMeetingSessionConfigure(this._configuration),this._logger,new h.default(this._logger),C,new f.default(this._configuration.reconnectTimeoutMs,new s.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs))),this.audioVideoController),this.audioVideoFacade=new g.default(this.audioVideoController,this.audioVideoController.videoTileController,this.audioVideoController.realtimeController,this.audioVideoController.audioMixController,this._deviceController,this.contentShareController)}},"DefaultMeetingSession");l.default=p},2612255336:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(1197017824));let v=n(class Sv{clone(){return new Sv(this.videoMaxResolution,this.contentMaxResolution)}constructor(s=m.default.VideoResolutionHD,a=m.default.VideoResolutionFHD){this.videoMaxResolution=s,this.contentMaxResolution=a}},"MeetingFeatures");l.default=v},6226061697:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(8692068971)),v=u(c(1197017824)),g=c(5685319565),s=u(c(2612255336)),a=u(c(8023404193)),i=u(c(803810435));let e=n(class{constructor(r,o){var f,h;if(this.meetingId=null,this.externalMeetingId=null,this.credentials=null,this.urls=null,this.connectionTimeoutMs=15e3,this.attendeePresenceTimeoutMs=0,this.connectionHealthPolicyConfiguration=new m.default,this.reconnectTimeoutMs=120*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackOffMs=1*1e3,this.reconnectLongBackOffMs=5*1e3,this.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.enableSVC=!1,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.keepLastFrameWhenPaused=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1,this.meetingFeatures=new s.default,r){r=g.toLowerCasePropertyNames(r),r.meeting&&(r=r.meeting),this.meetingId=r.meetingid,this.externalMeetingId=r.externalmeetingid,this.urls=new i.default,this.urls.audioHostURL=r.mediaplacement.audiohosturl,this.urls.signalingURL=r.mediaplacement.signalingurl,this.urls.turnControlURL=r.mediaplacement.turncontrolurl,r.mediaplacement.eventingestionurl&&(this.urls.eventIngestionURL=r.mediaplacement.eventingestionurl);const p=n((d,y)=>{switch(d){case"None":return v.default.VideoDisabled;case"HD":return v.default.VideoResolutionHD;case"FHD":return v.default.VideoResolutionFHD;case"UHD":return v.default.VideoResolutionUHD;default:return y}},"parseVideoResolution");if(((f=r.meetingfeatures)===null||f===void 0?void 0:f.video)!==void 0||((h=r.meetingfeatures)===null||h===void 0?void 0:h.content)!==void 0){const d=r.meetingfeatures.video===void 0?"HD":r.meetingfeatures.video.maxresolution,y=r.meetingfeatures.content===void 0?"FHD":r.meetingfeatures.content.maxresolution;this.meetingFeatures=new s.default(p(d,v.default.VideoResolutionHD),p(y,v.default.VideoResolutionFHD))}}o&&(o=g.toLowerCasePropertyNames(o),o.attendee&&(o=o.attendee),this.credentials=new a.default,this.credentials.attendeeId=o.attendeeid,this.credentials.externalUserId=o.externaluserid,this.credentials.joinToken=o.jointoken)}},"MeetingSessionConfiguration");l.default=e},8023404193:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{toJSON(){return{attendeeId:this.attendeeId,joinToken:this.joinToken===null?null:"<redacted>"}}constructor(){this.attendeeId=null,this.externalUserId=null,this.joinToken=null}},"MeetingSessionCredentials");l.default=c},2234819701:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEvent=void 0;var c;(function(u){u[u.Connecting=0]="Connecting",u[u.Started=1]="Started",u[u.Stopped=2]="Stopped"})(c=l.MeetingSessionLifecycleEvent||(l.MeetingSessionLifecycleEvent={})),l.default=c},546597810:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEventCondition=void 0;var c;(function(u){u[u.ConnectingNew=0]="ConnectingNew",u[u.ReconnectingExisting=1]="ReconnectingExisting",u[u.StartedNew=2]="StartedNew",u[u.StartedExisting=3]="StartedExisting",u[u.StartedAfterReconnect=4]="StartedAfterReconnect",u[u.StoppedCleanly=5]="StoppedCleanly",u[u.StoppedWithFailure=6]="StoppedWithFailure"})(c=l.MeetingSessionLifecycleEventCondition||(l.MeetingSessionLifecycleEventCondition={})),l.default=c},7551081659:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const m=c(4136617125),v=u(c(9447989038));let g=n(class Sa{statusCode(){return this._statusCode}isFailure(){switch(this._statusCode){case v.default.AudioAuthenticationRejected:case v.default.AudioCallAtCapacity:case v.default.AudioInternalServerError:case v.default.AudioServiceUnavailable:case v.default.AudioDisconnected:case v.default.VideoCallAtSourceCapacity:case v.default.SignalingBadRequest:case v.default.SignalingInternalServerError:case v.default.SignalingRequestFailed:case v.default.ICEGatheringTimeoutWorkaround:case v.default.ConnectionHealthReconnect:case v.default.RealtimeApiFailed:case v.default.TaskFailed:case v.default.NoAttendeePresent:return!0;default:return!1}}isTerminal(){switch(this._statusCode){case v.default.Left:case v.default.AudioJoinedFromAnotherDevice:case v.default.AudioAuthenticationRejected:case v.default.AudioCallAtCapacity:case v.default.MeetingEnded:case v.default.AudioDisconnected:case v.default.TURNCredentialsForbidden:case v.default.SignalingBadRequest:case v.default.SignalingRequestFailed:case v.default.VideoCallAtSourceCapacity:case v.default.RealtimeApiFailed:case v.default.AudioAttendeeRemoved:return!0;default:return!1}}isAudioConnectionFailure(){switch(this._statusCode){case v.default.AudioAuthenticationRejected:case v.default.AudioInternalServerError:case v.default.AudioServiceUnavailable:case v.default.ICEGatheringTimeoutWorkaround:case v.default.SignalingBadRequest:case v.default.SignalingInternalServerError:case v.default.SignalingRequestFailed:case v.default.RealtimeApiFailed:case v.default.NoAttendeePresent:return!0;default:return!1}}toString(){switch(this._statusCode){case v.default.OK:return"Everything is OK so far.";case v.default.Left:return"The attendee left the meeting.";case v.default.AudioJoinedFromAnotherDevice:return"The attendee joined from another device.";case v.default.AudioAuthenticationRejected:return"The meeting rejected the attendee.";case v.default.AudioCallAtCapacity:return"The attendee couldn't join because the meeting was at capacity.";case v.default.MeetingEnded:return"The meeting ended.";case v.default.AudioInternalServerError:case v.default.AudioServiceUnavailable:case v.default.AudioDisconnected:return"The audio connection failed.";case v.default.VideoCallSwitchToViewOnly:return"The attendee couldn't start the local video because the maximum video capacity was reached.";case v.default.VideoCallAtSourceCapacity:return"The connection failed due to an internal server error.";case v.default.SignalingBadRequest:case v.default.SignalingInternalServerError:case v.default.SignalingRequestFailed:return"The signaling connection failed.";case v.default.ICEGatheringTimeoutWorkaround:return"Gathering ICE candidates timed out. In Chrome, this might indicate that the browser is in a bad state after reconnecting to VPN.";case v.default.ConnectionHealthReconnect:return"The meeting was reconnected.";case v.default.RealtimeApiFailed:return"The real-time API failed. This status code might indicate that the callback you passed to the real-time API threw an exception.";case v.default.TaskFailed:return"The connection failed. See the error message for more details.";case v.default.IncompatibleSDP:return"The connection failed due to incompatible SDP.";case v.default.TURNCredentialsForbidden:return"The meeting ended, or the attendee was removed.";case v.default.NoAttendeePresent:return"The attendee was not present.";case v.default.AudioAttendeeRemoved:return"The meeting ended because attendee removed.";case v.default.AudioVideoWasRemovedFromPrimaryMeeting:return"The Primary meeting credentials provided are no longer valid. chime::DeleteAttendee may have been called on them.";case v.default.AudioVideoDisconnectedWhilePromoted:return"The client disconnected while promoted, which will automatically demote. The attendee must promote again to participate.";case v.default.AudioDisconnectAudio:return"The audio connection failed.";default:{const a=this._statusCode;throw new Error(`Unhandled case: ${a}`)}}}static fromSignalFrame(a){return a.error&&a.error.status?this.fromSignalingStatus(a.error.status):a.type===m.SdkSignalFrame.Type.AUDIO_STATUS?a.audioStatus?this.fromAudioStatus(a.audioStatus.audioStatus):new Sa(v.default.SignalingRequestFailed):a.type===m.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE?new Sa(v.default.AudioVideoWasRemovedFromPrimaryMeeting):new Sa(v.default.OK)}static fromAudioStatus(a){switch(a){case 200:return new Sa(v.default.OK);case 301:return new Sa(v.default.AudioJoinedFromAnotherDevice);case 302:return new Sa(v.default.AudioDisconnectAudio);case 403:return new Sa(v.default.AudioAuthenticationRejected);case 409:return new Sa(v.default.AudioCallAtCapacity);case 410:return new Sa(v.default.MeetingEnded);case 411:return new Sa(v.default.AudioAttendeeRemoved);case 500:return new Sa(v.default.AudioInternalServerError);case 503:return new Sa(v.default.AudioServiceUnavailable);default:switch(Math.floor(a/100)){case 2:return new Sa(v.default.OK);default:return new Sa(v.default.AudioDisconnected)}}}static fromSignalingStatus(a){switch(a){case 206:return new Sa(v.default.VideoCallSwitchToViewOnly);case 509:return new Sa(v.default.VideoCallAtSourceCapacity);case 403:return new Sa(v.default.AudioAuthenticationRejected);case 409:return new Sa(v.default.AudioCallAtCapacity);default:switch(Math.floor(a/100)){case 2:return new Sa(v.default.OK);case 4:return new Sa(v.default.SignalingBadRequest);case 5:return new Sa(v.default.SignalingInternalServerError);default:return new Sa(v.default.SignalingRequestFailed)}}}constructor(a){this._statusCode=a}},"MeetingSessionStatus");l.default=g},9447989038:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionStatusCode=void 0;var c;(function(u){u[u.OK=0]="OK",u[u.Left=1]="Left",u[u.AudioJoinedFromAnotherDevice=2]="AudioJoinedFromAnotherDevice",u[u.AudioAuthenticationRejected=3]="AudioAuthenticationRejected",u[u.AudioCallAtCapacity=4]="AudioCallAtCapacity",u[u.MeetingEnded=5]="MeetingEnded",u[u.AudioInternalServerError=6]="AudioInternalServerError",u[u.AudioServiceUnavailable=7]="AudioServiceUnavailable",u[u.AudioDisconnected=8]="AudioDisconnected",u[u.VideoCallSwitchToViewOnly=9]="VideoCallSwitchToViewOnly",u[u.VideoCallAtSourceCapacity=10]="VideoCallAtSourceCapacity",u[u.SignalingBadRequest=11]="SignalingBadRequest",u[u.SignalingInternalServerError=12]="SignalingInternalServerError",u[u.SignalingRequestFailed=13]="SignalingRequestFailed",u[u.ICEGatheringTimeoutWorkaround=14]="ICEGatheringTimeoutWorkaround",u[u.ConnectionHealthReconnect=15]="ConnectionHealthReconnect",u[u.RealtimeApiFailed=16]="RealtimeApiFailed",u[u.TaskFailed=17]="TaskFailed",u[u.IncompatibleSDP=18]="IncompatibleSDP",u[u.TURNCredentialsForbidden=19]="TURNCredentialsForbidden",u[u.NoAttendeePresent=20]="NoAttendeePresent",u[u.AudioAttendeeRemoved=21]="AudioAttendeeRemoved",u[u.AudioVideoWasRemovedFromPrimaryMeeting=22]="AudioVideoWasRemovedFromPrimaryMeeting",u[u.AudioVideoDisconnectedWhilePromoted=23]="AudioVideoDisconnectedWhilePromoted",u[u.AudioDisconnectAudio=24]="AudioDisconnectAudio"})(c=l.MeetingSessionStatusCode||(l.MeetingSessionStatusCode={})),l.default=c},4943767904:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(){this.username=null,this.password=null,this.ttl=null,this.uris=null}},"MeetingSessionTURNCredentials");l.default=c},803810435:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{get audioHostURL(){return this.urlRewriter(this._audioHostURL)}set audioHostURL(m){this._audioHostURL=m}get signalingURL(){return this.urlRewriter(this._signalingURL)}set signalingURL(m){this._signalingURL=m}get turnControlURL(){return this.urlRewriter(this._turnControlURL)}set turnControlURL(m){this._turnControlURL=m}get eventIngestionURL(){return this.urlRewriter(this._eventIngestionURL)}set eventIngestionURL(m){this._eventIngestionURL=m}constructor(){this._audioHostURL=null,this._signalingURL=null,this._turnControlURL=null,this._eventIngestionURL=null,this.urlRewriter=m=>m}},"MeetingSessionURLs");l.default=c},488357679:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class Ev{equal(m){return this.remoteVideoAvailable===m.remoteVideoAvailable&&this.canStartLocalVideo===m.canStartLocalVideo}clone(){const m=new Ev;return m.remoteVideoAvailable=this.remoteVideoAvailable,m.canStartLocalVideo=this.canStartLocalVideo,m}constructor(){this.remoteVideoAvailable=!1,this.canStartLocalVideo=!1}},"MeetingSessionVideoAvailability");l.default=c},1261307249:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(m,v,g){this.type=m,this.headers=v,this.payload=g}},"Message");l.default=c},9331325908:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(p,d,y,S){function b(_){return _ instanceof y?_:new y(function(C){C(_)})}return n(b,"adopt"),new(y||(y=Promise))(function(_,C){function w(D){try{O(S.next(D))}catch(I){C(I)}}n(w,"fulfilled");function R(D){try{O(S.throw(D))}catch(I){C(I)}}n(R,"rejected");function O(D){D.done?_(D.value):b(D.value).then(w,R)}n(O,"step"),O((S=S.apply(p,d||[])).next())})},m=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const v=c(7135774191),g=m(c(4571447548)),s=m(c(8207737579)),a=m(c(1261307249)),i=m(c(2114525466)),e=m(c(9649641385)),t=m(c(7924674822)),r=m(c(7880459944)),o=m(c(5638612424)),f=m(c(4741303625));let h=n(class{addObserver(d){this.logger.info("adding messaging observer"),this.observerQueue.add(d)}removeObserver(d){this.logger.info("removing messaging observer"),this.observerQueue.delete(d)}start(){return u(this,void 0,void 0,function*(){this.isClosed()?yield this.startConnecting(!1):this.logger.info("messaging session already started")})}stop(){this.isClosed()?this.logger.info("no existing messaging session needs closing"):(this.isClosing=!0,this.webSocket.close(),s.default.removeLogger(this.logger))}forEachObserver(d){for(const y of this.observerQueue)e.default.nextTick(()=>{this.observerQueue.has(y)&&d(y)})}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.openEventHandler()}),this.webSocket.addEventListener("message",d=>{this.receiveMessageHandler(d.data)}),this.webSocket.addEventListener("close",d=>{this.closeEventHandler(d)}),this.webSocket.addEventListener("error",()=>{this.logger.error("WebSocket error")})}startConnecting(d){return u(this,void 0,void 0,function*(){return yield this.startConnectingInternal(d),yield new Promise((y,S)=>{this.bootstrapResolved=y,this.bootstrapRejected=S})})}startConnectingInternal(d){var y;return u(this,void 0,void 0,function*(){let S=this.configuration.endpointUrl;if(d||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),d||S===void 0)try{if(this.configuration.chimeClient.getMessagingSessionEndpoint instanceof Function){const _=yield this.configuration.chimeClient.getMessagingSessionEndpoint();!((y=_.Endpoint)===null||y===void 0)&&y.Url?S=_.Endpoint.Url:S=(yield this.configuration.chimeClient.getMessagingSessionEndpoint().promise()).Endpoint.Url}else S=(yield this.configuration.chimeClient.send(new v.GetMessagingSessionEndpointCommand({}))).Endpoint.Url;this.logger.debug(`Messaging endpoint resolved to: ${S}`)}catch(_){this.logger.error(`Messaging Session failed to resolve endpoint: ${_}`);const C=new CloseEvent("close",{wasClean:!1,code:4999,reason:"Failed to get messaging session endpoint URL",bubbles:!1});this.closeEventHandler(C);return}const b=yield this.prepareWebSocketUrl(S);this.logger.info(`opening connection to ${b}`),d||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),this.webSocket.create(b,[],!0),this.forEachObserver(_=>{_.messagingSessionDidStartConnecting&&_.messagingSessionDidStartConnecting(d)}),this.setUpEventListeners()})}prepareWebSocketUrl(d){return u(this,void 0,void 0,function*(){const y=new Map;return y.set("userArn",[this.configuration.userArn]),y.set("sessionId",[this.configuration.messagingSessionId]),this.configuration.prefetchOn===f.default.Connect&&y.set("prefetch-on",[f.default.Connect]),this.configuration.prefetchSortBy&&y.set("prefetch-sort-by",[this.configuration.prefetchSortBy]),yield this.sigV4.signURL("GET","wss","chime",d,"/connect","",y)})}isClosed(){return this.webSocket.readyState()===o.default.None||this.webSocket.readyState()===o.default.Closed}openEventHandler(){this.reconnectController.reset(),this.isSessionEstablished=!1}receiveMessageHandler(d){try{const y=JSON.parse(d),S=y.Headers["x-amz-chime-event-type"],b=new a.default(S,y.Headers,y.Payload||null);if(!this.isSessionEstablished&&S==="SESSION_ESTABLISHED"){this.forEachObserver(C=>{C.messagingSessionDidStart&&C.messagingSessionDidStart()}),this.bootstrapResolved(),this.isSessionEstablished=!0;const _=this.preBootstrapMessages.length;for(let C=0;C<_;C++){const w=this.preBootstrapMessages.shift();this.forEachObserver(R=>{this.sendMessageToObserver(R,w)})}}else if(!this.isSessionEstablished){this.preBootstrapMessages.push(b);return}this.forEachObserver(_=>{this.sendMessageToObserver(_,b)})}catch(y){this.logger.error(`Messaging parsing failed: ${y}`)}}sendMessageToObserver(d,y){d.messagingSessionDidReceiveMessage&&d.messagingSessionDidReceiveMessage(y)}retryConnection(){return this.reconnectController.retryWithBackoff(()=>u(this,void 0,void 0,function*(){yield this.startConnecting(!0)}),null)}closeEventHandler(d){this.logger.info(`WebSocket close: ${d.code} ${d.reason}`),d.code!==4999&&this.webSocket.destroy(),!(!this.isClosing&&this.canReconnect(d.code)&&this.retryConnection())&&(this.isClosing=!1,this.isSessionEstablished?this.forEachObserver(y=>{y.messagingSessionDidStop&&y.messagingSessionDidStop(d)}):this.bootstrapRejected(d))}canReconnect(d){return d===1001||d===1006||d>=1011&&d<=1014||d>4e3&&d!==4002&&d!==4003&&d!==4401}constructor(d,y,S,b,_){this.configuration=d,this.logger=y,this.webSocket=S,this.reconnectController=b,this.sigV4=_,this.observerQueue=new Set,this.webSocket||(this.webSocket=new r.default(this.logger)),this.reconnectController||(this.reconnectController=new i.default(d.reconnectTimeoutMs,new g.default(d.reconnectFixedWaitMs,d.reconnectShortBackoffMs,d.reconnectLongBackoffMs))),this.sigV4||(this.sigV4=new t.default(this.configuration.chimeClient)),s.default.addLogger(this.logger),s.default.register(),this.preBootstrapMessages=[]}},"DefaultMessagingSession");l.default=h},6589808043:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=c(5685319565);let m=n(class{generateSessionId(){const g=new Uint32Array(1);return u.getRandomValues(g),g[0].toString()}constructor(g,s,a,i){this.userArn=g,this.messagingSessionId=s,this.endpointUrl=a,this.chimeClient=i,this.reconnectTimeoutMs=10*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackoffMs=1*1e3,this.reconnectLongBackoffMs=5*1e3,this.prefetchOn=void 0,this.prefetchSortBy=void 0,this.messagingSessionId||(this.messagingSessionId=this.generateSessionId())}},"MessagingSessionConfiguration");l.default=m},4741303625:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var c;(function(u){u.Connect="connect"})(c||(c={})),l.default=c},2097622617:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var c;(function(u){u.Unread="unread",u.LastMessageTimestamp="last-message-timestamp"})(c||(c={})),l.default=c},8006173476:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(805846668));let v=n(class Qc{id(){return this._id}base(){return this._id?this._id.split(Qc.MODALITY_SEPARATOR)[0]:""}modality(){if(!this._id)return"";const s=this._id.split(Qc.MODALITY_SEPARATOR);return s.length===2?s[1]:""}hasModality(s){return s!==""&&this.modality()===s}withModality(s){const a=new Qc(this.base()+Qc.MODALITY_SEPARATOR+s);return s===""||this.base()===""||new Qc(a._id).modality()!==s?new Qc(this.base()):a}constructor(s){this._id=s}},"DefaultModality");l.default=v,v.MODALITY_SEPARATOR=m.default.Modality[0],v.MODALITY_CONTENT=m.default.Modality.substr(1)},6348496904:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(9649641385)),v=u(c(9877075638)),g=u(c(7969706599)),s=c(4136617125),a=c(6527539809);let i=n(class{addObserver(t){this.logger.info("adding a ping-pong observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing a ping-pong observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const r of this.observerQueue)m.default.nextTick(()=>{this.observerQueue.has(r)&&t(r)})}start(){this.stop(),this.signalingClient.registerObserver(this),this.signalingClient.ready()&&this.startPingInterval()}stop(){this.stopPingInterval(),this.signalingClient.removeObserver(this)}startPingInterval(){this.intervalScheduler.start(()=>{this.ping()}),this.ping()}stopPingInterval(){this.intervalScheduler.stop(),this.pingId=0,this.consecutivePongsUnaccountedFor=0}ping(){this.consecutivePongsUnaccountedFor>0&&(this.logger.warn(`missed pong ${this.consecutivePongsUnaccountedFor} time(s)`),this.forEachObserver(r=>{a.Maybe.of(r.didMissPongs).map(o=>o.bind(r)(this.consecutivePongsUnaccountedFor))})),this.consecutivePongsUnaccountedFor+=1,this.pingId=this.pingId+1&4294967295;const t=s.SdkPingPongFrame.create();t.pingId=this.pingId,t.type=s.SdkPingPongType.PING,this.pingTimestampLocalMs=this.signalingClient.pingPong(t),this.logger.debug(()=>`sent ping ${this.pingId}`)}pong(t){const r=s.SdkPingPongFrame.create();r.pingId=t,r.type=s.SdkPingPongType.PONG,this.signalingClient.pingPong(r)}handleSignalingClientEvent(t){switch(t.type){case g.default.WebSocketOpen:this.startPingInterval();break;case g.default.WebSocketFailed:case g.default.WebSocketError:this.logger.warn(`stopped pinging (${g.default[t.type]})`),this.stopPingInterval();break;case g.default.WebSocketClosing:case g.default.WebSocketClosed:this.logger.info(`stopped pinging (${g.default[t.type]})`),this.stopPingInterval();break;case g.default.ReceivedSignalFrame:if(t.message.type!==s.SdkSignalFrame.Type.PING_PONG)break;if(t.message.pingPong.type===s.SdkPingPongType.PONG){const r=t.message.pingPong.pingId;if(r!==this.pingId){this.logger.warn(`unexpected ping id ${r} (expected ${this.pingId})`);break}this.consecutivePongsUnaccountedFor=0;let o;if(typeof t.message.timestampMs=="number")o=t.message.timestampMs;else break;this.logger.debug(()=>`received pong ${r} with timestamp ${o}`);const h=t.timestampMs-this.pingTimestampLocalMs,p=Math.round(o-h/2),d=this.pingTimestampLocalMs-p;this.logger.info(`local clock skew estimate=${d}ms from ping-pong time=${h}ms`),this.forEachObserver(y=>{a.Maybe.of(y.didReceivePong).map(S=>S.bind(y)(r,d,h))})}else this.pong(t.message.pingPong.pingId);break}}constructor(t,r,o){this.signalingClient=t,this.intervalMs=r,this.logger=o,this.observerQueue=new Set,this.consecutivePongsUnaccountedFor=0,this.intervalScheduler=new v.default(this.intervalMs),this.pingId=0}},"DefaultPingPong");l.default=i},7692233712:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(6391477986)),v=u(c(7618200138)),g=u(c(7832597620));let s=n(class{realtimeSetLocalAttendeeId(i,e){this.state.localAttendeeId=i,this.state.localExternalUserId=e}realtimeSetAttendeeIdPresence(i,e,t,r,o){try{e&&(this.state.attendeeIdToExternalUserId[i]=t);for(const f of this.state.attendeeIdChangesCallbacks)f(i,e,t,r,o)}catch(f){this.onError(f)}}realtimeSubscribeToAttendeeIdPresence(i){try{this.state.attendeeIdChangesCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToAttendeeIdPresence(i){try{const e=this.state.attendeeIdChangesCallbacks.indexOf(i);e!==-1&&this.state.attendeeIdChangesCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSetCanUnmuteLocalAudio(i){try{if(this.state.canUnmute===i)return;this.state.canUnmute=i;for(const e of this.state.setCanUnmuteLocalAudioCallbacks)e(i)}catch(e){this.onError(e)}}realtimeSubscribeToSetCanUnmuteLocalAudio(i){try{this.state.setCanUnmuteLocalAudioCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToSetCanUnmuteLocalAudio(i){try{const e=this.state.setCanUnmuteLocalAudioCallbacks.indexOf(i);e!==-1&&this.state.setCanUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeCanUnmuteLocalAudio(){return this.state.canUnmute}realtimeMuteLocalAudio(){if(!this.state.muted)try{this.setAudioInputEnabled(!1),this.state.muted=!0,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const i of this.state.muteAndUnmuteLocalAudioCallbacks)i(!0)}catch(i){this.onError(i)}}realtimeUnmuteLocalAudio(){if(!this.state.muted)return!0;if(!this.state.canUnmute)return!1;try{this.setAudioInputEnabled(!0),this.state.muted=!1,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const i of this.state.muteAndUnmuteLocalAudioCallbacks)i(!1);return!0}catch(i){return this.onError(i),!1}}realtimeSubscribeToMuteAndUnmuteLocalAudio(i){try{this.state.muteAndUnmuteLocalAudioCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(i){try{const e=this.state.muteAndUnmuteLocalAudioCallbacks.indexOf(i);e!==-1&&this.state.muteAndUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeIsLocalAudioMuted(){return this.state.muted}realtimeSubscribeToVolumeIndicator(i,e){try{this.state.volumeIndicatorCallbacks.hasOwnProperty(i)||(this.state.volumeIndicatorCallbacks[i]=[]),this.state.volumeIndicatorCallbacks[i].push(e),this.sendVolumeIndicatorChange(i,!0,!0,!0,this.state.attendeeIdToExternalUserId[i])}catch(t){this.onError(t)}}realtimeUnsubscribeFromVolumeIndicator(i,e){if(this.state.volumeIndicatorCallbacks[i])if(e){const r=this.state.volumeIndicatorCallbacks[i].indexOf(e);r>=0&&this.state.volumeIndicatorCallbacks[i].splice(r,1)}else delete this.state.volumeIndicatorCallbacks[i]}realtimeUpdateVolumeIndicator(i,e,t,r,o){try{t=this.applyLocalMuteOverride(i,t);const f=this.getVolumeIndicatorState(i);let h=!1,p=!1,d=!1;t!==null&&f.muted!==t&&(f.muted=t,p=!0,f.muted&&f.volume!==0&&(f.volume=0,h=!0)),!f.muted&&e!==null&&(f.volume!==e&&(f.volume=e,h=!0),f.muted===null&&(f.muted=!1,p=!0)),r!==null&&f.signalStrength!==r&&(f.signalStrength=r,d=!0),this.sendVolumeIndicatorChange(i,h,p,d,o)}catch(f){this.onError(f)}}realtimeSubscribeToLocalSignalStrengthChange(i){try{if(this.state.localSignalStrengthChangeCallbacks.push(i),this.state.localAttendeeId===null)return;this.sendLocalSignalStrengthChange(this.state.localAttendeeId,!0)}catch(e){this.onError(e)}}realtimeUnsubscribeToLocalSignalStrengthChange(i){try{const e=this.state.localSignalStrengthChangeCallbacks.indexOf(i);e!==-1&&this.state.localSignalStrengthChangeCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSubscribeToSendDataMessage(i){try{this.state.sendDataMessageCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeFromSendDataMessage(i){try{const e=this.state.sendDataMessageCallbacks.indexOf(i);e!==-1&&this.state.sendDataMessageCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSendDataMessage(i,e,t){try{for(const r of this.state.sendDataMessageCallbacks)r(i,e,t)}catch(r){this.onError(r)}}realtimeSubscribeToReceiveDataMessage(i,e){try{this.state.receiveDataMessageCallbacks.has(i)?this.state.receiveDataMessageCallbacks.get(i).push(e):this.state.receiveDataMessageCallbacks.set(i,[e])}catch(t){this.onError(t)}}realtimeUnsubscribeFromReceiveDataMessage(i){try{this.state.receiveDataMessageCallbacks.delete(i)}catch(e){this.onError(e)}}realtimeReceiveDataMessage(i){try{if(this.state.receiveDataMessageCallbacks.has(i.topic))for(const e of this.state.receiveDataMessageCallbacks.get(i.topic))e(i)}catch(e){this.onError(e)}}realtimeSubscribeToFatalError(i){try{this.state.fatalErrorCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToFatalError(i){try{const e=this.state.fatalErrorCallbacks.indexOf(i);e!==-1&&this.state.fatalErrorCallbacks.splice(e,1)}catch(e){this.onError(e)}}get transcriptionController(){return this._transcriptionController}setAudioInputEnabled(i){i?this.mediaStreamBroker.unmuteLocalAudioInputStream():this.mediaStreamBroker.muteLocalAudioInputStream()}applyLocalMuteOverride(i,e){const t=this.state.localAttendeeId,r=this.state.muted;return i!==t||!("activeDevices"in this.mediaStreamBroker&&this.mediaStreamBroker.activeDevices.audio)?e:r}sendVolumeIndicatorChange(i,e,t,r,o){if(this.sendLocalSignalStrengthChange(i,r),!this.state.volumeIndicatorCallbacks.hasOwnProperty(i))return;const f=this.getVolumeIndicatorState(i),h=new g.default;if(e&&(h.volume=f.volume),t&&(h.muted=f.muted),r&&(h.signalStrength=f.signalStrength),!this.stateIsEmpty(h))for(const p of this.state.volumeIndicatorCallbacks[i])p(i,h.volume,h.muted,h.signalStrength,o)}sendLocalSignalStrengthChange(i,e){if(!e||i!==this.state.localAttendeeId)return;const r=this.getVolumeIndicatorState(i).signalStrength;if(r!==null)for(const o of this.state.localSignalStrengthChangeCallbacks)o(r)}getVolumeIndicatorState(i){return this.state.volumeIndicatorState.hasOwnProperty(i)||(this.state.volumeIndicatorState[i]=new g.default),this.state.volumeIndicatorState[i]}stateIsEmpty(i){return i.volume===null&&i.muted===null&&i.signalStrength===null}onError(i){try{for(const e of this.state.fatalErrorCallbacks)e(i)}catch(e){try{console.error(i),console.error(e)}catch{}}}constructor(i,e){this.mediaStreamBroker=i,this.state=new v.default,this._transcriptionController=e||new m.default(this)}},"DefaultRealtimeController");l.default=s},3171391796:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(){this.attendeeIndex=null,this.attendeesInFrame=null}},"RealtimeAttendeePositionInFrame");l.default=c},7618200138:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(){this.localAttendeeId=null,this.localExternalUserId=null,this.attendeeIdChangesCallbacks=[],this.canUnmute=!0,this.setCanUnmuteLocalAudioCallbacks=[],this.muted=!1,this.muteAndUnmuteLocalAudioCallbacks=[],this.volumeIndicatorState={},this.attendeeIdToExternalUserId={},this.volumeIndicatorCallbacks={},this.localSignalStrengthChangeCallbacks=[],this.fatalErrorCallbacks=[],this.sendDataMessageCallbacks=[],this.receiveDataMessageCallbacks=new Map}},"RealtimeState");l.default=c},7832597620:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(){this.volume=null,this.muted=null,this.signalStrength=null}},"RealtimeVolumeIndicator");l.default=c},2114525466:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(5824864644));let v=n(class bv{timeSpentReconnectingMs(){return this.firstConnectionAttempted?Date.now()-this.firstConnectionAttemptTimestampMs:0}hasPastReconnectDeadline(){return Date.now()-this.lastActiveTimestampMs>=this.reconnectTimeoutMs?!0:this.timeSpentReconnectingMs()>=this.reconnectTimeoutMs}reset(){this.cancel(),this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this.backoffPolicy.reset()}startedConnectionAttempt(s){this._isFirstConnection=s,this.firstConnectionAttempted||(this.firstConnectionAttempted=!0,this.firstConnectionAttemptTimestampMs=Date.now())}hasStartedConnectionAttempt(){return this.firstConnectionAttempted}isFirstConnection(){return this._isFirstConnection}disableReconnect(){this.shouldReconnect=!1}enableRestartPeerConnection(){this.onlyRestartPeerConnection=!0}cancel(){this.disableReconnect(),this.backoffTimer&&(this.backoffTimer.stop(),this.backoffCancel&&(this.backoffCancel(),this.backoffCancel=null))}retryWithBackoff(s,a){const i=this.shouldReconnect&&!this.hasPastReconnectDeadline();return i&&(this.backoffCancel=a,this.backoffTimer=new m.default(this.backoffPolicy.nextBackoffAmountMs()),this.backoffTimer.start(()=>{this.backoffCancel=null,s()})),i}shouldOnlyRestartPeerConnection(){return this.onlyRestartPeerConnection}clone(){return new bv(this.reconnectTimeoutMs,this.backoffPolicy)}setLastActiveTimestampMs(s){this.lastActiveTimestampMs=s}constructor(s,a){this.reconnectTimeoutMs=s,this.backoffPolicy=a,this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this._isFirstConnection=!0,this.backoffTimer=null,this.backoffCancel=null,this.reset()}},"DefaultReconnectController");l.default=v},3937896393:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class Vs{static initializeWorker(){Vs.log("Initializing RedundantAudioEncoder");const m=new Vs;self.RTCRtpScriptTransformer&&(self.onrtctransform=v=>{v.transformer.options.type==="SenderTransform"?m.setupSenderTransform(v.transformer.readable,v.transformer.writable):v.transformer.options.type==="ReceiverTransform"?m.setupReceiverTransform(v.transformer.readable,v.transformer.writable):v.transformer.options.type==="PassthroughTransform"&&m.setupPassthroughTransform(v.transformer.readable,v.transformer.writable)}),self.onmessage=v=>{v.data.msgType==="StartRedWorker"?(m.setupSenderTransform(v.data.send.readable,v.data.send.writable),m.setupReceiverTransform(v.data.receive.readable,v.data.receive.writable)):v.data.msgType==="PassthroughTransform"?(m.setupPassthroughTransform(v.data.send.readable,v.data.send.writable),m.setupPassthroughTransform(v.data.receive.readable,v.data.receive.writable)):v.data.msgType==="RedPayloadType"?m.setRedPayloadType(v.data.payloadType):v.data.msgType==="OpusPayloadType"?m.setOpusPayloadType(v.data.payloadType):v.data.msgType==="UpdateNumRedundantEncodings"?m.setNumRedundantEncodings(v.data.numRedundantEncodings):v.data.msgType==="Enable"?m.setRedundancyEnabled(!0):v.data.msgType==="Disable"&&m.setRedundancyEnabled(!1)}}static log(m){Vs.shouldLog&&self.postMessage({type:"REDWorkerLog",log:`[AudioRed] ${m}`})}static getNumRedundantEncodingsForPacketLoss(m){let v=0,g=!1;return m<=8?v=0:m<=18?v=1:m<=75?v=2:(v=0,g=!0),[v,g]}setupPassthroughTransform(m,v){Vs.log("Setting up passthrough transform"),m.pipeTo(v)}setupSenderTransform(m,v){Vs.log("Setting up sender RED transform");const g=new TransformStream({transform:this.senderTransform.bind(this)});m.pipeThrough(g).pipeTo(v)}setupReceiverTransform(m,v){Vs.log("Setting up receiver RED transform");const g=new TransformStream({transform:this.receivePacketLogTransform.bind(this)});m.pipeThrough(g).pipeTo(v)}setRedPayloadType(m){this.redPayloadType=m,Vs.log(`red payload type set to ${this.redPayloadType}`)}setOpusPayloadType(m){this.opusPayloadType=m,Vs.log(`opus payload type set to ${this.opusPayloadType}`)}setNumRedundantEncodings(m){this.numRedundantEncodings=m,this.numRedundantEncodings>this.maxRedEncodings&&(this.numRedundantEncodings=this.maxRedEncodings),Vs.log(`Updated numRedundantEncodings to ${this.numRedundantEncodings}`)}setRedundancyEnabled(m){this.redundancyEnabled=m,Vs.log(`redundancy ${this.redundancyEnabled?"enabled":"disabled"}`)}enqueueAudioFrameIfPayloadSizeIsValid(m,v){m.data.byteLength>this.maxAudioPayloadSizeBytes||v.enqueue(m)}senderTransform(m,v){if(m.getMetadata().payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(m,v);return}const s=this.getPrimaryPayload(m.timestamp,m.data);if(!s){this.enqueueAudioFrameIfPayloadSizeIsValid(m,v);return}const a=this.encode(m.timestamp,s);if(!a){this.enqueueAudioFrameIfPayloadSizeIsValid(m,v);return}m.data=a,this.enqueueAudioFrameIfPayloadSizeIsValid(m,v)}getPrimaryPayload(m,v){const g=this.splitEncodings(m,v);return!g||g.length<1?null:g[g.length-1].payload}splitEncodings(m,v){let g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;const a=new DataView(v);let i=a.byteLength,e=0,t=0,r=0,o=0,f=!1;const h=new Array,p=new Array,d=new Array;for(;i>0;)if(f=(a.getUint8(o)&128)===0,f){if((a.getUint8(o)&127)!==this.opusPayloadType||(e+=this.redLastHeaderSizeBytes,t+=this.redLastHeaderSizeBytes,e>=a.byteLength))return null;r=a.byteLength-e;break}else{if(i<this.redHeaderSizeBytes)return null;const w=((a.getUint8(o+2)&3)<<8)+a.getUint8(o+3);p.push(w);const R=a.getUint16(o+1)>>2,O=m-R;d.push(O),e+=w+this.redHeaderSizeBytes,t+=this.redHeaderSizeBytes,o+=this.redHeaderSizeBytes,i-=this.redHeaderSizeBytes}if(!f)return null;let y=t;for(let w=0;w<d.length;w++){const R=new ArrayBuffer(p[w]);new Uint8Array(R).set(new Uint8Array(a.buffer,y,p[w]),0);const D={timestamp:d[w],payload:R,isRedundant:!0};g&&(D.hasFec=this.opusPacketHasFec(new DataView(R),R.byteLength)),h.push(D),y+=p[w]}const S=a.byteLength-r,b=new ArrayBuffer(r);new Uint8Array(b).set(new Uint8Array(a.buffer,S,r),0);const C={timestamp:m,payload:b,isRedundant:!1,seq:s};return g&&(C.hasFec=this.opusPacketHasFec(new DataView(b),b.byteLength)),h.push(C),h}encode(m,v){const g=v.byteLength;if(g===0||g>=this.maxRedPacketSizeBytes||g>=this.maxAudioPayloadSizeBytes)return null;const s=this.numRedundantEncodings;let a=this.redLastHeaderSizeBytes,i=g,e=this.maxAudioPayloadSizeBytes-g-a;const t=new Array,r=new Array;if(this.redundancyEnabled){let d=this.uint32WrapAround(m-this.redPacketizationTime*this.redPacketDistance);for(let y=0;y<s&&!(this.uint32WrapAround(m-d)>=this.maxRedTimestampOffset);y++){let S=d,b=this.encodingHistory.find(_=>_.timestamp===S);if(b||(S=this.uint32WrapAround(d-this.redPacketizationTime),b=this.encodingHistory.find(_=>_.timestamp===S)),b){const _=b.payload.byteLength;if(e<this.redHeaderSizeBytes+_)break;e-=this.redHeaderSizeBytes+_,a+=this.redHeaderSizeBytes,i+=_,t.unshift(b.timestamp),r.unshift(b.payload)}d-=this.redPacketizationTime*this.redPacketDistance,d=this.uint32WrapAround(d)}}const o=new ArrayBuffer(a+i),f=new DataView(o);let h=0;for(let d=0;d<t.length;d++){const y=m-t[d];f.setUint8(h,this.opusPayloadType|128),f.setUint16(h+1,y<<2|r[d].byteLength>>8),f.setUint8(h+3,r[d].byteLength&255),h+=this.redHeaderSizeBytes}f.setUint8(h,this.opusPayloadType),h+=this.redLastHeaderSizeBytes;const p=new Uint8Array(o);for(let d=0;d<r.length;d++)p.set(new Uint8Array(r[d]),h),h+=r[d].byteLength;return p.set(new Uint8Array(v),h),h+=v.byteLength,h!==a+i?null:(this.updateEncodingHistory(m,v),o)}updateEncodingHistory(m,v){for(const s of this.encodingHistory){const a=this.redPacketizationTime*this.redMaxRecoveryDistance;if(m-s.timestamp>=a)this.encodingHistory.shift();else break}const g=new DataView(v);(this.opusPacketIsCeltOnly(g)||this.opusPacketHasVoiceActivity(g,g.byteLength)>0)&&(this.encodingHistory.length+1>this.maxEncodingHistorySize&&(this.encodingHistory.length=0),this.encodingHistory.push({timestamp:m,payload:v}))}initializePacketLogs(){const m=this.maxOutOfOrderPacketDistance+this.redMaxRecoveryDistance;this.primaryPacketLog={window:new Array(m),index:0,windowSize:m},this.redRecoveryLog={window:new Array(m),index:0,windowSize:m},this.fecRecoveryLog={window:new Array(m),index:0,windowSize:m},this.totalAudioPacketsExpected=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}receivePacketLogTransform(m,v){const g=m.getMetadata();if(g.payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(m,v);return}const s=this.splitEncodings(m.timestamp,m.data,!0,g.sequenceNumber);if(!s){this.enqueueAudioFrameIfPayloadSizeIsValid(m,v);return}for(let a=s.length-1;a>=0;a--)this.updateLossStats(s[a])&&(this.updateRedStats(s[a]),this.updateFecStats(s[a]));this.maybeReportLossStats(s[s.length-1].timestamp,g.synchronizationSource),this.enqueueAudioFrameIfPayloadSizeIsValid(m,v)}updateLossStats(m){if(m.isRedundant)return!0;const v=m.timestamp,g=m.seq;if(this.totalAudioPacketsExpected===0)return this.totalAudioPacketsExpected=1,this.newestSequenceNumber=g,this.addTimestamp(this.primaryPacketLog,v),!0;const s=this.int16(g-this.newestSequenceNumber);return s<-this.maxOutOfOrderPacketDistance?!1:(s<0?this.hasTimestamp(this.primaryPacketLog,v)||(this.totalAudioPacketsLost>0&&this.totalAudioPacketsLost--,this.addTimestamp(this.primaryPacketLog,v),this.removeFromRecoveryWindows(v)):s>1&&(this.totalAudioPacketsLost+=s-1),s>0&&(this.totalAudioPacketsExpected+=s,this.newestSequenceNumber=m.seq,this.addTimestamp(this.primaryPacketLog,v)),!0)}updateRedStats(m){if(!m.isRedundant||this.totalAudioPacketsLost===0)return;const v=m.timestamp;this.hasTimestamp(this.primaryPacketLog,v)||(this.hasTimestamp(this.redRecoveryLog,v)||(this.totalAudioPacketsRecoveredRed++,this.addTimestamp(this.redRecoveryLog,v)),this.removeTimestamp(this.fecRecoveryLog,v)&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--)}updateFecStats(m){if(!m.hasFec||this.totalAudioPacketsLost===0)return;const v=m.timestamp-this.redPacketizationTime;this.hasTimestamp(this.primaryPacketLog,v)||this.hasTimestamp(this.redRecoveryLog,v)||this.hasTimestamp(this.fecRecoveryLog,v)||(this.totalAudioPacketsRecoveredFec++,this.addTimestamp(this.fecRecoveryLog,v))}maybeReportLossStats(m,v){m-this.lastLossReportTimestamp<this.lossReportInterval||(Vs.shouldReportStats&&self.postMessage({type:"RedundantAudioEncoderStats",ssrc:v,totalAudioPacketsLost:this.totalAudioPacketsLost,totalAudioPacketsExpected:this.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.totalAudioPacketsRecoveredFec}),this.lastLossReportTimestamp=m)}addTimestamp(m,v){m.window[m.index]=v,m.index=(m.index+1)%m.windowSize}hasTimestamp(m,v){return!!m.window.find(s=>s===v)}removeTimestamp(m,v){const g=m.window.indexOf(v);return g>=0?(m.window[g]=void 0,!0):!1}removeFromRecoveryWindows(m){let v=this.removeTimestamp(this.redRecoveryLog,m);v&&this.totalAudioPacketsRecoveredRed>0&&this.totalAudioPacketsRecoveredRed--,v=this.removeTimestamp(this.fecRecoveryLog,m),v&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--}uint32WrapAround(m){let g=m;return m>=4294967296?g=m-4294967296:m<0&&(g=4294967296+m),g}int16(m){return m<<16>>16}opusPacketIsCeltOnly(m){return!!(m.getUint8(0)&128)}opusPacketGetSamplesPerFrame(m,v){v=Math.round(v),v=Math.min(Math.max(v,-Math.pow(2,32)),Math.pow(2,32)-1);let g,s;return this.opusPacketIsCeltOnly(m)?(s=m.getUint8(0)>>3&3,g=(v<<s)/400):(m.getUint8(0)&96)===96?g=m.getUint8(0)&8?v/50:v/100:(s=m.getUint8(0)>>3&3,s===3?g=v*60/1e3:g=(v<<s)/100),g}opusNumSilkFrames(m){let v=this.opusPacketGetSamplesPerFrame(m,48e3)/48;switch(v<10&&(v=10),v){case 10:case 20:return 1;case 40:return 2;case 60:return 3;default:return 0}}opusPacketGetNumChannels(m){return m.getUint8(0)&4?2:1}opusParseSize(m,v,g,s){return g<1?(s[0]=-1,-1):m.getUint8(v)<252?(s[0]=m.getUint8(v),1):g<2?(s[0]=-1,-1):(s[0]=4*m.getUint8(v+1)+m.getUint8(v),2)}opusPacketParseImpl(m,v,g,s,a,i,e,t){if(!i||v<0)return this.OPUS_BAD_ARG;if(v===0)return this.OPUS_INVALID_PACKET;let r,o,f=0,h=!1;const p=m.getUint8(0);s&&(s[0]=p);let d=v-1,y=1,S=d;switch(p&3){case 0:r=1;break;case 1:if(r=2,h=!0,!g){if(d&1)return this.OPUS_INVALID_PACKET;S=d/2,i[0][0]=S}break;case 2:if(r=2,o=this.opusParseSize(m,y,d,i[0]),d-=o,i[0][0]<0||i[0][0]>d)return this.OPUS_INVALID_PACKET;y+=o,S=d-i[0][0];break;default:if(d<1)return this.OPUS_INVALID_PACKET;const b=m.getUint8(y++);if(--d,r=b&63,r<=0)return this.OPUS_INVALID_PACKET;if(this.opusPacketGetSamplesPerFrame(m,48e3)*r>5760)return this.OPUS_INVALID_PACKET;if(b&64){let C,w;do{if(d<=0)return this.OPUS_INVALID_PACKET;C=m.getUint8(y++),--d,w=C===255?254:C,d-=w,f+=w}while(C===255)}if(d<0)return this.OPUS_INVALID_PACKET;if(h=!(b&128),h){if(!g){if(S=Math.trunc(d/r),S*r!==d)return this.OPUS_INVALID_PACKET;for(let C=0;C<r-1;++C)i[C][0]=S}}else{S=d;for(let C=0;C<r-1;++C){if(o=this.opusParseSize(m,y,d,i[C]),d-=o,i[C][0]<0||i[C][0]>d)return this.OPUS_INVALID_PACKET;y+=o,S-=o+i[C][0]}if(S<0)return this.OPUS_INVALID_PACKET}}if(g){if(o=this.opusParseSize(m,y,d,i[r-1]),d-=o,i[r-1][0]<0||i[r-1][0]>d)return this.OPUS_INVALID_PACKET;if(y+=o,h){if(i[r-1][0]*r>d)return this.OPUS_INVALID_PACKET;for(let b=0;b<r-1;++b)i[b][0]=i[r-1][0]}else if(!(o+i[r-1][0]<=S))return this.OPUS_INVALID_PACKET}else{if(S>this.OPUS_MAX_FRAME_SIZE_BYTES)return this.OPUS_INVALID_PACKET;i[r-1][0]=S}e&&(e[0]=y);for(let b=0;b<r;++b)a&&(a[b][0]=y),y+=i[b][0];return t&&(t[0]=y+f),r}opusPacketParse(m,v,g,s,a,i){return this.opusPacketParseImpl(m,v,!1,g,s,a,i,null)}opusPacketHasVoiceActivity(m,v){if(!m||v<=0)return 0;if(this.opusPacketIsCeltOnly(m))return-1;const g=this.opusNumSilkFrames(m);if(g===0)return-1;const s=new Array(this.OPUS_MAX_OPUS_FRAMES),a=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let e=0;e<this.OPUS_MAX_OPUS_FRAMES;++e)s[e]=[void 0],a[e]=[void 0];const i=this.opusPacketParse(m,v,null,s,a,null);if(i<0)return-1;for(let e=0;e<i;++e){if(a[e][0]<1)continue;if(m.getUint8(s[e][0])>>8-g||this.opusPacketGetNumChannels(m)===2&&m.getUint8(s[e][0])<<g+1>>8-g)return 1}return 0}opusPacketHasFec(m,v){if(!m||v<=0||this.opusPacketIsCeltOnly(m))return!1;const g=new Array(this.OPUS_MAX_OPUS_FRAMES),s=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let t=0;t<this.OPUS_MAX_OPUS_FRAMES;++t)g[t]=[void 0],s[t]=[void 0];if(this.opusPacketParse(m,v,null,g,s,null)<0||s[0][0]<=1)return!1;const i=this.opusNumSilkFrames(m);if(i===0)return!1;const e=this.opusPacketGetNumChannels(m);if(e!==1&&e!==2)return!1;for(let t=0;t<e;t++)if(m.getUint8(g[0][0])&128>>(t+1)*(i+1)-1)return!0;return!1}constructor(){this.maxRedPacketSizeBytes=1<<10,this.maxAudioPayloadSizeBytes=1e3,this.maxRedTimestampOffset=1<<14,this.redHeaderSizeBytes=4,this.redLastHeaderSizeBytes=1,this.redPacketizationTime=960,this.redPacketDistance=2,this.maxRedEncodings=2,this.redMaxRecoveryDistance=this.redPacketDistance*this.maxRedEncodings+1,this.maxEncodingHistorySize=10,this.numRedundantEncodings=0,this.redundancyEnabled=!0,this.lossReportInterval=48e3*5,this.maxOutOfOrderPacketDistance=16,this.OPUS_BAD_ARG=-1,this.OPUS_INVALID_PACKET=-4,this.OPUS_MAX_OPUS_FRAMES=48,this.OPUS_MAX_FRAME_SIZE_BYTES=1275,this.encodingHistory=new Array,this.opusPayloadType=0,this.redPayloadType=0,this.initializePacketLogs()}},"RedundantAudioEncoder");l.default=c,c.shouldLog=!1,c.shouldReportStats=!1},9337558969:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const c=`class RedundantAudioEncoder {
    constructor() {
        // Each payload must be less than 1024 bytes to fit the 10 bit block length
        this.maxRedPacketSizeBytes = 1 << 10;
        // Limit payload to 1000 bytes to handle small MTU. 1000 is chosen because in Chromium-based browsers, writing audio
        // payloads larger than 1000 bytes using the WebRTC Insertable Streams API (which is used to enable dynamic audio
        // redundancy) will cause an error to be thrown and cause audio flow to permanently stop. See
        // https://crbug.com/1248479.
        this.maxAudioPayloadSizeBytes = 1000;
        // Each payload can encode a timestamp delta of 14 bits
        this.maxRedTimestampOffset = 1 << 14;
        // 4 byte RED header
        this.redHeaderSizeBytes = 4;
        // reduced size for last RED header
        this.redLastHeaderSizeBytes = 1;
        // P-Time for Opus 20 msec packets
        // We do not support other p-times or clock rates
        this.redPacketizationTime = 960;
        // distance between redundant payloads, Opus FEC handles a distance of 1
        // TODO(https://issues.amazon.com/issues/ChimeSDKAudio-55):
        // Consider making this dynamic
        this.redPacketDistance = 2;
        // maximum number of redundant payloads per RTP packet
        this.maxRedEncodings = 2;
        // Maximum number of encodings that can be recovered with a single RED packet, assuming the primary and redundant
        // payloads have FEC.
        this.redMaxRecoveryDistance = this.redPacketDistance * this.maxRedEncodings + 1;
        // maximum history of prior payloads to keep
        // generally we will expire old entries based on timestamp
        // this limit is in place just to make sure the history does not
        // grow too large in the case of erroneous timestamp inputs
        this.maxEncodingHistorySize = 10;
        // Current number of encodings we want to send
        // to the remote end. This will be dynamically
        // updated through the setNumEncodingsFromPacketloss API
        this.numRedundantEncodings = 0;
        // Used to enable or disable redundancy
        // in response to very high packet loss events
        this.redundancyEnabled = true;
        // Loss stats are reported to the main thread every 5 seconds.
        // Since timestamp differences between 2 consecutive packets
        // give us the number of samples in each channel, 1 second
        // is equivalent to 48000 samples:
        // P-time * (1000ms/1s)
        // = (960 samples/20ms) * (1000ms/1s)
        // = 48000 samples/s
        this.lossReportInterval = 48000 * 5;
        // Maximum distance of a packet from the most recent packet timestamp
        // that we will consider for recovery.
        this.maxOutOfOrderPacketDistance = 16;
        /**
         * Below are Opus helper methods and constants.
         */
        this.OPUS_BAD_ARG = -1;
        this.OPUS_INVALID_PACKET = -4;
        // Max number of Opus frames in an Opus packet is 48 (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5).
        this.OPUS_MAX_OPUS_FRAMES = 48;
        // Max number of bytes that any individual Opus frame can have.
        this.OPUS_MAX_FRAME_SIZE_BYTES = 1275;
        this.encodingHistory = new Array();
        this.opusPayloadType = 0;
        this.redPayloadType = 0;
        this.initializePacketLogs();
    }
    /**
     * Creates an instance of RedundantAudioEncoder and sets up callbacks.
     */
    static initializeWorker() {
        RedundantAudioEncoder.log('Initializing RedundantAudioEncoder');
        const encoder = new RedundantAudioEncoder();
        // RED encoding is done using WebRTC Encoded Transform
        // https://github.com/w3c/webrtc-encoded-transform/blob/main/explainer.md
        // Check the DedicatedWorkerGlobalScope for existence of
        // RTCRtpScriptTransformer interface. If exists, then
        // RTCRtpScriptTransform is supported by this browser.
        // @ts-ignore
        if (self.RTCRtpScriptTransformer) {
            // @ts-ignore
            self.onrtctransform = (event) => {
                if (event.transformer.options.type === 'SenderTransform') {
                    encoder.setupSenderTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'ReceiverTransform') {
                    encoder.setupReceiverTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'PassthroughTransform') {
                    encoder.setupPassthroughTransform(event.transformer.readable, event.transformer.writable);
                }
            };
        }
        self.onmessage = (event) => {
            if (event.data.msgType === 'StartRedWorker') {
                encoder.setupSenderTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupReceiverTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'PassthroughTransform') {
                encoder.setupPassthroughTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupPassthroughTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'RedPayloadType') {
                encoder.setRedPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'OpusPayloadType') {
                encoder.setOpusPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'UpdateNumRedundantEncodings') {
                encoder.setNumRedundantEncodings(event.data.numRedundantEncodings);
            }
            else if (event.data.msgType === 'Enable') {
                encoder.setRedundancyEnabled(true);
            }
            else if (event.data.msgType === 'Disable') {
                encoder.setRedundancyEnabled(false);
            }
        };
    }
    /**
     * Post logs to the main thread
     */
    static log(msg) {
        if (RedundantAudioEncoder.shouldLog) {
            // @ts-ignore
            self.postMessage({
                type: 'REDWorkerLog',
                log: \`[AudioRed] \${msg}\`,
            });
        }
    }
    /**
     * Returns the number of encodings based on packetLoss value. This is used by \`DefaultTransceiverController\` to
     * determine when to alert the encoder to update the number of encodings. It also determines if we need to
     * turn off red in cases of very high packet loss to avoid congestion collapse.
     */
    static getNumRedundantEncodingsForPacketLoss(packetLoss) {
        let recommendedRedundantEncodings = 0;
        let shouldTurnOffRed = false;
        if (packetLoss <= 8) {
            recommendedRedundantEncodings = 0;
        }
        else if (packetLoss <= 18) {
            recommendedRedundantEncodings = 1;
        }
        else if (packetLoss <= 75) {
            recommendedRedundantEncodings = 2;
        }
        else {
            recommendedRedundantEncodings = 0;
            shouldTurnOffRed = true;
        }
        return [recommendedRedundantEncodings, shouldTurnOffRed];
    }
    /**
     * Sets up a passthrough (no-op) transform for the given streams.
     */
    setupPassthroughTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up passthrough transform');
        readable.pipeTo(writable);
    }
    /**
     * Sets up the transform stream and pipes the outgoing encoded audio frames through the transform function.
     */
    setupSenderTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up sender RED transform');
        const transformStream = new TransformStream({
            transform: this.senderTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Sets up the transform stream and pipes the received encoded audio frames through the transform function.
     */
    setupReceiverTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up receiver RED transform');
        const transformStream = new TransformStream({
            transform: this.receivePacketLogTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Set the RED payload type ideally obtained from local offer.
     */
    setRedPayloadType(payloadType) {
        this.redPayloadType = payloadType;
        RedundantAudioEncoder.log(\`red payload type set to \${this.redPayloadType}\`);
    }
    /**
     * Set the opus payload type ideally obtained from local offer.
     */
    setOpusPayloadType(payloadType) {
        this.opusPayloadType = payloadType;
        RedundantAudioEncoder.log(\`opus payload type set to \${this.opusPayloadType}\`);
    }
    /**
     * Set the number of redundant encodings
     */
    setNumRedundantEncodings(numRedundantEncodings) {
        this.numRedundantEncodings = numRedundantEncodings;
        if (this.numRedundantEncodings > this.maxRedEncodings) {
            this.numRedundantEncodings = this.maxRedEncodings;
        }
        RedundantAudioEncoder.log(\`Updated numRedundantEncodings to \${this.numRedundantEncodings}\`);
    }
    /**
     * Enable or disable redundancy in response to
     * high packet loss event.
     */
    setRedundancyEnabled(enabled) {
        this.redundancyEnabled = enabled;
        RedundantAudioEncoder.log(\`redundancy \${this.redundancyEnabled ? 'enabled' : 'disabled'}\`);
    }
    /**
     * Helper function to only enqueue audio frames if they do not exceed the audio payload byte limit imposed by
     * Chromium-based browsers. Chromium will throw an error (https://crbug.com/1248479) if an audio payload larger than
     * 1000 bytes is enqueued. Any controller that attempts to enqueue an audio payload larger than 1000 bytes will
     * encounter this error and will permanently stop sending or receiving audio.
     */
    enqueueAudioFrameIfPayloadSizeIsValid(
    // @ts-ignore
    frame, controller) {
        if (frame.data.byteLength > this.maxAudioPayloadSizeBytes)
            return;
        controller.enqueue(frame);
    }
    /**
     * Receives encoded frames and modifies as needed before sending to transport.
     */
    senderTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const primaryPayloadBuffer = this.getPrimaryPayload(frame.timestamp, frame.data);
        if (!primaryPayloadBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const encodedBuffer = this.encode(frame.timestamp, primaryPayloadBuffer);
        /* istanbul ignore next */
        if (!encodedBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        frame.data = encodedBuffer;
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
        return;
    }
    /**
     * Get the primary payload from encoding
     */
    getPrimaryPayload(primaryTimestamp, frame) {
        const encodings = this.splitEncodings(primaryTimestamp, frame);
        if (!encodings || encodings.length < 1)
            return null;
        return encodings[encodings.length - 1].payload;
    }
    /**
     * Split up the encoding received into primary and redundant encodings
     * These will be ordered oldest to newest which is the same ordering
     * in the RTP red payload.
     */
    splitEncodings(primaryTimestamp, frame, getFecInfo = false, primarySequenceNumber = undefined) {
        // process RED headers (according to RFC 2198)
        //   0                   1                   2                   3
        //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //  |F|   block PT  |  timestamp offset         |   block length    |
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //
        // last header
        //   0 1 2 3 4 5 6 7
        //  +-+-+-+-+-+-+-+-+
        //  |0|   Block PT  |
        //  +-+-+-+-+-+-+-+-+
        const payload = new DataView(frame);
        let payloadSizeBytes = payload.byteLength;
        let totalPayloadSizeBytes = 0;
        let totalHeaderSizeBytes = 0;
        let primaryPayloadSizeBytes = 0;
        let payloadOffset = 0;
        let gotLastBlock = false;
        const encodings = new Array();
        const redundantEncodingBlockLengths = new Array();
        const redundantEncodingTimestamps = new Array();
        while (payloadSizeBytes > 0) {
            gotLastBlock = (payload.getUint8(payloadOffset) & 0x80) === 0;
            if (gotLastBlock) {
                // Bits 1 through 7 are payload type
                const payloadType = payload.getUint8(payloadOffset) & 0x7f;
                // Unexpected payload type. This is a bad packet.
                if (payloadType !== this.opusPayloadType) {
                    return null;
                }
                totalPayloadSizeBytes += this.redLastHeaderSizeBytes;
                totalHeaderSizeBytes += this.redLastHeaderSizeBytes;
                // Accumulated block lengths are equal to or larger than the buffer, which means there is no primary block. This
                // is a bad packet.
                if (totalPayloadSizeBytes >= payload.byteLength) {
                    return null;
                }
                primaryPayloadSizeBytes = payload.byteLength - totalPayloadSizeBytes;
                break;
            }
            else {
                if (payloadSizeBytes < this.redHeaderSizeBytes) {
                    return null;
                }
                // Bits 22 through 31 are payload length
                const blockLength = ((payload.getUint8(payloadOffset + 2) & 0x03) << 8) + payload.getUint8(payloadOffset + 3);
                redundantEncodingBlockLengths.push(blockLength);
                const timestampOffset = payload.getUint16(payloadOffset + 1) >> 2;
                const timestamp = primaryTimestamp - timestampOffset;
                redundantEncodingTimestamps.push(timestamp);
                totalPayloadSizeBytes += blockLength + this.redHeaderSizeBytes;
                totalHeaderSizeBytes += this.redHeaderSizeBytes;
                payloadOffset += this.redHeaderSizeBytes;
                payloadSizeBytes -= this.redHeaderSizeBytes;
            }
        }
        // The last block was never found. This is a bad packet.
        if (!gotLastBlock) {
            return null;
        }
        let redundantPayloadOffset = totalHeaderSizeBytes;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const redundantPayloadBuffer = new ArrayBuffer(redundantEncodingBlockLengths[i]);
            const redundantPayloadArray = new Uint8Array(redundantPayloadBuffer);
            redundantPayloadArray.set(new Uint8Array(payload.buffer, redundantPayloadOffset, redundantEncodingBlockLengths[i]), 0);
            const encoding = {
                timestamp: redundantEncodingTimestamps[i],
                payload: redundantPayloadBuffer,
                isRedundant: true,
            };
            if (getFecInfo) {
                encoding.hasFec = this.opusPacketHasFec(new DataView(redundantPayloadBuffer), redundantPayloadBuffer.byteLength);
            }
            encodings.push(encoding);
            redundantPayloadOffset += redundantEncodingBlockLengths[i];
        }
        const primaryPayloadOffset = payload.byteLength - primaryPayloadSizeBytes;
        const primaryPayloadBuffer = new ArrayBuffer(primaryPayloadSizeBytes);
        const primaryArray = new Uint8Array(primaryPayloadBuffer);
        primaryArray.set(new Uint8Array(payload.buffer, primaryPayloadOffset, primaryPayloadSizeBytes), 0);
        const encoding = {
            timestamp: primaryTimestamp,
            payload: primaryPayloadBuffer,
            isRedundant: false,
            seq: primarySequenceNumber,
        };
        if (getFecInfo) {
            encoding.hasFec = this.opusPacketHasFec(new DataView(primaryPayloadBuffer), primaryPayloadBuffer.byteLength);
        }
        encodings.push(encoding);
        return encodings;
    }
    /**
     * Create a new encoding with current primary payload and the older payloads of choice.
     */
    encode(primaryTimestamp, primaryPayload) {
        const primaryPayloadSize = primaryPayload.byteLength;
        // Payload size needs to be valid.
        if (primaryPayloadSize === 0 ||
            primaryPayloadSize >= this.maxRedPacketSizeBytes ||
            primaryPayloadSize >= this.maxAudioPayloadSizeBytes) {
            return null;
        }
        const numRedundantEncodings = this.numRedundantEncodings;
        let headerSizeBytes = this.redLastHeaderSizeBytes;
        let payloadSizeBytes = primaryPayloadSize;
        let bytesAvailable = this.maxAudioPayloadSizeBytes - primaryPayloadSize - headerSizeBytes;
        const redundantEncodingTimestamps = new Array();
        const redundantEncodingPayloads = new Array();
        // If redundancy is disabled then only send the primary payload
        if (this.redundancyEnabled) {
            // Determine how much redundancy we can fit into our packet
            let redundantTimestamp = this.uint32WrapAround(primaryTimestamp - this.redPacketizationTime * this.redPacketDistance);
            for (let i = 0; i < numRedundantEncodings; i++) {
                // Do not add redundant encodings that are beyond the maximum timestamp offset.
                if (this.uint32WrapAround(primaryTimestamp - redundantTimestamp) >= this.maxRedTimestampOffset) {
                    break;
                }
                let findTimestamp = redundantTimestamp;
                let encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                if (!encoding) {
                    // If not found or not important then look for the previous packet.
                    // The current packet may have included FEC for the previous, so just
                    // use the previous packet instead provided that it has voice activity.
                    findTimestamp = this.uint32WrapAround(redundantTimestamp - this.redPacketizationTime);
                    encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                }
                if (encoding) {
                    const redundantEncodingSizeBytes = encoding.payload.byteLength;
                    // Only add redundancy if there are enough bytes available.
                    if (bytesAvailable < this.redHeaderSizeBytes + redundantEncodingSizeBytes)
                        break;
                    bytesAvailable -= this.redHeaderSizeBytes + redundantEncodingSizeBytes;
                    headerSizeBytes += this.redHeaderSizeBytes;
                    payloadSizeBytes += redundantEncodingSizeBytes;
                    redundantEncodingTimestamps.unshift(encoding.timestamp);
                    redundantEncodingPayloads.unshift(encoding.payload);
                }
                redundantTimestamp -= this.redPacketizationTime * this.redPacketDistance;
                redundantTimestamp = this.uint32WrapAround(redundantTimestamp);
            }
        }
        const redPayloadBuffer = new ArrayBuffer(headerSizeBytes + payloadSizeBytes);
        const redPayloadView = new DataView(redPayloadBuffer);
        // Add redundant encoding header(s) to new buffer
        let redPayloadOffset = 0;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const timestampDelta = primaryTimestamp - redundantEncodingTimestamps[i];
            redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType | 0x80);
            redPayloadView.setUint16(redPayloadOffset + 1, (timestampDelta << 2) | (redundantEncodingPayloads[i].byteLength >> 8));
            redPayloadView.setUint8(redPayloadOffset + 3, redundantEncodingPayloads[i].byteLength & 0xff);
            redPayloadOffset += this.redHeaderSizeBytes;
        }
        // Add primary encoding header to new buffer
        redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType);
        redPayloadOffset += this.redLastHeaderSizeBytes;
        // Add redundant payload(s) to new buffer
        const redPayloadArray = new Uint8Array(redPayloadBuffer);
        for (let i = 0; i < redundantEncodingPayloads.length; i++) {
            redPayloadArray.set(new Uint8Array(redundantEncodingPayloads[i]), redPayloadOffset);
            redPayloadOffset += redundantEncodingPayloads[i].byteLength;
        }
        // Add primary payload to new buffer
        redPayloadArray.set(new Uint8Array(primaryPayload), redPayloadOffset);
        redPayloadOffset += primaryPayload.byteLength;
        /* istanbul ignore next */
        // Sanity check that we got the expected total payload size.
        if (redPayloadOffset !== headerSizeBytes + payloadSizeBytes)
            return null;
        this.updateEncodingHistory(primaryTimestamp, primaryPayload);
        return redPayloadBuffer;
    }
    /**
     * Update the encoding history with the latest primary encoding
     */
    updateEncodingHistory(primaryTimestamp, primaryPayload) {
        // Remove encodings from the history if they are too old.
        for (const encoding of this.encodingHistory) {
            const maxTimestampDelta = this.redPacketizationTime * this.redMaxRecoveryDistance;
            if (primaryTimestamp - encoding.timestamp >= maxTimestampDelta) {
                this.encodingHistory.shift();
            }
            else {
                break;
            }
        }
        // Only add an encoding to the history if the encoding is deemed to be important. An encoding is important if it is
        // a CELT-only packet or contains voice activity.
        const packet = new DataView(primaryPayload);
        if (this.opusPacketIsCeltOnly(packet) ||
            this.opusPacketHasVoiceActivity(packet, packet.byteLength) > 0) {
            // Check if adding an encoding will cause the length of the encoding history to exceed the maximum history size.
            // This is not expected to happen but could occur if we get incorrect timestamps. We want to make sure our memory
            // usage is bounded. In this case, just clear the history and start over from empty.
            if (this.encodingHistory.length + 1 > this.maxEncodingHistorySize)
                this.encodingHistory.length = 0;
            this.encodingHistory.push({ timestamp: primaryTimestamp, payload: primaryPayload });
        }
    }
    /**
     * Initialize packet logs and metric values.
     */
    initializePacketLogs() {
        // The extra space from the max RED recovery distance is to ensure that we do not incorrectly count recovery for
        // packets that have already been received but are outside of the max out-of-order distance.
        const packetLogSize = this.maxOutOfOrderPacketDistance + this.redMaxRecoveryDistance;
        this.primaryPacketLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.redRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.fecRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.totalAudioPacketsExpected = 0;
        this.totalAudioPacketsLost = 0;
        this.totalAudioPacketsRecoveredRed = 0;
        this.totalAudioPacketsRecoveredFec = 0;
    }
    /**
     * Receives encoded frames from the server
     * and adds the timestamps to a packet log
     * to calculate an approximate recovery metric.
     */
    receivePacketLogTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        // @ts-ignore
        const encodings = this.splitEncodings(frame.timestamp, frame.data, 
        /*getFecInfo*/ true, frameMetadata.sequenceNumber);
        if (!encodings) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        for (let i = encodings.length - 1; i >= 0; i--) {
            if (this.updateLossStats(encodings[i])) {
                this.updateRedStats(encodings[i]);
                this.updateFecStats(encodings[i]);
            }
        }
        this.maybeReportLossStats(encodings[encodings.length - 1].timestamp, frameMetadata.synchronizationSource);
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
    }
    /**
     * Adds a timestamp to the primary packet log.
     * This also updates totalAudioPacketsLost and totalAudioPacketsExpected by looking
     * at the difference between timestamps.
     *
     * @param encoding : The encoding to be analyzed
     * @returns false if sequence number was greater than max out of order distance
     *          true otherwise
     */
    updateLossStats(encoding) {
        if (encoding.isRedundant)
            return true;
        const timestamp = encoding.timestamp;
        const seq = encoding.seq;
        if (this.totalAudioPacketsExpected === 0) {
            this.totalAudioPacketsExpected = 1;
            this.newestSequenceNumber = seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
            return true;
        }
        const diff = this.int16(seq - this.newestSequenceNumber);
        if (diff < -this.maxOutOfOrderPacketDistance)
            return false;
        if (diff < 0) {
            if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
                if (this.totalAudioPacketsLost > 0)
                    this.totalAudioPacketsLost--;
                this.addTimestamp(this.primaryPacketLog, timestamp);
                this.removeFromRecoveryWindows(timestamp);
            }
        }
        else if (diff > 1) {
            this.totalAudioPacketsLost += diff - 1;
        }
        if (diff > 0) {
            this.totalAudioPacketsExpected += diff;
            this.newestSequenceNumber = encoding.seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
        }
        return true;
    }
    /**
     * Adds a timestamp to the red recovery log if it is not present in
     * the primary packet log and if it's not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateRedStats(encoding) {
        if (!encoding.isRedundant || this.totalAudioPacketsLost === 0)
            return;
        const timestamp = encoding.timestamp;
        if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
            if (!this.hasTimestamp(this.redRecoveryLog, timestamp)) {
                this.totalAudioPacketsRecoveredRed++;
                this.addTimestamp(this.redRecoveryLog, timestamp);
            }
            if (this.removeTimestamp(this.fecRecoveryLog, timestamp)) {
                /* istanbul ignore else */
                if (this.totalAudioPacketsRecoveredFec > 0)
                    this.totalAudioPacketsRecoveredFec--;
            }
        }
    }
    /**
     * Adds a timestamp to the fec recovery log if it is not present in
     * the primary packet log and red recovery log and if it is not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateFecStats(encoding) {
        if (!encoding.hasFec || this.totalAudioPacketsLost === 0)
            return;
        const fecTimestamp = encoding.timestamp - this.redPacketizationTime;
        if (this.hasTimestamp(this.primaryPacketLog, fecTimestamp) ||
            this.hasTimestamp(this.redRecoveryLog, fecTimestamp) ||
            this.hasTimestamp(this.fecRecoveryLog, fecTimestamp)) {
            return;
        }
        this.totalAudioPacketsRecoveredFec++;
        this.addTimestamp(this.fecRecoveryLog, fecTimestamp);
    }
    /**
     * Reports loss metrics to DefaultTransceiverController
     *
     * @param timestamp : Timestamp of most recent primary packet
     */
    maybeReportLossStats(timestamp, ssrc) {
        if (timestamp - this.lastLossReportTimestamp < this.lossReportInterval)
            return;
        /* istanbul ignore next */
        if (RedundantAudioEncoder.shouldReportStats) {
            // @ts-ignore
            self.postMessage({
                type: 'RedundantAudioEncoderStats',
                ssrc,
                totalAudioPacketsLost: this.totalAudioPacketsLost,
                totalAudioPacketsExpected: this.totalAudioPacketsExpected,
                totalAudioPacketsRecoveredRed: this.totalAudioPacketsRecoveredRed,
                totalAudioPacketsRecoveredFec: this.totalAudioPacketsRecoveredFec,
            });
        }
        this.lastLossReportTimestamp = timestamp;
    }
    /**
     * Adds a timestamp to a packet log
     *
     * @param packetLog : The packetlog to add the timestamp to
     * @param timestamp : The timestamp that should be added
     */
    addTimestamp(packetLog, timestamp) {
        packetLog.window[packetLog.index] = timestamp;
        packetLog.index = (packetLog.index + 1) % packetLog.windowSize;
    }
    /**
     * Checks if a timestamp is in a packetlog
     *
     * @param packetLog : The packetlog to search
     * @param timestamp : The timestamp to search for
     * @returns true if timestamp is present, false otherwise
     */
    hasTimestamp(packetLog, timestamp) {
        const element = packetLog.window.find(t => t === timestamp);
        return !!element;
    }
    /**
     * Removes a timestamp from a packet log
     *
     * @param packetLog : The packetlog from which the timestamp should be removed
     * @param timestamp : The timestamp to be removed
     * @returns true if timestamp was present in the log and removed, false otherwise
     */
    removeTimestamp(packetLog, timestamp) {
        const index = packetLog.window.indexOf(timestamp);
        if (index >= 0) {
            packetLog.window[index] = undefined;
            return true;
        }
        return false;
    }
    /**
     * Removes a timestamp from red and fec recovery windows.
     *
     * @param timestamp : The timestamp to be removed
     */
    removeFromRecoveryWindows(timestamp) {
        let removed = this.removeTimestamp(this.redRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredRed > 0)
                this.totalAudioPacketsRecoveredRed--;
        }
        removed = this.removeTimestamp(this.fecRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredFec > 0)
                this.totalAudioPacketsRecoveredFec--;
        }
    }
    /**
     * Converts the supplied argument to 32-bit unsigned integer
     */
    uint32WrapAround(num) {
        const mod = 4294967296; // 2^32
        let res = num;
        if (num >= mod) {
            res = num - mod;
        }
        else if (num < 0) {
            res = mod + num;
        }
        return res;
    }
    /**
     * Converts the supplied argument to 16-bit signed integer
     */
    int16(num) {
        return (num << 16) >> 16;
    }
    /**
     * Determines if an Opus packet is in CELT-only mode.
     *
     * @param packet Opus packet.
     * @returns \`true\` if the packet is in CELT-only mode.
     */
    opusPacketIsCeltOnly(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // Since CELT-only packets are represented using configurations 16 to 31, the highest 'config' bit will always be 1
        // for CELT-only packets.
        return !!(packet.getUint8(0) & 0x80);
    }
    /**
     * Gets the number of samples per frame from an Opus packet.
     *
     * @param packet Opus packet. This must contain at least one byte of data.
     * @param sampleRateHz 32-bit integer sampling rate in Hz. This must be a multiple of 400 or inaccurate results will
     *                     be returned.
     * @returns Number of samples per frame.
     */
    opusPacketGetSamplesPerFrame(packet, sampleRateHz) {
        // Sample rate must be a 32-bit integer.
        sampleRateHz = Math.round(sampleRateHz);
        sampleRateHz = Math.min(Math.max(sampleRateHz, -(Math.pow(2, 32))), Math.pow(2, 32) - 1);
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        let numSamples;
        let frameSizeOption;
        // Case for CELT-only packet.
        if (this.opusPacketIsCeltOnly(packet)) {
            // The lower 3 'config' bits indicate the frame size option.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            // The frame size options 0, 1, 2, 3 correspond to frame sizes of 2.5, 5, 10, 20 ms. Notice that the frame sizes
            // can be represented as (2.5 * 2^0), (2.5 * 2^1), (2.5 * 2^2), (2.5 * 2^3) ms. So, the number of samples can be
            // calculated as follows:
            // (sample/s) * (1s/1000ms) * (2.5ms) * 2^(frameSizeOption)
            // = (sample/s) * (1s/400) * 2^(frameSizeOption)
            // = (sample/s) * 2^(frameSizeOption) * (1s/400)
            numSamples = (sampleRateHz << frameSizeOption) / 400;
        }
        // Case for Hybrid packet. Since Hybrid packets are represented using configurations 12 to 15, bits 1 and 2 in the
        // above TOC byte diagram will both be 1.
        else if ((packet.getUint8(0) & 0x60) === 0x60) {
            // In the case of configuration 13 or 15, bit 4 in the above TOC byte diagram will be 1. Configurations 13 and 15
            // correspond to a 20ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (20ms)
            // = (sample/s) * (1s/50)
            //
            // In the case of configuration 12 or 14, bit 4 in the above TOC byte diagram will be 0. Configurations 12 and 14
            // correspond to a 10ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (10ms)
            // = (sample/s) * (1s/100)
            numSamples = packet.getUint8(0) & 0x08 ? sampleRateHz / 50 : sampleRateHz / 100;
        }
        // Case for SILK-only packet.
        else {
            // The lower 3 'config' bits indicate the frame size option for SILK-only packets.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            if (frameSizeOption === 3) {
                // Frame size option 3 corresponds to a frame size of 60ms, so the number of samples is calculated as follows:
                // (sample/s) * (1s/1000ms) * (60ms)
                // = (sample/s) * (60ms) * (1s/1000ms)
                numSamples = (sampleRateHz * 60) / 1000;
            }
            else {
                // The frame size options 0, 1, 2 correspond to frame sizes of 10, 20, 40 ms. Notice that the frame sizes can be
                // represented as (10 * 2^0), (10 * 2^1), (10 * 2^2) ms. So, the number of samples can be calculated as follows:
                // (sample/s) * (1s/1000ms) * (10ms) * 2^(frameSizeOption)
                // = (sample/s) * (1s/100) * 2^(frameSizeOption)
                // = (sample/s) * 2^(frameSizeOption) * (1s/100)
                numSamples = (sampleRateHz << frameSizeOption) / 100;
            }
        }
        return numSamples;
    }
    /**
     * Gets the number of SILK frames per Opus frame.
     *
     * @param packet Opus packet.
     * @returns Number of SILK frames per Opus frame.
     */
    opusNumSilkFrames(packet) {
        // For computing the frame length in ms, the sample rate is not important since it cancels out. We use 48 kHz, but
        // any valid sample rate would work.
        //
        // To calculate the length of a frame (with a 48kHz sample rate) in ms:
        // (samples/frame) * (1s/48000 samples) * (1000ms/s)
        // = (samples/frame) * (1000ms/48000 samples)
        // = (samples/frame) * (1ms/48 samples)
        let frameLengthMs = this.opusPacketGetSamplesPerFrame(packet, 48000) / 48;
        if (frameLengthMs < 10)
            frameLengthMs = 10;
        // The number of SILK frames per Opus frame is described in https://www.rfc-editor.org/rfc/rfc6716#section-4.2.2.
        switch (frameLengthMs) {
            case 10:
            case 20:
                return 1;
            case 40:
                return 2;
            case 60:
                return 3;
            // It is not possible to reach the default case since an Opus packet can only encode sizes of 2.5, 5, 10, 20, 40,
            // or 60 ms, so we ignore the default case for test coverage.
            /* istanbul ignore next */
            default:
                return 0;
        }
    }
    /**
     * Gets the number of channels from an Opus packet.
     *
     * @param packet Opus packet.
     * @returns Number of channels.
     */
    opusPacketGetNumChannels(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // The 's' bit indicates mono or stereo audio, with 0 indicating mono and 1 indicating stereo.
        return packet.getUint8(0) & 0x4 ? 2 : 1;
    }
    /**
     * Determine the size (in bytes) of an Opus frame.
     *
     * @param packet Opus packet.
     * @param byteOffset Offset (from the start of the packet) to the byte containing the size information.
     * @param remainingBytes Remaining number of bytes to parse from the Opus packet.
     * @param sizeBytes Variable to store the parsed frame size (in bytes).
     * @returns Number of bytes that were parsed to determine the frame size.
     */
    opusParseSize(packet, byteOffset, remainingBytes, sizeBytes) {
        // See https://www.rfc-editor.org/rfc/rfc6716#section-3.2.1 for an explanation of how frame size is represented.
        // If there are no remaining bytes to parse the size from, then the size cannot be determined.
        if (remainingBytes < 1) {
            sizeBytes[0] = -1;
            return -1;
        }
        // If the first byte is in the range 0...251, then this value is the size of the frame.
        else if (packet.getUint8(byteOffset) < 252) {
            sizeBytes[0] = packet.getUint8(byteOffset);
            return 1;
        }
        // If the first byte is in the range 252...255, a second byte is needed. If there is no second byte, then the size
        // cannot be determined.
        else if (remainingBytes < 2) {
            sizeBytes[0] = -1;
            return -1;
        }
        // The total size of the frame given two size bytes is:
        // (4 * secondSizeByte) + firstSizeByte
        else {
            sizeBytes[0] = 4 * packet.getUint8(byteOffset + 1) + packet.getUint8(byteOffset);
            return 2;
        }
    }
    /**
     * Parse binary data containing an Opus packet into one or more Opus frames.
     *
     * @param data Binary data containing an Opus packet to be parsed. The data should begin with the first byte (i.e the
     *             TOC byte) of an Opus packet. Note that the size of the data does not have to equal the size of the
     *             contained Opus packet.
     * @param lenBytes Size of the data (in bytes).
     * @param selfDelimited Indicates if the Opus packet is self-delimiting
     *                      (https://www.rfc-editor.org/rfc/rfc6716#appendix-B).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the data) to the first bytes of each
     *                     Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the data) to the first byte of the
     *                      payload.
     * @param packetLenBytes Optional variable to store the length of the Opus packet (in bytes).
     * @returns Number of Opus frames.
     */
    opusPacketParseImpl(data, lenBytes, selfDelimited, tocByte, frameOffsets, frameSizes, payloadOffset, packetLenBytes) {
        if (!frameSizes || lenBytes < 0)
            return this.OPUS_BAD_ARG;
        if (lenBytes === 0)
            return this.OPUS_INVALID_PACKET;
        // The number of Opus frames in the packet.
        let numFrames;
        // Intermediate storage for the number of bytes parsed to determine the size of a frame.
        let numBytesParsed;
        // The number of the padding bytes (excluding the padding count bytes) in the packet.
        let paddingBytes = 0;
        // Indicates whether CBR (constant bitrate) framing is used.
        let cbr = false;
        // The TOC (table of contents) byte (https://www.rfc-editor.org/rfc/rfc6716#section-3.1).
        const toc = data.getUint8(0);
        // Store the TOC byte.
        if (tocByte)
            tocByte[0] = toc;
        // The remaining number of bytes to parse from the packet. Note that the TOC byte has already been parsed, hence the
        // minus 1.
        let remainingBytes = lenBytes - 1;
        // This keeps track of where we are in the packet. This starts at 1 since the TOC byte has already been read.
        let byteOffset = 1;
        // The size of the last Opus frame in bytes.
        let lastSizeBytes = remainingBytes;
        // Read the \`c\` bits (i.e. code bits) from the TOC byte.
        switch (toc & 0x3) {
            // A code 0 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.2) has one frame.
            case 0:
                numFrames = 1;
                break;
            // A code 1 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.3) has two CBR (constant bitrate) frames.
            case 1:
                numFrames = 2;
                cbr = true;
                if (!selfDelimited) {
                    // Undelimited code 1 packets must be an even number of data bytes, otherwise the packet is invalid.
                    if (remainingBytes & 0x1)
                        return this.OPUS_INVALID_PACKET;
                    // The sizes of both frames are equal (i.e. half of the number of data bytes).
                    lastSizeBytes = remainingBytes / 2;
                    // If \`lastSizeBytes\` is too large, we will catch it later.
                    frameSizes[0][0] = lastSizeBytes;
                }
                break;
            // A code 2 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.4) has two VBR (variable bitrate) frames.
            case 2:
                numFrames = 2;
                numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[0]);
                remainingBytes -= numBytesParsed;
                // The parsed size of the first frame cannot be larger than the number of remaining bytes in the packet.
                if (frameSizes[0][0] < 0 || frameSizes[0][0] > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                byteOffset += numBytesParsed;
                // The size of the second frame is the remaining number of bytes after the first frame.
                lastSizeBytes = remainingBytes - frameSizes[0][0];
                break;
            // A code 3 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5) has multiple CBR/VBR frames (from 0 to
            // 120 ms).
            default:
                // Code 3 packets must have at least 2 bytes (i.e. at least 1 byte after the TOC byte).
                if (remainingBytes < 1)
                    return this.OPUS_INVALID_PACKET;
                // Frame count byte format:
                //  0
                //  0 1 2 3 4 5 6 7
                // +-+-+-+-+-+-+-+-+
                // |v|p|     M     |
                // +-+-+-+-+-+-+-+-+
                //
                // Read the frame count byte, which immediately follows the TOC byte.
                const frameCountByte = data.getUint8(byteOffset++);
                --remainingBytes;
                // Read the 'M' bits of the frame count byte, which encode the number of frames.
                numFrames = frameCountByte & 0x3f;
                // The number of frames in a code 3 packet must not be 0.
                if (numFrames <= 0)
                    return this.OPUS_INVALID_PACKET;
                const samplesPerFrame = this.opusPacketGetSamplesPerFrame(data, 48000);
                // A single frame can have at most 2880 samples, which happens in the case where 60ms of 48kHz audio is encoded
                // per frame. A code 3 packet cannot contain more than 120ms of audio, so the total number of samples cannot
                // exceed 2880 * 2 = 5760.
                if (samplesPerFrame * numFrames > 5760)
                    return this.OPUS_INVALID_PACKET;
                // Parse padding bytes if the 'p' bit is 1.
                if (frameCountByte & 0x40) {
                    let paddingCountByte;
                    let numPaddingBytes;
                    // Remove padding bytes (including padding count bytes) from the remaining byte count.
                    do {
                        // Sanity check that there are enough bytes to parse and remove the padding.
                        if (remainingBytes <= 0)
                            return this.OPUS_INVALID_PACKET;
                        // Get the next padding count byte.
                        paddingCountByte = data.getUint8(byteOffset++);
                        --remainingBytes;
                        // If the padding count byte has a value in the range 0...254, then the total size of the padding is the
                        // value in the padding count byte.
                        //
                        // If the padding count byte has value 255, then the total size of the padding is 254 plus the value in the
                        // next padding count byte. Therefore, keep reading padding count bytes while the value is 255.
                        numPaddingBytes = paddingCountByte === 255 ? 254 : paddingCountByte;
                        remainingBytes -= numPaddingBytes;
                        paddingBytes += numPaddingBytes;
                    } while (paddingCountByte === 255);
                }
                // Sanity check that the remaining number of bytes is not negative after removing the padding.
                if (remainingBytes < 0)
                    return this.OPUS_INVALID_PACKET;
                // Read the 'v' bit (i.e. VBR bit).
                cbr = !(frameCountByte & 0x80);
                // VBR case
                if (!cbr) {
                    lastSizeBytes = remainingBytes;
                    // Let M be the number of frames. There will be M - 1 frame length indicators (which can be 1 or 2 bytes)
                    // corresponding to the lengths of frames 0 to M - 2. The size of the last frame (i.e. frame M - 1) is the
                    // number of data bytes after the end of frame M - 2 and before the start of the padding bytes.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[i]);
                        remainingBytes -= numBytesParsed;
                        // The remaining number of data bytes must be enough to contain each frame.
                        if (frameSizes[i][0] < 0 || frameSizes[i][0] > remainingBytes) {
                            return this.OPUS_INVALID_PACKET;
                        }
                        byteOffset += numBytesParsed;
                        lastSizeBytes -= numBytesParsed + frameSizes[i][0];
                    }
                    // Sanity check that the size of the last frame is not negative.
                    if (lastSizeBytes < 0)
                        return this.OPUS_INVALID_PACKET;
                }
                // CBR case
                else if (!selfDelimited) {
                    // The size of each frame is the number of data bytes divided by the number of frames.
                    lastSizeBytes = Math.trunc(remainingBytes / numFrames);
                    // The number of data bytes must be a non-negative integer multiple of the number of frames.
                    if (lastSizeBytes * numFrames !== remainingBytes)
                        return this.OPUS_INVALID_PACKET;
                    // All frames have equal size in the undelimited CBR case.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        frameSizes[i][0] = lastSizeBytes;
                    }
                }
        }
        // Self-delimited framing uses an extra 1 or 2 bytes, immediately preceding the data bytes, to indicate either the
        // size of the last frame (for code 0, code 2, and VBR code 3 packets) or the size of all the frames (for code 1 and
        // CBR code 3 packets). See https://www.rfc-editor.org/rfc/rfc6716#appendix-B.
        if (selfDelimited) {
            // The extra frame size byte(s) will always indicate the size of the last frame.
            numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[numFrames - 1]);
            remainingBytes -= numBytesParsed;
            // There must be enough data bytes for the last frame.
            if (frameSizes[numFrames - 1][0] < 0 || frameSizes[numFrames - 1][0] > remainingBytes) {
                return this.OPUS_INVALID_PACKET;
            }
            byteOffset += numBytesParsed;
            // For CBR packets, the sizes of all the frames are equal.
            if (cbr) {
                // There must be enough data bytes for all the frames.
                if (frameSizes[numFrames - 1][0] * numFrames > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                for (let i = 0; i < numFrames - 1; ++i) {
                    frameSizes[i][0] = frameSizes[numFrames - 1][0];
                }
            }
            // At this point, \`lastSizeBytes\` contains the size of the last frame plus the size of the extra frame size
            // byte(s), so sanity check that \`lastSizeBytes\` is the upper bound for the size of the last frame.
            else if (!(numBytesParsed + frameSizes[numFrames - 1][0] <= lastSizeBytes)) {
                return this.OPUS_INVALID_PACKET;
            }
        }
        // Undelimited case
        else {
            // Because the size of the last packet is not encoded explicitly, it is possible that the size of the last packet
            // (or of all the packets, for the CBR case) is larger than maximum frame size.
            if (lastSizeBytes > this.OPUS_MAX_FRAME_SIZE_BYTES)
                return this.OPUS_INVALID_PACKET;
            frameSizes[numFrames - 1][0] = lastSizeBytes;
        }
        // Store the offset to the start of the payload.
        if (payloadOffset)
            payloadOffset[0] = byteOffset;
        // Store the offsets to the start of each frame.
        for (let i = 0; i < numFrames; ++i) {
            if (frameOffsets)
                frameOffsets[i][0] = byteOffset;
            byteOffset += frameSizes[i][0];
        }
        // Store the length of the Opus packet.
        if (packetLenBytes)
            packetLenBytes[0] = byteOffset + paddingBytes;
        return numFrames;
    }
    /**
     * Parse a single undelimited Opus packet into one or more Opus frames.
     *
     * @param packet Opus packet to be parsed.
     * @param lenBytes Size of the packet (in bytes).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the packet) to the first bytes of
     *                     each Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the packet) to the first byte of the
     *                      payload.
     * @returns Number of Opus frames.
     */
    opusPacketParse(packet, lenBytes, tocByte, frameOffsets, frameSizes, payloadOffset) {
        return this.opusPacketParseImpl(packet, lenBytes, 
        /* selfDelimited */ false, tocByte, frameOffsets, frameSizes, payloadOffset, null);
    }
    /**
     * This function returns the SILK VAD (voice activity detection) information encoded in the Opus packet. For CELT-only
     * packets that do not have VAD information, it returns -1.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  0: no frame had the VAD flag set.
     *           1: at least one frame had the VAD flag set.
     *          -1: VAD status could not be determined.
     */
    opusPacketHasVoiceActivity(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return 0;
        // In CELT-only mode, we can not determine whether there is VAD.
        if (this.opusPacketIsCeltOnly(packet))
            return -1;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        // It is not possible for \`opusNumSilkFrames()\` to return 0, so we ignore the next sanity check for test coverage.
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return -1;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        // VAD status cannot be determined for invalid packets.
        if (numOpusFrames < 0)
            return -1;
        // Iterate over all Opus frames, which may contain multiple SILK frames, to determine the VAD status.
        for (let i = 0; i < numOpusFrames; ++i) {
            if (opusFrameSizes[i][0] < 1)
                continue;
            // LP layer header bits format (https://www.rfc-editor.org/rfc/rfc6716#section-4.2.3):
            //
            // Mono case:
            // +-----------------+----------+
            // | 1 to 3 VAD bits | LBRR bit |
            // +-----------------+----------+
            //
            // Stereo case:
            // +---------------------+--------------+----------------------+---------------+
            // | 1 to 3 mid VAD bits | mid LBRR bit | 1 to 3 side VAD bits | side LBRR bit |
            // +---------------------+--------------+----------------------+---------------+
            // The upper 1 to 3 bits (dependent on the number of SILK frames) of the LP layer contain VAD bits. If any of
            // these VAD bits are 1, then voice activity is present.
            if (packet.getUint8(opusFrameOffsets[i][0]) >> (8 - numSilkFrames))
                return 1;
            // In the stereo case, there is a second set of 1 to 3 VAD bits, so also check these VAD bits.
            const channels = this.opusPacketGetNumChannels(packet);
            if (channels === 2 &&
                (packet.getUint8(opusFrameOffsets[i][0]) << (numSilkFrames + 1)) >> (8 - numSilkFrames)) {
                return 1;
            }
        }
        // No voice activity was detected.
        return 0;
    }
    /**
     * This method is based on Definition of the Opus Audio Codec
     * (https://tools.ietf.org/html/rfc6716). Basically, this method is based on
     * parsing the LP layer of an Opus packet, particularly the LBRR flag.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  true: packet has fec encoding about previous packet.
     *           false: no fec encoding present.
     */
    opusPacketHasFec(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return false;
        // In CELT-only mode, packets should not have FEC.
        if (this.opusPacketIsCeltOnly(packet))
            return false;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        if (numOpusFrames < 0)
            return false;
        /* istanbul ignore next */
        if (opusFrameSizes[0][0] <= 1)
            return false;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return false;
        const channels = this.opusPacketGetNumChannels(packet);
        /* istanbul ignore next */
        if (channels !== 1 && channels !== 2)
            return false;
        // A frame starts with the LP layer. The LP layer begins with two to eight
        // header bits.These consist of one VAD bit per SILK frame (up to 3),
        // followed by a single flag indicating the presence of LBRR frames.
        // For a stereo packet, these first flags correspond to the mid channel, and
        // a second set of flags is included for the side channel. Because these are
        // the first symbols decoded by the range coder and because they are coded
        // as binary values with uniform probability, they can be extracted directly
        // from the most significant bits of the first byte of compressed data.
        for (let i = 0; i < channels; i++) {
            if (packet.getUint8(opusFrameOffsets[0][0]) & (0x80 >> ((i + 1) * (numSilkFrames + 1) - 1)))
                return true;
        }
        return false;
    }
}
RedundantAudioEncoder.shouldLog = true;
RedundantAudioEncoder.shouldReportStats = true;
RedundantAudioEncoder.initializeWorker();
`;l.default=c},9649641385:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(5824864644));let v=n(class extends m.default{static nextTick(s){setTimeout(s,0)}constructor(){super(0)}},"AsyncScheduler");l.default=v},9877075638:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{start(m){this.stop(),this.timer=setInterval(m,this.intervalMs)}stop(){this.timer!==void 0&&(clearInterval(this.timer),this.timer=void 0)}running(){return this.timer!==void 0}constructor(m){this.intervalMs=m}},"IntervalScheduler");l.default=c},5824864644:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{start(m){this.stop(),this.timer=setTimeout(()=>{clearTimeout(this.timer),m()},this.timeoutMs)}stop(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)}constructor(m){this.timeoutMs=m,this.timer=null}},"TimeoutScheduler");l.default=c},182939685:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(9489740826)),v=u(c(6818892922)),g=u(c(8804723777));let s=n(class xi{clone(){return new xi(this.sdp)}static isRTPCandidate(i){const e=/candidate[:](\S+) (\d+)/g.exec(i);return!(e===null||e[2]!=="1")}static linesToSDP(i){return new xi(i.join(xi.CRLF))}static candidateTypeFromString(i){switch(i){case m.default.Host:return m.default.Host;case m.default.ServerReflexive:return m.default.ServerReflexive;case m.default.PeerReflexive:return m.default.PeerReflexive;case m.default.Relay:return m.default.Relay}return null}static candidateType(i){const e=/a[=]candidate[:].* typ ([a-z]+) /g.exec(i);return e===null?null:xi.candidateTypeFromString(e[1])}static mediaType(i){const e=/m=(audio|video)/g.exec(i);if(e!==null)return e[1]}static mid(i){if(i.includes("a=mid:"))return i.replace(/^(a=mid:)/,"")}static direction(i){const e=/a=(sendrecv|sendonly|recvonly|inactive)/g.exec(i);if(e!==null)return e[1]}static splitLines(i){return i.trim().split(`
`).map(e=>e.trim())}static splitSections(i){return i.split(`
m=`).map((t,r)=>(r>0?"m="+t:t).trim()+xi.CRLF)}static findActiveCameraSection(i){let e=0,t=!1;for(const r of i){if(/^m=video/.test(r)&&(r.indexOf("sendrecv")>-1||r.indexOf("sendonly")===-1&&r.indexOf("recvonly")===-1&&r.indexOf("inactive")===-1)){t=!0;break}e++}return t===!1&&(e=-1),e}static extractSSRCsFromFIDGroupLine(i){return/^a=ssrc-group:FID\s(.+)/.exec(i)[1]}static matchPrefix(i,e){return xi.splitLines(i).filter(t=>t.indexOf(e)===0)}lines(){return this.sdp.split(xi.CRLF)}hasVideo(){return/^m=video/gm.exec(this.sdp)!==null}hasCandidates(){return/a[=]candidate[:]/g.exec(this.sdp)!==null}hasCandidatesForAllMLines(){return!(this.sdp.indexOf("c=IN IP4 0.0.0.0")>-1)}withoutCandidateType(i){return xi.linesToSDP(this.lines().filter(e=>xi.candidateType(e)!==i))}withoutServerReflexiveCandidates(){return this.withoutCandidateType(m.default.ServerReflexive)}withAudioMaxAverageBitrate(i){if(!i)return this.clone();i=Math.trunc(Math.min(Math.max(i,xi.rfc7587LowestBitrate),xi.rfc7587HighestBitrate));const e=this.lines(),t=xi.findOpusFmtpAttributes(e),r=xi.updateOpusFmtpAttributes(e,t,[`maxaveragebitrate=${i}`]);return xi.linesToSDP(r)}withStereoAudio(){const i=this.lines(),e=xi.findOpusFmtpAttributes(i),t=xi.updateOpusFmtpAttributes(i,e,["stereo=1","sprop-stereo=1"]);return xi.linesToSDP(t)}static findOpusFmtpAttributes(i){const e=/^a=rtpmap:\s*(\d+)\s+opus\/48000/;let t=!1;const r=[];for(const o of i)if(o.startsWith("m=audio")&&(r.push(null),t=!0),o.startsWith("m=video")&&(t=!1),t){const f=e.exec(o);f!==null&&(r[r.length-1]=`a=fmtp:${f[1]} `)}return r}static updateOpusFmtpAttributes(i,e,t){const r=[];let o=0,f=null;for(const h of i)if(h.startsWith("m=audio")&&(f=e[o],o++),h.startsWith("m=video")&&(f=null),f&&h.startsWith(f)){const p=h.slice(f.length).split(";"),d=[];for(const y of p)t.findIndex(b=>b.startsWith(y.split("=")[0]))<0&&d.push(y);for(const y of t)d.push(y);r.push(f+d.join(";"))}else r.push(h);return r}withUnifiedPlanFormat(){let i=this.sdp;return i.includes("mozilla")?this.clone():(i=i.replace("o=-","o=mozilla-chrome"),new xi(i))}getUniqueRtpHeaderExtensionId(i){const e=[];for(const r of i)if(/^a=extmap:/.test(r.trim())){const f=+r.split("a=extmap:")[1].split(" ")[0];e.includes(f)||e.push(f)}e.sort((r,o)=>r-o);let t=0;for(const r of e){if(r-t>1)return t+1;t=r}return t===14?-1:t+1}withVideoLayersAllocationRtpHeaderExtension(i){return this.withRtpHeaderExtension(i,xi.videoLayersAllocationRtpHeaderExtensionUrl)}withDependencyDescriptorRtpHeaderExtension(i){return this.withRtpHeaderExtension(i,xi.dependencyDescriptorRtpHeaderExtensionUrl)}withoutDependencyDescriptorRtpHeaderExtension(){const i=xi.splitLines(this.sdp).filter(e=>!e.includes(xi.dependencyDescriptorRtpHeaderExtensionUrl));return new xi(i.join(xi.CRLF)+xi.CRLF)}withRtpHeaderExtension(i,e){const t=i?i.getRtpHeaderExtensionId(e):-1,r=t===-1?this.getUniqueRtpHeaderExtensionId(xi.splitLines(this.sdp)):t,o=xi.splitSections(this.sdp),f=[];for(let p of o){if(/^m=video/.test(p)&&xi.getRtpHeaderExtensionIdInSection(p,e)===-1){const d=xi.splitLines(p),y=[];if(r===-1||this.hasRtpHeaderExtensionId(r)){f.push(p);continue}for(const S of d)if(y.push(S),/^a=sendrecv/.test(S.trim())){const b="a=extmap:"+r+" "+e;y.push(b)}p=y.join(xi.CRLF)+xi.CRLF}else if(t!==-1&&/^m=video/.test(p)&&xi.getRtpHeaderExtensionIdInSection(p,e)!==t){const d=xi.splitLines(p),y=[];for(const S of d){if(/^a=extmap:/.test(S.trim())&&S.split("a=extmap:")[1].split(" ")[1]===e){if(!this.hasRtpHeaderExtensionId(t)){const _="a=extmap:"+t+" "+e;y.push(_)}continue}y.push(S)}p=y.join(xi.CRLF)+xi.CRLF}f.push(p)}const h=f.join("");return new xi(h)}ssrcForVideoSendingSection(){const i=this.sdp,e=xi.splitSections(i);if(e.length<2)return"";const t=xi.findActiveCameraSection(e);if(t===-1)return"";const r=xi.matchPrefix(e[t],"a=ssrc-group:FID ");if(r.length<1)return"";const o=xi.extractSSRCsFromFIDGroupLine(r[0]),[f]=o.split(" ").map(h=>parseInt(h,10));return f.toString()}videoSendSectionHasDifferentSSRC(i){const e=this.ssrcForVideoSendingSection(),t=i.ssrcForVideoSendingSection();if(e===""||t==="")return!1;const r=parseInt(e,10),o=parseInt(t,10);return r!==o}removeH264SupportFromSendSection(){const i=this.sdp,e=xi.splitSections(i),t=xi.findActiveCameraSection(e);if(t===-1)return new xi(this.sdp);const r=e[t],o=xi.splitLines(r),f=[],h=new Map;o.forEach(S=>{if(/^a=rtpmap:/.test(S)){const b=/^a=rtpmap:([0-9]+)\s/.exec(S);b&&S.toLowerCase().includes("h264")&&f.push(parseInt(b[1],10))}if(/^a=fmtp:/.test(S)){const b=/^a=fmtp:([0-9]+) apt=([0-9]+)/.exec(S);if(b&&b.length===3){const _=parseInt(b[1],10),C=parseInt(b[2],10);h.has(C)?h.get(C).push(_):h.set(C,[_])}}});const p=new Set;for(const S of f){p.add(S);const b=h.get(S);if(b)for(const _ of b)p.add(_)}if(f.length>0){const S=o[0].split(" ");o[0]=S.filter(b=>!p.has(parseInt(b))).join(" ")}const d=o.filter(S=>{if(!S.includes("rtpmap")&&!S.includes("rtcp-fb")&&!S.includes("fmtp"))return!0;for(const b of p)if(S.includes(b.toString()))return!1;return!0});e[t]=d.join(xi.CRLF)+xi.CRLF;const y=e.join("");return new xi(y)}mediaSections(){const i=xi.splitSections(this.sdp);if(i.length<2)return[];const e=[];for(let t=1;t<i.length;t++){const r=new v.default,o=xi.splitLines(i[t]);for(const f of o){const h=xi.mediaType(f);if(h!==void 0){r.mediaType=h;continue}const p=xi.direction(f);if(p!==void 0){r.direction=p;continue}const d=xi.mid(f);if(d!==void 0){r.mid=d;continue}}e.push(r)}return e}static getRtpHeaderExtensionIdInSection(i,e){const t=xi.splitLines(i);for(const r of t)if(/^a=extmap:/.test(r.trim())){const o=r.split("a=extmap:")[1].split(" "),f=+o[0];if(o[1]===e)return f}return-1}getRtpHeaderExtensionId(i){const e=xi.splitSections(this.sdp);for(const t of e)if(/^m=video/.test(t)){const r=xi.getRtpHeaderExtensionIdInSection(t,i);if(r!==-1)return r}return-1}hasRtpHeaderExtensionId(i){const e=xi.splitLines(this.sdp);for(const t of e)if(/^a=extmap:/.test(t.trim())&&+t.split("a=extmap:")[1].split(" ")[0]===i)return!0;return!1}withVideoSendCodecPreferences(i){const e=this.sdp,t=xi.splitSections(e),r=xi.findActiveCameraSection(t);if(r===-1)return new xi(this.sdp);t[r]=this.sectionWithCodecPreferences(t[r],i);const o=t.join("");return new xi(o)}sectionWithCodecPreferences(i,e){const t=new Map,r=xi.splitLines(i);r.forEach(p=>{if(!p.startsWith("a=rtpmap:"))return;const d=/^a=rtpmap:(\d+)\s/.exec(p);if(!d)return;const y=d[1];for(const S of e){if(!p.includes(`${S.codecName}/${S.codecCapability.clockRate}`))continue;let b=!1;if(S.codecCapability.sdpFmtpLine!==void 0){let _=!1;for(const C of r){if(S.fmtpLineMatches(C,parseInt(y))){b=!0;break}_||(_=C.startsWith(`a=fmtp:${y} profile-id=`))}S.equals(g.default.vp9Profile0())&&!_&&(b=!0)}else b=!0;if(b){t.set(y,S);break}}});const o=new Set(t.keys()),f=r[0].split(" ").filter(p=>!o.has(p)),h=Array.from(t.entries()).sort((p,d)=>{let[y,S]=p,[b,_]=d;const C=e.indexOf(S),w=e.indexOf(_);return C-w}).map(p=>{let[d,y]=p;return d});return f.splice(3,0,...h),r[0]=f.join(" "),r.join(xi.CRLF)+xi.CRLF}highestPriorityVideoSendCodec(){const i=this.prioritizedSendVideoCodecCapabilities();return i.length>0?i[0]:void 0}prioritizedSendVideoCodecCapabilities(){const i=this.sdp,e=xi.splitSections(i),t=xi.findActiveCameraSection(e);if(t===-1)return[];const r=xi.splitLines(e[t]),o=r[0].split(" ");return o.length<4?[]:o.slice(3).map(p=>this.videoCodecCapabilityForPayloadType(r,p)).filter(p=>p!==void 0&&["VP8","H264","VP9","AV1"].includes(p.codecName))}videoCodecCapabilityForPayloadType(i,e){let t,r,o;for(const f of i){const h=/^a=rtpmap:([0-9]+)\s/.exec(f);if(h&&h[1]===e){const d=f.split(" ")[1].split("/");d.length>=2&&(t=d[0],r=d[1])}f.startsWith(`a=fmtp:${e} `)&&(o=f.split(" ")[1])}if(t!==void 0)return new g.default(t,{clockRate:parseInt(r),mimeType:`video/${t}`,sdpFmtpLine:o})}getAudioPayloadTypes(){const i=new Map,e=this.sdp,t=xi.splitSections(e);return i.set("opus",xi.findAudioPayloadType("opus",t)),i.set("red",xi.findAudioPayloadType("red",t)),i}static findAudioPayloadType(i,e){const t=`a=rtpmap:\\s*(\\d+)\\s+${i}\\/48000`,r=new RegExp(t);for(const o of e)if(/^m=audio/.test(o)){const f=r.exec(o);if(f!==null)return Number(f[1])}return 0}withStartingVideoSendBitrate(i){const e=xi.splitSections(this.sdp),t=xi.findActiveCameraSection(e);if(t===-1)return this;const r=xi.splitLines(e[t]),o=[];for(const h of r)if(/^a=fmtp:\d*/.test(h)){const p=h+`;x-google-start-bitrate=${i*1e3}`;o.push(p)}else o.push(h);e[t]=o.join(xi.CRLF)+xi.CRLF;const f=e.join("");return new xi(f)}constructor(i){this.sdp=i}},"SDP");l.default=s,s.CRLF=`\r
`,s.rfc7587LowestBitrate=6e3,s.rfc7587HighestBitrate=51e4,s.dependencyDescriptorRtpHeaderExtensionUrl="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension",s.videoLayersAllocationRtpHeaderExtensionUrl="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00"},9489740826:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SDPCandidateType=void 0;var c;(function(u){u.Host="host",u.ServerReflexive="srflx",u.PeerReflexive="prflx",u.Relay="relay"})(c=l.SDPCandidateType||(l.SDPCandidateType={})),l.default=c},6818892922:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"SDPMediaSection");l.default=c},8804723777:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=c(4136617125);let m=n(class Fa{equals(g){return g!==void 0&&this.codecName===g.codecName&&this.codecCapability.mimeType===g.codecCapability.mimeType&&this.codecCapability.clockRate===g.codecCapability.clockRate&&this.codecCapability.sdpFmtpLine===g.codecCapability.sdpFmtpLine}fmtpLineMatches(g,s){const a=this.codecCapability.sdpFmtpLine;if(!a)return!1;if(this.codecName==="H264"){const i=/profile-level-id=([0-9a-f]{4})[0-9a-f]{2}/i,e=a.replace(i,"profile-level-id=$1");return g.replace(i,"profile-level-id=$1").startsWith(`a=fmtp:${s} ${e}`)}return g.startsWith(`a=fmtp:${s} ${a}`)}static vp8(){return new Fa("VP8",{clockRate:9e4,mimeType:"video/VP8"})}static h264BaselineProfile(){return new Fa("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f"})}static h264ConstrainedBaselineProfile(){return new Fa("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f"})}static h264MainProfile(){return new Fa("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=4d001f"})}static h264HighProfile(){return new Fa("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=64001f"})}static h264ConstrainedHighProfile(){return new Fa("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=640c1f"})}static h264(){return Fa.h264ConstrainedBaselineProfile()}static vp9Profile0(){return new Fa("VP9",{clockRate:9e4,mimeType:"video/VP9",sdpFmtpLine:"profile-id=0"})}static vp9(){return Fa.vp9Profile0()}static av1Main(){return new Fa("AV1",{clockRate:9e4,mimeType:"video/AV1"})}static av1(){return Fa.av1Main()}static fromSignaled(g){switch(g){case u.SdkVideoCodecCapability.VP8:return Fa.vp8();case u.SdkVideoCodecCapability.H264_BASELINE_PROFILE:return Fa.h264BaselineProfile();case u.SdkVideoCodecCapability.H264_CONSTRAINED_BASELINE_PROFILE:return Fa.h264ConstrainedBaselineProfile();case u.SdkVideoCodecCapability.H264_MAIN_PROFILE:return Fa.h264MainProfile();case u.SdkVideoCodecCapability.H264_HIGH_PROFILE:return Fa.h264HighProfile();case u.SdkVideoCodecCapability.H264_CONSTRAINED_HIGH_PROFILE:return Fa.h264ConstrainedHighProfile();case u.SdkVideoCodecCapability.VP9_PROFILE_0:return Fa.vp9Profile0();case u.SdkVideoCodecCapability.AV1_MAIN_PROFILE:return Fa.av1Main();default:return}}constructor(g,s){this.codecName=g,this.codecCapability=s}},"VideoCodecCapability");l.default=m},3475297719:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=c(9385915920);let m=n(class Pf{compress(g,s){if(s.length>0){const e=Math.min(s.length,Pf.MAX_DICTIONARY_SIZE);s=s.slice(0,e)}const a={memLevel:Pf.Z_MEM_LEVEL,dictionary:s};return u.deflateRaw(g,a)}decompress(g,s){if(s.length>0){const e=Math.min(s.length,Pf.MAX_DICTIONARY_SIZE);s=s.slice(0,e)}const a={to:"string",dictionary:s,chunkSize:4096};let i="";try{i=u.inflateRaw(g,a)}catch(e){this.logger.error(`failed to decompress the string with error: [${e}]`)}return i}constructor(g){this.logger=g}},"ZLIBTextCompressor");l.default=m,m.Z_MEM_LEVEL=9,m.MAX_DICTIONARY_SIZE=31744},6900744364:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=c(3795683579),m=c(7012117651),v=c(2092275410),g=c(583806999);let s=n(class{perform(i,e){const t=this.currentState;if(t===v.SessionStateControllerState.NotConnected&&i===u.SessionStateControllerAction.Connect)this.transition(v.SessionStateControllerState.Connecting,i);else if(t===v.SessionStateControllerState.Connecting&&i===u.SessionStateControllerAction.Fail)this.transition(v.SessionStateControllerState.Disconnecting,i);else if(t===v.SessionStateControllerState.Connecting&&i===u.SessionStateControllerAction.FinishConnecting)this.transition(v.SessionStateControllerState.Connected,i);else if(t===v.SessionStateControllerState.Connected&&i===u.SessionStateControllerAction.Disconnect)this.transition(v.SessionStateControllerState.Disconnecting,i);else if(t===v.SessionStateControllerState.Connected&&i===u.SessionStateControllerAction.Reconnect)this.transition(v.SessionStateControllerState.Connecting,i);else if(t===v.SessionStateControllerState.Connected&&i===u.SessionStateControllerAction.Fail)this.transition(v.SessionStateControllerState.Disconnecting,i);else if(t===v.SessionStateControllerState.Connected&&i===u.SessionStateControllerAction.Update)this.transition(v.SessionStateControllerState.Updating,i);else if(t===v.SessionStateControllerState.Updating&&i===u.SessionStateControllerAction.Fail)this.transition(v.SessionStateControllerState.Disconnecting,i);else if(t===v.SessionStateControllerState.Updating&&i===u.SessionStateControllerAction.FinishUpdating)this.transition(v.SessionStateControllerState.Connected,i);else if(t===v.SessionStateControllerState.Disconnecting&&i===u.SessionStateControllerAction.FinishDisconnecting)this.transition(v.SessionStateControllerState.NotConnected,i);else return this.canDefer(i)?(this.logger.info(`deferring transition from ${v.SessionStateControllerState[this.currentState]} with ${u.SessionStateControllerAction[i]}`),this.deferAction(i,e),g.SessionStateControllerTransitionResult.DeferredTransition):(this.logger.warn(`no transition found from ${v.SessionStateControllerState[this.currentState]} with ${u.SessionStateControllerAction[i]}`),g.SessionStateControllerTransitionResult.NoTransitionAvailable);try{e()}catch(r){return this.logger.error(`error during state ${v.SessionStateControllerState[this.currentState]} with action ${u.SessionStateControllerAction[i]}: ${r}`),this.logger.info(`rolling back transition to ${v.SessionStateControllerState[t]}`),this.currentState=t,g.SessionStateControllerTransitionResult.TransitionFailed}return this.performDeferredAction(),g.SessionStateControllerTransitionResult.Transitioned}state(){return this.currentState}transition(i,e){this.logger.info(`transitioning from ${v.SessionStateControllerState[this.currentState]} to ${v.SessionStateControllerState[i]} with ${u.SessionStateControllerAction[e]}`),this.currentState=i}deferPriority(i){switch(i){case u.SessionStateControllerAction.Disconnect:return m.SessionStateControllerDeferPriority.VeryHigh;case u.SessionStateControllerAction.Fail:return m.SessionStateControllerDeferPriority.High;case u.SessionStateControllerAction.Reconnect:return m.SessionStateControllerDeferPriority.Medium;case u.SessionStateControllerAction.Update:return m.SessionStateControllerDeferPriority.Low;default:return m.SessionStateControllerDeferPriority.DoNotDefer}}deferAction(i,e){this.deferredAction!==null&&this.deferPriority(this.deferredAction)>this.deferPriority(i)||(this.deferredAction=i,this.deferredWork=e)}canDefer(i){return this.deferPriority(i)!==m.SessionStateControllerDeferPriority.DoNotDefer&&(this.currentState===v.SessionStateControllerState.Connecting||this.currentState===v.SessionStateControllerState.Updating)}performDeferredAction(){if(!this.deferredAction)return;const i=this.deferredAction,e=this.deferredWork;this.deferredAction=null,this.deferredWork=null,this.logger.info(`performing deferred action ${u.SessionStateControllerAction[i]}`),this.perform(i,e)!==g.SessionStateControllerTransitionResult.Transitioned&&this.logger.info(`unable to perform deferred action ${u.SessionStateControllerAction[i]} in state ${v.SessionStateControllerState[this.currentState]}`)}constructor(i){this.logger=i,this.currentState=v.SessionStateControllerState.NotConnected,this.deferredAction=null,this.deferredWork=null}},"DefaultSessionStateController");l.default=s},3795683579:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerAction=void 0;var c;(function(u){u[u.Connect=0]="Connect",u[u.FinishConnecting=1]="FinishConnecting",u[u.Update=2]="Update",u[u.FinishUpdating=3]="FinishUpdating",u[u.Reconnect=4]="Reconnect",u[u.Disconnect=5]="Disconnect",u[u.Fail=6]="Fail",u[u.FinishDisconnecting=7]="FinishDisconnecting"})(c=l.SessionStateControllerAction||(l.SessionStateControllerAction={})),l.default=c},7012117651:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerDeferPriority=void 0;var c;(function(u){u[u.DoNotDefer=0]="DoNotDefer",u[u.Low=1]="Low",u[u.Medium=2]="Medium",u[u.High=3]="High",u[u.VeryHigh=4]="VeryHigh"})(c=l.SessionStateControllerDeferPriority||(l.SessionStateControllerDeferPriority={})),l.default=c},2092275410:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerState=void 0;var c;(function(u){u[u.NotConnected=0]="NotConnected",u[u.Connecting=1]="Connecting",u[u.Connected=2]="Connected",u[u.Updating=3]="Updating",u[u.Disconnecting=4]="Disconnecting"})(c=l.SessionStateControllerState||(l.SessionStateControllerState={})),l.default=c},583806999:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerTransitionResult=void 0;var c;(function(u){u[u.Transitioned=0]="Transitioned",u[u.NoTransitionAvailable=1]="NoTransitionAvailable",u[u.DeferredTransition=2]="DeferredTransition",u[u.TransitionFailed=3]="TransitionFailed"})(c=l.SessionStateControllerTransitionResult||(l.SessionStateControllerTransitionResult={})),l.default=c},7570945794:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(5546774952)),v=u(c(5824864644)),g=c(4136617125),s=c(5685319565),a=u(c(6885109343)),i=u(c(4829581265)),e=u(c(5638612424)),t=c(5393388022),r=u(c(1578897375)),o=u(c(7969706599));let f=n(class td{registerObserver(p){this.logger.debug(()=>"registering signaling client observer"),this.observerQueue.add(p)}removeObserver(p){this.logger.debug(()=>"removing signaling client observer"),this.observerQueue.delete(p)}openConnection(p){this.logger.info("adding connection request to queue: "+p.url()),this.connectionRequestQueue.push(p),this.closeConnection()}pingPong(p){this.logger.debug(()=>"sending ping");const d=g.SdkSignalFrame.create();return d.type=g.SdkSignalFrame.Type.PING_PONG,d.pingPong=p,this.sendMessage(d),d.timestampMs}join(p){this.logger.info("sending join");const d=g.SdkJoinFrame.create();d.protocolVersion=2,d.flags=g.SdkJoinFlags.HAS_STREAM_UPDATE;const y=new m.default,S={platformName:y.name(),platformVersion:y.version(),clientSource:a.default.sdkName,chimeSdkVersion:a.default.sdkVersion,clientUtcOffset:s.getFormattedOffset(new Date().getTimezoneOffset())};if(p.applicationMetadata){const{appName:_,appVersion:C}=p.applicationMetadata;S.appName=_,S.appVersion=C}d.clientDetails=g.SdkClientDetails.create(S),d.audioSessionId=this.audioSessionId,d.wantsCompressedSdp=td.CLIENT_SUPPORTS_COMPRESSION,d.disablePeriodicKeyframeRequestOnContentSender=p.disablePeriodicKeyframeRequestOnContentSender,d.serverSideNetworkAdaption=t.convertServerSideNetworkAdaptionEnumToSignaled(p.serverSideNetworkAdaption),d.supportedServerSideNetworkAdaptions=p.supportedServerSideNetworkAdaptions.map(t.convertServerSideNetworkAdaptionEnumToSignaled),d.wantsAllTemporalLayersInIndex=p.wantsAllTemporalLayersInIndex;const b=g.SdkSignalFrame.create();b.type=g.SdkSignalFrame.Type.JOIN,b.join=d,this.sendMessage(b)}subscribe(p){const d=g.SdkSubscribeFrame.create();if(d.sendStreams=[],d.sdpOffer=p.sdpOffer,p.connectionTypeHasVideo&&(d.receiveStreamIds=p.receiveStreamIds),p.audioHost&&(d.audioCheckin=p.audioCheckin,d.audioHost=p.audioHost,d.audioMuted=p.audioMuted,!p.audioCheckin)){const S=g.SdkStreamDescriptor.create();S.mediaType=g.SdkStreamMediaType.AUDIO,S.trackLabel="AmazonChimeExpressAudio",S.attendeeId=p.attendeeId,S.streamId=1,S.groupId=1,S.framerate=15,S.maxBitrateKbps=600,S.avgBitrateBps=4e5,d.sendStreams.push(S)}if(d.compressedSdpOffer=p.compressedSdpOffer,d.duplex=g.SdkStreamServiceType.RX,p.localVideoEnabled){d.duplex=g.SdkStreamServiceType.DUPLEX;for(let S=0;S<p.videoStreamDescriptions.length;S++){const b=p.videoStreamDescriptions[S].clone();b.attendeeId=p.attendeeId,d.sendStreams.push(b.toStreamDescriptor())}}p.videoSubscriptionConfiguration.length>0&&(d.videoSubscriptionConfiguration=p.videoSubscriptionConfiguration.map(this.convertSignalingClientVideoSubscriptionConfiguration));const y=g.SdkSignalFrame.create();y.type=g.SdkSignalFrame.Type.SUBSCRIBE,y.sub=d,this.sendMessage(y)}remoteVideoUpdate(p,d){const y=g.SdkRemoteVideoUpdateFrame.create();y.addedOrUpdatedVideoSubscriptions=p.map(this.convertSignalingClientVideoSubscriptionConfiguration),y.removedVideoSubscriptionMids=d;const S=g.SdkSignalFrame.create();S.type=g.SdkSignalFrame.Type.REMOTE_VIDEO_UPDATE,S.remoteVideoUpdate=y,this.sendMessage(S)}convertSignalingClientVideoSubscriptionConfiguration(p){const d=new g.SdkVideoSubscriptionConfiguration;switch(d.mid=p.mid,d.attendeeId=p.attendeeId,d.streamId=p.streamId,d.groupId=p.groupId,d.priority=p.priority,d.targetBitrateKbps=p.targetBitrateKbps,p.qualityAdaptationPreference){case i.default.Balanced:d.qualityAdaptationPreference=g.SdkVideoQualityAdaptationPreference.BALANCED;break;case i.default.MaintainFramerate:d.qualityAdaptationPreference=g.SdkVideoQualityAdaptationPreference.MAINTAIN_FRAMERATE;break;case i.default.MaintainResolution:d.qualityAdaptationPreference=g.SdkVideoQualityAdaptationPreference.MAINTAIN_RESOLUTION;break;default:d.qualityAdaptationPreference=g.SdkVideoQualityAdaptationPreference.BALANCED}return d}leave(){const p=g.SdkSignalFrame.create();p.type=g.SdkSignalFrame.Type.LEAVE,p.leave=g.SdkLeaveFrame.create(),this.sendMessage(p),this.logger.debug(()=>"sent leave")}sendClientMetrics(p){const d=g.SdkSignalFrame.create();d.type=g.SdkSignalFrame.Type.CLIENT_METRIC,d.clientMetric=p,this.sendMessage(d)}sendDataMessage(p){const d=g.SdkSignalFrame.create();d.type=g.SdkSignalFrame.Type.DATA_MESSAGE,d.dataMessage=p,this.sendMessage(d)}closeConnection(){var p,d;if(this.webSocket.readyState()!==e.default.None&&this.webSocket.readyState()!==e.default.Closed){this.isClosing=!0,this.sendEvent(new r.default(this,o.default.WebSocketClosing,null));const y=new v.default(td.CLOSE_EVENT_TIMEOUT_MS),S=n(b=>{var _,C;(C=(_=this.webSocket).removeEventListener)===null||C===void 0||C.call(_,"close",S),y.stop(),this.closeEventHandler(b)},"handler");(d=(p=this.webSocket).removeEventListener)===null||d===void 0||d.call(p,"close",this.closeEventHandler),this.webSocket.addEventListener("close",S),y.start(()=>{S(new CloseEvent("close",{wasClean:!1,code:1006,reason:"",bubbles:!1}))}),this.webSocket.close(),this.deactivatePageUnloadHandler()}else this.logger.info("no existing signaling client connection needs closing"),this.serviceConnectionRequestQueue()}ready(){return this.webSocket.readyState()===e.default.Open&&!this.isClosing&&this.wasOpened}mute(p){const d=g.SdkSignalFrame.create();d.type=g.SdkSignalFrame.Type.AUDIO_CONTROL;const y=g.SdkAudioControlFrame.create();y.muted=p,d.audioControl=y,this.sendMessage(d)}pause(p){const d=g.SdkSignalFrame.create();d.type=g.SdkSignalFrame.Type.PAUSE,d.pause=g.SdkPauseResumeFrame.create(),d.pause.streamIds=p,this.sendMessage(d)}resume(p){const d=g.SdkSignalFrame.create();d.type=g.SdkSignalFrame.Type.RESUME,d.pause=g.SdkPauseResumeFrame.create(),d.pause.streamIds=p,this.sendMessage(d)}resetConnection(){this.webSocket.destroy(),this.wasOpened=!1}sendMessage(p){p.timestampMs=Date.now(),this.logger.debug(()=>`sending: ${JSON.stringify(p)}`);const d=this.prependWithFrameTypeRTC(g.SdkSignalFrame.encode(p).finish());if(this.ready()){if(!this.webSocket.send(d)){this.sendEvent(new r.default(this,o.default.WebSocketSendMessageFailure,null));return}this.sendEvent(new r.default(this,o.default.WebSocketSentMessage,null))}else this.sendEvent(new r.default(this,o.default.WebSocketSkippedMessage,null))}receiveMessage(p){let d;try{d=g.SdkSignalFrame.decode(p)}catch{this.logger.info(`failed to decode: ${p}`),this.sendEvent(new r.default(this,o.default.ProtocolDecodeFailure,null));return}this.logger.debug(()=>`received: ${JSON.stringify(d)}`),this.webSocket.readyState()===e.default.Open?this.sendEvent(new r.default(this,o.default.ReceivedSignalFrame,d)):this.logger.info(`skipping notification of message since WebSocket is not open: ${JSON.stringify(d)}`)}stripFrameTypeRTC(p){const d=p[0];return d!==td.FRAME_TYPE_RTC&&d!==2&&this.logger.warn(`expected FrameTypeRTC for message but got ${d}`),p.slice(1)}prependWithFrameTypeRTC(p){const d=new Uint8Array(p.length+1);return d[0]=td.FRAME_TYPE_RTC,d.set(p,1),d}serviceConnectionRequestQueue(){if(this.connectionRequestQueue.length===0){this.logger.info("no connection requests to service");return}const p=this.connectionRequestQueue.shift();this.logger.info(`opening connection to ${p.url()}`),this.isClosing=!1,this.webSocket.create(p.url(),p.protocols()),this.setUpEventListeners(),this.sendEvent(new r.default(this,o.default.WebSocketConnecting,null))}sendEvent(p){switch(p.type){case o.default.WebSocketMessage:case o.default.ReceivedSignalFrame:case o.default.WebSocketSentMessage:this.logger.debug(()=>`notifying event: ${o.default[p.type]}`);break;case o.default.WebSocketSkippedMessage:this.logger.debug(()=>`notifying event: ${o.default[p.type]}, websocket state=${e.default[this.webSocket.readyState()]}`);break;default:this.logger.info(`notifying event: ${o.default[p.type]}`);break}for(const d of this.observerQueue)d.handleSignalingClientEvent(p)}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.activatePageUnloadHandler(),this.wasOpened=!0,this.sendEvent(new r.default(this,o.default.WebSocketOpen,null))}),this.webSocket.addEventListener("message",p=>{this.sendEvent(new r.default(this,o.default.WebSocketMessage,null)),this.receiveMessage(this.stripFrameTypeRTC(new Uint8Array(p.data)))}),this.webSocket.addEventListener("close",this.closeEventHandler),this.webSocket.addEventListener("error",()=>{if(this.isClosing&&!this.wasOpened){this.logger.info("ignoring error closing signaling while connecting");return}this.wasOpened?(this.logger.error("received error while connected"),this.sendEvent(new r.default(this,o.default.WebSocketError,null))):(this.logger.error("failed to connect"),this.sendEvent(new r.default(this,o.default.WebSocketFailed,null)))})}activatePageUnloadHandler(){this.unloadHandler=()=>{this.leave()};const p=c.g;p.window&&p.window.addEventListener&&window.addEventListener("unload",this.unloadHandler)}deactivatePageUnloadHandler(){const p=c.g;p.window&&p.window.removeEventListener&&window.removeEventListener("unload",this.unloadHandler),this.unloadHandler=null}generateNewAudioSessionId(){const p=new Uint32Array(1);return s.getRandomValues(p),p[0]}promoteToPrimaryMeeting(p){const d=g.SdkMeetingSessionCredentials.create();d.attendeeId=p.attendeeId,d.externalUserId=p.externalUserId,d.joinToken=p.joinToken;const y=g.SdkPrimaryMeetingJoinFrame.create();y.credentials=d;const S=g.SdkSignalFrame.create();S.type=g.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN,S.primaryMeetingJoin=y,this.sendMessage(S)}demoteFromPrimaryMeeting(){const p=g.SdkPrimaryMeetingLeaveFrame.create(),d=g.SdkSignalFrame.create();d.type=g.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE,d.primaryMeetingLeave=p,this.sendMessage(d)}constructor(p,d){this.webSocket=p,this.logger=d,this.unloadHandler=null,this.closeEventHandler=y=>{this.deactivatePageUnloadHandler(),this.resetConnection(),this.sendEvent(new r.default(this,o.default.WebSocketClosed,null,y.code,y.reason)),this.serviceConnectionRequestQueue()},this.observerQueue=new Set,this.connectionRequestQueue=[],this.resetConnection(),this.logger.debug(()=>"signaling client init"),this.audioSessionId=this.generateNewAudioSessionId()}},"DefaultSignalingClient");l.default=f,f.FRAME_TYPE_RTC=5,f.CLOSE_EVENT_TIMEOUT_MS=2e3,f.CLIENT_SUPPORTS_COMPRESSION=!0},5393388022:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertServerSideNetworkAdaptionEnumToSignaled=l.convertServerSideNetworkAdaptionEnumFromSignaled=l.serverSideNetworkAdaptionIsNoneOrDefault=l.ServerSideNetworkAdaption=void 0;const u=c(4136617125);var m;(function(a){a[a.Default=0]="Default",a[a.None=1]="None",a[a.BandwidthProbing=2]="BandwidthProbing",a[a.BandwidthProbingAndRemoteVideoQualityAdaption=3]="BandwidthProbingAndRemoteVideoQualityAdaption"})(m=l.ServerSideNetworkAdaption||(l.ServerSideNetworkAdaption={})),l.default=m;function v(a){return a===m.None||a===m.Default}n(v,"serverSideNetworkAdaptionIsNoneOrDefault"),l.serverSideNetworkAdaptionIsNoneOrDefault=v;function g(a){switch(a){case u.SdkServerSideNetworkAdaption.DEFAULT:return m.Default;case u.SdkServerSideNetworkAdaption.NONE:return m.None;case u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING:return m.BandwidthProbing;case u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION:return m.BandwidthProbingAndRemoteVideoQualityAdaption}}n(g,"convertServerSideNetworkAdaptionEnumFromSignaled"),l.convertServerSideNetworkAdaptionEnumFromSignaled=g;function s(a){switch(a){case m.Default:return u.SdkServerSideNetworkAdaption.DEFAULT;case m.None:return u.SdkServerSideNetworkAdaption.NONE;case m.BandwidthProbing:return u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING;case m.BandwidthProbingAndRemoteVideoQualityAdaption:return u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION}}n(s,"convertServerSideNetworkAdaptionEnumToSignaled"),l.convertServerSideNetworkAdaptionEnumToSignaled=s},7263318766:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{url(){return this.signalingURL+"?X-Chime-Control-Protocol-Version=3&X-Amzn-Chime-Send-Close-On-Error=1"}protocols(){return["_aws_wt_session",this.joinToken]}constructor(m,v){this.signalingURL=m,this.joinToken=v}},"SignalingClientConnectionRequest");l.default=c},1578897375:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(7969706599));let v=n(class{isConnectionTerminated(){switch(this.type){case m.default.WebSocketFailed:case m.default.WebSocketError:case m.default.WebSocketClosing:case m.default.WebSocketClosed:return!0;default:return!1}}constructor(s,a,i,e,t){this.client=s,this.type=a,this.message=i,this.closeCode=e,this.closeReason=t,this.timestampMs=Date.now()}},"SignalingClientEvent");l.default=v},7969706599:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SignalingClientEventType=void 0;var c;(function(u){u[u.WebSocketConnecting=0]="WebSocketConnecting",u[u.WebSocketOpen=1]="WebSocketOpen",u[u.WebSocketError=2]="WebSocketError",u[u.WebSocketClosing=3]="WebSocketClosing",u[u.WebSocketClosed=4]="WebSocketClosed",u[u.WebSocketFailed=5]="WebSocketFailed",u[u.WebSocketMessage=6]="WebSocketMessage",u[u.WebSocketSendMessageFailure=7]="WebSocketSendMessageFailure",u[u.WebSocketSentMessage=8]="WebSocketSentMessage",u[u.ProtocolDecodeFailure=9]="ProtocolDecodeFailure",u[u.ReceivedSignalFrame=10]="ReceivedSignalFrame",u[u.WebSocketSkippedMessage=11]="WebSocketSkippedMessage"})(c=l.SignalingClientEventType||(l.SignalingClientEventType={})),l.default=c},3867485289:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(5393388022));let v=n(class{constructor(s){this.applicationMetadata=s,this.serverSideNetworkAdaption=m.default.Default,this.supportedServerSideNetworkAdaptions=[],this.wantsAllTemporalLayersInIndex=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1}},"SignalingClientJoin");l.default=v},3735795291:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(m,v,g,s,a,i,e,t,r,o){this.attendeeId=m,this.sdpOffer=v,this.audioHost=g,this.audioMuted=s,this.audioCheckin=a,this.receiveStreamIds=i,this.localVideoEnabled=e,this.videoStreamDescriptions=t,this.connectionTypeHasVideo=r,this.compressedSdpOffer=o,this.videoSubscriptionConfiguration=[]}},"SignalingClientSubscribe");l.default=c},4804743313:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{equals(m){return m!==void 0&&this.mid===m.mid&&this.attendeeId===m.attendeeId&&this.streamId===m.streamId&&this.groupId===m.groupId&&this.priority===m.priority&&this.targetBitrateKbps===m.targetBitrateKbps&&this.qualityAdaptationPreference===m.qualityAdaptationPreference}},"SignalingClientVideoSubscriptionConfiguration");l.default=c},4136617125:(H,l,c)=>{"use strict";var u=c(8203499834),m=u.Reader,v=u.Writer,g=u.util,s=u.roots.default||(u.roots.default={});s.SdkSignalFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkSignalFrame"),a.prototype.timestampMs=g.Long?g.Long.fromBits(0,0,!0):0,a.prototype.type=1,a.prototype.error=null,a.prototype.join=null,a.prototype.joinack=null,a.prototype.sub=null,a.prototype.suback=null,a.prototype.index=null,a.prototype.pause=null,a.prototype.leave=null,a.prototype.leaveAck=null,a.prototype.bitrates=null,a.prototype.audioControl=null,a.prototype.audioMetadata=null,a.prototype.audioStreamIdInfo=null,a.prototype.pingPong=null,a.prototype.audioStatus=null,a.prototype.clientMetric=null,a.prototype.dataMessage=null,a.prototype.remoteVideoUpdate=null,a.prototype.primaryMeetingJoin=null,a.prototype.primaryMeetingJoinAck=null,a.prototype.primaryMeetingLeave=null,a.prototype.notification=null,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),t.uint32(8).uint64(e.timestampMs),t.uint32(16).int32(e.type),e.error!=null&&Object.hasOwnProperty.call(e,"error")&&s.SdkErrorFrame.encode(e.error,t.uint32(26).fork()).ldelim(),e.join!=null&&Object.hasOwnProperty.call(e,"join")&&s.SdkJoinFrame.encode(e.join,t.uint32(34).fork()).ldelim(),e.joinack!=null&&Object.hasOwnProperty.call(e,"joinack")&&s.SdkJoinAckFrame.encode(e.joinack,t.uint32(42).fork()).ldelim(),e.sub!=null&&Object.hasOwnProperty.call(e,"sub")&&s.SdkSubscribeFrame.encode(e.sub,t.uint32(50).fork()).ldelim(),e.suback!=null&&Object.hasOwnProperty.call(e,"suback")&&s.SdkSubscribeAckFrame.encode(e.suback,t.uint32(58).fork()).ldelim(),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&s.SdkIndexFrame.encode(e.index,t.uint32(66).fork()).ldelim(),e.pause!=null&&Object.hasOwnProperty.call(e,"pause")&&s.SdkPauseResumeFrame.encode(e.pause,t.uint32(82).fork()).ldelim(),e.leave!=null&&Object.hasOwnProperty.call(e,"leave")&&s.SdkLeaveFrame.encode(e.leave,t.uint32(90).fork()).ldelim(),e.leaveAck!=null&&Object.hasOwnProperty.call(e,"leaveAck")&&s.SdkLeaveAckFrame.encode(e.leaveAck,t.uint32(98).fork()).ldelim(),e.bitrates!=null&&Object.hasOwnProperty.call(e,"bitrates")&&s.SdkBitrateFrame.encode(e.bitrates,t.uint32(114).fork()).ldelim(),e.audioControl!=null&&Object.hasOwnProperty.call(e,"audioControl")&&s.SdkAudioControlFrame.encode(e.audioControl,t.uint32(138).fork()).ldelim(),e.audioMetadata!=null&&Object.hasOwnProperty.call(e,"audioMetadata")&&s.SdkAudioMetadataFrame.encode(e.audioMetadata,t.uint32(146).fork()).ldelim(),e.audioStreamIdInfo!=null&&Object.hasOwnProperty.call(e,"audioStreamIdInfo")&&s.SdkAudioStreamIdInfoFrame.encode(e.audioStreamIdInfo,t.uint32(154).fork()).ldelim(),e.pingPong!=null&&Object.hasOwnProperty.call(e,"pingPong")&&s.SdkPingPongFrame.encode(e.pingPong,t.uint32(162).fork()).ldelim(),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&s.SdkAudioStatusFrame.encode(e.audioStatus,t.uint32(170).fork()).ldelim(),e.clientMetric!=null&&Object.hasOwnProperty.call(e,"clientMetric")&&s.SdkClientMetricFrame.encode(e.clientMetric,t.uint32(178).fork()).ldelim(),e.dataMessage!=null&&Object.hasOwnProperty.call(e,"dataMessage")&&s.SdkDataMessageFrame.encode(e.dataMessage,t.uint32(186).fork()).ldelim(),e.remoteVideoUpdate!=null&&Object.hasOwnProperty.call(e,"remoteVideoUpdate")&&s.SdkRemoteVideoUpdateFrame.encode(e.remoteVideoUpdate,t.uint32(202).fork()).ldelim(),e.primaryMeetingJoin!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoin")&&s.SdkPrimaryMeetingJoinFrame.encode(e.primaryMeetingJoin,t.uint32(210).fork()).ldelim(),e.primaryMeetingJoinAck!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoinAck")&&s.SdkPrimaryMeetingJoinAckFrame.encode(e.primaryMeetingJoinAck,t.uint32(218).fork()).ldelim(),e.primaryMeetingLeave!=null&&Object.hasOwnProperty.call(e,"primaryMeetingLeave")&&s.SdkPrimaryMeetingLeaveFrame.encode(e.primaryMeetingLeave,t.uint32(226).fork()).ldelim(),e.notification!=null&&Object.hasOwnProperty.call(e,"notification")&&s.SdkNotificationFrame.encode(e.notification,t.uint32(282).fork()).ldelim(),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkSignalFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.timestampMs=e.uint64();break}case 2:{o.type=e.int32();break}case 3:{o.error=s.SdkErrorFrame.decode(e,e.uint32());break}case 4:{o.join=s.SdkJoinFrame.decode(e,e.uint32());break}case 5:{o.joinack=s.SdkJoinAckFrame.decode(e,e.uint32());break}case 6:{o.sub=s.SdkSubscribeFrame.decode(e,e.uint32());break}case 7:{o.suback=s.SdkSubscribeAckFrame.decode(e,e.uint32());break}case 8:{o.index=s.SdkIndexFrame.decode(e,e.uint32());break}case 10:{o.pause=s.SdkPauseResumeFrame.decode(e,e.uint32());break}case 11:{o.leave=s.SdkLeaveFrame.decode(e,e.uint32());break}case 12:{o.leaveAck=s.SdkLeaveAckFrame.decode(e,e.uint32());break}case 14:{o.bitrates=s.SdkBitrateFrame.decode(e,e.uint32());break}case 17:{o.audioControl=s.SdkAudioControlFrame.decode(e,e.uint32());break}case 18:{o.audioMetadata=s.SdkAudioMetadataFrame.decode(e,e.uint32());break}case 19:{o.audioStreamIdInfo=s.SdkAudioStreamIdInfoFrame.decode(e,e.uint32());break}case 20:{o.pingPong=s.SdkPingPongFrame.decode(e,e.uint32());break}case 21:{o.audioStatus=s.SdkAudioStatusFrame.decode(e,e.uint32());break}case 22:{o.clientMetric=s.SdkClientMetricFrame.decode(e,e.uint32());break}case 23:{o.dataMessage=s.SdkDataMessageFrame.decode(e,e.uint32());break}case 25:{o.remoteVideoUpdate=s.SdkRemoteVideoUpdateFrame.decode(e,e.uint32());break}case 26:{o.primaryMeetingJoin=s.SdkPrimaryMeetingJoinFrame.decode(e,e.uint32());break}case 27:{o.primaryMeetingJoinAck=s.SdkPrimaryMeetingJoinAckFrame.decode(e,e.uint32());break}case 28:{o.primaryMeetingLeave=s.SdkPrimaryMeetingLeaveFrame.decode(e,e.uint32());break}case 35:{o.notification=s.SdkNotificationFrame.decode(e,e.uint32());break}default:e.skipType(f&7);break}}if(!o.hasOwnProperty("timestampMs"))throw g.ProtocolError("missing required 'timestampMs'",{instance:o});if(!o.hasOwnProperty("type"))throw g.ProtocolError("missing required 'type'",{instance:o});return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(!g.isInteger(e.timestampMs)&&!(e.timestampMs&&g.isInteger(e.timestampMs.low)&&g.isInteger(e.timestampMs.high)))return"timestampMs: integer|Long expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 7:case 8:case 9:case 10:case 13:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 34:break}if(e.error!=null&&e.hasOwnProperty("error")){var t=s.SdkErrorFrame.verify(e.error);if(t)return"error."+t}if(e.join!=null&&e.hasOwnProperty("join")){var t=s.SdkJoinFrame.verify(e.join);if(t)return"join."+t}if(e.joinack!=null&&e.hasOwnProperty("joinack")){var t=s.SdkJoinAckFrame.verify(e.joinack);if(t)return"joinack."+t}if(e.sub!=null&&e.hasOwnProperty("sub")){var t=s.SdkSubscribeFrame.verify(e.sub);if(t)return"sub."+t}if(e.suback!=null&&e.hasOwnProperty("suback")){var t=s.SdkSubscribeAckFrame.verify(e.suback);if(t)return"suback."+t}if(e.index!=null&&e.hasOwnProperty("index")){var t=s.SdkIndexFrame.verify(e.index);if(t)return"index."+t}if(e.pause!=null&&e.hasOwnProperty("pause")){var t=s.SdkPauseResumeFrame.verify(e.pause);if(t)return"pause."+t}if(e.leave!=null&&e.hasOwnProperty("leave")){var t=s.SdkLeaveFrame.verify(e.leave);if(t)return"leave."+t}if(e.leaveAck!=null&&e.hasOwnProperty("leaveAck")){var t=s.SdkLeaveAckFrame.verify(e.leaveAck);if(t)return"leaveAck."+t}if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){var t=s.SdkBitrateFrame.verify(e.bitrates);if(t)return"bitrates."+t}if(e.audioControl!=null&&e.hasOwnProperty("audioControl")){var t=s.SdkAudioControlFrame.verify(e.audioControl);if(t)return"audioControl."+t}if(e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")){var t=s.SdkAudioMetadataFrame.verify(e.audioMetadata);if(t)return"audioMetadata."+t}if(e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")){var t=s.SdkAudioStreamIdInfoFrame.verify(e.audioStreamIdInfo);if(t)return"audioStreamIdInfo."+t}if(e.pingPong!=null&&e.hasOwnProperty("pingPong")){var t=s.SdkPingPongFrame.verify(e.pingPong);if(t)return"pingPong."+t}if(e.audioStatus!=null&&e.hasOwnProperty("audioStatus")){var t=s.SdkAudioStatusFrame.verify(e.audioStatus);if(t)return"audioStatus."+t}if(e.clientMetric!=null&&e.hasOwnProperty("clientMetric")){var t=s.SdkClientMetricFrame.verify(e.clientMetric);if(t)return"clientMetric."+t}if(e.dataMessage!=null&&e.hasOwnProperty("dataMessage")){var t=s.SdkDataMessageFrame.verify(e.dataMessage);if(t)return"dataMessage."+t}if(e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")){var t=s.SdkRemoteVideoUpdateFrame.verify(e.remoteVideoUpdate);if(t)return"remoteVideoUpdate."+t}if(e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")){var t=s.SdkPrimaryMeetingJoinFrame.verify(e.primaryMeetingJoin);if(t)return"primaryMeetingJoin."+t}if(e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")){var t=s.SdkPrimaryMeetingJoinAckFrame.verify(e.primaryMeetingJoinAck);if(t)return"primaryMeetingJoinAck."+t}if(e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")){var t=s.SdkPrimaryMeetingLeaveFrame.verify(e.primaryMeetingLeave);if(t)return"primaryMeetingLeave."+t}if(e.notification!=null&&e.hasOwnProperty("notification")){var t=s.SdkNotificationFrame.verify(e.notification);if(t)return"notification."+t}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkSignalFrame)return e;var t=new s.SdkSignalFrame;switch(e.timestampMs!=null&&(g.Long?(t.timestampMs=g.Long.fromValue(e.timestampMs)).unsigned=!0:typeof e.timestampMs=="string"?t.timestampMs=parseInt(e.timestampMs,10):typeof e.timestampMs=="number"?t.timestampMs=e.timestampMs:typeof e.timestampMs=="object"&&(t.timestampMs=new g.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0))),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"JOIN":case 1:t.type=1;break;case"JOIN_ACK":case 2:t.type=2;break;case"SUBSCRIBE":case 3:t.type=3;break;case"SUBSCRIBE_ACK":case 4:t.type=4;break;case"INDEX":case 5:t.type=5;break;case"PAUSE":case 7:t.type=7;break;case"RESUME":case 8:t.type=8;break;case"LEAVE":case 9:t.type=9;break;case"LEAVE_ACK":case 10:t.type=10;break;case"BITRATES":case 13:t.type=13;break;case"AUDIO_CONTROL":case 16:t.type=16;break;case"AUDIO_METADATA":case 17:t.type=17;break;case"AUDIO_STREAM_ID_INFO":case 18:t.type=18;break;case"PING_PONG":case 19:t.type=19;break;case"AUDIO_STATUS":case 20:t.type=20;break;case"CLIENT_METRIC":case 21:t.type=21;break;case"DATA_MESSAGE":case 22:t.type=22;break;case"REMOTE_VIDEO_UPDATE":case 24:t.type=24;break;case"PRIMARY_MEETING_JOIN":case 25:t.type=25;break;case"PRIMARY_MEETING_JOIN_ACK":case 26:t.type=26;break;case"PRIMARY_MEETING_LEAVE":case 27:t.type=27;break;case"NOTIFICATION":case 34:t.type=34;break}if(e.error!=null){if(typeof e.error!="object")throw TypeError(".SdkSignalFrame.error: object expected");t.error=s.SdkErrorFrame.fromObject(e.error)}if(e.join!=null){if(typeof e.join!="object")throw TypeError(".SdkSignalFrame.join: object expected");t.join=s.SdkJoinFrame.fromObject(e.join)}if(e.joinack!=null){if(typeof e.joinack!="object")throw TypeError(".SdkSignalFrame.joinack: object expected");t.joinack=s.SdkJoinAckFrame.fromObject(e.joinack)}if(e.sub!=null){if(typeof e.sub!="object")throw TypeError(".SdkSignalFrame.sub: object expected");t.sub=s.SdkSubscribeFrame.fromObject(e.sub)}if(e.suback!=null){if(typeof e.suback!="object")throw TypeError(".SdkSignalFrame.suback: object expected");t.suback=s.SdkSubscribeAckFrame.fromObject(e.suback)}if(e.index!=null){if(typeof e.index!="object")throw TypeError(".SdkSignalFrame.index: object expected");t.index=s.SdkIndexFrame.fromObject(e.index)}if(e.pause!=null){if(typeof e.pause!="object")throw TypeError(".SdkSignalFrame.pause: object expected");t.pause=s.SdkPauseResumeFrame.fromObject(e.pause)}if(e.leave!=null){if(typeof e.leave!="object")throw TypeError(".SdkSignalFrame.leave: object expected");t.leave=s.SdkLeaveFrame.fromObject(e.leave)}if(e.leaveAck!=null){if(typeof e.leaveAck!="object")throw TypeError(".SdkSignalFrame.leaveAck: object expected");t.leaveAck=s.SdkLeaveAckFrame.fromObject(e.leaveAck)}if(e.bitrates!=null){if(typeof e.bitrates!="object")throw TypeError(".SdkSignalFrame.bitrates: object expected");t.bitrates=s.SdkBitrateFrame.fromObject(e.bitrates)}if(e.audioControl!=null){if(typeof e.audioControl!="object")throw TypeError(".SdkSignalFrame.audioControl: object expected");t.audioControl=s.SdkAudioControlFrame.fromObject(e.audioControl)}if(e.audioMetadata!=null){if(typeof e.audioMetadata!="object")throw TypeError(".SdkSignalFrame.audioMetadata: object expected");t.audioMetadata=s.SdkAudioMetadataFrame.fromObject(e.audioMetadata)}if(e.audioStreamIdInfo!=null){if(typeof e.audioStreamIdInfo!="object")throw TypeError(".SdkSignalFrame.audioStreamIdInfo: object expected");t.audioStreamIdInfo=s.SdkAudioStreamIdInfoFrame.fromObject(e.audioStreamIdInfo)}if(e.pingPong!=null){if(typeof e.pingPong!="object")throw TypeError(".SdkSignalFrame.pingPong: object expected");t.pingPong=s.SdkPingPongFrame.fromObject(e.pingPong)}if(e.audioStatus!=null){if(typeof e.audioStatus!="object")throw TypeError(".SdkSignalFrame.audioStatus: object expected");t.audioStatus=s.SdkAudioStatusFrame.fromObject(e.audioStatus)}if(e.clientMetric!=null){if(typeof e.clientMetric!="object")throw TypeError(".SdkSignalFrame.clientMetric: object expected");t.clientMetric=s.SdkClientMetricFrame.fromObject(e.clientMetric)}if(e.dataMessage!=null){if(typeof e.dataMessage!="object")throw TypeError(".SdkSignalFrame.dataMessage: object expected");t.dataMessage=s.SdkDataMessageFrame.fromObject(e.dataMessage)}if(e.remoteVideoUpdate!=null){if(typeof e.remoteVideoUpdate!="object")throw TypeError(".SdkSignalFrame.remoteVideoUpdate: object expected");t.remoteVideoUpdate=s.SdkRemoteVideoUpdateFrame.fromObject(e.remoteVideoUpdate)}if(e.primaryMeetingJoin!=null){if(typeof e.primaryMeetingJoin!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoin: object expected");t.primaryMeetingJoin=s.SdkPrimaryMeetingJoinFrame.fromObject(e.primaryMeetingJoin)}if(e.primaryMeetingJoinAck!=null){if(typeof e.primaryMeetingJoinAck!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoinAck: object expected");t.primaryMeetingJoinAck=s.SdkPrimaryMeetingJoinAckFrame.fromObject(e.primaryMeetingJoinAck)}if(e.primaryMeetingLeave!=null){if(typeof e.primaryMeetingLeave!="object")throw TypeError(".SdkSignalFrame.primaryMeetingLeave: object expected");t.primaryMeetingLeave=s.SdkPrimaryMeetingLeaveFrame.fromObject(e.primaryMeetingLeave)}if(e.notification!=null){if(typeof e.notification!="object")throw TypeError(".SdkSignalFrame.notification: object expected");t.notification=s.SdkNotificationFrame.fromObject(e.notification)}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if(t.defaults){if(g.Long){var o=new g.Long(0,0,!0);r.timestampMs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.timestampMs=t.longs===String?"0":0;r.type=t.enums===String?"JOIN":1,r.error=null,r.join=null,r.joinack=null,r.sub=null,r.suback=null,r.index=null,r.pause=null,r.leave=null,r.leaveAck=null,r.bitrates=null,r.audioControl=null,r.audioMetadata=null,r.audioStreamIdInfo=null,r.pingPong=null,r.audioStatus=null,r.clientMetric=null,r.dataMessage=null,r.remoteVideoUpdate=null,r.primaryMeetingJoin=null,r.primaryMeetingJoinAck=null,r.primaryMeetingLeave=null,r.notification=null}return e.timestampMs!=null&&e.hasOwnProperty("timestampMs")&&(typeof e.timestampMs=="number"?r.timestampMs=t.longs===String?String(e.timestampMs):e.timestampMs:r.timestampMs=t.longs===String?g.Long.prototype.toString.call(e.timestampMs):t.longs===Number?new g.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0):e.timestampMs),e.type!=null&&e.hasOwnProperty("type")&&(r.type=t.enums===String?s.SdkSignalFrame.Type[e.type]===void 0?e.type:s.SdkSignalFrame.Type[e.type]:e.type),e.error!=null&&e.hasOwnProperty("error")&&(r.error=s.SdkErrorFrame.toObject(e.error,t)),e.join!=null&&e.hasOwnProperty("join")&&(r.join=s.SdkJoinFrame.toObject(e.join,t)),e.joinack!=null&&e.hasOwnProperty("joinack")&&(r.joinack=s.SdkJoinAckFrame.toObject(e.joinack,t)),e.sub!=null&&e.hasOwnProperty("sub")&&(r.sub=s.SdkSubscribeFrame.toObject(e.sub,t)),e.suback!=null&&e.hasOwnProperty("suback")&&(r.suback=s.SdkSubscribeAckFrame.toObject(e.suback,t)),e.index!=null&&e.hasOwnProperty("index")&&(r.index=s.SdkIndexFrame.toObject(e.index,t)),e.pause!=null&&e.hasOwnProperty("pause")&&(r.pause=s.SdkPauseResumeFrame.toObject(e.pause,t)),e.leave!=null&&e.hasOwnProperty("leave")&&(r.leave=s.SdkLeaveFrame.toObject(e.leave,t)),e.leaveAck!=null&&e.hasOwnProperty("leaveAck")&&(r.leaveAck=s.SdkLeaveAckFrame.toObject(e.leaveAck,t)),e.bitrates!=null&&e.hasOwnProperty("bitrates")&&(r.bitrates=s.SdkBitrateFrame.toObject(e.bitrates,t)),e.audioControl!=null&&e.hasOwnProperty("audioControl")&&(r.audioControl=s.SdkAudioControlFrame.toObject(e.audioControl,t)),e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")&&(r.audioMetadata=s.SdkAudioMetadataFrame.toObject(e.audioMetadata,t)),e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")&&(r.audioStreamIdInfo=s.SdkAudioStreamIdInfoFrame.toObject(e.audioStreamIdInfo,t)),e.pingPong!=null&&e.hasOwnProperty("pingPong")&&(r.pingPong=s.SdkPingPongFrame.toObject(e.pingPong,t)),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(r.audioStatus=s.SdkAudioStatusFrame.toObject(e.audioStatus,t)),e.clientMetric!=null&&e.hasOwnProperty("clientMetric")&&(r.clientMetric=s.SdkClientMetricFrame.toObject(e.clientMetric,t)),e.dataMessage!=null&&e.hasOwnProperty("dataMessage")&&(r.dataMessage=s.SdkDataMessageFrame.toObject(e.dataMessage,t)),e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")&&(r.remoteVideoUpdate=s.SdkRemoteVideoUpdateFrame.toObject(e.remoteVideoUpdate,t)),e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")&&(r.primaryMeetingJoin=s.SdkPrimaryMeetingJoinFrame.toObject(e.primaryMeetingJoin,t)),e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")&&(r.primaryMeetingJoinAck=s.SdkPrimaryMeetingJoinAckFrame.toObject(e.primaryMeetingJoinAck,t)),e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")&&(r.primaryMeetingLeave=s.SdkPrimaryMeetingLeaveFrame.toObject(e.primaryMeetingLeave,t)),e.notification!=null&&e.hasOwnProperty("notification")&&(r.notification=s.SdkNotificationFrame.toObject(e.notification,t)),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSignalFrame"},"getTypeUrl"),a.Type=function(){var i={},e=Object.create(i);return e[i[1]="JOIN"]=1,e[i[2]="JOIN_ACK"]=2,e[i[3]="SUBSCRIBE"]=3,e[i[4]="SUBSCRIBE_ACK"]=4,e[i[5]="INDEX"]=5,e[i[7]="PAUSE"]=7,e[i[8]="RESUME"]=8,e[i[9]="LEAVE"]=9,e[i[10]="LEAVE_ACK"]=10,e[i[13]="BITRATES"]=13,e[i[16]="AUDIO_CONTROL"]=16,e[i[17]="AUDIO_METADATA"]=17,e[i[18]="AUDIO_STREAM_ID_INFO"]=18,e[i[19]="PING_PONG"]=19,e[i[20]="AUDIO_STATUS"]=20,e[i[21]="CLIENT_METRIC"]=21,e[i[22]="DATA_MESSAGE"]=22,e[i[24]="REMOTE_VIDEO_UPDATE"]=24,e[i[25]="PRIMARY_MEETING_JOIN"]=25,e[i[26]="PRIMARY_MEETING_JOIN_ACK"]=26,e[i[27]="PRIMARY_MEETING_LEAVE"]=27,e[i[34]="NOTIFICATION"]=34,e}(),a}(),s.SdkErrorFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkErrorFrame"),a.prototype.status=0,a.prototype.description="",a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.status!=null&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).uint32(e.status),e.description!=null&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkErrorFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.status=e.uint32();break}case 2:{o.description=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.status!=null&&e.hasOwnProperty("status")&&!g.isInteger(e.status)?"status: integer expected":e.description!=null&&e.hasOwnProperty("description")&&!g.isString(e.description)?"description: string expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkErrorFrame)return e;var t=new s.SdkErrorFrame;return e.status!=null&&(t.status=e.status>>>0),e.description!=null&&(t.description=String(e.description)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.status=0,r.description=""),e.status!=null&&e.hasOwnProperty("status")&&(r.status=e.status),e.description!=null&&e.hasOwnProperty("description")&&(r.description=e.description),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkErrorFrame"},"getTypeUrl"),a}(),s.SdkJoinFlags=function(){var a={},i=Object.create(a);return i[a[2]="HAS_STREAM_UPDATE"]=2,i[a[16]="COMPLETE_VIDEO_SOURCES_LIST"]=16,i[a[32]="EXCLUDE_SELF_CONTENT_IN_INDEX"]=32,i}(),s.SdkClientDetails=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkClientDetails"),a.prototype.appName="",a.prototype.appVersion="",a.prototype.deviceModel="",a.prototype.deviceMake="",a.prototype.platformName="",a.prototype.platformVersion="",a.prototype.clientSource="",a.prototype.chimeSdkVersion="",a.prototype.clientUtcOffset="",a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.appName!=null&&Object.hasOwnProperty.call(e,"appName")&&t.uint32(10).string(e.appName),e.appVersion!=null&&Object.hasOwnProperty.call(e,"appVersion")&&t.uint32(18).string(e.appVersion),e.deviceModel!=null&&Object.hasOwnProperty.call(e,"deviceModel")&&t.uint32(26).string(e.deviceModel),e.deviceMake!=null&&Object.hasOwnProperty.call(e,"deviceMake")&&t.uint32(34).string(e.deviceMake),e.platformName!=null&&Object.hasOwnProperty.call(e,"platformName")&&t.uint32(42).string(e.platformName),e.platformVersion!=null&&Object.hasOwnProperty.call(e,"platformVersion")&&t.uint32(50).string(e.platformVersion),e.clientSource!=null&&Object.hasOwnProperty.call(e,"clientSource")&&t.uint32(58).string(e.clientSource),e.chimeSdkVersion!=null&&Object.hasOwnProperty.call(e,"chimeSdkVersion")&&t.uint32(66).string(e.chimeSdkVersion),e.clientUtcOffset!=null&&Object.hasOwnProperty.call(e,"clientUtcOffset")&&t.uint32(74).string(e.clientUtcOffset),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkClientDetails;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.appName=e.string();break}case 2:{o.appVersion=e.string();break}case 3:{o.deviceModel=e.string();break}case 4:{o.deviceMake=e.string();break}case 5:{o.platformName=e.string();break}case 6:{o.platformVersion=e.string();break}case 7:{o.clientSource=e.string();break}case 8:{o.chimeSdkVersion=e.string();break}case 9:{o.clientUtcOffset=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.appName!=null&&e.hasOwnProperty("appName")&&!g.isString(e.appName)?"appName: string expected":e.appVersion!=null&&e.hasOwnProperty("appVersion")&&!g.isString(e.appVersion)?"appVersion: string expected":e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&!g.isString(e.deviceModel)?"deviceModel: string expected":e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&!g.isString(e.deviceMake)?"deviceMake: string expected":e.platformName!=null&&e.hasOwnProperty("platformName")&&!g.isString(e.platformName)?"platformName: string expected":e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&!g.isString(e.platformVersion)?"platformVersion: string expected":e.clientSource!=null&&e.hasOwnProperty("clientSource")&&!g.isString(e.clientSource)?"clientSource: string expected":e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&!g.isString(e.chimeSdkVersion)?"chimeSdkVersion: string expected":e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&!g.isString(e.clientUtcOffset)?"clientUtcOffset: string expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkClientDetails)return e;var t=new s.SdkClientDetails;return e.appName!=null&&(t.appName=String(e.appName)),e.appVersion!=null&&(t.appVersion=String(e.appVersion)),e.deviceModel!=null&&(t.deviceModel=String(e.deviceModel)),e.deviceMake!=null&&(t.deviceMake=String(e.deviceMake)),e.platformName!=null&&(t.platformName=String(e.platformName)),e.platformVersion!=null&&(t.platformVersion=String(e.platformVersion)),e.clientSource!=null&&(t.clientSource=String(e.clientSource)),e.chimeSdkVersion!=null&&(t.chimeSdkVersion=String(e.chimeSdkVersion)),e.clientUtcOffset!=null&&(t.clientUtcOffset=String(e.clientUtcOffset)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.appName="",r.appVersion="",r.deviceModel="",r.deviceMake="",r.platformName="",r.platformVersion="",r.clientSource="",r.chimeSdkVersion="",r.clientUtcOffset=""),e.appName!=null&&e.hasOwnProperty("appName")&&(r.appName=e.appName),e.appVersion!=null&&e.hasOwnProperty("appVersion")&&(r.appVersion=e.appVersion),e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&(r.deviceModel=e.deviceModel),e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&(r.deviceMake=e.deviceMake),e.platformName!=null&&e.hasOwnProperty("platformName")&&(r.platformName=e.platformName),e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&(r.platformVersion=e.platformVersion),e.clientSource!=null&&e.hasOwnProperty("clientSource")&&(r.clientSource=e.clientSource),e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&(r.chimeSdkVersion=e.chimeSdkVersion),e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&(r.clientUtcOffset=e.clientUtcOffset),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientDetails"},"getTypeUrl"),a}(),s.SdkServerSideNetworkAdaption=function(){var a={},i=Object.create(a);return i[a[1]="DEFAULT"]=1,i[a[2]="NONE"]=2,i[a[3]="BANDWIDTH_PROBING"]=3,i[a[4]="BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION"]=4,i}(),s.SdkJoinFrame=function(){function a(i){if(this.supportedServerSideNetworkAdaptions=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkJoinFrame"),a.prototype.protocolVersion=2,a.prototype.maxNumOfVideos=0,a.prototype.flags=0,a.prototype.clientDetails=null,a.prototype.audioSessionId=g.Long?g.Long.fromBits(0,0,!0):0,a.prototype.wantsCompressedSdp=!1,a.prototype.serverSideNetworkAdaption=1,a.prototype.supportedServerSideNetworkAdaptions=g.emptyArray,a.prototype.wantsAllTemporalLayersInIndex=!1,a.prototype.disablePeriodicKeyframeRequestOnContentSender=!1,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.protocolVersion!=null&&Object.hasOwnProperty.call(e,"protocolVersion")&&t.uint32(8).uint32(e.protocolVersion),e.maxNumOfVideos!=null&&Object.hasOwnProperty.call(e,"maxNumOfVideos")&&t.uint32(16).uint32(e.maxNumOfVideos),e.flags!=null&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(24).uint32(e.flags),e.clientDetails!=null&&Object.hasOwnProperty.call(e,"clientDetails")&&s.SdkClientDetails.encode(e.clientDetails,t.uint32(34).fork()).ldelim(),e.audioSessionId!=null&&Object.hasOwnProperty.call(e,"audioSessionId")&&t.uint32(48).uint64(e.audioSessionId),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(56).bool(e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"serverSideNetworkAdaption")&&t.uint32(80).int32(e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions!=null&&e.supportedServerSideNetworkAdaptions.length)for(var r=0;r<e.supportedServerSideNetworkAdaptions.length;++r)t.uint32(88).int32(e.supportedServerSideNetworkAdaptions[r]);return e.wantsAllTemporalLayersInIndex!=null&&Object.hasOwnProperty.call(e,"wantsAllTemporalLayersInIndex")&&t.uint32(96).bool(e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&Object.hasOwnProperty.call(e,"disablePeriodicKeyframeRequestOnContentSender")&&t.uint32(104).bool(e.disablePeriodicKeyframeRequestOnContentSender),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkJoinFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.protocolVersion=e.uint32();break}case 2:{o.maxNumOfVideos=e.uint32();break}case 3:{o.flags=e.uint32();break}case 4:{o.clientDetails=s.SdkClientDetails.decode(e,e.uint32());break}case 6:{o.audioSessionId=e.uint64();break}case 7:{o.wantsCompressedSdp=e.bool();break}case 10:{o.serverSideNetworkAdaption=e.int32();break}case 11:{if(o.supportedServerSideNetworkAdaptions&&o.supportedServerSideNetworkAdaptions.length||(o.supportedServerSideNetworkAdaptions=[]),(f&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.supportedServerSideNetworkAdaptions.push(e.int32());else o.supportedServerSideNetworkAdaptions.push(e.int32());break}case 12:{o.wantsAllTemporalLayersInIndex=e.bool();break}case 13:{o.disablePeriodicKeyframeRequestOnContentSender=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&!g.isInteger(e.protocolVersion))return"protocolVersion: integer expected";if(e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&!g.isInteger(e.maxNumOfVideos))return"maxNumOfVideos: integer expected";if(e.flags!=null&&e.hasOwnProperty("flags")&&!g.isInteger(e.flags))return"flags: integer expected";if(e.clientDetails!=null&&e.hasOwnProperty("clientDetails")){var t=s.SdkClientDetails.verify(e.clientDetails);if(t)return"clientDetails."+t}if(e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&!g.isInteger(e.audioSessionId)&&!(e.audioSessionId&&g.isInteger(e.audioSessionId.low)&&g.isInteger(e.audioSessionId.high)))return"audioSessionId: integer|Long expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption"))switch(e.serverSideNetworkAdaption){default:return"serverSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}if(e.supportedServerSideNetworkAdaptions!=null&&e.hasOwnProperty("supportedServerSideNetworkAdaptions")){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))return"supportedServerSideNetworkAdaptions: array expected";for(var r=0;r<e.supportedServerSideNetworkAdaptions.length;++r)switch(e.supportedServerSideNetworkAdaptions[r]){default:return"supportedServerSideNetworkAdaptions: enum value[] expected";case 1:case 2:case 3:case 4:break}}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&typeof e.wantsAllTemporalLayersInIndex!="boolean"?"wantsAllTemporalLayersInIndex: boolean expected":e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&typeof e.disablePeriodicKeyframeRequestOnContentSender!="boolean"?"disablePeriodicKeyframeRequestOnContentSender: boolean expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkJoinFrame)return e;var t=new s.SdkJoinFrame;if(e.protocolVersion!=null&&(t.protocolVersion=e.protocolVersion>>>0),e.maxNumOfVideos!=null&&(t.maxNumOfVideos=e.maxNumOfVideos>>>0),e.flags!=null&&(t.flags=e.flags>>>0),e.clientDetails!=null){if(typeof e.clientDetails!="object")throw TypeError(".SdkJoinFrame.clientDetails: object expected");t.clientDetails=s.SdkClientDetails.fromObject(e.clientDetails)}switch(e.audioSessionId!=null&&(g.Long?(t.audioSessionId=g.Long.fromValue(e.audioSessionId)).unsigned=!0:typeof e.audioSessionId=="string"?t.audioSessionId=parseInt(e.audioSessionId,10):typeof e.audioSessionId=="number"?t.audioSessionId=e.audioSessionId:typeof e.audioSessionId=="object"&&(t.audioSessionId=new g.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0))),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.serverSideNetworkAdaption){default:if(typeof e.serverSideNetworkAdaption=="number"){t.serverSideNetworkAdaption=e.serverSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.serverSideNetworkAdaption=1;break;case"NONE":case 2:t.serverSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.serverSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.serverSideNetworkAdaption=4;break}if(e.supportedServerSideNetworkAdaptions){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))throw TypeError(".SdkJoinFrame.supportedServerSideNetworkAdaptions: array expected");t.supportedServerSideNetworkAdaptions=[];for(var r=0;r<e.supportedServerSideNetworkAdaptions.length;++r)switch(e.supportedServerSideNetworkAdaptions[r]){default:if(typeof e.supportedServerSideNetworkAdaptions[r]=="number"){t.supportedServerSideNetworkAdaptions[r]=e.supportedServerSideNetworkAdaptions[r];break}case"DEFAULT":case 1:t.supportedServerSideNetworkAdaptions[r]=1;break;case"NONE":case 2:t.supportedServerSideNetworkAdaptions[r]=2;break;case"BANDWIDTH_PROBING":case 3:t.supportedServerSideNetworkAdaptions[r]=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.supportedServerSideNetworkAdaptions[r]=4;break}}return e.wantsAllTemporalLayersInIndex!=null&&(t.wantsAllTemporalLayersInIndex=Boolean(e.wantsAllTemporalLayersInIndex)),e.disablePeriodicKeyframeRequestOnContentSender!=null&&(t.disablePeriodicKeyframeRequestOnContentSender=Boolean(e.disablePeriodicKeyframeRequestOnContentSender)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.supportedServerSideNetworkAdaptions=[]),t.defaults){if(r.protocolVersion=2,r.maxNumOfVideos=0,r.flags=0,r.clientDetails=null,g.Long){var o=new g.Long(0,0,!0);r.audioSessionId=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.audioSessionId=t.longs===String?"0":0;r.wantsCompressedSdp=!1,r.serverSideNetworkAdaption=t.enums===String?"DEFAULT":1,r.wantsAllTemporalLayersInIndex=!1,r.disablePeriodicKeyframeRequestOnContentSender=!1}if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&(r.protocolVersion=e.protocolVersion),e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&(r.maxNumOfVideos=e.maxNumOfVideos),e.flags!=null&&e.hasOwnProperty("flags")&&(r.flags=e.flags),e.clientDetails!=null&&e.hasOwnProperty("clientDetails")&&(r.clientDetails=s.SdkClientDetails.toObject(e.clientDetails,t)),e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&(typeof e.audioSessionId=="number"?r.audioSessionId=t.longs===String?String(e.audioSessionId):e.audioSessionId:r.audioSessionId=t.longs===String?g.Long.prototype.toString.call(e.audioSessionId):t.longs===Number?new g.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0):e.audioSessionId),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(r.wantsCompressedSdp=e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption")&&(r.serverSideNetworkAdaption=t.enums===String?s.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]===void 0?e.serverSideNetworkAdaption:s.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]:e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions&&e.supportedServerSideNetworkAdaptions.length){r.supportedServerSideNetworkAdaptions=[];for(var f=0;f<e.supportedServerSideNetworkAdaptions.length;++f)r.supportedServerSideNetworkAdaptions[f]=t.enums===String?s.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[f]]===void 0?e.supportedServerSideNetworkAdaptions[f]:s.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[f]]:e.supportedServerSideNetworkAdaptions[f]}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&(r.wantsAllTemporalLayersInIndex=e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&(r.disablePeriodicKeyframeRequestOnContentSender=e.disablePeriodicKeyframeRequestOnContentSender),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinFrame"},"getTypeUrl"),a}(),s.SdkJoinAckFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkJoinAckFrame"),a.prototype.turnCredentials=null,a.prototype.videoSubscriptionLimit=0,a.prototype.wantsCompressedSdp=!1,a.prototype.defaultServerSideNetworkAdaption=1,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.turnCredentials!=null&&Object.hasOwnProperty.call(e,"turnCredentials")&&s.SdkTurnCredentials.encode(e.turnCredentials,t.uint32(10).fork()).ldelim(),e.videoSubscriptionLimit!=null&&Object.hasOwnProperty.call(e,"videoSubscriptionLimit")&&t.uint32(16).uint32(e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(24).bool(e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"defaultServerSideNetworkAdaption")&&t.uint32(32).int32(e.defaultServerSideNetworkAdaption),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkJoinAckFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.turnCredentials=s.SdkTurnCredentials.decode(e,e.uint32());break}case 2:{o.videoSubscriptionLimit=e.uint32();break}case 3:{o.wantsCompressedSdp=e.bool();break}case 4:{o.defaultServerSideNetworkAdaption=e.int32();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")){var t=s.SdkTurnCredentials.verify(e.turnCredentials);if(t)return"turnCredentials."+t}if(e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&!g.isInteger(e.videoSubscriptionLimit))return"videoSubscriptionLimit: integer expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption"))switch(e.defaultServerSideNetworkAdaption){default:return"defaultServerSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkJoinAckFrame)return e;var t=new s.SdkJoinAckFrame;if(e.turnCredentials!=null){if(typeof e.turnCredentials!="object")throw TypeError(".SdkJoinAckFrame.turnCredentials: object expected");t.turnCredentials=s.SdkTurnCredentials.fromObject(e.turnCredentials)}switch(e.videoSubscriptionLimit!=null&&(t.videoSubscriptionLimit=e.videoSubscriptionLimit>>>0),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.defaultServerSideNetworkAdaption){default:if(typeof e.defaultServerSideNetworkAdaption=="number"){t.defaultServerSideNetworkAdaption=e.defaultServerSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.defaultServerSideNetworkAdaption=1;break;case"NONE":case 2:t.defaultServerSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.defaultServerSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.defaultServerSideNetworkAdaption=4;break}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.turnCredentials=null,r.videoSubscriptionLimit=0,r.wantsCompressedSdp=!1,r.defaultServerSideNetworkAdaption=t.enums===String?"DEFAULT":1),e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")&&(r.turnCredentials=s.SdkTurnCredentials.toObject(e.turnCredentials,t)),e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&(r.videoSubscriptionLimit=e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(r.wantsCompressedSdp=e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption")&&(r.defaultServerSideNetworkAdaption=t.enums===String?s.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]===void 0?e.defaultServerSideNetworkAdaption:s.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]:e.defaultServerSideNetworkAdaption),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinAckFrame"},"getTypeUrl"),a}(),s.SdkLeaveFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkLeaveFrame"),a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkLeaveFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),a.fromObject=n(function(e){return e instanceof s.SdkLeaveFrame?e:new s.SdkLeaveFrame},"fromObject"),a.toObject=n(function(){return{}},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveFrame"},"getTypeUrl"),a}(),s.SdkLeaveAckFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkLeaveAckFrame"),a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkLeaveAckFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),a.fromObject=n(function(e){return e instanceof s.SdkLeaveAckFrame?e:new s.SdkLeaveAckFrame},"fromObject"),a.toObject=n(function(){return{}},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveAckFrame"},"getTypeUrl"),a}(),s.SdkStreamServiceType=function(){var a={},i=Object.create(a);return i[a[1]="RX"]=1,i[a[2]="TX"]=2,i[a[3]="DUPLEX"]=3,i}(),s.SdkStreamMediaType=function(){var a={},i=Object.create(a);return i[a[1]="AUDIO"]=1,i[a[2]="VIDEO"]=2,i}(),s.SdkSubscribeFrame=function(){function a(i){if(this.sendStreams=[],this.receiveStreamIds=[],this.videoSubscriptionConfiguration=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkSubscribeFrame"),a.prototype.duplex=1,a.prototype.sendStreams=g.emptyArray,a.prototype.receiveStreamIds=g.emptyArray,a.prototype.sdpOffer="",a.prototype.audioHost="",a.prototype.audioCheckin=!1,a.prototype.audioMuted=!1,a.prototype.compressedSdpOffer=g.newBuffer([]),a.prototype.videoSubscriptionConfiguration=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.sendStreams!=null&&e.sendStreams.length)for(var r=0;r<e.sendStreams.length;++r)s.SdkStreamDescriptor.encode(e.sendStreams[r],t.uint32(18).fork()).ldelim();if(e.receiveStreamIds!=null&&e.receiveStreamIds.length)for(var r=0;r<e.receiveStreamIds.length;++r)t.uint32(24).uint32(e.receiveStreamIds[r]);if(e.sdpOffer!=null&&Object.hasOwnProperty.call(e,"sdpOffer")&&t.uint32(34).string(e.sdpOffer),e.audioHost!=null&&Object.hasOwnProperty.call(e,"audioHost")&&t.uint32(42).string(e.audioHost),e.audioCheckin!=null&&Object.hasOwnProperty.call(e,"audioCheckin")&&t.uint32(48).bool(e.audioCheckin),e.audioMuted!=null&&Object.hasOwnProperty.call(e,"audioMuted")&&t.uint32(56).bool(e.audioMuted),e.compressedSdpOffer!=null&&Object.hasOwnProperty.call(e,"compressedSdpOffer")&&t.uint32(66).bytes(e.compressedSdpOffer),e.videoSubscriptionConfiguration!=null&&e.videoSubscriptionConfiguration.length)for(var r=0;r<e.videoSubscriptionConfiguration.length;++r)s.SdkVideoSubscriptionConfiguration.encode(e.videoSubscriptionConfiguration[r],t.uint32(74).fork()).ldelim();return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkSubscribeFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.sendStreams&&o.sendStreams.length||(o.sendStreams=[]),o.sendStreams.push(s.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.receiveStreamIds&&o.receiveStreamIds.length||(o.receiveStreamIds=[]),(f&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.receiveStreamIds.push(e.uint32());else o.receiveStreamIds.push(e.uint32());break}case 4:{o.sdpOffer=e.string();break}case 5:{o.audioHost=e.string();break}case 6:{o.audioCheckin=e.bool();break}case 7:{o.audioMuted=e.bool();break}case 8:{o.compressedSdpOffer=e.bytes();break}case 9:{o.videoSubscriptionConfiguration&&o.videoSubscriptionConfiguration.length||(o.videoSubscriptionConfiguration=[]),o.videoSubscriptionConfiguration.push(s.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.sendStreams!=null&&e.hasOwnProperty("sendStreams")){if(!Array.isArray(e.sendStreams))return"sendStreams: array expected";for(var t=0;t<e.sendStreams.length;++t){var r=s.SdkStreamDescriptor.verify(e.sendStreams[t]);if(r)return"sendStreams."+r}}if(e.receiveStreamIds!=null&&e.hasOwnProperty("receiveStreamIds")){if(!Array.isArray(e.receiveStreamIds))return"receiveStreamIds: array expected";for(var t=0;t<e.receiveStreamIds.length;++t)if(!g.isInteger(e.receiveStreamIds[t]))return"receiveStreamIds: integer[] expected"}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&!g.isString(e.sdpOffer))return"sdpOffer: string expected";if(e.audioHost!=null&&e.hasOwnProperty("audioHost")&&!g.isString(e.audioHost))return"audioHost: string expected";if(e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&typeof e.audioCheckin!="boolean")return"audioCheckin: boolean expected";if(e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&typeof e.audioMuted!="boolean")return"audioMuted: boolean expected";if(e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&!(e.compressedSdpOffer&&typeof e.compressedSdpOffer.length=="number"||g.isString(e.compressedSdpOffer)))return"compressedSdpOffer: buffer expected";if(e.videoSubscriptionConfiguration!=null&&e.hasOwnProperty("videoSubscriptionConfiguration")){if(!Array.isArray(e.videoSubscriptionConfiguration))return"videoSubscriptionConfiguration: array expected";for(var t=0;t<e.videoSubscriptionConfiguration.length;++t){var r=s.SdkVideoSubscriptionConfiguration.verify(e.videoSubscriptionConfiguration[t]);if(r)return"videoSubscriptionConfiguration."+r}}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkSubscribeFrame)return e;var t=new s.SdkSubscribeFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.sendStreams){if(!Array.isArray(e.sendStreams))throw TypeError(".SdkSubscribeFrame.sendStreams: array expected");t.sendStreams=[];for(var r=0;r<e.sendStreams.length;++r){if(typeof e.sendStreams[r]!="object")throw TypeError(".SdkSubscribeFrame.sendStreams: object expected");t.sendStreams[r]=s.SdkStreamDescriptor.fromObject(e.sendStreams[r])}}if(e.receiveStreamIds){if(!Array.isArray(e.receiveStreamIds))throw TypeError(".SdkSubscribeFrame.receiveStreamIds: array expected");t.receiveStreamIds=[];for(var r=0;r<e.receiveStreamIds.length;++r)t.receiveStreamIds[r]=e.receiveStreamIds[r]>>>0}if(e.sdpOffer!=null&&(t.sdpOffer=String(e.sdpOffer)),e.audioHost!=null&&(t.audioHost=String(e.audioHost)),e.audioCheckin!=null&&(t.audioCheckin=Boolean(e.audioCheckin)),e.audioMuted!=null&&(t.audioMuted=Boolean(e.audioMuted)),e.compressedSdpOffer!=null&&(typeof e.compressedSdpOffer=="string"?g.base64.decode(e.compressedSdpOffer,t.compressedSdpOffer=g.newBuffer(g.base64.length(e.compressedSdpOffer)),0):e.compressedSdpOffer.length>=0&&(t.compressedSdpOffer=e.compressedSdpOffer)),e.videoSubscriptionConfiguration){if(!Array.isArray(e.videoSubscriptionConfiguration))throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: array expected");t.videoSubscriptionConfiguration=[];for(var r=0;r<e.videoSubscriptionConfiguration.length;++r){if(typeof e.videoSubscriptionConfiguration[r]!="object")throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: object expected");t.videoSubscriptionConfiguration[r]=s.SdkVideoSubscriptionConfiguration.fromObject(e.videoSubscriptionConfiguration[r])}}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.sendStreams=[],r.receiveStreamIds=[],r.videoSubscriptionConfiguration=[]),t.defaults&&(r.duplex=t.enums===String?"RX":1,r.sdpOffer="",r.audioHost="",r.audioCheckin=!1,r.audioMuted=!1,t.bytes===String?r.compressedSdpOffer="":(r.compressedSdpOffer=[],t.bytes!==Array&&(r.compressedSdpOffer=g.newBuffer(r.compressedSdpOffer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(r.duplex=t.enums===String?s.SdkStreamServiceType[e.duplex]===void 0?e.duplex:s.SdkStreamServiceType[e.duplex]:e.duplex),e.sendStreams&&e.sendStreams.length){r.sendStreams=[];for(var o=0;o<e.sendStreams.length;++o)r.sendStreams[o]=s.SdkStreamDescriptor.toObject(e.sendStreams[o],t)}if(e.receiveStreamIds&&e.receiveStreamIds.length){r.receiveStreamIds=[];for(var o=0;o<e.receiveStreamIds.length;++o)r.receiveStreamIds[o]=e.receiveStreamIds[o]}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&(r.sdpOffer=e.sdpOffer),e.audioHost!=null&&e.hasOwnProperty("audioHost")&&(r.audioHost=e.audioHost),e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&(r.audioCheckin=e.audioCheckin),e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&(r.audioMuted=e.audioMuted),e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&(r.compressedSdpOffer=t.bytes===String?g.base64.encode(e.compressedSdpOffer,0,e.compressedSdpOffer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpOffer):e.compressedSdpOffer),e.videoSubscriptionConfiguration&&e.videoSubscriptionConfiguration.length){r.videoSubscriptionConfiguration=[];for(var o=0;o<e.videoSubscriptionConfiguration.length;++o)r.videoSubscriptionConfiguration[o]=s.SdkVideoSubscriptionConfiguration.toObject(e.videoSubscriptionConfiguration[o],t)}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeFrame"},"getTypeUrl"),a}(),s.SdkSubscribeAckFrame=function(){function a(i){if(this.allocations=[],this.tracks=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkSubscribeAckFrame"),a.prototype.duplex=1,a.prototype.allocations=g.emptyArray,a.prototype.sdpAnswer="",a.prototype.tracks=g.emptyArray,a.prototype.compressedSdpAnswer=g.newBuffer([]),a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.allocations!=null&&e.allocations.length)for(var r=0;r<e.allocations.length;++r)s.SdkStreamAllocation.encode(e.allocations[r],t.uint32(18).fork()).ldelim();if(e.sdpAnswer!=null&&Object.hasOwnProperty.call(e,"sdpAnswer")&&t.uint32(26).string(e.sdpAnswer),e.tracks!=null&&e.tracks.length)for(var r=0;r<e.tracks.length;++r)s.SdkTrackMapping.encode(e.tracks[r],t.uint32(34).fork()).ldelim();return e.compressedSdpAnswer!=null&&Object.hasOwnProperty.call(e,"compressedSdpAnswer")&&t.uint32(42).bytes(e.compressedSdpAnswer),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkSubscribeAckFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.allocations&&o.allocations.length||(o.allocations=[]),o.allocations.push(s.SdkStreamAllocation.decode(e,e.uint32()));break}case 3:{o.sdpAnswer=e.string();break}case 4:{o.tracks&&o.tracks.length||(o.tracks=[]),o.tracks.push(s.SdkTrackMapping.decode(e,e.uint32()));break}case 5:{o.compressedSdpAnswer=e.bytes();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.allocations!=null&&e.hasOwnProperty("allocations")){if(!Array.isArray(e.allocations))return"allocations: array expected";for(var t=0;t<e.allocations.length;++t){var r=s.SdkStreamAllocation.verify(e.allocations[t]);if(r)return"allocations."+r}}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&!g.isString(e.sdpAnswer))return"sdpAnswer: string expected";if(e.tracks!=null&&e.hasOwnProperty("tracks")){if(!Array.isArray(e.tracks))return"tracks: array expected";for(var t=0;t<e.tracks.length;++t){var r=s.SdkTrackMapping.verify(e.tracks[t]);if(r)return"tracks."+r}}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&!(e.compressedSdpAnswer&&typeof e.compressedSdpAnswer.length=="number"||g.isString(e.compressedSdpAnswer))?"compressedSdpAnswer: buffer expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkSubscribeAckFrame)return e;var t=new s.SdkSubscribeAckFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.allocations){if(!Array.isArray(e.allocations))throw TypeError(".SdkSubscribeAckFrame.allocations: array expected");t.allocations=[];for(var r=0;r<e.allocations.length;++r){if(typeof e.allocations[r]!="object")throw TypeError(".SdkSubscribeAckFrame.allocations: object expected");t.allocations[r]=s.SdkStreamAllocation.fromObject(e.allocations[r])}}if(e.sdpAnswer!=null&&(t.sdpAnswer=String(e.sdpAnswer)),e.tracks){if(!Array.isArray(e.tracks))throw TypeError(".SdkSubscribeAckFrame.tracks: array expected");t.tracks=[];for(var r=0;r<e.tracks.length;++r){if(typeof e.tracks[r]!="object")throw TypeError(".SdkSubscribeAckFrame.tracks: object expected");t.tracks[r]=s.SdkTrackMapping.fromObject(e.tracks[r])}}return e.compressedSdpAnswer!=null&&(typeof e.compressedSdpAnswer=="string"?g.base64.decode(e.compressedSdpAnswer,t.compressedSdpAnswer=g.newBuffer(g.base64.length(e.compressedSdpAnswer)),0):e.compressedSdpAnswer.length>=0&&(t.compressedSdpAnswer=e.compressedSdpAnswer)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.allocations=[],r.tracks=[]),t.defaults&&(r.duplex=t.enums===String?"RX":1,r.sdpAnswer="",t.bytes===String?r.compressedSdpAnswer="":(r.compressedSdpAnswer=[],t.bytes!==Array&&(r.compressedSdpAnswer=g.newBuffer(r.compressedSdpAnswer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(r.duplex=t.enums===String?s.SdkStreamServiceType[e.duplex]===void 0?e.duplex:s.SdkStreamServiceType[e.duplex]:e.duplex),e.allocations&&e.allocations.length){r.allocations=[];for(var o=0;o<e.allocations.length;++o)r.allocations[o]=s.SdkStreamAllocation.toObject(e.allocations[o],t)}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&(r.sdpAnswer=e.sdpAnswer),e.tracks&&e.tracks.length){r.tracks=[];for(var o=0;o<e.tracks.length;++o)r.tracks[o]=s.SdkTrackMapping.toObject(e.tracks[o],t)}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&(r.compressedSdpAnswer=t.bytes===String?g.base64.encode(e.compressedSdpAnswer,0,e.compressedSdpAnswer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpAnswer):e.compressedSdpAnswer),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeAckFrame"},"getTypeUrl"),a}(),s.SdkIndexFrame=function(){function a(i){if(this.sources=[],this.pausedAtSourceIds=[],this.supportedReceiveCodecIntersection=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkIndexFrame"),a.prototype.atCapacity=!1,a.prototype.sources=g.emptyArray,a.prototype.pausedAtSourceIds=g.emptyArray,a.prototype.numParticipants=0,a.prototype.supportedReceiveCodecIntersection=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.atCapacity!=null&&Object.hasOwnProperty.call(e,"atCapacity")&&t.uint32(8).bool(e.atCapacity),e.sources!=null&&e.sources.length)for(var r=0;r<e.sources.length;++r)s.SdkStreamDescriptor.encode(e.sources[r],t.uint32(18).fork()).ldelim();if(e.pausedAtSourceIds!=null&&e.pausedAtSourceIds.length)for(var r=0;r<e.pausedAtSourceIds.length;++r)t.uint32(24).uint32(e.pausedAtSourceIds[r]);if(e.numParticipants!=null&&Object.hasOwnProperty.call(e,"numParticipants")&&t.uint32(32).uint32(e.numParticipants),e.supportedReceiveCodecIntersection!=null&&e.supportedReceiveCodecIntersection.length)for(var r=0;r<e.supportedReceiveCodecIntersection.length;++r)t.uint32(40).int32(e.supportedReceiveCodecIntersection[r]);return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkIndexFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.atCapacity=e.bool();break}case 2:{o.sources&&o.sources.length||(o.sources=[]),o.sources.push(s.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.pausedAtSourceIds&&o.pausedAtSourceIds.length||(o.pausedAtSourceIds=[]),(f&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.pausedAtSourceIds.push(e.uint32());else o.pausedAtSourceIds.push(e.uint32());break}case 4:{o.numParticipants=e.uint32();break}case 5:{if(o.supportedReceiveCodecIntersection&&o.supportedReceiveCodecIntersection.length||(o.supportedReceiveCodecIntersection=[]),(f&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.supportedReceiveCodecIntersection.push(e.int32());else o.supportedReceiveCodecIntersection.push(e.int32());break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&typeof e.atCapacity!="boolean")return"atCapacity: boolean expected";if(e.sources!=null&&e.hasOwnProperty("sources")){if(!Array.isArray(e.sources))return"sources: array expected";for(var t=0;t<e.sources.length;++t){var r=s.SdkStreamDescriptor.verify(e.sources[t]);if(r)return"sources."+r}}if(e.pausedAtSourceIds!=null&&e.hasOwnProperty("pausedAtSourceIds")){if(!Array.isArray(e.pausedAtSourceIds))return"pausedAtSourceIds: array expected";for(var t=0;t<e.pausedAtSourceIds.length;++t)if(!g.isInteger(e.pausedAtSourceIds[t]))return"pausedAtSourceIds: integer[] expected"}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&!g.isInteger(e.numParticipants))return"numParticipants: integer expected";if(e.supportedReceiveCodecIntersection!=null&&e.hasOwnProperty("supportedReceiveCodecIntersection")){if(!Array.isArray(e.supportedReceiveCodecIntersection))return"supportedReceiveCodecIntersection: array expected";for(var t=0;t<e.supportedReceiveCodecIntersection.length;++t)switch(e.supportedReceiveCodecIntersection[t]){default:return"supportedReceiveCodecIntersection: enum value[] expected";case 1:case 2:case 3:case 4:case 5:case 6:case 8:case 11:break}}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkIndexFrame)return e;var t=new s.SdkIndexFrame;if(e.atCapacity!=null&&(t.atCapacity=Boolean(e.atCapacity)),e.sources){if(!Array.isArray(e.sources))throw TypeError(".SdkIndexFrame.sources: array expected");t.sources=[];for(var r=0;r<e.sources.length;++r){if(typeof e.sources[r]!="object")throw TypeError(".SdkIndexFrame.sources: object expected");t.sources[r]=s.SdkStreamDescriptor.fromObject(e.sources[r])}}if(e.pausedAtSourceIds){if(!Array.isArray(e.pausedAtSourceIds))throw TypeError(".SdkIndexFrame.pausedAtSourceIds: array expected");t.pausedAtSourceIds=[];for(var r=0;r<e.pausedAtSourceIds.length;++r)t.pausedAtSourceIds[r]=e.pausedAtSourceIds[r]>>>0}if(e.numParticipants!=null&&(t.numParticipants=e.numParticipants>>>0),e.supportedReceiveCodecIntersection){if(!Array.isArray(e.supportedReceiveCodecIntersection))throw TypeError(".SdkIndexFrame.supportedReceiveCodecIntersection: array expected");t.supportedReceiveCodecIntersection=[];for(var r=0;r<e.supportedReceiveCodecIntersection.length;++r)switch(e.supportedReceiveCodecIntersection[r]){default:if(typeof e.supportedReceiveCodecIntersection[r]=="number"){t.supportedReceiveCodecIntersection[r]=e.supportedReceiveCodecIntersection[r];break}case"VP8":case 1:t.supportedReceiveCodecIntersection[r]=1;break;case"H264_BASELINE_PROFILE":case 2:t.supportedReceiveCodecIntersection[r]=2;break;case"H264_CONSTRAINED_BASELINE_PROFILE":case 3:t.supportedReceiveCodecIntersection[r]=3;break;case"H264_MAIN_PROFILE":case 4:t.supportedReceiveCodecIntersection[r]=4;break;case"H264_HIGH_PROFILE":case 5:t.supportedReceiveCodecIntersection[r]=5;break;case"H264_CONSTRAINED_HIGH_PROFILE":case 6:t.supportedReceiveCodecIntersection[r]=6;break;case"VP9_PROFILE_0":case 8:t.supportedReceiveCodecIntersection[r]=8;break;case"AV1_MAIN_PROFILE":case 11:t.supportedReceiveCodecIntersection[r]=11;break}}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.sources=[],r.pausedAtSourceIds=[],r.supportedReceiveCodecIntersection=[]),t.defaults&&(r.atCapacity=!1,r.numParticipants=0),e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&(r.atCapacity=e.atCapacity),e.sources&&e.sources.length){r.sources=[];for(var o=0;o<e.sources.length;++o)r.sources[o]=s.SdkStreamDescriptor.toObject(e.sources[o],t)}if(e.pausedAtSourceIds&&e.pausedAtSourceIds.length){r.pausedAtSourceIds=[];for(var o=0;o<e.pausedAtSourceIds.length;++o)r.pausedAtSourceIds[o]=e.pausedAtSourceIds[o]}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&(r.numParticipants=e.numParticipants),e.supportedReceiveCodecIntersection&&e.supportedReceiveCodecIntersection.length){r.supportedReceiveCodecIntersection=[];for(var o=0;o<e.supportedReceiveCodecIntersection.length;++o)r.supportedReceiveCodecIntersection[o]=t.enums===String?s.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]===void 0?e.supportedReceiveCodecIntersection[o]:s.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]:e.supportedReceiveCodecIntersection[o]}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkIndexFrame"},"getTypeUrl"),a}(),s.SdkPauseResumeFrame=function(){function a(i){if(this.streamIds=[],this.groupIds=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkPauseResumeFrame"),a.prototype.streamIds=g.emptyArray,a.prototype.groupIds=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.streamIds!=null&&e.streamIds.length)for(var r=0;r<e.streamIds.length;++r)t.uint32(8).uint32(e.streamIds[r]);if(e.groupIds!=null&&e.groupIds.length)for(var r=0;r<e.groupIds.length;++r)t.uint32(16).uint32(e.groupIds[r]);return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkPauseResumeFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{if(o.streamIds&&o.streamIds.length||(o.streamIds=[]),(f&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.streamIds.push(e.uint32());else o.streamIds.push(e.uint32());break}case 2:{if(o.groupIds&&o.groupIds.length||(o.groupIds=[]),(f&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.groupIds.push(e.uint32());else o.groupIds.push(e.uint32());break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamIds!=null&&e.hasOwnProperty("streamIds")){if(!Array.isArray(e.streamIds))return"streamIds: array expected";for(var t=0;t<e.streamIds.length;++t)if(!g.isInteger(e.streamIds[t]))return"streamIds: integer[] expected"}if(e.groupIds!=null&&e.hasOwnProperty("groupIds")){if(!Array.isArray(e.groupIds))return"groupIds: array expected";for(var t=0;t<e.groupIds.length;++t)if(!g.isInteger(e.groupIds[t]))return"groupIds: integer[] expected"}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkPauseResumeFrame)return e;var t=new s.SdkPauseResumeFrame;if(e.streamIds){if(!Array.isArray(e.streamIds))throw TypeError(".SdkPauseResumeFrame.streamIds: array expected");t.streamIds=[];for(var r=0;r<e.streamIds.length;++r)t.streamIds[r]=e.streamIds[r]>>>0}if(e.groupIds){if(!Array.isArray(e.groupIds))throw TypeError(".SdkPauseResumeFrame.groupIds: array expected");t.groupIds=[];for(var r=0;r<e.groupIds.length;++r)t.groupIds[r]=e.groupIds[r]>>>0}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.streamIds=[],r.groupIds=[]),e.streamIds&&e.streamIds.length){r.streamIds=[];for(var o=0;o<e.streamIds.length;++o)r.streamIds[o]=e.streamIds[o]}if(e.groupIds&&e.groupIds.length){r.groupIds=[];for(var o=0;o<e.groupIds.length;++o)r.groupIds[o]=e.groupIds[o]}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPauseResumeFrame"},"getTypeUrl"),a}(),s.SdkBitrateFrame=function(){function a(i){if(this.bitrates=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkBitrateFrame"),a.prototype.bitrates=g.emptyArray,a.prototype.serverAvailableOutgoingBitrate=0,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.bitrates!=null&&e.bitrates.length)for(var r=0;r<e.bitrates.length;++r)s.SdkBitrate.encode(e.bitrates[r],t.uint32(10).fork()).ldelim();return e.serverAvailableOutgoingBitrate!=null&&Object.hasOwnProperty.call(e,"serverAvailableOutgoingBitrate")&&t.uint32(16).uint32(e.serverAvailableOutgoingBitrate),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkBitrateFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.bitrates&&o.bitrates.length||(o.bitrates=[]),o.bitrates.push(s.SdkBitrate.decode(e,e.uint32()));break}case 2:{o.serverAvailableOutgoingBitrate=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){if(!Array.isArray(e.bitrates))return"bitrates: array expected";for(var t=0;t<e.bitrates.length;++t){var r=s.SdkBitrate.verify(e.bitrates[t]);if(r)return"bitrates."+r}}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&!g.isInteger(e.serverAvailableOutgoingBitrate)?"serverAvailableOutgoingBitrate: integer expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkBitrateFrame)return e;var t=new s.SdkBitrateFrame;if(e.bitrates){if(!Array.isArray(e.bitrates))throw TypeError(".SdkBitrateFrame.bitrates: array expected");t.bitrates=[];for(var r=0;r<e.bitrates.length;++r){if(typeof e.bitrates[r]!="object")throw TypeError(".SdkBitrateFrame.bitrates: object expected");t.bitrates[r]=s.SdkBitrate.fromObject(e.bitrates[r])}}return e.serverAvailableOutgoingBitrate!=null&&(t.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate>>>0),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.bitrates=[]),t.defaults&&(r.serverAvailableOutgoingBitrate=0),e.bitrates&&e.bitrates.length){r.bitrates=[];for(var o=0;o<e.bitrates.length;++o)r.bitrates[o]=s.SdkBitrate.toObject(e.bitrates[o],t)}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&(r.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrateFrame"},"getTypeUrl"),a}(),s.SdkStreamDescriptor=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkStreamDescriptor"),a.prototype.streamId=0,a.prototype.framerate=0,a.prototype.maxBitrateKbps=0,a.prototype.trackLabel="",a.prototype.groupId=0,a.prototype.avgBitrateBps=0,a.prototype.attendeeId="",a.prototype.mediaType=1,a.prototype.externalUserId="",a.prototype.width=0,a.prototype.height=0,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.framerate!=null&&Object.hasOwnProperty.call(e,"framerate")&&t.uint32(16).uint32(e.framerate),e.maxBitrateKbps!=null&&Object.hasOwnProperty.call(e,"maxBitrateKbps")&&t.uint32(24).uint32(e.maxBitrateKbps),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(34).string(e.trackLabel),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(56).uint32(e.avgBitrateBps),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(66).string(e.attendeeId),e.mediaType!=null&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(72).int32(e.mediaType),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(82).string(e.externalUserId),e.width!=null&&Object.hasOwnProperty.call(e,"width")&&t.uint32(88).uint32(e.width),e.height!=null&&Object.hasOwnProperty.call(e,"height")&&t.uint32(96).uint32(e.height),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkStreamDescriptor;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.framerate=e.uint32();break}case 3:{o.maxBitrateKbps=e.uint32();break}case 4:{o.trackLabel=e.string();break}case 6:{o.groupId=e.uint32();break}case 7:{o.avgBitrateBps=e.uint32();break}case 8:{o.attendeeId=e.string();break}case 9:{o.mediaType=e.int32();break}case 10:{o.externalUserId=e.string();break}case 11:{o.width=e.uint32();break}case 12:{o.height=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!g.isInteger(e.streamId))return"streamId: integer expected";if(e.framerate!=null&&e.hasOwnProperty("framerate")&&!g.isInteger(e.framerate))return"framerate: integer expected";if(e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&!g.isInteger(e.maxBitrateKbps))return"maxBitrateKbps: integer expected";if(e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!g.isString(e.trackLabel))return"trackLabel: string expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!g.isInteger(e.groupId))return"groupId: integer expected";if(e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!g.isInteger(e.avgBitrateBps))return"avgBitrateBps: integer expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!g.isString(e.attendeeId))return"attendeeId: string expected";if(e.mediaType!=null&&e.hasOwnProperty("mediaType"))switch(e.mediaType){default:return"mediaType: enum value expected";case 1:case 2:break}return e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!g.isString(e.externalUserId)?"externalUserId: string expected":e.width!=null&&e.hasOwnProperty("width")&&!g.isInteger(e.width)?"width: integer expected":e.height!=null&&e.hasOwnProperty("height")&&!g.isInteger(e.height)?"height: integer expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkStreamDescriptor)return e;var t=new s.SdkStreamDescriptor;switch(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.framerate!=null&&(t.framerate=e.framerate>>>0),e.maxBitrateKbps!=null&&(t.maxBitrateKbps=e.maxBitrateKbps>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.mediaType){default:if(typeof e.mediaType=="number"){t.mediaType=e.mediaType;break}break;case"AUDIO":case 1:t.mediaType=1;break;case"VIDEO":case 2:t.mediaType=2;break}return e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.width!=null&&(t.width=e.width>>>0),e.height!=null&&(t.height=e.height>>>0),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.streamId=0,r.framerate=0,r.maxBitrateKbps=0,r.trackLabel="",r.groupId=0,r.avgBitrateBps=0,r.attendeeId="",r.mediaType=t.enums===String?"AUDIO":1,r.externalUserId="",r.width=0,r.height=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(r.streamId=e.streamId),e.framerate!=null&&e.hasOwnProperty("framerate")&&(r.framerate=e.framerate),e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&(r.maxBitrateKbps=e.maxBitrateKbps),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(r.trackLabel=e.trackLabel),e.groupId!=null&&e.hasOwnProperty("groupId")&&(r.groupId=e.groupId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(r.avgBitrateBps=e.avgBitrateBps),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(r.attendeeId=e.attendeeId),e.mediaType!=null&&e.hasOwnProperty("mediaType")&&(r.mediaType=t.enums===String?s.SdkStreamMediaType[e.mediaType]===void 0?e.mediaType:s.SdkStreamMediaType[e.mediaType]:e.mediaType),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(r.externalUserId=e.externalUserId),e.width!=null&&e.hasOwnProperty("width")&&(r.width=e.width),e.height!=null&&e.hasOwnProperty("height")&&(r.height=e.height),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDescriptor"},"getTypeUrl"),a}(),s.SdkStreamAllocation=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkStreamAllocation"),a.prototype.trackLabel="",a.prototype.streamId=0,a.prototype.groupId=0,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(10).string(e.trackLabel),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(16).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(24).uint32(e.groupId),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkStreamAllocation;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.trackLabel=e.string();break}case 2:{o.streamId=e.uint32();break}case 3:{o.groupId=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!g.isString(e.trackLabel)?"trackLabel: string expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!g.isInteger(e.streamId)?"streamId: integer expected":e.groupId!=null&&e.hasOwnProperty("groupId")&&!g.isInteger(e.groupId)?"groupId: integer expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkStreamAllocation)return e;var t=new s.SdkStreamAllocation;return e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.trackLabel="",r.streamId=0,r.groupId=0),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(r.trackLabel=e.trackLabel),e.streamId!=null&&e.hasOwnProperty("streamId")&&(r.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(r.groupId=e.groupId),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamAllocation"},"getTypeUrl"),a}(),s.SdkTrackMapping=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkTrackMapping"),a.prototype.streamId=0,a.prototype.ssrc=0,a.prototype.trackLabel="",a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.ssrc!=null&&Object.hasOwnProperty.call(e,"ssrc")&&t.uint32(16).uint32(e.ssrc),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(26).string(e.trackLabel),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkTrackMapping;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.ssrc=e.uint32();break}case 3:{o.trackLabel=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!g.isInteger(e.streamId)?"streamId: integer expected":e.ssrc!=null&&e.hasOwnProperty("ssrc")&&!g.isInteger(e.ssrc)?"ssrc: integer expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!g.isString(e.trackLabel)?"trackLabel: string expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkTrackMapping)return e;var t=new s.SdkTrackMapping;return e.streamId!=null&&(t.streamId=e.streamId>>>0),e.ssrc!=null&&(t.ssrc=e.ssrc>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.streamId=0,r.ssrc=0,r.trackLabel=""),e.streamId!=null&&e.hasOwnProperty("streamId")&&(r.streamId=e.streamId),e.ssrc!=null&&e.hasOwnProperty("ssrc")&&(r.ssrc=e.ssrc),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(r.trackLabel=e.trackLabel),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTrackMapping"},"getTypeUrl"),a}(),s.SdkBitrate=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkBitrate"),a.prototype.sourceStreamId=0,a.prototype.avgBitrateBps=0,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.sourceStreamId!=null&&Object.hasOwnProperty.call(e,"sourceStreamId")&&t.uint32(8).uint32(e.sourceStreamId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(16).uint32(e.avgBitrateBps),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkBitrate;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.sourceStreamId=e.uint32();break}case 2:{o.avgBitrateBps=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&!g.isInteger(e.sourceStreamId)?"sourceStreamId: integer expected":e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!g.isInteger(e.avgBitrateBps)?"avgBitrateBps: integer expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkBitrate)return e;var t=new s.SdkBitrate;return e.sourceStreamId!=null&&(t.sourceStreamId=e.sourceStreamId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.sourceStreamId=0,r.avgBitrateBps=0),e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&(r.sourceStreamId=e.sourceStreamId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(r.avgBitrateBps=e.avgBitrateBps),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrate"},"getTypeUrl"),a}(),s.SdkAudioControlFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkAudioControlFrame"),a.prototype.muted=!1,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(8).bool(e.muted),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkAudioControlFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.muted=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkAudioControlFrame)return e;var t=new s.SdkAudioControlFrame;return e.muted!=null&&(t.muted=Boolean(e.muted)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.muted=!1),e.muted!=null&&e.hasOwnProperty("muted")&&(r.muted=e.muted),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioControlFrame"},"getTypeUrl"),a}(),s.SdkAudioMetadataFrame=function(){function a(i){if(this.attendeeStates=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkAudioMetadataFrame"),a.prototype.attendeeStates=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.attendeeStates!=null&&e.attendeeStates.length)for(var r=0;r<e.attendeeStates.length;++r)s.SdkAudioAttendeeState.encode(e.attendeeStates[r],t.uint32(10).fork()).ldelim();return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkAudioMetadataFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.attendeeStates&&o.attendeeStates.length||(o.attendeeStates=[]),o.attendeeStates.push(s.SdkAudioAttendeeState.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.attendeeStates!=null&&e.hasOwnProperty("attendeeStates")){if(!Array.isArray(e.attendeeStates))return"attendeeStates: array expected";for(var t=0;t<e.attendeeStates.length;++t){var r=s.SdkAudioAttendeeState.verify(e.attendeeStates[t]);if(r)return"attendeeStates."+r}}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkAudioMetadataFrame)return e;var t=new s.SdkAudioMetadataFrame;if(e.attendeeStates){if(!Array.isArray(e.attendeeStates))throw TypeError(".SdkAudioMetadataFrame.attendeeStates: array expected");t.attendeeStates=[];for(var r=0;r<e.attendeeStates.length;++r){if(typeof e.attendeeStates[r]!="object")throw TypeError(".SdkAudioMetadataFrame.attendeeStates: object expected");t.attendeeStates[r]=s.SdkAudioAttendeeState.fromObject(e.attendeeStates[r])}}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.attendeeStates=[]),e.attendeeStates&&e.attendeeStates.length){r.attendeeStates=[];for(var o=0;o<e.attendeeStates.length;++o)r.attendeeStates[o]=s.SdkAudioAttendeeState.toObject(e.attendeeStates[o],t)}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioMetadataFrame"},"getTypeUrl"),a}(),s.SdkAudioAttendeeState=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkAudioAttendeeState"),a.prototype.audioStreamId=0,a.prototype.volume=0,a.prototype.muted=!1,a.prototype.signalStrength=0,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.volume!=null&&Object.hasOwnProperty.call(e,"volume")&&t.uint32(16).uint32(e.volume),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.signalStrength!=null&&Object.hasOwnProperty.call(e,"signalStrength")&&t.uint32(32).uint32(e.signalStrength),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkAudioAttendeeState;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.volume=e.uint32();break}case 3:{o.muted=e.bool();break}case 4:{o.signalStrength=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!g.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.volume!=null&&e.hasOwnProperty("volume")&&!g.isInteger(e.volume)?"volume: integer expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&!g.isInteger(e.signalStrength)?"signalStrength: integer expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkAudioAttendeeState)return e;var t=new s.SdkAudioAttendeeState;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.volume!=null&&(t.volume=e.volume>>>0),e.muted!=null&&(t.muted=Boolean(e.muted)),e.signalStrength!=null&&(t.signalStrength=e.signalStrength>>>0),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.audioStreamId=0,r.volume=0,r.muted=!1,r.signalStrength=0),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(r.audioStreamId=e.audioStreamId),e.volume!=null&&e.hasOwnProperty("volume")&&(r.volume=e.volume),e.muted!=null&&e.hasOwnProperty("muted")&&(r.muted=e.muted),e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&(r.signalStrength=e.signalStrength),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioAttendeeState"},"getTypeUrl"),a}(),s.SdkAudioStreamIdInfoFrame=function(){function a(i){if(this.streams=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkAudioStreamIdInfoFrame"),a.prototype.streams=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.streams!=null&&e.streams.length)for(var r=0;r<e.streams.length;++r)s.SdkAudioStreamIdInfo.encode(e.streams[r],t.uint32(10).fork()).ldelim();return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkAudioStreamIdInfoFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.streams&&o.streams.length||(o.streams=[]),o.streams.push(s.SdkAudioStreamIdInfo.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streams!=null&&e.hasOwnProperty("streams")){if(!Array.isArray(e.streams))return"streams: array expected";for(var t=0;t<e.streams.length;++t){var r=s.SdkAudioStreamIdInfo.verify(e.streams[t]);if(r)return"streams."+r}}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkAudioStreamIdInfoFrame)return e;var t=new s.SdkAudioStreamIdInfoFrame;if(e.streams){if(!Array.isArray(e.streams))throw TypeError(".SdkAudioStreamIdInfoFrame.streams: array expected");t.streams=[];for(var r=0;r<e.streams.length;++r){if(typeof e.streams[r]!="object")throw TypeError(".SdkAudioStreamIdInfoFrame.streams: object expected");t.streams[r]=s.SdkAudioStreamIdInfo.fromObject(e.streams[r])}}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.streams=[]),e.streams&&e.streams.length){r.streams=[];for(var o=0;o<e.streams.length;++o)r.streams[o]=s.SdkAudioStreamIdInfo.toObject(e.streams[o],t)}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfoFrame"},"getTypeUrl"),a}(),s.SdkAudioStreamIdInfo=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkAudioStreamIdInfo"),a.prototype.audioStreamId=0,a.prototype.attendeeId="",a.prototype.muted=!1,a.prototype.externalUserId="",a.prototype.dropped=!1,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(34).string(e.externalUserId),e.dropped!=null&&Object.hasOwnProperty.call(e,"dropped")&&t.uint32(40).bool(e.dropped),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkAudioStreamIdInfo;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.attendeeId=e.string();break}case 3:{o.muted=e.bool();break}case 4:{o.externalUserId=e.string();break}case 5:{o.dropped=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!g.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!g.isString(e.attendeeId)?"attendeeId: string expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!g.isString(e.externalUserId)?"externalUserId: string expected":e.dropped!=null&&e.hasOwnProperty("dropped")&&typeof e.dropped!="boolean"?"dropped: boolean expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkAudioStreamIdInfo)return e;var t=new s.SdkAudioStreamIdInfo;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.muted!=null&&(t.muted=Boolean(e.muted)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.dropped!=null&&(t.dropped=Boolean(e.dropped)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.audioStreamId=0,r.attendeeId="",r.muted=!1,r.externalUserId="",r.dropped=!1),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(r.audioStreamId=e.audioStreamId),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(r.attendeeId=e.attendeeId),e.muted!=null&&e.hasOwnProperty("muted")&&(r.muted=e.muted),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(r.externalUserId=e.externalUserId),e.dropped!=null&&e.hasOwnProperty("dropped")&&(r.dropped=e.dropped),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfo"},"getTypeUrl"),a}(),s.SdkPingPongType=function(){var a={},i=Object.create(a);return i[a[1]="PING"]=1,i[a[2]="PONG"]=2,i}(),s.SdkPingPongFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkPingPongFrame"),a.prototype.type=1,a.prototype.pingId=0,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),t.uint32(8).int32(e.type),t.uint32(16).uint32(e.pingId),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkPingPongFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.pingId=e.uint32();break}default:e.skipType(f&7);break}}if(!o.hasOwnProperty("type"))throw g.ProtocolError("missing required 'type'",{instance:o});if(!o.hasOwnProperty("pingId"))throw g.ProtocolError("missing required 'pingId'",{instance:o});return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return g.isInteger(e.pingId)?null:"pingId: integer expected"},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkPingPongFrame)return e;var t=new s.SdkPingPongFrame;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PING":case 1:t.type=1;break;case"PONG":case 2:t.type=2;break}return e.pingId!=null&&(t.pingId=e.pingId>>>0),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.type=t.enums===String?"PING":1,r.pingId=0),e.type!=null&&e.hasOwnProperty("type")&&(r.type=t.enums===String?s.SdkPingPongType[e.type]===void 0?e.type:s.SdkPingPongType[e.type]:e.type),e.pingId!=null&&e.hasOwnProperty("pingId")&&(r.pingId=e.pingId),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPingPongFrame"},"getTypeUrl"),a}(),s.SdkAudioStatusFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkAudioStatusFrame"),a.prototype.audioStatus=0,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&t.uint32(8).uint32(e.audioStatus),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkAudioStatusFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.audioStatus=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&!g.isInteger(e.audioStatus)?"audioStatus: integer expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkAudioStatusFrame)return e;var t=new s.SdkAudioStatusFrame;return e.audioStatus!=null&&(t.audioStatus=e.audioStatus>>>0),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.audioStatus=0),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(r.audioStatus=e.audioStatus),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStatusFrame"},"getTypeUrl"),a}(),s.SdkMetric=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkMetric"),a.prototype.type=1,a.prototype.value=0,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&t.uint32(17).double(e.value),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkMetric;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=e.double();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 64:case 66:case 69:case 72:case 86:case 87:case 88:case 89:case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:break}return e.value!=null&&e.hasOwnProperty("value")&&typeof e.value!="number"?"value: number expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkMetric)return e;var t=new s.SdkMetric;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ACTUAL_ENCODER_BITRATE":case 1:t.type=1;break;case"VIDEO_AVAILABLE_SEND_BANDWIDTH":case 2:t.type=2;break;case"VIDEO_RETRANSMIT_BITRATE":case 3:t.type=3;break;case"VIDEO_AVAILABLE_RECEIVE_BANDWIDTH":case 4:t.type=4;break;case"VIDEO_TARGET_ENCODER_BITRATE":case 5:t.type=5;break;case"VIDEO_BUCKET_DELAY_MS":case 6:t.type=6;break;case"STUN_RTT_MS":case 7:t.type=7;break;case"SOCKET_DISCARDED_PPS":case 8:t.type=8;break;case"RTC_MIC_JITTER_MS":case 9:t.type=9;break;case"RTC_MIC_PPS":case 10:t.type=10;break;case"RTC_MIC_FRACTION_PACKET_LOST_PERCENT":case 11:t.type=11;break;case"RTC_MIC_BITRATE":case 12:t.type=12;break;case"RTC_MIC_RTT_MS":case 13:t.type=13;break;case"RTC_SPK_PPS":case 14:t.type=14;break;case"RTC_SPK_FRACTION_PACKET_LOST_PERCENT":case 15:t.type=15;break;case"RTC_SPK_JITTER_MS":case 16:t.type=16;break;case"RTC_SPK_FRACTION_DECODER_LOSS_PERCENT":case 17:t.type=17;break;case"RTC_SPK_BITRATE":case 18:t.type=18;break;case"RTC_SPK_CURRENT_DELAY_MS":case 19:t.type=19;break;case"RTC_SPK_JITTER_BUFFER_MS":case 20:t.type=20;break;case"VIDEO_SENT_RTT_MS":case 21:t.type=21;break;case"VIDEO_ENCODE_USAGE_PERCENT":case 22:t.type=22;break;case"VIDEO_NACKS_RECEIVED":case 23:t.type=23;break;case"VIDEO_PLIS_RECEIVED":case 24:t.type=24;break;case"VIDEO_ENCODE_MS":case 25:t.type=25;break;case"VIDEO_INPUT_FPS":case 26:t.type=26;break;case"VIDEO_ENCODE_FPS":case 27:t.type=27;break;case"VIDEO_SENT_FPS":case 28:t.type=28;break;case"VIDEO_FIRS_RECEIVED":case 29:t.type=29;break;case"VIDEO_SENT_PPS":case 30:t.type=30;break;case"VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT":case 31:t.type=31;break;case"VIDEO_SENT_BITRATE":case 32:t.type=32;break;case"VIDEO_DROPPED_FPS":case 33:t.type=33;break;case"VIDEO_TARGET_DELAY_MS":case 34:t.type=34;break;case"VIDEO_DECODE_MS":case 35:t.type=35;break;case"VIDEO_OUTPUT_FPS":case 36:t.type=36;break;case"VIDEO_RECEIVED_PPS":case 37:t.type=37;break;case"VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT":case 38:t.type=38;break;case"VIDEO_RENDER_DELAY_MS":case 39:t.type=39;break;case"VIDEO_RECEIVED_FPS":case 40:t.type=40;break;case"VIDEO_DECODE_FPS":case 41:t.type=41;break;case"VIDEO_NACKS_SENT":case 42:t.type=42;break;case"VIDEO_FIRS_SENT":case 43:t.type=43;break;case"VIDEO_RECEIVED_BITRATE":case 44:t.type=44;break;case"VIDEO_CURRENT_DELAY_MS":case 45:t.type=45;break;case"VIDEO_JITTER_BUFFER_MS":case 46:t.type=46;break;case"VIDEO_DISCARDED_PPS":case 47:t.type=47;break;case"VIDEO_PLIS_SENT":case 48:t.type=48;break;case"VIDEO_RECEIVED_JITTER_MS":case 49:t.type=49;break;case"VIDEO_ENCODE_HEIGHT":case 64:t.type=64;break;case"VIDEO_SENT_QP_SUM":case 66:t.type=66;break;case"VIDEO_DECODE_HEIGHT":case 69:t.type=69;break;case"VIDEO_RECEIVED_QP_SUM":case 72:t.type=72;break;case"VIDEO_ENCODE_WIDTH":case 86:t.type=86;break;case"VIDEO_DECODE_WIDTH":case 87:t.type=87;break;case"VIDEO_ENCODER_IS_HARDWARE":case 88:t.type=88;break;case"VIDEO_DECODER_IS_HARDWARE":case 89:t.type=89;break;case"VIDEO_FREEZE_COUNT":case 90:t.type=90;break;case"VIDEO_FREEZE_DURATION":case 91:t.type=91;break;case"VIDEO_PAUSE_COUNT":case 92:t.type=92;break;case"VIDEO_PAUSE_DURATION":case 93:t.type=93;break;case"VIDEO_QUALITY_REASON":case 94:t.type=94;break;case"VIDEO_PROCESSING_TIME":case 95:t.type=95;break;case"RTC_SPK_AUDIO_LEVEL":case 96:t.type=96;break;case"RTC_MIC_AUDIO_LEVEL":case 97:t.type=97;break;case"RTC_SPK_TOTAL_LOST":case 98:t.type=98;break;case"RTC_SPK_TOTAL_EXPECTED":case 99:t.type=99;break;case"RTC_SPK_TOTAL_RECOVERED_RED":case 100:t.type=100;break;case"RTC_SPK_TOTAL_RECOVERED_FEC":case 101:t.type=101;break;case"VIDEO_QUALITY_LIMITATION_DURATION_CPU":case 102:t.type=102;break;case"VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU":case 103:t.type=103;break;case"VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE":case 104:t.type=104;break}return e.value!=null&&(t.value=Number(e.value)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.type=t.enums===String?"VIDEO_ACTUAL_ENCODER_BITRATE":1,r.value=0),e.type!=null&&e.hasOwnProperty("type")&&(r.type=t.enums===String?s.SdkMetric.Type[e.type]===void 0?e.type:s.SdkMetric.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(r.value=t.json&&!isFinite(e.value)?String(e.value):e.value),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMetric"},"getTypeUrl"),a.Type=function(){var i={},e=Object.create(i);return e[i[1]="VIDEO_ACTUAL_ENCODER_BITRATE"]=1,e[i[2]="VIDEO_AVAILABLE_SEND_BANDWIDTH"]=2,e[i[3]="VIDEO_RETRANSMIT_BITRATE"]=3,e[i[4]="VIDEO_AVAILABLE_RECEIVE_BANDWIDTH"]=4,e[i[5]="VIDEO_TARGET_ENCODER_BITRATE"]=5,e[i[6]="VIDEO_BUCKET_DELAY_MS"]=6,e[i[7]="STUN_RTT_MS"]=7,e[i[8]="SOCKET_DISCARDED_PPS"]=8,e[i[9]="RTC_MIC_JITTER_MS"]=9,e[i[10]="RTC_MIC_PPS"]=10,e[i[11]="RTC_MIC_FRACTION_PACKET_LOST_PERCENT"]=11,e[i[12]="RTC_MIC_BITRATE"]=12,e[i[13]="RTC_MIC_RTT_MS"]=13,e[i[14]="RTC_SPK_PPS"]=14,e[i[15]="RTC_SPK_FRACTION_PACKET_LOST_PERCENT"]=15,e[i[16]="RTC_SPK_JITTER_MS"]=16,e[i[17]="RTC_SPK_FRACTION_DECODER_LOSS_PERCENT"]=17,e[i[18]="RTC_SPK_BITRATE"]=18,e[i[19]="RTC_SPK_CURRENT_DELAY_MS"]=19,e[i[20]="RTC_SPK_JITTER_BUFFER_MS"]=20,e[i[21]="VIDEO_SENT_RTT_MS"]=21,e[i[22]="VIDEO_ENCODE_USAGE_PERCENT"]=22,e[i[23]="VIDEO_NACKS_RECEIVED"]=23,e[i[24]="VIDEO_PLIS_RECEIVED"]=24,e[i[25]="VIDEO_ENCODE_MS"]=25,e[i[26]="VIDEO_INPUT_FPS"]=26,e[i[27]="VIDEO_ENCODE_FPS"]=27,e[i[28]="VIDEO_SENT_FPS"]=28,e[i[29]="VIDEO_FIRS_RECEIVED"]=29,e[i[30]="VIDEO_SENT_PPS"]=30,e[i[31]="VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT"]=31,e[i[32]="VIDEO_SENT_BITRATE"]=32,e[i[33]="VIDEO_DROPPED_FPS"]=33,e[i[34]="VIDEO_TARGET_DELAY_MS"]=34,e[i[35]="VIDEO_DECODE_MS"]=35,e[i[36]="VIDEO_OUTPUT_FPS"]=36,e[i[37]="VIDEO_RECEIVED_PPS"]=37,e[i[38]="VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT"]=38,e[i[39]="VIDEO_RENDER_DELAY_MS"]=39,e[i[40]="VIDEO_RECEIVED_FPS"]=40,e[i[41]="VIDEO_DECODE_FPS"]=41,e[i[42]="VIDEO_NACKS_SENT"]=42,e[i[43]="VIDEO_FIRS_SENT"]=43,e[i[44]="VIDEO_RECEIVED_BITRATE"]=44,e[i[45]="VIDEO_CURRENT_DELAY_MS"]=45,e[i[46]="VIDEO_JITTER_BUFFER_MS"]=46,e[i[47]="VIDEO_DISCARDED_PPS"]=47,e[i[48]="VIDEO_PLIS_SENT"]=48,e[i[49]="VIDEO_RECEIVED_JITTER_MS"]=49,e[i[64]="VIDEO_ENCODE_HEIGHT"]=64,e[i[66]="VIDEO_SENT_QP_SUM"]=66,e[i[69]="VIDEO_DECODE_HEIGHT"]=69,e[i[72]="VIDEO_RECEIVED_QP_SUM"]=72,e[i[86]="VIDEO_ENCODE_WIDTH"]=86,e[i[87]="VIDEO_DECODE_WIDTH"]=87,e[i[88]="VIDEO_ENCODER_IS_HARDWARE"]=88,e[i[89]="VIDEO_DECODER_IS_HARDWARE"]=89,e[i[90]="VIDEO_FREEZE_COUNT"]=90,e[i[91]="VIDEO_FREEZE_DURATION"]=91,e[i[92]="VIDEO_PAUSE_COUNT"]=92,e[i[93]="VIDEO_PAUSE_DURATION"]=93,e[i[94]="VIDEO_QUALITY_REASON"]=94,e[i[95]="VIDEO_PROCESSING_TIME"]=95,e[i[96]="RTC_SPK_AUDIO_LEVEL"]=96,e[i[97]="RTC_MIC_AUDIO_LEVEL"]=97,e[i[98]="RTC_SPK_TOTAL_LOST"]=98,e[i[99]="RTC_SPK_TOTAL_EXPECTED"]=99,e[i[100]="RTC_SPK_TOTAL_RECOVERED_RED"]=100,e[i[101]="RTC_SPK_TOTAL_RECOVERED_FEC"]=101,e[i[102]="VIDEO_QUALITY_LIMITATION_DURATION_CPU"]=102,e[i[103]="VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU"]=103,e[i[104]="VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE"]=104,e}(),a}(),s.SdkStreamMetricFrame=function(){function a(i){if(this.metrics=[],this.dimensions=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkStreamMetricFrame"),a.prototype.streamId=0,a.prototype.groupId=0,a.prototype.metrics=g.emptyArray,a.prototype.dimensions=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(32).uint32(e.groupId),e.metrics!=null&&e.metrics.length)for(var r=0;r<e.metrics.length;++r)s.SdkMetric.encode(e.metrics[r],t.uint32(42).fork()).ldelim();if(e.dimensions!=null&&e.dimensions.length)for(var r=0;r<e.dimensions.length;++r)s.SdkStreamDimension.encode(e.dimensions[r],t.uint32(50).fork()).ldelim();return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkStreamMetricFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 3:{o.streamId=e.uint32();break}case 4:{o.groupId=e.uint32();break}case 5:{o.metrics&&o.metrics.length||(o.metrics=[]),o.metrics.push(s.SdkMetric.decode(e,e.uint32()));break}case 6:{o.dimensions&&o.dimensions.length||(o.dimensions=[]),o.dimensions.push(s.SdkStreamDimension.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!g.isInteger(e.streamId))return"streamId: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!g.isInteger(e.groupId))return"groupId: integer expected";if(e.metrics!=null&&e.hasOwnProperty("metrics")){if(!Array.isArray(e.metrics))return"metrics: array expected";for(var t=0;t<e.metrics.length;++t){var r=s.SdkMetric.verify(e.metrics[t]);if(r)return"metrics."+r}}if(e.dimensions!=null&&e.hasOwnProperty("dimensions")){if(!Array.isArray(e.dimensions))return"dimensions: array expected";for(var t=0;t<e.dimensions.length;++t){var r=s.SdkStreamDimension.verify(e.dimensions[t]);if(r)return"dimensions."+r}}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkStreamMetricFrame)return e;var t=new s.SdkStreamMetricFrame;if(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.metrics){if(!Array.isArray(e.metrics))throw TypeError(".SdkStreamMetricFrame.metrics: array expected");t.metrics=[];for(var r=0;r<e.metrics.length;++r){if(typeof e.metrics[r]!="object")throw TypeError(".SdkStreamMetricFrame.metrics: object expected");t.metrics[r]=s.SdkMetric.fromObject(e.metrics[r])}}if(e.dimensions){if(!Array.isArray(e.dimensions))throw TypeError(".SdkStreamMetricFrame.dimensions: array expected");t.dimensions=[];for(var r=0;r<e.dimensions.length;++r){if(typeof e.dimensions[r]!="object")throw TypeError(".SdkStreamMetricFrame.dimensions: object expected");t.dimensions[r]=s.SdkStreamDimension.fromObject(e.dimensions[r])}}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.metrics=[],r.dimensions=[]),t.defaults&&(r.streamId=0,r.groupId=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(r.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(r.groupId=e.groupId),e.metrics&&e.metrics.length){r.metrics=[];for(var o=0;o<e.metrics.length;++o)r.metrics[o]=s.SdkMetric.toObject(e.metrics[o],t)}if(e.dimensions&&e.dimensions.length){r.dimensions=[];for(var o=0;o<e.dimensions.length;++o)r.dimensions[o]=s.SdkStreamDimension.toObject(e.dimensions[o],t)}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamMetricFrame"},"getTypeUrl"),a}(),s.SdkClientMetricFrame=function(){function a(i){if(this.globalMetrics=[],this.streamMetricFrames=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkClientMetricFrame"),a.prototype.globalMetrics=g.emptyArray,a.prototype.streamMetricFrames=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.globalMetrics!=null&&e.globalMetrics.length)for(var r=0;r<e.globalMetrics.length;++r)s.SdkMetric.encode(e.globalMetrics[r],t.uint32(10).fork()).ldelim();if(e.streamMetricFrames!=null&&e.streamMetricFrames.length)for(var r=0;r<e.streamMetricFrames.length;++r)s.SdkStreamMetricFrame.encode(e.streamMetricFrames[r],t.uint32(18).fork()).ldelim();return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkClientMetricFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.globalMetrics&&o.globalMetrics.length||(o.globalMetrics=[]),o.globalMetrics.push(s.SdkMetric.decode(e,e.uint32()));break}case 2:{o.streamMetricFrames&&o.streamMetricFrames.length||(o.streamMetricFrames=[]),o.streamMetricFrames.push(s.SdkStreamMetricFrame.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.globalMetrics!=null&&e.hasOwnProperty("globalMetrics")){if(!Array.isArray(e.globalMetrics))return"globalMetrics: array expected";for(var t=0;t<e.globalMetrics.length;++t){var r=s.SdkMetric.verify(e.globalMetrics[t]);if(r)return"globalMetrics."+r}}if(e.streamMetricFrames!=null&&e.hasOwnProperty("streamMetricFrames")){if(!Array.isArray(e.streamMetricFrames))return"streamMetricFrames: array expected";for(var t=0;t<e.streamMetricFrames.length;++t){var r=s.SdkStreamMetricFrame.verify(e.streamMetricFrames[t]);if(r)return"streamMetricFrames."+r}}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkClientMetricFrame)return e;var t=new s.SdkClientMetricFrame;if(e.globalMetrics){if(!Array.isArray(e.globalMetrics))throw TypeError(".SdkClientMetricFrame.globalMetrics: array expected");t.globalMetrics=[];for(var r=0;r<e.globalMetrics.length;++r){if(typeof e.globalMetrics[r]!="object")throw TypeError(".SdkClientMetricFrame.globalMetrics: object expected");t.globalMetrics[r]=s.SdkMetric.fromObject(e.globalMetrics[r])}}if(e.streamMetricFrames){if(!Array.isArray(e.streamMetricFrames))throw TypeError(".SdkClientMetricFrame.streamMetricFrames: array expected");t.streamMetricFrames=[];for(var r=0;r<e.streamMetricFrames.length;++r){if(typeof e.streamMetricFrames[r]!="object")throw TypeError(".SdkClientMetricFrame.streamMetricFrames: object expected");t.streamMetricFrames[r]=s.SdkStreamMetricFrame.fromObject(e.streamMetricFrames[r])}}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.globalMetrics=[],r.streamMetricFrames=[]),e.globalMetrics&&e.globalMetrics.length){r.globalMetrics=[];for(var o=0;o<e.globalMetrics.length;++o)r.globalMetrics[o]=s.SdkMetric.toObject(e.globalMetrics[o],t)}if(e.streamMetricFrames&&e.streamMetricFrames.length){r.streamMetricFrames=[];for(var o=0;o<e.streamMetricFrames.length;++o)r.streamMetricFrames[o]=s.SdkStreamMetricFrame.toObject(e.streamMetricFrames[o],t)}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientMetricFrame"},"getTypeUrl"),a}(),s.SdkStreamDimension=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkStreamDimension"),a.prototype.type=1,a.prototype.value=null,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&s.SdkDimensionValue.encode(e.value,t.uint32(18).fork()).ldelim(),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkStreamDimension;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=s.SdkDimensionValue.decode(e,e.uint32());break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}if(e.value!=null&&e.hasOwnProperty("value")){var t=s.SdkDimensionValue.verify(e.value);if(t)return"value."+t}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkStreamDimension)return e;var t=new s.SdkStreamDimension;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ENCODER_NAME":case 1:t.type=1;break;case"VIDEO_DECODER_NAME":case 2:t.type=2;break}if(e.value!=null){if(typeof e.value!="object")throw TypeError(".SdkStreamDimension.value: object expected");t.value=s.SdkDimensionValue.fromObject(e.value)}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.type=t.enums===String?"VIDEO_ENCODER_NAME":1,r.value=null),e.type!=null&&e.hasOwnProperty("type")&&(r.type=t.enums===String?s.SdkStreamDimension.Type[e.type]===void 0?e.type:s.SdkStreamDimension.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(r.value=s.SdkDimensionValue.toObject(e.value,t)),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDimension"},"getTypeUrl"),a.Type=function(){var i={},e=Object.create(i);return e[i[1]="VIDEO_ENCODER_NAME"]=1,e[i[2]="VIDEO_DECODER_NAME"]=2,e}(),a}(),s.SdkDimensionValue=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkDimensionValue"),a.prototype.stringValue="",a.prototype.boolValue=!1,a.prototype.uintValue=g.Long?g.Long.fromBits(0,0,!0):0,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.stringValue!=null&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(10).string(e.stringValue),e.boolValue!=null&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),e.uintValue!=null&&Object.hasOwnProperty.call(e,"uintValue")&&t.uint32(24).uint64(e.uintValue),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkDimensionValue;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.stringValue=e.string();break}case 2:{o.boolValue=e.bool();break}case 3:{o.uintValue=e.uint64();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.stringValue!=null&&e.hasOwnProperty("stringValue")&&!g.isString(e.stringValue)?"stringValue: string expected":e.boolValue!=null&&e.hasOwnProperty("boolValue")&&typeof e.boolValue!="boolean"?"boolValue: boolean expected":e.uintValue!=null&&e.hasOwnProperty("uintValue")&&!g.isInteger(e.uintValue)&&!(e.uintValue&&g.isInteger(e.uintValue.low)&&g.isInteger(e.uintValue.high))?"uintValue: integer|Long expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkDimensionValue)return e;var t=new s.SdkDimensionValue;return e.stringValue!=null&&(t.stringValue=String(e.stringValue)),e.boolValue!=null&&(t.boolValue=Boolean(e.boolValue)),e.uintValue!=null&&(g.Long?(t.uintValue=g.Long.fromValue(e.uintValue)).unsigned=!0:typeof e.uintValue=="string"?t.uintValue=parseInt(e.uintValue,10):typeof e.uintValue=="number"?t.uintValue=e.uintValue:typeof e.uintValue=="object"&&(t.uintValue=new g.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0))),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if(t.defaults)if(r.stringValue="",r.boolValue=!1,g.Long){var o=new g.Long(0,0,!0);r.uintValue=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.uintValue=t.longs===String?"0":0;return e.stringValue!=null&&e.hasOwnProperty("stringValue")&&(r.stringValue=e.stringValue),e.boolValue!=null&&e.hasOwnProperty("boolValue")&&(r.boolValue=e.boolValue),e.uintValue!=null&&e.hasOwnProperty("uintValue")&&(typeof e.uintValue=="number"?r.uintValue=t.longs===String?String(e.uintValue):e.uintValue:r.uintValue=t.longs===String?g.Long.prototype.toString.call(e.uintValue):t.longs===Number?new g.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0):e.uintValue),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDimensionValue"},"getTypeUrl"),a}(),s.SdkDataMessageFrame=function(){function a(i){if(this.messages=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkDataMessageFrame"),a.prototype.messages=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.messages!=null&&e.messages.length)for(var r=0;r<e.messages.length;++r)s.SdkDataMessagePayload.encode(e.messages[r],t.uint32(10).fork()).ldelim();return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkDataMessageFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.messages&&o.messages.length||(o.messages=[]),o.messages.push(s.SdkDataMessagePayload.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.messages!=null&&e.hasOwnProperty("messages")){if(!Array.isArray(e.messages))return"messages: array expected";for(var t=0;t<e.messages.length;++t){var r=s.SdkDataMessagePayload.verify(e.messages[t]);if(r)return"messages."+r}}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkDataMessageFrame)return e;var t=new s.SdkDataMessageFrame;if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".SdkDataMessageFrame.messages: array expected");t.messages=[];for(var r=0;r<e.messages.length;++r){if(typeof e.messages[r]!="object")throw TypeError(".SdkDataMessageFrame.messages: object expected");t.messages[r]=s.SdkDataMessagePayload.fromObject(e.messages[r])}}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.messages=[]),e.messages&&e.messages.length){r.messages=[];for(var o=0;o<e.messages.length;++o)r.messages[o]=s.SdkDataMessagePayload.toObject(e.messages[o],t)}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessageFrame"},"getTypeUrl"),a}(),s.SdkDataMessagePayload=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkDataMessagePayload"),a.prototype.topic="",a.prototype.data=g.newBuffer([]),a.prototype.lifetimeMs=0,a.prototype.senderAttendeeId="",a.prototype.ingestTimeNs=g.Long?g.Long.fromBits(0,0,!1):0,a.prototype.senderExternalUserId="",a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.topic!=null&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),e.data!=null&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),e.lifetimeMs!=null&&Object.hasOwnProperty.call(e,"lifetimeMs")&&t.uint32(24).uint32(e.lifetimeMs),e.senderAttendeeId!=null&&Object.hasOwnProperty.call(e,"senderAttendeeId")&&t.uint32(34).string(e.senderAttendeeId),e.ingestTimeNs!=null&&Object.hasOwnProperty.call(e,"ingestTimeNs")&&t.uint32(40).int64(e.ingestTimeNs),e.senderExternalUserId!=null&&Object.hasOwnProperty.call(e,"senderExternalUserId")&&t.uint32(50).string(e.senderExternalUserId),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkDataMessagePayload;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.topic=e.string();break}case 2:{o.data=e.bytes();break}case 3:{o.lifetimeMs=e.uint32();break}case 4:{o.senderAttendeeId=e.string();break}case 5:{o.ingestTimeNs=e.int64();break}case 6:{o.senderExternalUserId=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.topic!=null&&e.hasOwnProperty("topic")&&!g.isString(e.topic)?"topic: string expected":e.data!=null&&e.hasOwnProperty("data")&&!(e.data&&typeof e.data.length=="number"||g.isString(e.data))?"data: buffer expected":e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&!g.isInteger(e.lifetimeMs)?"lifetimeMs: integer expected":e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&!g.isString(e.senderAttendeeId)?"senderAttendeeId: string expected":e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&!g.isInteger(e.ingestTimeNs)&&!(e.ingestTimeNs&&g.isInteger(e.ingestTimeNs.low)&&g.isInteger(e.ingestTimeNs.high))?"ingestTimeNs: integer|Long expected":e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&!g.isString(e.senderExternalUserId)?"senderExternalUserId: string expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkDataMessagePayload)return e;var t=new s.SdkDataMessagePayload;return e.topic!=null&&(t.topic=String(e.topic)),e.data!=null&&(typeof e.data=="string"?g.base64.decode(e.data,t.data=g.newBuffer(g.base64.length(e.data)),0):e.data.length>=0&&(t.data=e.data)),e.lifetimeMs!=null&&(t.lifetimeMs=e.lifetimeMs>>>0),e.senderAttendeeId!=null&&(t.senderAttendeeId=String(e.senderAttendeeId)),e.ingestTimeNs!=null&&(g.Long?(t.ingestTimeNs=g.Long.fromValue(e.ingestTimeNs)).unsigned=!1:typeof e.ingestTimeNs=="string"?t.ingestTimeNs=parseInt(e.ingestTimeNs,10):typeof e.ingestTimeNs=="number"?t.ingestTimeNs=e.ingestTimeNs:typeof e.ingestTimeNs=="object"&&(t.ingestTimeNs=new g.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber())),e.senderExternalUserId!=null&&(t.senderExternalUserId=String(e.senderExternalUserId)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if(t.defaults){if(r.topic="",t.bytes===String?r.data="":(r.data=[],t.bytes!==Array&&(r.data=g.newBuffer(r.data))),r.lifetimeMs=0,r.senderAttendeeId="",g.Long){var o=new g.Long(0,0,!1);r.ingestTimeNs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.ingestTimeNs=t.longs===String?"0":0;r.senderExternalUserId=""}return e.topic!=null&&e.hasOwnProperty("topic")&&(r.topic=e.topic),e.data!=null&&e.hasOwnProperty("data")&&(r.data=t.bytes===String?g.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&(r.lifetimeMs=e.lifetimeMs),e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&(r.senderAttendeeId=e.senderAttendeeId),e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&(typeof e.ingestTimeNs=="number"?r.ingestTimeNs=t.longs===String?String(e.ingestTimeNs):e.ingestTimeNs:r.ingestTimeNs=t.longs===String?g.Long.prototype.toString.call(e.ingestTimeNs):t.longs===Number?new g.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber():e.ingestTimeNs),e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&(r.senderExternalUserId=e.senderExternalUserId),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessagePayload"},"getTypeUrl"),a}(),s.SdkTurnCredentials=function(){function a(i){if(this.uris=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkTurnCredentials"),a.prototype.username="",a.prototype.password="",a.prototype.ttl=0,a.prototype.uris=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.username!=null&&Object.hasOwnProperty.call(e,"username")&&t.uint32(10).string(e.username),e.password!=null&&Object.hasOwnProperty.call(e,"password")&&t.uint32(18).string(e.password),e.ttl!=null&&Object.hasOwnProperty.call(e,"ttl")&&t.uint32(24).uint32(e.ttl),e.uris!=null&&e.uris.length)for(var r=0;r<e.uris.length;++r)t.uint32(34).string(e.uris[r]);return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkTurnCredentials;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.username=e.string();break}case 2:{o.password=e.string();break}case 3:{o.ttl=e.uint32();break}case 4:{o.uris&&o.uris.length||(o.uris=[]),o.uris.push(e.string());break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.username!=null&&e.hasOwnProperty("username")&&!g.isString(e.username))return"username: string expected";if(e.password!=null&&e.hasOwnProperty("password")&&!g.isString(e.password))return"password: string expected";if(e.ttl!=null&&e.hasOwnProperty("ttl")&&!g.isInteger(e.ttl))return"ttl: integer expected";if(e.uris!=null&&e.hasOwnProperty("uris")){if(!Array.isArray(e.uris))return"uris: array expected";for(var t=0;t<e.uris.length;++t)if(!g.isString(e.uris[t]))return"uris: string[] expected"}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkTurnCredentials)return e;var t=new s.SdkTurnCredentials;if(e.username!=null&&(t.username=String(e.username)),e.password!=null&&(t.password=String(e.password)),e.ttl!=null&&(t.ttl=e.ttl>>>0),e.uris){if(!Array.isArray(e.uris))throw TypeError(".SdkTurnCredentials.uris: array expected");t.uris=[];for(var r=0;r<e.uris.length;++r)t.uris[r]=String(e.uris[r])}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.uris=[]),t.defaults&&(r.username="",r.password="",r.ttl=0),e.username!=null&&e.hasOwnProperty("username")&&(r.username=e.username),e.password!=null&&e.hasOwnProperty("password")&&(r.password=e.password),e.ttl!=null&&e.hasOwnProperty("ttl")&&(r.ttl=e.ttl),e.uris&&e.uris.length){r.uris=[];for(var o=0;o<e.uris.length;++o)r.uris[o]=e.uris[o]}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTurnCredentials"},"getTypeUrl"),a}(),s.SdkTranscriptItem=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkTranscriptItem"),a.prototype.content="",a.prototype.endTime=g.Long?g.Long.fromBits(0,0,!1):0,a.prototype.speakerAttendeeId="",a.prototype.speakerExternalUserId="",a.prototype.startTime=g.Long?g.Long.fromBits(0,0,!1):0,a.prototype.type=1,a.prototype.vocabularyFilterMatch=!1,a.prototype.confidence=0,a.prototype.stable=!1,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(10).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(16).int64(e.endTime),e.speakerAttendeeId!=null&&Object.hasOwnProperty.call(e,"speakerAttendeeId")&&t.uint32(26).string(e.speakerAttendeeId),e.speakerExternalUserId!=null&&Object.hasOwnProperty.call(e,"speakerExternalUserId")&&t.uint32(34).string(e.speakerExternalUserId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(48).int32(e.type),e.vocabularyFilterMatch!=null&&Object.hasOwnProperty.call(e,"vocabularyFilterMatch")&&t.uint32(56).bool(e.vocabularyFilterMatch),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(65).double(e.confidence),e.stable!=null&&Object.hasOwnProperty.call(e,"stable")&&t.uint32(72).bool(e.stable),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkTranscriptItem;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.content=e.string();break}case 2:{o.endTime=e.int64();break}case 3:{o.speakerAttendeeId=e.string();break}case 4:{o.speakerExternalUserId=e.string();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.int32();break}case 7:{o.vocabularyFilterMatch=e.bool();break}case 8:{o.confidence=e.double();break}case 9:{o.stable=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.content!=null&&e.hasOwnProperty("content")&&!g.isString(e.content))return"content: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!g.isInteger(e.endTime)&&!(e.endTime&&g.isInteger(e.endTime.low)&&g.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&!g.isString(e.speakerAttendeeId))return"speakerAttendeeId: string expected";if(e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&!g.isString(e.speakerExternalUserId))return"speakerExternalUserId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!g.isInteger(e.startTime)&&!(e.startTime&&g.isInteger(e.startTime.low)&&g.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&typeof e.vocabularyFilterMatch!="boolean"?"vocabularyFilterMatch: boolean expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.stable!=null&&e.hasOwnProperty("stable")&&typeof e.stable!="boolean"?"stable: boolean expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkTranscriptItem)return e;var t=new s.SdkTranscriptItem;switch(e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(g.Long?(t.endTime=g.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.speakerAttendeeId!=null&&(t.speakerAttendeeId=String(e.speakerAttendeeId)),e.speakerExternalUserId!=null&&(t.speakerExternalUserId=String(e.speakerExternalUserId)),e.startTime!=null&&(g.Long?(t.startTime=g.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PRONUNCIATION":case 1:t.type=1;break;case"PUNCTUATION":case 2:t.type=2;break}return e.vocabularyFilterMatch!=null&&(t.vocabularyFilterMatch=Boolean(e.vocabularyFilterMatch)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.stable!=null&&(t.stable=Boolean(e.stable)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if(t.defaults){if(r.content="",g.Long){var o=new g.Long(0,0,!1);r.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.endTime=t.longs===String?"0":0;if(r.speakerAttendeeId="",r.speakerExternalUserId="",g.Long){var o=new g.Long(0,0,!1);r.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.startTime=t.longs===String?"0":0;r.type=t.enums===String?"PRONUNCIATION":1,r.vocabularyFilterMatch=!1,r.confidence=0,r.stable=!1}return e.content!=null&&e.hasOwnProperty("content")&&(r.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?r.endTime=t.longs===String?String(e.endTime):e.endTime:r.endTime=t.longs===String?g.Long.prototype.toString.call(e.endTime):t.longs===Number?new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&(r.speakerAttendeeId=e.speakerAttendeeId),e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&(r.speakerExternalUserId=e.speakerExternalUserId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?r.startTime=t.longs===String?String(e.startTime):e.startTime:r.startTime=t.longs===String?g.Long.prototype.toString.call(e.startTime):t.longs===Number?new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(r.type=t.enums===String?s.SdkTranscriptItem.Type[e.type]===void 0?e.type:s.SdkTranscriptItem.Type[e.type]:e.type),e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&(r.vocabularyFilterMatch=e.vocabularyFilterMatch),e.confidence!=null&&e.hasOwnProperty("confidence")&&(r.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.stable!=null&&e.hasOwnProperty("stable")&&(r.stable=e.stable),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptItem"},"getTypeUrl"),a.Type=function(){var i={},e=Object.create(i);return e[i[1]="PRONUNCIATION"]=1,e[i[2]="PUNCTUATION"]=2,e}(),a}(),s.SdkTranscriptEntity=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkTranscriptEntity"),a.prototype.category="",a.prototype.confidence=0,a.prototype.content="",a.prototype.endTime=g.Long?g.Long.fromBits(0,0,!1):0,a.prototype.startTime=g.Long?g.Long.fromBits(0,0,!1):0,a.prototype.type="",a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.category!=null&&Object.hasOwnProperty.call(e,"category")&&t.uint32(10).string(e.category),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(17).double(e.confidence),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(26).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(32).int64(e.endTime),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(50).string(e.type),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkTranscriptEntity;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.category=e.string();break}case 2:{o.confidence=e.double();break}case 3:{o.content=e.string();break}case 4:{o.endTime=e.int64();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.category!=null&&e.hasOwnProperty("category")&&!g.isString(e.category)?"category: string expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.content!=null&&e.hasOwnProperty("content")&&!g.isString(e.content)?"content: string expected":e.endTime!=null&&e.hasOwnProperty("endTime")&&!g.isInteger(e.endTime)&&!(e.endTime&&g.isInteger(e.endTime.low)&&g.isInteger(e.endTime.high))?"endTime: integer|Long expected":e.startTime!=null&&e.hasOwnProperty("startTime")&&!g.isInteger(e.startTime)&&!(e.startTime&&g.isInteger(e.startTime.low)&&g.isInteger(e.startTime.high))?"startTime: integer|Long expected":e.type!=null&&e.hasOwnProperty("type")&&!g.isString(e.type)?"type: string expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkTranscriptEntity)return e;var t=new s.SdkTranscriptEntity;return e.category!=null&&(t.category=String(e.category)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(g.Long?(t.endTime=g.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.startTime!=null&&(g.Long?(t.startTime=g.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type!=null&&(t.type=String(e.type)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if(t.defaults){if(r.category="",r.confidence=0,r.content="",g.Long){var o=new g.Long(0,0,!1);r.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.endTime=t.longs===String?"0":0;if(g.Long){var o=new g.Long(0,0,!1);r.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.startTime=t.longs===String?"0":0;r.type=""}return e.category!=null&&e.hasOwnProperty("category")&&(r.category=e.category),e.confidence!=null&&e.hasOwnProperty("confidence")&&(r.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.content!=null&&e.hasOwnProperty("content")&&(r.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?r.endTime=t.longs===String?String(e.endTime):e.endTime:r.endTime=t.longs===String?g.Long.prototype.toString.call(e.endTime):t.longs===Number?new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?r.startTime=t.longs===String?String(e.startTime):e.startTime:r.startTime=t.longs===String?g.Long.prototype.toString.call(e.startTime):t.longs===Number?new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(r.type=e.type),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptEntity"},"getTypeUrl"),a}(),s.SdkTranscriptAlternative=function(){function a(i){if(this.items=[],this.entities=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkTranscriptAlternative"),a.prototype.items=g.emptyArray,a.prototype.transcript="",a.prototype.entities=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.items!=null&&e.items.length)for(var r=0;r<e.items.length;++r)s.SdkTranscriptItem.encode(e.items[r],t.uint32(10).fork()).ldelim();if(e.transcript!=null&&Object.hasOwnProperty.call(e,"transcript")&&t.uint32(18).string(e.transcript),e.entities!=null&&e.entities.length)for(var r=0;r<e.entities.length;++r)s.SdkTranscriptEntity.encode(e.entities[r],t.uint32(26).fork()).ldelim();return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkTranscriptAlternative;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.items&&o.items.length||(o.items=[]),o.items.push(s.SdkTranscriptItem.decode(e,e.uint32()));break}case 2:{o.transcript=e.string();break}case 3:{o.entities&&o.entities.length||(o.entities=[]),o.entities.push(s.SdkTranscriptEntity.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.items!=null&&e.hasOwnProperty("items")){if(!Array.isArray(e.items))return"items: array expected";for(var t=0;t<e.items.length;++t){var r=s.SdkTranscriptItem.verify(e.items[t]);if(r)return"items."+r}}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&!g.isString(e.transcript))return"transcript: string expected";if(e.entities!=null&&e.hasOwnProperty("entities")){if(!Array.isArray(e.entities))return"entities: array expected";for(var t=0;t<e.entities.length;++t){var r=s.SdkTranscriptEntity.verify(e.entities[t]);if(r)return"entities."+r}}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkTranscriptAlternative)return e;var t=new s.SdkTranscriptAlternative;if(e.items){if(!Array.isArray(e.items))throw TypeError(".SdkTranscriptAlternative.items: array expected");t.items=[];for(var r=0;r<e.items.length;++r){if(typeof e.items[r]!="object")throw TypeError(".SdkTranscriptAlternative.items: object expected");t.items[r]=s.SdkTranscriptItem.fromObject(e.items[r])}}if(e.transcript!=null&&(t.transcript=String(e.transcript)),e.entities){if(!Array.isArray(e.entities))throw TypeError(".SdkTranscriptAlternative.entities: array expected");t.entities=[];for(var r=0;r<e.entities.length;++r){if(typeof e.entities[r]!="object")throw TypeError(".SdkTranscriptAlternative.entities: object expected");t.entities[r]=s.SdkTranscriptEntity.fromObject(e.entities[r])}}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.items=[],r.entities=[]),t.defaults&&(r.transcript=""),e.items&&e.items.length){r.items=[];for(var o=0;o<e.items.length;++o)r.items[o]=s.SdkTranscriptItem.toObject(e.items[o],t)}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&(r.transcript=e.transcript),e.entities&&e.entities.length){r.entities=[];for(var o=0;o<e.entities.length;++o)r.entities[o]=s.SdkTranscriptEntity.toObject(e.entities[o],t)}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptAlternative"},"getTypeUrl"),a}(),s.SdkTranscriptLanguageWithScore=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkTranscriptLanguageWithScore"),a.prototype.languageCode="",a.prototype.score=0,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(10).string(e.languageCode),e.score!=null&&Object.hasOwnProperty.call(e,"score")&&t.uint32(17).double(e.score),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkTranscriptLanguageWithScore;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.languageCode=e.string();break}case 2:{o.score=e.double();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!g.isString(e.languageCode)?"languageCode: string expected":e.score!=null&&e.hasOwnProperty("score")&&typeof e.score!="number"?"score: number expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkTranscriptLanguageWithScore)return e;var t=new s.SdkTranscriptLanguageWithScore;return e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.score!=null&&(t.score=Number(e.score)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.languageCode="",r.score=0),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(r.languageCode=e.languageCode),e.score!=null&&e.hasOwnProperty("score")&&(r.score=t.json&&!isFinite(e.score)?String(e.score):e.score),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptLanguageWithScore"},"getTypeUrl"),a}(),s.SdkTranscriptResult=function(){function a(i){if(this.alternatives=[],this.languageIdentification=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkTranscriptResult"),a.prototype.alternatives=g.emptyArray,a.prototype.channelId="",a.prototype.endTime=g.Long?g.Long.fromBits(0,0,!1):0,a.prototype.isPartial=!1,a.prototype.resultId="",a.prototype.startTime=g.Long?g.Long.fromBits(0,0,!1):0,a.prototype.languageCode="",a.prototype.languageIdentification=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.alternatives!=null&&e.alternatives.length)for(var r=0;r<e.alternatives.length;++r)s.SdkTranscriptAlternative.encode(e.alternatives[r],t.uint32(10).fork()).ldelim();if(e.channelId!=null&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(24).int64(e.endTime),e.isPartial!=null&&Object.hasOwnProperty.call(e,"isPartial")&&t.uint32(32).bool(e.isPartial),e.resultId!=null&&Object.hasOwnProperty.call(e,"resultId")&&t.uint32(42).string(e.resultId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(48).int64(e.startTime),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(58).string(e.languageCode),e.languageIdentification!=null&&e.languageIdentification.length)for(var r=0;r<e.languageIdentification.length;++r)s.SdkTranscriptLanguageWithScore.encode(e.languageIdentification[r],t.uint32(66).fork()).ldelim();return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkTranscriptResult;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.alternatives&&o.alternatives.length||(o.alternatives=[]),o.alternatives.push(s.SdkTranscriptAlternative.decode(e,e.uint32()));break}case 2:{o.channelId=e.string();break}case 3:{o.endTime=e.int64();break}case 4:{o.isPartial=e.bool();break}case 5:{o.resultId=e.string();break}case 6:{o.startTime=e.int64();break}case 7:{o.languageCode=e.string();break}case 8:{o.languageIdentification&&o.languageIdentification.length||(o.languageIdentification=[]),o.languageIdentification.push(s.SdkTranscriptLanguageWithScore.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.alternatives!=null&&e.hasOwnProperty("alternatives")){if(!Array.isArray(e.alternatives))return"alternatives: array expected";for(var t=0;t<e.alternatives.length;++t){var r=s.SdkTranscriptAlternative.verify(e.alternatives[t]);if(r)return"alternatives."+r}}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&!g.isString(e.channelId))return"channelId: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!g.isInteger(e.endTime)&&!(e.endTime&&g.isInteger(e.endTime.low)&&g.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.isPartial!=null&&e.hasOwnProperty("isPartial")&&typeof e.isPartial!="boolean")return"isPartial: boolean expected";if(e.resultId!=null&&e.hasOwnProperty("resultId")&&!g.isString(e.resultId))return"resultId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!g.isInteger(e.startTime)&&!(e.startTime&&g.isInteger(e.startTime.low)&&g.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!g.isString(e.languageCode))return"languageCode: string expected";if(e.languageIdentification!=null&&e.hasOwnProperty("languageIdentification")){if(!Array.isArray(e.languageIdentification))return"languageIdentification: array expected";for(var t=0;t<e.languageIdentification.length;++t){var r=s.SdkTranscriptLanguageWithScore.verify(e.languageIdentification[t]);if(r)return"languageIdentification."+r}}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkTranscriptResult)return e;var t=new s.SdkTranscriptResult;if(e.alternatives){if(!Array.isArray(e.alternatives))throw TypeError(".SdkTranscriptResult.alternatives: array expected");t.alternatives=[];for(var r=0;r<e.alternatives.length;++r){if(typeof e.alternatives[r]!="object")throw TypeError(".SdkTranscriptResult.alternatives: object expected");t.alternatives[r]=s.SdkTranscriptAlternative.fromObject(e.alternatives[r])}}if(e.channelId!=null&&(t.channelId=String(e.channelId)),e.endTime!=null&&(g.Long?(t.endTime=g.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.isPartial!=null&&(t.isPartial=Boolean(e.isPartial)),e.resultId!=null&&(t.resultId=String(e.resultId)),e.startTime!=null&&(g.Long?(t.startTime=g.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.languageIdentification){if(!Array.isArray(e.languageIdentification))throw TypeError(".SdkTranscriptResult.languageIdentification: array expected");t.languageIdentification=[];for(var r=0;r<e.languageIdentification.length;++r){if(typeof e.languageIdentification[r]!="object")throw TypeError(".SdkTranscriptResult.languageIdentification: object expected");t.languageIdentification[r]=s.SdkTranscriptLanguageWithScore.fromObject(e.languageIdentification[r])}}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.alternatives=[],r.languageIdentification=[]),t.defaults){if(r.channelId="",g.Long){var o=new g.Long(0,0,!1);r.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.endTime=t.longs===String?"0":0;if(r.isPartial=!1,r.resultId="",g.Long){var o=new g.Long(0,0,!1);r.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.startTime=t.longs===String?"0":0;r.languageCode=""}if(e.alternatives&&e.alternatives.length){r.alternatives=[];for(var f=0;f<e.alternatives.length;++f)r.alternatives[f]=s.SdkTranscriptAlternative.toObject(e.alternatives[f],t)}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&(r.channelId=e.channelId),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?r.endTime=t.longs===String?String(e.endTime):e.endTime:r.endTime=t.longs===String?g.Long.prototype.toString.call(e.endTime):t.longs===Number?new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.isPartial!=null&&e.hasOwnProperty("isPartial")&&(r.isPartial=e.isPartial),e.resultId!=null&&e.hasOwnProperty("resultId")&&(r.resultId=e.resultId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?r.startTime=t.longs===String?String(e.startTime):e.startTime:r.startTime=t.longs===String?g.Long.prototype.toString.call(e.startTime):t.longs===Number?new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(r.languageCode=e.languageCode),e.languageIdentification&&e.languageIdentification.length){r.languageIdentification=[];for(var f=0;f<e.languageIdentification.length;++f)r.languageIdentification[f]=s.SdkTranscriptLanguageWithScore.toObject(e.languageIdentification[f],t)}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptResult"},"getTypeUrl"),a}(),s.SdkTranscript=function(){function a(i){if(this.results=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkTranscript"),a.prototype.results=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.results!=null&&e.results.length)for(var r=0;r<e.results.length;++r)s.SdkTranscriptResult.encode(e.results[r],t.uint32(10).fork()).ldelim();return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkTranscript;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.results&&o.results.length||(o.results=[]),o.results.push(s.SdkTranscriptResult.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.results!=null&&e.hasOwnProperty("results")){if(!Array.isArray(e.results))return"results: array expected";for(var t=0;t<e.results.length;++t){var r=s.SdkTranscriptResult.verify(e.results[t]);if(r)return"results."+r}}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkTranscript)return e;var t=new s.SdkTranscript;if(e.results){if(!Array.isArray(e.results))throw TypeError(".SdkTranscript.results: array expected");t.results=[];for(var r=0;r<e.results.length;++r){if(typeof e.results[r]!="object")throw TypeError(".SdkTranscript.results: object expected");t.results[r]=s.SdkTranscriptResult.fromObject(e.results[r])}}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.results=[]),e.results&&e.results.length){r.results=[];for(var o=0;o<e.results.length;++o)r.results[o]=s.SdkTranscriptResult.toObject(e.results[o],t)}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscript"},"getTypeUrl"),a}(),s.SdkTranscriptionStatus=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkTranscriptionStatus"),a.prototype.type=1,a.prototype.eventTime=g.Long?g.Long.fromBits(0,0,!1):0,a.prototype.transcriptionRegion="",a.prototype.transcriptionConfiguration="",a.prototype.message="",a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.eventTime!=null&&Object.hasOwnProperty.call(e,"eventTime")&&t.uint32(16).int64(e.eventTime),e.transcriptionRegion!=null&&Object.hasOwnProperty.call(e,"transcriptionRegion")&&t.uint32(26).string(e.transcriptionRegion),e.transcriptionConfiguration!=null&&Object.hasOwnProperty.call(e,"transcriptionConfiguration")&&t.uint32(34).string(e.transcriptionConfiguration),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(42).string(e.message),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkTranscriptionStatus;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.eventTime=e.int64();break}case 3:{o.transcriptionRegion=e.string();break}case 4:{o.transcriptionConfiguration=e.string();break}case 5:{o.message=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:break}return e.eventTime!=null&&e.hasOwnProperty("eventTime")&&!g.isInteger(e.eventTime)&&!(e.eventTime&&g.isInteger(e.eventTime.low)&&g.isInteger(e.eventTime.high))?"eventTime: integer|Long expected":e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&!g.isString(e.transcriptionRegion)?"transcriptionRegion: string expected":e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&!g.isString(e.transcriptionConfiguration)?"transcriptionConfiguration: string expected":e.message!=null&&e.hasOwnProperty("message")&&!g.isString(e.message)?"message: string expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkTranscriptionStatus)return e;var t=new s.SdkTranscriptionStatus;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"STARTED":case 1:t.type=1;break;case"INTERRUPTED":case 2:t.type=2;break;case"RESUMED":case 3:t.type=3;break;case"STOPPED":case 4:t.type=4;break;case"FAILED":case 5:t.type=5;break}return e.eventTime!=null&&(g.Long?(t.eventTime=g.Long.fromValue(e.eventTime)).unsigned=!1:typeof e.eventTime=="string"?t.eventTime=parseInt(e.eventTime,10):typeof e.eventTime=="number"?t.eventTime=e.eventTime:typeof e.eventTime=="object"&&(t.eventTime=new g.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber())),e.transcriptionRegion!=null&&(t.transcriptionRegion=String(e.transcriptionRegion)),e.transcriptionConfiguration!=null&&(t.transcriptionConfiguration=String(e.transcriptionConfiguration)),e.message!=null&&(t.message=String(e.message)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if(t.defaults){if(r.type=t.enums===String?"STARTED":1,g.Long){var o=new g.Long(0,0,!1);r.eventTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.eventTime=t.longs===String?"0":0;r.transcriptionRegion="",r.transcriptionConfiguration="",r.message=""}return e.type!=null&&e.hasOwnProperty("type")&&(r.type=t.enums===String?s.SdkTranscriptionStatus.Type[e.type]===void 0?e.type:s.SdkTranscriptionStatus.Type[e.type]:e.type),e.eventTime!=null&&e.hasOwnProperty("eventTime")&&(typeof e.eventTime=="number"?r.eventTime=t.longs===String?String(e.eventTime):e.eventTime:r.eventTime=t.longs===String?g.Long.prototype.toString.call(e.eventTime):t.longs===Number?new g.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber():e.eventTime),e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&(r.transcriptionRegion=e.transcriptionRegion),e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&(r.transcriptionConfiguration=e.transcriptionConfiguration),e.message!=null&&e.hasOwnProperty("message")&&(r.message=e.message),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptionStatus"},"getTypeUrl"),a.Type=function(){var i={},e=Object.create(i);return e[i[1]="STARTED"]=1,e[i[2]="INTERRUPTED"]=2,e[i[3]="RESUMED"]=3,e[i[4]="STOPPED"]=4,e[i[5]="FAILED"]=5,e}(),a}(),s.SdkTranscriptEvent=function(){function a(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)e[t[r]]!=null&&(this[t[r]]=e[t[r]])}n(a,"SdkTranscriptEvent"),a.prototype.status=null,a.prototype.transcript=null;var i;return Object.defineProperty(a.prototype,"Event",{get:g.oneOfGetter(i=["status","transcript"]),set:g.oneOfSetter(i)}),a.create=n(function(t){return new a(t)},"create"),a.encode=n(function(t,r){return r||(r=v.create()),t.status!=null&&Object.hasOwnProperty.call(t,"status")&&s.SdkTranscriptionStatus.encode(t.status,r.uint32(10).fork()).ldelim(),t.transcript!=null&&Object.hasOwnProperty.call(t,"transcript")&&s.SdkTranscript.encode(t.transcript,r.uint32(18).fork()).ldelim(),r},"encode"),a.encodeDelimited=n(function(t,r){return this.encode(t,r).ldelim()},"encodeDelimited"),a.decode=n(function(t,r){t instanceof m||(t=m.create(t));for(var o=r===void 0?t.len:t.pos+r,f=new s.SdkTranscriptEvent;t.pos<o;){var h=t.uint32();switch(h>>>3){case 1:{f.status=s.SdkTranscriptionStatus.decode(t,t.uint32());break}case 2:{f.transcript=s.SdkTranscript.decode(t,t.uint32());break}default:t.skipType(h&7);break}}return f},"decode"),a.decodeDelimited=n(function(t){return t instanceof m||(t=new m(t)),this.decode(t,t.uint32())},"decodeDelimited"),a.verify=n(function(t){if(typeof t!="object"||t===null)return"object expected";var r={};if(t.status!=null&&t.hasOwnProperty("status")){r.Event=1;{var o=s.SdkTranscriptionStatus.verify(t.status);if(o)return"status."+o}}if(t.transcript!=null&&t.hasOwnProperty("transcript")){if(r.Event===1)return"Event: multiple values";r.Event=1;{var o=s.SdkTranscript.verify(t.transcript);if(o)return"transcript."+o}}return null},"verify"),a.fromObject=n(function(t){if(t instanceof s.SdkTranscriptEvent)return t;var r=new s.SdkTranscriptEvent;if(t.status!=null){if(typeof t.status!="object")throw TypeError(".SdkTranscriptEvent.status: object expected");r.status=s.SdkTranscriptionStatus.fromObject(t.status)}if(t.transcript!=null){if(typeof t.transcript!="object")throw TypeError(".SdkTranscriptEvent.transcript: object expected");r.transcript=s.SdkTranscript.fromObject(t.transcript)}return r},"fromObject"),a.toObject=n(function(t,r){r||(r={});var o={};return t.status!=null&&t.hasOwnProperty("status")&&(o.status=s.SdkTranscriptionStatus.toObject(t.status,r),r.oneofs&&(o.Event="status")),t.transcript!=null&&t.hasOwnProperty("transcript")&&(o.transcript=s.SdkTranscript.toObject(t.transcript,r),r.oneofs&&(o.Event="transcript")),o},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(t){return t===void 0&&(t="type.googleapis.com"),t+"/SdkTranscriptEvent"},"getTypeUrl"),a}(),s.SdkTranscriptFrame=function(){function a(i){if(this.events=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkTranscriptFrame"),a.prototype.events=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.events!=null&&e.events.length)for(var r=0;r<e.events.length;++r)s.SdkTranscriptEvent.encode(e.events[r],t.uint32(10).fork()).ldelim();return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkTranscriptFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.events&&o.events.length||(o.events=[]),o.events.push(s.SdkTranscriptEvent.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.events!=null&&e.hasOwnProperty("events")){if(!Array.isArray(e.events))return"events: array expected";for(var t=0;t<e.events.length;++t){var r=s.SdkTranscriptEvent.verify(e.events[t]);if(r)return"events."+r}}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkTranscriptFrame)return e;var t=new s.SdkTranscriptFrame;if(e.events){if(!Array.isArray(e.events))throw TypeError(".SdkTranscriptFrame.events: array expected");t.events=[];for(var r=0;r<e.events.length;++r){if(typeof e.events[r]!="object")throw TypeError(".SdkTranscriptFrame.events: object expected");t.events[r]=s.SdkTranscriptEvent.fromObject(e.events[r])}}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.events=[]),e.events&&e.events.length){r.events=[];for(var o=0;o<e.events.length;++o)r.events[o]=s.SdkTranscriptEvent.toObject(e.events[o],t)}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptFrame"},"getTypeUrl"),a}(),s.SdkRemoteVideoUpdateFrame=function(){function a(i){if(this.addedOrUpdatedVideoSubscriptions=[],this.removedVideoSubscriptionMids=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkRemoteVideoUpdateFrame"),a.prototype.addedOrUpdatedVideoSubscriptions=g.emptyArray,a.prototype.removedVideoSubscriptionMids=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.addedOrUpdatedVideoSubscriptions!=null&&e.addedOrUpdatedVideoSubscriptions.length)for(var r=0;r<e.addedOrUpdatedVideoSubscriptions.length;++r)s.SdkVideoSubscriptionConfiguration.encode(e.addedOrUpdatedVideoSubscriptions[r],t.uint32(10).fork()).ldelim();if(e.removedVideoSubscriptionMids!=null&&e.removedVideoSubscriptionMids.length)for(var r=0;r<e.removedVideoSubscriptionMids.length;++r)t.uint32(18).string(e.removedVideoSubscriptionMids[r]);return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkRemoteVideoUpdateFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.addedOrUpdatedVideoSubscriptions&&o.addedOrUpdatedVideoSubscriptions.length||(o.addedOrUpdatedVideoSubscriptions=[]),o.addedOrUpdatedVideoSubscriptions.push(s.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}case 2:{o.removedVideoSubscriptionMids&&o.removedVideoSubscriptionMids.length||(o.removedVideoSubscriptionMids=[]),o.removedVideoSubscriptionMids.push(e.string());break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.addedOrUpdatedVideoSubscriptions!=null&&e.hasOwnProperty("addedOrUpdatedVideoSubscriptions")){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))return"addedOrUpdatedVideoSubscriptions: array expected";for(var t=0;t<e.addedOrUpdatedVideoSubscriptions.length;++t){var r=s.SdkVideoSubscriptionConfiguration.verify(e.addedOrUpdatedVideoSubscriptions[t]);if(r)return"addedOrUpdatedVideoSubscriptions."+r}}if(e.removedVideoSubscriptionMids!=null&&e.hasOwnProperty("removedVideoSubscriptionMids")){if(!Array.isArray(e.removedVideoSubscriptionMids))return"removedVideoSubscriptionMids: array expected";for(var t=0;t<e.removedVideoSubscriptionMids.length;++t)if(!g.isString(e.removedVideoSubscriptionMids[t]))return"removedVideoSubscriptionMids: string[] expected"}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkRemoteVideoUpdateFrame)return e;var t=new s.SdkRemoteVideoUpdateFrame;if(e.addedOrUpdatedVideoSubscriptions){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: array expected");t.addedOrUpdatedVideoSubscriptions=[];for(var r=0;r<e.addedOrUpdatedVideoSubscriptions.length;++r){if(typeof e.addedOrUpdatedVideoSubscriptions[r]!="object")throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: object expected");t.addedOrUpdatedVideoSubscriptions[r]=s.SdkVideoSubscriptionConfiguration.fromObject(e.addedOrUpdatedVideoSubscriptions[r])}}if(e.removedVideoSubscriptionMids){if(!Array.isArray(e.removedVideoSubscriptionMids))throw TypeError(".SdkRemoteVideoUpdateFrame.removedVideoSubscriptionMids: array expected");t.removedVideoSubscriptionMids=[];for(var r=0;r<e.removedVideoSubscriptionMids.length;++r)t.removedVideoSubscriptionMids[r]=String(e.removedVideoSubscriptionMids[r])}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.addedOrUpdatedVideoSubscriptions=[],r.removedVideoSubscriptionMids=[]),e.addedOrUpdatedVideoSubscriptions&&e.addedOrUpdatedVideoSubscriptions.length){r.addedOrUpdatedVideoSubscriptions=[];for(var o=0;o<e.addedOrUpdatedVideoSubscriptions.length;++o)r.addedOrUpdatedVideoSubscriptions[o]=s.SdkVideoSubscriptionConfiguration.toObject(e.addedOrUpdatedVideoSubscriptions[o],t)}if(e.removedVideoSubscriptionMids&&e.removedVideoSubscriptionMids.length){r.removedVideoSubscriptionMids=[];for(var o=0;o<e.removedVideoSubscriptionMids.length;++o)r.removedVideoSubscriptionMids[o]=e.removedVideoSubscriptionMids[o]}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkRemoteVideoUpdateFrame"},"getTypeUrl"),a}(),s.SdkVideoQualityAdaptationPreference=function(){var a={},i=Object.create(a);return i[a[1]="BALANCED"]=1,i[a[2]="MAINTAIN_FRAMERATE"]=2,i[a[3]="MAINTAIN_RESOLUTION"]=3,i}(),s.SdkVideoSubscriptionConfiguration=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkVideoSubscriptionConfiguration"),a.prototype.mid="",a.prototype.attendeeId="",a.prototype.streamId=0,a.prototype.priority=0,a.prototype.targetBitrateKbps=0,a.prototype.groupId=0,a.prototype.qualityAdaptationPreference=1,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),t.uint32(10).string(e.mid),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.priority!=null&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(32).uint32(e.priority),e.targetBitrateKbps!=null&&Object.hasOwnProperty.call(e,"targetBitrateKbps")&&t.uint32(40).uint32(e.targetBitrateKbps),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.qualityAdaptationPreference!=null&&Object.hasOwnProperty.call(e,"qualityAdaptationPreference")&&t.uint32(56).int32(e.qualityAdaptationPreference),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkVideoSubscriptionConfiguration;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.mid=e.string();break}case 2:{o.attendeeId=e.string();break}case 3:{o.streamId=e.uint32();break}case 4:{o.priority=e.uint32();break}case 5:{o.targetBitrateKbps=e.uint32();break}case 6:{o.groupId=e.uint32();break}case 7:{o.qualityAdaptationPreference=e.int32();break}default:e.skipType(f&7);break}}if(!o.hasOwnProperty("mid"))throw g.ProtocolError("missing required 'mid'",{instance:o});return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(!g.isString(e.mid))return"mid: string expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!g.isString(e.attendeeId))return"attendeeId: string expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!g.isInteger(e.streamId))return"streamId: integer expected";if(e.priority!=null&&e.hasOwnProperty("priority")&&!g.isInteger(e.priority))return"priority: integer expected";if(e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&!g.isInteger(e.targetBitrateKbps))return"targetBitrateKbps: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!g.isInteger(e.groupId))return"groupId: integer expected";if(e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference"))switch(e.qualityAdaptationPreference){default:return"qualityAdaptationPreference: enum value expected";case 1:case 2:case 3:break}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkVideoSubscriptionConfiguration)return e;var t=new s.SdkVideoSubscriptionConfiguration;switch(e.mid!=null&&(t.mid=String(e.mid)),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.priority!=null&&(t.priority=e.priority>>>0),e.targetBitrateKbps!=null&&(t.targetBitrateKbps=e.targetBitrateKbps>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.qualityAdaptationPreference){default:if(typeof e.qualityAdaptationPreference=="number"){t.qualityAdaptationPreference=e.qualityAdaptationPreference;break}break;case"BALANCED":case 1:t.qualityAdaptationPreference=1;break;case"MAINTAIN_FRAMERATE":case 2:t.qualityAdaptationPreference=2;break;case"MAINTAIN_RESOLUTION":case 3:t.qualityAdaptationPreference=3;break}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.mid="",r.attendeeId="",r.streamId=0,r.priority=0,r.targetBitrateKbps=0,r.groupId=0,r.qualityAdaptationPreference=t.enums===String?"BALANCED":1),e.mid!=null&&e.hasOwnProperty("mid")&&(r.mid=e.mid),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(r.attendeeId=e.attendeeId),e.streamId!=null&&e.hasOwnProperty("streamId")&&(r.streamId=e.streamId),e.priority!=null&&e.hasOwnProperty("priority")&&(r.priority=e.priority),e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&(r.targetBitrateKbps=e.targetBitrateKbps),e.groupId!=null&&e.hasOwnProperty("groupId")&&(r.groupId=e.groupId),e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference")&&(r.qualityAdaptationPreference=t.enums===String?s.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]===void 0?e.qualityAdaptationPreference:s.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]:e.qualityAdaptationPreference),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkVideoSubscriptionConfiguration"},"getTypeUrl"),a}(),s.SdkNotificationFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkNotificationFrame"),a.prototype.level=3,a.prototype.message="",a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.level!=null&&Object.hasOwnProperty.call(e,"level")&&t.uint32(8).int32(e.level),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkNotificationFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.level=e.int32();break}case 2:{o.message=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.level!=null&&e.hasOwnProperty("level"))switch(e.level){default:return"level: enum value expected";case 1:case 2:case 3:break}return e.message!=null&&e.hasOwnProperty("message")&&!g.isString(e.message)?"message: string expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkNotificationFrame)return e;var t=new s.SdkNotificationFrame;switch(e.level){case"INFO":case 1:t.level=1;break;case"WARNING":case 2:t.level=2;break;default:if(typeof e.level=="number"){t.level=e.level;break}break;case"ERROR":case 3:t.level=3;break}return e.message!=null&&(t.message=String(e.message)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.level=t.enums===String?"ERROR":3,r.message=""),e.level!=null&&e.hasOwnProperty("level")&&(r.level=t.enums===String?s.SdkNotificationFrame.NotificationLevel[e.level]===void 0?e.level:s.SdkNotificationFrame.NotificationLevel[e.level]:e.level),e.message!=null&&e.hasOwnProperty("message")&&(r.message=e.message),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkNotificationFrame"},"getTypeUrl"),a.NotificationLevel=function(){var i={},e=Object.create(i);return e[i[1]="INFO"]=1,e[i[2]="WARNING"]=2,e[i[3]="ERROR"]=3,e}(),a}(),s.SdkPrimaryMeetingJoinFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkPrimaryMeetingJoinFrame"),a.prototype.credentials=null,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.credentials!=null&&Object.hasOwnProperty.call(e,"credentials")&&s.SdkMeetingSessionCredentials.encode(e.credentials,t.uint32(10).fork()).ldelim(),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkPrimaryMeetingJoinFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.credentials=s.SdkMeetingSessionCredentials.decode(e,e.uint32());break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.credentials!=null&&e.hasOwnProperty("credentials")){var t=s.SdkMeetingSessionCredentials.verify(e.credentials);if(t)return"credentials."+t}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkPrimaryMeetingJoinFrame)return e;var t=new s.SdkPrimaryMeetingJoinFrame;if(e.credentials!=null){if(typeof e.credentials!="object")throw TypeError(".SdkPrimaryMeetingJoinFrame.credentials: object expected");t.credentials=s.SdkMeetingSessionCredentials.fromObject(e.credentials)}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.credentials=null),e.credentials!=null&&e.hasOwnProperty("credentials")&&(r.credentials=s.SdkMeetingSessionCredentials.toObject(e.credentials,t)),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinFrame"},"getTypeUrl"),a}(),s.SdkPrimaryMeetingJoinAckFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkPrimaryMeetingJoinAckFrame"),a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkPrimaryMeetingJoinAckFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),a.fromObject=n(function(e){return e instanceof s.SdkPrimaryMeetingJoinAckFrame?e:new s.SdkPrimaryMeetingJoinAckFrame},"fromObject"),a.toObject=n(function(){return{}},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinAckFrame"},"getTypeUrl"),a}(),s.SdkPrimaryMeetingLeaveFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkPrimaryMeetingLeaveFrame"),a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkPrimaryMeetingLeaveFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),a.fromObject=n(function(e){return e instanceof s.SdkPrimaryMeetingLeaveFrame?e:new s.SdkPrimaryMeetingLeaveFrame},"fromObject"),a.toObject=n(function(){return{}},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingLeaveFrame"},"getTypeUrl"),a}(),s.SdkMeetingSessionCredentials=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkMeetingSessionCredentials"),a.prototype.attendeeId="",a.prototype.externalUserId="",a.prototype.joinToken="",a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(10).string(e.attendeeId),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(18).string(e.externalUserId),e.joinToken!=null&&Object.hasOwnProperty.call(e,"joinToken")&&t.uint32(26).string(e.joinToken),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkMeetingSessionCredentials;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.attendeeId=e.string();break}case 2:{o.externalUserId=e.string();break}case 3:{o.joinToken=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!g.isString(e.attendeeId)?"attendeeId: string expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!g.isString(e.externalUserId)?"externalUserId: string expected":e.joinToken!=null&&e.hasOwnProperty("joinToken")&&!g.isString(e.joinToken)?"joinToken: string expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkMeetingSessionCredentials)return e;var t=new s.SdkMeetingSessionCredentials;return e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.joinToken!=null&&(t.joinToken=String(e.joinToken)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.attendeeId="",r.externalUserId="",r.joinToken=""),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(r.attendeeId=e.attendeeId),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(r.externalUserId=e.externalUserId),e.joinToken!=null&&e.hasOwnProperty("joinToken")&&(r.joinToken=e.joinToken),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMeetingSessionCredentials"},"getTypeUrl"),a}(),s.SdkVideoCodecCapability=function(){var a={},i=Object.create(a);return i[a[1]="VP8"]=1,i[a[2]="H264_BASELINE_PROFILE"]=2,i[a[3]="H264_CONSTRAINED_BASELINE_PROFILE"]=3,i[a[4]="H264_MAIN_PROFILE"]=4,i[a[5]="H264_HIGH_PROFILE"]=5,i[a[6]="H264_CONSTRAINED_HIGH_PROFILE"]=6,i[a[8]="VP9_PROFILE_0"]=8,i[a[11]="AV1_MAIN_PROFILE"]=11,i}(),H.exports=s,g.Long=void 0,u.configure()},7924674822:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const v=c(7288346005),g=c(1668212732),s=m(c(6885109343));let a=n(class{makeTwoDigits(e){return e>9?e.toString():"0"+e.toString()}hmac(e,t){const r=new v.Sha256(t);return r.update(e),r.digest()}getDateTimeString(){const e=new Date;return e.getUTCFullYear()+this.makeTwoDigits(e.getUTCMonth()+1)+this.makeTwoDigits(e.getUTCDate())+"T"+this.makeTwoDigits(e.getUTCHours())+this.makeTwoDigits(e.getUTCMinutes())+this.makeTwoDigits(e.getUTCSeconds())+"Z"}getDateString(e){return e.substring(0,e.indexOf("T"))}getSignatureKey(e,t,r,o){return u(this,void 0,void 0,function*(){const f=yield this.hmac(t,"AWS4"+e),h=yield this.hmac(r,f),p=yield this.hmac(o,h);return yield this.hmac("aws4_request",p)})}signURL(e,t,r,o,f,h,p){return u(this,void 0,void 0,function*(){const d=this.getDateTimeString(),y=this.getDateString(d),S="AWS4-HMAC-SHA256";let b="";this.chimeClient.config.region instanceof Function?b=yield this.chimeClient.config.region():b=this.chimeClient.config.region;const _="host",C="host:"+o.toLowerCase()+`
`,w=y+"/"+b+"/"+r+"/aws4_request";let R;this.chimeClient.config.credentials instanceof Function?R=yield this.chimeClient.config.credentials():R=this.chimeClient.config.credentials;let O=new Map;O.set("X-Amz-Algorithm",[S]),O.set("X-Amz-Credential",[encodeURIComponent(R.accessKeyId+"/"+w)]),O.set("X-Amz-Date",[d]),O.set("X-Amz-Expires",["10"]),O.set("X-Amz-SignedHeaders",["host"]),R.sessionToken&&O.set("X-Amz-Security-Token",[encodeURIComponent(R.sessionToken)]),O.set(s.default.X_AMZN_VERSION,[encodeURIComponent(s.default.sdkVersion)]),O.set(s.default.X_AMZN_USER_AGENT,[encodeURIComponent(s.default.sdkUserAgentLowResolution)]),p==null||p.forEach((J,Q)=>{const oe=encodeURIComponent(Q);J.sort().forEach($=>{O.has(oe)||O.set(oe,[]),O.get(oe).push(encodeURIComponent($))})});let D="";O=new Map([...O.entries()].sort()),O.forEach((J,Q)=>{J.forEach(oe=>{D.length&&(D+="&"),D+=Q+"="+oe})});const I=e+`
`+f+`
`+D+`
`+C+`
`+_+`
`+g.toHex(yield this.hmac(h)),M=g.toHex(yield this.hmac(I)),k=`AWS4-HMAC-SHA256
`+d+`
`+y+"/"+b+"/"+r+`/aws4_request
`+M,N=yield this.getSignatureKey(R.secretAccessKey,y,b,r),j=g.toHex(yield this.hmac(k,N)),B=D+"&X-Amz-Signature="+j;return t+"://"+o+f+"?"+B})}constructor(e){this.chimeClient=e}},"DefaultSigV4");l.default=a},9131051489:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SimulcastLayers=void 0;var c;(function(u){u[u.Low=0]="Low",u[u.LowAndMedium=1]="LowAndMedium",u[u.LowAndHigh=2]="LowAndHigh",u[u.Medium=3]="Medium",u[u.MediumAndHigh=4]="MediumAndHigh",u[u.High=5]="High"})(c=l.SimulcastLayers||(l.SimulcastLayers={})),l.default=c},4882678815:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.AudioLogEvent=void 0;var c;(function(u){u[u.DeviceChanged=0]="DeviceChanged",u[u.MutedLocal=1]="MutedLocal",u[u.UnmutedLocal=2]="UnmutedLocal",u[u.Connected=3]="Connected",u[u.ConnectFailed=4]="ConnectFailed",u[u.RedmicStartLoss=5]="RedmicStartLoss",u[u.RedmicEndLoss=6]="RedmicEndLoss"})(c=l.AudioLogEvent||(l.AudioLogEvent={})),l.default=c},4562177071:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(y,S,b,_){function C(w){return w instanceof b?w:new b(function(R){R(w)})}return n(C,"adopt"),new(b||(b=Promise))(function(w,R){function O(M){try{I(_.next(M))}catch(k){R(k)}}n(O,"fulfilled");function D(M){try{I(_.throw(M))}catch(k){R(k)}}n(D,"rejected");function I(M){M.done?w(M.value):C(M.value).then(O,D)}n(I,"step"),I((_=_.apply(y,S||[])).next())})},m=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(9029233041)),g=m(c(6502873558)),s=m(c(6132421099)),a=m(c(3237015968)),i=m(c(6172292806)),e=m(c(2234819701)),t=m(c(546597810)),r=m(c(9877075638)),o=c(4136617125),f=c(6527539809),h=m(c(4882678815)),p=m(c(1404048602));let d=n(class kf{toAttribute(S){return this.toSuffix(S).substring(1)}toSuffix(S){return S.toLowerCase()===S?`_${S}`:S.toUpperCase()===S?`_${S.toLowerCase()}`:S.replace(/([A-Z][a-z]+)/g,function(b){return`_${b}`}).replace(/([A-Z][A-Z]+)/g,function(b){return`_${b}`}).toLowerCase()}logLatency(S,b,_){const C=this.toSuffix(S);this.logEventTime("meeting"+C,b,_)}logStateTimeout(S,b){const _=this.toSuffix(S);this.logEvent("meeting_session_state_timeout",Object.assign(Object.assign({},b),{state:`state${_}`}))}logAudioEvent(S,b){const _="audio"+this.toSuffix(h.default[S]);this.logEvent(_,b)}logVideoEvent(S,b){const _="video"+this.toSuffix(p.default[S]);this.logEvent(_,b)}logEventTime(S,b){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const C=Object.assign(Object.assign({},_),{call_id:this.audioVideoController.configuration.meetingId,client_type:kf.CLIENT_TYPE,metric_type:"latency"});this.logger.debug(()=>`[StatsCollector] ${S}: ${JSON.stringify(C)}`),this.metricsAddTime(S,b,C)}logMeetingSessionStatus(S){const b=`${S.statusCode()}`;this.logEvent(b);const _={status:b,status_code:`${S.statusCode()}`};this.logEvent("meeting_session_status",_),S.isTerminal()&&this.logEvent("meeting_session_stopped",_),S.isAudioConnectionFailure()&&this.logEvent("meeting_session_audio_failed",_),S.isFailure()&&this.logEvent("meeting_session_failed",_)}logLifecycleEvent(S,b){const _={lifecycle_event:`lifecycle${this.toSuffix(e.default[S])}`,lifecycle_event_code:`${S}`,lifecycle_event_condition:`condition${this.toSuffix(t.default[b])}`,lifecycle_event_condition_code:`${b}`};this.logEvent("meeting_session_lifecycle",_)}logEvent(S){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const _=Object.assign(Object.assign({},b),{call_id:this.audioVideoController.configuration.meetingId,client_type:kf.CLIENT_TYPE});this.logger.debug(()=>`[StatsCollector] ${S}: ${JSON.stringify(_)}`),this.metricsLogEvent(S,_)}start(S,b){return this.intervalScheduler?!1:(this.logger.info("Starting StatsCollector"),this.signalingClient=S,this.videoStreamIndex=b,this.clientMetricReport=new v.default(this.logger,this.videoStreamIndex,this.audioVideoController.configuration.credentials.attendeeId),this.intervalScheduler=new r.default(this.interval),this.intervalScheduler.start(()=>u(this,void 0,void 0,function*(){yield this.getStatsWrapper()})),!0)}stop(){this.logger.info("Stopping StatsCollector"),this.intervalScheduler&&this.intervalScheduler.stop(),this.intervalScheduler=null}updateMetricValues(S,b){const _=b?this.clientMetricReport.streamMetricReports[Number(S.ssrc)]:this.clientMetricReport.globalMetricReport;let C;b?C=this.clientMetricReport.getMetricMap(_.mediaType,_.direction):C=this.clientMetricReport.getMetricMap();for(const w in S)w in C&&(typeof S[w]=="number"?(_.previousMetrics[w]=_.currentMetrics[w],_.currentMetrics[w]=S[w]):typeof S[w]=="string"?_.currentStringMetrics[w]=S[w]:typeof S[w]=="object"?(_.previousObjectMetrics[w]=_.currentObjectMetrics[w]===void 0?S[w]:_.currentObjectMetrics[w],_.currentObjectMetrics[w]=S[w]):this.logger.error(`Unknown metric value type ${typeof S[w]} for metric ${w}`))}processRawMetricReports(S){this.clientMetricReport.currentSsrcs={};const b=Date.now();for(const _ of S){const C=this.isStreamRawMetricReport(_.type);if(C){const w=this.clientMetricReport.streamMetricReports[Number(_.ssrc)];if(w)w.mediaType===s.default.VIDEO&&w.direction===g.default.UPSTREAM?w.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(_.rid):w.streamId=this.videoStreamIndex.streamIdForSSRC(Number(_.ssrc));else{const R=new i.default;R.mediaType=this.getMediaType(_),R.direction=this.getDirectionType(_),R.mediaType===s.default.VIDEO&&R.direction===g.default.UPSTREAM?R.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(_.rid):this.videoStreamIndex.allStreams().empty()||(R.streamId=this.videoStreamIndex.streamIdForSSRC(Number(_.ssrc)),this.videoStreamIndex.groupIdForSSRC!==void 0&&(R.groupId=this.videoStreamIndex.groupIdForSSRC(Number(_.ssrc)))),this.clientMetricReport.streamMetricReports[Number(_.ssrc)]=R}this.clientMetricReport.currentSsrcs[Number(_.ssrc)]=1}this.updateMetricValues(_,C)}this.clientMetricReport.removeDestroyedSsrcs(),this.clientMetricReport.previousTimestampMs=this.clientMetricReport.currentTimestampMs,this.clientMetricReport.currentTimestampMs=b,this.clientMetricReport.print()}addStreamMetricDimensionFrames(S,b){const _=this.clientMetricReport.getStreamDimensionMap();for(const C in b.currentStringMetrics)if(C in _){const w=o.SdkStreamDimension.create();w.type=_[C];const R=o.SdkDimensionValue.create();R.stringValue=b.currentStringMetrics[C],w.value=R,S.dimensions.push(w)}}addMetricFrame(S,b,_,C){const w=_.type,R=_.transform,O=_.source,D=b.streamMetricFrames.length,I=b.streamMetricFrames[D-1];if(w){const M=o.SdkMetric.create();M.type=w,M.value=R(O||S,C),C?I.metrics.push(M):b.globalMetrics.push(M)}}addGlobalMetricsToProtobuf(S){const b=this.clientMetricReport.getMetricMap();for(const _ in this.clientMetricReport.globalMetricReport.currentMetrics)this.addMetricFrame(_,S,b[_])}addStreamMetricsToProtobuf(S){for(const b in this.clientMetricReport.streamMetricReports){const _=this.clientMetricReport.streamMetricReports[b],C=o.SdkStreamMetricFrame.create();C.streamId=_.streamId,C.metrics=[],this.addStreamMetricDimensionFrames(C,_),S.streamMetricFrames.push(C);const w=this.clientMetricReport.getMetricMap(_.mediaType,_.direction);for(const R in _.currentMetrics)this.addMetricFrame(R,S,w[R],Number(b));for(const R in _.currentStringMetrics)this.addMetricFrame(R,S,w[R],Number(b));for(const R in _.currentObjectMetrics)this.addMetricFrame(R,S,w[R],Number(b))}}makeClientMetricProtobuf(){const S=o.SdkClientMetricFrame.create();return S.globalMetrics=[],S.streamMetricFrames=[],this.addGlobalMetricsToProtobuf(S),this.addStreamMetricsToProtobuf(S),S}sendClientMetricProtobuf(S){this.signalingClient.sendClientMetrics(S)}isStreamRawMetricReport(S){return["inbound-rtp","inbound-rtp-red","outbound-rtp","remote-inbound-rtp","remote-outbound-rtp"].includes(S)}getMediaType(S){return S.kind==="audio"?s.default.AUDIO:s.default.VIDEO}getDirectionType(S){const{type:b}=S;return b==="inbound-rtp"||b==="remote-outbound-rtp"||b==="inbound-rtp-red"?g.default.DOWNSTREAM:g.default.UPSTREAM}isValidStandardRawMetric(S){return S.type==="inbound-rtp"||S.type==="inbound-rtp-red"||S.type==="outbound-rtp"||S.type==="remote-inbound-rtp"||S.type==="remote-outbound-rtp"||S.type==="candidate-pair"&&S.state==="succeeded"||S.type==="media-source"&&S.kind==="audio"}isValidSsrc(S){let b=!0;return this.isStreamRawMetricReport(S.type)&&this.getDirectionType(S)===g.default.DOWNSTREAM&&this.getMediaType(S)===s.default.VIDEO&&(b=this.videoStreamIndex.streamIdForSSRC(Number(S.ssrc))>0),b}isValidRawMetricReport(S){return this.isValidStandardRawMetric(S)&&this.isValidSsrc(S)}filterRawMetricReports(S){const b=[];for(const _ of S)this.isValidRawMetricReport(_)&&b.push(_);return b}handleRawMetricReports(S){const b=this.filterRawMetricReports(S);this.logger.debug(()=>`Filtered raw metrics : ${JSON.stringify(b)}`);const _=[];this.maybeAddRedRecoveryMetrics(_),this.addVideoCodecDegradationMetrics(_),this.clientMetricReport.customStatsReports=_,b.push(..._),this.processRawMetricReports(b);const C=this.makeClientMetricProtobuf();this.sendClientMetricProtobuf(C),this.audioVideoController.forEachObserver(w=>{f.Maybe.of(w.metricsDidReceive).map(R=>R.bind(w)(this.clientMetricReport.clone()))})}getStatsWrapper(){return u(this,void 0,void 0,function*(){if(!this.audioVideoController.rtcPeerConnection)return;const S=[];try{const b=yield this.audioVideoController.rtcPeerConnection.getStats();this.clientMetricReport.rtcStatsReport=b,b.forEach(_=>{S.push(_)}),this.handleRawMetricReports(S)}catch(b){this.logger.error(b.message)}})}overrideObservableMetric(S,b){this.clientMetricReport.overrideObservableMetric(S,b)}recoveryMetricsDidReceive(S){this.redRecoveryMetricReport=S}maybeAddRedRecoveryMetrics(S){this.redRecoveryMetricReport.currentTimestampMs!==this.lastRedRecoveryMetricReportConsumedTimestampMs&&(S.push({kind:"audio",type:"inbound-rtp-red",ssrc:this.redRecoveryMetricReport.ssrc,timestamp:this.redRecoveryMetricReport.currentTimestampMs,totalAudioPacketsLost:this.redRecoveryMetricReport.totalAudioPacketsLost,totalAudioPacketsExpected:this.redRecoveryMetricReport.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.redRecoveryMetricReport.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.redRecoveryMetricReport.totalAudioPacketsRecoveredFec}),this.lastRedRecoveryMetricReportConsumedTimestampMs=this.redRecoveryMetricReport.currentTimestampMs)}videoCodecDegradationHighEncodeCpuDidReceive(){this.videoCodecDegradationHighEncodeCpuCount+=1}videoCodecDegradationEncodeFailureDidReceive(){this.videoCodecDegradationEncodeFailureCount+=1}addVideoCodecDegradationMetrics(S){const b=this.clientMetricReport.getVideoUpstreamSsrc();b!==null&&S.push({kind:"video",type:"outbound-rtp",ssrc:b,timestamp:Date.now(),videoCodecDegradationHighEncodeCpu:this.videoCodecDegradationHighEncodeCpuCount,videoCodecDegradationEncodeFailure:this.videoCodecDegradationEncodeFailureCount}),this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0}constructor(S,b,_=kf.INTERVAL_MS){this.audioVideoController=S,this.logger=b,this.interval=_,this.intervalScheduler=null,this.redRecoveryMetricReport=new a.default,this.lastRedRecoveryMetricReportConsumedTimestampMs=0,this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0,this.metricsAddTime=(C,w,R)=>{},this.metricsLogEvent=(C,w)=>{}}},"StatsCollector");l.default=d,d.INTERVAL_MS=1e3,d.CLIENT_TYPE="amazon-chime-sdk-js"},1404048602:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoLogEvent=void 0;var c;(function(u){u[u.InputAttached=0]="InputAttached",u[u.SendingFailed=1]="SendingFailed",u[u.SendingSuccess=2]="SendingSuccess"})(c=l.VideoLogEvent||(l.VideoLogEvent={})),l.default=c},4713678292:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(1404048602)),g=m(c(5009059128));let s=n(class extends g.default{run(){return u(this,void 0,void 0,function*(){const i=this.context.transceiverController;i.setPeer(this.context.peer),i.setupLocalTransceivers();const e=this.context.activeAudioInput;if(e){const r=e.getAudioTracks();this.context.logger.info("attaching audio track to peer connection"),yield i.setAudioInput(r.length?r[0]:null)}else yield i.setAudioInput(null),this.context.logger.info("no audio track");this.setAudioCodecPreferences();const t=this.context.activeVideoInput;if(t){const r=t.getVideoTracks(),o=r.length?r[0]:null;if(this.context.logger.info("attaching video track to peer connection"),yield i.setVideoInput(o),this.context.enableSimulcast&&this.context.videoUplinkBandwidthPolicy){const f=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();i.setEncodingParameters(f)}o&&this.context.statsCollector.logVideoEvent(v.default.InputAttached,this.context.videoDeviceInformation)}else yield i.setVideoInput(null),this.context.logger.info("no video track");this.context.videoSubscriptions=i.updateVideoTransceivers(this.context.videoStreamIndex,this.context.videosToReceive),this.context.videoStreamIndex.subscribeFrameSent()})}setAudioCodecPreferences(){const i=window.RTCRtpTransceiver&&"setCodecPreferences"in window.RTCRtpTransceiver.prototype,e=this.context.audioProfile.hasRedundancyEnabled();if(!i){this.context.logger.warn("Setting codec preferences not supported");return}const t=this.context.transceiverController.localAudioTransceiver(),{codecs:r}=RTCRtpSender.getCapabilities("audio");this.context.logger.debug(`Available audio codecs ${JSON.stringify(r,null,4)}`);const o=r.findIndex(f=>f.mimeType==="audio/red");if(!t){this.context.logger.error("audio transceiver is null");return}if(o>=0){const f=r[o];r.splice(o,1),e?(r.unshift(f),this.context.logger.info("audio/red set as preferred codec")):this.context.logger.info("audio/red removed from preferred codec"),t.setCodecPreferences(r);return}this.context.logger.info("audio/red codec not supported")}constructor(i){super(i.logger),this.context=i,this.taskName="AttachMediaInputTask"}},"AttachMediaInputTask");l.default=s},5009059128:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(7537135456)),g=m(c(6013191119));let s=n(class{once(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return new v.default(this.logger,this,e)}cancel(){}name(){return this.parentTask?`${this.parentTask.name()}/${this.taskName}`:this.taskName}setParent(i){this.parentTask=i}getStatus(){return this.status}logAndThrow(i){throw this.logger.info(i),new Error(i)}baseRun(i){return u(this,void 0,void 0,function*(){try{const e=Date.now();switch(this.logger.info(`running task ${this.name()}`),this.status){case g.default.RUNNING:this.logAndThrow(`${this.name()} is already running`);case g.default.CANCELED:this.logAndThrow(`${this.name()} was canceled before running`);case g.default.FINISHED:this.logAndThrow(`${this.name()} was already finished`)}this.status=g.default.RUNNING,yield i.call(this),this.logger.info(`${this.name()} took ${Math.round(Date.now()-e)} ms`)}catch(e){throw e}finally{this.status!==g.default.CANCELED&&(this.status=g.default.FINISHED)}})}baseCancel(i){if(this.status===g.default.CANCELED||this.status===g.default.FINISHED){this.logger.info(`Not canceling ${this.name()}: state is ${this.status}`);return}this.logger.info(`canceling task ${this.name()}`),this.status=g.default.CANCELED,i.call(this)}constructor(i){this.logger=i,this.taskName="BaseTask",this.parentTask=null,this.status=g.default.IDLE,this.run=this.baseRun.bind(this,this.run),this.cancel=this.baseCancel.bind(this,this.cancel)}},"BaseTask");l.default=s},9089081530:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(s,a,i,e){function t(r){return r instanceof i?r:new i(function(o){o(r)})}return n(t,"adopt"),new(i||(i=Promise))(function(r,o){function f(d){try{p(e.next(d))}catch(y){o(y)}}n(f,"fulfilled");function h(d){try{p(e.throw(d))}catch(y){o(y)}}n(h,"rejected");function p(d){d.done?r(d.value):t(d.value).then(f,h)}n(p,"step"),p((e=e.apply(s,a||[])).next())})},m=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(5009059128));let g=n(class extends v.default{run(){return u(this,void 0,void 0,function*(){this.context.resetConnectionSpecificState()})}constructor(a){super(a.logger),this.context=a,this.taskName="CleanRestartedSessionTask"}},"CleanRestartedSessionTask");l.default=g},5703332651:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(7969706599)),g=m(c(5009059128));let s=n(class extends g.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){try{this.context.signalingClient.ready()&&(this.context.signalingClient.closeConnection(),yield this.receiveWebSocketClosedEvent())}catch(i){throw i}finally{for(const e of this.context.removableObservers)e.removeObserver();this.context.resetConnectionSpecificState(),this.context.statsCollector.stop(),this.context.statsCollector=null,this.context.connectionMonitor.stop(),this.context.connectionMonitor=null,this.context.videoUplinkBandwidthPolicy.setTransceiverController&&this.context.videoUplinkBandwidthPolicy.setTransceiverController(void 0),this.context.videoDownlinkBandwidthPolicy.bindToTileController&&this.context.videoDownlinkBandwidthPolicy.bindToTileController(void 0);const i=this.context.videoTileController.getLocalVideoTile();i&&i.bindVideoStream("",!0,null,null,null,null),this.context.videoTileController.removeAllVideoTiles()}})}receiveWebSocketClosedEvent(){return new Promise((i,e)=>{let t=n(class{cancel(){this.signalingClient.removeObserver(this),e(new Error("CleanStoppedSessionTask got canceled while waiting for the WebSocket closed event"))}handleSignalingClientEvent(f){f.type===v.default.WebSocketClosed&&(this.signalingClient.removeObserver(this),i())}constructor(f){this.signalingClient=f}},"Interceptor");const r=new t(this.context.signalingClient);this.taskCanceler=r,this.context.signalingClient.registerObserver(r)})}constructor(i){super(i.logger),this.context=i,this.taskName="CleanStoppedSessionTask",this.taskCanceler=null}},"CleanStoppedSessionTask");l.default=s},9049733277:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(s,a,i,e){function t(r){return r instanceof i?r:new i(function(o){o(r)})}return n(t,"adopt"),new(i||(i=Promise))(function(r,o){function f(d){try{p(e.next(d))}catch(y){o(y)}}n(f,"fulfilled");function h(d){try{p(e.throw(d))}catch(y){o(y)}}n(h,"rejected");function p(d){d.done?r(d.value):t(d.value).then(f,h)}n(p,"step"),p((e=e.apply(s,a||[])).next())})},m=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(5009059128));let g=n(class extends v.default{removeObserver(){this.removeTrackAddedEventListener&&this.removeTrackAddedEventListener();for(const a in this.removeTrackRemovedEventListeners)this.removeTrackRemovedEventListeners[a]()}addPeerConnectionEventLogger(){const a=this.context.peer;a.addEventListener("connectionstatechange",()=>{this.context.logger.info(`peer connection state changed: ${a.connectionState}`)}),a.addEventListener("negotiationneeded",()=>{this.context.logger.info("peer connection negotiation is needed")}),a.addEventListener("icegatheringstatechange",()=>{this.context.logger.info(`peer connection ice gathering state changed: ${a.iceGatheringState}`)}),a.addEventListener("icecandidate",i=>{this.context.logger.info(`peer connection ice candidate: ${i.candidate?i.candidate.candidate:"(null)"}`)}),a.addEventListener("iceconnectionstatechange",()=>{this.context.logger.info(`peer connection ice connection state changed: ${a.iceConnectionState}`)})}run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this);const i=this.context.turnCredentials&&this.context.turnCredentials.uris.length>0?{iceServers:[{urls:this.context.turnCredentials.uris,username:this.context.turnCredentials.username,credential:this.context.turnCredentials.password,credentialType:"password"}],iceTransportPolicy:"relay"}:{};i.bundlePolicy=this.context.browserBehavior.requiresBundlePolicy(),i.sdpSemantics="unified-plan",i.encodedInsertableStreams=this.context.audioProfile.hasRedundancyEnabled(),this.context.peer?this.context.logger.info("reusing peer connection"):(this.context.logger.info("creating new peer connection"),this.context.peer=new RTCPeerConnection(i),this.addPeerConnectionEventLogger()),this.removeTrackAddedEventListener=()=>{this.context.peer&&this.context.peer.removeEventListener("track",this.trackAddedHandler),this.removeTrackAddedEventListener=null},this.context.peer.addEventListener("track",this.trackAddedHandler)})}trackIsVideoInput(a){return this.context.transceiverController.useTransceivers()?(this.logger.debug(()=>"getting video track type"),this.context.transceiverController.trackIsVideoInput(a)):!1}addRemoteVideoTrack(a,i){var e;const t=i.id,r=this.context.videoStreamIndex.attendeeIdForTrack(t);let o,f;if(this.context.videoTileController.getVideoTileForAttendeeId?(f=this.context.videoTileController.getVideoTileForAttendeeId(r),o=!!(!((e=f==null?void 0:f.state())===null||e===void 0)&&e.boundVideoStream)):o=this.context.videoTileController.haveVideoTileForAttendeeId(r),o){this.context.logger.info(`Not adding remote track. Already have tile for attendeeId:  ${r}`);return}f||(f=this.context.videoTileController.addVideoTile(),this.logger.info(`Created video tile ${f.id()}`));let h=this.context.videoStreamIndex.streamIdForTrack(t);typeof h>"u"&&(this.logger.warn(`stream not found for tile=${f.id()} track=${t}`),h=null);let p=this.context.videoStreamIndex.groupIdForStreamId(h);p===void 0&&(p=null);for(let w=0;w<this.trackEvents.length;w++){const R=this.trackEvents[w],O=i.getVideoTracks();if(O&&O.length){const D=O[0],I=n(()=>{this.context.logger.info(`received the ${R} event for tile=${f.id()} id=${a.id} streamId=${h}`),R==="ended"&&this.removeRemoteVideoTrack(a,f.state())},"callback");D.addEventListener(R,I),this.removeVideoTrackEventListeners[a.id]||(this.removeVideoTrackEventListeners[a.id]=[]),this.removeVideoTrackEventListeners[a.id].push(()=>{D.removeEventListener(R,I)})}}let d,y;if(a.getSettings){const w=a.getSettings();d=w.width,y=w.height}else{const w=a.getCapabilities();d=w.width,y=w.height}const S=this.context.videoStreamIndex.externalUserIdForTrack(t);f.bindVideoStream(r,!1,i,d,y,h,S,p),this.logger.info(`video track added, use tile=${f.id()} track=${t} streamId=${h} groupId=${p}`);const b="removetrack",_=i,C=n(()=>this.removeRemoteVideoTrack(a,f.state()),"trackRemovedHandler");this.removeTrackRemovedEventListeners[a.id]=()=>{_.removeEventListener(b,C),delete this.removeTrackRemovedEventListeners[a.id]},_.addEventListener(b,C)}removeRemoteVideoTrack(a,i){if(this.removeTrackRemovedEventListeners.hasOwnProperty(a.id)){this.removeTrackRemovedEventListeners[a.id]();for(const e of this.removeVideoTrackEventListeners[a.id])e();delete this.removeVideoTrackEventListeners[a.id]}this.logger.info(`video track ended, removing tile=${i.tileId} id=${a.id} stream=${i.streamId}`),i.streamId?this.context.videosPaused.remove(i.streamId):this.logger.warn(`no stream found for tile=${i.tileId}`),this.context.videoTileController.removeVideoTile(i.tileId)}constructor(a){super(a.logger),this.context=a,this.taskName="CreatePeerConnectionTask",this.removeTrackAddedEventListener=null,this.removeTrackRemovedEventListeners={},this.trackEvents=["ended","mute","unmute","isolationchange","overconstrained"],this.removeVideoTrackEventListeners={},this.trackAddedHandler=i=>{const e=i.track;if(this.context.logger.info(`received track event: kind=${e.kind} id=${e.id} label=${e.label}`),i.transceiver&&i.transceiver.currentDirection==="inactive")return;if(i.streams.length===0){this.context.logger.warn("Track event but no stream");return}const t=i.streams[0];e.kind==="audio"?this.context.audioMixController.bindAudioStream(t):e.kind==="video"&&!this.trackIsVideoInput(e)&&this.addRemoteVideoTrack(e,t)}}},"CreatePeerConnectionTask");l.default=g,g.REMOVE_HANDLER_INTERVAL_MS=1e4},4708498556:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(9447989038)),g=m(c(182939685)),s=m(c(5009059128));let a=n(class extends s.default{cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}sessionUsesAudio(){var e,t;return!!(!((t=(e=this.context.meetingSessionConfiguration)===null||e===void 0?void 0:e.urls)===null||t===void 0)&&t.audioHostURL)}sessionUsesVideo(){let t;this.context.transceiverController.useTransceivers()?t=this.context.transceiverController.hasVideoInput():t=this.context.videoTileController.hasStartedLocalVideoTile();const r=!!this.context.videosToReceive&&!this.context.videosToReceive.empty(),o=t||r;return this.context.logger.info(`uses video: ${o} (enabled: ${!0}, sending: ${t}, receiving: ${r})`),o}run(){return u(this,void 0,void 0,function*(){const e={offerToReceiveAudio:this.sessionUsesAudio(),offerToReceiveVideo:this.sessionUsesVideo()};this.logger.info(`peer connection offerOptions: ${JSON.stringify(e)}`),yield new Promise((t,r)=>u(this,void 0,void 0,function*(){this.cancelPromise=o=>{r(o)};try{if(this.context.sdpOfferInit=yield this.context.peer.createOffer(e),this.context.logger.info("peer connection created offer"),this.context.previousSdpOffer&&new g.default(this.context.sdpOfferInit.sdp).videoSendSectionHasDifferentSSRC(this.context.previousSdpOffer)){const o=new Error(`canceling ${this.name()} due to the meeting status code: ${v.default.IncompatibleSDP}`);this.context.previousSdpOffer=null,r(o);return}t()}catch(o){r(o)}finally{delete this.cancelPromise}}))})}constructor(e){super(e.logger),this.context=e,this.taskName="CreateSDPTask"}},"CreateSDPTask");l.default=a},2635066756:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(9447989038)),g=m(c(182939685)),s=m(c(5009059128));let a=n(class _v extends s.default{removeEventListener(){this.context.peer&&(this.context.peer.removeEventListener("icecandidate",this.context.iceCandidateHandler),this.context.turnCredentials||this.context.peer.removeEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler))}cancel(){let e;this.context.browserBehavior.requiresIceCandidateGatheringTimeoutWorkaround()&&this.chromeVpnTimeoutMs<this.context.meetingSessionConfiguration.connectionTimeoutMs&&Date.now()-this.startTimestampMs>this.chromeVpnTimeoutMs&&(e=new Error(`canceling ${this.name()} due to the meeting status code: ${v.default.ICEGatheringTimeoutWorkaround}`)),this.cancelPromise&&(e=e||new Error(`canceling ${this.name()}`),this.cancelPromise(e),delete this.cancelPromise)}run(){return u(this,void 0,void 0,function*(){if(this.context.peer||this.logAndThrow("session does not have peer connection; bypass ice gathering"),this.context.browserBehavior.requiresCheckForSdpConnectionAttributes()){if(new g.default(this.context.peer.localDescription.sdp).hasCandidatesForAllMLines()){this.context.logger.info(`ice gathering already complete; bypass gathering, current local description ${this.context.peer.localDescription.sdp}`);return}}else this.context.logger.info(`iOS device does not require checking for connection attributes in SDP, current local description ${this.context.peer.localDescription.sdp}`);if((this.context.browserBehavior.hasFirefoxWebRTC()||this.context.peer.iceGatheringState==="complete")&&new g.default(this.context.peer.localDescription.sdp).hasCandidates()){this.context.logger.info("ice gathering state is complete and candidates are in SDP; bypass gathering");return}try{yield new Promise((e,t)=>{this.cancelPromise=r=>{this.removeEventListener(),t(r)},this.context.turnCredentials||(this.context.iceGatheringStateEventHandler=()=>{if(this.context.peer.iceGatheringState==="complete"){this.removeEventListener(),e(),delete this.cancelPromise;return}},this.context.peer.addEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler)),this.context.iceCandidateHandler=r=>{if(this.context.logger.info(`ice candidate: ${r.candidate?r.candidate.candidate:"(null)"} state: ${this.context.peer.iceGatheringState}`),r.candidate&&(g.default.isRTPCandidate(r.candidate.candidate)&&this.context.iceCandidates.push(r.candidate),this.context.turnCredentials&&this.context.iceCandidates.length>=1)){this.context.logger.info("gathered at least one relay candidate"),this.removeEventListener(),e(),delete this.cancelPromise;return}this.context.peer.iceGatheringState==="complete"&&(this.context.logger.info("done gathering ice candidates"),this.removeEventListener(),!new g.default(this.context.peer.localDescription.sdp).hasCandidates()||this.context.iceCandidates.length===0?(t(new Error("no ice candidates were gathered")),delete this.cancelPromise):(e(),delete this.cancelPromise))},this.context.peer.addEventListener("icecandidate",this.context.iceCandidateHandler),this.startTimestampMs=Date.now()})}catch(e){throw e}finally{this.startTimestampMs&&(this.context.iceGatheringDurationMs=Math.round(Date.now()-this.startTimestampMs))}})}constructor(e,t=_v.CHROME_VPN_TIMEOUT_MS){super(e.logger),this.context=e,this.chromeVpnTimeoutMs=t,this.taskName="FinishGatheringICECandidatesTask"}},"FinishGatheringICECandidatesTask");l.default=a,a.CHROME_VPN_TIMEOUT_MS=5e3},9488451395:function(H,l,c){"use strict";var u=this&&this.__createBinding||(Object.create?function(d,y,S,b){b===void 0&&(b=S),Object.defineProperty(d,b,{enumerable:!0,get:function(){return y[S]}})}:function(d,y,S,b){b===void 0&&(b=S),d[b]=y[S]}),m=this&&this.__setModuleDefault||(Object.create?function(d,y){Object.defineProperty(d,"default",{enumerable:!0,value:y})}:function(d,y){d.default=y}),v=this&&this.__importStar||function(d){if(d&&d.__esModule)return d;var y={};if(d!=null)for(var S in d)S!=="default"&&Object.prototype.hasOwnProperty.call(d,S)&&u(y,d,S);return m(y,d),y},g=this&&this.__awaiter||function(d,y,S,b){function _(C){return C instanceof S?C:new S(function(w){w(C)})}return n(_,"adopt"),new(S||(S=Promise))(function(C,w){function R(I){try{D(b.next(I))}catch(M){w(M)}}n(R,"fulfilled");function O(I){try{D(b.throw(I))}catch(M){w(M)}}n(O,"rejected");function D(I){I.done?C(I.value):_(I.value).then(R,O)}n(D,"step"),D((b=b.apply(d,y||[])).next())})},s=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(l,"__esModule",{value:!0});const a=s(c(7551081659)),i=s(c(9447989038)),e=s(c(4943767904)),t=v(c(5393388022)),r=s(c(7969706599)),o=s(c(3867485289)),f=c(4136617125),h=s(c(5009059128));let p=n(class extends h.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return g(this,void 0,void 0,function*(){const y=yield new Promise((S,b)=>{const _=this.context;_.turnCredentials=null;let C=n(class{cancel(){this.signalingClient.removeObserver(this),b(new Error("JoinAndReceiveIndexTask got canceled while waiting for SdkIndexFrame"))}handleSignalingClientEvent(D){if(D.type===r.default.WebSocketClosed){let M=`The signaling connection was closed with code ${D.closeCode} and reason: ${D.closeReason}`;_.logger.warn(M);let k=i.default.SignalingBadRequest;D.closeCode===4410?(M="The meeting already ended.",_.logger.warn(M),k=i.default.MeetingEnded):D.closeCode>=4500&&D.closeCode<4600&&(k=i.default.SignalingInternalServerError),_.audioVideoController.handleMeetingSessionStatus(new a.default(k),new Error(M));return}if(D.type!==r.default.ReceivedSignalFrame)return;if(D.message.type===f.SdkSignalFrame.Type.JOIN_ACK){const M=D.message.joinack;if(!M){_.audioVideoController.handleMeetingSessionStatus(new a.default(i.default.SignalingRequestFailed),new Error("Join ACK message did not include expected frame"));return}if(M.videoSubscriptionLimit&&(_.videoSubscriptionLimit=M.videoSubscriptionLimit),_.serverSupportsCompression=M.wantsCompressedSdp,M.defaultServerSideNetworkAdaption!==void 0&&M.defaultServerSideNetworkAdaption!==t.default.Default&&_.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption!==void 0){const k=M.defaultServerSideNetworkAdaption;_.logger.info(`Overriding server side network adaption value to ${k}`),_.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption(t.convertServerSideNetworkAdaptionEnumFromSignaled(k))}M&&M.turnCredentials?(_.turnCredentials=new e.default,_.turnCredentials.username=M.turnCredentials.username,_.turnCredentials.password=M.turnCredentials.password,_.turnCredentials.ttl=M.turnCredentials.ttl,_.turnCredentials.uris=M.turnCredentials.uris.map(k=>_.meetingSessionConfiguration.urls.urlRewriter(k)).filter(k=>!!k)):_.logger.error("missing TURN credentials in JoinAckFrame");return}if(D.message.type!==f.SdkSignalFrame.Type.INDEX)return;this.signalingClient.removeObserver(this);const I=D.message.index;S(I)}constructor(D){this.signalingClient=D}},"IndexFrameInterceptor");const w=new C(this.context.signalingClient);this.context.signalingClient.registerObserver(w),this.taskCanceler=w,this.context.previousSdpAnswerAsString="",this.context.previousSdpOffer=null,this.context.serverSupportsCompression=!1;const R=new o.default(this.context.meetingSessionConfiguration.applicationMetadata);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions!==void 0&&(R.serverSideNetworkAdaption=this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption(),R.supportedServerSideNetworkAdaptions=this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions()),this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex!==void 0&&(R.wantsAllTemporalLayersInIndex=this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex()),R.disablePeriodicKeyframeRequestOnContentSender=this.context.meetingSessionConfiguration.disablePeriodicKeyframeRequestOnContentSender,this.context.signalingClient.join(R)});this.context.logger.info(`received first index ${JSON.stringify(y)}`),this.context.indexFrame=y})}constructor(y){super(y.logger),this.context=y,this.taskName="JoinAndReceiveIndexTask",this.taskCanceler=null}},"JoinAndReceiveIndexTask");l.default=p},9638153336:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(7969706599)),g=c(4136617125),s=m(c(5009059128));let a=n(class extends s.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){this.context.signalingClient.ready()&&(this.context.signalingClient.leave(),this.context.logger.info("sent leave"),yield this.receiveLeaveAck())})}receiveLeaveAck(){return new Promise((e,t)=>{let r=n(class{cancel(){this.signalingClient.removeObserver(this),t(new Error("LeaveAndReceiveLeaveAckTask got canceled while waiting for IndexFrame"))}handleSignalingClientEvent(h){if(h.isConnectionTerminated()){this.signalingClient.removeObserver(this),this.logger.info("LeaveAndReceiveLeaveAckTask connection terminated"),e();return}h.type===v.default.ReceivedSignalFrame&&h.message.type===g.SdkSignalFrame.Type.LEAVE_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("got leave ack"),e())}constructor(h,p){this.signalingClient=h,this.logger=p}},"Interceptor");const o=new r(this.context.signalingClient,this.context.logger);this.taskCanceler=o,this.context.signalingClient.registerObserver(o)})}constructor(e){super(e.logger),this.context=e,this.taskName="LeaveAndReceiveLeaveAckTask",this.taskCanceler=null}},"LeaveAndReceiveLeaveAckTask");l.default=a},7966229607:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(7969706599)),g=c(4136617125),s=m(c(5009059128));let a=n(class extends s.default{run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(e){if(e.type===v.default.ReceivedSignalFrame){if(e.message.type===g.SdkSignalFrame.Type.AUDIO_STREAM_ID_INFO){const t=e.message.audioStreamIdInfo;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioStreamIdInfo(t)}else if(e.message.type===g.SdkSignalFrame.Type.AUDIO_METADATA){const t=e.message.audioMetadata;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioMetadata(t)}}}constructor(e){super(e.logger),this.context=e,this.taskName="ListenForVolumeIndicatorsTask",this.realtimeMuteAndUnmuteHandler=t=>{this.context.signalingClient.mute(t)}}},"ListenForVolumeIndicatorsTask");l.default=a},1614136239:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(b,_,C,w){function R(O){return O instanceof C?O:new C(function(D){D(O)})}return n(R,"adopt"),new(C||(C=Promise))(function(O,D){function I(N){try{k(w.next(N))}catch(j){D(j)}}n(I,"fulfilled");function M(N){try{k(w.throw(N))}catch(j){D(j)}}n(M,"rejected");function k(N){N.done?O(N.value):R(N.value).then(I,M)}n(k,"step"),k((w=w.apply(b,_||[])).next())})},m=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(6502873558)),g=m(c(6132421099)),s=m(c(5850044630)),a=m(c(4866586987)),i=m(c(174963938)),e=m(c(3334420728)),t=m(c(7551081659)),r=m(c(9447989038)),o=m(c(8804723777)),f=m(c(7969706599)),h=c(4136617125),p=m(c(4882678815)),d=c(6527539809),y=m(c(5009059128));let S=n(class extends y.default{removeObserver(){this.context.audioVideoController.removeObserver(this),this.context.realtimeController.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.signalingClient.removeObserver(this)}run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.audioVideoController.addObserver(this),this.context.realtimeController.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.connectionMonitor.start(),this.context.statsCollector.start(this.context.signalingClient,this.context.videoStreamIndex),this.context.signalingClient.registerObserver(this)})}pauseResubscribeCheck(){this.isResubscribeCheckPaused=!0}resumeResubscribeCheck(){this.isResubscribeCheckPaused&&(this.isResubscribeCheckPaused=!1,this.pendingMetricsReport&&(this.context.logger.info("Resuming resubscribe check with pending metrics report"),this.checkResubscribe(this.pendingMetricsReport)&&this.context.audioVideoController.update({needsRenegotiation:!1})))}videoTileDidUpdate(_){this.context.maxVideoTileCount=Math.max(this.context.maxVideoTileCount,this.context.videoTileController.getAllVideoTiles().length)}checkResubscribe(_){if(this.isResubscribeCheckPaused){this.context.logger.info("Resubscribe check is paused, setting incoming client metric report as pending"),this.pendingMetricsReport=_;return}else this.pendingMetricsReport=void 0;const C=_.getObservableMetrics(),w=C.availableOutgoingBitrate,R=C.nackCountReceivedPerSecond;let O=!1;this.context.videoDownlinkBandwidthPolicy.updateMetrics(_);const D=this.context.videoDownlinkBandwidthPolicy.wantsResubscribe();if(O=O||D,D){const I=this.context.videoDownlinkBandwidthPolicy.chooseSubscriptions();this.context.videosToReceive=I.truncate(this.context.videoSubscriptionLimit),I.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.logger.info(`trigger resubscribe for down=${D}; videosToReceive=[${this.context.videosToReceive.array()}]`)}if(this.context.videoTileController.hasStartedLocalVideoTile()){this.context.videoUplinkBandwidthPolicy.updateConnectionMetric({uplinkKbps:w/1e3,nackCountPerSecond:R});const I=this.context.videoUplinkBandwidthPolicy.wantsResubscribe();O=O||I,I&&(this.logger.info(`trigger resubscribe for up=${I}; videosToReceive=[${this.context.videosToReceive.array()}]`),this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters())}return O}metricsDidReceive(_){if(this.checkResubscribe(_)&&this.context.audioVideoController.update({needsRenegotiation:!1}),!this.currentAvailableStreamAvgBitrates)return;const C=_.streamMetricReports,w=new Map;for(const R in C)C[R].mediaType===g.default.VIDEO&&C[R].direction===v.default.DOWNSTREAM&&w.set(C[R].streamId,C[R])}connectionHealthDidChange(_){_.consecutiveMissedPongs===0&&this.context.reconnectController&&this.context.reconnectController.setLastActiveTimestampMs(Date.now()),this.applyHealthPolicy(this.reconnectionHealthPolicy,_,()=>{this.context.audioVideoController.handleMeetingSessionStatus(new t.default(r.default.ConnectionHealthReconnect),null)}),this.applyHealthPolicy(this.unusableAudioWarningHealthPolicy,_,()=>{var C;this.context.poorConnectionCount+=1;const w=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(C=this.context.eventController)===null||C===void 0||C.publishEvent("receivingAudioDropped",w),this.context.videoTileController.haveVideoTilesWithStreams()?this.context.audioVideoController.forEachObserver(R=>{d.Maybe.of(R.connectionDidSuggestStopVideo).map(O=>O.bind(R)())}):this.context.audioVideoController.forEachObserver(R=>{d.Maybe.of(R.connectionDidBecomePoor).map(O=>O.bind(R)())})},()=>{this.context.audioVideoController.forEachObserver(C=>{d.Maybe.of(C.connectionDidBecomeGood).map(w=>w.bind(C)())})});for(const C of this.videoEncodingHealthPolicies)this.applyHealthPolicy(C,_,()=>{switch(this.degradeVideoCodec(C.name),C.name){case e.default.VideoEncodingCpuHealth:this.context.statsCollector.videoCodecDegradationHighEncodeCpuDidReceive();break;case e.default.VideoEncodingFramerateHealth:this.context.statsCollector.videoCodecDegradationEncodeFailureDidReceive();break}});this.isMeetingConnected&&this.applyHealthPolicy(this.sendingAudioFailureHealthPolicy,_,()=>{var C;const w=this.generateBaseAudioVideoEventAttributes();(C=this.context.eventController)===null||C===void 0||C.publishEvent("sendingAudioFailed",w)},()=>{var C;const w=this.generateBaseAudioVideoEventAttributes();(C=this.context.eventController)===null||C===void 0||C.publishEvent("sendingAudioRecovered",w)})}audioVideoDidStart(){this.isMeetingConnected=!0}audioVideoDidStartConnecting(_){this.isMeetingConnected=!1}audioVideoDidStop(_){this.isMeetingConnected=!1}applyHealthPolicy(_,C,w,R){_.update(C);const O=_.healthIfChanged();O!==null&&(this.logger.info(`${_.name} value is now ${O}`),O<=_.minimumHealth()?d.Maybe.of(w).map(D=>D.bind(this)()):d.Maybe.of(R).map(D=>D.bind(this)()))}handleBitrateFrame(_){this.currentAvailableStreamAvgBitrates=_,_.serverAvailableOutgoingBitrate>0&&(this.logger.info(`Received server side estimation of available incoming bitrate ${_.serverAvailableOutgoingBitrate}kbps`),this.context.statsCollector.overrideObservableMetric("availableIncomingBitrate",_.serverAvailableOutgoingBitrate*1e3))}handleSignalingClientEvent(_){var C;if(_.type===f.default.WebSocketClosed&&(_.closeCode===4410||_.closeCode>=4500&&_.closeCode<4600)||_.type===f.default.WebSocketError||_.type===f.default.WebSocketFailed){if(!this.hasSignalingError){const w=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(C=this.context.eventController)===null||C===void 0||C.publishEvent("signalingDropped",w),this.hasSignalingError=!0}}else _.type===f.default.WebSocketOpen&&(this.hasSignalingError=!1);if(_.type===f.default.ReceivedSignalFrame){if(_.message.type===h.SdkSignalFrame.Type.NOTIFICATION){switch(_.message.notification.level){case h.SdkNotificationFrame.NotificationLevel.INFO:this.logger.info(`Received notification from server: ${_.message.notification.message}`);break;case h.SdkNotificationFrame.NotificationLevel.WARNING:this.logger.warn(`Received warning from server: ${_.message.notification.message}`);break;case h.SdkNotificationFrame.NotificationLevel.ERROR:this.logger.error(`Received error from server: ${_.message.notification.message}`);break;default:this.logger.error(`Received notification from server with unknown level ${_.message.notification.level}: ${_.message.notification.message}`);break}return}if(_.message.bitrates){const R=_.message.bitrates;this.context.videoStreamIndex.integrateBitratesFrame(R),this.context.videoDownlinkBandwidthPolicy.updateIndex(this.context.videoStreamIndex),this.handleBitrateFrame(_.message.bitrates)}const w=t.default.fromSignalFrame(_.message);_.message.type!==h.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&w.statusCode()!==r.default.OK&&this.context.audioVideoController.handleMeetingSessionStatus(w,null)}}degradeVideoCodec(_){if(this.context.meetingSupportedVideoSendCodecPreferences!==void 0&&this.context.meetingSupportedVideoSendCodecPreferences.length>1&&!(this.context.meetingSupportedVideoSendCodecPreferences[0].equals(o.default.h264ConstrainedBaselineProfile())||this.context.meetingSupportedVideoSendCodecPreferences[0].equals(o.default.vp8()))){const C=[];for(const w of this.context.videoSendCodecPreferences)w.equals(this.context.meetingSupportedVideoSendCodecPreferences[0])||C.push(w);C.length>0?(this.context.logger.info(`Downgrading codec from ${this.context.meetingSupportedVideoSendCodecPreferences[0].codecName} to ${C[0].codecName} due to ${_}`),this.context.degradedVideoSendCodecs.push(this.context.meetingSupportedVideoSendCodecPreferences[0]),this.context.meetingSupportedVideoSendCodecPreferences=C,this.context.audioVideoController.update({needsRenegotiation:!0})):this.context.logger.warn(`Degrading video codec failed since there is no alternative codec to select. Currently degraded codecs: ${this.context.degradedVideoSendCodecs.map(w=>w.codecName).join(",")}`)}}constructor(_,C,w){super(_.logger),this.context=_,this.initialConnectionHealthData=w,this.taskName="MonitorTask",this.prevSignalStrength=1,this.currentAvailableStreamAvgBitrates=null,this.hasSignalingError=!1,this.presenceHandlerCalled=!1,this.isResubscribeCheckPaused=!1,this.pendingMetricsReport=void 0,this.isMeetingConnected=!1,this.videoEncodingHealthPolicies=[],this.checkAndSendWeakSignalEvent=R=>{const O=R<1,D=this.prevSignalStrength<1,I=O?D?null:p.default.RedmicStartLoss:D?p.default.RedmicEndLoss:null;I&&this.context.statsCollector.logAudioEvent(I),this.prevSignalStrength=R},this.realtimeFatalErrorCallback=R=>{this.logger.error(`realtime error: ${R}: ${R.stack}`),this.context.audioVideoController.handleMeetingSessionStatus(new t.default(r.default.RealtimeApiFailed),R)},this.realtimeAttendeeIdPresenceHandler=(R,O)=>{var D;const I=this.context.meetingSessionConfiguration.credentials.attendeeId;this.logger.info(`attendeePresenceReceived: ${I}`),I===R&&O&&!this.presenceHandlerCalled&&(this.presenceHandlerCalled=!0,this.context.attendeePresenceDurationMs=Date.now()-this.context.startAudioVideoTimestamp,(D=this.context.eventController)===null||D===void 0||D.publishEvent("attendeePresenceReceived",{attendeePresenceDurationMs:this.context.attendeePresenceDurationMs}))},this.generateBaseAudioVideoEventAttributes=()=>{const{signalingOpenDurationMs:R,startTimeMs:O,iceGatheringDurationMs:D,attendeePresenceDurationMs:I,meetingStartDurationMs:M}=this.context;return{meetingDurationMs:O===null?0:Math.round(Date.now()-O),signalingOpenDurationMs:R,iceGatheringDurationMs:D,attendeePresenceDurationMs:I,meetingStartDurationMs:M}},this.generateAudioVideoEventAttributesForReceivingAudioDropped=()=>{const R=this.generateBaseAudioVideoEventAttributes();return Object.assign(Object.assign({},R),{maxVideoTileCount:this.context.maxVideoTileCount,poorConnectionCount:this.context.poorConnectionCount})},this.reconnectionHealthPolicy=new s.default(_.logger,Object.assign({},C),this.initialConnectionHealthData.clone()),this.unusableAudioWarningHealthPolicy=new i.default(Object.assign({},C),this.initialConnectionHealthData.clone()),this.sendingAudioFailureHealthPolicy=new a.default(_.logger,Object.assign({},C),this.initialConnectionHealthData.clone());for(const R of C.videoEncodingHealthPolicies)this.videoEncodingHealthPolicies.push(new R(Object.assign({},C),this.initialConnectionHealthData.clone()))}},"MonitorTask");l.default=S},5628139313:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{cancel(){}name(){return"NoOpTask"}run(){return Promise.resolve()}setParent(m){}},"NoOpTask");l.default=c},7537135456:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(1370928943)),v=u(c(9649641385));let g=n(class{name(){return`${this.task.name()} (once)`}cancel(){if(!this.canceled){if(this.dependencies)for(const a of this.dependencies)a.cancel();this.logger.info(`Canceling ${this.name()}`),v.default.nextTick(()=>this.task.cancel()),this.canceled=!0,this.cancelPromise&&v.default.nextTick(()=>this.cancelPromise(new Error(`canceling ${this.name()}`)))}}logDependencies(){if(this.logger.getLogLevel()>m.default.INFO||!this.dependencies)return;const a=this.dependencies.filter(i=>i).map(i=>i.name()).join(", ");this.logger.info(`${this.task.name()} waiting for dependencies: ${a}`)}run(){if(this.promise)return this.promise;const a=this.dependencies?Promise.all(this.dependencies.map(i=>i==null?void 0:i.run())):Promise.resolve();return this.logDependencies(),this.ongoing=a.then(()=>this.task.run()),this.promise=new Promise((i,e)=>{this.cancelPromise=e,this.ongoing.then(i).catch(e)})}setParent(a){this.task.setParent(a)}constructor(a,i,e){this.logger=a,this.task=i,this.dependencies=e,this.canceled=!1}},"OnceTask");l.default=g},3292077469:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(7263318766)),g=m(c(7969706599)),s=m(c(5009059128));let a=n(class extends s.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){const e=this.context.meetingSessionConfiguration;this.context.signalingClient.openConnection(new v.default(e.urls.signalingURL,e.credentials.joinToken));const t=Date.now();try{yield new Promise((r,o)=>{let f=n(class{cancel(){this.signalingClient.removeObserver(this),o(new Error("OpenSignalingConnectionTask got canceled while waiting to open signaling connection"))}handleSignalingClientEvent(d){switch(d.type){case g.default.WebSocketOpen:this.signalingClient.removeObserver(this),r();break;case g.default.WebSocketFailed:this.signalingClient.removeObserver(this),o(new Error("WebSocket connection failed"));break}}constructor(d){this.signalingClient=d}},"WebSocketOpenInterceptor");const h=new f(this.context.signalingClient);this.context.signalingClient.registerObserver(h),this.taskCanceler=h})}catch(r){throw r}finally{this.context.signalingOpenDurationMs=Math.round(Date.now()-t),this.logger.info(`Opening signaling connection took ${this.context.signalingOpenDurationMs} ms`)}})}constructor(e){super(e.logger),this.context=e,this.taskName="OpenSignalingConnectionTask",this.taskCanceler=null}},"OpenSignalingConnectionTask");l.default=a},6085879951:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(s,a,i,e){function t(r){return r instanceof i?r:new i(function(o){o(r)})}return n(t,"adopt"),new(i||(i=Promise))(function(r,o){function f(d){try{p(e.next(d))}catch(y){o(y)}}n(f,"fulfilled");function h(d){try{p(e.throw(d))}catch(y){o(y)}}n(h,"rejected");function p(d){d.done?r(d.value):t(d.value).then(f,h)}n(p,"step"),p((e=e.apply(s,a||[])).next())})},m=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(5009059128));let g=n(class extends v.default{cancel(){for(const a of this.tasksToRunParallel)this.logger.info(`canceling parallel group task ${this.name()} subtask ${a.name()}`),a.cancel()}run(){return u(this,void 0,void 0,function*(){const a=[];for(const e of this.tasksToRunParallel)this.logger.info(`parallel group task ${this.name()} running subtask ${e.name()}`),a.push(e.run());const i=[];for(let e=0;e<a.length;e++){try{yield a[e]}catch(t){i.push(`task ${this.tasksToRunParallel[e].name()} failed: ${t.message}`)}this.logger.info(`parallel group task ${this.name()} completed subtask ${this.tasksToRunParallel[e].name()}`)}if(i.length>0){const e=i.join(", ");this.logAndThrow(`parallel group task ${this.name()} failed for tasks: ${e}`)}this.logger.info(`parallel group task ${this.name()} completed`)})}constructor(a,i,e){super(a),this.taskName=i,this.tasksToRunParallel=e;for(const t of e)t.setParent(this)}},"ParallelGroupTask");l.default=g},9588672479:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(e,t,r,o){function f(h){return h instanceof r?h:new r(function(p){p(h)})}return n(f,"adopt"),new(r||(r=Promise))(function(h,p){function d(b){try{S(o.next(b))}catch(_){p(_)}}n(d,"fulfilled");function y(b){try{S(o.throw(b))}catch(_){p(_)}}n(y,"rejected");function S(b){b.done?h(b.value):f(b.value).then(d,y)}n(S,"step"),S((o=o.apply(e,t||[])).next())})},m=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const v=c(3305135794),g=m(c(7969706599)),s=c(4136617125),a=m(c(5009059128));let i=n(class extends a.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){this.context.signalingClient.ready()?(this.context.signalingClient.promoteToPrimaryMeeting(this.credentials),this.context.logger.info("Sent request to join primary meeting"),yield this.receivePrimaryMeetingJoinAck()):this.completionCallback(new v.MeetingSessionStatus(v.MeetingSessionStatusCode.SignalingRequestFailed))})}receivePrimaryMeetingJoinAck(){return new Promise((t,r)=>{let o=n(class{cancel(){this.signalingClient.removeObserver(this),this.completionCallback(new v.MeetingSessionStatus(v.MeetingSessionStatusCode.SignalingRequestFailed)),t()}handleSignalingClientEvent(p){p.isConnectionTerminated()&&(this.signalingClient.removeObserver(this),this.logger.info("PromoteToPrimaryMeetingTask connection terminated"),this.completionCallback(new v.MeetingSessionStatus(v.MeetingSessionStatusCode.SignalingRequestFailed)),t()),p.type===g.default.ReceivedSignalFrame&&p.message.type===s.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("Got a primary meeting join ACK"),this.completionCallback(v.MeetingSessionStatus.fromSignalFrame(p.message)),t())}constructor(p,d,y){this.signalingClient=p,this.completionCallback=d,this.logger=y}},"Interceptor");const f=new o(this.context.signalingClient,this.completionCallback,this.context.logger);this.taskCanceler=f,this.context.signalingClient.registerObserver(f)})}constructor(t,r,o){super(t.logger),this.context=t,this.credentials=r,this.completionCallback=o,this.taskName="PromoteToPrimaryMeetingTask",this.taskCanceler=null}},"PromoteToPrimaryMeetingTask");l.default=i},9531998674:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(s,a,i,e){function t(r){return r instanceof i?r:new i(function(o){o(r)})}return n(t,"adopt"),new(i||(i=Promise))(function(r,o){function f(d){try{p(e.next(d))}catch(y){o(y)}}n(f,"fulfilled");function h(d){try{p(e.throw(d))}catch(y){o(y)}}n(h,"rejected");function p(d){d.done?r(d.value):t(d.value).then(f,h)}n(p,"step"),p((e=e.apply(s,a||[])).next())})},m=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(5009059128));let g=n(class extends v.default{run(){var a,i;return u(this,void 0,void 0,function*(){if(!(!((i=(a=this.context.meetingSessionConfiguration)===null||a===void 0?void 0:a.urls)===null||i===void 0)&&i.audioHostURL)){this.context.logger.info("No audio connection: not acquiring audio input");return}if(this.context.activeAudioInput){this.context.logger.info("an active audio input exists");return}let e;try{e=yield this.context.mediaStreamBroker.acquireAudioInputStream()}catch{this.context.logger.warn("could not acquire audio input from current device")}e?this.context.activeAudioInput=e:this.context.logger.warn("an audio input is not available")})}constructor(a){super(a.logger),this.context=a,this.taskName="ReceiveAudioInputTask"}},"ReceiveAudioInputTask");l.default=g},587698570:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(7969706599)),g=c(4136617125),s=m(c(5009059128));let a=n(class extends s.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return u(this,void 0,void 0,function*(){this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}updateSubscribedGroupdIds(e){const t=new Set;for(const r of e){const o=this.context.videoStreamIndex.attendeeIdForGroupId(r);if(o.length===0){this.logger.warn(`Could not find attendee ID for newly subscribed group ID ${r}`);continue}let f=this.context.videoTileController.getVideoTileForAttendeeId(o);f===void 0&&(this.logger.info(`No existing video tile for attendee ID ${o} with new group ID ${r}. Creating new one.`),f=this.context.videoTileController.addVideoTile(),f.bindVideoStream(o,!1,null,0,0,0,null)),t.add(f.id())}this.serverPausedVideoTileIds.forEach(r=>{t.has(r)||this.serverPausedVideoTileIds.delete(r)})}handleSignalingClientEvent(e){if(e.type!==v.default.ReceivedSignalFrame||e.message.type!==g.SdkSignalFrame.Type.PAUSE&&e.message.type!==g.SdkSignalFrame.Type.RESUME)return;const t=e.message.pause,r=e.message.type;if(this.logger.info(`Received new ${r===g.SdkSignalFrame.Type.PAUSE?"pause":"resume"} frame: ${JSON.stringify(t)}`),!t||this.context.videoTileController.getVideoTileForAttendeeId===void 0||this.context.videoDownlinkBandwidthPolicy.forEachObserver===void 0||this.context.videoStreamIndex.attendeeIdForGroupId===void 0)return;const o=t.groupIds.map(f=>{const h=this.context.videoStreamIndex.attendeeIdForGroupId(f);if(h.length===0){this.logger.warn(`Could not find attendee ID for paused group ID ${f}`);return}return this.context.videoTileController.getVideoTileForAttendeeId(h)});for(const f of o)f!==void 0&&(r===g.SdkSignalFrame.Type.PAUSE?f.state().paused||(this.serverPausedVideoTileIds.add(f.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(h=>{h.tileWillBePausedByDownlinkPolicy(f.id())}),f.pause()):f.state().paused&&this.serverPausedVideoTileIds.has(f.id())&&(this.serverPausedVideoTileIds.delete(f.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(h=>{h.tileWillBeUnpausedByDownlinkPolicy(f.id())}),f.unpause()))}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveRemoteVideoPauseResume",this.serverPausedVideoTileIds=new Set}},"ReceiveRemoteVideoPauseResume");l.default=a},86955145:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(8006173476)),g=c(4136617125),s=m(c(5009059128));let a=n(class extends s.default{checkAndApplyVideoConstraint(e,t,r,o,f){return u(this,void 0,void 0,function*(){const h=t.getSettings();let p;if(e?p=this.context.meetingSessionConfiguration.meetingFeatures.contentMaxResolution:p=this.context.meetingSessionConfiguration.meetingFeatures.videoMaxResolution,r>p.videoWidth||o>p.videoHeight||f>p.videoFrameRate){const d={width:{ideal:p.videoWidth},height:{ideal:p.videoHeight},frameRate:{ideal:p.videoFrameRate}};this.context.logger.warn(`Video track (content = ${e}) will be constrained to: ${JSON.stringify(d)} to remain below configured video quality settings, trackSettings: ${JSON.stringify(h)}`);try{yield t.applyConstraints(d)}catch{this.context.logger.info(`Could not apply constraint for video track (content = ${e})`)}}})}run(){return u(this,void 0,void 0,function*(){const e=this.context.videoDuplexMode===g.SdkStreamServiceType.RX||this.context.videoDuplexMode===g.SdkStreamServiceType.DUPLEX;if(this.context.videoTileController.hasStartedLocalVideoTile()?this.context.videoDuplexMode=e?g.SdkStreamServiceType.DUPLEX:g.SdkStreamServiceType.TX:this.context.videoDuplexMode=e?g.SdkStreamServiceType.RX:0,this.context.videoCaptureAndEncodeParameter=this.context.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters(),!this.context.videoTileController.hasStartedLocalVideoTile()){this.context.logger.info("has not started local video tile"),this.context.activeVideoInput&&(this.context.activeVideoInput=void 0,this.context.videoStreamIndex.integrateUplinkPolicyDecision([]));return}const t=this.context.videoTileController.getLocalVideoTile();let r;try{r=yield this.context.mediaStreamBroker.acquireVideoInputStream()}catch{this.context.logger.warn("could not acquire video input from current device"),this.context.videoTileController.stopLocalVideoTile()}if(this.context.enableSimulcast){const o=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();this.context.videoStreamIndex.integrateUplinkPolicyDecision(Array.from(o.values()))}if(this.context.activeVideoInput=r,r){const o=r.getVideoTracks();if(!o||o.length===0)return;const f=this.context.meetingSessionConfiguration.credentials.attendeeId,h=new v.default(f).hasModality(v.default.MODALITY_CONTENT),p=o[0].getSettings();this.checkAndApplyVideoConstraint(h,o[0],p.width,p.height,p.frameRate);const d=this.context.audioVideoController.configuration.credentials.externalUserId;t.bindVideoStream(f,!0,r,p.width,p.height,null,d);for(const y of o)this.logger.info(`Using video device label=${y.label} id=${y.id}`),this.context.videoDeviceInformation.current_camera_name=y.label,this.context.videoDeviceInformation.current_camera_id=y.id}})}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveVideoInputTask"}},"ReceiveVideoInputTask");l.default=a},8297256329:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(o,f,h,p){function d(y){return y instanceof h?y:new h(function(S){S(y)})}return n(d,"adopt"),new(h||(h=Promise))(function(y,S){function b(w){try{C(p.next(w))}catch(R){S(R)}}n(b,"fulfilled");function _(w){try{C(p.throw(w))}catch(R){S(R)}}n(_,"rejected");function C(w){w.done?y(w.value):d(w.value).then(b,_)}n(C,"step"),C((p=p.apply(o,f||[])).next())})},m=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(488357679)),g=m(c(8006173476)),s=m(c(8804723777)),a=m(c(7969706599)),i=c(4136617125),e=c(6527539809),t=m(c(5009059128));let r=n(class extends t.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return u(this,void 0,void 0,function*(){this.handleIndexFrame(this.context.indexFrame),this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}handleSignalingClientEvent(f){if(f.type!==a.default.ReceivedSignalFrame||f.message.type!==i.SdkSignalFrame.Type.INDEX)return;const h=f.message.index;this.context.logger.info(`received new index ${JSON.stringify(h)}`),this.handleIndexFrame(h)}pauseIngestion(){this.isIngestionPaused=!0}resumeIngestion(){this.isIngestionPaused&&(this.isIngestionPaused=!1,this.pendingIndex&&(this.context.logger.info("Resuming index ingestion with pending index"),this.handleIndexFrame(this.pendingIndex)))}handleIndexFrame(f){if(!f)return;if(this.isIngestionPaused){this.context.logger.info("Index ingestion is paused, setting most recent index as pending"),this.pendingIndex=f;return}else this.pendingIndex=null;const h=this.context.audioVideoController.configuration.credentials.attendeeId;f.sources=f.sources.filter(_=>{const C=new g.default(_.attendeeId);return!(C.base()===h&&C.hasModality(g.default.MODALITY_CONTENT))});const{videoStreamIndex:p,videoDownlinkBandwidthPolicy:d,videoUplinkBandwidthPolicy:y}=this.context,S=p.allVideoSendingSourcesExcludingSelf(h);p.integrateIndexFrame(f),d.updateIndex(p),y.updateIndex(p),this.resubscribe(d,y),this.updateVideoAvailability(f),this.handleIndexVideosPausedAtSource(),f.supportedReceiveCodecIntersection.length>0&&this.handleSupportedVideoReceiveCodecIntersection(f);const b=p.allVideoSendingSourcesExcludingSelf(h);this.areVideoSourcesEqual(S,b)||this.context.audioVideoController.forEachObserver(_=>{e.Maybe.of(_.remoteVideoSourcesDidChange).map(C=>C.bind(_)(b))})}areVideoSourcesEqual(f,h){if(f.length!==h.length)return!1;const p=n((S,b)=>S.attendee.attendeeId.localeCompare(b.attendee.attendeeId),"compare"),d=[...f].sort(p),y=[...h].sort(p);for(let S=0;S<d.length;S++)if(d[S].attendee.attendeeId!==y[S].attendee.attendeeId)return!1;return!0}resubscribe(f,h){const p=f.wantsResubscribe(),d=(this.context.videoDuplexMode===i.SdkStreamServiceType.TX||this.context.videoDuplexMode===i.SdkStreamServiceType.DUPLEX)&&h.wantsResubscribe(),y=p||d;if(this.logger.info(`should resubscribe: ${y} (downlink: ${p} uplink: ${d})`),!y)return;const S=f.chooseSubscriptions();this.context.videosToReceive=S.truncate(this.context.videoSubscriptionLimit),S.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.context.videoCaptureAndEncodeParameter=h.chooseCaptureAndEncodeParameters(),this.logger.info(`trigger resubscribe for up=${d} down=${p}; videosToReceive=[${this.context.videosToReceive.array()}] captureParams=${JSON.stringify(this.context.videoCaptureAndEncodeParameter)}`),this.context.audioVideoController.update({needsRenegotiation:!1})}updateVideoAvailability(f){if(!this.context.videosToReceive){this.logger.error("videosToReceive must be set in the meeting context.");return}const h=new v.default;h.remoteVideoAvailable=!this.context.videosToReceive.empty(),h.canStartLocalVideo=!f.atCapacity,(!this.context.lastKnownVideoAvailability||!this.context.lastKnownVideoAvailability.equal(h))&&(this.context.lastKnownVideoAvailability=h.clone(),this.context.audioVideoController.forEachObserver(p=>{e.Maybe.of(p.videoAvailabilityDidChange).map(d=>d.bind(p)(h.clone()))}))}handleSupportedVideoReceiveCodecIntersection(f){if(this.context.videoSendCodecPreferences===void 0)return;const h=[];let p=!1;for(const d of this.context.videoSendCodecPreferences){if(this.context.degradedVideoSendCodecs.some(y=>d.equals(y))){this.logger.info(`Skipping ${d.codecName} since the codec has been identfied as degraded`);continue}for(const y of f.supportedReceiveCodecIntersection)if(d.equals(s.default.fromSignaled(y))){h.push(d);break}}if(h.length>0){const d=h.find(y=>this.context.prioritizedSendVideoCodecCapabilities.some(S=>y.equals(S)));this.context.currentVideoSendCodec!==void 0&&(d===void 0||!this.context.currentVideoSendCodec.equals(d))&&(p=!0),this.context.meetingSupportedVideoSendCodecPreferences=h}else this.logger.warn("Interesection of meeting receive codec support and send codec preferences has no overlap, falling back to just values provided in `setVideoCodecSendPreferences`"),this.context.meetingSupportedVideoSendCodecPreferences=void 0;this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs&&this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs(this.context.meetingSupportedVideoSendCodecPreferences,this.context.videoSendCodecPreferences),p&&this.context.audioVideoController.update({needsRenegotiation:!0})}handleIndexVideosPausedAtSource(){const f=this.context.videoStreamIndex.streamsPausedAtSource();for(const h of this.context.videoTileController.getAllVideoTiles()){const p=h.state();f.contain(p.streamId)?h.markPoorConnection()&&this.logger.info(`marks the tile ${p.tileId} as having a poor connection`):h.unmarkPoorConnection()&&this.logger.info(`unmarks the tile ${p.tileId} as having a poor connection`)}}constructor(f){super(f.logger),this.context=f,this.taskName="ReceiveVideoStreamIndexTask",this.isIngestionPaused=!1,this.pendingIndex=null}},"ReceiveVideoStreamIndexTask");l.default=r},457099596:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(5009059128));let v=n(class extends m.default{run(){return this.fn().then(()=>{})}constructor(s,a,i="RunnableTask"){super(s),this.fn=a,this.taskName=i}},"RunnableTask");l.default=v},7680112541:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(e,t,r,o){function f(h){return h instanceof r?h:new r(function(p){p(h)})}return n(f,"adopt"),new(r||(r=Promise))(function(h,p){function d(b){try{S(o.next(b))}catch(_){p(_)}}n(d,"fulfilled");function y(b){try{S(o.throw(b))}catch(_){p(_)}}n(y,"rejected");function S(b){b.done?h(b.value):f(b.value).then(d,y)}n(S,"step"),S((o=o.apply(e,t||[])).next())})},m=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(9091803745)),g=m(c(7969706599)),s=c(4136617125),a=m(c(5009059128));let i=n(class Ag extends a.default{run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToSendDataMessage(this.sendDataMessageHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeFromSendDataMessage(this.sendDataMessageHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(t){if(t.type===g.default.ReceivedSignalFrame&&t.message.type===s.SdkSignalFrame.Type.DATA_MESSAGE)for(const r of t.message.dataMessage.messages){const o=new v.default(r.ingestTimeNs/1e6,r.topic,r.data,r.senderAttendeeId,r.senderExternalUserId,r.ingestTimeNs===0);this.context.realtimeController.realtimeReceiveDataMessage(o)}}validateDataMessage(t,r,o){if(!Ag.TOPIC_REGEX.test(t))throw new Error("Invalid topic");if(r.length>Ag.DATA_SIZE)throw new Error("Data size has to be less than 2048 bytes");if(o&&o<0)throw new Error("The life time of the message has to be non negative")}constructor(t){super(t.logger),this.context=t,this.taskName="SendAndReceiveDataMessagesTask",this.sendDataMessageHandler=(r,o,f)=>{if(this.context.signalingClient.ready()){let h;o instanceof Uint8Array?h=o:typeof o=="string"?h=new TextEncoder().encode(o):h=new TextEncoder().encode(JSON.stringify(o)),this.validateDataMessage(r,h,f);const p=s.SdkDataMessagePayload.create();p.topic=r,p.lifetimeMs=f,p.data=h;const d=s.SdkDataMessageFrame.create();d.messages=[p],this.context.signalingClient.sendDataMessage(d)}else this.context.logger.error("Signaling client is not ready")}}},"SendAndReceiveDataMessagesTask");l.default=i,i.TOPIC_REGEX=new RegExp(/^[a-zA-Z0-9_-]{1,36}$/),i.DATA_SIZE=2048},8872868578:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(5009059128)),g=m(c(6013191119));let s=n(class extends v.default{cancel(){this.currentTask&&(this.logger.info(`canceling serial group task ${this.name()} subtask ${this.currentTask.name()}`),this.currentTask.cancel())}run(){return u(this,void 0,void 0,function*(){for(const i of this.tasksToRunSerially){this.getStatus()===g.default.CANCELED&&this.logAndThrow(`serial group task ${this.name()} was canceled`);try{this.logger.info(`serial group task ${this.name()} running subtask ${i.name()}`),this.currentTask=i,yield i.run(),this.logger.info(`serial group task ${this.name()} completed subtask ${i.name()}`)}catch(e){this.logAndThrow(`serial group task ${this.name()} was canceled due to subtask ${this.currentTask.name()} error: ${e.message}`)}finally{this.currentTask=null}}this.logger.info(`serial group task ${this.name()} completed`)})}constructor(i,e,t){super(i),this.taskName=e,this.tasksToRunSerially=t,this.currentTask=null;for(const r of t)r.setParent(this)}},"SerialGroupTask");l.default=s},5976676062:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(e,t,r,o){function f(h){return h instanceof r?h:new r(function(p){p(h)})}return n(f,"adopt"),new(r||(r=Promise))(function(h,p){function d(b){try{S(o.next(b))}catch(_){p(_)}}n(d,"fulfilled");function y(b){try{S(o.throw(b))}catch(_){p(_)}}n(y,"rejected");function S(b){b.done?h(b.value):f(b.value).then(d,y)}n(S,"step"),S((o=o.apply(e,t||[])).next())})},m=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(5546774952)),g=m(c(8006173476)),s=m(c(182939685)),a=m(c(5009059128));let i=n(class extends a.default{cancel(){if(this.cancelPromise){const t=new Error(`canceling ${this.name()}`);this.cancelPromise(t),delete this.cancelPromise}}run(){return u(this,void 0,void 0,function*(){const t=this.context.peer;let o=this.context.sdpOfferInit.sdp;this.context.browserBehavior.supportsVideoLayersAllocationRtpHeaderExtension()&&(o=new s.default(o).withVideoLayersAllocationRtpHeaderExtension(this.context.previousSdpOffer).sdp),this.context.browserBehavior.supportsDependencyDescriptorRtpHeaderExtension()&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension!==void 0&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension()&&(o=new s.default(o).withDependencyDescriptorRtpHeaderExtension(this.context.previousSdpOffer).sdp),new v.default().requiresDisablingH264Encoding()&&(o=new s.default(o).removeH264SupportFromSendSection().sdp);const f=this.context.audioVideoController.configuration.credentials.attendeeId;if(new g.default(f).hasModality(g.default.MODALITY_CONTENT)&&this.context.audioVideoController.configuration.enableSVC&&(o=new s.default(o).withStartingVideoSendBitrate(100).sdp),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(o=new s.default(o).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.audioProfile&&(o=new s.default(o).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(o=new s.default(o).withStereoAudio().sdp),this.context.audioProfile.hasRedundancyEnabled())){const d=new s.default(o).getAudioPayloadTypes();this.context.transceiverController&&this.context.transceiverController.setAudioPayloadTypes&&this.context.transceiverController.setAudioPayloadTypes(d)}this.logger.debug(()=>`local description is >>>${o}<<<`);const p={type:"offer",sdp:o,toJSON:null};yield new Promise((d,y)=>u(this,void 0,void 0,function*(){this.cancelPromise=S=>{y(S)};try{yield t.setLocalDescription(p),d()}catch(S){y(S)}finally{delete this.cancelPromise}})),this.context.logger.info("set local description")})}constructor(t){super(t.logger),this.context=t,this.taskName="SetLocalDescriptionTask"}},"SetLocalDescriptionTask");l.default=i},339097629:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(e,t,r,o){function f(h){return h instanceof r?h:new r(function(p){p(h)})}return n(f,"adopt"),new(r||(r=Promise))(function(h,p){function d(b){try{S(o.next(b))}catch(_){p(_)}}n(d,"fulfilled");function y(b){try{S(o.throw(b))}catch(_){p(_)}}n(y,"rejected");function S(b){b.done?h(b.value):f(b.value).then(d,y)}n(S,"step"),S((o=o.apply(e,t||[])).next())})},m=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(8006173476)),g=m(c(182939685)),s=m(c(8804723777)),a=m(c(5009059128));let i=n(class extends a.default{cancel(){this.cancelICEPromise&&this.cancelICEPromise()}run(){var t;return u(this,void 0,void 0,function*(){this.context.peer||this.logAndThrow("session does not have peer connection; bypass set remote description");let o=this.context.sdpAnswer;o=new g.default(o).withoutServerReflexiveCandidates().sdp,this.context.audioProfile&&(o=new g.default(o).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(o=new g.default(o).withStereoAudio().sdp)),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(o=new g.default(o).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.prioritizedSendVideoCodecCapabilities=new g.default(o).prioritizedSendVideoCodecCapabilities(),this.context.currentVideoSendCodec=this.context.prioritizedSendVideoCodecCapabilities.length>0?this.context.prioritizedSendVideoCodecCapabilities[0]:void 0;const f=this.context.activeVideoInput;if(f!==void 0){const p=this.context.audioVideoController.configuration.credentials.attendeeId,d=new v.default(p).hasModality(v.default.MODALITY_CONTENT),y=f.getVideoTracks()[0];d&&(((t=this.context.currentVideoSendCodec)===null||t===void 0?void 0:t.codecName)===s.default.av1Main().codecName?(y.contentHint="text",this.logger.info(`Setting content hint to text for AV1, attendee: ${p}`)):this.context.audioVideoController.configuration.enableSVC&&(y.contentHint="motion",this.logger.info(`Setting content hint to motion to enable SVC, attendee: ${p}`)))}this.logger.info(`processed remote description is >>>${o}<<<`);const h={type:"answer",sdp:o,toJSON:null};try{yield this.createICEConnectionCompletedPromise(h)}catch(p){throw p}})}createICEConnectionCompletedPromise(t){return new Promise((r,o)=>u(this,void 0,void 0,function*(){const f=n(()=>{(this.context.peer.iceConnectionState==="connected"||this.context.peer.iceConnectionState==="completed")&&(this.context.peer.removeEventListener("iceconnectionstatechange",f),r())},"checkConnectionCompleted");this.cancelICEPromise=()=>{this.context.peer&&this.context.peer.removeEventListener("iceconnectionstatechange",f),o(new Error(`${this.name()} got canceled while waiting for the ICE connection state`))},this.context.peer.addEventListener("iceconnectionstatechange",f);try{yield this.context.peer.setRemoteDescription(t),this.logger.info("set remote description, waiting for ICE connection"),f()}catch(h){o(h)}}))}constructor(t){super(t.logger),this.context=t,this.taskName="SetRemoteDescriptionTask"}},"SetRemoteDescriptionTask");l.default=i},3248483798:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(p,d,y,S){function b(_){return _ instanceof y?_:new y(function(C){C(_)})}return n(b,"adopt"),new(y||(y=Promise))(function(_,C){function w(D){try{O(S.next(D))}catch(I){C(I)}}n(w,"fulfilled");function R(D){try{O(S.throw(D))}catch(I){C(I)}}n(R,"rejected");function O(D){D.done?_(D.value):b(D.value).then(w,R)}n(O,"step"),O((S=S.apply(p,d||[])).next())})},m=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(7551081659)),g=m(c(9447989038)),s=m(c(182939685)),a=m(c(3475297719)),i=c(5393388022),e=m(c(7969706599)),t=m(c(3735795291)),r=c(4136617125),o=c(8071414974),f=m(c(5009059128));let h=n(class extends f.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){let d="";if(this.context.peer&&this.context.peer.localDescription&&(d=new s.default(this.context.peer.localDescription.sdp).withUnifiedPlanFormat().sdp),!this.context.enableSimulcast){let O=0,D=0;this.context.videoCaptureAndEncodeParameter&&(O=this.context.videoCaptureAndEncodeParameter.captureFrameRate(),D=this.context.videoCaptureAndEncodeParameter.encodeBitrates()[0]);const I={rid:"hi",maxBitrate:D*1e3,maxFramerate:O,active:!0};this.context.videoStreamIndex.integrateUplinkPolicyDecision([I])}const y=this.fixUpSubscriptionOrder(d,this.context.videoSubscriptions),S=this.context.videoDuplexMode===r.SdkStreamServiceType.TX||this.context.videoDuplexMode===r.SdkStreamServiceType.DUPLEX;let b,_=d;if((this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension===void 0||!this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension())&&(_=new s.default(_).withoutDependencyDescriptorRtpHeaderExtension().sdp),this.context.serverSupportsCompression){const O=this.context.previousSdpOffer?this.context.previousSdpOffer.sdp:"";b=this.textCompressor.compress(_,O),this.context.logger.info(`Compressed the SDP message from ${_.length} to ${b.length} bytes.`),d=""}this.context.previousSdpOffer=new s.default(d);const C=new t.default(this.context.meetingSessionConfiguration.credentials.attendeeId,d,this.context.meetingSessionConfiguration.urls.audioHostURL,this.context.realtimeController.realtimeIsLocalAudioMuted(),!1,y,S,this.context.videoStreamIndex.localStreamDescriptions(),!0,b);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!i.serverSideNetworkAdaptionIsNoneOrDefault(this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())&&this.context.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&(C.videoSubscriptionConfiguration=o.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(this.context,y.map(O=>O===0?0:this.context.videoStreamIndex.groupIdForStreamId(O)),this.context.videoDownlinkBandwidthPolicy.getVideoPreferences())),this.context.logger.info(`sending subscribe: ${JSON.stringify(C)}`),this.context.signalingClient.subscribe(C);const w=yield this.receiveSubscribeAck();this.context.logger.info(`got subscribe ack: ${JSON.stringify(w)}`);let R="";w.compressedSdpAnswer&&w.compressedSdpAnswer.length?(R=this.textCompressor.decompress(w.compressedSdpAnswer,this.context.previousSdpAnswerAsString),R.length===0&&(this.context.sdpAnswer="",this.context.previousSdpAnswerAsString="",this.logAndThrow("Error occurred while trying to decompress the SDP answer.")),this.context.logger.info(`Decompressed the SDP message from ${w.compressedSdpAnswer.length} to ${R.length} bytes.`),this.context.sdpAnswer=R):this.context.sdpAnswer=w.sdpAnswer,this.context.previousSdpAnswerAsString=this.context.sdpAnswer,this.context.videoStreamIndex.integrateSubscribeAckFrame(w)})}fixUpSubscriptionOrder(d,y){if(this.context.transceiverController.getMidForStreamId===void 0)return y;const S=new Map;for(const C of y){const w=this.context.transceiverController.getMidForStreamId(C);if(w===void 0){C!==0&&this.logger.warn(`Could not find MID for stream ID: ${C}`);continue}S.set(w,C)}const b=new s.default(d).mediaSections(),_=[];for(const C of b)if(C.mediaType==="video")if(C.direction==="recvonly"){const w=S.get(C.mid);if(w===void 0){this.logger.warn(`Could not find stream ID for MID: ${C.mid}`);continue}_.push(w)}else _.push(0);return this.logger.info(`Fixed up ${JSON.stringify(y)} to ${JSON.stringify(_)} (may be same))}`),_}receiveSubscribeAck(){return new Promise((d,y)=>{const S=this.context;let b=n(class{cancel(){this.signalingClient.removeObserver(this),y(new Error("SubscribeAndReceiveSubscribeAckTask got canceled while waiting for SdkSubscribeAckFrame"))}handleSignalingClientEvent(w){if(w.isConnectionTerminated()){const O=`SubscribeAndReceiveSubscribeAckTask connection was terminated with code ${w.closeCode} and reason: ${w.closeReason}`;S.logger.warn(O);let D=g.default.TaskFailed;w.closeCode>=4500&&w.closeCode<4600&&(D=g.default.SignalingInternalServerError),S.audioVideoController.handleMeetingSessionStatus(new v.default(D),new Error(O));return}if(w.type!==e.default.ReceivedSignalFrame||w.message.type!==r.SdkSignalFrame.Type.SUBSCRIBE_ACK)return;this.signalingClient.removeObserver(this);const R=w.message.suback;d(R)}constructor(w){this.signalingClient=w}},"Interceptor");const _=new b(this.context.signalingClient);this.context.signalingClient.registerObserver(_),this.taskCanceler=_})}constructor(d){super(d.logger),this.context=d,this.taskName="SubscribeAndReceiveSubscribeAckTask",this.taskCanceler=null,this.textCompressor=new a.default(d.logger)}},"SubscribeAndReceiveSubscribeAckTask");l.default=h},6013191119:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var c;(function(u){u.IDLE="IDLE",u.RUNNING="RUNNING",u.CANCELED="CANCELED",u.FINISHED="FINISHED"})(c||(c={})),l.default=c},7638277718:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(5824864644)),g=m(c(5009059128));let s=n(class extends g.default{cancel(){this.logger.info(`canceling timeout task ${this.name()} subtask ${this.taskToRunBeforeTimeout}`),this.taskToRunBeforeTimeout.cancel()}run(){return u(this,void 0,void 0,function*(){const i=new v.default(this.timeoutMs);i.start(()=>{this.logger.info(`timeout reached for task ${this.name()}`),this.taskToRunBeforeTimeout.cancel()});try{yield this.taskToRunBeforeTimeout.run()}finally{i.stop()}this.logger.info(`timeout task ${this.name()} completed`)})}constructor(i,e,t){super(i),this.taskToRunBeforeTimeout=e,this.timeoutMs=t,this.taskName=`Timeout${this.timeoutMs}ms`,e.setParent(this)}},"TimeoutTask");l.default=s},4098780146:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(9447989038)),g=m(c(5009059128));let s=n(class extends g.default{cancel(){if(this.cancelPromise){const i=new Error(`canceling ${this.name()} due to the meeting status code: ${v.default.NoAttendeePresent}`);this.cancelPromise(i),delete this.cancelPromise}}run(){return u(this,void 0,void 0,function*(){const i=this.context.meetingSessionConfiguration.credentials.attendeeId;return new Promise((e,t)=>{const r=n((o,f,h,p,d)=>{i===o&&f&&(this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(r),e(),delete this.cancelPromise)},"handler");this.cancelPromise=o=>{this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(r),t(o)},this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(r)})})}constructor(i){super(i.logger),this.context=i,this.taskName="WaitForAttendeePresenceTask"}},"WaitForAttendeePresenceTask");l.default=s},2392158736:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(t,r,o,f){function h(p){return p instanceof o?p:new o(function(d){d(p)})}return n(h,"adopt"),new(o||(o=Promise))(function(p,d){function y(_){try{b(f.next(_))}catch(C){d(C)}}n(y,"fulfilled");function S(_){try{b(f.throw(_))}catch(C){d(C)}}n(S,"rejected");function b(_){_.done?p(_.value):h(_.value).then(y,S)}n(b,"step"),b((f=f.apply(t,r||[])).next())})},m=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(5983965185)),g=m(c(3237015968)),s=m(c(3937896393)),a=m(c(9337558969)),i=m(c(9649641385));let e=n(class{setEncodingParameters(r){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!r||r.size===0)return;const f=Array.from(r.values()),h=o.getParameters();if(!h.encodings||h.encodings.length===0)h.encodings=f;else for(const p of h.encodings)for(const d of f){if((p.rid||d.rid)&&p.rid!==d.rid)continue;let y;for(y in d)y==="rid"||y==="codecPayloadType"||d.hasOwnProperty(y)&&(p[y]=d[y])}yield o.setParameters(h)})}localAudioTransceiver(){return this._localAudioTransceiver}localVideoTransceiver(){return this._localCameraTransceiver}setVideoSendingBitrateKbps(r){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!o||r<=0)return;const f=o.getParameters();f.encodings||(f.encodings=[{}]);for(const h of f.encodings)h.maxBitrate=r*1e3;yield o.setParameters(f)})}setPeer(r){this.peer=r}reset(){this.destroyAudioRedWorkerAndStates(),this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null}useTransceivers(){return!!this.peer&&typeof this.peer.getTransceivers<"u"}hasVideoInput(){return!(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")}trackIsVideoInput(r){return this._localCameraTransceiver?r===this._localCameraTransceiver.sender.track||r===this._localCameraTransceiver.receiver.track:!1}setupLocalTransceivers(){var r,o;this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((o=(r=this.meetingSessionContext)===null||r===void 0?void 0:r.audioProfile)===null||o===void 0)&&o.hasRedundancyEnabled()&&this.setupAudioRedWorker()),this._localCameraTransceiver||(this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}replaceAudioTrack(r){return u(this,void 0,void 0,function*(){return!this._localAudioTransceiver||this._localAudioTransceiver.direction!=="sendrecv"?(this.logger.info("audio transceiver direction is not set up or not activated"),!1):(yield this._localAudioTransceiver.sender.replaceTrack(r),!0)})}setAudioInput(r){return u(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localAudioTransceiver,r)})}setVideoInput(r){return u(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localCameraTransceiver,r)})}updateVideoTransceivers(r,o){if(!this.useTransceivers())return o.array();const f=this.peer.getTransceivers();return this.videoSubscriptions=[0],o=o.clone(),this.updateTransceivers(f,r,o),this.logger.debug(()=>this.debugDumpTransceivers()),this.videoSubscriptions}updateTransceivers(r,o,f){const h=f.array();r.length!==0&&!r[0].stop?(this.logger.info("Updating transceivers without `stop` function"),this.updateTransceiverWithoutStop(r,o,h)):r.length!==0&&this.updateTransceiverWithStop(r,o,h);for(const p of h){const d=this.addTransceiver("video",{direction:"recvonly",streams:[new MediaStream]});this.streamIdToTransceiver.set(p,d),this.groupIdToTransceiver.set(o.groupIdForStreamId(p),d),this.videoSubscriptions.push(p),this.logger.info(`adding transceiver mid: ${d.mid} subscription: ${p} direction: recvonly`)}}updateTransceiverWithStop(r,o,f){let h=1;this.videoSubscriptions=[0];for(const p of r){if(p===this._localCameraTransceiver||!this.transceiverIsVideo(p)||!p.mid)continue;let d=!1;const y=o.streamIdForTrack("v_"+p.mid);if(p.direction!=="inactive"&&y!==void 0){for(const[S,b]of f.entries())if(o.StreamIdsInSameGroup(y,b)){p.direction="recvonly",this.videoSubscriptions[h]=b,d=!0,this.streamIdToTransceiver.delete(y),this.streamIdToTransceiver.set(b,p),f.splice(S,1);break}}if(!d){this.videoSubscriptions[h]=0,this.logger.info(`Stopping MID: ${p.mid}, direction: ${p.direction}, current direction: ${p.currentDirection}`),p.stop();for(const[S,b]of this.streamIdToTransceiver.entries())p.mid===b.mid&&(this.streamIdToTransceiver.delete(S),this.groupIdToTransceiver.delete(o.groupIdForStreamId(S)))}h+=1}}updateTransceiverWithoutStop(r,o,f){let h=1;for(const p of r)if(!(p===this._localCameraTransceiver||!this.transceiverIsVideo(p))){if(this.videoSubscriptions[h]=0,p.direction!=="inactive"){const d=o.streamIdForTrack("v_"+p.mid);if(d!==void 0){for(const[y,S]of f.entries())if(o.StreamIdsInSameGroup(d,S)){p.direction="recvonly",this.videoSubscriptions[h]=S,this.streamIdToTransceiver.delete(d),this.streamIdToTransceiver.set(S,p),f.splice(y,1);break}}}h+=1}h=1;for(const p of r)if(!(p===this._localCameraTransceiver||!this.transceiverIsVideo(p))){if(p.direction==="inactive"&&f.length>0){p.direction="recvonly";const d=f.shift();this.videoSubscriptions[h]=d,this.streamIdToTransceiver.set(d,p),this.groupIdToTransceiver.set(o.groupIdForStreamId(d),p)}else if(this.videoSubscriptions[h]===0){p.direction="inactive";for(const[d,y]of this.streamIdToTransceiver.entries())p===y&&(this.streamIdToTransceiver.delete(d),this.groupIdToTransceiver.delete(o.groupIdForStreamId(d)))}h+=1}}getMidForStreamId(r){var o;return(o=this.streamIdToTransceiver.get(r))===null||o===void 0?void 0:o.mid}setStreamIdForMid(r,o){for(const[f,h]of this.streamIdToTransceiver.entries())if(h.mid===r){this.streamIdToTransceiver.delete(f),this.streamIdToTransceiver.set(o,h);return}}getMidForGroupId(r){var o,f;return(f=(o=this.groupIdToTransceiver.get(r))===null||o===void 0?void 0:o.mid)!==null&&f!==void 0?f:void 0}transceiverIsVideo(r){return r.receiver&&r.receiver.track&&r.receiver.track.kind==="video"||r.sender&&r.sender.track&&r.sender.track.kind==="video"}debugDumpTransceivers(){let r="",o=0;for(const f of this.peer.getTransceivers())this.transceiverIsVideo(f)&&(r+=`transceiver index=${o} mid=${f.mid} subscription=${this.videoSubscriptions[o]} direction=${f.direction}
`,o+=1);return r}setTransceiverInput(r,o){return u(this,void 0,void 0,function*(){r&&(o?r.direction="sendrecv":r.direction="inactive",yield r.sender.replaceTrack(o))})}forEachRedMetricsObserver(r){for(const o of this.redMetricsObservers)i.default.nextTick(()=>{this.redMetricsObservers.has(o)&&o.recoveryMetricsDidReceive(r)})}disableAudioRedundancy(){this.meetingSessionContext.audioProfile=new v.default(this.meetingSessionContext.audioProfile.audioBitrateBps,!1),this.meetingSessionContext.audioVideoController.setAudioProfile(this.meetingSessionContext.audioProfile)}setupAudioRedWorker(){var r,o;const f=!!window.RTCRtpScriptTransform,h=!!RTCRtpSender.prototype.createEncodedStreams;if(f)this.logger.info("[AudioRed] Supports encoded insertable streams using RTCRtpScriptTransform");else if(h)this.logger.info("[AudioRed] Supports encoded insertable streams using TransformStream");else throw this.disableAudioRedundancy(),new Error("[AudioRed] Encoded insertable streams not supported. Recreating peer connection with audio redundancy disabled.");try{this.audioRedWorkerURL=URL.createObjectURL(new Blob([a.default],{type:"application/javascript"})),this.logger.info(`[AudioRed] Redundant audio worker URL ${this.audioRedWorkerURL}`),this.audioRedWorker=new Worker(this.audioRedWorkerURL)}catch(p){throw this.logger.error(`[AudioRed] Unable to create audio red worker due to ${p}`),URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.disableAudioRedundancy(),this.logger.info("[AudioRed] Recreating peer connection with audio redundancy disabled"),p}if(this.audioRedEnabled=!0,this.audioRedWorker.onmessage=p=>{if(p.data.type==="REDWorkerLog")this.logger.info(p.data.log);else if(p.data.type==="RedundantAudioEncoderStats"){const d=new g.default;d.currentTimestampMs=Date.now(),d.ssrc=p.data.ssrc,d.totalAudioPacketsLost=p.data.totalAudioPacketsLost,d.totalAudioPacketsExpected=p.data.totalAudioPacketsExpected,d.totalAudioPacketsRecoveredRed=p.data.totalAudioPacketsRecoveredRed,d.totalAudioPacketsRecoveredFec=p.data.totalAudioPacketsRecoveredFec,this.forEachRedMetricsObserver(d)}},f)this._localAudioTransceiver.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"SenderTransform"}),this._localAudioTransceiver.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"ReceiverTransform"});else if(h){const p=this._localAudioTransceiver.sender.createEncodedStreams(),d=this._localAudioTransceiver.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"StartRedWorker",send:p,receive:d},[p.readable,p.writable,d.readable,d.writable])}(r=this.meetingSessionContext)===null||r===void 0||r.audioVideoController.addObserver(this),this.addRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector)}addTransceiver(r,o){var f;const h=this.peer.addTransceiver(r,o);if(!(!((f=this.peer.getConfiguration())===null||f===void 0)&&f.encodedInsertableStreams)||!this.audioRedWorker)return h;const p=!!window.RTCRtpScriptTransform,d=!!RTCRtpSender.prototype.createEncodedStreams;if(p)h.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"}),h.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"});else if(d){const y=h.sender.createEncodedStreams(),S=h.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"PassthroughTransform",send:y,receive:S},[y.readable,y.writable,S.readable,S.writable])}return h}destroyAudioRedWorkerAndStates(){var r,o;this.audioRedWorker&&(URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.audioRedEnabled=!0,(r=this.meetingSessionContext)===null||r===void 0||r.audioVideoController.removeObserver(this),this.removeRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector))}setAudioPayloadTypes(r){this.audioRedWorker&&(this.audioRedWorker.postMessage({msgType:"RedPayloadType",payloadType:r.get("red")}),this.audioRedWorker.postMessage({msgType:"OpusPayloadType",payloadType:r.get("opus")}))}metricsDidReceive(r){const{currentTimestampMs:o}=r,f=r.getRTCStatsReport();let h=0,p=0,d=0;f.forEach(w=>{w.kind==="audio"&&(w.type==="outbound-rtp"?p=w.packetsSent:w.type==="remote-inbound-rtp"&&(h=w.timestamp,d=w.packetsLost))}),(this.audioMetricsHistory.length===0||h>this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs&&p>this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent)&&this.audioMetricsHistory.push({timestampMs:h,totalPacketsSent:p,totalPacketsLost:d}),this.audioMetricsHistory.length>this.maxAudioMetricsHistory&&this.audioMetricsHistory.shift();const y=this.lossPercent(this.audioRedPacketLossShortEvalPeriodMs),S=this.lossPercent(this.audioRedPacketLossLongEvalPeriodMs),b=Math.max(y,S),[_,C]=s.default.getNumRedundantEncodingsForPacketLoss(b);if(C){this.lastHighPacketLossEventTimestampMs=o,this.audioRedEnabled&&(this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Disable"}),this.audioRedEnabled=!1,this.lastAudioRedTurnOffTimestampMs=o);return}else if(!this.audioRedEnabled){const w=o-this.lastAudioRedTurnOffTimestampMs,R=o-this.lastHighPacketLossEventTimestampMs;if(w>=this.audioRedPacketLossLongEvalPeriodMs&&R<this.redRecoveryTimeMs)return;this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Enable"}),this.audioRedEnabled=!0,this.maybeResetHoldDownTimer(o)}this.shouldUpdateAudioRedWorkerEncodings(o,_)&&this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"UpdateNumRedundantEncodings",numRedundantEncodings:_})}maybeResetHoldDownTimer(r){this.currentNumRedundantEncodings>0&&(this.lastRedHolddownTimerStartTimestampMs=r)}lossPercent(r){if(this.audioMetricsHistory.length<2)return 0;const o=this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs,f=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent,h=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsLost;for(let p=this.audioMetricsHistory.length-2;p>=0;p--)if(o-this.audioMetricsHistory[p].timestampMs>=r){const d=h-this.audioMetricsHistory[p].totalPacketsLost,y=f-this.audioMetricsHistory[p].totalPacketsSent,S=100*(d/y);return Math.max(0,Math.min(S,100))}return 0}shouldUpdateAudioRedWorkerEncodings(r,o){return this.currentNumRedundantEncodings===o?(this.maybeResetHoldDownTimer(r),!1):o<this.currentNumRedundantEncodings&&r-this.lastRedHolddownTimerStartTimestampMs<this.audioRedHoldDownTimeMs?!1:(this.currentNumRedundantEncodings=o,this.maybeResetHoldDownTimer(r),!0)}addRedundantAudioRecoveryMetricsObserver(r){this.redMetricsObservers.add(r)}removeRedundantAudioRecoveryMetricsObserver(r){this.redMetricsObservers.delete(r)}constructor(r,o,f){this.logger=r,this.browserBehavior=o,this.meetingSessionContext=f,this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null,this.streamIdToTransceiver=new Map,this.groupIdToTransceiver=new Map,this.audioRedWorker=null,this.audioRedWorkerURL=null,this.audioMetricsHistory=new Array,this.redMetricsObservers=new Set,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.maxAudioMetricsHistory=20,this.audioRedPacketLossShortEvalPeriodMs=5*1e3,this.audioRedPacketLossLongEvalPeriodMs=15*1e3,this.audioRedHoldDownTimeMs=5*60*1e3,this.redRecoveryTimeMs=1*60*1e3}},"DefaultTransceiverController");l.default=e},8213452704:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(s,a,i,e){function t(r){return r instanceof i?r:new i(function(o){o(r)})}return n(t,"adopt"),new(i||(i=Promise))(function(r,o){function f(d){try{p(e.next(d))}catch(y){o(y)}}n(f,"fulfilled");function h(d){try{p(e.throw(d))}catch(y){o(y)}}n(h,"rejected");function p(d){d.done?r(d.value):t(d.value).then(f,h)}n(p,"step"),p((e=e.apply(s,a||[])).next())})},m=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(372560720));let g=n(class Nf extends v.default{setEncodingParameters(a){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const i=this._localCameraTransceiver.sender,e=Array.from(a.values());if(e.length<=0)return;const t=i.getParameters();if(!t.encodings)t.encodings=e;else for(let r=0;r<t.encodings.length;r++)t.encodings[r].rid===v.default.LOW_LEVEL_NAME&&this.copyEncodingParams(a.get(v.default.LOW_LEVEL_NAME),t.encodings[r]),t.encodings[r].rid===v.default.HIGH_LEVEL_NAME&&this.copyEncodingParams(a.get(v.default.HIGH_LEVEL_NAME),t.encodings[r]);yield i.setParameters(t),this.logVideoTransceiverParameters()})}constructor(a,i,e){super(a,i,e);let t=2;this.videoQualityControlParameterMap=new Map;for(let r=0;r<Nf.NAME_ARR_ASCENDING.length;r++){const o=Nf.NAME_ARR_ASCENDING[r];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:Nf.BITRATE_ARR_ASCENDING[r]*1e3}),t=t/2}}},"SimulcastContentShareTransceiverController");l.default=g,g.NAME_ARR_ASCENDING=["low","hi"],g.BITRATE_ARR_ASCENDING=[300,1200]},372560720:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(s,a,i,e){function t(r){return r instanceof i?r:new i(function(o){o(r)})}return n(t,"adopt"),new(i||(i=Promise))(function(r,o){function f(d){try{p(e.next(d))}catch(y){o(y)}}n(f,"fulfilled");function h(d){try{p(e.throw(d))}catch(y){o(y)}}n(h,"rejected");function p(d){d.done?r(d.value):t(d.value).then(f,h)}n(p,"step"),p((e=e.apply(s,a||[])).next())})},m=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(2392158736));let g=n(class ul extends v.default{setEncodingParameters(a){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const i=this._localCameraTransceiver.sender,e=Array.from(a.values());if(e.length<=0)return;const t=i.getParameters();if(!t.encodings)t.encodings=e;else for(const r of t.encodings)r.rid===ul.LOW_LEVEL_NAME&&this.copyEncodingParams(a.get(ul.LOW_LEVEL_NAME),r),r.rid===ul.MID_LEVEL_NAME&&this.copyEncodingParams(a.get(ul.MID_LEVEL_NAME),r),r.rid===ul.HIGH_LEVEL_NAME&&this.copyEncodingParams(a.get(ul.HIGH_LEVEL_NAME),r);yield i.setParameters(t),this.logVideoTransceiverParameters()})}setVideoSendingBitrateKbps(a){return u(this,void 0,void 0,function*(){})}setupLocalTransceivers(){var a,i;if(this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((i=(a=this.meetingSessionContext)===null||a===void 0?void 0:a.audioProfile)===null||i===void 0)&&i.hasRedundancyEnabled()&&this.setupAudioRedWorker()),!this._localCameraTransceiver)){const e=Array.from(this.videoQualityControlParameterMap.values());this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream],sendEncodings:e})}}logVideoTransceiverParameters(){const i=this._localCameraTransceiver.sender.getParameters().encodings;let e=`simulcast: current encoding parameters 
`;for(const t of i)e+=`rid=${t.rid} maxBitrate=${t.maxBitrate} active=${t.active} scaleDownBy=${t.scaleResolutionDownBy} maxFrameRate = ${t.maxFramerate} 
`;this.logger.info(e)}copyEncodingParams(a,i){i.active=a.active,i.maxBitrate=a.maxBitrate,i.scaleResolutionDownBy=a.scaleResolutionDownBy,i.maxFramerate=a.maxFramerate}constructor(a,i,e){super(a,i,e),this.videoQualityControlParameterMap=new Map;let t=4;for(let r=0;r<ul.NAME_ARR_ASCENDING.length;r++){const o=ul.NAME_ARR_ASCENDING[r];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:ul.BITRATE_ARR_ASCENDING[r]*1e3}),t=t/2}}},"SimulcastTransceiverController");l.default=g,g.LOW_LEVEL_NAME="low",g.MID_LEVEL_NAME="mid",g.HIGH_LEVEL_NAME="hi",g.NAME_ARR_ASCENDING=["low","mid","hi"],g.BITRATE_ARR_ASCENDING=[200,400,1100]},161472916:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(2392158736));let v=n(class extends m.default{setupLocalTransceivers(){this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localCameraTransceiver||(this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}constructor(s,a,i){super(s,a,i)}},"VideoOnlyTransceiverController");l.default=v},6391477986:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TRANSCRIPTION_DATA_MESSAGE_TOPIC=void 0;const u=c(4497810965);l.TRANSCRIPTION_DATA_MESSAGE_TOPIC="aws:chime:transcription";let m=n(class{subscribeToTranscriptEvent(g){this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeSubscribeToReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC,s=>{for(const a of u.TranscriptEventConverter.from(s))for(const i of this.transcriptEventCallbacks)i(a)}),this.transcriptEventCallbacks.add(g)}unsubscribeFromTranscriptEvent(g){this.transcriptEventCallbacks.delete(g),this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC)}constructor(g){this.realtimeController=g,this.transcriptEventCallbacks=new Set}},"DefaultTranscriptionController");l.default=m},4042214483:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"Transcript");l.default=c},8928051514:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"TranscriptAlternative");l.default=c},3886666628:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"TranscriptEntity");l.default=c},4497810965:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.TranscriptEventConverter=void 0;const m=c(4136617125),v=u(c(4042214483)),g=u(c(2832046333)),s=u(c(8532168277)),a=u(c(2855080400)),i={[m.SdkTranscriptionStatus.Type.STARTED]:s.default.STARTED,[m.SdkTranscriptionStatus.Type.INTERRUPTED]:s.default.INTERRUPTED,[m.SdkTranscriptionStatus.Type.RESUMED]:s.default.RESUMED,[m.SdkTranscriptionStatus.Type.STOPPED]:s.default.STOPPED,[m.SdkTranscriptionStatus.Type.FAILED]:s.default.FAILED};let e=n(class{static from(r){let o;try{o=m.SdkTranscriptFrame.decode(r.data)}catch(h){throw new Error("Cannot decode transcript data message: "+h)}const f=[];for(const h of o.events)if(h.status){const p=i[h.status.type];if(!p)continue;const d=new g.default;d.type=p,d.eventTimeMs=h.status.eventTime,d.transcriptionRegion=h.status.transcriptionRegion,d.transcriptionConfiguration=h.status.transcriptionConfiguration,h.status.message&&(d.message=h.status.message),f.push(d)}else if(h.transcript){const p=new v.default;p.results=[];for(const d of h.transcript.results){const y={channelId:d.channelId,isPartial:d.isPartial,resultId:d.resultId,startTimeMs:d.startTime,endTimeMs:d.endTime,alternatives:[]};if(d.languageCode&&(y.languageCode=d.languageCode),d.languageIdentification&&d.languageIdentification.length>0){y.languageIdentification=[];for(const S of d.languageIdentification){const b={languageCode:S.languageCode,score:S.score};y.languageIdentification.push(b)}}for(const S of d.alternatives){const b={items:[],transcript:S.transcript};for(const _ of S.items){const C={content:_.content,attendee:{attendeeId:_.speakerAttendeeId,externalUserId:_.speakerExternalUserId},startTimeMs:_.startTime,endTimeMs:_.endTime,type:null};switch(_.vocabularyFilterMatch&&(C.vocabularyFilterMatch=_.vocabularyFilterMatch),_.hasOwnProperty("stable")&&(C.stable=_.stable),_.hasOwnProperty("confidence")&&(C.confidence=_.confidence),_.type){case m.SdkTranscriptItem.Type.PRONUNCIATION:C.type=a.default.PRONUNCIATION;break;case m.SdkTranscriptItem.Type.PUNCTUATION:C.type=a.default.PUNCTUATION;break}b.items.push(C)}for(const _ of S.entities){b.entities||(b.entities=[]);const C={category:_.category,confidence:_.confidence,content:_.content,startTimeMs:_.startTime,endTimeMs:_.endTime};_.type&&(C.type=_.type),b.entities.push(C)}y.alternatives.push(b)}p.results.push(y)}f.push(p)}return f}},"TranscriptEventConverter");l.TranscriptEventConverter=e},6128278192:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"TranscriptItem");l.default=c},2855080400:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var c;(function(u){u.PRONUNCIATION="pronunciation",u.PUNCTUATION="punctuation"})(c||(c={})),l.default=c},2600940909:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"TranscriptLanguageWithScore");l.default=c},3373821534:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"TranscriptResult");l.default=c},2832046333:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"TranscriptionStatus");l.default=c},8532168277:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var c;(function(u){u.STARTED="started",u.INTERRUPTED="interrupted",u.RESUMED="resumed",u.STOPPED="stopped",u.FAILED="failed"})(c||(c={})),l.default=c},3894274294:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const m=c(888724265),v=u(c(6885109343));let g=n(class Zc{getParserResult(){var a,i;return{browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,osName:((a=this.parserResult)===null||a===void 0?void 0:a.os.name)||Zc.UNAVAILABLE,osVersion:((i=this.parserResult)===null||i===void 0?void 0:i.os.version)||Zc.UNAVAILABLE,sdkVersion:v.default.sdkVersion,sdkName:v.default.sdkName}}constructor(a){var i,e,t,r,o,f,h;try{this.parserResult=navigator&&navigator.userAgent?new m.UAParser(navigator.userAgent).getResult():void 0}catch(p){a.error(p.message)}this.browserMajorVersion=((t=(e=(i=this.parserResult)===null||i===void 0?void 0:i.browser)===null||e===void 0?void 0:e.version)===null||t===void 0?void 0:t.split(".")[0])||Zc.UNAVAILABLE,this.browserName=((r=this.parserResult)===null||r===void 0?void 0:r.browser.name)||Zc.UNAVAILABLE,this.browserVersion=((o=this.parserResult)===null||o===void 0?void 0:o.browser.version)||Zc.UNAVAILABLE,this.deviceName=[((f=this.parserResult)===null||f===void 0?void 0:f.device.vendor)||"",((h=this.parserResult)===null||h===void 0?void 0:h.device.model)||""].join(" ").trim()||Zc.UNAVAILABLE}},"DefaultUserAgentParser");l.default=g,g.UNAVAILABLE="Unavailable"},3054351868:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{add(m){return new Promise((v,g)=>{this.queue=this.queue.then(m).then(v).catch(g)})}constructor(){this.queue=Promise.resolve()}},"PromiseQueue");l.default=c},6527539809:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.None=l.Some=l.Maybe=void 0;let c=n(class{static of(g){return g==null?m.of():u.of(g)}},"Maybe");l.Maybe=c;let u=n(class Tv{map(g){return c.of(g(this.value))}flatMap(g){return g(this.value)}get(){return this.value}getOrElse(g){return this.value}defaulting(g){return c.of(this.getOrElse(g))}static of(g){if(g==null)throw new Error("value is ${value}");return new Tv(g)}constructor(g){this.value=g,this.isSome=!0,this.isNone=!1}},"Some");l.Some=u;let m=n(class Lf{get(){throw new Error("value is null")}getOrElse(g){return g}map(g){return new Lf}flatMap(g){return new Lf}defaulting(g){return c.of(this.getOrElse(g))}static of(){return new Lf}constructor(){this.isSome=!1,this.isNone=!0}},"None");l.None=m},5685319565:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.getRandomValues=l.getFormattedOffset=l.getDefaultAssetSpec=l.toLowerCasePropertyNames=l.isIFramed=l.wait=void 0;const m=u(c(6885109343));function v(t){return new Promise(r=>setTimeout(r,t))}n(v,"wait"),l.wait=v;function g(){var t;try{return((t=window.frameElement)===null||t===void 0?void 0:t.nodeName)==="IFRAME"||parent!==top}catch{return!0}}n(g,"isIFramed"),l.isIFramed=g;function s(t){return t===null?null:typeof t!="object"?t:Array.isArray(t)?t.map(s):Object.keys(t).reduce((r,o)=>{const f=t[o],h=typeof f=="object"?s(f):f;return r[o.toLowerCase()]=h,r},{})}n(s,"toLowerCasePropertyNames"),l.toLowerCasePropertyNames=s;function a(){const t=m.default.sdkVersionSemVer;return{assetGroup:`sdk-${t.major}.${t.minor}`}}n(a,"getDefaultAssetSpec"),l.getDefaultAssetSpec=a;function i(t){const r=Math.abs(t),o=t<=0?"+":"-",f=Math.floor(r/60).toString().padStart(2,"0"),h=Math.floor(r%60).toString().padStart(2,"0");return`${o}${f}:${h}`}n(i,"getFormattedOffset"),l.getFormattedOffset=i;function e(t){try{window.crypto.getRandomValues(t)}catch{new DataView(t.buffer).setUint32(0,Math.trunc(Math.random()*Math.pow(2,32)),!0)}}n(e,"getRandomValues"),l.getRandomValues=e},6885109343:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(5546774952)),v=u(c(5554749645));let g=n(class nd{static get sdkName(){return"amazon-chime-sdk-js"}static get sdkVersion(){return v.default.semverString}static get sdkVersionSemVer(){var a,i,e,t;const r=v.default.semverString.match(/^(?<major>[0-9]+)\.(?<minor>[0-9]+)((?:\.(?<patch>[0-9]+))(?:-(?<preRelease>[a-zA-Z]+(\.[0-9])*))?)?/);return{major:(a=r==null?void 0:r.groups)===null||a===void 0?void 0:a.major,minor:(i=r==null?void 0:r.groups)===null||i===void 0?void 0:i.minor,patch:(e=r==null?void 0:r.groups)===null||e===void 0?void 0:e.patch,preRelease:(t=r==null?void 0:r.groups)===null||t===void 0?void 0:t.preRelease}}static get buildSHA(){return v.default.hash.substr(1)}static get sdkUserAgentLowResolution(){const a=new m.default;return`${a.name()}-${a.majorVersion()}`}static urlWithVersion(a){const i=new URL(a);return i.searchParams.append(nd.X_AMZN_VERSION,nd.sdkVersion),i.searchParams.append(nd.X_AMZN_USER_AGENT,nd.sdkUserAgentLowResolution),i.toString()}},"Versioning");l.default=g,g.X_AMZN_VERSION="X-Amzn-Version",g.X_AMZN_USER_AGENT="X-Amzn-User-Agent"},5554749645:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.default={hash:"d7eee1f",raw:"v3.23.0",semverString:"3.23.0"}},1695739824:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class Cv{equal(m){let v=m.captureWidth()===this.cameraWidth&&m.captureHeight()===this.cameraHeight&&m.captureFrameRate()===this.cameraFrameRate&&m.encodeBitrates().length===this.encodeBitrates().length&&m.encodeScaleResolutionDownBy().length===this.encodeScaleResolutionDownBy().length&&m.encodeWidths().length===this.encodeWidths().length&&m.encodeHeights().length===this.encodeHeights().length&&m.isSVCEncoding()===this.isSVC;if(v){for(let g=0;g<m.encodeWidths().length;g++)if(m.encodeWidths()[g]!==this.encodeWidths()[g]||m.encodeHeights()[g]!==this.encodeHeights()[g]||m.encodeBitrates()[g]!==this.encodeBitrates()[g]||m.encodeScaleResolutionDownBy()[g]!==this.encodeScaleResolutionDownBy()[g])return v=!1,v}return v}clone(){return new Cv(this.cameraWidth,this.cameraHeight,this.cameraFrameRate,this.maxEncodeBitrateKbps,this.isSimulcast,this.scaleResolutionDownBy,this.isSVC)}captureWidth(){return this.cameraWidth}captureHeight(){return this.cameraHeight}captureFrameRate(){return this.cameraFrameRate}encodeBitrates(){return[this.maxEncodeBitrateKbps]}encodeScaleResolutionDownBy(){return[this.scaleResolutionDownBy]}encodeWidths(){return[this.cameraWidth]}encodeHeights(){return[this.cameraHeight]}isSVCEncoding(){return this.isSVC}constructor(m,v,g,s,a,i=1,e=!1){this.cameraWidth=m,this.cameraHeight=v,this.cameraFrameRate=g,this.maxEncodeBitrateKbps=s,this.isSimulcast=a,this.scaleResolutionDownBy=i,this.isSVC=e}},"DefaultVideoCaptureAndEncodeParameter");l.default=c},9677745702:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(1865309432));let v=n(class Iv{reset(){this.optimalReceiveSet=new m.default,this.subscribedReceiveSet=new m.default,this.videoSources=void 0}updateIndex(s){this.videoIndex=s,this.optimalReceiveSet=this.calculateOptimalReceiveSet(s)}updateMetrics(s){}wantsResubscribe(){return!this.subscribedReceiveSet.equal(this.optimalReceiveSet)}chooseSubscriptions(){return this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveSet.clone()}chooseRemoteVideoSources(s){this.videoSources=s,this.optimalReceiveSet=this.calculateOptimalReceiveSet(this.videoIndex).clone()}calculateOptimalReceiveSet(s){const a=new m.default;if(!this.videoIndex||this.videoIndex.allStreams().empty())return a;const i=s.highestQualityStreamFromEachGroupExcludingSelf(this.selfAttendeeId),e=this.videoSources?this.videoSources:this.videoIndex.allVideoSendingSourcesExcludingSelf(this.selfAttendeeId),t=this.videoIndex.remoteStreamDescriptions(),r=new Map;for(const f of t)i.contain(f.streamId)&&r.set(f.attendeeId,f);let o=0;for(const f of e){const h=f.attendee.attendeeId;if(r.has(h)){const p=r.get(h);if(o+p.maxBitrateKbps<=Iv.maxReceiveBitrateKbps)a.add(p.streamId),o+=p.maxBitrateKbps;else{console.warn("total bitrate "+(o+p.maxBitrateKbps)+" exceeds maximum limit (15000). Use chooseRemoteVideoSources to select a subset of participants to avoid this.");break}}}return a}constructor(s){this.selfAttendeeId=s,this.reset()}},"AllHighestVideoBandwidthPolicy");l.default=v,v.maxReceiveBitrateKbps=15e3},681222244:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(1865309432));let v=n(class{reset(){}updateIndex(s){}updateMetrics(s){}wantsResubscribe(){return!1}chooseSubscriptions(){return new m.default}},"NoVideoDownlinkBandwidthPolicy");l.default=v},2178339051:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TargetDisplaySize=void 0;var c;(function(u){u[u.Low=0]="Low",u[u.Medium=1]="Medium",u[u.High=2]="High",u[u.Maximum=3]="Maximum"})(c=l.TargetDisplaySize||(l.TargetDisplaySize={})),l.default=c},3368465086:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(805846668)),v=u(c(5393388022)),g=u(c(3803169181)),s=c(8071414974),a=u(c(8681774825)),i=u(c(3348721919));let e=n(class Ov extends a.default{static createConfig(){const r=new i.default;return r.serverSideNetworkAdaption=v.default.None,r}reset(){super.reset(),super.shouldPauseTiles=!1,this.videoPreferences=void 0}updateIndex(r){super.updateIndex(r);const o=s.VideoPreferences.prepare();let f=!1;const h=r.remoteStreamDescriptions();for(const p of h)o.some(d=>d.attendeeId===p.attendeeId)||(p.attendeeId.endsWith(m.default.Modality)?(o.add(new g.default(p.attendeeId,1)),f=!0):o.add(new g.default(p.attendeeId,2)));f?(this.videoPreferences=o.build(),this.videoPreferencesUpdated=!0):this.videoPreferences=void 0}chooseRemoteVideoSources(r){this.logger.error("chooseRemoteVideoSources should not be called by VideoAdaptiveProbePolicy")}constructor(r){super(r,Ov.createConfig()),this.logger=r,super.shouldPauseTiles=!1,this.videoPreferences=void 0}},"VideoAdaptiveProbePolicy");l.default=e},3803169181:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(2178339051)),v=u(c(4829581265));let g=n(class pu{partialCompare(a){return this.priority-a.priority}equals(a){return this.attendeeId===a.attendeeId&&this.targetSize===a.targetSize&&this.priority===a.priority&&this.degradationPreference===a.degradationPreference}clone(){return new pu(this.attendeeId,this.priority,this.targetSize,this.degradationPreference)}targetSizeToBitrateKbps(a){switch(a){case m.default.Maximum:return pu.MAXIMUM_BITRATE_KBPS;case m.default.High:return pu.HIGH_BITRATE_KBPS;case m.default.Medium:return pu.MID_BITRATE_KBPS;case m.default.Low:return pu.LOW_BITRATE_KBPS}}constructor(a,i,e,t){this.attendeeId=a,this.priority=i,this.targetSize=e!==void 0?e:m.default.Maximum,this.degradationPreference=t!==void 0?t:v.default.Balanced}},"VideoPreference");l.default=g,g.LOW_BITRATE_KBPS=300,g.MID_BITRATE_KBPS=600,g.HIGH_BITRATE_KBPS=1500,g.MAXIMUM_BITRATE_KBPS=1e4},8071414974:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoPreferences=l.MutableVideoPreferences=l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=void 0;const m=u(c(4804743313));function v(e,t,r){if(e.transceiverController.getMidForGroupId===void 0||e.videoStreamIndex.attendeeIdForGroupId===void 0||r===void 0)return[];const o=new Array,f=new Map,h=new Map;for(const p of t){const d=e.transceiverController.getMidForGroupId(p);if(d===void 0)continue;const y=e.videoStreamIndex.attendeeIdForGroupId(p);f.set(y,d),h.set(y,p)}for(const p of r){const d=new m.default,y=f.get(p.attendeeId);y!==void 0&&(d.mid=y,d.attendeeId=p.attendeeId,d.groupId=h.get(p.attendeeId),d.priority=Number.MAX_SAFE_INTEGER-p.priority,d.targetBitrateKbps=p.targetSizeToBitrateKbps(p.targetSize),d.qualityAdaptationPreference=p.degradationPreference,o.push(d))}return o}n(v,"convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration"),l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=v;let g=n(class Dg{static default(){return new Dg([])}[Symbol.iterator](){let t=0;const r=this.items;return{next(){return t<r.length?{done:!1,value:r[t++]}:{done:!0,value:null}}}}first(){return this.items[0]}add(t){this.items.push(t)}replaceFirst(t,r){const o=this.items.findIndex(r);o===-1?this.items.push(t):this.has(t)?this.items.splice(o,1):this.items[o]=t}remove(t){this.items=this.items.filter(r=>!r.equals(t))}clear(){this.items=[]}isEmpty(){return this.items.length===0}equals(t){if(t===this)return!0;if(t.items.length!==this.items.length)return!1;for(const r of this.items)if(!t.items.some(o=>o.equals(r)))return!1;return!0}has(t){return this.items.some(r=>r.equals(t))}some(t){return this.items.some(t)}clone(){return new Dg([...this.items])}sort(){this.items.sort((t,r)=>t.partialCompare(r))}modify(){return new s(this)}constructor(t=[]){this.items=t}},"ObjectSet"),s=n(class{cow(){this.copied||(this.items=this.items.clone(),this.copied=!0)}add(t){this.items.has(t)||(this.cow(),this.items.add(t))}replaceFirst(t,r){this.items.has(t)&&!this.items.some(r)||(this.cow(),this.items.replaceFirst(t,r))}remove(t){this.items.has(t)&&(this.cow(),this.items.remove(t))}some(t){return this.items.some(t)}clear(){this.items.isEmpty()||(this.cow(),this.items.clear())}build(){return this.copied&&this.items.sort(),this.copied=!1,this.items}constructor(t=new g){this.items=t,this.copied=!1}},"SetBuilder"),a=n(class{add(t){this.builder.add(t)}replaceFirst(t,r){this.builder.replaceFirst(t,r)}remove(t){this.builder.remove(t)}some(t){return this.builder.some(t)}clear(){this.builder.clear()}build(){return new i(this.builder.build())}constructor(t){this.builder=t}},"MutableVideoPreferences");l.MutableVideoPreferences=a;let i=n(class Rg{static prepare(){return new a(new s)}static default(){return new Rg(g.default())}[Symbol.iterator](){return this.items[Symbol.iterator]()}highestPriority(){var t;return(t=this.items.first())===null||t===void 0?void 0:t.priority}sorted(){return this.items[Symbol.iterator]()}equals(t){return t===this||this.items.equals(t.items)}modify(){return new a(this.items.modify())}some(t){return this.items.some(t)}isEmpty(){return this.items.isEmpty()}clone(){const t=Rg.prepare();for(const r of this.items)t.add(r.clone());return t.build()}constructor(t){this.items=t}},"VideoPreferences");l.VideoPreferences=i,l.default=i},8681774825:function(H,l,c){"use strict";var u=this&&this.__createBinding||(Object.create?function(w,R,O,D){D===void 0&&(D=O),Object.defineProperty(w,D,{enumerable:!0,get:function(){return R[O]}})}:function(w,R,O,D){D===void 0&&(D=O),w[D]=R[O]}),m=this&&this.__setModuleDefault||(Object.create?function(w,R){Object.defineProperty(w,"default",{enumerable:!0,value:R})}:function(w,R){w.default=R}),v=this&&this.__importStar||function(w){if(w&&w.__esModule)return w;var R={};if(w!=null)for(var O in w)O!=="default"&&Object.prototype.hasOwnProperty.call(w,O)&&u(R,w,O);return m(R,w),R},g=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(l,"__esModule",{value:!0});const s=g(c(9898009183)),a=g(c(6502873558)),i=g(c(6132421099)),e=g(c(805846668)),t=c(1370928943),r=v(c(5393388022)),o=g(c(8050111605)),f=g(c(1865309432)),h=g(c(9677745702)),p=g(c(2178339051)),d=g(c(3803169181)),y=c(8071414974),S=g(c(3348721919)),b=g(c(4829581265));let _=n(class{constructor(){this.bandwidthEstimateKbps=0,this.usedBandwidthKbps=0,this.packetsLost=0,this.nackCount=0,this.rttMs=0}},"LinkMediaStats"),C=n(class Pa{reset(){this.allHighestPolicy=new h.default(""),this.optimalReceiveSet=new f.default,this.optimalReceiveStreams=[],this.optimalNonPausedReceiveStreams=[],this.subscribedReceiveSet=new f.default,this.subscribedReceiveStreams=[],this.videoPreferences=void 0,this.defaultVideoPreferences=void 0,this.shouldPauseTiles=!0,this.pausedStreamIds=new f.default,this.pausedBwAttendeeIds=new Set,this.videoPreferencesUpdated=!1,this.logCount=0,this.startupPeriod=!0,this.usingPrevTargetRate=!1,this.rateProbeState="Not Probing",this.firstEstimateTimestamp=0,this.lastUpgradeRateKbps=0,this.timeBeforeAllowSubscribeMs=Pa.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.lastProbeTimestamp=Date.now(),this.timeBeforeAllowProbeMs=Pa.MIN_TIME_BETWEEN_PROBE_MS,this.downlinkStats=new _,this.prevDownlinkStats=new _,this.probeFailed=!1,this.serverSideNetworkAdaption=this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption,this.pendingActionAfterUpdatedPreferences=!1}bindToTileController(R){this.tileController=R,this.logger.info("tileController bound")}setWantsResubscribeObserver(R){this.wantsResubscribeObserver=R}chooseRemoteVideoSources(R){var O;if(!(!((O=this.videoPreferences)===null||O===void 0)&&O.equals(R))){if(this.videoPreferences=R==null?void 0:R.clone(),!r.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!0,this.wantsResubscribeObserver!==void 0&&(this.wantsResubscribeObserver(),this.pendingActionAfterUpdatedPreferences=!1),this.serverSideNetworkAdaption===r.default.BandwidthProbingAndRemoteVideoQualityAdaption)){const D=new Array;for(const I of this.videoPreferences){const M=new o.default;M.attendee=new s.default,M.attendee.attendeeId=I.attendeeId,D.push(M)}this.allHighestPolicy.chooseRemoteVideoSources(D);return}this.videoPreferencesUpdated=!0,this.logger.info(`bwe: setVideoPreferences bwe: new preferences: ${JSON.stringify(R)}`)}}updateIndex(R){this.videoIndex=R,this.serverSideNetworkAdaption===r.default.BandwidthProbingAndRemoteVideoQualityAdaption&&this.allHighestPolicy.updateIndex(R),this.videoPreferences||this.updateDefaultVideoPreferences()}updateDefaultVideoPreferences(){const R=new Set;for(const M of this.videoIndex.remoteStreamDescriptions())R.add(M.attendeeId);const O=y.VideoPreferences.prepare(),D=R.size;let I=p.default.Maximum;D>8?I=p.default.Low:D>4&&(I=p.default.Medium);for(const M of R)O.add(new d.default(M,1,I));this.defaultVideoPreferences=O.build()}updateMetrics(R){if(!this.videoIndex||this.videoIndex.allStreams().empty())return;this.prevDownlinkStats=this.downlinkStats,this.downlinkStats=new _;const O=R.getObservableMetrics();this.downlinkStats.bandwidthEstimateKbps=O.availableIncomingBitrate/1e3;for(const D in R.streamMetricReports){const I=Number.parseInt(D,10),M=R.streamMetricReports[I];M.direction===a.default.DOWNSTREAM&&M.mediaType===i.default.VIDEO&&(M.currentMetrics.hasOwnProperty("nackCount")&&(this.downlinkStats.nackCount+=R.countPerSecond("nackCount",I)),M.currentMetrics.hasOwnProperty("packetsLost")&&(this.downlinkStats.packetsLost+=R.countPerSecond("packetsLost",I)),M.currentMetrics.hasOwnProperty("bytesReceived")&&(this.downlinkStats.usedBandwidthKbps+=R.bitsPerSecond("bytesReceived",I)/1e3))}}wantsResubscribe(){let R=!1;return!r.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(R||(R=this.pendingActionAfterUpdatedPreferences),this.serverSideNetworkAdaption===r.default.BandwidthProbingAndRemoteVideoQualityAdaption)?R||this.allHighestPolicy.wantsResubscribe():(this.calculateOptimalReceiveSet(),R||(R=!this.subscribedReceiveSet.equal(this.optimalReceiveSet)),R)}chooseSubscriptions(){return!r.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!1,this.serverSideNetworkAdaption===r.default.BandwidthProbingAndRemoteVideoQualityAdaption)?this.allHighestPolicy.chooseSubscriptions():(this.subscribedReceiveSet.equal(this.optimalReceiveSet)||(this.lastSubscribeTimestamp=Date.now()),this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveStreams=this.optimalReceiveStreams.slice(),this.subscribedReceiveSet.clone())}addObserver(R){this.observerQueue.add(R)}removeObserver(R){this.observerQueue.delete(R)}forEachObserver(R){for(const O of this.observerQueue)R(O)}setVideoPriorityBasedPolicyConfigs(R){this.videoPriorityBasedPolicyConfig=R}calculateOptimalReceiveStreams(){var R;const O=[],D=this.videoIndex.remoteStreamDescriptions();if(D.length===0||!((R=this.videoPreferences)===null||R===void 0)&&R.isEmpty()){this.optimalReceiveStreams=[];return}const I=this.rateProbeState;this.cleanBwPausedTiles(D),this.handleAppPausedStreams(O,D);const M=new Map;for(const De of this.getCurrentVideoPreferences())M.set(De.attendeeId,De);const k=D.filter(De=>M.has(De.attendeeId)),N=!this.streamsWithPreferenceDidChange(k),j=!this.startupPeriod&&N;if(j&&Date.now()-this.lastSubscribeTimestamp<this.timeBeforeAllowSubscribeMs)return;k.sort((De,ut)=>De.maxBitrateKbps===ut.maxBitrateKbps?De.streamId-ut.streamId:De.maxBitrateKbps-ut.maxBitrateKbps);for(const De of k)(De.avgBitrateKbps===0||De.avgBitrateKbps>De.maxBitrateKbps)&&(De.attendeeId.endsWith(e.default.Modality)&&De.maxBitrateKbps<100?De.maxBitrateKbps=De.avgBitrateKbps:De.avgBitrateKbps=De.maxBitrateKbps);const B=new Set;for(const De of this.getCurrentVideoPreferences()){const ut=k.filter(mt=>mt.attendeeId===De.attendeeId);if(ut.length<3)continue;let St=15,Rt=320*480;ut.forEach(mt=>{St=Math.max(St,mt.maxFrameRate),Rt=Math.max(Rt,mt.totalPixels())}),ut.sort((mt,At)=>{if(De.degradationPreference===b.default.MaintainResolution)return Math.abs(mt.maxFrameRate-At.maxFrameRate)<2?mt.totalPixels()-At.totalPixels():mt.maxFrameRate-At.maxFrameRate;if(De.degradationPreference===b.default.MaintainFramerate)return mt.totalPixels()===At.totalPixels()?mt.maxFrameRate-At.maxFrameRate:mt.totalPixels()-At.totalPixels();{const Cn=n(gt=>gt.avgBitrateKbps*Math.pow(2,5*gt.maxFrameRate/St*Math.pow(4,gt.totalPixels()/Rt)),"weighByFramerate");return Cn(mt)-Cn(At)}});let Ze;for(const mt of ut){if(Ze!==void 0&&(mt.maxFrameRate<Ze.maxFrameRate&&Math.abs(Ze.maxFrameRate-mt.maxFrameRate)>2||mt.totalPixels()<Ze.totalPixels())){B.add(mt.streamId);continue}Ze=mt}}const J=k.filter(De=>!B.has(De.streamId));this.logger.info(`Filtered to ${JSON.stringify(J)}`);const Q={targetDownlinkBitrate:0,chosenTotalBitrate:0,deltaToNextUpgrade:0};Q.targetDownlinkBitrate=this.determineTargetRate();const oe=this.subscribedReceiveSet.size(),$=this.downlinkStats.bandwidthEstimateKbps,he=!this.videoPriorityBasedPolicyConfig.allowSubscribe(oe,$);if(this.probeFailed&&(this.probeFailed=!1,this.timeBeforeAllowSubscribeMs=Pa.MIN_TIME_BETWEEN_SUBSCRIBE_MS,j&&he))return;const Ae=this.priorityPolicy(Q,J,O),Ee=!r.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption);let Oe=0;if(!Ee&&!this.startupPeriod&&N?this.rateProbeState==="Probing"?Oe=this.handleProbe(O,Q.targetDownlinkBitrate):Q.deltaToNextUpgrade!==0&&(Oe=this.maybeOverrideOrProbe(O,Q,Ae)):(this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0),this.previousStreamsWithPreference=k,this.videoPreferencesUpdated=!1,Oe===1){this.logger.info(`bwe: keepSameSubscriptions stats:${JSON.stringify(this.downlinkStats)}`),this.prevTargetRateKbps=Q.targetDownlinkBitrate;return}if(Oe===2){const De=this.calculateSubscribeRate(this.preProbeNonPausedReceiveStreams);this.optimalReceiveStreams=this.preProbeReceiveStreams.slice(),this.processBwPausedStreams(k,this.preProbeNonPausedReceiveStreams),this.logger.info("bwe: Use Pre-Probe subscription subscribedRate:"+De);return}this.optimalNonPausedReceiveStreams=O.slice();const be=this.pausedBwAttendeeIds.size;this.processBwPausedStreams(k,O),this.logger.getLogLevel()<=t.LogLevel.INFO&&(this.logCount%15===0||this.rateProbeState!==I||this.optimalReceiveStreams.length!==O.length||be!==this.pausedBwAttendeeIds.size)&&(this.logger.info(this.policyStateLogStr(D,Q.targetDownlinkBitrate)),this.logCount=0),this.logCount++,this.prevTargetRateKbps=Q.targetDownlinkBitrate,this.optimalReceiveStreams=O.slice()}calculateOptimalReceiveSet(){const R=new f.default;this.calculateOptimalReceiveStreams();for(const O of this.optimalReceiveStreams)R.add(O.streamId);if(!this.optimalReceiveSet.equal(R)){const O=this.calculateSubscribeRate(this.optimalReceiveStreams);this.logger.info(`bwe: new streamSelection: ${JSON.stringify(R)} subscribedRate:${O}`)}this.optimalReceiveSet=R}determineTargetRate(){let R=0;const O=Date.now();return this.downlinkStats.bandwidthEstimateKbps!==0?(this.firstEstimateTimestamp===0&&(this.firstEstimateTimestamp=O),this.startupPeriod&&(this.downlinkStats.bandwidthEstimateKbps>Pa.DEFAULT_BANDWIDTH_KBPS||this.downlinkStats.packetsLost>0||O-this.firstEstimateTimestamp>Pa.STARTUP_PERIOD_MS&&this.downlinkStats.bandwidthEstimateKbps<=this.prevDownlinkStats.bandwidthEstimateKbps)&&(this.startupPeriod=!1,this.prevTargetRateKbps=this.downlinkStats.bandwidthEstimateKbps),this.startupPeriod?R=Pa.DEFAULT_BANDWIDTH_KBPS:this.rateProbeState==="Probing"&&this.downlinkStats.usedBandwidthKbps>this.downlinkStats.bandwidthEstimateKbps&&this.downlinkStats.packetsLost<Pa.SPURIOUS_PACKET_LOST_THRESHOLD?(this.logger.info(`bwe: In probe state, overriding estimate ${this.downlinkStats.bandwidthEstimateKbps} with actual receive bitrate ${this.downlinkStats.usedBandwidthKbps}`),R=this.downlinkStats.usedBandwidthKbps+Pa.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS):R=this.downlinkStats.bandwidthEstimateKbps):this.firstEstimateTimestamp===0?R=Pa.DEFAULT_BANDWIDTH_KBPS:R=this.prevTargetRateKbps,!this.startupPeriod&&(this.usingPrevTargetRate&&this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps||this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps*(100-Pa.LARGE_RATE_CHANGE_TRIGGER_PERCENT)/100||this.downlinkStats.bandwidthEstimateKbps<this.downlinkStats.usedBandwidthKbps*Pa.LARGE_RATE_CHANGE_TRIGGER_PERCENT/100)&&this.downlinkStats.packetsLost===0?(this.logger.debug(()=>"bwe: ValidateRate: Using Previous rate "+this.prevTargetRateKbps),this.usingPrevTargetRate=!0,R=this.prevTargetRateKbps):this.usingPrevTargetRate=!1,R>15e3&&this.logger.warn("bwe: "+R+" exceeds maximum limit (15000). Limit TargetDisplaySize with VideoPreferences to avoid this."),Math.min(R,15e3)}setProbeState(R){if(this.rateProbeState===R)return!1;const O=Date.now();switch(R){case"Not Probing":this.probePendingStartTimestamp=0;break;case"Probe Pending":if(this.lastProbeTimestamp===0||O-this.lastProbeTimestamp>Pa.MIN_TIME_BETWEEN_PROBE_MS)this.probePendingStartTimestamp=O;else return!1;break;case"Probing":if(O-this.probePendingStartTimestamp>this.timeBeforeAllowProbeMs)this.lastProbeTimestamp=O,this.preProbeReceiveStreams=this.subscribedReceiveStreams.slice(),this.preProbeNonPausedReceiveStreams=this.optimalNonPausedReceiveStreams,this.timeBeforeAllowProbeMs=Math.min(this.timeBeforeAllowProbeMs*2,Pa.MAX_HOLD_BEFORE_PROBE_MS);else return!1;break}return this.logger.info("bwe: setProbeState to "+R+" from "+this.rateProbeState),this.rateProbeState=R,!0}upgradeToStream(R,O){for(let D=0;D<R.length;D++)if(R[D].groupId===O.groupId){const I=O.avgBitrateKbps-R[D].avgBitrateKbps;return this.logger.info("bwe: upgradeStream from "+JSON.stringify(R[D])+" to "+O),this.lastUpgradeRateKbps=I,R[D]=O,I}return R.push(O),this.lastUpgradeRateKbps=O.avgBitrateKbps,this.lastUpgradeRateKbps}handleProbe(R,O){if(Date.now()-this.lastProbeTimestamp>Pa.MAX_ALLOWED_PROBE_TIME_MS)return this.logger.info("bwe: Canceling probe due to timeout"),this.setProbeState("Not Probing"),0;if(this.downlinkStats.packetsLost>0&&(this.logger.info(`bwe: Probe encountering packets lost:${this.downlinkStats.packetsLost}`),this.downlinkStats.packetsLost>Pa.SPURIOUS_PACKET_LOST_THRESHOLD))return this.setProbeState("Not Probing"),this.logger.info(`bwe: Canceling probe due to packets lost:${this.downlinkStats.packetsLost}`),this.probeFailed=!0,this.timeBeforeAllowSubscribeMs=Math.max(Pa.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.timeBeforeAllowSubscribeMs)*3,2;const D=this.calculateSubscribeRate(this.optimalReceiveStreams);return this.chosenStreamsSameAsLast(R)||O>D?(this.logger.info("bwe: Probe successful"),this.setProbeState("Not Probing"),this.timeBeforeAllowProbeMs=Pa.MIN_TIME_BETWEEN_PROBE_MS,0):1}maybeOverrideOrProbe(R,O,D){const I=this.chosenStreamsSameAsLast(R);let M=0;const k=O.targetDownlinkBitrate>Pa.LOW_BITRATE_THRESHOLD_KBPS?Pa.TARGET_RATE_CHANGE_TRIGGER_PERCENT:Pa.TARGET_RATE_CHANGE_TRIGGER_PERCENT*2,N=O.targetDownlinkBitrate*k/100;if(this.targetRateBaselineForDeltaCheckKbps=this.targetRateBaselineForDeltaCheckKbps!==void 0?this.targetRateBaselineForDeltaCheckKbps:this.prevTargetRateKbps,!I&&Math.abs(O.targetDownlinkBitrate-this.targetRateBaselineForDeltaCheckKbps)<N?(this.logger.info("bwe: MaybeOverrideOrProbe: Reuse last decision based on delta rate. {"+JSON.stringify(this.subscribedReceiveSet)+"}"),M=1):this.targetRateBaselineForDeltaCheckKbps=O.targetDownlinkBitrate,this.downlinkStats.packetsLost>this.prevDownlinkStats.packetsLost)return this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0,M;if(I||M===1)switch(this.rateProbeState){case"Not Probing":this.setProbeState("Probe Pending");break;case"Probe Pending":this.setProbeState("Probing")&&(this.upgradeToStream(R,D),M=0);break}else this.setProbeState("Not Probing");return M}calculateSubscribeRate(R){let O=0;for(const D of R)!this.pausedStreamIds.contain(D.streamId)&&!this.pausedBwAttendeeIds.has(D.attendeeId)&&(O+=D.maxBitrateKbps);return O}handleAppPausedStreams(R,O){if(!this.tileController){this.logger.warn("tileController not found!");return}this.pausedStreamIds=new f.default;const D=this.tileController.getAllRemoteVideoTiles();for(const I of D){const M=I.state();if(M.paused&&!this.pausedBwAttendeeIds.has(M.boundAttendeeId)){let k=O.length;for(;k--;)O[k].attendeeId===M.boundAttendeeId&&(this.logger.info("bwe: removed paused attendee "+M.boundAttendeeId+" streamId: "+O[k].streamId),this.pausedStreamIds.add(O[k].streamId),this.subscribedReceiveSet.contain(O[k].streamId)&&R.push(O[k]),O.splice(k,1))}}}processBwPausedStreams(R,O){if(!this.tileController){this.logger.warn("tileController not found!");return}const D=this.getCurrentVideoPreferences();if(D&&this.shouldPauseTiles){const I=this.tileController.getAllVideoTiles();for(const M of D){const k=this.getVideoTileForAttendeeId(M.attendeeId,I),N=(k==null?void 0:k.state().paused)||!1;if(O.some(j=>j.attendeeId===M.attendeeId))N&&this.pausedBwAttendeeIds.has(M.attendeeId)&&(this.logger.info(`bwe: unpausing attendee ${M.attendeeId} due to bandwidth`),this.forEachObserver(j=>{j.tileWillBeUnpausedByDownlinkPolicy(k.id())}),this.tileController.unpauseVideoTile(k.id()),this.pausedBwAttendeeIds.delete(M.attendeeId));else{const j=R.some(B=>B.attendeeId===M.attendeeId);if(k&&j){const B=this.optimalReceiveStreams.find(J=>J.attendeeId===M.attendeeId);B!==void 0&&(N||(this.logger.info(`bwe: pausing streamId ${B.streamId} attendee ${M.attendeeId} due to bandwidth`),this.forEachObserver(J=>{J.tileWillBePausedByDownlinkPolicy(k.id())}),this.tileController.pauseVideoTile(k.id())),O.push(B)),this.pausedBwAttendeeIds.add(M.attendeeId)}else if(j){const B=this.tileController.addVideoTile();B.bindVideoStream(M.attendeeId,!1,null,0,0,0,null),this.forEachObserver(J=>{J.tileWillBePausedByDownlinkPolicy(B.id())}),B.pause(),this.logger.info(`bwe: Created video tile ${B.id()} for bw paused attendee ${M.attendeeId}`),this.pausedBwAttendeeIds.add(M.attendeeId)}}}}}cleanBwPausedTiles(R){if(!this.tileController){this.logger.warn("tileController not found!");return}const O=this.tileController.getAllRemoteVideoTiles(),D=this.getCurrentVideoPreferences();for(const I of O){const M=I.state();M.boundVideoStream||(R.some(k=>k.attendeeId===M.boundAttendeeId)?D!==void 0&&!D.some(k=>k.attendeeId===M.boundAttendeeId)&&this.tileController.removeVideoTile(M.tileId):(this.tileController.removeVideoTile(M.tileId),this.logger.info(`bwe: Removed video tile ${M.tileId} for bw paused attendee ${M.boundAttendeeId}`)))}}priorityPolicy(R,O,D){let I;const M=this.getCurrentVideoPreferences(),k=M.highestPriority();let N,j=k;for(;j!==-1;){N=-1;for(const B of M)if(B.priority===j)for(const J of O)J.attendeeId===B.attendeeId&&(D.some(Q=>Q.groupId===J.groupId)||(R.chosenTotalBitrate+J.avgBitrateKbps<=R.targetDownlinkBitrate?(D.push(J),R.chosenTotalBitrate+=J.avgBitrateKbps):R.deltaToNextUpgrade===0&&(R.deltaToNextUpgrade=J.avgBitrateKbps,I=J)));else if(B.priority>j){N=B.priority;break}for(const B of M)if(B.priority===j){for(const J of O)if(J.attendeeId===B.attendeeId){const Q=D.findIndex(oe=>oe.groupId===J.groupId&&oe.maxBitrateKbps<=J.maxBitrateKbps&&oe.avgBitrateKbps<J.avgBitrateKbps);if(Q!==-1){const oe=J.avgBitrateKbps-D[Q].avgBitrateKbps;this.hasSimulcastStreams(O,J.attendeeId,J.groupId)&&this.canUpgrade(J.avgBitrateKbps,B.targetSize,B.targetSizeToBitrateKbps(B.targetSize),J.attendeeId.endsWith(e.default.Modality))?(this.logger.info(`bwe: attendee: ${J.attendeeId} group: ${J.groupId} has simulcast and can upgrade avgBitrate: ${J.avgBitrateKbps} target: ${B.targetSizeToBitrateKbps(B.targetSize)} targetTotalBitrate: ${R.targetDownlinkBitrate}`),R.chosenTotalBitrate+oe<=R.targetDownlinkBitrate?(R.chosenTotalBitrate+=oe,D[Q]=J):R.deltaToNextUpgrade===0&&(R.deltaToNextUpgrade=oe,I=J)):this.logger.info("bwe: cannot upgrade stream quality beyond target size")}}}else if(B.priority>j)break;if(j===k&&R.deltaToNextUpgrade!==0)break;j=N}return I}getVideoTileForAttendeeId(R,O){for(const D of O)if(D.state().boundAttendeeId===R)return D;return null}canUpgrade(R,O,D,I){let M=!1;return(O===p.default.High||!I&&R<=D||I&&O===p.default.Medium&&R<=D)&&(M=!0),M?(this.logger.info(`bwe: canUpgrade: bitrateKbps: ${R} targetBitrateKbps: ${D}`),!0):(this.logger.info(`bwe: cannot Upgrade: bitrateKbps: ${R} targetBitrateKbps: ${D}`),!1)}hasSimulcastStreams(R,O,D){let I=0;for(const M of R)M.attendeeId===O&&M.groupId===D&&I++;return this.logger.info(`bwe: attendeeId: ${O} groupId: ${D} hasSimulcastStreams: streamCount: ${I}`),I>1}streamsWithPreferenceDidChange(R){if(this.previousStreamsWithPreference===void 0||R.length!==this.previousStreamsWithPreference.length||this.videoPreferencesUpdated===!0)return!0;for(const O of R)if(this.previousStreamsWithPreference.find(I=>I.groupId===O.groupId&&I.streamId===O.streamId&&I.maxBitrateKbps===O.maxBitrateKbps)===void 0)return!0;return!1}chosenStreamsSameAsLast(R){if(this.optimalNonPausedReceiveStreams.length!==R.length)return!1;for(const O of this.optimalNonPausedReceiveStreams)if(!R.some(D=>D.streamId===O.streamId))return!1;return!0}policyStateLogStr(R,O){const D=this.calculateSubscribeRate(this.optimalReceiveStreams),I={targetBitrate:O,subscribedRate:D,probeState:this.rateProbeState,startupPeriod:this.startupPeriod};let M="remoteInfos: [";for(const N of R)M+=`{grpId:${N.groupId} strId:${N.streamId} maxBr:${N.maxBitrateKbps} avgBr:${N.avgBitrateKbps}}, `;M+="]";let k=`bwe: optimalReceiveSet ${JSON.stringify(I)}
bwe:   prev ${JSON.stringify(this.prevDownlinkStats)}
bwe:   now  ${JSON.stringify(this.downlinkStats)}
bwe:   ${M}
`;return(this.pausedStreamIds.size()>0||this.pausedBwAttendeeIds.size>0)&&(k+=`bwe:   paused: app stream ids ${JSON.stringify(this.pausedStreamIds)}  bw attendees { ${Array.from(this.pausedBwAttendeeIds).join(" ")} }
`),this.videoPreferences?k+=`bwe:   preferences: ${JSON.stringify(this.videoPreferences)}`:k+=`bwe:   default preferences: ${JSON.stringify(this.defaultVideoPreferences)}`,k}getCurrentVideoPreferences(){return this.videoPreferences||this.defaultVideoPreferences}getServerSideNetworkAdaption(){return this.serverSideNetworkAdaption}setServerSideNetworkAdaption(R){this.serverSideNetworkAdaption=R,this.setProbeState("Not Probing")}supportedServerSideNetworkAdaptions(){return[r.default.None,r.default.BandwidthProbing,r.default.BandwidthProbingAndRemoteVideoQualityAdaption]}getVideoPreferences(){let R=this.getCurrentVideoPreferences();return R||(R=y.VideoPreferences.prepare().build()),R}wantsAllTemporalLayersInIndex(){return!0}constructor(R,O=S.default.Default){this.logger=R,this.videoPriorityBasedPolicyConfig=O,this.shouldPauseTiles=!0,this.observerQueue=new Set,this.pausedBwAttendeeIds=new Set,this.wantsResubscribeObserver=void 0,this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption===r.default.Default&&(this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption=r.default.BandwidthProbingAndRemoteVideoQualityAdaption),this.reset()}},"VideoPriorityBasedPolicy");l.default=C,C.DEFAULT_BANDWIDTH_KBPS=2800,C.STARTUP_PERIOD_MS=6e3,C.LARGE_RATE_CHANGE_TRIGGER_PERCENT=20,C.TARGET_RATE_CHANGE_TRIGGER_PERCENT=15,C.LOW_BITRATE_THRESHOLD_KBPS=300,C.MIN_TIME_BETWEEN_PROBE_MS=5e3,C.MIN_TIME_BETWEEN_SUBSCRIBE_MS=2e3,C.MAX_HOLD_BEFORE_PROBE_MS=3e4,C.MAX_ALLOWED_PROBE_TIME_MS=6e4,C.SPURIOUS_PACKET_LOST_THRESHOLD=2,C.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS=100},3348721919:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(5393388022));let v=n(class id{allowSubscribe(s,a){let i=0;const e=this.currentNetworkEvent;if(a>this.referenceBitrate)return this.currentNetworkEvent=2,this.referenceBitrate=a,!0;if(a<this.referenceBitrate){if(this.currentNetworkEvent=1,i=this.getSubscribeDelay(this.currentNetworkEvent,s),e!==1)this.bandwidthDecreaseTimestamp=Date.now();else if(Date.now()-this.bandwidthDecreaseTimestamp>i)return this.referenceBitrate=a,!0;return!1}else return this.currentNetworkEvent=0,!1}getSubscribeDelay(s,a){let i=id.MINIMUM_DELAY_MS;const e=id.MAXIMUM_DELAY_MS-id.MINIMUM_DELAY_MS,t=this.networkIssueResponseDelayFactor;switch(s){case 1:i+=e*t*(1+a/10),i=Math.min(id.MAXIMUM_DELAY_MS,i);break}return i}constructor(s=0,a=0){this.networkIssueResponseDelayFactor=s,this.networkIssueRecoveryDelayFactor=a,this.currentNetworkEvent=0,this.bandwidthDecreaseTimestamp=0,this.referenceBitrate=0,this.serverSideNetworkAdaption=m.default.BandwidthProbingAndRemoteVideoQualityAdaption,s<0?s=0:s>1&&(s=1),this.networkIssueResponseDelayFactor=s,a<0?a=0:a>1&&(a=1),this.networkIssueRecoveryDelayFactor=a}},"VideoPriorityBasedPolicyConfig");l.default=v,v.MINIMUM_DELAY_MS=2e3,v.MAXIMUM_DELAY_MS=8e3,v.Default=new v(0,0),v.UnstableNetworkPreset=new v(0,1),v.StableNetworkPreset=new v(1,0)},4829581265:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoQualityAdaptationPreference=void 0;var c;(function(u){u[u.Balanced=0]="Balanced",u[u.MaintainFramerate=1]="MaintainFramerate",u[u.MaintainResolution=2]="MaintainResolution"})(c=l.VideoQualityAdaptationPreference||(l.VideoQualityAdaptationPreference={})),l.default=c},3718889761:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{create(){const m={clientWidth:400,clientHeight:300,width:400,height:300,videoWidth:400,videoHeight:300,style:{transform:""},hasAttribute:()=>!1,removeAttribute:()=>{},setAttribute:()=>{},srcObject:!1,paused:!0,pause:()=>{m.paused=!0},play:()=>(m.paused=!1,Promise.resolve())};return m}},"NoOpVideoElementFactory");l.default=c},1458156729:function(H,l){"use strict";var c=this&&this.__awaiter||function(m,v,g,s){function a(i){return i instanceof g?i:new g(function(e){e(i)})}return n(a,"adopt"),new(g||(g=Promise))(function(i,e){function t(f){try{o(s.next(f))}catch(h){e(h)}}n(t,"fulfilled");function r(f){try{o(s.throw(f))}catch(h){e(h)}}n(r,"rejected");function o(f){f.done?i(f.value):a(f.value).then(t,r)}n(o,"step"),o((s=s.apply(m,v||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=n(class{destroy(){this.canvas=null,this.destroyed=!0}asCanvasImageSource(){return c(this,void 0,void 0,function*(){return this.destroyed?Promise.reject("canvas buffer is destroyed"):Promise.resolve(this.canvas)})}asCanvasElement(){return this.canvas}constructor(v){this.canvas=v,this.destroyed=!1}},"CanvasVideoFrameBuffer");l.default=u},4353575046:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(1458156729)),g=m(c(4223139537)),s=15;let a=n(class{destroy(){if(this.stop(),this.stages)for(const e of this.stages)e.destroy();this.timer.destroy()}get framerate(){return this.fr}set framerate(e){this.fr=e<0?s:e}stop(){if(this.videoInput.removeEventListener("loadedmetadata",this.process),this.videoInput.srcObject=null,this.destroyInputMediaStreamAndBuffers(),this.outputMediaStream)for(const e of this.outputMediaStream.getVideoTracks())e.stop();this.hasStarted&&(this.hasStarted=!1,this.forEachObserver(e=>{e.processingDidStop&&e.processingDidStop()}))}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}getInputMediaStream(){return u(this,void 0,void 0,function*(){return this.inputVideoStream})}getActiveOutputMediaStream(){return this.isOutputMediaStreamActive()?this.outputMediaStream:(this.outputMediaStream=this.canvasOutput.captureStream(this.framerate),this.cloneInputAudioTracksToOutput(),this.outputMediaStream)}setInputMediaStream(e){return u(this,void 0,void 0,function*(){if(!e){this.stop();return}if(e.getVideoTracks().length===0){this.logger.error("No video tracks in input media stream, ignoring");return}this.inputVideoStream=e;const t=this.inputVideoStream.getVideoTracks()[0].getSettings();this.logger.info(`processing pipeline input stream settings ${JSON.stringify(t)}`),this.canvasOutput.width=t.width,this.canvasOutput.height=t.height,this.videoInput.addEventListener("loadedmetadata",this.process),this.videoInput.srcObject=this.inputVideoStream,this.videoInput.setAttribute("playsinline","true");const r=new v.default(this.canvasInput);this.sourceBuffers.push(r),this.videoInput.load();try{yield this.videoInput.play()}catch{this.logger.warn("Video element play() overrided by another load().")}this.cloneInputAudioTracksToOutput()})}cloneInputAudioTracksToOutput(){if(!this.isOutputMediaStreamActive()||this.inputVideoStream===null){this.logger.info("Not cloning input audio tracks to output, do not have media streams ready");return}for(const e of this.outputMediaStream.getAudioTracks())this.logger.info(`Removing audio track ${e.id} from output stream`),this.outputMediaStream.removeTrack(e);for(const e of this.inputVideoStream.getAudioTracks())this.logger.info(`Adding audio track ${e.id} to output stream`),this.outputMediaStream.addTrack(e)}isOutputMediaStreamActive(){return this.outputMediaStream&&this.outputMediaStream.active}set processors(e){this.stages=e}get processors(){return this.stages}forEachObserver(e){for(const t of this.observers)setTimeout(()=>{e(t)},0)}destroyInputMediaStreamAndBuffers(){if(this.inputVideoStream)for(const e of this.inputVideoStream.getTracks())e.stop();this.inputVideoStream=null;for(const e of this.sourceBuffers)e.destroy();this.sourceBuffers=[]}constructor(e,t,r=new g.default){this.logger=e,this.stages=t,this.fr=s,this.outputMediaStream=new MediaStream,this.videoInput=document.createElement("video"),this.canvasOutput=document.createElement("canvas"),this.outputCtx=this.canvasOutput.getContext("2d"),this.canvasInput=document.createElement("canvas"),this.inputCtx=this.canvasInput.getContext("2d"),this.inputVideoStream=null,this.sourceBuffers=[],this.destBuffers=[],this.observers=new Set,this.hasStarted=!1,this.process=o=>u(this,void 0,void 0,function*(){if(!this.inputVideoStream)return;const f=performance.now();this.videoInput.videoWidth&&(this.canvasInput.width!==this.videoInput.videoWidth&&(this.canvasInput.width=this.videoInput.videoWidth,this.canvasInput.height=this.videoInput.videoHeight,this.sourceBuffers[0].height=this.canvasInput.height,this.sourceBuffers[0].width=this.canvasInput.width,this.sourceBuffers[0].framerate=this.framerate),this.inputCtx.drawImage(this.videoInput,0,0));let h=[];h.push(this.sourceBuffers[0]);try{for(const C of this.processors)h=yield C.process(h)}catch{this.forEachObserver(w=>{w.processingDidFailToStart&&w.processingDidFailToStart()});return}this.destBuffers=h;let p;try{p=yield this.destBuffers[0].asCanvasImageSource()}catch{this.inputVideoStream&&(this.logger.info("buffers are destroyed and pipeline could not start"),this.forEachObserver(w=>{w.processingDidFailToStart&&w.processingDidFailToStart()}));return}const d=p.width,y=p.height;d!==0&&y!==0&&(this.canvasOutput.width!==d&&this.canvasOutput.height!==y&&(this.canvasOutput.width=d,this.canvasOutput.height=y),this.outputCtx.drawImage(p,0,0,d,y,0,0,d,y),this.hasStarted||(this.hasStarted=!0,this.forEachObserver(C=>{C.processingDidStart&&C.processingDidStart()})));const S=performance.now()-f,b=1e3*2/this.framerate-S,_=Math.max(0,1e3/this.framerate-S);b<=0&&this.forEachObserver(C=>{C.processingLatencyTooHigh&&C.processingLatencyTooHigh(S)}),yield this.timer.start(_,this.process.bind(this))}),this.timer=r}},"DefaultVideoFrameProcessorPipeline");l.default=a},4223139537:function(H,l){"use strict";var c=this&&this.__awaiter||function(m,v,g,s){function a(i){return i instanceof g?i:new g(function(e){e(i)})}return n(a,"adopt"),new(g||(g=Promise))(function(i,e){function t(f){try{o(s.next(f))}catch(h){e(h)}}n(t,"fulfilled");function r(f){try{o(s.throw(f))}catch(h){e(h)}}n(r,"rejected");function o(f){f.done?i(f.value):a(f.value).then(t,r)}n(o,"step"),o((s=s.apply(m,v||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=n(class{createWorkerTimer(){try{const v=new Blob([`self.onmessage = async function(e){ 
            var timerID = null;
            const awaitTimeout = delay => new Promise( resolve => {
              timerID = setTimeout(resolve, delay);
            })
            await awaitTimeout(e.data);
            postMessage(timerID);
          }`],{type:"application/javascript"});return new Worker(window.URL.createObjectURL(v))}catch{}}start(v,g){return c(this,void 0,void 0,function*(){this.callback=g,this.workerTimer?(this.workerTimer.onmessage=s=>{this.lastTimeout=s.data,this.callback()},this.workerTimer.postMessage(v)):this.lastTimeout=setTimeout(()=>{this.callback()},v)})}destroy(){return c(this,void 0,void 0,function*(){this.callback=void 0,this.lastTimeout&&(clearTimeout(this.lastTimeout),this.lastTimeout=void 0),this.workerTimer&&(this.workerTimer.terminate(),this.workerTimer=void 0)})}constructor(){this.workerTimer=void 0,this.callback=void 0,this.workerTimer=this.createWorkerTimer()}},"DefaultVideoFrameProcessorTimer");l.default=u},7309008175:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(5546774952)),g=m(c(4353575046));let s=n(class wv{get outputMediaStream(){return this.pipe.outputMediaStream}passEventControllerToProcessors(i){if(this.pipe.processors)for(const e of this.pipe.processors)typeof e.setEventController=="function"&&e.setEventController(i)}chooseNewInnerDevice(i){const e=new wv(this.logger,i,this.processors,this.browserBehavior);return e.pipe=this.pipe,e}getInnerDevice(){return this.device}intrinsicDevice(){return u(this,void 0,void 0,function*(){return this.device})}transformStream(i){return u(this,void 0,void 0,function*(){return yield this.pipe.setInputMediaStream(i),this.inputMediaStream=i,this.pipe.getActiveOutputMediaStream()})}onOutputStreamDisconnect(){this.logger.info("DefaultVideoTransformDevice: detach stopping input media stream");const i=this.device&&this.device.id;if(this.pipe.stop(),!i&&this.inputMediaStream)for(const e of this.inputMediaStream.getVideoTracks())e.stop()}stop(){return u(this,void 0,void 0,function*(){if(this.inputMediaStream)for(const i of this.inputMediaStream.getVideoTracks())i.stop();this.pipe.destroy(),this.inputMediaStream=null})}addObserver(i){this.observers.add(i)}removeObserver(i){this.observers.delete(i)}processingDidStart(){this.logger.info("video transform device processing started"),this.forEachObserver(i=>{i.processingDidStart&&i.processingDidStart()})}processingLatencyTooHigh(i){this.forEachObserver(e=>{e.processingLatencyTooHigh&&e.processingLatencyTooHigh(i)})}processingDidFailToStart(){this.logger.info("video transform device processing failed to start"),this.forEachObserver(i=>{i.processingDidFailToStart&&i.processingDidFailToStart()})}processingDidStop(){this.logger.info("video transform device processing stopped"),this.forEachObserver(i=>{i.processingDidStop&&i.processingDidStop()})}forEachObserver(i){for(const e of this.observers)setTimeout(()=>{i(e)},0)}constructor(i,e,t,r=new v.default){this.logger=i,this.device=e,this.processors=t,this.browserBehavior=r,this.observers=new Set,this.pipe=new g.default(this.logger,this.processors),this.pipe.addObserver(this)}},"DefaultVideoTransformDevice");l.default=s},3814682321:function(H,l){"use strict";var c=this&&this.__awaiter||function(m,v,g,s){function a(i){return i instanceof g?i:new g(function(e){e(i)})}return n(a,"adopt"),new(g||(g=Promise))(function(i,e){function t(f){try{o(s.next(f))}catch(h){e(h)}}n(t,"fulfilled");function r(f){try{o(s.throw(f))}catch(h){e(h)}}n(r,"rejected");function o(f){f.done?i(f.value):a(f.value).then(t,r)}n(o,"step"),o((s=s.apply(m,v||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=n(class{process(v){return c(this,void 0,void 0,function*(){return v})}destroy(){return c(this,void 0,void 0,function*(){})}},"NoOpVideoFrameProcessor");l.default=u},8994379632:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DeferredPromise=void 0;let c=n(class{getPromise(){return this.promise}resolvePromise(m){this.resolve(m)}resolveAndReplacePromise(m){this.resolve(m),this.promise=new Promise((v,g)=>{this.resolve=v,this.reject=g})}rejectPromise(m){this.reject(m)}rejectAndReplacePromise(m){this.reject(m),this.promise=new Promise((v,g)=>{this.resolve=v,this.reject=g})}constructor(){this.promise=new Promise((m,v)=>{this.resolve=m,this.reject=v})}},"DeferredPromise");l.DeferredPromise=c},8001499918:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(g,s,a,i){function e(t){return t instanceof a?t:new a(function(r){r(t)})}return n(e,"adopt"),new(a||(a=Promise))(function(t,r){function o(p){try{h(i.next(p))}catch(d){r(d)}}n(o,"fulfilled");function f(p){try{h(i.throw(p))}catch(d){r(d)}}n(f,"rejected");function h(p){p.done?t(p.value):e(p.value).then(o,f)}n(h,"step"),h((i=i.apply(g,s||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxCanvasOpsManager=void 0;const m=c(2014740298);let v=n(class{getInferenceInputData(s){return this.inferenceCtx.save(),this.inferenceCtx.scale(this.horizontalResizeScalar,this.verticalResizeScalar),this.inferenceCtx.drawImage(s,0,0),this.inferenceCtx.restore(),this.inferenceCtx.getImageData(0,0,m.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,m.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS)}configureForStreamParameters(s){return u(this,void 0,void 0,function*(){if(this.streamParameters=s,this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.backgroundReplacementCanvas){const a=document.createElement("canvas");a.width=this.streamParameters.width,a.height=this.streamParameters.height,a.getContext("2d").drawImage(this.backgroundReplacementCanvas,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=a}this.configureCanvasPipeline()})}configureCanvasPipeline(){this.inferenceCanvas=document.createElement("canvas"),this.inferenceCtx=this.inferenceCanvas.getContext("2d",{willReadFrequently:!0}),this.inferenceCanvas.width=m.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,this.inferenceCanvas.height=m.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.horizontalResizeScalar=m.SEGMENTATION_MODEL.WIDTH_IN_PIXELS/this.streamParameters.width,this.verticalResizeScalar=m.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS/this.streamParameters.height}getBackgroundReplacementCanvas(){return this.backgroundReplacementCanvas}loadReplacementBackground(s){return u(this,void 0,void 0,function*(){const a=s.backgroundReplacement.backgroundImageURL,i=s.backgroundReplacement.defaultColor;if(a)try{const e=yield this.loadImage(a);this.backgroundReplacementImage=e,this.resizeAndSetReplacementImage(this.backgroundReplacementImage)}catch(e){throw this.logger.error(e),new Error("Failed to set the replacement image.")}else this.resizeAndSetReplacementColor(i)})}resizeAndSetReplacementImage(s){const a=document.createElement("canvas"),i=a.getContext("2d");a.width=this.streamParameters.width,a.height=this.streamParameters.height,i.drawImage(s,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=a}resizeAndSetReplacementColor(s){const a=document.createElement("canvas"),i=a.getContext("2d");a.width=this.streamParameters.width,a.height=this.streamParameters.height,i.fillStyle=s,i.fillRect(0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=a}loadImage(s){return u(this,void 0,void 0,function*(){const i=yield(yield fetch(s).catch(t=>{throw this.logger.error(t.toString()),new Error("Failed to fetch image.")})).blob(),e=new Image;return e.src=URL.createObjectURL(i),new Promise((t,r)=>{e.onload=()=>{t(e)},e.onerror=o=>{r(o)}})})}constructor(s,a){this.streamParameters=s,this.outputCanvas=a,this.configureCanvasPipeline()}},"VideoFxCanvasOpsManager");l.VideoFxCanvasOpsManager=v},2014740298:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.FXLIB_PATH=l.WORKER_PATH=l.CDN_BASE_PATH=l.RESOURCE_CONSTRAINTS=l.SEGMENTATION_MODEL=l.DEFAULT_STREAM_PARAMETERS=l.WORKER_MSG=void 0,l.WORKER_MSG={BUILD_ENGINE_REQUEST:"BuildEngineRequest",BUILD_ENGINE_RESPONSE:"BuildEngineResponse",PERFORM_SEGMENTATION_REQUEST:"PerformSegmentationRequest",PERFORM_SEGMENTATION_RESPONSE:"PerformSegmentationResponse",PERFORM_SEGMENTATION_SAB_REQUEST:"PerformSegmentationSABRequest",PERFORM_SEGMENTATION_SAB_RESPONSE:"PerformSegmentationSABResponse",DESTROY_ASSETS_REQUEST:"DestroyAssetsRequest",DESTROY_ASSETS_RESPONSE:"DestroyAssetsResponse",CLOSE_WORKER_REQUEST:"CloseWorkerRequest"},l.DEFAULT_STREAM_PARAMETERS={FRAMES_PER_SECOND:15,WIDTH_IN_PIXEL:960,HEIGHT_IN_PIXEL:540,CHANNEL_COUNT:4},l.SEGMENTATION_MODEL={LOAD_SUCCESS:2,WIDTH_IN_PIXELS:176,HEIGHT_IN_PIXELS:160},l.RESOURCE_CONSTRAINTS={DEFAULT_PROCESSING_BUDGET_PER_FRAME:50,SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION:1,SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT:500,BLUR_DEFAULT_CYCLE_PERCENTAGE:10,BLUR_SAMPLING_PERIOD_FRAME_COUNT:1e3,MIN_PROCESSING_BUDGET:0,MAX_PROCESSING_BUDGET:100},l.CDN_BASE_PATH="https://static.sdkassets.chime.aws";const c="/ml_media_fx/otherassets";l.WORKER_PATH=`${c}/worker.js`,l.FXLIB_PATH=`${c}/fxlib.js`},1314104503:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(y,S,b,_){function C(w){return w instanceof b?w:new b(function(R){R(w)})}return n(C,"adopt"),new(b||(b=Promise))(function(w,R){function O(M){try{I(_.next(M))}catch(k){R(k)}}n(O,"fulfilled");function D(M){try{I(_.throw(M))}catch(k){R(k)}}n(D,"rejected");function I(M){M.done?w(M.value):C(M.value).then(O,D)}n(I,"step"),I((_=_.apply(y,S||[])).next())})},m=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(l,"__esModule",{value:!0});const v=c(9463981249),g=c(5963876428),s=c(7984036634),a=m(c(5546774952)),i=m(c(1831006443)),e=c(5685319565),t=m(c(6885109343)),r=m(c(1458156729)),o=c(8994379632),f=c(8001499918),h=c(2014740298),p=c(6322494344);let d=n(class mu{process(S){return u(this,void 0,void 0,function*(){return S})}fxProcess(S){return u(this,void 0,void 0,function*(){const b=S[0].asCanvasElement();this.didStreamParametersChange(b)&&(yield this.adjustProcessorForNewStreamParameters(b));try{yield this.manageSegmentationMask(b)}catch(_){throw this.logger.error(_),new Error("Video stream could not be processed")}return yield this.renderer.render(b,this.segmentationMask),S[0]=this.canvasVideoFrameBuffer,S})}noOpProcess(S){return u(this,void 0,void 0,function*(){return S})}didStreamParametersChange(S){return S.width!==this.streamParameters.width||S.height!==this.streamParameters.height}adjustProcessorForNewStreamParameters(S){return u(this,void 0,void 0,function*(){this.streamParameters.width=S.width,this.streamParameters.height=S.height,yield this.canvasOpsManager.configureForStreamParameters(this.streamParameters),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,this.effectConfig)})}destroy(){return u(this,void 0,void 0,function*(){this.canvasVideoFrameBuffer.destroy(),this.fxLibScript&&this.fxLibScript.parentNode&&this.fxLibScript.parentNode.removeChild(this.fxLibScript),this.engineWorker&&(this.destroyedAssetsPromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:h.WORKER_MSG.DESTROY_ASSETS_REQUEST}),yield this.destroyedAssetsPromise.getPromise(),this.engineWorker.postMessage({msg:h.WORKER_MSG.CLOSE_WORKER_REQUEST})),this.logger.info("VideoFxProcessor destroyed.")})}manageSegmentationMask(S){return u(this,void 0,void 0,function*(){try{if(this.segmentationRateManager.submitFrame(),this.segmentationRateManager.shouldApplySegmentation()){this.segmentationRateManager.startSegmentation();const b=this.canvasOpsManager.getInferenceInputData(S);this.segmentationMask=yield this.generateSegmentationMask(b),this.segmentationRateManager.completeSegmentation()}}catch(b){throw this.logger.error(b.toString()),new Error("Can not properly manage the returned segmentation mask")}})}generateSegmentationMask(S){return u(this,void 0,void 0,function*(){mu.isSharedArrayBufferSupported?(this.sharedImageData.set(S.data),this.engineWorker.postMessage({msg:h.WORKER_MSG.PERFORM_SEGMENTATION_SAB_REQUEST,payload:this.sharedImageBuffer})):this.engineWorker.postMessage({msg:h.WORKER_MSG.PERFORM_SEGMENTATION_REQUEST,payload:S},[S.data.buffer]);try{return yield this.segmentationRequestPromise.getPromise()}catch(b){throw this.logger.error(b.toString()),new Error("Segmentation mask could not be generated")}})}cloneConfigFrom(S){return{backgroundBlur:{isEnabled:S.backgroundBlur.isEnabled,strength:S.backgroundBlur.strength},backgroundReplacement:{isEnabled:S.backgroundReplacement.isEnabled,backgroundImageURL:S.backgroundReplacement.backgroundImageURL,defaultColor:S.backgroundReplacement.defaultColor}}}setEffectConfig(S){return u(this,void 0,void 0,function*(){if(this.sameVideoFxConfig(S,this.effectConfig))return;const b=this.cloneConfigFrom(S);try{yield this.validateEffectConfig(b)}catch(_){throw this.logger.error(_.toString()),new Error("Provided effect config is invalid, not updating VideoFxProcessor")}b.backgroundReplacement.isEnabled&&(yield this.canvasOpsManager.loadReplacementBackground(b),yield this.renderer.setBackgroundReplacementCanvas(this.canvasOpsManager.getBackgroundReplacementCanvas())),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,b),this.effectConfig=b,!this.effectConfig.backgroundBlur.isEnabled&&!this.effectConfig.backgroundReplacement.isEnabled?this.process=this.noOpProcess:this.process=this.fxProcess,this.logger.info(`VideoFxProcessor effect configuration updated to: ${JSON.stringify(this.effectConfig)}`),this.eventController&&this.publishVideoFxConfigEvent()})}validateEffectConfig(S){return u(this,void 0,void 0,function*(){if(S.backgroundBlur.isEnabled&&S.backgroundReplacement.isEnabled)throw new Error("Invalid VideoFx configuration: Background Blur and Background Replacement can not both be enabled");S.backgroundReplacement.isEnabled&&(yield this.validateReplacementConfig(S))})}validateReplacementConfig(S){return u(this,void 0,void 0,function*(){if(S.backgroundReplacement.backgroundImageURL&&S.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement can not have both an image URL and default color");if(!S.backgroundReplacement.backgroundImageURL&&!S.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement image URL and default can not both be null/undefined");try{S.backgroundReplacement.backgroundImageURL&&(yield this.canvasOpsManager.loadImage(S.backgroundReplacement.backgroundImageURL))}catch(_){throw this.logger.error(_.toString()),new Error("Invalid VideoFx configuration: backgroundImageURL failed to load")}const b=S.backgroundReplacement.defaultColor;if(b&&b!=="black"&&b!=="#000000"&&b!=="#000"){if(b.includes("#")&&!new RegExp(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/).test(b))throw new Error(`Invalid hexadecimal color code for default replacement background: ${b}`);const C=document.createElement("canvas").getContext("2d"),w=C.fillStyle;if(C.fillStyle=b,C.fillStyle===w)throw new Error(`Invalid color for default replacement background: ${b}`)}})}validateProcessingBudgetPerFrame(S){if(S<h.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET||S>h.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET)throw new Error(`Invalid resource constraint: cycle percentage must be within range of ${h.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET} and ${h.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET}`)}loadAssets(){return u(this,void 0,void 0,function*(){this.logger.info("Loading required assets for the VideoFxProcessor");try{const S=this.getVideoFxAssetParams();yield this.loadEngineWorker(S),yield this.buildEngine(S),yield this.loadFxLib(S),this.renderer=constructRenderer(h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.effectConfig,this.outputCanvas)}catch(S){throw this.logger.error(S.toString()),new Error("Failed to load necessary assets for the VideoFxProcessor")}this.logger.info("Finished loading of essential VideoFxProcessor assets.")})}getVideoFxAssetParams(){const S=e.getDefaultAssetSpec();return{assetGroup:S.assetGroup,revisionID:S.revisionID,sdk:encodeURIComponent(t.default.sdkVersion),ua:encodeURIComponent(t.default.sdkUserAgentLowResolution)}}getPathFromVideoFxAssetParams(S,b){const _=new URL(S);for(const[C,w]of Object.entries(b))if(w!==void 0){const R=encodeURIComponent(C),O=encodeURIComponent(w);_.searchParams.set(R,O)}return _.toString()}loadEngineWorker(S){return u(this,void 0,void 0,function*(){try{const b=this.getPathFromVideoFxAssetParams(h.CDN_BASE_PATH+h.WORKER_PATH,S);this.engineWorker=yield g.loadWorker(b,"VideoFxEngineWorker",{},null),this.logger.info("Successfully loaded the VideoFxProcessor's engine worker"),this.engineWorker.addEventListener("message",_=>this.engineWorkerReceiver(_))}catch(b){throw this.logger.error(b.toString()),new Error("Failed to load the VideoFxProcessor's engine worker")}})}buildEngine(S){return u(this,void 0,void 0,function*(){this.buildEnginePromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:h.WORKER_MSG.BUILD_ENGINE_REQUEST,payload:{cdnBasePath:h.CDN_BASE_PATH,sdkVersioningParams:S}});try{yield this.buildEnginePromise.getPromise()}catch(b){throw this.logger.error(b.toString()),new Error("Failed to instantiate the VideoFxEngine")}})}loadFxLib(S){return u(this,void 0,void 0,function*(){const b=this.getPathFromVideoFxAssetParams(h.CDN_BASE_PATH+h.FXLIB_PATH,S),_={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"};try{const C=yield v.fetchWithBehavior(b,_,{});if(!C.ok)throw new Error("Fetch failed.");const w=window.URL.createObjectURL(yield C.blob());yield new Promise((R,O)=>{this.fxLibScript=document.createElement("script"),this.fxLibScript.setAttribute("src",w),this.fxLibScript.setAttribute("type","module"),this.fxLibScript.setAttribute("async","false"),this.fxLibScript.addEventListener("load",R),this.fxLibScript.addEventListener("error",O),document.body.appendChild(this.fxLibScript)})}catch(C){throw this.logger.error(C.toString()),new Error("Failed to load the fxlib")}})}getEffectConfig(){return this.cloneConfigFrom(this.effectConfig)}engineWorkerReceiver(S){const b=S.data;switch(b.msg){case h.WORKER_MSG.BUILD_ENGINE_RESPONSE:this.settleEngineBuildPromise(b.payload);break;case h.WORKER_MSG.PERFORM_SEGMENTATION_RESPONSE:this.settleSegmentationPromise(b.payload.output);break;case h.WORKER_MSG.PERFORM_SEGMENTATION_SAB_RESPONSE:this.settleSegmentationPromiseSAB();break;case h.WORKER_MSG.DESTROY_ASSETS_RESPONSE:this.destroyedAssetsPromise.resolvePromise();break;default:this.logger.info(`VideoFx worker received unknown event msg: ${JSON.stringify(b)}`);break}}settleEngineBuildPromise(S){S!==h.SEGMENTATION_MODEL.LOAD_SUCCESS?this.buildEnginePromise.rejectPromise(new Error("Failed to build VideoFxProcessor's engine")):(this.logger.info("Successfully built the VideoFxEngine"),this.buildEnginePromise.resolvePromise())}settleSegmentationPromise(S){S?this.segmentationRequestPromise.resolveAndReplacePromise(S):this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation on the input image"))}settleSegmentationPromiseSAB(){try{const S=new ImageData(new Uint8ClampedArray(this.sharedImageData),h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS);this.segmentationRequestPromise.resolveAndReplacePromise(S)}catch{this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation with a shared array buffer on the input image"))}}setToNoOpProcess(){this.process=this.noOpProcess}static isSupported(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new i.default,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return u(this,void 0,void 0,function*(){let _=!0;const C=n((O,D)=>{O&&(S.info(D),_=!1)},"checkEnv");C(typeof globalThis>"u","Browser does not have globalThis."),C(!s.supportsWorker(globalThis,S),"Browser does not support web workers."),C(!s.supportsWASM(globalThis,S),"Browser does not support wasm."),C(!document.createElement("canvas").getContext("webgl2"),"Browser does not support webgl.");const w=new a.default;C(!w.isVideoFxSupportedBrowser(),"Browser is unsupported for VideoFxProcessor");const R=n(()=>u(this,void 0,void 0,function*(){if(b)try{const O=new mu(S);yield O.loadAssets(),yield O.destroy()}catch{return S.info("Browser environment is unable to access the required external assets."),Promise.resolve(!1)}return Promise.resolve(!0)}),"checkProcessor");return Promise.resolve(_?yield R():!1)})}static create(S,b){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME;return u(this,void 0,void 0,function*(){const C=new mu(S,_);try{return yield C.loadAssets(),yield C.setEffectConfig(b),C}catch(w){throw S.error(w.toString()),C.setToNoOpProcess(),new Error("VideoFxProcessor built with support for only NoOp processing")}})}setEventController(S){this.eventController?this.eventController=S:(this.eventController=S,this.publishVideoFxConfigEvent())}publishVideoFxConfigEvent(){const S={backgroundBlurEnabled:this.effectConfig.backgroundBlur.isEnabled.toString(),backgroundBlurStrength:this.effectConfig.backgroundBlur.strength,backgroundReplacementEnabled:this.effectConfig.backgroundReplacement.isEnabled.toString(),backgroundFilterVersion:2};this.eventController.publishEvent("backgroundFilterConfigSelected",S)}sameVideoFxConfig(S,b){return S.backgroundBlur.isEnabled===b.backgroundBlur.isEnabled&&S.backgroundBlur.strength===b.backgroundBlur.strength&&S.backgroundReplacement.backgroundImageURL===b.backgroundReplacement.backgroundImageURL&&S.backgroundReplacement.defaultColor===b.backgroundReplacement.defaultColor&&S.backgroundReplacement.isEnabled===b.backgroundReplacement.isEnabled}constructor(S,b=h.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME,_){this.logger=S,this.outputCanvas=document.createElement("canvas"),this.canvasVideoFrameBuffer=new r.default(this.outputCanvas);try{this.validateProcessingBudgetPerFrame(b)}catch(C){throw this.logger.error(C),new Error(`Cannot instantiate VideoFxProcessor due to invalid processingBudgetPerFrame of ${b}`)}_&&(this.eventController=_),this.effectConfig={backgroundBlur:{isEnabled:!1,strength:"low"},backgroundReplacement:{isEnabled:!1,backgroundImageURL:null,defaultColor:"black"}},this.segmentationRequestPromise=new o.DeferredPromise,this.segmentationRateManager=new p.VideoFxSegmentationRateManager(this.logger,b),this.streamParameters={framerate:h.DEFAULT_STREAM_PARAMETERS.FRAMES_PER_SECOND,width:h.DEFAULT_STREAM_PARAMETERS.WIDTH_IN_PIXEL,height:h.DEFAULT_STREAM_PARAMETERS.HEIGHT_IN_PIXEL,channels:h.DEFAULT_STREAM_PARAMETERS.CHANNEL_COUNT},mu.isSharedArrayBufferSupported&&(this.sharedImageBuffer=new SharedArrayBuffer(h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS*h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS*this.streamParameters.channels),this.sharedImageData=new Uint8ClampedArray(this.sharedImageBuffer)),this.logger.info(`VideoFx supports Shared Array Buffer: ${mu.isSharedArrayBufferSupported}`),this.canvasOpsManager=new f.VideoFxCanvasOpsManager(this.streamParameters,this.outputCanvas),this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.segmentationMask=new ImageData(this.streamParameters.width,this.streamParameters.height),this.logger.info(`VideoFxProcessor instantiated with a processingBudgetPerFrame of ${b}`)}},"VideoFxProcessor");l.default=d,d.isSharedArrayBufferSupported=typeof SharedArrayBuffer<"u"},6322494344:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxSegmentationRateManager=void 0;const u=c(2014740298);let m=n(class{submitFrame(){this.frameCountOverSamplingPeriod++}shouldApplySegmentation(){return this.frameCountOverSamplingPeriod%this.framesPerSegmentation===0}startSegmentation(){this.frameSegmentationStartTime=performance.now()}completeSegmentation(){this.totalSegmentationDurationOverSamplingPeriod+=performance.now()-this.frameSegmentationStartTime,this.frameCountOverSamplingPeriod>=u.RESOURCE_CONSTRAINTS.SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT&&this.adjustFramesPerSegmentation(this.totalSegmentationDurationOverSamplingPeriod/(performance.now()-this.samplingPeriodStartTime))}adjustFramesPerSegmentation(g){g>this.targetSegmentationCyclePercentage?(this.framesPerSegmentation++,this.logger.info(`Segmentation cycle percentage above the configured maximal value. Decreasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)):this.framesPerSegmentation>1&&g<this.targetSegmentationCyclePercentage&&(this.framesPerSegmentation--,this.logger.info(`Segmentation cycle percentage below the configured maximal value. Increasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)),this.totalSegmentationDurationOverSamplingPeriod=0,this.frameCountOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now()}constructor(g,s){this.logger=g,this.targetSegmentationCyclePercentage=s/100,this.frameCountOverSamplingPeriod=0,this.totalSegmentationDurationOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now(),this.framesPerSegmentation=u.RESOURCE_CONSTRAINTS.SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION}},"VideoFxSegmentationRateManager");l.VideoFxSegmentationRateManager=m},8050111605:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"VideoSource");l.default=c},1865309432:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class Mg{add(m){this.ids.add(m)}array(){return Array.from(this.ids.values()).sort((v,g)=>v-g)}contain(m){return this.ids.has(m)}forEach(m){this.ids.forEach(m)}empty(){return this.ids.size===0}size(){return this.ids.size}equal(m){if(!m)return this.ids.size===0;const v=this.array(),g=m.array();if(v.length!==g.length)return!1;for(let s=0;s<v.length;s++)if(v[s]!==g[s])return!1;return!0}clone(){return new Mg(this.array())}remove(m){this.ids.delete(m)}toJSON(){return this.array()}truncate(m){const v=this.array();return new Mg(v.splice(0,m))}constructor(m){this.ids=new Set(m)}},"DefaultVideoStreamIdSet");l.default=c},2469210420:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=c(4136617125),v=u(c(1865309432)),g=u(c(6105894327));let s=n(class{localStreamDescriptions(){return[this.videoStreamDescription.clone()]}convertBpsToKbps(i){return i>0&&i<1e3?1:Math.trunc(i/1e3)}remoteStreamDescriptions(){if(!this.currentIndex||!this.currentIndex.sources)return[];const i=[];return this.currentIndex.sources.forEach(e=>{const t=new g.default;t.attendeeId=e.attendeeId,t.groupId=e.groupId,t.streamId=e.streamId,t.maxBitrateKbps=e.maxBitrateKbps,t.avgBitrateKbps=this.convertBpsToKbps(e.avgBitrateBps),t.width=e.width,t.height=e.height,t.maxFrameRate=e.framerate,i.push(t)}),i}integrateUplinkPolicyDecision(i){if(i&&i.length){const e=i[0];this.videoStreamDescription.maxBitrateKbps=e.maxBitrate/1e3,this.videoStreamDescription.maxFrameRate=e.maxFramerate}}integrateIndexFrame(i){if(this.currentIndex=i,!i)return;const e=new Map;let t=!1;for(const r of i.sources){if(!e.has(r.attendeeId)){e.set(r.attendeeId,r.groupId);continue}const o=e.get(r.attendeeId);o<r.groupId&&(this.logger.warn(`Old group ID ${o} found for attendee ID ${r.attendeeId}, replacing with newer group ID ${r.groupId}`),e.set(r.attendeeId,r.groupId)),t=!0}t&&(this.currentIndex.sources=this.currentIndex.sources.filter(r=>e.get(r.attendeeId)===r.groupId)),this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null}subscribeFrameSent(){this.indexForSubscribe=this.currentIndex}remoteVideoUpdateSent(){this.indexForLastRemoteVideoUpdate=this.currentIndex}integrateSubscribeAckFrame(i){this.currentSubscribeAck=i,this.subscribeTrackToStreamMap=this.buildTrackToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToStreamMap=this.buildSSRCToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToGroupMap=this.buildSSRCToGroupMap(this.currentSubscribeAck),this.subscribeStreamToAttendeeMap=this.buildStreamToAttendeeMap(this.indexForSubscribe),this.subscribeStreamToExternalUserIdMap=this.buildStreamExternalUserIdMap(this.indexForSubscribe),this.sendVideoStreamId=0,i.allocations&&i.allocations!==void 0&&i.allocations.length>0&&(this.sendVideoStreamId=i.allocations[0].streamId)}integrateBitratesFrame(i){if(this.currentIndex)for(const e of i.bitrates){const t=this.currentIndex.sources.find(r=>r.streamId===e.sourceStreamId);t!==void 0&&(t.avgBitrateBps=e.avgBitrateBps)}}allStreams(){const i=new v.default;if(this.currentIndex)for(const e of this.currentIndex.sources)i.add(e.streamId);return i}allVideoSendingSourcesExcludingSelf(i){const e=[],t=new Set;if(this.currentIndex&&this.currentIndex.sources&&this.currentIndex.sources.length)for(const r of this.currentIndex.sources){const{attendeeId:o,externalUserId:f,mediaType:h}=r;o!==i&&h===m.SdkStreamMediaType.VIDEO&&(t.has(o)||(e.push({attendee:{attendeeId:o,externalUserId:f}}),t.add(o)))}return e}streamSelectionUnderBandwidthConstraint(i,e,t,r){const o=new Set;if(this.currentIndex)for(const y of this.currentIndex.sources)y.attendeeId===i||y.mediaType!==m.SdkStreamMediaType.VIDEO||!e.has(y.attendeeId)&&!t.has(y.attendeeId)&&o.add(y.attendeeId);const f=this.buildAttendeeToSortedStreamDescriptorMapExcludingSelf(i),h=new Map;let p=0;f.forEach((y,S)=>{h.set(S,y[0]),p+=y[0].maxBitrateKbps}),p=this.trySelectHighBitrateForAttendees(f,e,p,r,h),this.trySelectHighBitrateForAttendees(f,o,p,r,h);const d=new v.default;for(const y of h.values())d.add(y.streamId);return d}highestQualityStreamFromEachGroupExcludingSelf(i){const e=new v.default;if(this.currentIndex){const t=new Map;for(const r of this.currentIndex.sources)r.attendeeId===i||r.mediaType!==m.SdkStreamMediaType.VIDEO||(!t.has(r.groupId)||r.maxBitrateKbps>t.get(r.groupId).maxBitrateKbps)&&t.set(r.groupId,r);for(const r of t.values())e.add(r.streamId)}return e}numberOfVideoPublishingParticipantsExcludingSelf(i){return this.highestQualityStreamFromEachGroupExcludingSelf(i).array().length}numberOfParticipants(){return this.currentIndex.numParticipants?this.currentIndex.numParticipants:-1}attendeeIdForTrack(i){const e=this.streamIdForTrack(i);if(e===void 0||!this.subscribeStreamToAttendeeMap)return this.logger.warn(`no attendee found for track ${i}`),"";const t=this.subscribeStreamToAttendeeMap.get(e);return t||(this.logger.info(`track ${i} (stream ${e}) does not correspond to a known attendee`),"")}externalUserIdForTrack(i){const e=this.streamIdForTrack(i);if(e===void 0||!this.subscribeStreamToExternalUserIdMap)return this.logger.warn(`no external user id found for track ${i}`),"";const t=this.subscribeStreamToExternalUserIdMap.get(e);return t||(this.logger.info(`track ${i} (stream ${e}) does not correspond to a known externalUserId`),"")}attendeeIdForStreamId(i){if(!this.streamToAttendeeMap)if(this.currentIndex)this.streamToAttendeeMap=this.buildStreamToAttendeeMap(this.currentIndex);else return"";const e=this.streamToAttendeeMap.get(i);return e||(this.logger.info(`stream ID ${i} does not correspond to a known attendee`),"")}attendeeIdForGroupId(i){if(!this.groupIdToAttendeeMap)if(this.currentIndex)this.groupIdToAttendeeMap=this.buildGroupIdToAttendeeMap(this.currentIndex);else return"";const e=this.groupIdToAttendeeMap.get(i);return e||(this.logger.info(`group ID ${i} does not correspond to a known attendee`),"")}groupIdForStreamId(i){if(!(!this.currentIndex||!this.currentIndex.sources)){for(const e of this.currentIndex.sources)if(e.streamId===i)return e.groupId;if(this.indexForSubscribe){for(const e of this.indexForSubscribe.sources)if(e.streamId===i)return e.groupId}if(this.indexForLastRemoteVideoUpdate){for(const e of this.indexForLastRemoteVideoUpdate.sources)if(e.streamId===i)return e.groupId}}}StreamIdsInSameGroup(i,e){return this.groupIdForStreamId(i)===this.groupIdForStreamId(e)}streamIdForTrack(i){if(this.subscribeTrackToStreamMap)return this.subscribeTrackToStreamMap.get(i)}streamIdForSSRC(i){if(this.subscribeSsrcToStreamMap)return this.subscribeSsrcToStreamMap.get(i)}overrideStreamIdMappings(i,e){if(this.subscribeTrackToStreamMap){for(const[t,r]of this.subscribeTrackToStreamMap.entries())if(i===r){this.subscribeTrackToStreamMap.set(t,e);break}}if(this.subscribeSsrcToStreamMap){for(const[t,r]of this.subscribeSsrcToStreamMap.entries())if(i===r){this.subscribeSsrcToStreamMap.set(t,e);break}}}groupIdForSSRC(i){if(this.subscribeSsrcToGroupMap)return this.subscribeSsrcToGroupMap.get(i)}streamsPausedAtSource(){const i=new v.default;if(this.currentIndex)for(const e of this.currentIndex.pausedAtSourceIds)i.add(e);return i}sendVideoStreamIdFromRid(i){return this.sendVideoStreamId}buildTrackToStreamMap(i){const e=new Map;this.logger.debug(()=>`trackMap ${JSON.stringify(i.tracks)}`);for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.trackLabel,t.streamId);return e}buildSSRCToStreamMap(i){const e=new Map;this.logger.debug(()=>`ssrcMap ${JSON.stringify(i.tracks)}`);for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,t.streamId);return e}buildSSRCToGroupMap(i){const e=new Map;for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,this.groupIdForStreamId(t.streamId));return e}buildStreamToAttendeeMap(i){const e=new Map;if(i)for(const t of i.sources)e.set(t.streamId,t.attendeeId);return e}buildGroupIdToAttendeeMap(i){const e=new Map;for(const t of i.sources)e.set(t.groupId,t.attendeeId);return e}buildStreamExternalUserIdMap(i){const e=new Map;if(i)for(const t of i.sources)t.externalUserId&&e.set(t.streamId,t.externalUserId);return e}trySelectHighBitrateForAttendees(i,e,t,r,o){for(const f of e){if(t>=r)break;if(i.has(f)){const h=i.get(f);for(const p of h.reverse())if(t-o.get(f).maxBitrateKbps+p.maxBitrateKbps<r){t=t-o.get(f).maxBitrateKbps+p.maxBitrateKbps,o.set(f,p);break}}}return t}buildAttendeeToSortedStreamDescriptorMapExcludingSelf(i){const e=new Map;if(this.currentIndex)for(const t of this.currentIndex.sources)t.attendeeId===i||t.mediaType!==m.SdkStreamMediaType.VIDEO||(e.has(t.attendeeId)?e.get(t.attendeeId).push(t):e.set(t.attendeeId,[t]));return e.forEach((t,r)=>{t.sort((o,f)=>o.maxBitrateKbps>f.maxBitrateKbps?1:o.maxBitrateKbps<f.maxBitrateKbps?-1:0)}),e}constructor(i){this.logger=i,this.currentIndex=null,this.indexForSubscribe=null,this.indexForLastRemoteVideoUpdate=null,this.currentSubscribeAck=null,this.subscribeTrackToStreamMap=null,this.subscribeStreamToAttendeeMap=null,this.subscribeStreamToExternalUserIdMap=null,this.subscribeSsrcToStreamMap=null,this.subscribeSsrcToGroupMap=null,this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null,this.videoStreamDescription=new g.default,this.sendVideoStreamId=0,this.videoStreamDescription.trackLabel="AmazonChimeExpressVideo",this.videoStreamDescription.streamId=2,this.videoStreamDescription.groupId=2}},"DefaultVideoStreamIndex");l.default=s},8697249276:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=c(4136617125),v=u(c(2469210420)),g=u(c(6105894327));let s=n(class gu extends v.default{localStreamDescriptions(){const i=[];return this._localStreamInfos.forEach(e=>{i.push(e.clone())}),i}integrateUplinkPolicyDecision(i){let e=!0,t=0;for(let r=0;r<i.length;r++){const o=i[r].maxBitrate/1e3,f=i[r].maxFramerate;if(!e||r===this._localStreamInfos.length){e=!1;const h=new g.default;h.maxBitrateKbps=o,h.maxFrameRate=f,h.disabledByUplinkPolicy=o===0,h.rid=i[r].rid,o!==0&&(h.timeEnabled=Date.now()),this._localStreamInfos.push(h),t++;continue}this._localStreamInfos[t].maxBitrateKbps===0&&o>0&&(this._localStreamInfos[t].timeEnabled=Date.now()),this._localStreamInfos[t].maxBitrateKbps=o,this._localStreamInfos[t].maxFrameRate=f,this._localStreamInfos[t].disabledByUplinkPolicy=o===0,t++}e&&this._localStreamInfos.splice(t)}integrateBitratesFrame(i){super.integrateBitratesFrame(i);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const r of i.bitrates)e.add(r.sourceStreamId),this.streamIdToBitrateKbpsMap.set(r.sourceStreamId,this.convertBpsToKbps(r.avgBitrateBps));for(const r of t)e.has(r)||(this.streamIdToBitrateKbpsMap.get(r)===gu.UNSEEN_STREAM_BITRATE?this.streamIdToBitrateKbpsMap.set(r,gu.RECENTLY_INACTIVE_STREAM_BITRATE):this.streamIdToBitrateKbpsMap.set(r,gu.NOT_SENDING_STREAM_BITRATE));this.logLocalStreamDescriptions()}logLocalStreamDescriptions(){let i="";for(const e of this._localStreamInfos)i+=`streamId=${e.streamId} maxBitrate=${e.maxBitrateKbps} disabledByUplink=${e.disabledByUplinkPolicy}
`;this.logger.debug(()=>i)}integrateIndexFrame(i){super.integrateIndexFrame(i);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const r of this.currentIndex.sources)r.mediaType===m.SdkStreamMediaType.VIDEO&&(e.add(r.streamId),this.streamIdToBitrateKbpsMap.has(r.streamId)||this.streamIdToBitrateKbpsMap.set(r.streamId,gu.UNSEEN_STREAM_BITRATE));for(const r of t)e.has(r)||this.streamIdToBitrateKbpsMap.delete(r)}integrateSubscribeAckFrame(i){if(super.integrateSubscribeAckFrame(i),!i.allocations||i.allocations===void 0)return;let e=0;this._sendRidToVideoStreamIdMap.clear();for(const t of i.allocations){if(this._localStreamInfos.length<e+1){this.logger.info("simulcast: allocation has more than number of local streams");break}this._localStreamInfos[e].groupId=t.groupId,this._localStreamInfos[e].streamId=t.streamId,this.streamIdToBitrateKbpsMap.has(t.streamId)||this.streamIdToBitrateKbpsMap.set(t.streamId,gu.UNSEEN_STREAM_BITRATE),this._sendRidToVideoStreamIdMap.set(this._localStreamInfos[e].rid,t.streamId),e++}}sendVideoStreamIdFromRid(i){let e=0;return this._sendRidToVideoStreamIdMap.has(i)&&(e=this._sendRidToVideoStreamIdMap.get(i)),e}constructor(){super(...arguments),this.streamIdToBitrateKbpsMap=new Map,this._localStreamInfos=[],this._sendRidToVideoStreamIdMap=new Map}},"SimulcastVideoStreamIndex");l.default=s,s.UNSEEN_STREAM_BITRATE=-2,s.RECENTLY_INACTIVE_STREAM_BITRATE=-1,s.NOT_SENDING_STREAM_BITRATE=0,s.BitratesMsgFrequencyMs=4e3},6105894327:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=c(4136617125);let m=n(class Av{clone(){const g=new Av;return g.attendeeId=this.attendeeId,g.groupId=this.groupId,g.streamId=this.streamId,g.ssrc=this.ssrc,g.trackLabel=this.trackLabel,g.maxBitrateKbps=this.maxBitrateKbps,g.avgBitrateKbps=this.avgBitrateKbps,g.maxFrameRate=this.maxFrameRate,g.timeEnabled=this.timeEnabled,g.disabledByUplinkPolicy=this.disabledByUplinkPolicy,g.width=this.width,g.height=this.height,g}toStreamDescriptor(){const g=u.SdkStreamDescriptor.create();return g.mediaType=u.SdkStreamMediaType.VIDEO,g.trackLabel=this.trackLabel,g.attendeeId=this.attendeeId,g.streamId=this.streamId,g.groupId=this.groupId,g.framerate=this.maxFrameRate,g.maxBitrateKbps=this.disabledByUplinkPolicy?0:this.maxBitrateKbps,g.avgBitrateBps=this.avgBitrateKbps,g}totalPixels(){return this.width*this.height}constructor(g,s,a,i,e){this.attendeeId="",this.groupId=0,this.streamId=0,this.ssrc=0,this.trackLabel="",this.maxBitrateKbps=0,this.avgBitrateKbps=0,this.maxFrameRate=0,this.width=0,this.height=0,this.timeEnabled=0,this.disabledByWebRTC=!1,this.disabledByUplinkPolicy=!1,this.rid="",this.attendeeId=g,this.groupId=s,this.streamId=a,this.maxBitrateKbps=i,this.avgBitrateKbps=e}},"VideoStreamDescription");l.default=m},8089299542:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(5546774952)),v=u(c(8006173476)),g=u(c(6345807038));let s=n(class Xl{static connectVideoStreamToVideoElement(i,e,t){const r=t&&i.getVideoTracks()[0].getSettings().facingMode!=="environment"?"rotateY(180deg)":"";if(Xl.setVideoElementFlag(e,"disablePictureInPicture",t),Xl.setVideoElementFlag(e,"disableRemotePlayback",t),e.style.transform!==r&&(e.style.transform=r),e.hasAttribute("controls")&&e.removeAttribute("controls"),e.hasAttribute("autoplay")||e.setAttribute("autoplay","true"),e.hasAttribute("playsinline")||e.setAttribute("playsinline","true"),e.hasAttribute("muted")||(e.setAttribute("muted","true"),e.muted=!0),e.srcObject!==i&&(e.srcObject=i,new m.default().requiresVideoPlayWorkaround()&&e.paused)){const o=e.play();o!==void 0&&o.catch(f=>{console.warn("Error playing video in Safari",f)}).then(()=>{console.debug("Video played successfully in Safari")})}}static disconnectVideoStreamFromVideoElement(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(i)if(e)t||(i.srcObject=null,i.style.transform="");else{if(!i.srcObject)return;i.pause(),i.style.transform="",Xl.setVideoElementFlag(i,"disablePictureInPicture",!1),Xl.setVideoElementFlag(i,"disableRemotePlayback",!1),i.srcObject=null}}destroy(){this.devicePixelRatioMonitor.removeObserver(this),this.tileState.boundVideoElement&&this.tileState.boundVideoElement.srcObject===this.tileState.boundVideoStream&&Xl.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,!1),this.tileState=new g.default}devicePixelRatioChanged(i){this.tileState.devicePixelRatio=i,this.sendTileStateUpdate()}id(){return this.tileState.tileId}state(){return this.tileState.clone()}stateRef(){return this.tileState}bindVideoStream(i,e,t,r,o,f,h,p){let d=!1;this.tileState.boundAttendeeId!==i&&(this.tileState.boundAttendeeId=i,new v.default(i).hasModality(v.default.MODALITY_CONTENT)&&(this.tileState.isContent=!0),d=!0),this.tileState.boundExternalUserId!==h&&(this.tileState.boundExternalUserId=h,d=!0),this.tileState.localTile!==e&&(this.tileState.localTile=e,d=!0),this.tileState.boundVideoStream!==t&&(this.tileState.boundVideoStream=t,d=!0),this.tileState.videoStreamContentWidth!==r&&(this.tileState.videoStreamContentWidth=r,d=!0),this.tileState.videoStreamContentHeight!==o&&(this.tileState.videoStreamContentHeight=o,d=!0),this.tileState.streamId!==f&&(this.tileState.streamId=f,d=!0),this.tileState.groupId!==p&&(this.tileState.groupId=p,d=!0),d&&this.sendTileStateUpdate()}bindVideoElement(i){let e=!1;this.tileState.boundVideoElement!==i&&(this.tileState.boundVideoElement=i,e=!0),this.tileState.boundVideoElement!==null?(this.tileState.videoElementCSSWidthPixels!==i.clientWidth&&(this.tileState.videoElementCSSWidthPixels=i.clientWidth,e=!0),this.tileState.videoElementCSSHeightPixels!==i.clientHeight&&(this.tileState.videoElementCSSHeightPixels=i.clientHeight,e=!0)):(this.tileState.videoElementCSSWidthPixels=null,this.tileState.videoElementCSSHeightPixels=null),e&&this.sendTileStateUpdate()}pause(){this.tileState.paused||(this.tileState.paused=!0,this.sendTileStateUpdate())}unpause(){this.tileState.paused&&(this.tileState.paused=!1,this.sendTileStateUpdate())}markPoorConnection(){return this.tileState.poorConnection?!1:(this.tileState.poorConnection=!0,this.sendTileStateUpdate(),!0)}unmarkPoorConnection(){return this.tileState.poorConnection?(this.tileState.poorConnection=!1,this.sendTileStateUpdate(),!0):!1}capture(){if(!this.tileState.active)return null;const i=document.createElement("canvas"),e=this.tileState.boundVideoElement;i.width=e.videoWidth||e.width,i.height=e.videoHeight||e.height;const t=i.getContext("2d");return t.drawImage(e,0,0,i.width,i.height),t.getImageData(0,0,i.width,i.height)}setStreamId(i){this.tileState.streamId=i,this.tileController.sendTileStateUpdate(this.state())}sendTileStateUpdate(){this.updateActiveState(),this.updateVideoStreamOnVideoElement(),this.updateVideoElementPhysicalPixels(),this.tileController.sendTileStateUpdate(this.state())}updateActiveState(){this.tileState.active=!!(!this.tileState.paused&&!this.tileState.poorConnection&&this.tileState.boundAttendeeId&&this.tileState.boundVideoElement&&this.tileState.boundVideoStream)}updateVideoElementPhysicalPixels(){typeof this.tileState.videoElementCSSWidthPixels=="number"&&typeof this.tileState.videoElementCSSHeightPixels=="number"?(this.tileState.videoElementPhysicalWidthPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSWidthPixels,this.tileState.videoElementPhysicalHeightPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSHeightPixels):(this.tileState.videoElementPhysicalWidthPixels=null,this.tileState.videoElementPhysicalHeightPixels=null)}updateVideoStreamOnVideoElement(){this.tileState.active?Xl.connectVideoStreamToVideoElement(this.tileState.boundVideoStream,this.tileState.boundVideoElement,this.tileState.localTile):Xl.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,this.tileState.paused,this.tileController.keepLastFrameWhenPaused)}static setVideoElementFlag(i,e,t){e in i&&(i[e]=t)}constructor(i,e,t,r){this.tileController=t,this.devicePixelRatioMonitor=r,this.tileState=new g.default,this.tileState.tileId=i,this.tileState.localTile=e,this.devicePixelRatioMonitor.registerObserver(this)}},"DefaultVideoTile");l.default=s},6345807038:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class Dv{clone(){const m=new Dv;return m.tileId=this.tileId,m.localTile=this.localTile,m.isContent=this.isContent,m.active=this.active,m.paused=this.paused,m.poorConnection=this.poorConnection,m.boundAttendeeId=this.boundAttendeeId,m.boundExternalUserId=this.boundExternalUserId,m.boundVideoStream=this.boundVideoStream,m.boundVideoElement=this.boundVideoElement,m.nameplate=this.nameplate,m.videoStreamContentWidth=this.videoStreamContentWidth,m.videoStreamContentHeight=this.videoStreamContentHeight,m.videoElementCSSWidthPixels=this.videoElementCSSWidthPixels,m.videoElementCSSHeightPixels=this.videoElementCSSHeightPixels,m.devicePixelRatio=this.devicePixelRatio,m.videoElementPhysicalWidthPixels=this.videoElementPhysicalWidthPixels,m.videoElementPhysicalHeightPixels=this.videoElementPhysicalHeightPixels,m.streamId=this.streamId,m.groupId=this.groupId,m}constructor(){this.tileId=null,this.localTile=!1,this.localTileStarted=!1,this.isContent=!1,this.active=!1,this.paused=!1,this.poorConnection=!1,this.boundAttendeeId=null,this.boundExternalUserId=null,this.boundVideoStream=null,this.boundVideoElement=null,this.nameplate=null,this.videoStreamContentWidth=null,this.videoStreamContentHeight=null,this.videoElementCSSWidthPixels=null,this.videoElementCSSHeightPixels=null,this.devicePixelRatio=0,this.videoElementPhysicalWidthPixels=null,this.videoElementPhysicalHeightPixels=null,this.streamId=null,this.groupId=null}},"VideoTileState");l.default=c},4675986794:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(t,r,o,f){function h(p){return p instanceof o?p:new o(function(d){d(p)})}return n(h,"adopt"),new(o||(o=Promise))(function(p,d){function y(_){try{b(f.next(_))}catch(C){d(C)}}n(y,"fulfilled");function S(_){try{b(f.throw(_))}catch(C){d(C)}}n(S,"rejected");function b(_){_.done?p(_.value):h(_.value).then(y,S)}n(b,"step"),b((f=f.apply(t,r||[])).next())})},m=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(1197017824)),g=m(c(5163444346)),s=m(c(3563909523)),a=c(6527539809),i=m(c(8089299542));let e=n(class{createDevicePixelRatioMonitorIfNeeded(){this.devicePixelRatioMonitor||(this.devicePixelRatioMonitor=new g.default(new s.default,this.logger))}discardDevicePixelRatioMonitorIfNotNeeded(){return u(this,void 0,void 0,function*(){if(this.tileMap.size||!this.devicePixelRatioMonitor)return;const r=this.devicePixelRatioMonitor;return this.devicePixelRatioMonitor=void 0,r.destroy()})}bindVideoElement(r,o){const f=this.getVideoTile(r);if(f===null){this.logger.warn(`Ignoring video element binding for unknown tile id ${r}`);return}f.bindVideoElement(o)}unbindVideoElement(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const f=this.getVideoTile(r);if(f===null){this.logger.warn(`Ignoring video element unbinding for unknown tile id ${r}`);return}this.logger.info("Unbinding the video element");const h=f.stateRef().boundVideoElement;f.bindVideoElement(null),o&&(this.logger.info("Cleaning up the video element"),i.default.disconnectVideoStreamFromVideoElement(h,!1))}startLocalVideoTile(){if(this.audioVideoController.configuration.meetingFeatures.videoMaxResolution===v.default.VideoDisabled)return this.logger.warn("Could not start camera video because max video resolution was set to None"),-1;const r=this.findOrCreateLocalVideoTile();return this.currentLocalTile.stateRef().localTileStarted=!0,this.audioVideoController.update({needsRenegotiation:!0}),r.id()}stopLocalVideoTile(){this.currentLocalTile&&(this.currentLocalTile.stateRef().localTileStarted=!1,this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.audioVideoController.update({needsRenegotiation:!0}))}hasStartedLocalVideoTile(){return!!(this.currentLocalTile&&this.currentLocalTile.stateRef().localTileStarted)}removeLocalVideoTile(){this.currentLocalTile&&this.removeVideoTile(this.currentLocalTile.id())}getLocalVideoTile(){return this.currentLocalTile}pauseVideoTile(r){const o=this.getVideoTile(r);o&&(this.currentPausedTilesByIds.has(r)||(this.audioVideoController.pauseReceivingStream(o.stateRef().streamId),this.currentPausedTilesByIds.add(r)),o.pause())}unpauseVideoTile(r){const o=this.getVideoTile(r);o&&(this.currentPausedTilesByIds.has(r)&&(this.audioVideoController.resumeReceivingStream(o.stateRef().streamId),this.currentPausedTilesByIds.delete(r)),o.unpause())}getVideoTile(r){return this.tileMap.has(r)?this.tileMap.get(r):null}getVideoTileArea(r){const o=r.state();let f=0,h=0;return o.boundVideoElement&&(f=o.boundVideoElement.clientHeight*o.devicePixelRatio,h=o.boundVideoElement.clientWidth*o.devicePixelRatio),f*h}getAllRemoteVideoTiles(){const r=new Array;return this.tileMap.forEach((o,f)=>{(!this.currentLocalTile||f!==this.currentLocalTile.id())&&r.push(o)}),r}getAllVideoTiles(){return Array.from(this.tileMap.values())}addVideoTile(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const o=this.nextTileId;this.nextTileId+=1,this.createDevicePixelRatioMonitorIfNeeded();const f=this.tileFactory.makeTile(o,r,this,this.devicePixelRatioMonitor);return this.tileMap.set(o,f),f}removeVideoTile(r){if(!this.tileMap.has(r))return;const o=this.tileMap.get(r);this.currentLocalTile===o&&(this.currentLocalTile=null),o.destroy(),this.tileMap.delete(r),this.audioVideoController.forEachObserver(f=>{a.Maybe.of(f.videoTileWasRemoved).map(h=>h.bind(f)(r))}),this.discardDevicePixelRatioMonitorIfNotNeeded()}removeVideoTilesByAttendeeId(r){const o=[];for(const f of this.getAllVideoTiles()){const h=f.state();h.boundAttendeeId===r&&(this.removeVideoTile(h.tileId),o.push(h.tileId))}return o}removeAllVideoTiles(){const r=Array.from(this.tileMap.keys());for(const o of r)this.removeVideoTile(o)}sendTileStateUpdate(r){this.audioVideoController.forEachObserver(o=>{a.Maybe.of(o.videoTileDidUpdate).map(f=>f.bind(o)(r))})}haveVideoTilesWithStreams(){for(const r of this.getAllVideoTiles())if(r.state().boundVideoStream)return!0;return!1}haveVideoTileForAttendeeId(r){return!!this.getVideoTileForAttendeeId(r)}getVideoTileForAttendeeId(r){for(const o of this.getAllVideoTiles())if(o.state().boundAttendeeId===r)return o}captureVideoTile(r){const o=this.getVideoTile(r);return o?o.capture():null}findOrCreateLocalVideoTile(){return this.currentLocalTile?this.currentLocalTile:(this.currentLocalTile=this.addVideoTile(!0),this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.currentLocalTile)}constructor(r,o,f){this.tileFactory=r,this.audioVideoController=o,this.logger=f,this.tileMap=new Map,this.nextTileId=1,this.currentLocalTile=null,this.currentPausedTilesByIds=new Set,this.keepLastFrameWhenPaused=!1,this.keepLastFrameWhenPaused=o.configuration.keepLastFrameWhenPaused}},"DefaultVideoTileController");l.default=e},1309535200:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(8089299542));let v=n(class{makeTile(s,a,i,e){return new m.default(s,a,i,e)}},"DefaultVideoTileFactory");l.default=v},4207915265:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"BitrateParameters");l.default=c},1604549269:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(9131051489)),v=u(c(372560720)),g=c(6527539809),s=u(c(1695739824)),a=u(c(4207915265));let i=n(class dl{updateConnectionMetric(t){}calculateEncodingParameters(){const t=[new a.default,new a.default,new a.default];this.shouldDisableSimulcast?(this.newActiveStreams=0,t[0].maxBitrateKbps=0,t[1].maxBitrateKbps=this.hiTargetBitrateKbps,t[2].maxBitrateKbps=0):this.numSenders<=4?(this.newActiveStreams=1,t[0].maxBitrateKbps=this.lowTargetBitrateKbps,t[1].maxBitrateKbps=0,t[2].maxBitrateKbps=this.hiTargetBitrateKbps):(this.newActiveStreams=2,t[0].maxBitrateKbps=this.lowTargetBitrateKbps*2/3,t[1].maxBitrateKbps=this.numSenders<=6?this.midTargetBitrateKbps:this.midTargetBitrateKbps*.6,t[2].maxBitrateKbps=0);const r=t.map((o,f,h)=>o.maxBitrateKbps);return this.newQualityMap=this.fillEncodingParamWithBitrates(r),this.encodingParametersEqual()||this.logger.info(`simulcast: policy:calculateEncodingParameters numSources:${this.numSenders} shouldDisableSimulcast:${this.shouldDisableSimulcast} newQualityMap: ${this.getQualityMapString(this.newQualityMap)}`),this.newQualityMap}chooseMediaTrackConstraints(){}chooseEncodingParameters(){return this.currentQualityMap=this.newQualityMap,this.activeStreamsToPublish!==this.newActiveStreams&&(this.activeStreamsToPublish=this.newActiveStreams,this.publishEncodingSimulcastLayer()),this.currentQualityMap}updateIndex(t){const r=t.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+1,o=r!==this.numSenders,f=t.numberOfParticipants(),h=f>=0&&f<=2,p=this.shouldDisableSimulcast!==h;this.numSenders=r,this.shouldDisableSimulcast=h,this.optimalParameters=new s.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1),this.videoIndex=t,(o||p)&&(this.newQualityMap=this.calculateEncodingParameters())}wantsResubscribe(){return!this.encodingParametersEqual()}compareEncodingParameter(t,r){return JSON.stringify(t)===JSON.stringify(r)}encodingParametersEqual(){let t=!1;for(const r of v.default.NAME_ARR_ASCENDING)if(t=t||!this.compareEncodingParameter(this.newQualityMap.get(r),this.currentQualityMap.get(r)),t)break;return!t}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}captureWidth(){return this.enableFhdVideo?1920:1280}captureHeight(){return this.enableFhdVideo?1080:768}captureFrameRate(){return 15}maxBandwidthKbps(){return this.enableFhdVideo?2500:1400}setIdealMaxBandwidthKbps(t){}setHasBandwidthPriority(t){}setHighResolutionFeatureEnabled(t){this.enableFhdVideo=t,this.hiTargetBitrateKbps=t?dl.kHiTargetBitrateKbpsFhd:dl.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=t?dl.kMidTargetBitrateKbpsFhd:dl.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=t?dl.kLowTargetBitrateKbpsFhd:dl.kLowTargetBitrateKbpsHd}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!0}fillEncodingParamWithBitrates(t){const r=new Map,o=1e3,f=v.default.NAME_ARR_ASCENDING,h=t;let p=this.shouldDisableSimulcast?1:4;for(let d=0;d<f.length;d++){const y=f[d];r.set(y,{rid:y,active:h[d]>0,scaleResolutionDownBy:Math.max(p,1),maxBitrate:h[d]*o}),p=p/2}return r}getQualityMapString(t){let r="";return this.videoIndex.localStreamDescriptions().length===3&&t.forEach(f=>{r+=`{ rid: ${f.rid} active:${f.active} maxBitrate:${f.maxBitrate}}`}),r}getEncodingSimulcastLayer(t){switch(t){case 0:return m.default.High;case 1:return m.default.LowAndHigh;case 2:return m.default.LowAndMedium}}publishEncodingSimulcastLayer(){const t=this.getEncodingSimulcastLayer(this.activeStreamsToPublish);this.forEachObserver(r=>{g.Maybe.of(r.encodingSimulcastLayersDidChange).map(o=>o.bind(r)(t))})}addObserver(t){this.logger.info("adding simulcast uplink observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing simulcast uplink observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const r of this.observerQueue)t(r)}constructor(t,r){this.selfAttendeeId=t,this.logger=r,this.numSenders=0,this.shouldDisableSimulcast=!1,this.newQualityMap=new Map,this.currentQualityMap=new Map,this.newActiveStreams=1,this.videoIndex=null,this.observerQueue=new Set,this.hiTargetBitrateKbps=dl.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=dl.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=dl.kLowTargetBitrateKbpsHd,this.enableFhdVideo=!1,this.optimalParameters=new s.default(0,0,0,0,!0),this.parametersInEffect=new s.default(0,0,0,0,!0),this.currentQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps]),this.newQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps])}},"DefaultSimulcastUplinkPolicy");l.default=i,i.kHiTargetBitrateKbpsHd=1200,i.kMidTargetBitrateKbpsHd=600,i.kLowTargetBitrateKbpsHd=300,i.kHiTargetBitrateKbpsFhd=2e3,i.kMidTargetBitrateKbpsFhd=1e3,i.kLowTargetBitrateKbpsFhd=500},4499376852:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(8213452704));let v=n(class{updateConnectionMetric(s){}chooseMediaTrackConstraints(){}chooseEncodingParameters(){var s,a,i,e,t,r,o,f,h,p,d,y;const S=new Map,b=1e3,_=m.default.NAME_ARR_ASCENDING;return S.set(_[0],{rid:_[0],active:!0,scaleResolutionDownBy:((a=(s=this.encodingParams)===null||s===void 0?void 0:s.low)===null||a===void 0?void 0:a.scaleResolutionDownBy)||2,maxBitrate:(((e=(i=this.encodingParams)===null||i===void 0?void 0:i.low)===null||e===void 0?void 0:e.maxBitrateKbps)||this.defaultLowTargetBitrateKbps)*b,maxFramerate:((r=(t=this.encodingParams)===null||t===void 0?void 0:t.low)===null||r===void 0?void 0:r.maxFramerate)||5}),S.set(_[1],{rid:_[1],active:!0,scaleResolutionDownBy:((f=(o=this.encodingParams)===null||o===void 0?void 0:o.high)===null||f===void 0?void 0:f.scaleResolutionDownBy)||1,maxBitrate:(((p=(h=this.encodingParams)===null||h===void 0?void 0:h.high)===null||p===void 0?void 0:p.maxBitrateKbps)||this.defaultHiTargetBitrateKbps)*b,maxFramerate:(y=(d=this.encodingParams)===null||d===void 0?void 0:d.high)===null||y===void 0?void 0:y.maxFramerate}),S}updateIndex(s){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){}maxBandwidthKbps(){return this.enableUhdContent?2e3:1200}setIdealMaxBandwidthKbps(s){}setHasBandwidthPriority(s){}setHighResolutionFeatureEnabled(s){this.enableUhdContent=s,this.defaultHiTargetBitrateKbps=s?2e3:1200,this.defaultLowTargetBitrateKbps=s?500:300}addObserver(s){}removeObserver(s){}forEachObserver(s){}constructor(s,a){this.encodingParams=a,this.enableUhdContent=!1,this.defaultHiTargetBitrateKbps=1200,this.defaultLowTargetBitrateKbps=300}},"DefaultSimulcastUplinkPolicyForContentShare");l.default=v},9136055221:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(s,a,i,e){function t(r){return r instanceof i?r:new i(function(o){o(r)})}return n(t,"adopt"),new(i||(i=Promise))(function(r,o){function f(d){try{p(e.next(d))}catch(y){o(y)}}n(f,"fulfilled");function h(d){try{p(e.throw(d))}catch(y){o(y)}}n(h,"rejected");function p(d){d.done?r(d.value):t(d.value).then(f,h)}n(p,"step"),p((e=e.apply(s,a||[])).next())})},m=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(1695739824));let g=n(class vu{reset(){this.numberOfPublishedVideoSources=void 0,this.optimalParameters=new v.default(0,0,0,0,!1),this.parametersInEffect=new v.default(0,0,0,0,!1),this.encodingParamMap.set(vu.encodingMapKey,{maxBitrate:0})}updateConnectionMetric(a){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(a){var i;let e=!0;this.transceiverController&&(e=this.transceiverController.hasVideoInput());const t=a.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+(e?1:0),r=a.numberOfParticipants();if(this.numParticipants===r&&this.numberOfPublishedVideoSources===t){(i=this.logger)===null||i===void 0||i.debug("Skipping update index; Number of participants has not changed");return}this.numberOfPublishedVideoSources=t,this.numParticipants=r,this.updateOptimalParameters()}wantsResubscribe(){return!this.parametersInEffect.equal(this.optimalParameters)}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}updateOptimalParameters(){let a=1;if(this.transceiverController){const i=this.getStreamCaptureSetting();i&&(a=this.calculateEncodingParameters(i).scaleResolutionDownBy)}this.optimalParameters=new v.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1,a,this.enableSVC&&this.numParticipants>2&&this.isUsingSVCCodec)}captureWidth(){let a=640;return this.getNumberOfPublishedVideoSources()>4&&(a=320),a}captureHeight(){let a=384;return this.getNumberOfPublishedVideoSources()>4&&(a=192),a}captureFrameRate(){return 15}maxBandwidthKbps(){if(this.hasBandwidthPriority)return Math.trunc(this.idealMaxBandwidthKbps);let a=0;return this.getNumberOfPublishedVideoSources()<=2?a=this.idealMaxBandwidthKbps:this.getNumberOfPublishedVideoSources()<=4?a=this.idealMaxBandwidthKbps*2/3:a=(544/11+14880/(11*this.getNumberOfPublishedVideoSources()))/600*this.idealMaxBandwidthKbps,Math.trunc(a)}setIdealMaxBandwidthKbps(a){this.idealMaxBandwidthKbps=a}setHasBandwidthPriority(a){this.hasBandwidthPriority=a}setTransceiverController(a){this.transceiverController=a}setSVCEnabled(a){var i;this.enableSVC=a,(i=this.logger)===null||i===void 0||i.info(`setSVCEnabled, enable: ${a}}`)}setHighResolutionFeatureEnabled(a){this.enableHighResolutionFeature=a}updateTransceiverController(){return u(this,void 0,void 0,function*(){const a=this.getStreamCaptureSetting();if(!a)return;const i=this.calculateEncodingParameters(a);this.shouldUpdateEndcodingParameters(i)&&(this.encodingParamMap.set(vu.encodingMapKey,i),this.transceiverController.setEncodingParameters(this.encodingParamMap))})}shouldUpdateEndcodingParameters(a){var i,e;const t=(e=(i=this.transceiverController.localVideoTransceiver().sender.getParameters())===null||i===void 0?void 0:i.encodings)===null||e===void 0?void 0:e[0];return a.maxBitrate!==(t==null?void 0:t.maxBitrate)||a.scaleResolutionDownBy!==(t==null?void 0:t.scaleResolutionDownBy)||(a==null?void 0:a.scalabilityMode)!==(t==null?void 0:t.scalabilityMode)}calculateEncodingParameters(a){var i,e,t;const r=this.maxBandwidthKbps()*1e3;let o=1,f=720;if(a.height!==void 0&&a.width!==void 0&&this.scaleResolution&&!this.hasBandwidthPriority&&this.getNumberOfPublishedVideoSources()>2&&(f=vu.targetHeightArray[Math.min(this.getNumberOfPublishedVideoSources(),vu.targetHeightArray.length-1)][this.enableHighResolutionFeature?1:0],f===480&&(!((i=this.browserBehavior)===null||i===void 0)&&i.disable480pResolutionScaleDown())&&(f=360),o=Math.max(Math.min(a.height,a.width)/f,1),(e=this.logger)===null||e===void 0||e.info(`Resolution scale factor is ${o} for capture resolution ${a.width}x${a.height}. New dimension is ${a.width/o}x${a.height/o}`)),this.enableSVC){let h;return this.numParticipants>=0&&this.numParticipants<3||!this.isUsingSVCCodec?h="L1T1":h="L3T3",(t=this.logger)===null||t===void 0||t.info(`calculateEncodingParameters: SVC: ${this.enableSVC}    participants: ${this.numParticipants}     publishers: ${this.getNumberOfPublishedVideoSources()}     bitrate: ${r}  targetHeight: ${f}  scalabilityMode: ${h}   isUsingSVCCodec: ${this.isUsingSVCCodec}`),{scaleResolutionDownBy:o,maxBitrate:r,scalabilityMode:h}}else return{scaleResolutionDownBy:o,maxBitrate:r}}getStreamCaptureSetting(){var a,i,e,t;return(t=(e=(i=(a=this.transceiverController)===null||a===void 0?void 0:a.localVideoTransceiver())===null||i===void 0?void 0:i.sender)===null||e===void 0?void 0:e.track)===null||t===void 0?void 0:t.getSettings()}getNumberOfPublishedVideoSources(){var a;return(a=this.numberOfPublishedVideoSources)!==null&&a!==void 0?a:0}wantsVideoDependencyDescriptorRtpHeaderExtension(){return this.enableSVC}setMeetingSupportedVideoSendCodecs(a,i){const e=a??i,t=e.length>0&&vu.SVCCodecNames.includes(e[0].codecName);t!==this.isUsingSVCCodec&&(this.isUsingSVCCodec=t,this.updateOptimalParameters())}constructor(a,i=!0,e=void 0,t=void 0){this.selfAttendeeId=a,this.scaleResolution=i,this.logger=e,this.browserBehavior=t,this.numberOfPublishedVideoSources=void 0,this.idealMaxBandwidthKbps=1500,this.hasBandwidthPriority=!1,this.encodingParamMap=new Map,this.enableHighResolutionFeature=!1,this.enableSVC=!1,this.isUsingSVCCodec=!0,this.numParticipants=0,this.reset()}},"NScaleVideoUplinkBandwidthPolicy");l.default=g,g.encodingMapKey="video",g.targetHeightArray=[[0,0],[0,0],[0,0],[540,720],[540,720],[480,540],[480,540],[480,540],[480,540],[360,480],[360,480],[360,480],[360,480],[270,360],[270,360],[270,360],[270,360],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270]],g.SVCCodecNames=["VP9"]},9871896518:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(1695739824));let v=n(class{updateConnectionMetric(s){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(s){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){return new m.default(0,0,0,0,!1)}maxBandwidthKbps(){return 0}setIdealMaxBandwidthKbps(s){}setHasBandwidthPriority(s){}setHighResolutionFeatureEnabled(s){}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!1}constructor(){}},"NoVideoUplinkBandwidthPolicy");l.default=v},6133497304:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});function c(m){return m.map(v=>typeof v=="object"?JSON.stringify(v):`${v}`).join(" ")}n(c,"stringify");let u=n(class{debug(){for(var v=arguments.length,g=new Array(v),s=0;s<v;s++)g[s]=arguments[s];this.base.debug(c(g))}info(){for(var v=arguments.length,g=new Array(v),s=0;s<v;s++)g[s]=arguments[s];this.base.info(c(g))}warn(){for(var v=arguments.length,g=new Array(v),s=0;s<v;s++)g[s]=arguments[s];this.base.warn(c(g))}error(){for(var v=arguments.length,g=new Array(v),s=0;s<v;s++)g[s]=arguments[s];this.base.error(c(g))}constructor(v){this.base=v}},"LoggerAdapter");l.default=u},1644756024:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(r,o,f,h){function p(d){return d instanceof f?d:new f(function(y){y(d)})}return n(p,"adopt"),new(f||(f=Promise))(function(d,y){function S(C){try{_(h.next(C))}catch(w){y(w)}}n(S,"fulfilled");function b(C){try{_(h.throw(C))}catch(w){y(w)}}n(b,"rejected");function _(C){C.done?d(C.value):p(C.value).then(S,b)}n(_,"step"),_((h=h.apply(r,o||[])).next())})},m=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusDeviceTransformer=void 0;const v=c(5700998045),g=c(5685319565),s=m(c(6885109343)),a=m(c(6133497304)),i=m(c(7141525823)),e=m(c(7075076608));let t=n(class Al{static isSupported(o,f){var h,p;const d=Al.defaultFetchBehavior(),y=f!=null&&f.logger?new a.default(f.logger):void 0,S={fetchBehavior:d,logger:y};if(g.isIFramed()){if((f==null?void 0:f.allowIFrame)===!1)return(h=f==null?void 0:f.logger)===null||h===void 0||h.error("Amazon Voice Focus support check inside iframe: not supported."),Promise.resolve(!1);(p=f==null?void 0:f.logger)===null||p===void 0||p.warn("Amazon Voice Focus support check inside iframe: not recommended.")}return v.VoiceFocus.isSupported(Al.augmentSpec(o),S)}static create(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=arguments.length>2?arguments[2]:void 0,p=arguments.length>3?arguments[3]:void 0,d=arguments.length>4?arguments[4]:void 0;var y,S,b;return u(this,void 0,void 0,function*(){p&&p.Meeting.Meeting&&(p=p.Meeting);const _=((b=(S=(y=p==null?void 0:p.Meeting)===null||y===void 0?void 0:y.MeetingFeatures)===null||S===void 0?void 0:S.Audio)===null||b===void 0?void 0:b.EchoReduction)==="AVAILABLE",C=h&&h.supported===!0&&h.model.name==="ns_es"&&!_,w=o.name==="ns_es"&&!_;if(C||w)throw new Error("Echo Reduction requested but not enabled.");const R=new Al(o,f,h);return yield R.init(),R})}static configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return u(this,void 0,void 0,function*(){return new Al(o,f,void 0).configure(!0)})}getConfiguration(){return this.configuration}isSupported(){return this.supported}createTransformDevice(o,f){return u(this,void 0,void 0,function*(){if(this.supported)try{const[p,d]=yield this.allocateVoiceFocus(!0),y=Object.assign(Object.assign({},f),{es:this.spec.name==="ns_es"});return new i.default(o,p,d,y)}catch{return}})}static destroyVoiceFocus(o){var f;return u(this,void 0,void 0,function*(){(f=o==null?void 0:o.vf)===null||f===void 0||f.destroy()})}static augmentSpec(o){return!o||!o.assetGroup&&!o.revisionID?Object.assign(Object.assign({},o),{assetGroup:Al.currentSDKAssetGroup()}):o}configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const f={fetchBehavior:this.fetchBehavior,preResolve:o,logger:this.vfLogger};return v.VoiceFocus.configure(this.spec,f)})}init(){var o;return u(this,void 0,void 0,function*(){this.configuration||(this.configuration=this.configure());const f=yield this.configuration;if(!f.supported){this.supported=!1;return}this.pendingVoiceFocus=this.createVoiceFocus(f,this.preload);try{yield this.pendingVoiceFocus}catch(h){(o=this.logger)===null||o===void 0||o.error(`Unable to initialize Amazon Voice Focus: ${h}`),this.supported=!1}})}createVoiceFocus(o,f){return u(this,void 0,void 0,function*(){const h=new e.default;return this.vf=yield v.VoiceFocus.init(o,{delegate:h,preload:f,logger:this.vfLogger}),[this.vf,h]})}allocateVoiceFocus(o){return u(this,void 0,void 0,function*(){if(!this.supported)throw new Error("Not supported.");if(this.pendingVoiceFocus){const f=this.pendingVoiceFocus;return this.pendingVoiceFocus=void 0,f}return this.createVoiceFocus(yield this.configuration,o)})}static majorVersion(){return s.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|[1-9][0-9]*)/)[0]}static majorMinorVersion(){return s.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|(?:[1-9][0-9]*))\.(?:0|[1-9][0-9]*)/)[0]}static currentSDKAssetGroup(){const o=this.majorVersion();return o?`sdk-${o}`:"stable-v1"}static defaultFetchBehavior(){const o=Al.majorMinorVersion()||"unknown",f=s.default.sdkUserAgentLowResolution;return{escapedQueryString:`sdk=${encodeURIComponent(o)}&ua=${encodeURIComponent(f)}`}}constructor(o,{preload:f=!0,logger:h,fetchBehavior:p=Al.defaultFetchBehavior()},d){this.spec=o,this.supported=!0,this.logger=h,this.vfLogger=h?new a.default(h):void 0,this.preload=f,this.fetchBehavior=p,this.spec=Al.augmentSpec(this.spec),d&&(this.configuration=Promise.resolve(d))}},"VoiceFocusDeviceTransformer");l.VoiceFocusDeviceTransformer=t,l.default=t},7141525823:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(5546774952));let g=n(class Rv{getInnerDevice(){return this.device}mute(i){return u(this,void 0,void 0,function*(){this.node&&(i?yield this.node.disable():yield this.node.enable())})}stop(){return u(this,void 0,void 0,function*(){this.node&&(this.node.disconnect(),yield this.node.stop())})}chooseNewInnerDevice(i){return u(this,void 0,void 0,function*(){return this.device===i&&!s(i)?this:new Rv(i,this.voiceFocus,this.delegate,this.nodeOptions,this.failed,this.node,this.browserBehavior,this.farEndStreamToAudioSourceNode,this.mixDestNode,this.mixSourceNode)})}intrinsicDevice(){return u(this,void 0,void 0,function*(){if(this.failed)return this.device;const i=this.nodeOptions.es,e={echoCancellation:!i,googEchoCancellation:!i,googEchoCancellation2:!i,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googNoiseSuppression2:!1};let t;return this.nodeOptions&&this.nodeOptions.agc!==void 0?t=this.nodeOptions.agc.useBuiltInAGC:t=!0,e.autoGainControl=t,e.googAutoGainControl=t,e.googAutoGainControl2=t,this.device?typeof this.device=="string"?(this.browserBehavior.requiresNoExactMediaStreamConstraints()?e.deviceId=this.device:e.deviceId={exact:this.device},e):this.device.id?this.device:Object.assign(Object.assign({},this.device),e):e})}createAudioNode(i){var e,t;return u(this,void 0,void 0,function*(){if(((e=this.node)===null||e===void 0?void 0:e.context)===i)return{start:this.node,end:this.node};const o=Object.assign({enabled:!0,agc:{useVoiceFocusAGC:!1}},this.nodeOptions);try{if((t=this.node)===null||t===void 0||t.disconnect(),this.node=yield this.voiceFocus.createNode(i,o),this.nodeOptions.es){this.mixDestNode=new MediaStreamAudioDestinationNode(i,{channelCount:1,channelCountMode:"explicit"});for(const p of this.farEndStreamToAudioSourceNode.keys())this.assignFarEndStreamToAudioSourceNode(p);this.createMixSourceNode()}const f=this.node,h=this.node;return{start:f,end:h}}catch(f){throw this.failed=!0,this.delegate.onFallback(this,f),f}})}observeMeetingAudio(i){return u(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;i.addAudioMixObserver(this);const e=yield i.getCurrentMeetingAudioStream();e&&this.addFarEndStream(e)})}unObserveMeetingAudio(i){return u(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;i.removeAudioMixObserver(this);const e=yield i.getCurrentMeetingAudioStream();e&&this.removeFarendStream(e)})}addObserver(i){this.delegate.addObserver(i)}removeObserver(i){this.delegate.removeObserver(i)}addFarEndStream(i){return u(this,void 0,void 0,function*(){!this.nodeOptions.es||!i||this.farEndStreamToAudioSourceNode.has(i)||(this.node?this.assignFarEndStreamToAudioSourceNode(i):this.farEndStreamToAudioSourceNode.set(i,null))})}removeFarendStream(i){var e;return u(this,void 0,void 0,function*(){(e=this.farEndStreamToAudioSourceNode.get(i))===null||e===void 0||e.disconnect(),this.farEndStreamToAudioSourceNode.delete(i)})}meetingAudioStreamBecameActive(i){return u(this,void 0,void 0,function*(){this.addFarEndStream(i)})}meetingAudioStreamBecameInactive(i){return u(this,void 0,void 0,function*(){this.removeFarendStream(i)})}assignFarEndStreamToAudioSourceNode(i){const e=this.node.context.createMediaStreamSource(i);e.channelCount=1,e.channelCountMode="explicit",this.farEndStreamToAudioSourceNode.set(i,e),e.connect(this.mixDestNode,0)}createMixSourceNode(){this.mixSourceNode=this.node.context.createMediaStreamSource(this.mixDestNode.stream),this.mixSourceNode.channelCount=1,this.mixSourceNode.channelCountMode="explicit",this.mixSourceNode.connect(this.node,0,1)}constructor(i,e,t,r,o=!1,f=void 0,h=new v.default,p=new Map,d=void 0,y=void 0){this.device=i,this.voiceFocus=e,this.delegate=t,this.nodeOptions=r,this.failed=o,this.node=f,this.browserBehavior=h,this.farEndStreamToAudioSourceNode=p,this.mixDestNode=d,this.mixSourceNode=y}},"VoiceFocusTransformDevice");function s(a){return a==="default"?!0:!a||typeof a!="object"?!1:"deviceId"in a&&a.deviceId==="default"||"id"in a&&a.id==="default"}n(s,"isDefaultDevice"),l.default=g},7075076608:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{addObserver(m){this.observers.add(m)}removeObserver(m){this.observers.delete(m)}onFallback(m,v){var g;for(const s of this.observers)(g=s.voiceFocusFellBackToInnerStream)===null||g===void 0||g.call(s,m,v)}onCPUWarning(){var m;for(const v of this.observers)(m=v.voiceFocusInsufficientResources)===null||m===void 0||m.call(v)}constructor(){this.observers=new Set}},"VoiceFocusTransformDeviceDelegate");l.default=c},8058016368:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class xf{onReconnect(){this.sessionReconnected=!0}sendRealtimeUpdatesForAudioStreamIdInfo(m){let v=0;for(const g of m.streams){const s=!!g.attendeeId,a=!!g.externalUserId,i=g.hasOwnProperty("muted"),e=!!g.dropped;if(s){this.attendeeIdToStreamId[g.attendeeId]&&this.attendeeIdToStreamId[g.attendeeId]<g.audioStreamId&&delete this.attendeeIdToStreamId[g.attendeeId],this.streamIdToAttendeeId[g.audioStreamId]=g.attendeeId;const t=a?g.externalUserId:g.attendeeId;this.streamIdToExternalUserId[g.audioStreamId]=t,this.attendeeIdToStreamId[g.attendeeId]=g.audioStreamId,this.realtimeController.realtimeSetAttendeeIdPresence(g.attendeeId,!0,t,!1,{attendeeIndex:v++,attendeesInFrame:m.streams.length})}if(i){const t=this.streamIdToAttendeeId[g.audioStreamId],r=this.streamIdToExternalUserId[g.audioStreamId];this.realtimeController.realtimeUpdateVolumeIndicator(t,null,g.muted,null,r)}if(!s&&!i){const t=this.streamIdToAttendeeId[g.audioStreamId];if(t){const r=this.streamIdToExternalUserId[g.audioStreamId];delete this.streamIdToAttendeeId[g.audioStreamId],delete this.streamIdToExternalUserId[g.audioStreamId],delete this.warnedAboutMissingStreamIdMapping[g.audioStreamId],this.attendeeIdToStreamId[t]===g.audioStreamId&&delete this.attendeeIdToStreamId[t];let o=!1;for(const f of Object.keys(this.streamIdToAttendeeId)){const h=parseInt(f);if(h>g.audioStreamId&&this.streamIdToAttendeeId[h]===t){o=!0;break}}o||this.realtimeController.realtimeSetAttendeeIdPresence(t,!1,r,e,{attendeeIndex:v++,attendeesInFrame:m.streams.length})}}}this.sessionReconnected&&(this.cleanUpState(m),this.sessionReconnected=!1)}cleanUpState(m){const v=Object.values(this.streamIdToAttendeeId),g=m.streams.map(a=>a.attendeeId),s=v.filter(a=>!g.includes(a));for(const[a,i]of s.entries()){const e=this.attendeeIdToStreamId[i],t=this.streamIdToExternalUserId[e];if(delete this.streamIdToAttendeeId[e],delete this.streamIdToExternalUserId[e],delete this.warnedAboutMissingStreamIdMapping[e],delete this.attendeeIdToStreamId[i],i===this.selfAttendeeId){this.logger.warn("the volume indicator adapter cleans up the current attendee (presence = false) after reconnection");continue}this.realtimeController.realtimeSetAttendeeIdPresence(i,!1,t,!1,{attendeeIndex:a,attendeesInFrame:i.length})}}sendRealtimeUpdatesForAudioMetadata(m){let v=null,g=null;for(const s of m.attendeeStates){const a=this.attendeeIdForStreamId(s.audioStreamId);s.hasOwnProperty("volume")&&(v===null&&(v={}),a!==null&&(v[a]=this.normalizedVolume(s))),s.hasOwnProperty("signalStrength")&&(g===null&&(g={}),a!==null&&(g[a]=this.normalizedSignalStrength(s)))}this.applyRealtimeUpdatesForAudioMetadata(v,g)}normalizedVolume(m){const g=1-(-m.volume-this.maxVolumeDecibels)/(this.minVolumeDecibels-this.maxVolumeDecibels);return Math.min(Math.max(g,0),1)}normalizedSignalStrength(m){const v=m.signalStrength/xf.MAX_SIGNAL_STRENGTH_LEVELS;return Math.min(Math.max(v,0),1)}applyRealtimeUpdatesForAudioMetadata(m,v){for(const g in this.streamIdToAttendeeId){const s=this.streamIdToAttendeeId[g],a=this.streamIdToExternalUserId[g];let i=null,e=null;m!==null&&(m.hasOwnProperty(s)?i=m[s]:i=xf.IMPLICIT_VOLUME),v!==null&&(v.hasOwnProperty(s)?e=v[s]:e=xf.IMPLICIT_SIGNAL_STRENGTH),(i!==null||e!==null)&&this.realtimeController.realtimeUpdateVolumeIndicator(s,i,null,e,a)}}attendeeIdForStreamId(m){if(m===0)return null;const v=this.streamIdToAttendeeId[m];return v||(this.warnedAboutMissingStreamIdMapping[m]||(this.warnedAboutMissingStreamIdMapping[m]=!0,this.logger.warn(`volume indicator stream id ${m} seen before being defined`)),null)}constructor(m,v,g,s,a){this.logger=m,this.realtimeController=v,this.minVolumeDecibels=g,this.maxVolumeDecibels=s,this.selfAttendeeId=a,this.streamIdToAttendeeId={},this.streamIdToExternalUserId={},this.warnedAboutMissingStreamIdMapping={},this.attendeeIdToStreamId={},this.sessionReconnected=!1}},"DefaultVolumeIndicatorAdapter");l.default=c,c.MAX_SIGNAL_STRENGTH_LEVELS=2,c.IMPLICIT_VOLUME=0,c.IMPLICIT_SIGNAL_STRENGTH=1},7880459944:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(6885109343)),v=u(c(5638612424));let g=n(class{create(a,i,e){this.connection=new WebSocket(e?a:m.default.urlWithVersion(a),i),this.connection.binaryType="arraybuffer"}send(a){if(!this.connection)return this.logger.error("WebSocket not yet created or already destroyed."),!1;try{return a instanceof Uint8Array?this.connection.send(a.buffer):this.connection.send(a),!0}catch(i){return this.logger.debug(()=>`send error: ${i.message}, websocket state=${v.default[this.readyState()]}`),!1}}close(a,i){var e;(e=this.connection)===null||e===void 0||e.close(a,i)}destroy(){this.connection=void 0}addEventListener(a,i){if(!this.connection){this.logger.warn("Cannot add event listener with no WebSocket connection.");return}this.connection.addEventListener(a,i)}removeEventListener(a,i){var e;(e=this.connection)===null||e===void 0||e.removeEventListener(a,i)}readyState(){if(!this.connection)return v.default.None;switch(this.connection.readyState){case WebSocket.CONNECTING:return v.default.Connecting;case WebSocket.OPEN:return v.default.Open;case WebSocket.CLOSING:return v.default.Closing;case WebSocket.CLOSED:return v.default.Closed}}constructor(a){this.logger=a}},"DefaultWebSocketAdapter");l.default=g},5638612424:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.WebSocketReadyState=void 0;var c;(function(u){u[u.None=0]="None",u[u.Connecting=1]="Connecting",u[u.Open=2]="Open",u[u.Closing=3]="Closing",u[u.Closed=4]="Closed"})(c=l.WebSocketReadyState||(l.WebSocketReadyState={})),l.default=c},7729790247:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(_,C,w,R){function O(D){return D instanceof w?D:new w(function(I){I(D)})}return n(O,"adopt"),new(w||(w=Promise))(function(D,I){function M(j){try{N(R.next(j))}catch(B){I(B)}}n(M,"fulfilled");function k(j){try{N(R.throw(j))}catch(B){I(B)}}n(k,"rejected");function N(j){j.done?D(j.value):O(j.value).then(M,k)}n(N,"step"),N((R=R.apply(_,C||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.decideModel=l.measureAndDecideExecutionApproach=void 0;const m=c(5963876428),v=c(7984036634),g=3,s=2.5,a=2.63,i=.6,e=.65,t=.5,r=.7,o={wasm:{noSupport:.07,inline:{c100:1,c50:.36,c20:.16,c10:.07},worker:{c100:.5,c50:.18,c20:.08,c10:.06}},simd:{noSupport:.1,inline:{c100:1,c50:.43,c20:.3,c10:.2},worker:{c100:.5,c50:.21,c20:.15,c10:.1}}};let f=n(class{roundtrip(C,w,R){return new Promise((O,D)=>{this.worker.then(I=>{let M;M=n(k=>{const{message:N,key:j}=k.data;N===w&&j===R&&(I.removeEventListener("message",M),O(k.data))},"listener"),I.addEventListener("message",M),I.postMessage(C)}).catch(I=>{var M;(M=this.logger)===null||M===void 0||M.error("Failed to load worker.",I),D(I)})})}supportsSIMD(C){const w="simd",R=C||`${this.fetchConfig.paths.wasm}simd-v1.wasm`,O={message:"supports-simd",fetchBehavior:this.fetchBehavior,path:R,key:w};return this.roundtrip(O,"simd-support",w).then(D=>D.supports)}measure(C,w){const R=`${this.fetchConfig.paths.wasm}bench-v1.wasm`,O=`${this.fetchConfig.paths.wasm}bench-v1_simd.wasm`,D=C?O:R,I=`bench:${C}`,M={message:"measure",fetchBehavior:this.fetchBehavior,budget:w,path:D,key:I};return this.roundtrip(M,"measurement",I).then(k=>{if(k.measurement)return k.measurement;throw new Error("Failed to measure.")})}stop(){this.worker.then(C=>{var w;(w=this.logger)===null||w===void 0||w.debug("Stopping estimator worker."),C.terminate()}).catch(C=>{})}constructor(C,w){this.fetchConfig=C,this.logger=w;const R=`${C.paths.workers}estimator-v1.js`;this.fetchBehavior={headers:C.headers,escapedQueryString:C.escapedQueryString},this.worker=m.loadWorker(R,"VoiceFocusEstimator",this.fetchBehavior,w)}},"Estimator");const h=n((_,C)=>_===1?i:C==="quality"?e*_:t*_,"inlineScoreMultiplier"),p=n(function(_){let{supportsSIMD:C,supportsSAB:w,duration:R,executionPreference:O="auto",simdPreference:D,variantPreference:I="auto",namePreference:M="default",usagePreference:k,executionQuantaPreference:N=g}=_,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,B=arguments.length>2?arguments[2]:void 0;const Q=D==="force"||D!=="disable"&&C,oe=R!==-1,$=oe?(Q?s:a)/R:0,he=Q?j.simd:j.wasm,Ae=oe?h(N,k)*$:0,Ee=oe?r*$:0,Oe=M,be=n(Rt=>({supported:!1,reason:Rt}),"unsupported");if(oe){if($<he.noSupport)return be(`Performance score ${$} worse than threshold ${he.noSupport}.`)}else if(O==="auto"||I==="auto")return be(`Missing explicit execution (${O}) or variant (${I}) preference, but no scoring performed.`);B==null||B.debug(`Bench duration ${R} yields inline score ${Ae} and worker score ${Ee}.`);const De=n((Rt,Ze,mt)=>({supported:!0,useSIMD:Q,processor:Rt,executionApproach:Ze,variant:mt,executionQuanta:Ze==="inline"?N:void 0,name:Oe}),"succeed"),ut=n((Rt,Ze,mt)=>Ze!=="auto"?!oe||Rt>mt[Ze]?Ze:"failed":Rt>mt.c100?"c100":Rt>mt.c50?"c50":Rt>mt.c20?"c20":Rt>mt.c10?"c10":"failed","resolveVariant"),St=n(Rt=>{switch(Rt||"auto"){case"auto":{let Ze=St("inline"),mt=St("worker");return B==null||B.debug(`Reducing auto preference: ${JSON.stringify(Ze)} vs ${JSON.stringify(mt)}`),Ze.supported===!1||mt.supported===!1?mt:Ze.variant===mt.variant||Ze.variant==="c50"?Ze:mt}case"worker":return v.supportsSharedArrayBuffer(globalThis,window,B)?St("worker-sab"):St("worker-postMessage");case"inline":{const Ze=ut(Ae,I,he.inline);return Ze==="failed"?be(`Performance score ${Ae} not sufficient for inline use with variant preference ${I}.`):De("voicefocus-inline-processor","inline",Ze)}case"worker-sab":{if(!w){const mt="Requested worker-sab but no SharedArrayBuffer support.";return B==null||B.warn(mt),{supported:!1,reason:mt}}const Ze=ut(Ee,I,he.worker);return Ze==="failed"?be(`Performance score ${Ee} not sufficient for worker use with variant preference ${I}.`):De("voicefocus-worker-sab-processor","worker-sab",Ze)}case"worker-postMessage":{const Ze=ut(Ee,I,he.worker);if(Ze==="failed")return be(`Performance score ${Ee} not sufficient for worker use.`);if(Oe==="ns_es"){const mt="Requested echo suppression but postMessage executor does not support it.";return B==null||B.warn(mt),{supported:!1,reason:mt}}return De("voicefocus-worker-postMessage-processor","worker-postMessage",Ze)}}},"reducePreference");return St(O)},"decideExecutionApproach"),d=n((_,C,w,R)=>u(void 0,void 0,void 0,function*(){const O={supportsSIMD:_,supportsSAB:v.supportsSharedArrayBuffer(globalThis,window,w),duration:-1};if(_)return w==null||w.info("Supports SIMD: true (force)"),O;const D=!R,I=R||new f(C,w);try{const M=!v.isOldChrome(window,w)&&(yield I.supportsSIMD());return w==null||w.info(`Supports SIMD: ${M} (force: ${_})`),O.supportsSIMD=M,O}finally{D&&I.stop()}}),"featureCheck"),y=n((_,C,w,R)=>u(void 0,void 0,void 0,function*(){const O=new f(C,R);try{const D=yield d(_,C,R,O);if(D.supportsSIMD)try{return D.duration=yield O.measure(!0,w),R==null||R.info("SIMD timing:",D.duration),D}catch{R==null||R.warn("Failed SIMD estimation; falling back to non-SIMD."),D.supportsSIMD=!1}return D.duration=yield O.measure(!1,w),R==null||R.info("No-SIMD timing:",D.duration),D}catch(D){throw R==null||R.error("Could not feature check.",D),D}finally{O.stop()}}),"estimateAndFeatureCheck"),S=n(function(_,C,w){let R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:o;return u(void 0,void 0,void 0,function*(){let O=_.executionPreference;const{usagePreference:D,variantPreference:I,namePreference:M,simdPreference:k,estimatorBudget:N,executionQuantaPreference:j}=_;D==="interactivity"&&O!=="inline"&&(w==null||w.debug(`Overriding execution preference ${O} to reflect interactivity preference.`),O="inline");const B=k==="force",J=I!=="auto",Q=O!=="auto";let oe;try{J&&Q?oe=yield d(B,C,w):oe=yield y(B,C,N,w)}catch($){throw w==null||w.error("Could not load estimator.",$),new Error("Could not load Voice Focus estimator.")}return p(Object.assign(Object.assign({},oe),{simdPreference:k,executionPreference:O,variantPreference:I,namePreference:M,usagePreference:D,executionQuantaPreference:j}),R,w)})},"measureAndDecideExecutionApproach");l.measureAndDecideExecutionApproach=S;const b=n(_=>{let{category:C,name:w,variant:R,simd:O,url:D}=_;return`${C}-${w}-${R}-v1${O?"_simd":""}`},"decideModel");l.decideModel=b},9463981249:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isValidRevisionID=l.isValidAssetGroup=l.resolveURL=l.addQueryParams=l.withQueryString=l.withRequestHeaders=l.fetchWithBehavior=void 0;function c(e,t,r){if(!r)return fetch(e,t);const o=m(e,r),f=u(t,r);return fetch(o,f)}n(c,"fetchWithBehavior"),l.fetchWithBehavior=c;function u(e,t){return t!=null&&t.headers?e?Object.assign(Object.assign({},e),{headers:Object.assign(Object.assign({},e.headers||{}),t.headers)}):{headers:t.headers}:e}n(u,"withRequestHeaders"),l.withRequestHeaders=u;function m(e,t){if(!(t!=null&&t.escapedQueryString))return e;const r=e.lastIndexOf("?")!==-1;return`${e}${r?"&":"?"}${t.escapedQueryString}`}n(m,"withQueryString"),l.withQueryString=m;function v(e,t){const r=Object.keys(t);if(!r.length)return e;const o=new URLSearchParams(e==null?void 0:e.escapedQueryString);for(const f of r)o.append(f,t[f]);return Object.assign(Object.assign({},e),{escapedQueryString:o.toString()})}n(v,"addQueryParams"),l.addQueryParams=v;const g={method:"HEAD",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"origin"};function s(e,t){return c(e,g,t).then(r=>r.redirected?r.url:e)}n(s,"resolveURL"),l.resolveURL=s;function a(e){return!!e&&/^[-.a-zA-Z0-9]+$/.test(e)}n(a,"isValidAssetGroup"),l.isValidAssetGroup=a;function i(e){return!!e&&/^[123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ]{22}$/.test(e)}n(i,"isValidRevisionID"),l.isValidRevisionID=i},5963876428:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.loadWorker=void 0;const u=c(9463981249),m={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"},v=n((g,s,a,i)=>{i==null||i.debug(`Loading ${s} worker from ${g}.`);let e=!1;try{e=self.origin===new URL(g).origin}catch(t){i==null||i.error("Could not compare origins.",t)}if(e){const t=u.withQueryString(g,a);return Promise.resolve(new Worker(t,{name:s}))}return u.fetchWithBehavior(g,m,a).then(t=>{if(t.ok)return t.blob().then(r=>new Worker(window.URL.createObjectURL(r)));throw new Error("Fetch failed.")})},"loadWorker");l.loadWorker=v},7984036634:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(d,y,S,b){function _(C){return C instanceof S?C:new S(function(w){w(C)})}return n(_,"adopt"),new(S||(S=Promise))(function(C,w){function R(I){try{D(b.next(I))}catch(M){w(M)}}n(R,"fulfilled");function O(I){try{D(b.throw(I))}catch(M){w(M)}}n(O,"rejected");function D(I){I.done?C(I.value):_(I.value).then(R,O)}n(D,"step"),D((b=b.apply(d,y||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.isOldChrome=l.supportsWASMStreaming=l.supportsSharedArrayBuffer=l.supportsWASM=l.supportsAudioWorklet=l.supportsWorker=l.supportsVoiceFocusWorker=l.supportsWASMPostMessage=l.isSafari=void 0;const m=c(5963876428),v=n(function(){return!!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/)},"isChrome"),g=n(function(){const y=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent,S=y.match(/Safari\//),b=y.match(/Chrom(?:e|ium)\//);return!!(S&&!b)},"isSafari");l.isSafari=g;const s=n(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;return l.isSafari(d)?!1:v(d)?(h(d)||0)<95:!0},"supportsWASMPostMessage");l.supportsWASMPostMessage=s;const a=n(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0,S=arguments.length>2?arguments[2]:void 0;return u(void 0,void 0,void 0,function*(){if(!l.supportsWorker(d,S))return!1;const b=`${y.paths.workers}worker-v1.js`;try{const _=yield m.loadWorker(b,"VoiceFocusTestWorker",y,S);try{_.terminate()}catch(C){S==null||S.debug("Failed to terminate worker.",C)}return!0}catch(_){return S==null||S.info("Failed to fetch and instantiate test worker",_),!1}})},"supportsVoiceFocusWorker");l.supportsVoiceFocusWorker=a;const i=n(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!d.Worker}catch(S){return y==null||y.info("Does not support Worker",S),!1}},"supportsWorker");l.supportsWorker=i;const e=n(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!d.AudioWorklet&&!!d.AudioWorkletNode}catch(S){return y==null||y.info("Does not support Audio Worklet",S),!1}},"supportsAudioWorklet");l.supportsAudioWorklet=e;const t=n(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!d.WebAssembly&&(!!d.WebAssembly.compile||!!d.WebAssembly.compileStreaming)}catch(S){return y==null||y.info("Does not support WASM",S),!1}},"supportsWASM");l.supportsWASM=t;const r=n(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:globalThis,S=arguments.length>2?arguments[2]:void 0;try{return!!d.SharedArrayBuffer&&(!!y.chrome||!!d.crossOriginIsolated)}catch{return S==null||S.info("Does not support SharedArrayBuffer."),!1}},"supportsSharedArrayBuffer");l.supportsSharedArrayBuffer=r;const o=n(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;var S;try{return!!(!((S=d.WebAssembly)===null||S===void 0)&&S.compileStreaming)}catch(b){return y==null||y.info("Does not support WASM streaming compilation",b),!1}},"supportsWASMStreaming");l.supportsWASMStreaming=o;const f=90,h=n(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;try{if(!d.chrome)return}catch{}const y=d.navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/);if(y)return parseInt(y[1],10)},"chromeVersion"),p=n(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;const S=h(d);return S&&S<f?(y==null||y.debug(`Chrome ${S} has incomplete SIMD support.`),!0):!1},"isOldChrome");l.isOldChrome=p},6021562188:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusAudioWorkletNode=void 0;let c=n(class extends(typeof globalThis<"u"&&globalThis.AudioWorkletNode||n(class{},"Sadness")){},"VoiceFocusAudioWorkletNode");l.VoiceFocusAudioWorkletNode=c},5700998045:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(I,M,k,N){function j(B){return B instanceof k?B:new k(function(J){J(B)})}return n(j,"adopt"),new(k||(k=Promise))(function(B,J){function Q(he){try{$(N.next(he))}catch(Ae){J(Ae)}}n(Q,"fulfilled");function oe(he){try{$(N.throw(he))}catch(Ae){J(Ae)}}n(oe,"rejected");function $(he){he.done?B(he.value):j(he.value).then(Q,oe)}n($,"step"),$((N=N.apply(I,M||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getAudioInput=l.createAudioContext=l.VoiceFocus=void 0;const m=c(7729790247),v=c(9463981249),g=c(5963876428),s=c(7984036634),a=c(79783582),i=c(161673934),e=c(641640331),r={useVoiceFocusAGC:!1,useBuiltInAGC:!0},o="stable-v1",f="https://static.sdkassets.chime.aws",h={processors:`${f}/processors/`,workers:`${f}/workers/`,wasm:`${f}/wasm/`,models:`${f}/wasm/`},p={latencyHint:0},d={channelCount:1,echoCancellation:!0,googEchoCancellation:!0,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googTypingNoiseDetection:!1},y=Object.assign(Object.assign({},d),{autoGainControl:!0,googAutoGainControl:!0,googAutoGainControl2:!0}),S=Object.assign(Object.assign({},d),{autoGainControl:!1,googAutoGainControl:!1,googAutoGainControl2:!1}),b={"voicefocus-worker-sab-processor":{file:"worklet-worker-sab-processor-v1.js",node:i.default},"voicefocus-worker-postMessage-processor":{file:"worklet-worker-postMessage-processor-v1.js",node:e.default},"voicefocus-inline-processor":{file:"worklet-inline-processor-v1.js",node:a.default}},_=n((I,M)=>{if(I!==void 0&&!v.isValidAssetGroup(I))throw new Error(`Invalid asset group ${I}`);if(M!==void 0&&!v.isValidRevisionID(M))throw new Error(`Invalid revision ID ${M}`)},"validateAssetSpec"),C=n((I,M)=>{let k;if(M.useBuiltInAGC?k=y:k=S,!I)return{audio:k};if(!I.audio)return I;if(I.video)throw new Error("Not adding Voice Focus to multi-device getUserMedia call.");return Object.assign(Object.assign({},I),{audio:I.audio===!0?k:Object.assign(Object.assign({},I.audio),k)})},"mungeConstraints"),w=n((I,M)=>`${M.models}${m.decideModel(I)}.wasm`,"urlForModel");let R=n(class Mv{static isSupported(M,k){const{fetchBehavior:N,logger:j}=k||{};if(typeof globalThis>"u")return j==null||j.debug("Browser does not have globalThis."),Promise.resolve(!1);if(!s.supportsAudioWorklet(globalThis,j))return j==null||j.debug("Browser does not support Audio Worklet."),Promise.resolve(!1);if(!s.supportsWASM(globalThis,j))return j==null||j.debug("Browser does not support WASM."),Promise.resolve(!1);s.supportsWASMStreaming(globalThis,j)||j==null||j.debug("Browser does not support streaming WASM compilation.");const{assetGroup:B=o,revisionID:J,paths:Q=h}=M||{};_(B,J);const oe=J?{revisionID:J}:{assetGroup:B},$=v.addQueryParams(N,oe),he=Object.assign(Object.assign({},$),{paths:Q});return s.supportsVoiceFocusWorker(globalThis,he,j)}static mungeExecutionPreference(M,k){const N=M===void 0||M==="auto";if(s.isSafari(globalThis)){if(N||M==="inline")return"inline";if(!N)throw new Error(`Unsupported execution preference ${M}`)}if(M==="worker-sab"&&!s.supportsSharedArrayBuffer(globalThis,globalThis,k))throw new Error(`Unsupported execution preference ${M}`);return M||"auto"}static configure(M,k){return u(this,void 0,void 0,function*(){const{fetchBehavior:N,preResolve:j,logger:B}=k||{},{category:J="voicefocus",name:Q="default",variant:oe="auto",assetGroup:$=o,revisionID:he,simd:Ae="detect",executionPreference:Ee="auto",executionQuantaPreference:Oe,usagePreference:be="interactivity",estimatorBudget:De=100,paths:ut=h,thresholds:St}=M||{};if(B==null||B.debug("Configuring Voice Focus with spec",M),J!==void 0&&J!=="voicefocus")throw new Error(`Unrecognized category ${J}`);if(Q!==void 0&&Q!=="default"&&Q!=="ns_es")throw new Error(`Unrecognized feature name ${Q}`);if(oe!==void 0&&!["auto","c100","c50","c20","c10"].includes(oe))throw new Error(`Unrecognized feature variant ${oe}`);if(Oe!==void 0&&![1,2,3].includes(Oe))throw new Error(`Unrecognized execution quanta preference ${Oe}`);if(_($,he),Ae!==void 0&&!["detect","force","disable"].includes(Ae))throw new Error(`Unrecognized SIMD option ${Ae}`);if(Ee!==void 0&&!["auto","inline","worker","worker-sab","worker-postMessage"].includes(Ee))throw new Error(`Unrecognized execution preference ${Ee}`);if(be!==void 0&&!["quality","interactivity"].includes(be))throw new Error(`Unrecognized usage preference ${be}`);const Rt={executionPreference:this.mungeExecutionPreference(Ee,B),usagePreference:be,executionQuantaPreference:Oe,variantPreference:oe,namePreference:Q,simdPreference:Ae,estimatorBudget:De},Ze=he?{revisionID:he}:{assetGroup:$},mt=v.addQueryParams(N,Ze),At=Object.assign({paths:ut},mt),Vt=yield m.measureAndDecideExecutionApproach(Rt,At,B,St);if(Vt.supported===!1)return{supported:!1,reason:Vt.reason};B==null||B.info("Decided execution approach",Vt);const{useSIMD:dt,processor:Cn,variant:gt,executionQuanta:Ut}=Vt,en={category:J||"voicefocus",name:Q||"default",variant:gt,simd:dt};if(j){const sn=w(en,ut);en.url=yield v.resolveURL(sn,mt)}return{fetchConfig:At,model:en,processor:Cn,executionQuanta:Ut,supported:!0}})}static init(M,k){let{delegate:N,preload:j=!0,logger:B}=k;return u(this,void 0,void 0,function*(){if(M.supported===!1)throw new Error("Voice Focus not supported. Reason: "+M.reason);const{model:J,processor:Q,fetchConfig:oe,executionQuanta:$}=M,{simd:he,name:Ae}=J,{paths:Ee}=oe;if(Q!=="voicefocus-inline-processor"&&Q!=="voicefocus-worker-postMessage-processor"&&Q!=="voicefocus-worker-sab-processor")throw new Error(`Unknown processor ${Q}`);const Oe=J.url||w(J,Ee);B==null||B.debug(`Using model URL ${Oe}.`);const be=`${Ee.wasm}audio_buffer-v1${he?"_simd":""}.wasm`,De=`${Ee.wasm}resampler-v1${he?"_simd":""}.wasm`,ut=`${Ee.workers}worker-v1.js`,{file:St,node:Rt}=b[Q],Ze=`${Ee.processors}${St}`,mt=yield g.loadWorker(ut,"VoiceFocusWorker",oe,B);if(j){B==null||B.debug("Preloading",Oe);let Cn=s.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";mt.postMessage({message:Cn,preload:!0,key:"model",fetchBehavior:oe,path:Oe})}const Vt={processor:Q,worker:mt,audioBufferURL:be,resamplerURL:De,fetchBehavior:oe,modelURL:Oe,delegate:N,logger:B,numberOfInputs:Ae==="ns_es"?2:1},dt=new Mv(mt,Ze,Rt,Vt,$);return Promise.resolve(dt)})}createNode(M,k){var N;if(this.internal.isDestroyed)throw new Error("Unable to create node because VoiceFocus worker has been destroyed.");const{voiceFocusSampleRate:j=M.sampleRate===16e3?16e3:48e3,enabled:B=!0,agc:J=r}=k||{},Q=k==null?void 0:k.es,oe={voiceFocusSampleRate:j,enabled:B,sendBufferCount:10,prefill:6,agc:J,executionQuanta:this.executionQuanta,supportFarendStream:Q},$=v.withQueryString(this.processorURL,(N=this.nodeOptions)===null||N===void 0?void 0:N.fetchBehavior);return M.audioWorklet.addModule($).then(()=>new this.nodeConstructor(M,Object.assign(Object.assign({},this.nodeOptions),{processorOptions:oe})))}applyToStream(M,k,N){return u(this,void 0,void 0,function*(){if(this.internal.isDestroyed)throw new Error("Unable to apply stream because VoiceFocus worker has been destroyed");const j=k.createMediaStreamSource(M),B=yield this.applyToSourceNode(j,k,N),J=k.createMediaStreamDestination();return B.connect(J),{node:B,source:j,destination:J,stream:J.stream}})}applyToSourceNode(M,k,N){return u(this,void 0,void 0,function*(){const j=yield this.createNode(k,N);return M.connect(j),j})}destroy(){this.internal.worker&&this.internal.worker.terminate(),this.internal.isDestroyed=!0}constructor(M,k,N,j,B){this.processorURL=k,this.nodeConstructor=N,this.nodeOptions=j,this.executionQuanta=B,this.internal={worker:M,nodeOptions:j,isDestroyed:!1}}},"VoiceFocus");l.VoiceFocus=R;const O=n(function(){let I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p;return new(window.AudioContext||window.webkitAudioContext)(I)},"createAudioContext");l.createAudioContext=O;const D=n((I,M,k)=>u(void 0,void 0,void 0,function*(){var N,j;const{constraints:B,spec:J,delegate:Q,preload:oe=!0,options:$}=M,{logger:he}=k,Ae=yield R.configure(J,k);if(!Ae.supported)return(N=k.logger)===null||N===void 0||N.warn("Voice Focus not supported; returning standard stream."),window.navigator.mediaDevices.getUserMedia(B);const Ee=yield R.init(Ae,{delegate:Q,preload:oe,logger:he}),Oe=((j=M.options)===null||j===void 0?void 0:j.agc)||r,be=yield window.navigator.mediaDevices.getUserMedia(C(B,Oe));return Ee.applyToStream(be,I,$).then(De=>De.stream)}),"getAudioInput");l.getAudioInput=D},79783582:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const m=c(7984036634),v=c(6021562188),g=5*1e3;let s=n(class extends v.VoiceFocusAudioWorkletNode{onModuleBufferLoaded(i,e){this.port.postMessage({message:"module-buffer",buffer:i,key:e})}onModuleLoaded(i,e){this.port.postMessage({message:"module",module:i,key:e})}enable(){return u(this,void 0,void 0,function*(){this.port.postMessage({message:"enable"})})}disable(){return u(this,void 0,void 0,function*(){this.port.postMessage({message:"disable"})})}stop(){var i;return u(this,void 0,void 0,function*(){this.port.postMessage({message:"stop"});try{(i=this.worker)===null||i===void 0||i.terminate()}catch(e){console.error("failed to terminate worker:",e)}this.disconnect()})}onProcessorMessage(i){var e,t,r;const o=i.data;switch(o.message){case"cpu":this.cpuWarningCount++;const f=Date.now(),h=this.cpuWarningLastTriggered||f,p=Math.abs(f-h);(!this.cpuWarningLastTriggered||p>g)&&((e=this.logger)===null||e===void 0||e.warn(`CPU warning (count: ${this.cpuWarningCount}):`,o.message),this.cpuWarningCount=0,this.cpuWarningLastTriggered=f),(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;default:(r=this.logger)===null||r===void 0||r.debug("Ignoring processor message.")}}onWorkerMessage(i){const e=i.data;switch(e.message){case"module-buffer":if(!e.buffer||!e.key)return;this.onModuleBufferLoaded(e.buffer,e.key);break;case"module":if(!e.module||!e.key)return;this.onModuleLoaded(e.module,e.key);break;case"stopped":this.worker&&this.worker.terminate();break;default:return}}constructor(i,e){super(i,e.processor,e),this.cpuWarningCount=0,this.channelCountMode="explicit",this.channelCount=1;const{modelURL:t,worker:r,fetchBehavior:o,logger:f,delegate:h}=e;this.logger=f,this.port.onmessage=this.onProcessorMessage.bind(this),this.delegate=h,f&&f.debug("VoiceFocusInlineNode:",t),this.worker=r,this.worker.onmessage=this.onWorkerMessage.bind(this);const p=m.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:p,key:"model",fetchBehavior:o,path:t})}},"VoiceFocusInlineNode");l.default=s},641640331:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(s,a,i,e){function t(r){return r instanceof i?r:new i(function(o){o(r)})}return n(t,"adopt"),new(i||(i=Promise))(function(r,o){function f(d){try{p(e.next(d))}catch(y){o(y)}}n(f,"fulfilled");function h(d){try{p(e.throw(d))}catch(y){o(y)}}n(h,"rejected");function p(d){d.done?r(d.value):t(d.value).then(f,h)}n(p,"step"),p((e=e.apply(s,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const m=c(7984036634),v=c(6021562188);let g=n(class extends v.VoiceFocusAudioWorkletNode{enable(){return u(this,void 0,void 0,function*(){this.worker.postMessage({message:"enable"})})}disable(){return u(this,void 0,void 0,function*(){this.worker.postMessage({message:"disable"})})}stop(){return u(this,void 0,void 0,function*(){try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(a){var i;const e=a.data;switch(e.message){case"ready":this.port.postMessage({message:"ready",shared:e.shared},e.shared?Object.values(e.shared):[]);break;case"data":if(!e.buffer)return;this.port.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(e);break;case"cpu":(i=this.delegate)===null||i===void 0||i.onCPUWarning();break;case"processing":this.port.postMessage(e);break;default:return}}onProcessorMessage(a){var i;const e=a.data;switch(e.message){case"data":if(!e.buffer)return;this.worker.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"cpu":(i=this.delegate)===null||i===void 0||i.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(e);break;default:return}}constructor(a,i){super(a,i.processor,i),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:e,audioBufferURL:t,worker:r,fetchBehavior:o,delegate:f}=i;this.delegate=f,this.worker=r,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:h,agc:p,supportFarendStream:d}=i.processorOptions;this.worker.postMessage({message:"init",approach:"postMessage",frames:a.sampleRate===16e3?160:480,enabled:h,agc:p,fetchBehavior:o,model:e,supportFarendStream:d});const y=m.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:y,key:"buffer",fetchBehavior:o,path:t})}},"VoiceFocusWorkerPostMessageNode");l.default=g},161673934:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const m=c(7984036634),v=c(6021562188),g={ready:0,enabled:1},s={disabled:0,enabled:1,stopped:2};let a=n(class extends v.VoiceFocusAudioWorkletNode{enable(){return u(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,g.enabled,s.enabled),Atomics.notify(this.state,g.ready,1)):this.worker.postMessage({message:"enable"})})}disable(){return u(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,g.enabled,s.disabled),Atomics.notify(this.state,g.ready,1)):this.worker.postMessage({message:"disable"})})}stop(){return u(this,void 0,void 0,function*(){if(this.state)Atomics.store(this.state,g.enabled,s.stopped),Atomics.notify(this.state,g.ready,1);else try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(e){var t;const r=e.data;switch(r.message){case"ready":if(!r.shared)throw new Error("No shared state.");this.state=new Int32Array(r.shared.state),this.port.postMessage(r);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(r);break;case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"processing":this.port.postMessage(r);break;default:return}}onProcessorMessage(e){var t;const r=e.data;switch(r.message){case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(r);break;default:}}constructor(e,t){super(e,t.processor,t),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:r,resamplerURL:o,worker:f,fetchBehavior:h,delegate:p}=t;this.delegate=p,this.worker=f,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:d,supportFarendStream:y}=t.processorOptions;this.worker.postMessage({message:"init",approach:"sab",frames:e.sampleRate===16e3?160:480,enabled:d,model:r,supportFarendStream:y});const S=m.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:S,key:"resampler",fetchBehavior:h,path:o})}},"VoiceFocusWorkerBufferNode");l.default=a},4499531780:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.RawSha256=void 0;var u=c(8411923784),m=function(){function v(){this.state=Int32Array.from(u.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return n(v,"RawSha2561"),v.prototype.update=function(g){if(this.finished)throw new Error("Attempted to update an already finished hash.");var s=0,a=g.byteLength;if(this.bytesHashed+=a,this.bytesHashed*8>u.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;a>0;)this.buffer[this.bufferLength++]=g[s++],a--,this.bufferLength===u.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},v.prototype.digest=function(){if(!this.finished){var g=this.bytesHashed*8,s=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),a=this.bufferLength;if(s.setUint8(this.bufferLength++,128),a%u.BLOCK_SIZE>=u.BLOCK_SIZE-8){for(var i=this.bufferLength;i<u.BLOCK_SIZE;i++)s.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<u.BLOCK_SIZE-8;i++)s.setUint8(i,0);s.setUint32(u.BLOCK_SIZE-8,Math.floor(g/4294967296),!0),s.setUint32(u.BLOCK_SIZE-4,g),this.hashBuffer(),this.finished=!0}for(var e=new Uint8Array(u.DIGEST_LENGTH),i=0;i<8;i++)e[i*4]=this.state[i]>>>24&255,e[i*4+1]=this.state[i]>>>16&255,e[i*4+2]=this.state[i]>>>8&255,e[i*4+3]=this.state[i]>>>0&255;return e},v.prototype.hashBuffer=function(){for(var g=this,s=g.buffer,a=g.state,i=a[0],e=a[1],t=a[2],r=a[3],o=a[4],f=a[5],h=a[6],p=a[7],d=0;d<u.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(s[d*4]&255)<<24|(s[d*4+1]&255)<<16|(s[d*4+2]&255)<<8|s[d*4+3]&255;else{var y=this.temp[d-2],S=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10;y=this.temp[d-15];var b=(y>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;this.temp[d]=(S+this.temp[d-7]|0)+(b+this.temp[d-16]|0)}var _=(((o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+(o&f^~o&h)|0)+(p+(u.KEY[d]+this.temp[d]|0)|0)|0,C=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&e^i&t^e&t)|0;p=h,h=f,f=o,o=r+_|0,r=t,t=e,e=i,i=_+C|0}a[0]+=i,a[1]+=e,a[2]+=t,a[3]+=r,a[4]+=o,a[5]+=f,a[6]+=h,a[7]+=p},v}();l.RawSha256=m},8411923784:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MAX_HASHABLE_LENGTH=l.INIT=l.KEY=l.DIGEST_LENGTH=l.BLOCK_SIZE=void 0,l.BLOCK_SIZE=64,l.DIGEST_LENGTH=32,l.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],l.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},7288346005:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var u=c(8842724253);u.__exportStar(c(9337996847),l)},9337996847:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var u=c(8842724253),m=c(8411923784),v=c(4499531780),g=c(7626896220),s=function(){function i(e){if(this.hash=new v.RawSha256,e){this.outer=new v.RawSha256;var t=a(e),r=new Uint8Array(m.BLOCK_SIZE);r.set(t);for(var o=0;o<m.BLOCK_SIZE;o++)t[o]^=54,r[o]^=92;this.hash.update(t),this.outer.update(r);for(var o=0;o<t.byteLength;o++)t[o]=0}}return n(i,"Sha2561"),i.prototype.update=function(e){if(!((0,g.isEmptyData)(e)||this.error))try{this.hash.update((0,g.convertToBuffer)(e))}catch(t){this.error=t}},i.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},i.prototype.digest=function(){return u.__awaiter(this,void 0,void 0,function(){return u.__generator(this,function(e){return[2,this.digestSync()]})})},i}();l.Sha256=s;function a(i){var e=(0,g.convertToBuffer)(i);if(e.byteLength>m.BLOCK_SIZE){var t=new v.RawSha256;t.update(e),e=t.digest()}var r=new Uint8Array(m.BLOCK_SIZE);return r.set(e),r}n(a,"bufferFromSecret")},271264648:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertToBuffer=void 0;var u=c(2412280125),m=typeof Buffer<"u"&&Buffer.from?function(g){return Buffer.from(g,"utf8")}:u.fromUtf8;function v(g){return g instanceof Uint8Array?g:typeof g=="string"?m(g):ArrayBuffer.isView(g)?new Uint8Array(g.buffer,g.byteOffset,g.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(g)}n(v,"convertToBuffer"),l.convertToBuffer=v},7626896220:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=l.numToUint8=l.isEmptyData=l.convertToBuffer=void 0;var u=c(271264648);Object.defineProperty(l,"convertToBuffer",{enumerable:!0,get:function(){return u.convertToBuffer}});var m=c(8695908309);Object.defineProperty(l,"isEmptyData",{enumerable:!0,get:function(){return m.isEmptyData}});var v=c(3332263431);Object.defineProperty(l,"numToUint8",{enumerable:!0,get:function(){return v.numToUint8}});var g=c(5480401346);Object.defineProperty(l,"uint32ArrayFrom",{enumerable:!0,get:function(){return g.uint32ArrayFrom}})},8695908309:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isEmptyData=void 0;function c(u){return typeof u=="string"?u.length===0:u.byteLength===0}n(c,"isEmptyData"),l.isEmptyData=c},3332263431:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.numToUint8=void 0;function c(u){return new Uint8Array([(u&4278190080)>>24,(u&16711680)>>16,(u&65280)>>8,u&255])}n(c,"numToUint8"),l.numToUint8=c},5480401346:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=void 0;function c(u){if(!Uint32Array.from){for(var m=new Uint32Array(u.length),v=0;v<u.length;)m[v]=u[v],v+=1;return m}return Uint32Array.from(u)}n(c,"uint32ArrayFrom"),l.uint32ArrayFrom=c},1668212732:(H,l,c)=>{"use strict";c.r(l),c.d(l,{fromHex:()=>v,toHex:()=>g});const u={},m={};for(let s=0;s<256;s++){let a=s.toString(16).toLowerCase();a.length===1&&(a=`0${a}`),u[s]=a,m[a]=s}function v(s){if(s.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const a=new Uint8Array(s.length/2);for(let i=0;i<s.length;i+=2){const e=s.slice(i,i+2).toLowerCase();if(e in m)a[i/2]=m[e];else throw new Error(`Cannot decode unrecognized sequence ${e} as hexadecimal`)}return a}n(v,"fromHex");function g(s){let a="";for(let i=0;i<s.byteLength;i++)a+=u[s[i]];return a}n(g,"toHex")},9385915920:(H,l,c)=>{"use strict";const{Deflate:u,deflate:m,deflateRaw:v,gzip:g}=c(5602788515),{Inflate:s,inflate:a,inflateRaw:i,ungzip:e}=c(6716562227),t=c(7496116979);H.exports.Deflate=u,H.exports.deflate=m,H.exports.deflateRaw=v,H.exports.gzip=g,H.exports.Inflate=s,H.exports.inflate=a,H.exports.inflateRaw=i,H.exports.ungzip=e,H.exports.constants=t},5602788515:(H,l,c)=>{"use strict";const u=c(872668561),m=c(4109671863),v=c(931830944),g=c(3435039830),s=c(8713386032),a=Object.prototype.toString,{Z_NO_FLUSH:i,Z_SYNC_FLUSH:e,Z_FULL_FLUSH:t,Z_FINISH:r,Z_OK:o,Z_STREAM_END:f,Z_DEFAULT_COMPRESSION:h,Z_DEFAULT_STRATEGY:p,Z_DEFLATED:d}=c(7496116979);function y(C){this.options=m.assign({level:h,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:p},C||{});let w=this.options;w.raw&&w.windowBits>0?w.windowBits=-w.windowBits:w.gzip&&w.windowBits>0&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;let R=u.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(R!==o)throw new Error(g[R]);if(w.header&&u.deflateSetHeader(this.strm,w.header),w.dictionary){let O;if(typeof w.dictionary=="string"?O=v.string2buf(w.dictionary):a.call(w.dictionary)==="[object ArrayBuffer]"?O=new Uint8Array(w.dictionary):O=w.dictionary,R=u.deflateSetDictionary(this.strm,O),R!==o)throw new Error(g[R]);this._dict_set=!0}}n(y,"Deflate"),y.prototype.push=function(C,w){const R=this.strm,O=this.options.chunkSize;let D,I;if(this.ended)return!1;for(w===~~w?I=w:I=w===!0?r:i,typeof C=="string"?R.input=v.string2buf(C):a.call(C)==="[object ArrayBuffer]"?R.input=new Uint8Array(C):R.input=C,R.next_in=0,R.avail_in=R.input.length;;){if(R.avail_out===0&&(R.output=new Uint8Array(O),R.next_out=0,R.avail_out=O),(I===e||I===t)&&R.avail_out<=6){this.onData(R.output.subarray(0,R.next_out)),R.avail_out=0;continue}if(D=u.deflate(R,I),D===f)return R.next_out>0&&this.onData(R.output.subarray(0,R.next_out)),D=u.deflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===o;if(R.avail_out===0){this.onData(R.output);continue}if(I>0&&R.next_out>0){this.onData(R.output.subarray(0,R.next_out)),R.avail_out=0;continue}if(R.avail_in===0)break}return!0},y.prototype.onData=function(C){this.chunks.push(C)},y.prototype.onEnd=function(C){C===o&&(this.result=m.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg};function S(C,w){const R=new y(w);if(R.push(C,!0),R.err)throw R.msg||g[R.err];return R.result}n(S,"deflate");function b(C,w){return w=w||{},w.raw=!0,S(C,w)}n(b,"deflateRaw");function _(C,w){return w=w||{},w.gzip=!0,S(C,w)}n(_,"gzip"),H.exports.Deflate=y,H.exports.deflate=S,H.exports.deflateRaw=b,H.exports.gzip=_,H.exports.constants=c(7496116979)},6716562227:(H,l,c)=>{"use strict";const u=c(4532140493),m=c(4109671863),v=c(931830944),g=c(3435039830),s=c(8713386032),a=c(5341695802),i=Object.prototype.toString,{Z_NO_FLUSH:e,Z_FINISH:t,Z_OK:r,Z_STREAM_END:o,Z_NEED_DICT:f,Z_STREAM_ERROR:h,Z_DATA_ERROR:p,Z_MEM_ERROR:d}=c(7496116979);function y(_){this.options=m.assign({chunkSize:1024*64,windowBits:15,to:""},_||{});const C=this.options;C.raw&&C.windowBits>=0&&C.windowBits<16&&(C.windowBits=-C.windowBits,C.windowBits===0&&(C.windowBits=-15)),C.windowBits>=0&&C.windowBits<16&&!(_&&_.windowBits)&&(C.windowBits+=32),C.windowBits>15&&C.windowBits<48&&(C.windowBits&15||(C.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;let w=u.inflateInit2(this.strm,C.windowBits);if(w!==r)throw new Error(g[w]);if(this.header=new a,u.inflateGetHeader(this.strm,this.header),C.dictionary&&(typeof C.dictionary=="string"?C.dictionary=v.string2buf(C.dictionary):i.call(C.dictionary)==="[object ArrayBuffer]"&&(C.dictionary=new Uint8Array(C.dictionary)),C.raw&&(w=u.inflateSetDictionary(this.strm,C.dictionary),w!==r)))throw new Error(g[w])}n(y,"Inflate"),y.prototype.push=function(_,C){const w=this.strm,R=this.options.chunkSize,O=this.options.dictionary;let D,I,M;if(this.ended)return!1;for(C===~~C?I=C:I=C===!0?t:e,i.call(_)==="[object ArrayBuffer]"?w.input=new Uint8Array(_):w.input=_,w.next_in=0,w.avail_in=w.input.length;;){for(w.avail_out===0&&(w.output=new Uint8Array(R),w.next_out=0,w.avail_out=R),D=u.inflate(w,I),D===f&&O&&(D=u.inflateSetDictionary(w,O),D===r?D=u.inflate(w,I):D===p&&(D=f));w.avail_in>0&&D===o&&w.state.wrap>0&&_[w.next_in]!==0;)u.inflateReset(w),D=u.inflate(w,I);switch(D){case h:case p:case f:case d:return this.onEnd(D),this.ended=!0,!1}if(M=w.avail_out,w.next_out&&(w.avail_out===0||D===o))if(this.options.to==="string"){let k=v.utf8border(w.output,w.next_out),N=w.next_out-k,j=v.buf2string(w.output,k);w.next_out=N,w.avail_out=R-N,N&&w.output.set(w.output.subarray(k,k+N),0),this.onData(j)}else this.onData(w.output.length===w.next_out?w.output:w.output.subarray(0,w.next_out));if(!(D===r&&M===0)){if(D===o)return D=u.inflateEnd(this.strm),this.onEnd(D),this.ended=!0,!0;if(w.avail_in===0)break}}return!0},y.prototype.onData=function(_){this.chunks.push(_)},y.prototype.onEnd=function(_){_===r&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=m.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg};function S(_,C){const w=new y(C);if(w.push(_),w.err)throw w.msg||g[w.err];return w.result}n(S,"inflate");function b(_,C){return C=C||{},C.raw=!0,S(_,C)}n(b,"inflateRaw"),H.exports.Inflate=y,H.exports.inflate=S,H.exports.inflateRaw=b,H.exports.ungzip=S,H.exports.constants=c(7496116979)},4109671863:H=>{"use strict";const l=n((c,u)=>Object.prototype.hasOwnProperty.call(c,u),"_has");H.exports.assign=function(c){const u=Array.prototype.slice.call(arguments,1);for(;u.length;){const m=u.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(const v in m)l(m,v)&&(c[v]=m[v])}}return c},H.exports.flattenChunks=c=>{let u=0;for(let v=0,g=c.length;v<g;v++)u+=c[v].length;const m=new Uint8Array(u);for(let v=0,g=0,s=c.length;v<s;v++){let a=c[v];m.set(a,g),g+=a.length}return m}},931830944:H=>{"use strict";let l=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}const c=new Uint8Array(256);for(let m=0;m<256;m++)c[m]=m>=252?6:m>=248?5:m>=240?4:m>=224?3:m>=192?2:1;c[254]=c[254]=1,H.exports.string2buf=m=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(m);let v,g,s,a,i,e=m.length,t=0;for(a=0;a<e;a++)g=m.charCodeAt(a),(g&64512)===55296&&a+1<e&&(s=m.charCodeAt(a+1),(s&64512)===56320&&(g=65536+(g-55296<<10)+(s-56320),a++)),t+=g<128?1:g<2048?2:g<65536?3:4;for(v=new Uint8Array(t),i=0,a=0;i<t;a++)g=m.charCodeAt(a),(g&64512)===55296&&a+1<e&&(s=m.charCodeAt(a+1),(s&64512)===56320&&(g=65536+(g-55296<<10)+(s-56320),a++)),g<128?v[i++]=g:g<2048?(v[i++]=192|g>>>6,v[i++]=128|g&63):g<65536?(v[i++]=224|g>>>12,v[i++]=128|g>>>6&63,v[i++]=128|g&63):(v[i++]=240|g>>>18,v[i++]=128|g>>>12&63,v[i++]=128|g>>>6&63,v[i++]=128|g&63);return v};const u=n((m,v)=>{if(v<65534&&m.subarray&&l)return String.fromCharCode.apply(null,m.length===v?m:m.subarray(0,v));let g="";for(let s=0;s<v;s++)g+=String.fromCharCode(m[s]);return g},"buf2binstring");H.exports.buf2string=(m,v)=>{const g=v||m.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(m.subarray(0,v));let s,a;const i=new Array(g*2);for(a=0,s=0;s<g;){let e=m[s++];if(e<128){i[a++]=e;continue}let t=c[e];if(t>4){i[a++]=65533,s+=t-1;continue}for(e&=t===2?31:t===3?15:7;t>1&&s<g;)e=e<<6|m[s++]&63,t--;if(t>1){i[a++]=65533;continue}e<65536?i[a++]=e:(e-=65536,i[a++]=55296|e>>10&1023,i[a++]=56320|e&1023)}return u(i,a)},H.exports.utf8border=(m,v)=>{v=v||m.length,v>m.length&&(v=m.length);let g=v-1;for(;g>=0&&(m[g]&192)===128;)g--;return g<0||g===0?v:g+c[m[g]]>v?g:v}},7775889903:H=>{"use strict";const l=n((c,u,m,v)=>{let g=c&65535|0,s=c>>>16&65535|0,a=0;for(;m!==0;){a=m>2e3?2e3:m,m-=a;do g=g+u[v++]|0,s=s+g|0;while(--a);g%=65521,s%=65521}return g|s<<16|0},"adler32");H.exports=l},7496116979:H=>{"use strict";H.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},9538018229:H=>{"use strict";const l=n(()=>{let m,v=[];for(var g=0;g<256;g++){m=g;for(var s=0;s<8;s++)m=m&1?3988292384^m>>>1:m>>>1;v[g]=m}return v},"makeTable"),c=new Uint32Array(l()),u=n((m,v,g,s)=>{const a=c,i=s+g;m^=-1;for(let e=s;e<i;e++)m=m>>>8^a[(m^v[e])&255];return m^-1},"crc32");H.exports=u},872668561:(H,l,c)=>{"use strict";const{_tr_init:u,_tr_stored_block:m,_tr_flush_block:v,_tr_tally:g,_tr_align:s}=c(8891166839),a=c(7775889903),i=c(9538018229),e=c(3435039830),{Z_NO_FLUSH:t,Z_PARTIAL_FLUSH:r,Z_FULL_FLUSH:o,Z_FINISH:f,Z_BLOCK:h,Z_OK:p,Z_STREAM_END:d,Z_STREAM_ERROR:y,Z_DATA_ERROR:S,Z_BUF_ERROR:b,Z_DEFAULT_COMPRESSION:_,Z_FILTERED:C,Z_HUFFMAN_ONLY:w,Z_RLE:R,Z_FIXED:O,Z_DEFAULT_STRATEGY:D,Z_UNKNOWN:I,Z_DEFLATED:M}=c(7496116979),k=9,N=15,j=8,B=29,Q=256+1+B,oe=30,$=19,he=2*Q+1,Ae=15,Ee=3,Oe=258,be=Oe+Ee+1,De=32,ut=42,St=69,Rt=73,Ze=91,mt=103,At=113,Vt=666,dt=1,Cn=2,gt=3,Ut=4,en=3,sn=n((x,Ye)=>(x.msg=e[Ye],Ye),"err"),$t=n(x=>(x<<1)-(x>4?9:0),"rank"),Rn=n(x=>{let Ye=x.length;for(;--Ye>=0;)x[Ye]=0},"zero");let ii=n((x,Ye,it)=>(Ye<<x.hash_shift^it)&x.hash_mask,"HASH_ZLIB");const Kn=n(x=>{const Ye=x.state;let it=Ye.pending;it>x.avail_out&&(it=x.avail_out),it!==0&&(x.output.set(Ye.pending_buf.subarray(Ye.pending_out,Ye.pending_out+it),x.next_out),x.next_out+=it,Ye.pending_out+=it,x.total_out+=it,x.avail_out-=it,Ye.pending-=it,Ye.pending===0&&(Ye.pending_out=0))},"flush_pending"),hi=n((x,Ye)=>{v(x,x.block_start>=0?x.block_start:-1,x.strstart-x.block_start,Ye),x.block_start=x.strstart,Kn(x.strm)},"flush_block_only"),Ln=n((x,Ye)=>{x.pending_buf[x.pending++]=Ye},"put_byte"),Hn=n((x,Ye)=>{x.pending_buf[x.pending++]=Ye>>>8&255,x.pending_buf[x.pending++]=Ye&255},"putShortMSB"),ui=n((x,Ye,it,ft)=>{let ge=x.avail_in;return ge>ft&&(ge=ft),ge===0?0:(x.avail_in-=ge,Ye.set(x.input.subarray(x.next_in,x.next_in+ge),it),x.state.wrap===1?x.adler=a(x.adler,Ye,ge,it):x.state.wrap===2&&(x.adler=i(x.adler,Ye,ge,it)),x.next_in+=ge,x.total_in+=ge,ge)},"read_buf"),jn=n((x,Ye)=>{let it=x.max_chain_length,ft=x.strstart,ge,Zn,Xt=x.prev_length,pn=x.nice_match;const Bi=x.strstart>x.w_size-be?x.strstart-(x.w_size-be):0,Gn=x.window,yo=x.w_mask,no=x.prev,Vi=x.strstart+Oe;let or=Gn[ft+Xt-1],ki=Gn[ft+Xt];x.prev_length>=x.good_match&&(it>>=2),pn>x.lookahead&&(pn=x.lookahead);do if(ge=Ye,!(Gn[ge+Xt]!==ki||Gn[ge+Xt-1]!==or||Gn[ge]!==Gn[ft]||Gn[++ge]!==Gn[ft+1])){ft+=2,ge++;do;while(Gn[++ft]===Gn[++ge]&&Gn[++ft]===Gn[++ge]&&Gn[++ft]===Gn[++ge]&&Gn[++ft]===Gn[++ge]&&Gn[++ft]===Gn[++ge]&&Gn[++ft]===Gn[++ge]&&Gn[++ft]===Gn[++ge]&&Gn[++ft]===Gn[++ge]&&ft<Vi);if(Zn=Oe-(Vi-ft),ft=Vi-Oe,Zn>Xt){if(x.match_start=Ye,Xt=Zn,Zn>=pn)break;or=Gn[ft+Xt-1],ki=Gn[ft+Xt]}}while((Ye=no[Ye&yo])>Bi&&--it!==0);return Xt<=x.lookahead?Xt:x.lookahead},"longest_match"),ri=n(x=>{const Ye=x.w_size;let it,ft,ge,Zn,Xt;do{if(Zn=x.window_size-x.lookahead-x.strstart,x.strstart>=Ye+(Ye-be)){x.window.set(x.window.subarray(Ye,Ye+Ye),0),x.match_start-=Ye,x.strstart-=Ye,x.block_start-=Ye,ft=x.hash_size,it=ft;do ge=x.head[--it],x.head[it]=ge>=Ye?ge-Ye:0;while(--ft);ft=Ye,it=ft;do ge=x.prev[--it],x.prev[it]=ge>=Ye?ge-Ye:0;while(--ft);Zn+=Ye}if(x.strm.avail_in===0)break;if(ft=ui(x.strm,x.window,x.strstart+x.lookahead,Zn),x.lookahead+=ft,x.lookahead+x.insert>=Ee)for(Xt=x.strstart-x.insert,x.ins_h=x.window[Xt],x.ins_h=ii(x,x.ins_h,x.window[Xt+1]);x.insert&&(x.ins_h=ii(x,x.ins_h,x.window[Xt+Ee-1]),x.prev[Xt&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=Xt,Xt++,x.insert--,!(x.lookahead+x.insert<Ee)););}while(x.lookahead<be&&x.strm.avail_in!==0)},"fill_window"),ie=n((x,Ye)=>{let it=65535;for(it>x.pending_buf_size-5&&(it=x.pending_buf_size-5);;){if(x.lookahead<=1){if(ri(x),x.lookahead===0&&Ye===t)return dt;if(x.lookahead===0)break}x.strstart+=x.lookahead,x.lookahead=0;const ft=x.block_start+it;if((x.strstart===0||x.strstart>=ft)&&(x.lookahead=x.strstart-ft,x.strstart=ft,hi(x,!1),x.strm.avail_out===0)||x.strstart-x.block_start>=x.w_size-be&&(hi(x,!1),x.strm.avail_out===0))return dt}return x.insert=0,Ye===f?(hi(x,!0),x.strm.avail_out===0?gt:Ut):(x.strstart>x.block_start&&(hi(x,!1),x.strm.avail_out===0),dt)},"deflate_stored"),Mt=n((x,Ye)=>{let it,ft;for(;;){if(x.lookahead<be){if(ri(x),x.lookahead<be&&Ye===t)return dt;if(x.lookahead===0)break}if(it=0,x.lookahead>=Ee&&(x.ins_h=ii(x,x.ins_h,x.window[x.strstart+Ee-1]),it=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),it!==0&&x.strstart-it<=x.w_size-be&&(x.match_length=jn(x,it)),x.match_length>=Ee)if(ft=g(x,x.strstart-x.match_start,x.match_length-Ee),x.lookahead-=x.match_length,x.match_length<=x.max_lazy_match&&x.lookahead>=Ee){x.match_length--;do x.strstart++,x.ins_h=ii(x,x.ins_h,x.window[x.strstart+Ee-1]),it=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart;while(--x.match_length!==0);x.strstart++}else x.strstart+=x.match_length,x.match_length=0,x.ins_h=x.window[x.strstart],x.ins_h=ii(x,x.ins_h,x.window[x.strstart+1]);else ft=g(x,0,x.window[x.strstart]),x.lookahead--,x.strstart++;if(ft&&(hi(x,!1),x.strm.avail_out===0))return dt}return x.insert=x.strstart<Ee-1?x.strstart:Ee-1,Ye===f?(hi(x,!0),x.strm.avail_out===0?gt:Ut):x.last_lit&&(hi(x,!1),x.strm.avail_out===0)?dt:Cn},"deflate_fast"),Ot=n((x,Ye)=>{let it,ft,ge;for(;;){if(x.lookahead<be){if(ri(x),x.lookahead<be&&Ye===t)return dt;if(x.lookahead===0)break}if(it=0,x.lookahead>=Ee&&(x.ins_h=ii(x,x.ins_h,x.window[x.strstart+Ee-1]),it=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),x.prev_length=x.match_length,x.prev_match=x.match_start,x.match_length=Ee-1,it!==0&&x.prev_length<x.max_lazy_match&&x.strstart-it<=x.w_size-be&&(x.match_length=jn(x,it),x.match_length<=5&&(x.strategy===C||x.match_length===Ee&&x.strstart-x.match_start>4096)&&(x.match_length=Ee-1)),x.prev_length>=Ee&&x.match_length<=x.prev_length){ge=x.strstart+x.lookahead-Ee,ft=g(x,x.strstart-1-x.prev_match,x.prev_length-Ee),x.lookahead-=x.prev_length-1,x.prev_length-=2;do++x.strstart<=ge&&(x.ins_h=ii(x,x.ins_h,x.window[x.strstart+Ee-1]),it=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart);while(--x.prev_length!==0);if(x.match_available=0,x.match_length=Ee-1,x.strstart++,ft&&(hi(x,!1),x.strm.avail_out===0))return dt}else if(x.match_available){if(ft=g(x,0,x.window[x.strstart-1]),ft&&hi(x,!1),x.strstart++,x.lookahead--,x.strm.avail_out===0)return dt}else x.match_available=1,x.strstart++,x.lookahead--}return x.match_available&&(ft=g(x,0,x.window[x.strstart-1]),x.match_available=0),x.insert=x.strstart<Ee-1?x.strstart:Ee-1,Ye===f?(hi(x,!0),x.strm.avail_out===0?gt:Ut):x.last_lit&&(hi(x,!1),x.strm.avail_out===0)?dt:Cn},"deflate_slow"),Ht=n((x,Ye)=>{let it,ft,ge,Zn;const Xt=x.window;for(;;){if(x.lookahead<=Oe){if(ri(x),x.lookahead<=Oe&&Ye===t)return dt;if(x.lookahead===0)break}if(x.match_length=0,x.lookahead>=Ee&&x.strstart>0&&(ge=x.strstart-1,ft=Xt[ge],ft===Xt[++ge]&&ft===Xt[++ge]&&ft===Xt[++ge])){Zn=x.strstart+Oe;do;while(ft===Xt[++ge]&&ft===Xt[++ge]&&ft===Xt[++ge]&&ft===Xt[++ge]&&ft===Xt[++ge]&&ft===Xt[++ge]&&ft===Xt[++ge]&&ft===Xt[++ge]&&ge<Zn);x.match_length=Oe-(Zn-ge),x.match_length>x.lookahead&&(x.match_length=x.lookahead)}if(x.match_length>=Ee?(it=g(x,1,x.match_length-Ee),x.lookahead-=x.match_length,x.strstart+=x.match_length,x.match_length=0):(it=g(x,0,x.window[x.strstart]),x.lookahead--,x.strstart++),it&&(hi(x,!1),x.strm.avail_out===0))return dt}return x.insert=0,Ye===f?(hi(x,!0),x.strm.avail_out===0?gt:Ut):x.last_lit&&(hi(x,!1),x.strm.avail_out===0)?dt:Cn},"deflate_rle"),hn=n((x,Ye)=>{let it;for(;;){if(x.lookahead===0&&(ri(x),x.lookahead===0)){if(Ye===t)return dt;break}if(x.match_length=0,it=g(x,0,x.window[x.strstart]),x.lookahead--,x.strstart++,it&&(hi(x,!1),x.strm.avail_out===0))return dt}return x.insert=0,Ye===f?(hi(x,!0),x.strm.avail_out===0?gt:Ut):x.last_lit&&(hi(x,!1),x.strm.avail_out===0)?dt:Cn},"deflate_huff");function tn(x,Ye,it,ft,ge){this.good_length=x,this.max_lazy=Ye,this.nice_length=it,this.max_chain=ft,this.func=ge}n(tn,"Config");const xe=[new tn(0,0,0,0,ie),new tn(4,4,8,4,Mt),new tn(4,5,16,8,Mt),new tn(4,6,32,32,Mt),new tn(4,4,16,16,Ot),new tn(8,16,32,32,Ot),new tn(8,16,128,128,Ot),new tn(8,32,128,256,Ot),new tn(32,128,258,1024,Ot),new tn(32,258,258,4096,Ot)],Dt=n(x=>{x.window_size=2*x.w_size,Rn(x.head),x.max_lazy_match=xe[x.level].max_lazy,x.good_match=xe[x.level].good_length,x.nice_match=xe[x.level].nice_length,x.max_chain_length=xe[x.level].max_chain,x.strstart=0,x.block_start=0,x.lookahead=0,x.insert=0,x.match_length=x.prev_length=Ee-1,x.match_available=0,x.ins_h=0},"lm_init");function Y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=M,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(he*2),this.dyn_dtree=new Uint16Array((2*oe+1)*2),this.bl_tree=new Uint16Array((2*$+1)*2),Rn(this.dyn_ltree),Rn(this.dyn_dtree),Rn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Ae+1),this.heap=new Uint16Array(2*Q+1),Rn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Q+1),Rn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}n(Y,"DeflateState");const fe=n(x=>{if(!x||!x.state)return sn(x,y);x.total_in=x.total_out=0,x.data_type=I;const Ye=x.state;return Ye.pending=0,Ye.pending_out=0,Ye.wrap<0&&(Ye.wrap=-Ye.wrap),Ye.status=Ye.wrap?ut:At,x.adler=Ye.wrap===2?0:1,Ye.last_flush=t,u(Ye),p},"deflateResetKeep"),et=n(x=>{const Ye=fe(x);return Ye===p&&Dt(x.state),Ye},"deflateReset"),nt=n((x,Ye)=>!x||!x.state||x.state.wrap!==2?y:(x.state.gzhead=Ye,p),"deflateSetHeader"),nn=n((x,Ye,it,ft,ge,Zn)=>{if(!x)return y;let Xt=1;if(Ye===_&&(Ye=6),ft<0?(Xt=0,ft=-ft):ft>15&&(Xt=2,ft-=16),ge<1||ge>k||it!==M||ft<8||ft>15||Ye<0||Ye>9||Zn<0||Zn>O)return sn(x,y);ft===8&&(ft=9);const pn=new Y;return x.state=pn,pn.strm=x,pn.wrap=Xt,pn.gzhead=null,pn.w_bits=ft,pn.w_size=1<<pn.w_bits,pn.w_mask=pn.w_size-1,pn.hash_bits=ge+7,pn.hash_size=1<<pn.hash_bits,pn.hash_mask=pn.hash_size-1,pn.hash_shift=~~((pn.hash_bits+Ee-1)/Ee),pn.window=new Uint8Array(pn.w_size*2),pn.head=new Uint16Array(pn.hash_size),pn.prev=new Uint16Array(pn.w_size),pn.lit_bufsize=1<<ge+6,pn.pending_buf_size=pn.lit_bufsize*4,pn.pending_buf=new Uint8Array(pn.pending_buf_size),pn.d_buf=1*pn.lit_bufsize,pn.l_buf=(1+2)*pn.lit_bufsize,pn.level=Ye,pn.strategy=Zn,pn.method=it,et(x)},"deflateInit2"),kt=n((x,Ye)=>nn(x,Ye,M,N,j,D),"deflateInit"),Jt=n((x,Ye)=>{let it,ft;if(!x||!x.state||Ye>h||Ye<0)return x?sn(x,y):y;const ge=x.state;if(!x.output||!x.input&&x.avail_in!==0||ge.status===Vt&&Ye!==f)return sn(x,x.avail_out===0?b:y);ge.strm=x;const Zn=ge.last_flush;if(ge.last_flush=Ye,ge.status===ut)if(ge.wrap===2)x.adler=0,Ln(ge,31),Ln(ge,139),Ln(ge,8),ge.gzhead?(Ln(ge,(ge.gzhead.text?1:0)+(ge.gzhead.hcrc?2:0)+(ge.gzhead.extra?4:0)+(ge.gzhead.name?8:0)+(ge.gzhead.comment?16:0)),Ln(ge,ge.gzhead.time&255),Ln(ge,ge.gzhead.time>>8&255),Ln(ge,ge.gzhead.time>>16&255),Ln(ge,ge.gzhead.time>>24&255),Ln(ge,ge.level===9?2:ge.strategy>=w||ge.level<2?4:0),Ln(ge,ge.gzhead.os&255),ge.gzhead.extra&&ge.gzhead.extra.length&&(Ln(ge,ge.gzhead.extra.length&255),Ln(ge,ge.gzhead.extra.length>>8&255)),ge.gzhead.hcrc&&(x.adler=i(x.adler,ge.pending_buf,ge.pending,0)),ge.gzindex=0,ge.status=St):(Ln(ge,0),Ln(ge,0),Ln(ge,0),Ln(ge,0),Ln(ge,0),Ln(ge,ge.level===9?2:ge.strategy>=w||ge.level<2?4:0),Ln(ge,en),ge.status=At);else{let Xt=M+(ge.w_bits-8<<4)<<8,pn=-1;ge.strategy>=w||ge.level<2?pn=0:ge.level<6?pn=1:ge.level===6?pn=2:pn=3,Xt|=pn<<6,ge.strstart!==0&&(Xt|=De),Xt+=31-Xt%31,ge.status=At,Hn(ge,Xt),ge.strstart!==0&&(Hn(ge,x.adler>>>16),Hn(ge,x.adler&65535)),x.adler=1}if(ge.status===St)if(ge.gzhead.extra){for(it=ge.pending;ge.gzindex<(ge.gzhead.extra.length&65535)&&!(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>it&&(x.adler=i(x.adler,ge.pending_buf,ge.pending-it,it)),Kn(x),it=ge.pending,ge.pending===ge.pending_buf_size));)Ln(ge,ge.gzhead.extra[ge.gzindex]&255),ge.gzindex++;ge.gzhead.hcrc&&ge.pending>it&&(x.adler=i(x.adler,ge.pending_buf,ge.pending-it,it)),ge.gzindex===ge.gzhead.extra.length&&(ge.gzindex=0,ge.status=Rt)}else ge.status=Rt;if(ge.status===Rt)if(ge.gzhead.name){it=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>it&&(x.adler=i(x.adler,ge.pending_buf,ge.pending-it,it)),Kn(x),it=ge.pending,ge.pending===ge.pending_buf_size)){ft=1;break}ge.gzindex<ge.gzhead.name.length?ft=ge.gzhead.name.charCodeAt(ge.gzindex++)&255:ft=0,Ln(ge,ft)}while(ft!==0);ge.gzhead.hcrc&&ge.pending>it&&(x.adler=i(x.adler,ge.pending_buf,ge.pending-it,it)),ft===0&&(ge.gzindex=0,ge.status=Ze)}else ge.status=Ze;if(ge.status===Ze)if(ge.gzhead.comment){it=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>it&&(x.adler=i(x.adler,ge.pending_buf,ge.pending-it,it)),Kn(x),it=ge.pending,ge.pending===ge.pending_buf_size)){ft=1;break}ge.gzindex<ge.gzhead.comment.length?ft=ge.gzhead.comment.charCodeAt(ge.gzindex++)&255:ft=0,Ln(ge,ft)}while(ft!==0);ge.gzhead.hcrc&&ge.pending>it&&(x.adler=i(x.adler,ge.pending_buf,ge.pending-it,it)),ft===0&&(ge.status=mt)}else ge.status=mt;if(ge.status===mt&&(ge.gzhead.hcrc?(ge.pending+2>ge.pending_buf_size&&Kn(x),ge.pending+2<=ge.pending_buf_size&&(Ln(ge,x.adler&255),Ln(ge,x.adler>>8&255),x.adler=0,ge.status=At)):ge.status=At),ge.pending!==0){if(Kn(x),x.avail_out===0)return ge.last_flush=-1,p}else if(x.avail_in===0&&$t(Ye)<=$t(Zn)&&Ye!==f)return sn(x,b);if(ge.status===Vt&&x.avail_in!==0)return sn(x,b);if(x.avail_in!==0||ge.lookahead!==0||Ye!==t&&ge.status!==Vt){let Xt=ge.strategy===w?hn(ge,Ye):ge.strategy===R?Ht(ge,Ye):xe[ge.level].func(ge,Ye);if((Xt===gt||Xt===Ut)&&(ge.status=Vt),Xt===dt||Xt===gt)return x.avail_out===0&&(ge.last_flush=-1),p;if(Xt===Cn&&(Ye===r?s(ge):Ye!==h&&(m(ge,0,0,!1),Ye===o&&(Rn(ge.head),ge.lookahead===0&&(ge.strstart=0,ge.block_start=0,ge.insert=0))),Kn(x),x.avail_out===0))return ge.last_flush=-1,p}return Ye!==f?p:ge.wrap<=0?d:(ge.wrap===2?(Ln(ge,x.adler&255),Ln(ge,x.adler>>8&255),Ln(ge,x.adler>>16&255),Ln(ge,x.adler>>24&255),Ln(ge,x.total_in&255),Ln(ge,x.total_in>>8&255),Ln(ge,x.total_in>>16&255),Ln(ge,x.total_in>>24&255)):(Hn(ge,x.adler>>>16),Hn(ge,x.adler&65535)),Kn(x),ge.wrap>0&&(ge.wrap=-ge.wrap),ge.pending!==0?p:d)},"deflate"),Ke=n(x=>{if(!x||!x.state)return y;const Ye=x.state.status;return Ye!==ut&&Ye!==St&&Ye!==Rt&&Ye!==Ze&&Ye!==mt&&Ye!==At&&Ye!==Vt?sn(x,y):(x.state=null,Ye===At?sn(x,S):p)},"deflateEnd"),vt=n((x,Ye)=>{let it=Ye.length;if(!x||!x.state)return y;const ft=x.state,ge=ft.wrap;if(ge===2||ge===1&&ft.status!==ut||ft.lookahead)return y;if(ge===1&&(x.adler=a(x.adler,Ye,it,0)),ft.wrap=0,it>=ft.w_size){ge===0&&(Rn(ft.head),ft.strstart=0,ft.block_start=0,ft.insert=0);let Bi=new Uint8Array(ft.w_size);Bi.set(Ye.subarray(it-ft.w_size,it),0),Ye=Bi,it=ft.w_size}const Zn=x.avail_in,Xt=x.next_in,pn=x.input;for(x.avail_in=it,x.next_in=0,x.input=Ye,ri(ft);ft.lookahead>=Ee;){let Bi=ft.strstart,Gn=ft.lookahead-(Ee-1);do ft.ins_h=ii(ft,ft.ins_h,ft.window[Bi+Ee-1]),ft.prev[Bi&ft.w_mask]=ft.head[ft.ins_h],ft.head[ft.ins_h]=Bi,Bi++;while(--Gn);ft.strstart=Bi,ft.lookahead=Ee-1,ri(ft)}return ft.strstart+=ft.lookahead,ft.block_start=ft.strstart,ft.insert=ft.lookahead,ft.lookahead=0,ft.match_length=ft.prev_length=Ee-1,ft.match_available=0,x.next_in=Xt,x.input=pn,x.avail_in=Zn,ft.wrap=ge,p},"deflateSetDictionary");H.exports.deflateInit=kt,H.exports.deflateInit2=nn,H.exports.deflateReset=et,H.exports.deflateResetKeep=fe,H.exports.deflateSetHeader=nt,H.exports.deflate=Jt,H.exports.deflateEnd=Ke,H.exports.deflateSetDictionary=vt,H.exports.deflateInfo="pako deflate (from Nodeca project)"},5341695802:H=>{"use strict";function l(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}n(l,"GZheader"),H.exports=l},4690928475:H=>{"use strict";H.exports=n(function(m,v){let g,s,a,i,e,t,r,o,f,h,p,d,y,S,b,_,C,w,R,O,D,I,M,k;const N=m.state;g=m.next_in,M=m.input,s=g+(m.avail_in-5),a=m.next_out,k=m.output,i=a-(v-m.avail_out),e=a+(m.avail_out-257),t=N.dmax,r=N.wsize,o=N.whave,f=N.wnext,h=N.window,p=N.hold,d=N.bits,y=N.lencode,S=N.distcode,b=(1<<N.lenbits)-1,_=(1<<N.distbits)-1;e:do{d<15&&(p+=M[g++]<<d,d+=8,p+=M[g++]<<d,d+=8),C=y[p&b];t:for(;;){if(w=C>>>24,p>>>=w,d-=w,w=C>>>16&255,w===0)k[a++]=C&65535;else if(w&16){R=C&65535,w&=15,w&&(d<w&&(p+=M[g++]<<d,d+=8),R+=p&(1<<w)-1,p>>>=w,d-=w),d<15&&(p+=M[g++]<<d,d+=8,p+=M[g++]<<d,d+=8),C=S[p&_];n:for(;;){if(w=C>>>24,p>>>=w,d-=w,w=C>>>16&255,w&16){if(O=C&65535,w&=15,d<w&&(p+=M[g++]<<d,d+=8,d<w&&(p+=M[g++]<<d,d+=8)),O+=p&(1<<w)-1,O>t){m.msg="invalid distance too far back",N.mode=30;break e}if(p>>>=w,d-=w,w=a-i,O>w){if(w=O-w,w>o&&N.sane){m.msg="invalid distance too far back",N.mode=30;break e}if(D=0,I=h,f===0){if(D+=r-w,w<R){R-=w;do k[a++]=h[D++];while(--w);D=a-O,I=k}}else if(f<w){if(D+=r+f-w,w-=f,w<R){R-=w;do k[a++]=h[D++];while(--w);if(D=0,f<R){w=f,R-=w;do k[a++]=h[D++];while(--w);D=a-O,I=k}}}else if(D+=f-w,w<R){R-=w;do k[a++]=h[D++];while(--w);D=a-O,I=k}for(;R>2;)k[a++]=I[D++],k[a++]=I[D++],k[a++]=I[D++],R-=3;R&&(k[a++]=I[D++],R>1&&(k[a++]=I[D++]))}else{D=a-O;do k[a++]=k[D++],k[a++]=k[D++],k[a++]=k[D++],R-=3;while(R>2);R&&(k[a++]=k[D++],R>1&&(k[a++]=k[D++]))}}else if(w&64){m.msg="invalid distance code",N.mode=30;break e}else{C=S[(C&65535)+(p&(1<<w)-1)];continue n}break}}else if(w&64)if(w&32){N.mode=12;break e}else{m.msg="invalid literal/length code",N.mode=30;break e}else{C=y[(C&65535)+(p&(1<<w)-1)];continue t}break}}while(g<s&&a<e);R=d>>3,g-=R,d-=R<<3,p&=(1<<d)-1,m.next_in=g,m.next_out=a,m.avail_in=g<s?5+(s-g):5-(g-s),m.avail_out=a<e?257+(e-a):257-(a-e),N.hold=p,N.bits=d},"inflate_fast")},4532140493:(H,l,c)=>{"use strict";const u=c(7775889903),m=c(9538018229),v=c(4690928475),g=c(9709058974),s=0,a=1,i=2,{Z_FINISH:e,Z_BLOCK:t,Z_TREES:r,Z_OK:o,Z_STREAM_END:f,Z_NEED_DICT:h,Z_STREAM_ERROR:p,Z_DATA_ERROR:d,Z_MEM_ERROR:y,Z_BUF_ERROR:S,Z_DEFLATED:b}=c(7496116979),_=1,C=2,w=3,R=4,O=5,D=6,I=7,M=8,k=9,N=10,j=11,B=12,J=13,Q=14,oe=15,$=16,he=17,Ae=18,Ee=19,Oe=20,be=21,De=22,ut=23,St=24,Rt=25,Ze=26,mt=27,At=28,Vt=29,dt=30,Cn=31,gt=32,Ut=852,en=592,$t=15,Rn=n(xe=>(xe>>>24&255)+(xe>>>8&65280)+((xe&65280)<<8)+((xe&255)<<24),"zswap32");function di(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}n(di,"InflateState");const ii=n(xe=>{if(!xe||!xe.state)return p;const Dt=xe.state;return xe.total_in=xe.total_out=Dt.total=0,xe.msg="",Dt.wrap&&(xe.adler=Dt.wrap&1),Dt.mode=_,Dt.last=0,Dt.havedict=0,Dt.dmax=32768,Dt.head=null,Dt.hold=0,Dt.bits=0,Dt.lencode=Dt.lendyn=new Int32Array(Ut),Dt.distcode=Dt.distdyn=new Int32Array(en),Dt.sane=1,Dt.back=-1,o},"inflateResetKeep"),Kn=n(xe=>{if(!xe||!xe.state)return p;const Dt=xe.state;return Dt.wsize=0,Dt.whave=0,Dt.wnext=0,ii(xe)},"inflateReset"),hi=n((xe,Dt)=>{let Y;if(!xe||!xe.state)return p;const fe=xe.state;return Dt<0?(Y=0,Dt=-Dt):(Y=(Dt>>4)+1,Dt<48&&(Dt&=15)),Dt&&(Dt<8||Dt>15)?p:(fe.window!==null&&fe.wbits!==Dt&&(fe.window=null),fe.wrap=Y,fe.wbits=Dt,Kn(xe))},"inflateReset2"),Ln=n((xe,Dt)=>{if(!xe)return p;const Y=new di;xe.state=Y,Y.window=null;const fe=hi(xe,Dt);return fe!==o&&(xe.state=null),fe},"inflateInit2"),Hn=n(xe=>Ln(xe,$t),"inflateInit");let ui=!0,jn,ri;const ie=n(xe=>{if(ui){jn=new Int32Array(512),ri=new Int32Array(32);let Dt=0;for(;Dt<144;)xe.lens[Dt++]=8;for(;Dt<256;)xe.lens[Dt++]=9;for(;Dt<280;)xe.lens[Dt++]=7;for(;Dt<288;)xe.lens[Dt++]=8;for(g(a,xe.lens,0,288,jn,0,xe.work,{bits:9}),Dt=0;Dt<32;)xe.lens[Dt++]=5;g(i,xe.lens,0,32,ri,0,xe.work,{bits:5}),ui=!1}xe.lencode=jn,xe.lenbits=9,xe.distcode=ri,xe.distbits=5},"fixedtables"),Mt=n((xe,Dt,Y,fe)=>{let et;const nt=xe.state;return nt.window===null&&(nt.wsize=1<<nt.wbits,nt.wnext=0,nt.whave=0,nt.window=new Uint8Array(nt.wsize)),fe>=nt.wsize?(nt.window.set(Dt.subarray(Y-nt.wsize,Y),0),nt.wnext=0,nt.whave=nt.wsize):(et=nt.wsize-nt.wnext,et>fe&&(et=fe),nt.window.set(Dt.subarray(Y-fe,Y-fe+et),nt.wnext),fe-=et,fe?(nt.window.set(Dt.subarray(Y-fe,Y),0),nt.wnext=fe,nt.whave=nt.wsize):(nt.wnext+=et,nt.wnext===nt.wsize&&(nt.wnext=0),nt.whave<nt.wsize&&(nt.whave+=et))),0},"updatewindow"),Ot=n((xe,Dt)=>{let Y,fe,et,nt,nn,kt,Jt,Ke,vt,x,Ye,it,ft,ge,Zn=0,Xt,pn,Bi,Gn,yo,no,Vi,or;const ki=new Uint8Array(4);let qi,Or;const Zo=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!xe||!xe.state||!xe.output||!xe.input&&xe.avail_in!==0)return p;Y=xe.state,Y.mode===B&&(Y.mode=J),nn=xe.next_out,et=xe.output,Jt=xe.avail_out,nt=xe.next_in,fe=xe.input,kt=xe.avail_in,Ke=Y.hold,vt=Y.bits,x=kt,Ye=Jt,or=o;e:for(;;)switch(Y.mode){case _:if(Y.wrap===0){Y.mode=J;break}for(;vt<16;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}if(Y.wrap&2&&Ke===35615){Y.check=0,ki[0]=Ke&255,ki[1]=Ke>>>8&255,Y.check=m(Y.check,ki,2,0),Ke=0,vt=0,Y.mode=C;break}if(Y.flags=0,Y.head&&(Y.head.done=!1),!(Y.wrap&1)||(((Ke&255)<<8)+(Ke>>8))%31){xe.msg="incorrect header check",Y.mode=dt;break}if((Ke&15)!==b){xe.msg="unknown compression method",Y.mode=dt;break}if(Ke>>>=4,vt-=4,Vi=(Ke&15)+8,Y.wbits===0)Y.wbits=Vi;else if(Vi>Y.wbits){xe.msg="invalid window size",Y.mode=dt;break}Y.dmax=1<<Y.wbits,xe.adler=Y.check=1,Y.mode=Ke&512?N:B,Ke=0,vt=0;break;case C:for(;vt<16;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}if(Y.flags=Ke,(Y.flags&255)!==b){xe.msg="unknown compression method",Y.mode=dt;break}if(Y.flags&57344){xe.msg="unknown header flags set",Y.mode=dt;break}Y.head&&(Y.head.text=Ke>>8&1),Y.flags&512&&(ki[0]=Ke&255,ki[1]=Ke>>>8&255,Y.check=m(Y.check,ki,2,0)),Ke=0,vt=0,Y.mode=w;case w:for(;vt<32;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}Y.head&&(Y.head.time=Ke),Y.flags&512&&(ki[0]=Ke&255,ki[1]=Ke>>>8&255,ki[2]=Ke>>>16&255,ki[3]=Ke>>>24&255,Y.check=m(Y.check,ki,4,0)),Ke=0,vt=0,Y.mode=R;case R:for(;vt<16;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}Y.head&&(Y.head.xflags=Ke&255,Y.head.os=Ke>>8),Y.flags&512&&(ki[0]=Ke&255,ki[1]=Ke>>>8&255,Y.check=m(Y.check,ki,2,0)),Ke=0,vt=0,Y.mode=O;case O:if(Y.flags&1024){for(;vt<16;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}Y.length=Ke,Y.head&&(Y.head.extra_len=Ke),Y.flags&512&&(ki[0]=Ke&255,ki[1]=Ke>>>8&255,Y.check=m(Y.check,ki,2,0)),Ke=0,vt=0}else Y.head&&(Y.head.extra=null);Y.mode=D;case D:if(Y.flags&1024&&(it=Y.length,it>kt&&(it=kt),it&&(Y.head&&(Vi=Y.head.extra_len-Y.length,Y.head.extra||(Y.head.extra=new Uint8Array(Y.head.extra_len)),Y.head.extra.set(fe.subarray(nt,nt+it),Vi)),Y.flags&512&&(Y.check=m(Y.check,fe,it,nt)),kt-=it,nt+=it,Y.length-=it),Y.length))break e;Y.length=0,Y.mode=I;case I:if(Y.flags&2048){if(kt===0)break e;it=0;do Vi=fe[nt+it++],Y.head&&Vi&&Y.length<65536&&(Y.head.name+=String.fromCharCode(Vi));while(Vi&&it<kt);if(Y.flags&512&&(Y.check=m(Y.check,fe,it,nt)),kt-=it,nt+=it,Vi)break e}else Y.head&&(Y.head.name=null);Y.length=0,Y.mode=M;case M:if(Y.flags&4096){if(kt===0)break e;it=0;do Vi=fe[nt+it++],Y.head&&Vi&&Y.length<65536&&(Y.head.comment+=String.fromCharCode(Vi));while(Vi&&it<kt);if(Y.flags&512&&(Y.check=m(Y.check,fe,it,nt)),kt-=it,nt+=it,Vi)break e}else Y.head&&(Y.head.comment=null);Y.mode=k;case k:if(Y.flags&512){for(;vt<16;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}if(Ke!==(Y.check&65535)){xe.msg="header crc mismatch",Y.mode=dt;break}Ke=0,vt=0}Y.head&&(Y.head.hcrc=Y.flags>>9&1,Y.head.done=!0),xe.adler=Y.check=0,Y.mode=B;break;case N:for(;vt<32;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}xe.adler=Y.check=Rn(Ke),Ke=0,vt=0,Y.mode=j;case j:if(Y.havedict===0)return xe.next_out=nn,xe.avail_out=Jt,xe.next_in=nt,xe.avail_in=kt,Y.hold=Ke,Y.bits=vt,h;xe.adler=Y.check=1,Y.mode=B;case B:if(Dt===t||Dt===r)break e;case J:if(Y.last){Ke>>>=vt&7,vt-=vt&7,Y.mode=mt;break}for(;vt<3;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}switch(Y.last=Ke&1,Ke>>>=1,vt-=1,Ke&3){case 0:Y.mode=Q;break;case 1:if(ie(Y),Y.mode=Oe,Dt===r){Ke>>>=2,vt-=2;break e}break;case 2:Y.mode=he;break;case 3:xe.msg="invalid block type",Y.mode=dt}Ke>>>=2,vt-=2;break;case Q:for(Ke>>>=vt&7,vt-=vt&7;vt<32;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}if((Ke&65535)!==(Ke>>>16^65535)){xe.msg="invalid stored block lengths",Y.mode=dt;break}if(Y.length=Ke&65535,Ke=0,vt=0,Y.mode=oe,Dt===r)break e;case oe:Y.mode=$;case $:if(it=Y.length,it){if(it>kt&&(it=kt),it>Jt&&(it=Jt),it===0)break e;et.set(fe.subarray(nt,nt+it),nn),kt-=it,nt+=it,Jt-=it,nn+=it,Y.length-=it;break}Y.mode=B;break;case he:for(;vt<14;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}if(Y.nlen=(Ke&31)+257,Ke>>>=5,vt-=5,Y.ndist=(Ke&31)+1,Ke>>>=5,vt-=5,Y.ncode=(Ke&15)+4,Ke>>>=4,vt-=4,Y.nlen>286||Y.ndist>30){xe.msg="too many length or distance symbols",Y.mode=dt;break}Y.have=0,Y.mode=Ae;case Ae:for(;Y.have<Y.ncode;){for(;vt<3;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}Y.lens[Zo[Y.have++]]=Ke&7,Ke>>>=3,vt-=3}for(;Y.have<19;)Y.lens[Zo[Y.have++]]=0;if(Y.lencode=Y.lendyn,Y.lenbits=7,qi={bits:Y.lenbits},or=g(s,Y.lens,0,19,Y.lencode,0,Y.work,qi),Y.lenbits=qi.bits,or){xe.msg="invalid code lengths set",Y.mode=dt;break}Y.have=0,Y.mode=Ee;case Ee:for(;Y.have<Y.nlen+Y.ndist;){for(;Zn=Y.lencode[Ke&(1<<Y.lenbits)-1],Xt=Zn>>>24,pn=Zn>>>16&255,Bi=Zn&65535,!(Xt<=vt);){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}if(Bi<16)Ke>>>=Xt,vt-=Xt,Y.lens[Y.have++]=Bi;else{if(Bi===16){for(Or=Xt+2;vt<Or;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}if(Ke>>>=Xt,vt-=Xt,Y.have===0){xe.msg="invalid bit length repeat",Y.mode=dt;break}Vi=Y.lens[Y.have-1],it=3+(Ke&3),Ke>>>=2,vt-=2}else if(Bi===17){for(Or=Xt+3;vt<Or;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}Ke>>>=Xt,vt-=Xt,Vi=0,it=3+(Ke&7),Ke>>>=3,vt-=3}else{for(Or=Xt+7;vt<Or;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}Ke>>>=Xt,vt-=Xt,Vi=0,it=11+(Ke&127),Ke>>>=7,vt-=7}if(Y.have+it>Y.nlen+Y.ndist){xe.msg="invalid bit length repeat",Y.mode=dt;break}for(;it--;)Y.lens[Y.have++]=Vi}}if(Y.mode===dt)break;if(Y.lens[256]===0){xe.msg="invalid code -- missing end-of-block",Y.mode=dt;break}if(Y.lenbits=9,qi={bits:Y.lenbits},or=g(a,Y.lens,0,Y.nlen,Y.lencode,0,Y.work,qi),Y.lenbits=qi.bits,or){xe.msg="invalid literal/lengths set",Y.mode=dt;break}if(Y.distbits=6,Y.distcode=Y.distdyn,qi={bits:Y.distbits},or=g(i,Y.lens,Y.nlen,Y.ndist,Y.distcode,0,Y.work,qi),Y.distbits=qi.bits,or){xe.msg="invalid distances set",Y.mode=dt;break}if(Y.mode=Oe,Dt===r)break e;case Oe:Y.mode=be;case be:if(kt>=6&&Jt>=258){xe.next_out=nn,xe.avail_out=Jt,xe.next_in=nt,xe.avail_in=kt,Y.hold=Ke,Y.bits=vt,v(xe,Ye),nn=xe.next_out,et=xe.output,Jt=xe.avail_out,nt=xe.next_in,fe=xe.input,kt=xe.avail_in,Ke=Y.hold,vt=Y.bits,Y.mode===B&&(Y.back=-1);break}for(Y.back=0;Zn=Y.lencode[Ke&(1<<Y.lenbits)-1],Xt=Zn>>>24,pn=Zn>>>16&255,Bi=Zn&65535,!(Xt<=vt);){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}if(pn&&!(pn&240)){for(Gn=Xt,yo=pn,no=Bi;Zn=Y.lencode[no+((Ke&(1<<Gn+yo)-1)>>Gn)],Xt=Zn>>>24,pn=Zn>>>16&255,Bi=Zn&65535,!(Gn+Xt<=vt);){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}Ke>>>=Gn,vt-=Gn,Y.back+=Gn}if(Ke>>>=Xt,vt-=Xt,Y.back+=Xt,Y.length=Bi,pn===0){Y.mode=Ze;break}if(pn&32){Y.back=-1,Y.mode=B;break}if(pn&64){xe.msg="invalid literal/length code",Y.mode=dt;break}Y.extra=pn&15,Y.mode=De;case De:if(Y.extra){for(Or=Y.extra;vt<Or;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}Y.length+=Ke&(1<<Y.extra)-1,Ke>>>=Y.extra,vt-=Y.extra,Y.back+=Y.extra}Y.was=Y.length,Y.mode=ut;case ut:for(;Zn=Y.distcode[Ke&(1<<Y.distbits)-1],Xt=Zn>>>24,pn=Zn>>>16&255,Bi=Zn&65535,!(Xt<=vt);){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}if(!(pn&240)){for(Gn=Xt,yo=pn,no=Bi;Zn=Y.distcode[no+((Ke&(1<<Gn+yo)-1)>>Gn)],Xt=Zn>>>24,pn=Zn>>>16&255,Bi=Zn&65535,!(Gn+Xt<=vt);){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}Ke>>>=Gn,vt-=Gn,Y.back+=Gn}if(Ke>>>=Xt,vt-=Xt,Y.back+=Xt,pn&64){xe.msg="invalid distance code",Y.mode=dt;break}Y.offset=Bi,Y.extra=pn&15,Y.mode=St;case St:if(Y.extra){for(Or=Y.extra;vt<Or;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}Y.offset+=Ke&(1<<Y.extra)-1,Ke>>>=Y.extra,vt-=Y.extra,Y.back+=Y.extra}if(Y.offset>Y.dmax){xe.msg="invalid distance too far back",Y.mode=dt;break}Y.mode=Rt;case Rt:if(Jt===0)break e;if(it=Ye-Jt,Y.offset>it){if(it=Y.offset-it,it>Y.whave&&Y.sane){xe.msg="invalid distance too far back",Y.mode=dt;break}it>Y.wnext?(it-=Y.wnext,ft=Y.wsize-it):ft=Y.wnext-it,it>Y.length&&(it=Y.length),ge=Y.window}else ge=et,ft=nn-Y.offset,it=Y.length;it>Jt&&(it=Jt),Jt-=it,Y.length-=it;do et[nn++]=ge[ft++];while(--it);Y.length===0&&(Y.mode=be);break;case Ze:if(Jt===0)break e;et[nn++]=Y.length,Jt--,Y.mode=be;break;case mt:if(Y.wrap){for(;vt<32;){if(kt===0)break e;kt--,Ke|=fe[nt++]<<vt,vt+=8}if(Ye-=Jt,xe.total_out+=Ye,Y.total+=Ye,Ye&&(xe.adler=Y.check=Y.flags?m(Y.check,et,Ye,nn-Ye):u(Y.check,et,Ye,nn-Ye)),Ye=Jt,(Y.flags?Ke:Rn(Ke))!==Y.check){xe.msg="incorrect data check",Y.mode=dt;break}Ke=0,vt=0}Y.mode=At;case At:if(Y.wrap&&Y.flags){for(;vt<32;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}if(Ke!==(Y.total&4294967295)){xe.msg="incorrect length check",Y.mode=dt;break}Ke=0,vt=0}Y.mode=Vt;case Vt:or=f;break e;case dt:or=d;break e;case Cn:return y;case gt:default:return p}return xe.next_out=nn,xe.avail_out=Jt,xe.next_in=nt,xe.avail_in=kt,Y.hold=Ke,Y.bits=vt,(Y.wsize||Ye!==xe.avail_out&&Y.mode<dt&&(Y.mode<mt||Dt!==e))&&Mt(xe,xe.output,xe.next_out,Ye-xe.avail_out)?(Y.mode=Cn,y):(x-=xe.avail_in,Ye-=xe.avail_out,xe.total_in+=x,xe.total_out+=Ye,Y.total+=Ye,Y.wrap&&Ye&&(xe.adler=Y.check=Y.flags?m(Y.check,et,Ye,xe.next_out-Ye):u(Y.check,et,Ye,xe.next_out-Ye)),xe.data_type=Y.bits+(Y.last?64:0)+(Y.mode===B?128:0)+(Y.mode===Oe||Y.mode===oe?256:0),(x===0&&Ye===0||Dt===e)&&or===o&&(or=S),or)},"inflate"),Ht=n(xe=>{if(!xe||!xe.state)return p;let Dt=xe.state;return Dt.window&&(Dt.window=null),xe.state=null,o},"inflateEnd"),hn=n((xe,Dt)=>{if(!xe||!xe.state)return p;const Y=xe.state;return Y.wrap&2?(Y.head=Dt,Dt.done=!1,o):p},"inflateGetHeader"),tn=n((xe,Dt)=>{const Y=Dt.length;let fe,et,nt;return!xe||!xe.state||(fe=xe.state,fe.wrap!==0&&fe.mode!==j)?p:fe.mode===j&&(et=1,et=u(et,Dt,Y,0),et!==fe.check)?d:(nt=Mt(xe,Dt,Y,Y),nt?(fe.mode=Cn,y):(fe.havedict=1,o))},"inflateSetDictionary");H.exports.inflateReset=Kn,H.exports.inflateReset2=hi,H.exports.inflateResetKeep=ii,H.exports.inflateInit=Hn,H.exports.inflateInit2=Ln,H.exports.inflate=Ot,H.exports.inflateEnd=Ht,H.exports.inflateGetHeader=hn,H.exports.inflateSetDictionary=tn,H.exports.inflateInfo="pako inflate (from Nodeca project)"},9709058974:H=>{"use strict";const s=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),a=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),i=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),t=n((r,o,f,h,p,d,y,S)=>{const b=S.bits;let _=0,C=0,w=0,R=0,O=0,D=0,I=0,M=0,k=0,N=0,j,B,J,Q,oe,$=null,he=0,Ae;const Ee=new Uint16Array(15+1),Oe=new Uint16Array(15+1);let be=null,De=0,ut,St,Rt;for(_=0;_<=15;_++)Ee[_]=0;for(C=0;C<h;C++)Ee[o[f+C]]++;for(O=b,R=15;R>=1&&Ee[R]===0;R--);if(O>R&&(O=R),R===0)return p[d++]=1<<24|64<<16|0,p[d++]=1<<24|64<<16|0,S.bits=1,0;for(w=1;w<R&&Ee[w]===0;w++);for(O<w&&(O=w),M=1,_=1;_<=15;_++)if(M<<=1,M-=Ee[_],M<0)return-1;if(M>0&&(r===0||R!==1))return-1;for(Oe[1]=0,_=1;_<15;_++)Oe[_+1]=Oe[_]+Ee[_];for(C=0;C<h;C++)o[f+C]!==0&&(y[Oe[o[f+C]]++]=C);if(r===0?($=be=y,Ae=19):r===1?($=s,he-=257,be=a,De-=257,Ae=256):($=i,be=e,Ae=-1),N=0,C=0,_=w,oe=d,D=O,I=0,J=-1,k=1<<O,Q=k-1,r===1&&k>852||r===2&&k>592)return 1;for(;;){ut=_-I,y[C]<Ae?(St=0,Rt=y[C]):y[C]>Ae?(St=be[De+y[C]],Rt=$[he+y[C]]):(St=32+64,Rt=0),j=1<<_-I,B=1<<D,w=B;do B-=j,p[oe+(N>>I)+B]=ut<<24|St<<16|Rt|0;while(B!==0);for(j=1<<_-1;N&j;)j>>=1;if(j!==0?(N&=j-1,N+=j):N=0,C++,--Ee[_]===0){if(_===R)break;_=o[f+y[C]]}if(_>O&&(N&Q)!==J){for(I===0&&(I=O),oe+=w,D=_-I,M=1<<D;D+I<R&&(M-=Ee[D+I],!(M<=0));)D++,M<<=1;if(k+=1<<D,r===1&&k>852||r===2&&k>592)return 1;J=N&Q,p[J]=O<<24|D<<16|oe-d|0}}return N!==0&&(p[oe+N]=_-I<<24|64<<16|0),S.bits=O,0},"inflate_table");H.exports=t},3435039830:H=>{"use strict";H.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},8891166839:H=>{"use strict";function v(ie){let Mt=ie.length;for(;--Mt>=0;)ie[Mt]=0}n(v,"zero");const g=0,s=1,a=2,i=3,e=258,t=29,r=256,o=r+1+t,f=30,h=19,p=2*o+1,d=15,y=16,S=7,b=256,_=16,C=17,w=18,R=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),O=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),D=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),M=512,k=new Array((o+2)*2);v(k);const N=new Array(f*2);v(N);const j=new Array(M);v(j);const B=new Array(e-i+1);v(B);const J=new Array(t);v(J);const Q=new Array(f);v(Q);function oe(ie,Mt,Ot,Ht,hn){this.static_tree=ie,this.extra_bits=Mt,this.extra_base=Ot,this.elems=Ht,this.max_length=hn,this.has_stree=ie&&ie.length}n(oe,"StaticTreeDesc");let $,he,Ae;function Ee(ie,Mt){this.dyn_tree=ie,this.max_code=0,this.stat_desc=Mt}n(Ee,"TreeDesc");const Oe=n(ie=>ie<256?j[ie]:j[256+(ie>>>7)],"d_code"),be=n((ie,Mt)=>{ie.pending_buf[ie.pending++]=Mt&255,ie.pending_buf[ie.pending++]=Mt>>>8&255},"put_short"),De=n((ie,Mt,Ot)=>{ie.bi_valid>y-Ot?(ie.bi_buf|=Mt<<ie.bi_valid&65535,be(ie,ie.bi_buf),ie.bi_buf=Mt>>y-ie.bi_valid,ie.bi_valid+=Ot-y):(ie.bi_buf|=Mt<<ie.bi_valid&65535,ie.bi_valid+=Ot)},"send_bits"),ut=n((ie,Mt,Ot)=>{De(ie,Ot[Mt*2],Ot[Mt*2+1])},"send_code"),St=n((ie,Mt)=>{let Ot=0;do Ot|=ie&1,ie>>>=1,Ot<<=1;while(--Mt>0);return Ot>>>1},"bi_reverse"),Rt=n(ie=>{ie.bi_valid===16?(be(ie,ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0):ie.bi_valid>=8&&(ie.pending_buf[ie.pending++]=ie.bi_buf&255,ie.bi_buf>>=8,ie.bi_valid-=8)},"bi_flush"),Ze=n((ie,Mt)=>{const Ot=Mt.dyn_tree,Ht=Mt.max_code,hn=Mt.stat_desc.static_tree,tn=Mt.stat_desc.has_stree,xe=Mt.stat_desc.extra_bits,Dt=Mt.stat_desc.extra_base,Y=Mt.stat_desc.max_length;let fe,et,nt,nn,kt,Jt,Ke=0;for(nn=0;nn<=d;nn++)ie.bl_count[nn]=0;for(Ot[ie.heap[ie.heap_max]*2+1]=0,fe=ie.heap_max+1;fe<p;fe++)et=ie.heap[fe],nn=Ot[Ot[et*2+1]*2+1]+1,nn>Y&&(nn=Y,Ke++),Ot[et*2+1]=nn,!(et>Ht)&&(ie.bl_count[nn]++,kt=0,et>=Dt&&(kt=xe[et-Dt]),Jt=Ot[et*2],ie.opt_len+=Jt*(nn+kt),tn&&(ie.static_len+=Jt*(hn[et*2+1]+kt)));if(Ke!==0){do{for(nn=Y-1;ie.bl_count[nn]===0;)nn--;ie.bl_count[nn]--,ie.bl_count[nn+1]+=2,ie.bl_count[Y]--,Ke-=2}while(Ke>0);for(nn=Y;nn!==0;nn--)for(et=ie.bl_count[nn];et!==0;)nt=ie.heap[--fe],!(nt>Ht)&&(Ot[nt*2+1]!==nn&&(ie.opt_len+=(nn-Ot[nt*2+1])*Ot[nt*2],Ot[nt*2+1]=nn),et--)}},"gen_bitlen"),mt=n((ie,Mt,Ot)=>{const Ht=new Array(d+1);let hn=0,tn,xe;for(tn=1;tn<=d;tn++)Ht[tn]=hn=hn+Ot[tn-1]<<1;for(xe=0;xe<=Mt;xe++){let Dt=ie[xe*2+1];Dt!==0&&(ie[xe*2]=St(Ht[Dt]++,Dt))}},"gen_codes"),At=n(()=>{let ie,Mt,Ot,Ht,hn;const tn=new Array(d+1);for(Ot=0,Ht=0;Ht<t-1;Ht++)for(J[Ht]=Ot,ie=0;ie<1<<R[Ht];ie++)B[Ot++]=Ht;for(B[Ot-1]=Ht,hn=0,Ht=0;Ht<16;Ht++)for(Q[Ht]=hn,ie=0;ie<1<<O[Ht];ie++)j[hn++]=Ht;for(hn>>=7;Ht<f;Ht++)for(Q[Ht]=hn<<7,ie=0;ie<1<<O[Ht]-7;ie++)j[256+hn++]=Ht;for(Mt=0;Mt<=d;Mt++)tn[Mt]=0;for(ie=0;ie<=143;)k[ie*2+1]=8,ie++,tn[8]++;for(;ie<=255;)k[ie*2+1]=9,ie++,tn[9]++;for(;ie<=279;)k[ie*2+1]=7,ie++,tn[7]++;for(;ie<=287;)k[ie*2+1]=8,ie++,tn[8]++;for(mt(k,o+1,tn),ie=0;ie<f;ie++)N[ie*2+1]=5,N[ie*2]=St(ie,5);$=new oe(k,R,r+1,o,d),he=new oe(N,O,0,f,d),Ae=new oe(new Array(0),D,0,h,S)},"tr_static_init"),Vt=n(ie=>{let Mt;for(Mt=0;Mt<o;Mt++)ie.dyn_ltree[Mt*2]=0;for(Mt=0;Mt<f;Mt++)ie.dyn_dtree[Mt*2]=0;for(Mt=0;Mt<h;Mt++)ie.bl_tree[Mt*2]=0;ie.dyn_ltree[b*2]=1,ie.opt_len=ie.static_len=0,ie.last_lit=ie.matches=0},"init_block"),dt=n(ie=>{ie.bi_valid>8?be(ie,ie.bi_buf):ie.bi_valid>0&&(ie.pending_buf[ie.pending++]=ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0},"bi_windup"),Cn=n((ie,Mt,Ot,Ht)=>{dt(ie),Ht&&(be(ie,Ot),be(ie,~Ot)),ie.pending_buf.set(ie.window.subarray(Mt,Mt+Ot),ie.pending),ie.pending+=Ot},"copy_block"),gt=n((ie,Mt,Ot,Ht)=>{const hn=Mt*2,tn=Ot*2;return ie[hn]<ie[tn]||ie[hn]===ie[tn]&&Ht[Mt]<=Ht[Ot]},"smaller"),Ut=n((ie,Mt,Ot)=>{const Ht=ie.heap[Ot];let hn=Ot<<1;for(;hn<=ie.heap_len&&(hn<ie.heap_len&&gt(Mt,ie.heap[hn+1],ie.heap[hn],ie.depth)&&hn++,!gt(Mt,Ht,ie.heap[hn],ie.depth));)ie.heap[Ot]=ie.heap[hn],Ot=hn,hn<<=1;ie.heap[Ot]=Ht},"pqdownheap"),en=n((ie,Mt,Ot)=>{let Ht,hn,tn=0,xe,Dt;if(ie.last_lit!==0)do Ht=ie.pending_buf[ie.d_buf+tn*2]<<8|ie.pending_buf[ie.d_buf+tn*2+1],hn=ie.pending_buf[ie.l_buf+tn],tn++,Ht===0?ut(ie,hn,Mt):(xe=B[hn],ut(ie,xe+r+1,Mt),Dt=R[xe],Dt!==0&&(hn-=J[xe],De(ie,hn,Dt)),Ht--,xe=Oe(Ht),ut(ie,xe,Ot),Dt=O[xe],Dt!==0&&(Ht-=Q[xe],De(ie,Ht,Dt)));while(tn<ie.last_lit);ut(ie,b,Mt)},"compress_block"),sn=n((ie,Mt)=>{const Ot=Mt.dyn_tree,Ht=Mt.stat_desc.static_tree,hn=Mt.stat_desc.has_stree,tn=Mt.stat_desc.elems;let xe,Dt,Y=-1,fe;for(ie.heap_len=0,ie.heap_max=p,xe=0;xe<tn;xe++)Ot[xe*2]!==0?(ie.heap[++ie.heap_len]=Y=xe,ie.depth[xe]=0):Ot[xe*2+1]=0;for(;ie.heap_len<2;)fe=ie.heap[++ie.heap_len]=Y<2?++Y:0,Ot[fe*2]=1,ie.depth[fe]=0,ie.opt_len--,hn&&(ie.static_len-=Ht[fe*2+1]);for(Mt.max_code=Y,xe=ie.heap_len>>1;xe>=1;xe--)Ut(ie,Ot,xe);fe=tn;do xe=ie.heap[1],ie.heap[1]=ie.heap[ie.heap_len--],Ut(ie,Ot,1),Dt=ie.heap[1],ie.heap[--ie.heap_max]=xe,ie.heap[--ie.heap_max]=Dt,Ot[fe*2]=Ot[xe*2]+Ot[Dt*2],ie.depth[fe]=(ie.depth[xe]>=ie.depth[Dt]?ie.depth[xe]:ie.depth[Dt])+1,Ot[xe*2+1]=Ot[Dt*2+1]=fe,ie.heap[1]=fe++,Ut(ie,Ot,1);while(ie.heap_len>=2);ie.heap[--ie.heap_max]=ie.heap[1],Ze(ie,Mt),mt(Ot,Y,ie.bl_count)},"build_tree"),$t=n((ie,Mt,Ot)=>{let Ht,hn=-1,tn,xe=Mt[0*2+1],Dt=0,Y=7,fe=4;for(xe===0&&(Y=138,fe=3),Mt[(Ot+1)*2+1]=65535,Ht=0;Ht<=Ot;Ht++)tn=xe,xe=Mt[(Ht+1)*2+1],!(++Dt<Y&&tn===xe)&&(Dt<fe?ie.bl_tree[tn*2]+=Dt:tn!==0?(tn!==hn&&ie.bl_tree[tn*2]++,ie.bl_tree[_*2]++):Dt<=10?ie.bl_tree[C*2]++:ie.bl_tree[w*2]++,Dt=0,hn=tn,xe===0?(Y=138,fe=3):tn===xe?(Y=6,fe=3):(Y=7,fe=4))},"scan_tree"),Rn=n((ie,Mt,Ot)=>{let Ht,hn=-1,tn,xe=Mt[0*2+1],Dt=0,Y=7,fe=4;for(xe===0&&(Y=138,fe=3),Ht=0;Ht<=Ot;Ht++)if(tn=xe,xe=Mt[(Ht+1)*2+1],!(++Dt<Y&&tn===xe)){if(Dt<fe)do ut(ie,tn,ie.bl_tree);while(--Dt!==0);else tn!==0?(tn!==hn&&(ut(ie,tn,ie.bl_tree),Dt--),ut(ie,_,ie.bl_tree),De(ie,Dt-3,2)):Dt<=10?(ut(ie,C,ie.bl_tree),De(ie,Dt-3,3)):(ut(ie,w,ie.bl_tree),De(ie,Dt-11,7));Dt=0,hn=tn,xe===0?(Y=138,fe=3):tn===xe?(Y=6,fe=3):(Y=7,fe=4)}},"send_tree"),di=n(ie=>{let Mt;for($t(ie,ie.dyn_ltree,ie.l_desc.max_code),$t(ie,ie.dyn_dtree,ie.d_desc.max_code),sn(ie,ie.bl_desc),Mt=h-1;Mt>=3&&ie.bl_tree[I[Mt]*2+1]===0;Mt--);return ie.opt_len+=3*(Mt+1)+5+5+4,Mt},"build_bl_tree"),ii=n((ie,Mt,Ot,Ht)=>{let hn;for(De(ie,Mt-257,5),De(ie,Ot-1,5),De(ie,Ht-4,4),hn=0;hn<Ht;hn++)De(ie,ie.bl_tree[I[hn]*2+1],3);Rn(ie,ie.dyn_ltree,Mt-1),Rn(ie,ie.dyn_dtree,Ot-1)},"send_all_trees"),Kn=n(ie=>{let Mt=4093624447,Ot;for(Ot=0;Ot<=31;Ot++,Mt>>>=1)if(Mt&1&&ie.dyn_ltree[Ot*2]!==0)return 0;if(ie.dyn_ltree[9*2]!==0||ie.dyn_ltree[10*2]!==0||ie.dyn_ltree[13*2]!==0)return 1;for(Ot=32;Ot<r;Ot++)if(ie.dyn_ltree[Ot*2]!==0)return 1;return 0},"detect_data_type");let hi=!1;const Ln=n(ie=>{hi||(At(),hi=!0),ie.l_desc=new Ee(ie.dyn_ltree,$),ie.d_desc=new Ee(ie.dyn_dtree,he),ie.bl_desc=new Ee(ie.bl_tree,Ae),ie.bi_buf=0,ie.bi_valid=0,Vt(ie)},"_tr_init"),Hn=n((ie,Mt,Ot,Ht)=>{De(ie,(g<<1)+(Ht?1:0),3),Cn(ie,Mt,Ot,!0)},"_tr_stored_block"),ui=n(ie=>{De(ie,s<<1,3),ut(ie,b,k),Rt(ie)},"_tr_align"),jn=n((ie,Mt,Ot,Ht)=>{let hn,tn,xe=0;ie.level>0?(ie.strm.data_type===2&&(ie.strm.data_type=Kn(ie)),sn(ie,ie.l_desc),sn(ie,ie.d_desc),xe=di(ie),hn=ie.opt_len+3+7>>>3,tn=ie.static_len+3+7>>>3,tn<=hn&&(hn=tn)):hn=tn=Ot+5,Ot+4<=hn&&Mt!==-1?Hn(ie,Mt,Ot,Ht):ie.strategy===4||tn===hn?(De(ie,(s<<1)+(Ht?1:0),3),en(ie,k,N)):(De(ie,(a<<1)+(Ht?1:0),3),ii(ie,ie.l_desc.max_code+1,ie.d_desc.max_code+1,xe+1),en(ie,ie.dyn_ltree,ie.dyn_dtree)),Vt(ie),Ht&&dt(ie)},"_tr_flush_block"),ri=n((ie,Mt,Ot)=>(ie.pending_buf[ie.d_buf+ie.last_lit*2]=Mt>>>8&255,ie.pending_buf[ie.d_buf+ie.last_lit*2+1]=Mt&255,ie.pending_buf[ie.l_buf+ie.last_lit]=Ot&255,ie.last_lit++,Mt===0?ie.dyn_ltree[Ot*2]++:(ie.matches++,Mt--,ie.dyn_ltree[(B[Ot]+r+1)*2]++,ie.dyn_dtree[Oe(Mt)*2]++),ie.last_lit===ie.lit_bufsize-1),"_tr_tally");H.exports._tr_init=Ln,H.exports._tr_stored_block=Hn,H.exports._tr_flush_block=jn,H.exports._tr_tally=ri,H.exports._tr_align=ui},8713386032:H=>{"use strict";function l(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}n(l,"ZStream"),H.exports=l},8203499834:(H,l,c)=>{"use strict";H.exports=c(687426846)},687426846:(H,l,c)=>{"use strict";var u=l;u.build="minimal",u.Writer=c(2360491163),u.BufferWriter=c(2563953490),u.Reader=c(6844776027),u.BufferReader=c(7297964050),u.util=c(6168016328),u.rpc=c(3806126143),u.roots=c(9353233933),u.configure=m;function m(){u.util._configure(),u.Writer._configure(u.BufferWriter),u.Reader._configure(u.BufferReader)}n(m,"configure"),m()},6844776027:(H,l,c)=>{"use strict";H.exports=a;var u=c(6168016328),m,v=u.LongBits,g=u.utf8;function s(f,h){return RangeError("index out of range: "+f.pos+" + "+(h||1)+" > "+f.len)}n(s,"indexOutOfRange");function a(f){this.buf=f,this.pos=0,this.len=f.length}n(a,"Reader");var i=typeof Uint8Array<"u"?n(function(h){if(h instanceof Uint8Array||Array.isArray(h))return new a(h);throw Error("illegal buffer")},"create_typed_array"):n(function(h){if(Array.isArray(h))return new a(h);throw Error("illegal buffer")},"create_array"),e=n(function(){return u.Buffer?n(function(p){return(a.create=n(function(y){return u.Buffer.isBuffer(y)?new m(y):i(y)},"create_buffer"))(p)},"create_buffer_setup"):i},"create");a.create=e(),a.prototype._slice=u.Array.prototype.subarray||u.Array.prototype.slice,a.prototype.uint32=n(function(){var h=4294967295;return n(function(){if(h=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(h=(h|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return h;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return h},"read_uint32")},"read_uint32_setup")(),a.prototype.int32=n(function(){return this.uint32()|0},"read_int32"),a.prototype.sint32=n(function(){var h=this.uint32();return h>>>1^-(h&1)|0},"read_sint32");function t(){var f=new v(0,0),h=0;if(this.len-this.pos>4){for(;h<4;++h)if(f.lo=(f.lo|(this.buf[this.pos]&127)<<h*7)>>>0,this.buf[this.pos++]<128)return f;if(f.lo=(f.lo|(this.buf[this.pos]&127)<<28)>>>0,f.hi=(f.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return f;h=0}else{for(;h<3;++h){if(this.pos>=this.len)throw s(this);if(f.lo=(f.lo|(this.buf[this.pos]&127)<<h*7)>>>0,this.buf[this.pos++]<128)return f}return f.lo=(f.lo|(this.buf[this.pos++]&127)<<h*7)>>>0,f}if(this.len-this.pos>4){for(;h<5;++h)if(f.hi=(f.hi|(this.buf[this.pos]&127)<<h*7+3)>>>0,this.buf[this.pos++]<128)return f}else for(;h<5;++h){if(this.pos>=this.len)throw s(this);if(f.hi=(f.hi|(this.buf[this.pos]&127)<<h*7+3)>>>0,this.buf[this.pos++]<128)return f}throw Error("invalid varint encoding")}n(t,"readLongVarint"),a.prototype.bool=n(function(){return this.uint32()!==0},"read_bool");function r(f,h){return(f[h-4]|f[h-3]<<8|f[h-2]<<16|f[h-1]<<24)>>>0}n(r,"readFixed32_end"),a.prototype.fixed32=n(function(){if(this.pos+4>this.len)throw s(this,4);return r(this.buf,this.pos+=4)},"read_fixed32"),a.prototype.sfixed32=n(function(){if(this.pos+4>this.len)throw s(this,4);return r(this.buf,this.pos+=4)|0},"read_sfixed32");function o(){if(this.pos+8>this.len)throw s(this,8);return new v(r(this.buf,this.pos+=4),r(this.buf,this.pos+=4))}n(o,"readFixed64"),a.prototype.float=n(function(){if(this.pos+4>this.len)throw s(this,4);var h=u.float.readFloatLE(this.buf,this.pos);return this.pos+=4,h},"read_float"),a.prototype.double=n(function(){if(this.pos+8>this.len)throw s(this,4);var h=u.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,h},"read_double"),a.prototype.bytes=n(function(){var h=this.uint32(),p=this.pos,d=this.pos+h;if(d>this.len)throw s(this,h);if(this.pos+=h,Array.isArray(this.buf))return this.buf.slice(p,d);if(p===d){var y=u.Buffer;return y?y.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,p,d)},"read_bytes"),a.prototype.string=n(function(){var h=this.bytes();return g.read(h,0,h.length)},"read_string"),a.prototype.skip=n(function(h){if(typeof h=="number"){if(this.pos+h>this.len)throw s(this,h);this.pos+=h}else do if(this.pos>=this.len)throw s(this);while(this.buf[this.pos++]&128);return this},"skip"),a.prototype.skipType=function(f){switch(f){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(f=this.uint32()&7)!==4;)this.skipType(f);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+f+" at offset "+this.pos)}return this},a._configure=function(f){m=f,a.create=e(),m._configure();var h=u.Long?"toLong":"toNumber";u.merge(a.prototype,{int64:n(function(){return t.call(this)[h](!1)},"read_int64"),uint64:n(function(){return t.call(this)[h](!0)},"read_uint64"),sint64:n(function(){return t.call(this).zzDecode()[h](!1)},"read_sint64"),fixed64:n(function(){return o.call(this)[h](!0)},"read_fixed64"),sfixed64:n(function(){return o.call(this)[h](!1)},"read_sfixed64")})}},7297964050:(H,l,c)=>{"use strict";H.exports=v;var u=c(6844776027);(v.prototype=Object.create(u.prototype)).constructor=v;var m=c(6168016328);function v(g){u.call(this,g)}n(v,"BufferReader"),v._configure=function(){m.Buffer&&(v.prototype._slice=m.Buffer.prototype.slice)},v.prototype.string=n(function(){var s=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+s,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+s,this.len))},"read_string_buffer"),v._configure()},9353233933:H=>{"use strict";H.exports={}},3806126143:(H,l,c)=>{"use strict";var u=l;u.Service=c(8739400271)},8739400271:(H,l,c)=>{"use strict";H.exports=m;var u=c(6168016328);(m.prototype=Object.create(u.EventEmitter.prototype)).constructor=m;function m(v,g,s){if(typeof v!="function")throw TypeError("rpcImpl must be a function");u.EventEmitter.call(this),this.rpcImpl=v,this.requestDelimited=Boolean(g),this.responseDelimited=Boolean(s)}n(m,"Service"),m.prototype.rpcCall=n(function v(g,s,a,i,e){if(!i)throw TypeError("request must be specified");var t=this;if(!e)return u.asPromise(v,t,g,s,a,i);if(!t.rpcImpl){setTimeout(function(){e(Error("already ended"))},0);return}try{return t.rpcImpl(g,s[t.requestDelimited?"encodeDelimited":"encode"](i).finish(),n(function(o,f){if(o)return t.emit("error",o,g),e(o);if(f===null){t.end(!0);return}if(!(f instanceof a))try{f=a[t.responseDelimited?"decodeDelimited":"decode"](f)}catch(h){return t.emit("error",h,g),e(h)}return t.emit("data",f,g),e(null,f)},"rpcCallback"))}catch(r){t.emit("error",r,g),setTimeout(function(){e(r)},0);return}},"rpcCall"),m.prototype.end=n(function(g){return this.rpcImpl&&(g||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},"end")},9382774951:(H,l,c)=>{"use strict";H.exports=m;var u=c(6168016328);function m(a,i){this.lo=a>>>0,this.hi=i>>>0}n(m,"LongBits");var v=m.zero=new m(0,0);v.toNumber=function(){return 0},v.zzEncode=v.zzDecode=function(){return this},v.length=function(){return 1};var g=m.zeroHash="\0\0\0\0\0\0\0\0";m.fromNumber=n(function(i){if(i===0)return v;var e=i<0;e&&(i=-i);var t=i>>>0,r=(i-t)/4294967296>>>0;return e&&(r=~r>>>0,t=~t>>>0,++t>4294967295&&(t=0,++r>4294967295&&(r=0))),new m(t,r)},"fromNumber"),m.from=n(function(i){if(typeof i=="number")return m.fromNumber(i);if(u.isString(i))if(u.Long)i=u.Long.fromString(i);else return m.fromNumber(parseInt(i,10));return i.low||i.high?new m(i.low>>>0,i.high>>>0):v},"from"),m.prototype.toNumber=n(function(i){if(!i&&this.hi>>>31){var e=~this.lo+1>>>0,t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+t*4294967296)}return this.lo+this.hi*4294967296},"toNumber"),m.prototype.toLong=n(function(i){return u.Long?new u.Long(this.lo|0,this.hi|0,Boolean(i)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(i)}},"toLong");var s=String.prototype.charCodeAt;m.fromHash=n(function(i){return i===g?v:new m((s.call(i,0)|s.call(i,1)<<8|s.call(i,2)<<16|s.call(i,3)<<24)>>>0,(s.call(i,4)|s.call(i,5)<<8|s.call(i,6)<<16|s.call(i,7)<<24)>>>0)},"fromHash"),m.prototype.toHash=n(function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},"toHash"),m.prototype.zzEncode=n(function(){var i=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^i)>>>0,this.lo=(this.lo<<1^i)>>>0,this},"zzEncode"),m.prototype.zzDecode=n(function(){var i=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^i)>>>0,this.hi=(this.hi>>>1^i)>>>0,this},"zzDecode"),m.prototype.length=n(function(){var i=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,t=this.hi>>>24;return t===0?e===0?i<16384?i<128?1:2:i<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:t<128?9:10},"length")},6168016328:function(H,l,c){"use strict";var u=l;u.asPromise=c(7410930532),u.base64=c(3824736026),u.EventEmitter=c(6627060659),u.float=c(6797650127),u.inquire=c(3923667175),u.utf8=c(4612067386),u.pool=c(3002561995),u.LongBits=c(9382774951),u.isNode=Boolean(typeof c.g<"u"&&c.g&&c.g.process&&c.g.process.versions&&c.g.process.versions.node),u.global=u.isNode&&c.g||typeof window<"u"&&window||typeof self<"u"&&self||this,u.emptyArray=Object.freeze?Object.freeze([]):[],u.emptyObject=Object.freeze?Object.freeze({}):{},u.isInteger=Number.isInteger||n(function(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s},"isInteger"),u.isString=n(function(s){return typeof s=="string"||s instanceof String},"isString"),u.isObject=n(function(s){return s&&typeof s=="object"},"isObject"),u.isset=u.isSet=n(function(s,a){var i=s[a];return i!=null&&s.hasOwnProperty(a)?typeof i!="object"||(Array.isArray(i)?i.length:Object.keys(i).length)>0:!1},"isSet"),u.Buffer=function(){try{var g=u.inquire("buffer").Buffer;return g.prototype.utf8Write?g:null}catch{return null}}(),u._Buffer_from=null,u._Buffer_allocUnsafe=null,u.newBuffer=n(function(s){return typeof s=="number"?u.Buffer?u._Buffer_allocUnsafe(s):new u.Array(s):u.Buffer?u._Buffer_from(s):typeof Uint8Array>"u"?s:new Uint8Array(s)},"newBuffer"),u.Array=typeof Uint8Array<"u"?Uint8Array:Array,u.Long=u.global.dcodeIO&&u.global.dcodeIO.Long||u.global.Long||u.inquire("long"),u.key2Re=/^true|false|0|1$/,u.key32Re=/^-?(?:0|[1-9][0-9]*)$/,u.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,u.longToHash=n(function(s){return s?u.LongBits.from(s).toHash():u.LongBits.zeroHash},"longToHash"),u.longFromHash=n(function(s,a){var i=u.LongBits.fromHash(s);return u.Long?u.Long.fromBits(i.lo,i.hi,a):i.toNumber(Boolean(a))},"longFromHash");function m(g,s,a){for(var i=Object.keys(s),e=0;e<i.length;++e)(g[i[e]]===void 0||!a)&&(g[i[e]]=s[i[e]]);return g}n(m,"merge"),u.merge=m,u.lcFirst=n(function(s){return s.charAt(0).toLowerCase()+s.substring(1)},"lcFirst");function v(g){function s(a,i){if(!(this instanceof s))return new s(a,i);Object.defineProperty(this,"message",{get:function(){return a}}),Error.captureStackTrace?Error.captureStackTrace(this,s):Object.defineProperty(this,"stack",{value:new Error().stack||""}),i&&m(this,i)}return n(s,"CustomError"),s.prototype=Object.create(Error.prototype,{constructor:{value:s,writable:!0,enumerable:!1,configurable:!0},name:{get:n(function(){return g},"get"),set:void 0,enumerable:!1,configurable:!0},toString:{value:n(function(){return this.name+": "+this.message},"value"),writable:!0,enumerable:!1,configurable:!0}}),s}n(v,"newError"),u.newError=v,u.ProtocolError=v("ProtocolError"),u.oneOfGetter=n(function(s){for(var a={},i=0;i<s.length;++i)a[s[i]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;t>-1;--t)if(a[e[t]]===1&&this[e[t]]!==void 0&&this[e[t]]!==null)return e[t]}},"getOneOf"),u.oneOfSetter=n(function(s){return function(a){for(var i=0;i<s.length;++i)s[i]!==a&&delete this[s[i]]}},"setOneOf"),u.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},u._configure=function(){var g=u.Buffer;if(!g){u._Buffer_from=u._Buffer_allocUnsafe=null;return}u._Buffer_from=g.from!==Uint8Array.from&&g.from||n(function(a,i){return new g(a,i)},"Buffer_from"),u._Buffer_allocUnsafe=g.allocUnsafe||n(function(a){return new g(a)},"Buffer_allocUnsafe")}},2360491163:(H,l,c)=>{"use strict";H.exports=t;var u=c(6168016328),m,v=u.LongBits,g=u.base64,s=u.utf8;function a(S,b,_){this.fn=S,this.len=b,this.next=void 0,this.val=_}n(a,"Op");function i(){}n(i,"noop");function e(S){this.head=S.head,this.tail=S.tail,this.len=S.len,this.next=S.states}n(e,"State");function t(){this.len=0,this.head=new a(i,0,0),this.tail=this.head,this.states=null}n(t,"Writer");var r=n(function(){return u.Buffer?n(function(){return(t.create=n(function(){return new m},"create_buffer"))()},"create_buffer_setup"):n(function(){return new t},"create_array")},"create");t.create=r(),t.alloc=n(function(b){return new u.Array(b)},"alloc"),u.Array!==Array&&(t.alloc=u.pool(t.alloc,u.Array.prototype.subarray)),t.prototype._push=n(function(b,_,C){return this.tail=this.tail.next=new a(b,_,C),this.len+=_,this},"push");function o(S,b,_){b[_]=S&255}n(o,"writeByte");function f(S,b,_){for(;S>127;)b[_++]=S&127|128,S>>>=7;b[_]=S}n(f,"writeVarint32");function h(S,b){this.len=S,this.next=void 0,this.val=b}n(h,"VarintOp"),h.prototype=Object.create(a.prototype),h.prototype.fn=f,t.prototype.uint32=n(function(b){return this.len+=(this.tail=this.tail.next=new h((b=b>>>0)<128?1:b<16384?2:b<2097152?3:b<268435456?4:5,b)).len,this},"write_uint32"),t.prototype.int32=n(function(b){return b<0?this._push(p,10,v.fromNumber(b)):this.uint32(b)},"write_int32"),t.prototype.sint32=n(function(b){return this.uint32((b<<1^b>>31)>>>0)},"write_sint32");function p(S,b,_){for(;S.hi;)b[_++]=S.lo&127|128,S.lo=(S.lo>>>7|S.hi<<25)>>>0,S.hi>>>=7;for(;S.lo>127;)b[_++]=S.lo&127|128,S.lo=S.lo>>>7;b[_++]=S.lo}n(p,"writeVarint64"),t.prototype.uint64=n(function(b){var _=v.from(b);return this._push(p,_.length(),_)},"write_uint64"),t.prototype.int64=t.prototype.uint64,t.prototype.sint64=n(function(b){var _=v.from(b).zzEncode();return this._push(p,_.length(),_)},"write_sint64"),t.prototype.bool=n(function(b){return this._push(o,1,b?1:0)},"write_bool");function d(S,b,_){b[_]=S&255,b[_+1]=S>>>8&255,b[_+2]=S>>>16&255,b[_+3]=S>>>24}n(d,"writeFixed32"),t.prototype.fixed32=n(function(b){return this._push(d,4,b>>>0)},"write_fixed32"),t.prototype.sfixed32=t.prototype.fixed32,t.prototype.fixed64=n(function(b){var _=v.from(b);return this._push(d,4,_.lo)._push(d,4,_.hi)},"write_fixed64"),t.prototype.sfixed64=t.prototype.fixed64,t.prototype.float=n(function(b){return this._push(u.float.writeFloatLE,4,b)},"write_float"),t.prototype.double=n(function(b){return this._push(u.float.writeDoubleLE,8,b)},"write_double");var y=u.Array.prototype.set?n(function(b,_,C){_.set(b,C)},"writeBytes_set"):n(function(b,_,C){for(var w=0;w<b.length;++w)_[C+w]=b[w]},"writeBytes_for");t.prototype.bytes=n(function(b){var _=b.length>>>0;if(!_)return this._push(o,1,0);if(u.isString(b)){var C=t.alloc(_=g.length(b));g.decode(b,C,0),b=C}return this.uint32(_)._push(y,_,b)},"write_bytes"),t.prototype.string=n(function(b){var _=s.length(b);return _?this.uint32(_)._push(s.write,_,b):this._push(o,1,0)},"write_string"),t.prototype.fork=n(function(){return this.states=new e(this),this.head=this.tail=new a(i,0,0),this.len=0,this},"fork"),t.prototype.reset=n(function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new a(i,0,0),this.len=0),this},"reset"),t.prototype.ldelim=n(function(){var b=this.head,_=this.tail,C=this.len;return this.reset().uint32(C),C&&(this.tail.next=b.next,this.tail=_,this.len+=C),this},"ldelim"),t.prototype.finish=n(function(){for(var b=this.head.next,_=this.constructor.alloc(this.len),C=0;b;)b.fn(b.val,_,C),C+=b.len,b=b.next;return _},"finish"),t._configure=function(S){m=S,t.create=r(),m._configure()}},2563953490:(H,l,c)=>{"use strict";H.exports=v;var u=c(2360491163);(v.prototype=Object.create(u.prototype)).constructor=v;var m=c(6168016328);function v(){u.call(this)}n(v,"BufferWriter"),v._configure=function(){v.alloc=m._Buffer_allocUnsafe,v.writeBytesBuffer=m.Buffer&&m.Buffer.prototype instanceof Uint8Array&&m.Buffer.prototype.set.name==="set"?n(function(a,i,e){i.set(a,e)},"writeBytesBuffer_set"):n(function(a,i,e){if(a.copy)a.copy(i,e,0,a.length);else for(var t=0;t<a.length;)i[e++]=a[t++]},"writeBytesBuffer_copy")},v.prototype.bytes=n(function(a){m.isString(a)&&(a=m._Buffer_from(a,"base64"));var i=a.length>>>0;return this.uint32(i),i&&this._push(v.writeBytesBuffer,i,a),this},"write_bytes_buffer");function g(s,a,i){s.length<40?m.utf8.write(s,a,i):a.utf8Write?a.utf8Write(s,i):a.write(s,i)}n(g,"writeStringBuffer"),v.prototype.string=n(function(a){var i=m.Buffer.byteLength(a);return this.uint32(i),i&&this._push(g,i,a),this},"write_string_buffer"),v._configure()},8842724253:(H,l,c)=>{"use strict";c.r(l),c.d(l,{__assign:()=>v,__asyncDelegator:()=>b,__asyncGenerator:()=>S,__asyncValues:()=>_,__await:()=>y,__awaiter:()=>e,__classPrivateFieldGet:()=>O,__classPrivateFieldSet:()=>D,__createBinding:()=>r,__decorate:()=>s,__exportStar:()=>o,__extends:()=>m,__generator:()=>t,__importDefault:()=>R,__importStar:()=>w,__makeTemplateObject:()=>C,__metadata:()=>i,__param:()=>a,__read:()=>h,__rest:()=>g,__spread:()=>p,__spreadArrays:()=>d,__values:()=>f});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var u=n(function(I,M){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,N){k.__proto__=N}||function(k,N){for(var j in N)N.hasOwnProperty(j)&&(k[j]=N[j])},u(I,M)},"extendStatics");function m(I,M){u(I,M);function k(){this.constructor=I}n(k,"__"),I.prototype=M===null?Object.create(M):(k.prototype=M.prototype,new k)}n(m,"__extends");var v=n(function(){return v=Object.assign||n(function(M){for(var k,N=1,j=arguments.length;N<j;N++){k=arguments[N];for(var B in k)Object.prototype.hasOwnProperty.call(k,B)&&(M[B]=k[B])}return M},"__assign"),v.apply(this,arguments)},"__assign");function g(I,M){var k={};for(var N in I)Object.prototype.hasOwnProperty.call(I,N)&&M.indexOf(N)<0&&(k[N]=I[N]);if(I!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,N=Object.getOwnPropertySymbols(I);j<N.length;j++)M.indexOf(N[j])<0&&Object.prototype.propertyIsEnumerable.call(I,N[j])&&(k[N[j]]=I[N[j]]);return k}n(g,"__rest");function s(I,M,k,N){var j=arguments.length,B=j<3?M:N===null?N=Object.getOwnPropertyDescriptor(M,k):N,J;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(I,M,k,N);else for(var Q=I.length-1;Q>=0;Q--)(J=I[Q])&&(B=(j<3?J(B):j>3?J(M,k,B):J(M,k))||B);return j>3&&B&&Object.defineProperty(M,k,B),B}n(s,"__decorate");function a(I,M){return function(k,N){M(k,N,I)}}n(a,"__param");function i(I,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(I,M)}n(i,"__metadata");function e(I,M,k,N){function j(B){return B instanceof k?B:new k(function(J){J(B)})}return n(j,"adopt"),new(k||(k=Promise))(function(B,J){function Q(he){try{$(N.next(he))}catch(Ae){J(Ae)}}n(Q,"fulfilled");function oe(he){try{$(N.throw(he))}catch(Ae){J(Ae)}}n(oe,"rejected");function $(he){he.done?B(he.value):j(he.value).then(Q,oe)}n($,"step"),$((N=N.apply(I,M||[])).next())})}n(e,"__awaiter");function t(I,M){var k={label:0,sent:function(){if(B[0]&1)throw B[1];return B[1]},trys:[],ops:[]},N,j,B,J;return J={next:Q(0),throw:Q(1),return:Q(2)},typeof Symbol=="function"&&(J[Symbol.iterator]=function(){return this}),J;function Q($){return function(he){return oe([$,he])}}function oe($){if(N)throw new TypeError("Generator is already executing.");for(;k;)try{if(N=1,j&&(B=$[0]&2?j.return:$[0]?j.throw||((B=j.return)&&B.call(j),0):j.next)&&!(B=B.call(j,$[1])).done)return B;switch(j=0,B&&($=[$[0]&2,B.value]),$[0]){case 0:case 1:B=$;break;case 4:return k.label++,{value:$[1],done:!1};case 5:k.label++,j=$[1],$=[0];continue;case 7:$=k.ops.pop(),k.trys.pop();continue;default:if(B=k.trys,!(B=B.length>0&&B[B.length-1])&&($[0]===6||$[0]===2)){k=0;continue}if($[0]===3&&(!B||$[1]>B[0]&&$[1]<B[3])){k.label=$[1];break}if($[0]===6&&k.label<B[1]){k.label=B[1],B=$;break}if(B&&k.label<B[2]){k.label=B[2],k.ops.push($);break}B[2]&&k.ops.pop(),k.trys.pop();continue}$=M.call(I,k)}catch(he){$=[6,he],j=0}finally{N=B=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}}n(t,"__generator");function r(I,M,k,N){N===void 0&&(N=k),I[N]=M[k]}n(r,"__createBinding");function o(I,M){for(var k in I)k!=="default"&&!M.hasOwnProperty(k)&&(M[k]=I[k])}n(o,"__exportStar");function f(I){var M=typeof Symbol=="function"&&Symbol.iterator,k=M&&I[M],N=0;if(k)return k.call(I);if(I&&typeof I.length=="number")return{next:function(){return I&&N>=I.length&&(I=void 0),{value:I&&I[N++],done:!I}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}n(f,"__values");function h(I,M){var k=typeof Symbol=="function"&&I[Symbol.iterator];if(!k)return I;var N=k.call(I),j,B=[],J;try{for(;(M===void 0||M-- >0)&&!(j=N.next()).done;)B.push(j.value)}catch(Q){J={error:Q}}finally{try{j&&!j.done&&(k=N.return)&&k.call(N)}finally{if(J)throw J.error}}return B}n(h,"__read");function p(){for(var I=[],M=0;M<arguments.length;M++)I=I.concat(h(arguments[M]));return I}n(p,"__spread");function d(){for(var I=0,M=0,k=arguments.length;M<k;M++)I+=arguments[M].length;for(var N=Array(I),j=0,M=0;M<k;M++)for(var B=arguments[M],J=0,Q=B.length;J<Q;J++,j++)N[j]=B[J];return N}n(d,"__spreadArrays");function y(I){return this instanceof y?(this.v=I,this):new y(I)}n(y,"__await");function S(I,M,k){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N=k.apply(I,M||[]),j,B=[];return j={},J("next"),J("throw"),J("return"),j[Symbol.asyncIterator]=function(){return this},j;function J(Ee){N[Ee]&&(j[Ee]=function(Oe){return new Promise(function(be,De){B.push([Ee,Oe,be,De])>1||Q(Ee,Oe)})})}function Q(Ee,Oe){try{oe(N[Ee](Oe))}catch(be){Ae(B[0][3],be)}}function oe(Ee){Ee.value instanceof y?Promise.resolve(Ee.value.v).then($,he):Ae(B[0][2],Ee)}function $(Ee){Q("next",Ee)}function he(Ee){Q("throw",Ee)}function Ae(Ee,Oe){Ee(Oe),B.shift(),B.length&&Q(B[0][0],B[0][1])}}n(S,"__asyncGenerator");function b(I){var M,k;return M={},N("next"),N("throw",function(j){throw j}),N("return"),M[Symbol.iterator]=function(){return this},M;function N(j,B){M[j]=I[j]?function(J){return(k=!k)?{value:y(I[j](J)),done:j==="return"}:B?B(J):J}:B}}n(b,"__asyncDelegator");function _(I){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=I[Symbol.asyncIterator],k;return M?M.call(I):(I=typeof f=="function"?f(I):I[Symbol.iterator](),k={},N("next"),N("throw"),N("return"),k[Symbol.asyncIterator]=function(){return this},k);function N(B){k[B]=I[B]&&function(J){return new Promise(function(Q,oe){J=I[B](J),j(Q,oe,J.done,J.value)})}}function j(B,J,Q,oe){Promise.resolve(oe).then(function($){B({value:$,done:Q})},J)}}n(_,"__asyncValues");function C(I,M){return Object.defineProperty?Object.defineProperty(I,"raw",{value:M}):I.raw=M,I}n(C,"__makeTemplateObject");function w(I){if(I&&I.__esModule)return I;var M={};if(I!=null)for(var k in I)Object.hasOwnProperty.call(I,k)&&(M[k]=I[k]);return M.default=I,M}n(w,"__importStar");function R(I){return I&&I.__esModule?I:{default:I}}n(R,"__importDefault");function O(I,M){if(!M.has(I))throw new TypeError("attempted to get private field on non-instance");return M.get(I)}n(O,"__classPrivateFieldGet");function D(I,M,k){if(!M.has(I))throw new TypeError("attempted to set private field on non-instance");return M.set(I,k),k}n(D,"__classPrivateFieldSet")},3323583056:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(s,a,i,e){function t(r){return r instanceof i?r:new i(function(o){o(r)})}return n(t,"adopt"),new(i||(i=Promise))(function(r,o){function f(d){try{p(e.next(d))}catch(y){o(y)}}n(f,"fulfilled");function h(d){try{p(e.throw(d))}catch(y){o(y)}}n(h,"rejected");function p(d){d.done?r(d.value):t(d.value).then(f,h)}n(p,"step"),p((e=e.apply(s,a||[])).next())})},m=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(9013967876));let g=n(class{needUpdate(a){return this.activeSpeakers?this.speakerScores[a]===0&&this.activeSpeakers.includes(a)||this.speakerScores[a]>0&&!this.activeSpeakers.includes(a):!0}updateActiveSpeakers(a,i,e){if(!this.needUpdate(e))return;const t=[],r=Object.keys(this.speakerScores);for(let d=0;d<r.length;d++){const y=r[d];t.push({attendeeId:y,activeScore:this.speakerScores[y]})}const o=t.sort((d,y)=>y.activeScore-d.activeScore).filter(function(d){return d.activeScore>0}).map(function(d){return d.attendeeId});this.activeSpeakers=o,i(o);const h=o.length>0&&o[0]===this.selfAttendeeId&&a.prioritizeVideoSendBandwidthForActiveSpeaker();this.hasBandwidthPriority!==h&&(this.hasBandwidthPriority=h,this.hasBandwidthPriorityCallback(h))}updateScore(a,i,e,t,r){const o=a.calculateScore(e,t,r);this.speakerScores[e]!==o&&(this.speakerScores[e]=o,this.mostRecentUpdateTimestamp[e]=Date.now(),this.updateActiveSpeakers(a,i,e))}subscribe(a,i,e,t){const r=n((f,h)=>{if(!h){this.speakerScores[f]=0,this.mostRecentUpdateTimestamp[f]=Date.now(),this.updateActiveSpeakers(a,i,f);return}this.realtimeController.realtimeSubscribeToVolumeIndicator(f,(p,d,y,S)=>{this.mostRecentUpdateTimestamp[p]=Date.now(),y!==null&&(this.speakerMuteState[p]=y),this.updateScore(a,i,p,d,y)})},"handler");this.detectorCallbackToHandler.set(i,r);const o=new v.default(this.updateIntervalMs);if(o.start(()=>{for(const f in this.speakerScores)Date.now()-this.mostRecentUpdateTimestamp[f]>this.waitIntervalMs&&this.updateScore(a,i,f,0,this.speakerMuteState[f])}),this.detectorCallbackToActivityTimer.set(i,o),e&&t){const f=new v.default(t);f.start(()=>{e(this.speakerScores)}),this.detectorCallbackToScoresTimer.set(i,f)}this.realtimeController.realtimeSubscribeToAttendeeIdPresence(r)}unsubscribe(a){const i=this.detectorCallbackToHandler.get(a);this.detectorCallbackToHandler.delete(a),i&&this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i);const e=this.detectorCallbackToActivityTimer.get(a);e&&(e.stop(),this.detectorCallbackToActivityTimer.delete(a));const t=this.detectorCallbackToScoresTimer.get(a);t&&(t.stop(),this.detectorCallbackToHandler.delete(a))}destroy(){return u(this,void 0,void 0,function*(){for(const a of this.detectorCallbackToHandler.values())this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(a);for(const a of this.detectorCallbackToActivityTimer.values())a.stop();for(const a of this.detectorCallbackToScoresTimer.values())a.stop();this.detectorCallbackToHandler.clear(),this.detectorCallbackToActivityTimer.clear(),this.detectorCallbackToScoresTimer.clear()})}constructor(a,i,e,t=1e3,r=200){this.realtimeController=a,this.selfAttendeeId=i,this.hasBandwidthPriorityCallback=e,this.waitIntervalMs=t,this.updateIntervalMs=r,this.speakerScores={},this.speakerMuteState={},this.detectorCallbackToHandler=new Map,this.detectorCallbackToScoresTimer=new Map,this.detectorCallbackToActivityTimer=new Map,this.hasBandwidthPriority=!1,this.mostRecentUpdateTimestamp={}}},"DefaultActiveSpeakerDetector");l.default=g},1644292716:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{calculateScore(m,v,g){(g||v===null)&&(v=0),this.volumes.hasOwnProperty(m)||(this.volumes[m]=0),v>this.silenceThreshold?v=1:v=0;const s=this.volumes[m]*this.speakerWeight+v*(1-this.speakerWeight);this.volumes[m]=s;for(const a in this.volumes)a!==m&&(this.volumes[a]=Math.max(this.volumes[a]-this.takeoverRate*v,0));return s<this.cutoffThreshold?0:s}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}constructor(m=.9,v=.01,g=.2,s=.2){this.speakerWeight=m,this.cutoffThreshold=v,this.silenceThreshold=g,this.takeoverRate=s,this.volumes={}}},"DefaultActiveSpeakerPolicy");l.default=c},9821410283:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class Pv{static create(m,v){const g=/^[a-zA-Z0-9]+[a-zA-Z0-9_-]*[a-zA-Z0-9]+$/g;if(!m||m.length>32)throw new Error("appName should be a valid string and 1 to 32 characters in length");if(!g.test(m))throw new Error(`appName must satisfy ${g} regular expression`);const s=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/gm;if(!v||v.length>32)throw new Error("appVersion should be a valid string and 1 to 32 characters in length");if(!s.test(v))throw new Error("appVersion must satisfy Semantic Versioning format");return new Pv(m,v)}constructor(m,v){this.appName=m,this.appVersion=v}},"ApplicationMetadata");l.default=c},4846700713:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"Attendee");l.default=c},3227886346:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(8351168186)),g=m(c(3741513515));let s=n(class{bindAudioElement(i){return u(this,void 0,void 0,function*(){if(!i)throw new Error(`Cannot bind audio element: ${i}`);return this.audioElement=i,this.audioElement.autoplay=!0,this.bindAudioMix()})}unbindAudioElement(){this.audioElement&&(this.audioElement.srcObject=null,this.audioElement=null,this.forEachObserver(i=>{this.audioStream&&i.meetingAudioStreamBecameInactive(this.audioStream)}))}bindAudioStream(i){return u(this,void 0,void 0,function*(){if(i){this.audioStream=i;try{yield this.bindAudioMix()}catch(e){this.logger&&this.logger.warn(`Failed to bind audio stream: ${e}`)}}})}bindAudioDevice(i){return u(this,void 0,void 0,function*(){if(i&&!this.browserBehavior.supportsSetSinkId())throw new Error("Cannot select audio output device. This browser does not support setSinkId.");return this.audioDevice=i,this.bindAudioMix()})}forEachObserver(i){for(const e of this.observers)g.default.nextTick(()=>{i(e)})}bindAudioMix(){var i,e;return u(this,void 0,void 0,function*(){if(!this.audioElement)return;const t=this.audioElement.srcObject;this.audioStream&&(this.audioElement.srcObject=this.audioStream),t!==this.audioStream&&this.forEachObserver(d=>{t&&d.meetingAudioStreamBecameInactive(t),this.audioStream&&d.meetingAudioStreamBecameActive(this.audioStream)});const r=((i=this.audioDevice)===null||i===void 0?void 0:i.deviceId)!==this.audioElement.sinkId;if(r&&typeof this.audioElement.sinkId>"u")throw new Error("Cannot select audio output device. This browser does not support setSinkId.");const o=this.audioDevice?this.audioDevice.deviceId:"",f=this.audioElement.sinkId;if(o===f)return;const h=this.audioElement,p=this.audioStream;if(this.browserBehavior.hasChromiumWebRTC()&&(h.srcObject=null),r)try{yield h.setSinkId(o)}catch(d){throw(e=this.logger)===null||e===void 0||e.error(`Failed to set sinkId for audio element: ${d}`),d}this.browserBehavior.hasChromiumWebRTC()&&(h.srcObject=p)})}getCurrentMeetingAudioStream(){return u(this,void 0,void 0,function*(){return this.audioStream})}addAudioMixObserver(i){return u(this,void 0,void 0,function*(){this.observers.add(i)})}removeAudioMixObserver(i){return u(this,void 0,void 0,function*(){this.observers.delete(i)})}audioOutputDidChange(i){return u(this,void 0,void 0,function*(){return this.logger.info("Receive an audio output change event"),this.bindAudioDevice(i)})}constructor(i){this.logger=i,this.audioDevice=null,this.audioElement=null,this.audioStream=null,this.browserBehavior=new v.default,this.observers=new Set}},"DefaultAudioMixController");l.default=s},4999349075:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(8351168186));let v=n(class Ff{static fullbandSpeechMono(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Ff(4e4,s)}static fullbandMusicMono(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Ff(64e3,s)}static fullbandMusicStereo(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Ff(128e3,s)}isStereo(){return this.audioBitrateBps===128e3}hasRedundancyEnabled(){return this.enableAudioRedundancy}constructor(s=null,a=!0){this.audioBitrateBps=s,this.enableAudioRedundancy=new m.default().supportsAudioRedundancy()&&a}},"AudioProfile");l.default=v},8430013536:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=void 0,l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=25;let c=n(class{resetConnectionSpecificState(){this.peer&&this.peer.close(),this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.transceiverController!==void 0&&this.transceiverController.reset(),this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.videoDownlinkBandwidthPolicy.reset(),this.videoUplinkBandwidthPolicy.reset&&this.videoUplinkBandwidthPolicy.reset(),this.lastVideosToReceive=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptions=null,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.videoDuplexMode=null}constructor(){this.logger=null,this.browserBehavior=null,this.meetingSessionConfiguration=null,this.signalingClient=null,this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.audioVideoController=null,this.realtimeController=null,this.videoTileController=null,this.mediaStreamBroker=null,this.activeAudioInput=void 0,this.activeVideoInput=void 0,this.audioMixController=null,this.transceiverController=null,this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.iceGatheringStateEventHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.reconnectController=null,this.removableObservers=[],this.audioProfile=null,this.videoStreamIndex=null,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.lastKnownVideoAvailability=null,this.videoCaptureAndEncodeParameter=null,this.videosToReceive=null,this.lastVideosToReceive=null,this.videoSubscriptions=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.videoSendCodecPreferences=[],this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.prioritizedSendVideoCodecCapabilities=[],this.degradedVideoSendCodecs=[],this.videosPaused=null,this.videoDuplexMode=null,this.volumeIndicatorAdapter=null,this.statsCollector=null,this.connectionMonitor=null,this.videoInputAttachedTimestampMs=0,this.audioDeviceInformation={},this.videoDeviceInformation={},this.enableSimulcast=!1,this.enableSVC=!1,this.eventController=null,this.signalingOpenDurationMs=null,this.iceGatheringDurationMs=null,this.startAudioVideoTimestamp=null,this.attendeePresenceDurationMs=null,this.meetingStartDurationMs=null,this.poorConnectionCount=0,this.maxVideoTileCount=0,this.startTimeMs=null}},"AudioVideoControllerState");l.default=c},616382858:function(H,l,c){"use strict";var u=this&&this.__createBinding||(Object.create?function(Y,fe,et,nt){nt===void 0&&(nt=et),Object.defineProperty(Y,nt,{enumerable:!0,get:function(){return fe[et]}})}:function(Y,fe,et,nt){nt===void 0&&(nt=et),Y[nt]=fe[et]}),m=this&&this.__setModuleDefault||(Object.create?function(Y,fe){Object.defineProperty(Y,"default",{enumerable:!0,value:fe})}:function(Y,fe){Y.default=fe}),v=this&&this.__importStar||function(Y){if(Y&&Y.__esModule)return Y;var fe={};if(Y!=null)for(var et in Y)et!=="default"&&Object.prototype.hasOwnProperty.call(Y,et)&&u(fe,Y,et);return m(fe,Y),fe},g=this&&this.__awaiter||function(Y,fe,et,nt){function nn(kt){return kt instanceof et?kt:new et(function(Jt){Jt(kt)})}return n(nn,"adopt"),new(et||(et=Promise))(function(kt,Jt){function Ke(Ye){try{x(nt.next(Ye))}catch(it){Jt(it)}}n(Ke,"fulfilled");function vt(Ye){try{x(nt.throw(Ye))}catch(it){Jt(it)}}n(vt,"rejected");function x(Ye){Ye.done?kt(Ye.value):nn(Ye.value).then(Ke,vt)}n(x,"step"),x((nt=nt.apply(Y,fe||[])).next())})},s=this&&this.__importDefault||function(Y){return Y&&Y.__esModule?Y:{default:Y}};Object.defineProperty(l,"__esModule",{value:!0});const a=s(c(3323583056)),i=s(c(3227886346)),e=s(c(4999349075)),t=s(c(8351168186)),r=s(c(3544934903)),o=s(c(1523356655)),f=s(c(8981226922)),h=s(c(3777990285)),p=s(c(4882394368)),d=s(c(1880578541)),y=s(c(4599834734)),S=s(c(2311029370)),b=s(c(5403024322)),_=s(c(3741513515)),C=s(c(4641929542)),w=s(c(3097552577)),R=s(c(953236500)),O=s(c(7338273141)),D=s(c(7258714924)),I=v(c(1448262436)),M=s(c(426218501)),k=s(c(4983545831)),N=c(5391134031),j=s(c(5954709649)),B=s(c(7063021350)),J=s(c(4019918320)),Q=s(c(7819987893)),oe=s(c(2918138407)),$=s(c(7869625838)),he=s(c(9613312866)),Ae=s(c(1495317641)),Ee=s(c(5110013894)),Oe=s(c(3708122413)),be=s(c(1504187181)),De=s(c(6907504899)),ut=s(c(6015743885)),St=s(c(3627106901)),Rt=s(c(3151098372)),Ze=s(c(9363406688)),mt=s(c(6069988831)),At=s(c(2452872079)),Vt=s(c(2471283351)),dt=s(c(3894566132)),Cn=s(c(6412210284)),gt=s(c(839180639)),Ut=s(c(2641934340)),en=s(c(3450261616)),sn=s(c(7500181884)),$t=s(c(6769427378)),Rn=s(c(1438956810)),di=s(c(2962876954)),ii=s(c(3052177122)),Kn=c(903520651),hi=s(c(8261422434)),Ln=s(c(7744958188)),Hn=s(c(1437705752)),ui=c(6700033168),jn=s(c(5134603106)),ri=s(c(5216544790)),ie=s(c(7562203998)),Mt=s(c(9251190564)),Ot=s(c(1695899970)),Ht=s(c(3361826027)),hn=s(c(3423911843)),tn=s(c(338869682)),xe=s(c(8430013536));let Dt=n(class Bf{destroy(){return g(this,void 0,void 0,function*(){this.observerQueue.clear(),this._mediaStreamBroker.removeMediaStreamBrokerObserver(this._audioMixController),this.destroyed=!0})}get configuration(){return this._configuration}get realtimeController(){return this._realtimeController}get activeSpeakerDetector(){return this._activeSpeakerDetector||(this._activeSpeakerDetector=new a.default(this._realtimeController,this._configuration.credentials.attendeeId,this.handleHasBandwidthPriority.bind(this))),this._activeSpeakerDetector}get videoTileController(){return this._videoTileController}get audioMixController(){return this._audioMixController}get logger(){return this._logger}get rtcPeerConnection(){return this.meetingSessionContext&&this.meetingSessionContext.peer||null}get mediaStreamBroker(){return this._mediaStreamBroker}get eventController(){return this._eventController}getRTCPeerConnectionStats(fe){return this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent||(this.logger.warn("The `getRTCPeerConnectionStats()` is on its way to be deprecated. It makes an additional call to the `getStats` API and therefore may cause slight performance degradation. Please use the new API `clientMetricReport.getRTCStatsReport()` returned by `metricsDidReceive(clientMetricReport)` callback instead."),this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!0),this.rtcPeerConnection?this.rtcPeerConnection.getStats(fe):null}setAudioProfile(fe){this._audioProfile=fe}addObserver(fe){this.logger.info("adding meeting observer"),this.observerQueue.add(fe)}removeObserver(fe){this.logger.info("removing meeting observer"),this.observerQueue.delete(fe)}forEachObserver(fe){for(const et of this.observerQueue)_.default.nextTick(()=>{this.observerQueue.has(et)&&fe(et)})}initSignalingClient(){this.connectionHealthData.reset(),!this.meetingSessionContext.signalingClient&&(this.meetingSessionContext=new xe.default,this.meetingSessionContext.logger=this.logger,this.meetingSessionContext.eventController=this.eventController,this.meetingSessionContext.browserBehavior=new t.default,this.meetingSessionContext.videoSendCodecPreferences=this.videoSendCodecPreferences,this.meetingSessionContext.audioProfile=this._audioProfile,this.meetingSessionContext.meetingSessionConfiguration=this.configuration,this.meetingSessionContext.signalingClient=new D.default(this._webSocketAdapter,this.logger))}uninstallPreStartObserver(){this.meetingSessionContext.signalingClient.removeObserver(this.preStartObserver),this.preStartObserver=void 0}prestart(){return this.logger.info("Pre-connecting signaling connection."),this.createOrReuseSignalingTask().run().then(()=>{const fe=n(()=>g(this,void 0,void 0,function*(){this.logger.info("Early connection closed; discarding signaling task."),this.signalingTask=void 0,this.uninstallPreStartObserver()}),"handleClosed");this.preStartObserver={handleSignalingClientEvent(et){et.type===M.default.WebSocketClosed&&fe()}},this.meetingSessionContext.signalingClient.registerObserver(this.preStartObserver)}).catch(fe=>{this.logger.error(`Signaling task pre-start failed: ${fe}`),this.signalingTask=void 0})}start(fe){this.startReturningPromise(fe).then(()=>{this.logger.info("start completed")}).catch(et=>{this.logger.error(`start failed: ${et}`)})}startReturningPromise(fe){return(fe==null?void 0:fe.signalingOnly)===!0?this.prestart():(this.activeSpeakerDetector,new Promise((et,nt)=>{this.sessionStateController.perform(w.default.Connect,()=>{this.actionConnect(!1).then(et).catch(nt)})}))}connectWithPromises(fe){const et=this.meetingSessionContext,nt=n((ge,Zn)=>new en.default(this.logger,Zn,ge),"timeout");this.monitorTask=new be.default(et,this.configuration.connectionHealthPolicyConfiguration,this.connectionHealthData);const nn=this.monitorTask.once(),kt=new Rt.default(et).once();this.receiveIndexTask=new At.default(et),this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();const Jt=new dt.default(this.logger,"Signaling",[this.createOrReuseSignalingTask(),new Oe.default(et),new Vt.default(et),new Ae.default(et),this.receiveIndexTask]).once(),Ke=new oe.default(et).once(Jt),vt=new B.default(et).once(Ke,kt),x=new $.default(et).once(vt),Ye=new Cn.default(et).once(x),it=new he.default(et).once(Ye),ft=new Ut.default(et).once(it);return this.receiveRemotePauseResumeTask=new Ze.default(et),this.receiveRemotePauseResumeTask.once(ft),new dt.default(this.logger,this.wrapTaskName("AudioVideoStart"),[nn,nt(this.configuration.connectionTimeoutMs,new dt.default(this.logger,"Peer",[ft,this.receiveRemotePauseResumeTask,fe?new en.default(this.logger,new ut.default(this.logger,"FinalizeConnection",[new sn.default(et),new gt.default(et)]),this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs):new gt.default(et)]))])}actionConnect(fe){var et;return g(this,void 0,void 0,function*(){this.initSignalingClient(),this.uninstallPreStartObserver(),this.meetingSessionContext.mediaStreamBroker=this._mediaStreamBroker,this.meetingSessionContext.realtimeController=this._realtimeController,this.meetingSessionContext.audioMixController=this._audioMixController,this.meetingSessionContext.audioVideoController=this,this.enableSimulcast=this.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&new t.default().hasChromiumWebRTC(),this.enableSimulcast&&this.configuration.enableSVC&&this.logger.warn("SVC cannot be enabled at the same time as simulcast. Disabling SVC, using simulcast."),this.enableSVC=!this.enableSimulcast&&this.configuration.enableSVC&&new t.default().supportsScalableVideoCoding();const nt=!!this.configuration.urls.audioHostURL;if(nt?this.enableSimulcast?(this.logger.info("Using transceiver controller with simulcast support"),new y.default(this.configuration.credentials.attendeeId).hasModality(y.default.MODALITY_CONTENT)?this.meetingSessionContext.transceiverController=new Rn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext):this.meetingSessionContext.transceiverController=new di.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using default transceiver controller"),this.meetingSessionContext.transceiverController=new $t.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using video only transceiver controller"),this.meetingSessionContext.transceiverController=new ii.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)),this.meetingSessionContext.volumeIndicatorAdapter=new tn.default(this.logger,this._realtimeController,Bf.MIN_VOLUME_DECIBELS,Bf.MAX_VOLUME_DECIBELS,this.configuration.credentials.attendeeId),this.meetingSessionContext.videoTileController=this._videoTileController,this.meetingSessionContext.videoDownlinkBandwidthPolicy=this.configuration.videoDownlinkBandwidthPolicy,this.meetingSessionContext.videoUplinkBandwidthPolicy=this.configuration.videoUplinkBandwidthPolicy,this.meetingSessionContext.enableSimulcast=this.enableSimulcast,this.meetingSessionContext.enableSVC=this.enableSVC,this.enableSimulcast){let Jt=this.meetingSessionContext.videoUplinkBandwidthPolicy;Jt||(Jt=new Ht.default(this.configuration.credentials.attendeeId,this.meetingSessionContext.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy=Jt),Jt.addObserver(this),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new Hn.default(this.meetingSessionContext.logger)),this.meetingSessionContext.videoStreamIndex=new ie.default(this.logger)}else this.meetingSessionContext.enableSimulcast=!1,this.meetingSessionContext.videoStreamIndex=new ri.default(this.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy||(this.meetingSessionContext.videoUplinkBandwidthPolicy=new hn.default(this.configuration.credentials.attendeeId,!this.meetingSessionContext.browserBehavior.disableResolutionScaleDown(),this.meetingSessionContext.logger,this.meetingSessionContext.browserBehavior),this.meetingSessionContext.videoUplinkBandwidthPolicy.setSVCEnabled(this.enableSVC)),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new Ln.default(this.configuration.credentials.attendeeId)),this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController&&this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController&&(this.useUpdateTransceiverControllerForUplink=!0,this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController(this.meetingSessionContext.transceiverController)),this.meetingSessionContext.audioProfile=this._audioProfile;if(new y.default(this.configuration.credentials.attendeeId).hasModality(y.default.MODALITY_CONTENT)){const Jt=this.configuration.meetingFeatures.contentMaxResolution===f.default.VideoResolutionUHD;Jt&&this.setVideoMaxBandwidthKbps(2500),this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Jt)}else{const Jt=this.configuration.meetingFeatures.videoMaxResolution===f.default.VideoResolutionFHD;this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Jt)}this.meetingSessionContext.videoUplinkBandwidthPolicy&&this.maxUplinkBandwidthKbps&&this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(this.maxUplinkBandwidthKbps),this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController(this._videoTileController),this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver(()=>this.update({needsRenegotiation:!1})),this.meetingSessionContext.lastKnownVideoAvailability=new d.default,this.meetingSessionContext.videoCaptureAndEncodeParameter=new hi.default(0,0,0,0,!1),this.meetingSessionContext.videosToReceive=new jn.default,this.meetingSessionContext.videosPaused=new jn.default,this.meetingSessionContext.statsCollector=new j.default(this,this.logger),this.meetingSessionContext.connectionMonitor=new o.default(this,this._realtimeController,this.connectionHealthData,new S.default(this.meetingSessionContext.signalingClient,Bf.PING_PONG_INTERVAL_MS,this.logger),this.meetingSessionContext.statsCollector),this.meetingSessionContext.reconnectController=this._reconnectController,this.meetingSessionContext.videoDeviceInformation={},fe||(this.totalRetryCount=0,this._reconnectController.reset(),this.startAudioVideoTimestamp=Date.now(),this.forEachObserver(Jt=>{Kn.Maybe.of(Jt.audioVideoDidStartConnecting).map(Ke=>Ke.bind(Jt)(!1))}),(et=this.eventController)===null||et===void 0||et.publishEvent("meetingStartRequested")),this.meetingSessionContext.startAudioVideoTimestamp=this.startAudioVideoTimestamp,this._reconnectController.hasStartedConnectionAttempt()?this._reconnectController.startedConnectionAttempt(!1):this._reconnectController.startedConnectionAttempt(!0);const nn=nt&&this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs>0;this.logger.info("Needs to wait for attendee presence? "+nn);const kt=this.connectWithPromises(nn);try{yield kt.run(),this.connectionHealthData.setConnectionStartTime(),this._mediaStreamBroker.addMediaStreamBrokerObserver(this),this.sessionStateController.perform(w.default.FinishConnecting,()=>{this.eventController&&(this.meetingSessionContext.meetingStartDurationMs=Date.now()-this.startAudioVideoTimestamp,this.eventController.publishEvent("meetingStartSucceeded",{maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,poorConnectionCount:this.meetingSessionContext.poorConnectionCount,retryCount:this.totalRetryCount,signalingOpenDurationMs:this.meetingSessionContext.signalingOpenDurationMs,iceGatheringDurationMs:this.meetingSessionContext.iceGatheringDurationMs,meetingStartDurationMs:this.meetingSessionContext.meetingStartDurationMs})),this.meetingSessionContext.startTimeMs=Date.now(),this.actionFinishConnecting()})}catch(Jt){this.signalingTask=void 0;const Ke=new h.default(this.getMeetingStatusCode(Jt)||p.default.TaskFailed);if(this.logger.info(`Start failed: ${Ke} due to error ${Jt}.`),this.sessionStateController.state()===R.default.NotConnected){this.logger.info("Start failed and not connected. Not cleaning up.");return}this.sessionStateController.perform(w.default.Fail,()=>g(this,void 0,void 0,function*(){yield this.actionDisconnect(Ke,!0,Jt),this.handleMeetingSessionStatus(Ke,Jt)||this.notifyStop(Ke,Jt)}))}})}createOrReuseSignalingTask(){return this.signalingTask||(this.initSignalingClient(),this.signalingTask=new en.default(this.logger,new De.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs).once()),this.signalingTask}actionFinishConnecting(){this.signalingTask=void 0,this.meetingSessionContext.videoDuplexMode=N.SdkStreamServiceType.RX,this.meetingSessionContext.enableSimulcast||(this.useUpdateTransceiverControllerForUplink?this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController():this.enforceBandwidthLimitationForSender(this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0])),this.forEachObserver(fe=>{Kn.Maybe.of(fe.audioVideoDidStart).map(et=>et.bind(fe)())}),this._reconnectController.reset(),this.receiveIndexTask.resumeIngestion(),this.monitorTask.resumeResubscribeCheck()}stopReturningPromise(){var fe;return this.sessionStateController.state()===R.default.NotConnected?((fe=this.meetingSessionContext.signalingClient)===null||fe===void 0||fe.closeConnection(),this.cleanUpMediaStreamsAfterStop(),Promise.resolve()):new Promise((et,nt)=>{this.sessionStateController.perform(w.default.Disconnect,()=>{this._reconnectController.disableReconnect(),this.logger.info("attendee left meeting, session will not be reconnected"),this.actionDisconnect(new h.default(p.default.Left),!1,null).then(et).catch(nt)})})}stop(){this.stopReturningPromise()}actionDisconnect(fe,et,nt){return g(this,void 0,void 0,function*(){try{yield new dt.default(this.logger,this.wrapTaskName("AudioVideoStop"),[new en.default(this.logger,new Ee.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)]).run()}catch{this.logger.info("fail to stop")}try{const nn=[new en.default(this.logger,new Q.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)];this.cleanUpMediaStreamsAfterStop(),yield new dt.default(this.logger,this.wrapTaskName("AudioVideoClean"),nn).run()}catch{this.logger.info("fail to clean")}this.sessionStateController.perform(w.default.FinishDisconnecting,()=>{et||this.notifyStop(fe,nt)})})}update(){let et=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{needsRenegotiation:!0}).needsRenegotiation;if(et||(et=this.meetingSessionContext.peer===void 0),et||(et=!this.updateRemoteVideosFromPolicy()),et||(et=!this.updateLocalVideoFromPolicy()),this.meetingSessionContext.lastVideosToReceive=this.meetingSessionContext.videosToReceive,!et)return this.logger.info("Update request does not require resubscribe"),this.actionFinishUpdating(),!0;this.logger.info("Update request requires resubscribe");const nt=this.sessionStateController.perform(w.default.Update,()=>{this.actionUpdateWithRenegotiation(!0)});return nt===O.default.Transitioned||nt===O.default.DeferredTransition}updateRemoteVideosFromPolicy(){if(this.meetingSessionContext.videoDownlinkBandwidthPolicy&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!I.serverSideNetworkAdaptionIsNoneOrDefault(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())){if(!this.sendRemoteVideoUpdate())return!1;if(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption()===I.default.BandwidthProbingAndRemoteVideoQualityAdaption)return this.isNotAddingOrRemovingStreams()}return this.updateRemoteVideosIfNotAddingOrRemovingStreams()}updateRemoteVideosIfNotAddingOrRemovingStreams(){const fe=this.detectChangesInVideosToReceive();if(fe===void 0)return!1;const et=fe.added,nt=fe.simulcastStreamUpdates,nn=fe.removed,kt=this.meetingSessionContext,Jt=[];for(const[Ke,vt]of nt.entries()){const x=new k.default;if(x.streamId=vt,x.attendeeId=kt.videoStreamIndex.attendeeIdForStreamId(vt),x.mid=kt.transceiverController.getMidForStreamId(Ke),x.mid===void 0)return this.logger.info(`No MID found for stream ID ${Ke}, cannot update stream without renegotiation`),!1;if(Jt.push(x),kt.transceiverController.setStreamIdForMid(x.mid,vt),kt.videoStreamIndex.overrideStreamIdMappings(Ke,vt),kt.videoTileController.haveVideoTileForAttendeeId(x.attendeeId)){const Ye=kt.videoTileController.getVideoTileForAttendeeId(x.attendeeId);if(!Ye.setStreamId)return!1;Ye.setStreamId(vt)}}return Jt.length!==0&&kt.signalingClient.remoteVideoUpdate(Jt,[]),et.length!==0||nn.length!==0?!1:(kt.videoStreamIndex.remoteVideoUpdateSent(),!0)}detectChangesInVideosToReceive(){const fe=this.meetingSessionContext;if(fe.videosToReceive===null||!fe.transceiverController||!fe.transceiverController.getMidForStreamId||!fe.transceiverController.setStreamIdForMid||!fe.videosToReceive.forEach||!fe.signalingClient.remoteVideoUpdate||!fe.videoStreamIndex.overrideStreamIdMappings)return;let et=[];const nt=new Map;let nn=[];if(fe.lastVideosToReceive===null)et=fe.videosToReceive.array();else{const kt=fe.videoStreamIndex;fe.videosToReceive.forEach(Jt=>{if(fe.lastVideosToReceive.contain(Jt))return;let Ke=!1;fe.lastVideosToReceive.forEach(vt=>{Ke||kt.StreamIdsInSameGroup(vt,Jt)&&(nt.set(vt,Jt),Ke=!0)}),Ke||et.push(Jt)}),nn=fe.lastVideosToReceive.array().filter(Jt=>{const Ke=fe.videosToReceive.contain(Jt),vt=nt.has(Jt);return!Ke&&!vt})}return this.logger.info(`Request to update remote videos with added: [${et}], updated: [${Array.from(nt.entries()).map(kt=>{let[Jt,Ke]=kt;return`${Jt}->${Ke}`}).join(",")}], removed: [${nn}]`),{added:et,removed:nn,simulcastStreamUpdates:nt}}isNotAddingOrRemovingStreams(){const fe=this.detectChangesInVideosToReceive();if(fe===void 0)return!1;const et=fe.added,nt=fe.removed;return et.length!==0||nt.length!==0?!1:(this.meetingSessionContext.videoStreamIndex.remoteVideoUpdateSent(),!0)}sendRemoteVideoUpdate(){const fe=this.meetingSessionContext;if(fe.videosToReceive===null)return!1;const et=fe.videosToReceive.array().map(Ke=>fe.videoStreamIndex.groupIdForStreamId(Ke));this.receiveRemotePauseResumeTask.updateSubscribedGroupdIds(new Set(et));const nt=ui.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(fe,et,fe.videoDownlinkBandwidthPolicy.getVideoPreferences()),nn=new Map,kt=[];for(const Ke of nt){let vt=!1;if(!fe.lastVideoSubscriptionConfiguration.has(Ke.groupId))vt=!0;else{const x=fe.lastVideoSubscriptionConfiguration.get(Ke.groupId);Ke.equals(x)||(this.logger.debug(`${JSON.stringify(Ke)} does not equal ${JSON.stringify(x)}, sending update`),vt=!0)}nn.set(Ke.groupId,Ke),vt&&kt.push(Ke)}fe.lastVideoSubscriptionConfiguration=nn;const Jt=[];if(fe.lastVideosToReceive!==null){const Ke=new Set(et);for(const vt of fe.lastVideosToReceive.array()){const x=fe.videoStreamIndex.groupIdForStreamId(vt);if(!Ke.has(x)){const Ye=fe.transceiverController.getMidForGroupId(x);if(Ye===void 0){fe.logger.warn(`Could not find MID for group ID to remove: ${x}`);continue}Jt.push(Ye)}}}return(kt.length!==0||Jt.length!==0)&&fe.signalingClient.remoteVideoUpdate(kt,Jt),!0}updateLocalVideoFromPolicy(){if(this.meetingSessionContext.enableSimulcast){const fe=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseEncodingParameters();if(this.mayNeedRenegotiationForSimulcastLayerChange&&this.meetingSessionContext.transceiverController.hasVideoInput()&&!this.negotiatedBitrateLayersAllocationRtpHeaderExtension())return this.logger.info("Needs regenotiation for local video simulcast layer change"),this.mayNeedRenegotiationForSimulcastLayerChange=!1,!1;this.meetingSessionContext.transceiverController.setEncodingParameters(fe)}else this.meetingSessionContext.videoCaptureAndEncodeParameter=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters();return this.logger.info("Updated local video from policy without renegotiation"),!0}negotiatedBitrateLayersAllocationRtpHeaderExtension(){if(!this.meetingSessionContext.transceiverController.localVideoTransceiver())return!1;const fe=this.meetingSessionContext.transceiverController.localVideoTransceiver().sender.getParameters();return!fe||!fe.headerExtensions?!1:fe.headerExtensions.some(et=>et.uri==="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00")}restartLocalVideo(fe){const et=n(()=>g(this,void 0,void 0,function*(){this._videoTileController.hasStartedLocalVideoTile()&&(this.logger.info("stopping local video tile prior to local video restart"),this._videoTileController.stopLocalVideoTile(),this.logger.info("preparing local video restart update"),yield this.actionUpdateWithRenegotiation(!1),this.logger.info("starting local video tile for local video restart"),this._videoTileController.startLocalVideoTile()),this.logger.info("finalizing local video restart update"),yield this.actionUpdateWithRenegotiation(!0),fe()}),"restartVideo"),nt=this.sessionStateController.perform(w.default.Update,()=>{et()});return nt===O.default.Transitioned||nt===O.default.DeferredTransition}replaceLocalVideo(fe){return g(this,void 0,void 0,function*(){if(!fe||fe.getVideoTracks().length<1)throw new Error("could not acquire video track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");const et=this.meetingSessionContext.videoTileController.getLocalVideoTile();if(et){const nt=et.state(),nn=fe.getVideoTracks()[0].getSettings();et.bindVideoStream(nt.boundAttendeeId,!0,fe,nn.width,nn.height,nt.streamId,nt.boundExternalUserId)}yield this.meetingSessionContext.transceiverController.setVideoInput(fe.getVideoTracks()[0]),this.meetingSessionContext.activeVideoInput=fe,this.logger.info("Local video input is updated")})}replaceLocalAudio(fe){return g(this,void 0,void 0,function*(){if(!fe||fe.getAudioTracks().length<1)throw new Error("could not acquire audio track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");if(this.connectionHealthData.reset(),this.connectionHealthData.setConnectionStartTime(),!(yield this.meetingSessionContext.transceiverController.replaceAudioTrack(fe.getAudioTracks()[0])))throw new Error("Failed to replace audio track");this.meetingSessionContext.activeAudioInput=fe,this.logger.info("Local audio input is updated")})}actionUpdateWithRenegotiation(fe){return g(this,void 0,void 0,function*(){this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();try{yield new dt.default(this.logger,this.wrapTaskName("AudioVideoUpdate"),[new mt.default(this.meetingSessionContext),new en.default(this.logger,new dt.default(this.logger,"UpdateSession",[new B.default(this.meetingSessionContext),new $.default(this.meetingSessionContext),new Cn.default(this.meetingSessionContext),new he.default(this.meetingSessionContext),new Ut.default(this.meetingSessionContext),new gt.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),fe&&this.sessionStateController.perform(w.default.FinishUpdating,()=>{this.actionFinishUpdating()})}catch(et){this.sessionStateController.perform(w.default.FinishUpdating,()=>{const nt=new h.default(this.getMeetingStatusCode(et)||p.default.TaskFailed);nt.statusCode()!==p.default.IncompatibleSDP&&this.logger.info("failed to update audio-video session"),this.handleMeetingSessionStatus(nt,et)})}})}notifyStop(fe,et){var nt;if(this.forEachObserver(nn=>{Kn.Maybe.of(nn.audioVideoDidStop).map(kt=>kt.bind(nn)(fe))}),this.eventController){const{signalingOpenDurationMs:nn,poorConnectionCount:kt,startTimeMs:Jt,iceGatheringDurationMs:Ke,attendeePresenceDurationMs:vt,meetingStartDurationMs:x}=this.meetingSessionContext,Ye={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Jt===null?0:Math.round(Date.now()-Jt),meetingStatus:p.default[fe.statusCode()],signalingOpenDurationMs:nn,iceGatheringDurationMs:Ke,attendeePresenceDurationMs:vt,poorConnectionCount:kt,meetingStartDurationMs:x,retryCount:this.totalRetryCount},it=et&&et.message||((nt=fe.toString)===null||nt===void 0?void 0:nt.call(fe))||"";Ye.meetingDurationMs===0?(Ye.meetingErrorMessage=it,delete Ye.meetingDurationMs,delete Ye.attendeePresenceDurationMs,delete Ye.meetingStartDurationMs,this.eventController.publishEvent("meetingStartFailed",Ye)):fe.isFailure()||fe.isAudioConnectionFailure()?(Ye.meetingErrorMessage=it,this.eventController.publishEvent("meetingFailed",Ye)):this.eventController.publishEvent("meetingEnded",Ye)}}actionFinishUpdating(){if(!this.meetingSessionContext.enableSimulcast)if(this.useUpdateTransceiverControllerForUplink)this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();else{const fe=this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0];this.enforceBandwidthLimitationForSender(fe)}this.monitorTask.resumeResubscribeCheck(),this.receiveIndexTask.resumeIngestion(),this.logger.info("updated audio-video session")}reconnect(fe,et){this.promotedToPrimaryMeeting&&(this.promotedToPrimaryMeeting=!1,this.forEachObserver(nn=>{Kn.Maybe.of(nn.audioVideoWasDemotedFromPrimaryMeeting).map(kt=>kt.bind(nn)(new h.default(p.default.AudioVideoDisconnectedWhilePromoted)))}));const nt=this._reconnectController.retryWithBackoff(()=>g(this,void 0,void 0,function*(){this.sessionStateController.state()===R.default.NotConnected?this.sessionStateController.perform(w.default.Connect,()=>{this.actionConnect(!0)}):this.sessionStateController.perform(w.default.Reconnect,()=>{this.actionReconnect(fe)}),this.totalRetryCount+=1}),()=>{this.logger.info("canceled retry")});return nt||this.sessionStateController.perform(w.default.Fail,()=>{this.actionDisconnect(fe,!1,et)}),nt}actionReconnect(fe){return g(this,void 0,void 0,function*(){this._reconnectController.hasStartedConnectionAttempt()||(this._reconnectController.startedConnectionAttempt(!1),this.forEachObserver(et=>{Kn.Maybe.of(et.audioVideoDidStartConnecting).map(nt=>nt.bind(et)(!0))})),this.meetingSessionContext.volumeIndicatorAdapter.onReconnect(),this.connectionHealthData.reset(),this.receiveRemotePauseResumeTask=new Ze.default(this.meetingSessionContext);try{yield new dt.default(this.logger,this.wrapTaskName("AudioVideoReconnect"),[new en.default(this.logger,new dt.default(this.logger,"Media",[new J.default(this.meetingSessionContext),new dt.default(this.logger,"Signaling",[new De.default(this.meetingSessionContext),new Ae.default(this.meetingSessionContext)]),new oe.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs),new mt.default(this.meetingSessionContext),new en.default(this.logger,new dt.default(this.logger,"UpdateSession",[new B.default(this.meetingSessionContext),new $.default(this.meetingSessionContext),new Cn.default(this.meetingSessionContext),new he.default(this.meetingSessionContext),new Ut.default(this.meetingSessionContext),new gt.default(this.meetingSessionContext),this.receiveRemotePauseResumeTask]),this.configuration.connectionTimeoutMs)]).run(),this.sessionStateController.perform(w.default.FinishConnecting,()=>{if(this.eventController){const{signalingOpenDurationMs:et,poorConnectionCount:nt,startTimeMs:nn,iceGatheringDurationMs:kt,attendeePresenceDurationMs:Jt,meetingStartDurationMs:Ke}=this.meetingSessionContext,vt={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Math.round(Date.now()-nn),meetingStatus:p.default[fe.statusCode()],signalingOpenDurationMs:et,iceGatheringDurationMs:kt,attendeePresenceDurationMs:Jt,poorConnectionCount:nt,meetingStartDurationMs:Ke,retryCount:this.totalRetryCount};this.eventController.publishEvent("meetingReconnected",vt)}this.actionFinishConnecting()})}catch(et){this.sessionStateController.perform(w.default.FinishConnecting,()=>{this.logger.info("failed to reconnect audio-video session");const nt=new h.default(this.getMeetingStatusCode(et)||p.default.TaskFailed);this.handleMeetingSessionStatus(nt,et)})}this.connectionHealthData.setConnectionStartTime()})}wrapTaskName(fe){return`${fe}/${this.configuration.meetingId}/${this.configuration.credentials.attendeeId}`}cleanUpMediaStreamsAfterStop(){this._mediaStreamBroker.removeMediaStreamBrokerObserver(this),this.meetingSessionContext.activeAudioInput=void 0,this.meetingSessionContext.activeVideoInput=void 0}getMeetingStatusCode(fe){const et=/the meeting status code: (\d+)/.exec(fe&&fe.message);return et&&et.length>1?Number.parseInt(et[1],10):null}enforceBandwidthLimitationForSender(fe){return g(this,void 0,void 0,function*(){yield this.meetingSessionContext.transceiverController.setVideoSendingBitrateKbps(fe)})}handleMeetingSessionStatus(fe,et){if(this.logger.info(`handling status: ${p.default[fe.statusCode()]}`),fe.isTerminal()||this.meetingSessionContext.statsCollector&&this.meetingSessionContext.statsCollector.logMeetingSessionStatus(fe),fe.statusCode()===p.default.IncompatibleSDP)return this.restartLocalVideo(()=>{this.logger.info("handled incompatible SDP by attempting to restart video")}),!0;if(fe.statusCode()===p.default.VideoCallSwitchToViewOnly)return this._videoTileController.removeLocalVideoTile(),this.forEachObserver(nt=>{Kn.Maybe.of(nt.videoSendDidBecomeUnavailable).map(nn=>nn.bind(nt)())}),!1;if(fe.statusCode()===p.default.AudioVideoWasRemovedFromPrimaryMeeting)return this.forEachObserver(nt=>{Kn.Maybe.of(nt.audioVideoWasDemotedFromPrimaryMeeting).map(nn=>nn.bind(nt)(fe))}),!1;if(fe.isTerminal()&&(this.logger.error("session will not be reconnected"),this.meetingSessionContext.reconnectController&&this.meetingSessionContext.reconnectController.disableReconnect()),(fe.isFailure()||fe.isTerminal())&&this.meetingSessionContext.reconnectController){const nt=this.reconnect(fe,et);return nt?this.logger.warn(`will retry due to status code ${p.default[fe.statusCode()]}${et?` and error: ${et.message}`:""}`):this.logger.error(`failed with status code ${p.default[fe.statusCode()]}${et?` and error: ${et.message}`:""}`),nt}return!1}setVideoMaxBandwidthKbps(fe){if(fe<=0)throw new Error("Max bandwidth kbps has to be greater than 0");this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&(this.logger.info(`video send has ideal max bandwidth ${fe} kbps`),this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(fe)),this.maxUplinkBandwidthKbps=fe}handleHasBandwidthPriority(fe){return g(this,void 0,void 0,function*(){if(this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&!this.meetingSessionContext.enableSimulcast){if(this.useUpdateTransceiverControllerForUplink){this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(fe),yield this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();return}const et=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(fe);const nt=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();et!==nt&&(this.logger.info(`video send bandwidth priority ${fe} max has changed from ${et} kbps to ${nt} kbps`),yield this.enforceBandwidthLimitationForSender(nt))}})}pauseReceivingStream(fe){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.pause([fe])}resumeReceivingStream(fe){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.resume([fe])}setVideoCodecSendPreferences(fe){this.videoSendCodecPreferences=fe,this.meetingSessionContext.videoSendCodecPreferences=fe,this.sessionStateController.state()!==R.default.NotConnected&&this.update({needsRenegotiation:!0})}getRemoteVideoSources(){const{videoStreamIndex:fe}=this.meetingSessionContext;if(!fe)return this.logger.info("meeting has not started"),[];const et=this.configuration.credentials.attendeeId;return fe.allVideoSendingSourcesExcludingSelf(et)}encodingSimulcastLayersDidChange(fe){this.mayNeedRenegotiationForSimulcastLayerChange=!0,this.forEachObserver(et=>{Kn.Maybe.of(et.encodingSimulcastLayersDidChange).map(nt=>nt.bind(et)(fe))})}promoteToPrimaryMeeting(fe){return this.actionPromoteToPrimaryMeeting(fe)}actionPromoteToPrimaryMeeting(fe){return g(this,void 0,void 0,function*(){let et=new h.default(p.default.SignalingRequestFailed);return yield new dt.default(this.logger,this.wrapTaskName("PromoteToPrimaryMeeting"),[new en.default(this.logger,new St.default(this.meetingSessionContext,fe,nt=>{et=nt}),this.configuration.connectionTimeoutMs)]).run(),this.promotedToPrimaryMeeting=et.statusCode()===p.default.OK,et})}demoteFromPrimaryMeeting(){this.meetingSessionContext.signalingClient.demoteFromPrimaryMeeting(),this.forEachObserver(fe=>{Kn.Maybe.of(fe.audioVideoWasDemotedFromPrimaryMeeting).map(et=>et.bind(fe)(new h.default(p.default.OK)))})}videoInputDidChange(fe){return g(this,void 0,void 0,function*(){if(this.logger.info("Receive a video input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating video input because there is no active meeting and peer connection");return}this._videoTileController.hasStartedLocalVideoTile()&&(fe?yield this.replaceLocalVideo(fe):this._videoTileController.stopLocalVideoTile())})}audioInputDidChange(fe){return g(this,void 0,void 0,function*(){if(this.logger.info("Receive an audio input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating audio input because there is no active meeting and peer connection");return}if(!fe)try{fe=yield this.mediaStreamBroker.acquireAudioInputStream()}catch{this.logger.error("Could not acquire audio track from mediaStreamBroker");return}yield this.replaceLocalAudio(fe)})}constructor(fe,et,nt,nn,kt,Jt){this._audioProfile=new e.default,this.connectionHealthData=new r.default,this.observerQueue=new Set,this.meetingSessionContext=new xe.default,this.enableSimulcast=!1,this.enableSVC=!1,this.useUpdateTransceiverControllerForUplink=!1,this.totalRetryCount=0,this.startAudioVideoTimestamp=0,this.mayNeedRenegotiationForSimulcastLayerChange=!1,this.promotedToPrimaryMeeting=!1,this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!1,this.receiveIndexTask=void 0,this.monitorTask=void 0,this.receiveRemotePauseResumeTask=void 0,this.destroyed=!1,this._logger=et,this.sessionStateController=new C.default(this._logger),this._configuration=fe,this._webSocketAdapter=nt,this._realtimeController=new b.default(nn),this._realtimeController.realtimeSetLocalAttendeeId(fe.credentials.attendeeId,fe.credentials.externalUserId),this._mediaStreamBroker=nn,this._reconnectController=kt,this._videoTileController=new Mt.default(new Ot.default,this,this._logger),this._audioMixController=new i.default(this._logger),this._mediaStreamBroker.addMediaStreamBrokerObserver(this._audioMixController),this.meetingSessionContext.logger=this._logger,this._eventController=Jt}},"DefaultAudioVideoController");l.default=Dt,Dt.MIN_VOLUME_DECIBELS=-42,Dt.MAX_VOLUME_DECIBELS=-14,Dt.PING_PONG_INTERVAL_MS=1e4},1292880771:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(5384631890)),v=u(c(1653454410)),g=u(c(9416545472)),s=u(c(1946951215)),a=u(c(7136804647)),i=u(c(7147499759)),e=u(c(3777990285)),t=u(c(4882394368)),r=u(c(2653083101)),o=u(c(8855787924)),f=u(c(8796204466)),h=u(c(616382858));let p=n(class extends h.default{setAudioProfile(y){}start(){}stop(){}promoteToPrimaryMeeting(y){return Promise.resolve(new e.default(t.default.OK))}demoteFromPrimaryMeeting(){}constructor(y){const S=new a.default;S.meetingId="",S.externalMeetingId="",S.credentials=new i.default,S.credentials.attendeeId="",S.credentials.joinToken="",S.urls=new r.default,S.urls.turnControlURL="",S.urls.audioHostURL="",S.urls.signalingURL="wss://localhost/";const b=new g.default;super(y||S,b,new f.default(new g.default),new s.default,new o.default(0,new m.default(0,0,0)),new v.default(y||S,b))}},"NoOpAudioVideoController");l.default=p},314828250:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(g,s,a,i){function e(t){return t instanceof a?t:new a(function(r){r(t)})}return n(e,"adopt"),new(a||(a=Promise))(function(t,r){function o(p){try{h(i.next(p))}catch(d){r(d)}}n(o,"fulfilled");function f(p){try{h(i.throw(p))}catch(d){r(d)}}n(f,"rejected");function h(p){p.done?t(p.value):e(p.value).then(o,f)}n(h,"step"),h((i=i.apply(g,s||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const m=c(272852764);let v=n(class{addObserver(s){this.audioVideoController.addObserver(s),this.trace("addObserver")}removeObserver(s){this.audioVideoController.removeObserver(s),this.trace("removeObserver")}setAudioProfile(s){this.trace("setAudioProfile",s),this.audioVideoController.setAudioProfile(s)}start(s){this.audioVideoController.start(s),this.trace("start")}stop(){this.audioVideoController.stop(),this.trace("stop")}getRTCPeerConnectionStats(s){return this.trace("getRTCPeerConnectionStats",s?s.id:null),this.audioVideoController.getRTCPeerConnectionStats(s)}bindAudioElement(s){const a=this.audioMixController.bindAudioElement(s);return this.trace("bindAudioElement",s.id,a),a}unbindAudioElement(){this.audioMixController.unbindAudioElement(),this.trace("unbindAudioElement")}getCurrentMeetingAudioStream(){return this.trace("getCurrentConferenceStream"),this.audioMixController.getCurrentMeetingAudioStream()}addAudioMixObserver(s){this.trace("addAudioMixObserver"),this.audioMixController.addAudioMixObserver(s)}removeAudioMixObserver(s){this.trace("removeAudioMixObserver"),this.audioMixController.removeAudioMixObserver(s)}bindVideoElement(s,a){this.videoTileController.bindVideoElement(s,a),this.trace("bindVideoElement",{tileId:s,videoElementId:a.id})}unbindVideoElement(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.videoTileController.unbindVideoElement(s,a),this.trace("unbindVideoElement",{tileId:s,cleanUpVideoElement:a})}startLocalVideoTile(){const s=this.videoTileController.startLocalVideoTile();return this.trace("startLocalVideoTile",null,s),s}stopLocalVideoTile(){this.videoTileController.stopLocalVideoTile(),this.trace("stopLocalVideoTile")}hasStartedLocalVideoTile(){const s=this.videoTileController.hasStartedLocalVideoTile();return this.trace("hasStartedLocalVideoTile",null,s),s}removeLocalVideoTile(){this.videoTileController.removeLocalVideoTile(),this.trace("removeLocalVideoTile")}getLocalVideoTile(){const s=this.videoTileController.getLocalVideoTile();return this.trace("getLocalVideoTile"),s}pauseVideoTile(s){this.videoTileController.pauseVideoTile(s),this.trace("pauseVideoTile",s)}unpauseVideoTile(s){this.videoTileController.unpauseVideoTile(s),this.trace("unpauseVideoTile",s)}getVideoTile(s){const a=this.videoTileController.getVideoTile(s);return this.trace("getVideoTile",s),a}getAllRemoteVideoTiles(){const s=this.videoTileController.getAllRemoteVideoTiles();return this.trace("getAllRemoteVideoTiles"),s}getAllVideoTiles(){const s=this.videoTileController.getAllVideoTiles();return this.trace("getAllVideoTiles"),s}addVideoTile(){const s=this.videoTileController.addVideoTile();return this.trace("addVideoTile",null,s.state()),s}removeVideoTile(s){this.videoTileController.removeVideoTile(s),this.trace("removeVideoTile",s)}removeVideoTilesByAttendeeId(s){const a=this.videoTileController.removeVideoTilesByAttendeeId(s);return this.trace("removeVideoTilesByAttendeeId",s,a),a}removeAllVideoTiles(){this.videoTileController.removeAllVideoTiles(),this.trace("removeAllVideoTiles")}captureVideoTile(s){const a=this.videoTileController.captureVideoTile(s);return this.trace("captureVideoTile",s),a}realtimeSubscribeToAttendeeIdPresence(s){this.realtimeController.realtimeSubscribeToAttendeeIdPresence(s),this.trace("realtimeSubscribeToAttendeeIdPresence")}realtimeUnsubscribeToAttendeeIdPresence(s){this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(s),this.trace("realtimeUnsubscribeToAttendeeIdPresence")}realtimeSetCanUnmuteLocalAudio(s){this.realtimeController.realtimeSetCanUnmuteLocalAudio(s),this.trace("realtimeSetCanUnmuteLocalAudio",s)}realtimeSubscribeToSetCanUnmuteLocalAudio(s){this.realtimeController.realtimeSubscribeToSetCanUnmuteLocalAudio(s),this.trace("realtimeSubscribeToSetCanUnmuteLocalAudio")}realtimeUnsubscribeToSetCanUnmuteLocalAudio(s){this.realtimeController.realtimeUnsubscribeToSetCanUnmuteLocalAudio(s),this.trace("realtimeUnsubscribeToSetCanUnmuteLocalAudio")}realtimeCanUnmuteLocalAudio(){const s=this.realtimeController.realtimeCanUnmuteLocalAudio();return this.trace("realtimeCanUnmuteLocalAudio",null,s),s}realtimeMuteLocalAudio(){this.realtimeController.realtimeMuteLocalAudio(),this.trace("realtimeMuteLocalAudio")}realtimeUnmuteLocalAudio(){const s=this.realtimeController.realtimeUnmuteLocalAudio();return this.trace("realtimeUnmuteLocalAudio"),s}realtimeSubscribeToMuteAndUnmuteLocalAudio(s){this.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(s),this.trace("realtimeSubscribeToMuteAndUnmuteLocalAudio")}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(s){this.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(s),this.trace("realtimeUnsubscribeToMuteAndUnmuteLocalAudio")}realtimeIsLocalAudioMuted(){const s=this.realtimeController.realtimeIsLocalAudioMuted();return this.trace("realtimeIsLocalAudioMuted"),s}realtimeSubscribeToVolumeIndicator(s,a){this.realtimeController.realtimeSubscribeToVolumeIndicator(s,a),this.trace("realtimeSubscribeToVolumeIndicator",s)}realtimeUnsubscribeFromVolumeIndicator(s,a){this.realtimeController.realtimeUnsubscribeFromVolumeIndicator(s,a),this.trace("realtimeUnsubscribeFromVolumeIndicator",s,a)}realtimeSubscribeToLocalSignalStrengthChange(s){this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(s),this.trace("realtimeSubscribeToLocalSignalStrengthChange")}realtimeUnsubscribeToLocalSignalStrengthChange(s){this.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(s),this.trace("realtimeUnsubscribeToLocalSignalStrengthChange")}realtimeSendDataMessage(s,a,i){this.realtimeController.realtimeSendDataMessage(s,a,i),this.trace("realtimeSendDataMessage")}realtimeSubscribeToReceiveDataMessage(s,a){this.realtimeController.realtimeSubscribeToReceiveDataMessage(s,a),this.trace("realtimeSubscribeToReceiveDataMessage")}realtimeUnsubscribeFromReceiveDataMessage(s){this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(s),this.trace("realtimeUnsubscribeFromReceiveDataMessage")}realtimeSubscribeToFatalError(s){this.realtimeController.realtimeSubscribeToFatalError(s),this.trace("realtimeSubscribeToFatalError")}realtimeUnsubscribeToFatalError(s){this.realtimeController.realtimeUnsubscribeToFatalError(s),this.trace("realtimeUnsubscribeToFatalError")}subscribeToActiveSpeakerDetector(s,a,i,e){this.audioVideoController.activeSpeakerDetector.subscribe(s,a,i,e),this.trace("subscribeToActiveSpeakerDetector")}unsubscribeFromActiveSpeakerDetector(s){this.audioVideoController.activeSpeakerDetector.unsubscribe(s),this.trace("unsubscribeFromActiveSpeakerDetector")}listAudioInputDevices(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const a=yield this.deviceController.listAudioInputDevices(s);return this.trace("listAudioInputDevices",s,a),a})}listVideoInputDevices(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const a=yield this.deviceController.listVideoInputDevices(s);return this.trace("listVideoInputDevices",s,a),a})}listAudioOutputDevices(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const a=yield this.deviceController.listAudioOutputDevices(s);return this.trace("listAudioOutputDevices",s,a),a})}startAudioInput(s){return u(this,void 0,void 0,function*(){return this.trace("startAudioInput",s),this.deviceController.startAudioInput(s)})}stopAudioInput(){return u(this,void 0,void 0,function*(){return this.trace("stopAudioInput"),this.deviceController.stopAudioInput()})}startVideoInput(s){return u(this,void 0,void 0,function*(){return m.isVideoTransformDevice(s)?this.trace("startVideoInput with transform device"):this.trace("startVideoInput",s),this.deviceController.startVideoInput(s)})}stopVideoInput(){return u(this,void 0,void 0,function*(){return this.trace("stopVideoInput"),this.deviceController.stopVideoInput()})}chooseAudioOutput(s){const a=this.deviceController.chooseAudioOutput(s);return this.trace("chooseAudioOutput",s),a}addDeviceChangeObserver(s){this.deviceController.addDeviceChangeObserver(s),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(s){this.deviceController.removeDeviceChangeObserver(s),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){const s=this.deviceController.createAnalyserNodeForAudioInput();return this.trace("createAnalyserNodeForAudioInput"),s}startVideoPreviewForVideoInput(s){this.deviceController.startVideoPreviewForVideoInput(s),this.trace("startVideoPreviewForVideoInput",s.id)}stopVideoPreviewForVideoInput(s){this.deviceController.stopVideoPreviewForVideoInput(s),this.trace("stopVideoPreviewForVideoInput",s.id)}setDeviceLabelTrigger(s){this.deviceController.setDeviceLabelTrigger(s),this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(s){const a=this.deviceController.mixIntoAudioInput(s);return this.trace("mixIntoAudioInput",s.id),a}chooseVideoInputQuality(s,a,i){this.deviceController.chooseVideoInputQuality(s,a,i),this.trace("chooseVideoInputQuality",{width:s,height:a,frameRate:i})}setVideoMaxBandwidthKbps(s){this.audioVideoController.setVideoMaxBandwidthKbps(s),this.trace("setVideoMaxBandwidthKbps",s)}setVideoCodecSendPreferences(s){this.audioVideoController.setVideoCodecSendPreferences(s),this.trace("setVideoCodecSendPreferences",s)}getVideoInputQualitySettings(){const s=this.deviceController.getVideoInputQualitySettings();return this.trace("getVideoInputQualitySettings"),s}setContentAudioProfile(s){this.trace("setContentAudioProfile",s),this.contentShareController.setContentAudioProfile(s)}enableSimulcastForContentShare(s,a){this.trace("enableSimulcastForContentShare"),this.contentShareController.enableSimulcastForContentShare(s,a)}enableSVCForContentShare(s){this.trace("enableSVCForContentShare"),this.contentShareController.enableSVCForContentShare(s)}startContentShare(s){const a=this.contentShareController.startContentShare(s);return this.trace("startContentShare"),a}startContentShareFromScreenCapture(s,a){const i=this.contentShareController.startContentShareFromScreenCapture(s,a);return this.trace("startContentShareFromScreenCapture"),i}pauseContentShare(){this.contentShareController.pauseContentShare(),this.trace("pauseContentShare")}unpauseContentShare(){this.contentShareController.unpauseContentShare(),this.trace("unpauseContentShare")}stopContentShare(){this.contentShareController.stopContentShare(),this.trace("stopContentShare")}addContentShareObserver(s){this.contentShareController.addContentShareObserver(s),this.trace("addContentShareObserver")}removeContentShareObserver(s){this.contentShareController.removeContentShareObserver(s),this.trace("removeContentShareObserver")}setContentShareVideoCodecPreferences(s){this.contentShareController.setContentShareVideoCodecPreferences(s),this.trace("setContentShareVideoCodecPreferences")}trace(s,a,i){const e=this.audioVideoController.configuration.meetingId,t=this.audioVideoController.configuration.credentials.attendeeId;let r=`API/DefaultAudioVideoFacade/${e}/${t}/${s}`;typeof a<"u"&&(r+=` ${JSON.stringify(a)}`),typeof i<"u"&&(r+=` -> ${JSON.stringify(i)}`),this.audioVideoController.logger.info(r)}getRemoteVideoSources(){const s=this.audioVideoController.getRemoteVideoSources();return this.trace("getRemoteVideoSources",null,s),s}get transcriptionController(){return this.realtimeController.transcriptionController}promoteToPrimaryMeeting(s){this.audioVideoController.removeObserver(this),this.audioVideoController.addObserver(this);const a=this.audioVideoController.promoteToPrimaryMeeting(s);return this.trace("promoteToPrimaryMeeting",null,a),a}demoteFromPrimaryMeeting(){this.trace("demoteFromPrimaryMeeting"),this.audioVideoController.demoteFromPrimaryMeeting()}audioVideoWasDemotedFromPrimaryMeeting(s){this.contentShareController.stopContentShare(),this.audioVideoController.removeObserver(this)}constructor(s,a,i,e,t,r){this.audioVideoController=s,this.videoTileController=a,this.realtimeController=i,this.audioMixController=e,this.deviceController=t,this.contentShareController=r}},"DefaultAudioVideoFacade");l.default=v},5565992874:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(9775024432)),g=c(9721779232);let s=n(class extends v.default{drawImageWithMask(i,e){const t=this.blurredImage,{canvasCtx:r,targetCanvas:o}=this,{width:f,height:h}=o;if(!e||!t){r.clearRect(0,0,f,h);return}this.scaledCanvas.getContext("2d").putImageData(e,0,0),this.blurCanvasCtx.putImageData(this.blurredImage,0,0),r.save(),r.clearRect(0,0,f,h),r.drawImage(this.scaledCanvas,0,0,f,h),r.globalCompositeOperation="source-in",r.drawImage(i,0,0,f,h),r.globalCompositeOperation="destination-over",r.drawImage(this.blurCanvas,0,0,f,h),r.restore()}setBlurStrength(i){if(super.setBlurStrength(i),this.worker){this.modelInitialized=!1,this.worker.postMessage({msg:"destroy"});const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}})}}setBlurPixels(){this.blurAmount=g.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:540}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}handleInitialize(i){if(this.logger.info(`received initialize message: ${this.stringify(i)}`),!i.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}}),this.initWorkerPromise.resolve({})}handlePredict(i){this.blurredImage=i.payload.blurOutput,super.handlePredict(i)}destroy(){const i=Object.create(null,{destroy:{get:()=>super.destroy}});var e;return u(this,void 0,void 0,function*(){i.destroy.call(this),(e=this.blurCanvas)===null||e===void 0||e.remove(),this.blurCanvas=void 0})}constructor(i,e){super(i,e),this.blurCanvas=document.createElement("canvas"),this.blurCanvasCtx=this.blurCanvas.getContext("2d"),this.blurCanvas.width=this.spec.model.input.width,this.blurCanvas.height=this.spec.model.input.height,this.logger.info("BackgroundBlur processor using builtin blur")}},"BackgroundBlurProcessorBuiltIn");l.default=s},9775024432:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(8080066655)),g=c(9721779232),s=m(c(9387566064));let a=n(class extends v.default{validateOptions(e){if(super.validateOptions(e),!e.blurStrength)throw new Error("processor has null options - blurStrength")}initOnFirstExecution(){this.setBlurPixels()}drawImageWithMask(e,t){t||(t=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(t,0,0);const{canvasCtx:o,targetCanvas:f}=this,{width:h,height:p}=f;o.save(),o.clearRect(0,0,h,p),o.drawImage(this.scaledCanvas,0,0,h,p),o.globalCompositeOperation="source-in",o.drawImage(e,0,0,h,p),o.globalCompositeOperation="destination-over",o.filter=`blur(${this.blurAmount}px)`,o.drawImage(e,0,0,f.width,f.height),o.restore()}setBlurStrength(e){this._blurStrength=e,this.logger.info(`blur strength set to ${this._blurStrength}`),this.setBlurPixels()}setBlurPixels(){this.blurAmount=g.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:this.sourceHeight}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}addObserver(e){this.delegate.addObserver(e)}removeObserver(e){this.delegate.removeObserver(e)}static isSupported(){return u(this,void 0,void 0,function*(){const e=document.createElement("canvas"),t=e.getContext("2d").filter!==void 0;return e.remove(),t})}setEventController(e){this.eventController?this.eventController=e:(this.eventController=e,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const e={backgroundBlurEnabled:"true",backgroundBlurStrength:this._blurStrength,backgroundReplacementEnabled:"false",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",e)}constructor(e,t){super("background blur",e,t,new s.default),this.blurAmount=0,this.setBlurStrength(t.blurStrength),this.logger.info("BackgroundBlur processor successfully created"),this.logger.info(`BackgroundBlur spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundBlur options: ${this.stringify(t)}`)}},"BackgroundBlurProcessorProvided");l.default=a},9721779232:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.BlurStrengthMapper=void 0;const c={LOW:7,MEDIUM:15,HIGH:30};let u=n(class{static getBlurAmount(v,g){if(v<=0)throw new Error(`invalid value for blur strength: ${v}`);return Math.round(v*g.height/this.BLUR_STRENGTH_DIVISOR)}},"BlurStrengthMapper");l.BlurStrengthMapper=u,u.BLUR_STRENGTH_DIVISOR=540,l.default=c},7840699215:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(f,h,p,d){function y(S){return S instanceof p?S:new p(function(b){b(S)})}return n(y,"adopt"),new(p||(p=Promise))(function(S,b){function _(R){try{w(d.next(R))}catch(O){b(O)}}n(_,"fulfilled");function C(R){try{w(d.throw(R))}catch(O){b(O)}}n(C,"rejected");function w(R){R.done?S(R.value):y(R.value).then(_,C)}n(w,"step"),w((d=d.apply(f,h||[])).next())})},m=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(6292069043)),g=m(c(5956893594)),s=m(c(3756404293)),a=m(c(7000795223)),i=m(c(5565992874)),e=m(c(9775024432)),t=m(c(9721779232));let r=n(class extends a.default{setBlurStrength(){}loadAssets(){return u(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}},"NoOpBackgroundBlurProcessor"),o=n(class yu extends v.default{static create(h,p){return u(this,void 0,void 0,function*(){h=yu.resolveSpec(h),p=yu.resolveOptions(p);const{logger:d}=p,y=yield yu.isSupported(h,p);if(d.info(`processor is ${y?"":"not"} supported`),!y)return d.warn("Using no-op processor because background blur is not supported"),new r;let S;return(yield e.default.isSupported())?(d.info("Using browser-provided background blur"),S=new e.default(h,p)):(d.info("Using built-in background blur"),S=new i.default(h,p)),yield S.loadAssets(),S})}static resolveOptions(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=Object.assign({},h);return p.blurStrength||(p.blurStrength=t.default.MEDIUM),p.logger||(p.logger=new g.default("BackgroundBlurProcessor",s.default.INFO)),p=super.resolveOptions(p),p}static isSupported(h,p){return h=yu.resolveSpec(h),p=yu.resolveOptions(p),super.isSupported(h,p)}},"BackgroundBlurVideoFrameProcessor");l.default=o},9387566064:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(7898988988));let v=n(class extends m.default{},"BackgroundBlurVideoFrameProcessorDelegate");l.default=v},7472936477:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class kv{static builder(){return new kv}withDefaultModel(){return this.withSelfieSegmentationDefaults()}withSelfieSegmentationDefaults(){const m={height:144,width:256,range:[0,1],channels:3},v={height:144,width:256,range:[0,1],channels:1},g="https://static.sdkassets.chime.aws/bgblur/models/selfie_segmentation_landscape.tflite";return this.path=g,this.input=m,this.output=v,this}withPath(m){return this.path=m,this}withInput(m){return this.input=m,this}withOutput(m){return this.output=m,this}validate(){if(!this.path)throw new Error("model spec path is not set");if(!this.input)throw new Error("model spec input is not set");if(!this.output)throw new Error("model spec output is not set")}build(){return this.validate(),{path:this.path,input:this.input,output:this.output}}constructor(){this.path=null,this.input=null,this.output=null}},"ModelSpecBuilder");l.default=c},8924517826:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const c=.8;let u=n(class{reportEvent(v){const g=v-this.lastReportedEventTimestamp;if(g>=this.reportingPeriodMillis){const s=this.filterCount,a=this.filterTotalMillis;if(this.filterCount=0,this.filterTotalMillis=0,this.lastReportedEventTimestamp=v,this.framerate===0||s===0)return;const i=Math.round(a/s),e=Math.round(this.framerate*(g/1e3))-s,t=Math.round(100*a/g);i>=this.filterDurationNotifyMillis&&this.delegate.filterFrameDurationHigh({framesDropped:e,avgFilterDurationMillis:i,framerate:this.framerate,periodMillis:g}),t>=this.filterCPUUtilization&&this.delegate.filterCPUUtilizationHigh({cpuUtilization:t,filterMillis:a,periodMillis:g})}}setSegmentationDuration(){this.filterDurationNotifyMillis=Math.round(1e3/this.framerate*c)}frameReceived(v){v!==this.framerate&&(this.framerate=v,this.logger.info(`frame counter setting frame rate to ${this.framerate}`),this.setSegmentationDuration());const g=Date.now();this.reportEvent(g)}filterSubmitted(){this._processingFilter=!0,this.lastFilterCompleteTimestamp=Date.now()}filterComplete(){this.filterTotalMillis+=Date.now()-this.lastFilterCompleteTimestamp,this._processingFilter=!1,this.filterCount++}get processingSegment(){return this._processingFilter}constructor(v,g,s,a){this.delegate=v,this.reportingPeriodMillis=g,this.filterCPUUtilization=s,this.logger=a,this._processingFilter=!0,this.lastReportedEventTimestamp=0,this.lastFilterCompleteTimestamp=0,this.filterTotalMillis=0,this.filterCount=0,this.framerate=0,this.filterDurationNotifyMillis=0,this.setSegmentationDuration()}},"BackgroundFilterFrameCounter");l.default=u},8080066655:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(t,r,o,f){function h(p){return p instanceof o?p:new o(function(d){d(p)})}return n(h,"adopt"),new(o||(o=Promise))(function(p,d){function y(_){try{b(f.next(_))}catch(C){d(C)}}n(y,"fulfilled");function S(_){try{b(f.throw(_))}catch(C){d(C)}}n(S,"rejected");function b(_){_.done?p(_.value):h(_.value).then(y,S)}n(b,"step"),b((f=f.apply(t,r||[])).next())})},m=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.BackgroundFilterMonitor=void 0;const v=c(6582301018),g=m(c(6672418579)),s=m(c(8924517826));let a=n(class{whenNext(){return this.promise||(this.promise=new Promise(r=>this.resolve=r)),this.promise}next(r){this.value=r,this.resolve(r),delete this.promise}constructor(){this.value=void 0,this.resolve=null}},"DeferredObservable"),i=n(class Pg{static createWorkerPromise(){const r={resolve:null,reject:null,promise:null};return r.promise=new Promise((o,f)=>{r.resolve=o,r.reject=f}),r}validateSpec(r){if(!r)throw new Error("processor has null spec");if(!r.model)throw new Error("processor spec has null model");if(!r.paths)throw new Error("processor spec has null paths")}validateOptions(r){if(!r)throw new Error("processor has null options");if(!r.logger)throw new Error("processor has null options - logger");if(!r.reportingPeriodMillis)throw new Error("processor has null options - reportingPeriodMillis");if(!r.filterCPUUtilization)throw new Error("processor has null options - filterCPUUtilization")}initCPUMonitor(r){this.videoFramesPerFilterUpdate=1,this.frameCounter=new s.default(this.delegate,r.reportingPeriodMillis,r.filterCPUUtilization,this.logger),this.cpuMonitor=new e(5e3,{reduceCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.min(this.videoFramesPerFilterUpdate+1,10))},increaseCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.max(this.videoFramesPerFilterUpdate-1,1))}}),this.delegate.addObserver(this.cpuMonitor)}stringify(r){return JSON.stringify(r,null,2)}handleInitialize(r){if(this.logger.info(`received initialize message: ${this.stringify(r)}`),!r.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const o=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:o.path,inputHeight:o.input.height,inputWidth:o.input.width,inputChannels:4,modelRangeMin:o.input.range[0],modelRangeMax:o.input.range[1],blurPixels:0}}),this.initWorkerPromise.resolve({})}handleLoadModel(r){if(this.logger.info(`received load model message: ${this.stringify(r)}`),r.payload!==2){this.logger.error("failed to load model! status: "+r.payload),this.loadModelPromise.reject(new Error("failed to load model! status: "+r.payload));return}this.modelInitialized=!0,this.loadModelPromise.resolve({})}handlePredict(r){this.mask$.next(r.payload.output)}handleWorkerEvent(r){const o=r.data;switch(o.msg){case"initialize":this.handleInitialize(o);break;case"loadModel":this.handleLoadModel(o);break;case"predict":this.handlePredict(o);break;default:this.logger.info(`unexpected event msg: ${this.stringify(o)}`);break}}loadAssets(){return u(this,void 0,void 0,function*(){this.logger.info("start initializing the processor");try{this.worker=yield v.loadWorker(this.spec.paths.worker,"BackgroundFilterWorker",{},null),this.worker.addEventListener("message",r=>this.handleWorkerEvent(r)),this.worker.postMessage({msg:"initialize",payload:{wasmPath:this.spec.paths.wasm,simdPath:this.spec.paths.simd}}),yield this.initWorkerPromise.promise,this.logger.info(`successfully initialized the ${this.filterType} worker`),yield this.loadModelPromise.promise,this.logger.info(`successfully loaded ${this.filterType} worker segmentation model`)}catch(r){throw new Error(`could not initialize the ${this.filterType} video frame processor due to '${r.message}'`)}this.logger.info(`successfully initialized the ${this.filterType} processor`)})}process(r){return u(this,void 0,void 0,function*(){if(this.destroyed)return r;this.frameCounter.frameReceived(r[0].framerate),this.cpuMonitor.frameReceived();const o=r[0].asCanvasElement();if(!o)return r;if(!this.modelInitialized)return r[0]=this.canvasVideoFrameBuffer,r;const f=o.width,h=o.height;if(f===0||h===0)return r;this.sourceWidth===0&&(this.sourceWidth=f,this.sourceHeight=h,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight,this.logger.info(`${this.filterType} source width: ${this.sourceWidth}`),this.logger.info(`${this.filterType} source height: ${this.sourceHeight}`),this.initOnFirstExecution()),(this.sourceWidth!==f||this.sourceHeight!==h)&&(this.sourceWidth=f,this.sourceHeight=h,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight);try{this.frameCounter.filterSubmitted();let p=this.mask$.value;const d=this.spec.model.input.width/o.width,y=this.spec.model.input.height/o.height;this.scaledCanvas===void 0&&(this.scaledCanvas=document.createElement("canvas"),this.scaledCanvas.width=this.spec.model.input.width,this.scaledCanvas.height=this.spec.model.input.height);const S=this.scaledCanvas.getContext("2d");S.save(),S.scale(d,y),S.drawImage(o,0,0),S.restore();const b=S.getImageData(0,0,this.scaledCanvas.width,this.scaledCanvas.height);if(this.frameNumber%this.videoFramesPerFilterUpdate===0){const _=this.mask$.whenNext();this.worker.postMessage({msg:"predict",payload:b},[b.data.buffer]),p=yield _}this.destroyed||this.drawImageWithMask(o,p)}catch(p){return this.logger.error(`could not process ${this.filterType} frame buffer due to ${p}`),r}finally{this.frameCounter.filterComplete(),this.frameNumber++}return r[0]=this.canvasVideoFrameBuffer,r})}updateVideoFramesPerFilterUpdate(r){r!==this.videoFramesPerFilterUpdate&&(this.videoFramesPerFilterUpdate=r,this.logger.info(`Adjusting filter rate to compensate for CPU utilization. Filter rate is ${this.videoFramesPerFilterUpdate} video frames per filter.`))}destroy(){var r,o,f,h;return u(this,void 0,void 0,function*(){this.destroyed=!0,this.delegate.removeObserver(this.cpuMonitor),this.canvasVideoFrameBuffer.destroy(),(r=this.worker)===null||r===void 0||r.postMessage({msg:"destroy"}),(o=this.worker)===null||o===void 0||o.postMessage({msg:"stop"}),(f=this.targetCanvas)===null||f===void 0||f.remove(),this.targetCanvas=void 0,(h=this.scaledCanvas)===null||h===void 0||h.remove(),this.scaledCanvas=void 0,this.logger.info(`${this.filterType} frame process destroyed`)})}constructor(r,o,f,h,p){this.targetCanvas=document.createElement("canvas"),this.canvasCtx=this.targetCanvas.getContext("2d"),this.canvasVideoFrameBuffer=new g.default(this.targetCanvas),this.mask$=new a,this.sourceWidth=0,this.sourceHeight=0,this.frameNumber=0,this.videoFramesPerFilterUpdate=1,this.initWorkerPromise=Pg.createWorkerPromise(),this.loadModelPromise=Pg.createWorkerPromise(),this.modelInitialized=!1,this.destroyed=!1,this.filterType=r,this.validateSpec(o),this.validateOptions(f),this.spec=o,this.logger=f.logger,this.delegate=h,this.initCPUMonitor(f),this.eventController=p}},"BackgroundFilterProcessor");l.default=i;let e=n(class{filterCPUUtilizationHigh(){const r=Date.now();r-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis&&(this.lastCPUChangeTimestamp=r,this.observer.reduceCPUUtilization())}frameReceived(){const r=Date.now();r-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis*2&&(this.lastCPUChangeTimestamp=r,this.observer.increaseCPUUtilization())}constructor(r,o){this.monitoringPeriodMillis=r,this.observer=o,this.lastCPUChangeTimestamp=0}},"BackgroundFilterMonitor");l.BackgroundFilterMonitor=e},6292069043:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(f,h,p,d){function y(S){return S instanceof p?S:new p(function(b){b(S)})}return n(y,"adopt"),new(p||(p=Promise))(function(S,b){function _(R){try{w(d.next(R))}catch(O){b(O)}}n(_,"fulfilled");function C(R){try{w(d.throw(R))}catch(O){b(O)}}n(C,"rejected");function w(R){R.done?S(R.value):y(R.value).then(_,C)}n(w,"step"),w((d=d.apply(f,h||[])).next())})},m=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(l,"__esModule",{value:!0});const v=c(6582301018),g=c(8113008952),s=m(c(7472936477)),a=m(c(8351168186)),i=m(c(8066052849)),e=n(()=>s.default.builder().withSelfieSegmentationDefaults().build(),"CREATE_DEFAULT_MODEL_SPEC"),t="https://static.sdkassets.chime.aws",r={worker:`${t}/bgblur/workers/worker.js`,wasm:`${t}/bgblur/wasm/_cwt-wasm.wasm`,simd:`${t}/bgblur/wasm/_cwt-wasm-simd.wasm`};let o=n(class{static defaultAssetSpec(){const h=i.default.sdkVersionSemVer;return{assetGroup:`sdk-${h.major}.${h.minor}`}}static createUrlWithParams(h,p){const d=new URL(h),y=Object.keys(p);for(const S of y)p[S]!==void 0&&d.searchParams.set(S,p[S]);return d.toString()}static resolveSpec(h){const{paths:p=r,model:d=e(),assetGroup:y=this.defaultAssetSpec().assetGroup,revisionID:S=this.defaultAssetSpec().revisionID}=h||{},b={assetGroup:y,revisionID:S,sdk:encodeURIComponent(i.default.sdkVersion),ua:encodeURIComponent(i.default.sdkUserAgentLowResolution)};return p.worker=this.createUrlWithParams(p.worker,b),p.wasm=this.createUrlWithParams(p.wasm,b),p.simd=this.createUrlWithParams(p.simd,b),d.path=this.createUrlWithParams(d.path,b),{paths:p,model:d,assetGroup:y,revisionID:S}}static resolveOptions(h){h.reportingPeriodMillis||(h.reportingPeriodMillis=1e3);const p=30;return h.filterCPUUtilization?(h.filterCPUUtilization<0||h.filterCPUUtilization>100)&&(h.logger.warn(`filterCPUUtilization must be set to a range between 0 and 100 percent. Falling back to default of ${p} percent`),h.filterCPUUtilization=p):h.filterCPUUtilization=p,h}static isSupported(h,p){const{logger:d}=p;return typeof globalThis>"u"?(d.info("Browser does not have globalThis."),Promise.resolve(!1)):new a.default().supportsBackgroundFilter()?g.supportsWASM(globalThis,d)?this.supportsBackgroundFilter(globalThis,h,d):(d.info("Browser does not support WASM."),Promise.resolve(!1)):(d.info("Browser is not supported."),Promise.resolve(!1))}static supportsBackgroundFilter(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,p=arguments.length>1?arguments[1]:void 0,d=arguments.length>2?arguments[2]:void 0;return u(this,void 0,void 0,function*(){if(!g.supportsWorker(h,d))return d.info("Browser does not support web workers."),!1;const y=p.paths.worker;try{const S=yield v.loadWorker(y,"BackgroundFilterWorker",{},null);try{S.terminate()}catch(b){d.info(`Failed to terminate worker. ${b.message}`)}return!0}catch(S){return d.info(`Failed to fetch and instantiate test worker ${S.message}`),!1}})}},"BackgroundFilterVideoFrameProcessor");l.default=o},7898988988:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{addObserver(m){this.observers.add(m)}removeObserver(m){this.observers.delete(m)}filterFrameDurationHigh(m){var v;for(const g of this.observers)(v=g.filterFrameDurationHigh)===null||v===void 0||v.call(g,m)}filterCPUUtilizationHigh(m){var v;for(const g of this.observers)(v=g.filterCPUUtilizationHigh)===null||v===void 0||v.call(g,m)}constructor(){this.observers=new Set}},"BackgroundFilterVideoFrameProcessorDelegate");l.default=c},1069044041:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(8080066655)),g=m(c(1434097650));let s=n(class kg extends v.default{setImageBlob(i){return u(this,void 0,void 0,function*(){this.replacementBlob=i,this.replacementImage=yield kg.loadImage(this.createReplacementObjectUrl())})}initOnFirstExecution(){}drawImageWithMask(i,e){e||(e=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(e,0,0);const{canvasCtx:r,targetCanvas:o}=this,{width:f,height:h}=o;r.save(),r.clearRect(0,0,f,h),r.drawImage(this.scaledCanvas,0,0,f,h),r.globalCompositeOperation="source-in",r.drawImage(i,0,0,f,h),r.globalCompositeOperation="destination-over",r.drawImage(this.replacementImage,0,0,o.width,o.height),r.restore()}static loadImageExecutor(i,e,t){const r=new Image;r.crossOrigin="Anonymous",r.addEventListener("load",()=>{i(r)},!1),r.addEventListener("error",o=>{e(new Error(`Could not load replacement image ${r.src}: ${o.message}`))},!1),r.src=t}static loadImage(i){return u(this,void 0,void 0,function*(){return new Promise((e,t)=>this.loadImageExecutor(e,t,i))})}revokeReplacementObjectUrl(){this.replacementObjectUrl&&URL.revokeObjectURL(this.replacementObjectUrl)}createReplacementObjectUrl(){return this.revokeReplacementObjectUrl(),this.replacementObjectUrl=URL.createObjectURL(this.replacementBlob),this.replacementObjectUrl}loadAssets(){const i=Object.create(null,{loadAssets:{get:()=>super.loadAssets}});return u(this,void 0,void 0,function*(){this.replacementImage=yield kg.loadImage(this.createReplacementObjectUrl()),i.loadAssets.call(this)})}addObserver(i){this.delegate.addObserver(i)}removeObserver(i){this.delegate.removeObserver(i)}destroy(){const i=Object.create(null,{destroy:{get:()=>super.destroy}});return u(this,void 0,void 0,function*(){i.destroy.call(this),this.revokeReplacementObjectUrl()})}setEventController(i){this.eventController?this.eventController=i:(this.eventController=i,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const i={backgroundBlurEnabled:"false",backgroundBlurStrength:"low",backgroundReplacementEnabled:"true",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",i)}constructor(i,e){super("background replacement",i,e,new g.default),this.replacementBlob=e.imageBlob,this.logger.info("BackgroundReplacement processor successfully created"),this.logger.info(`BackgroundReplacement spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundReplacement options: ${this.stringify(e)}`)}},"BackgroundReplacementFilter");l.default=s},45891509:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(r,o,f,h){function p(d){return d instanceof f?d:new f(function(y){y(d)})}return n(p,"adopt"),new(f||(f=Promise))(function(d,y){function S(C){try{_(h.next(C))}catch(w){y(w)}}n(S,"fulfilled");function b(C){try{_(h.throw(C))}catch(w){y(w)}}n(b,"rejected");function _(C){C.done?d(C.value):p(C.value).then(S,b)}n(_,"step"),_((h=h.apply(r,o||[])).next())})},m=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(6292069043)),g=m(c(5956893594)),s=m(c(3756404293)),a=m(c(7000795223)),i=m(c(1069044041));let e=n(class extends a.default{loadAssets(){return u(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}setImageBlob(){return u(this,void 0,void 0,function*(){})}},"NoOpBackgroundReplacementProcessor"),t=n(class Nv extends v.default{static create(o,f){return u(this,void 0,void 0,function*(){o=this.resolveSpec(o),f=this.resolveOptions(f),yield this.resolveOptionsAsync(f);const{logger:h}=f;if(!(yield Nv.isSupported(o,f)))return h.warn("Using no-op processor because background replacement is not supported"),new e;h.info("Using background replacement filter");const d=new i.default(o,f);return yield d.loadAssets(),d})}static resolveOptions(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const f=Object.assign({},o);return f.logger||(f.logger=new g.default("BackgroundReplacementProcessor",s.default.INFO)),super.resolveOptions(f)}static resolveOptionsAsync(o){return u(this,void 0,void 0,function*(){if(!o.imageBlob){const f=document.createElement("canvas");f.width=100,f.height=100;const h=f.getContext("2d");h.fillStyle="blue",h.fillRect(0,0,100,100);const p=yield new Promise(d=>{f.toBlob(d)});o.imageBlob=p}})}static isSupported(o,f){const h=Object.create(null,{isSupported:{get:()=>super.isSupported}});return u(this,void 0,void 0,function*(){o=this.resolveSpec(o),f=this.resolveOptions(f),yield this.resolveOptionsAsync(f);const p=f.imageBlob,d=URL.createObjectURL(p);try{yield i.default.loadImage(d)}catch(y){return f.logger.info(`Failed to fetch load replacement image ${y.message}`),!1}finally{URL.revokeObjectURL(d)}return h.isSupported.call(this,o,f)})}},"BackgroundReplacementVideoFrameProcessor");l.default=t},1434097650:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(7898988988));let v=n(class extends m.default{},"BackgroundReplacementVideoFrameProcessorDelegate");l.default=v},5384631890:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{reset(){this.currentRetry=0}nextBackoffAmountMs(){const m=Math.random()*Math.min(this.longBackoffMs,this.shortBackoffMs*Math.pow(2,this.currentRetry))+this.fixedWaitMs;return this.currentRetry+=1,m}constructor(m,v,g){this.fixedWaitMs=m,this.shortBackoffMs=v,this.longBackoffMs=g,this.currentRetry=0,this.fixedWaitMs<0&&(this.fixedWaitMs=0),this.shortBackoffMs<0&&(this.shortBackoffMs=0),this.longBackoffMs<0&&(this.longBackoffMs=0),this.reset()}},"FullJitterBackoff");l.default=c},1363278032:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(5384631890)),v=u(c(8220481840));let g=n(class{create(){return new m.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs)}createWithLimit(a){return new v.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs,a)}constructor(a,i,e){this.fixedWaitMs=a,this.shortBackoffMs=i,this.longBackoffMs=e}},"FullJitterBackoffFactory");l.default=g},8220481840:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(5384631890));let v=n(class extends m.default{nextBackoffAmountMs(){if(this.attempts++,this.attempts>this.limit)throw new Error("retry limit exceeded");return super.nextBackoffAmountMs()}constructor(s,a,i,e){super(s,a,i),this.limit=e,this.attempts=0}},"FullJitterLimitedBackoff");l.default=v},8351168186:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(s,a,i,e){function t(r){return r instanceof i?r:new i(function(o){o(r)})}return n(t,"adopt"),new(i||(i=Promise))(function(r,o){function f(d){try{p(e.next(d))}catch(y){o(y)}}n(f,"fulfilled");function h(d){try{p(e.throw(d))}catch(y){o(y)}}n(h,"rejected");function p(d){d.done?r(d.value):t(d.value).then(f,h)}n(p,"step"),p((e=e.apply(s,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const m=c(585669709),v=c(888724265);let g=n(class Ng{version(){return this.browser.version}majorVersion(){return this.version()!==null?parseInt(this.version().split(".")[0]):-1}osMajorVersion(){return parseInt(this.uaParserResult.os.version.split(".")[0])}engine(){return this.uaParserResult.engine.name}engineMajorVersion(){return parseInt(this.uaParserResult.engine.version.split(".")[0])}name(){return this.browser.name}hasChromiumWebRTC(){for(const a of this.chromeLike)if(a===this.browser.name)return!0;return!1}hasWebKitWebRTC(){for(const a of this.webkitBrowsers)if(a===this.browser.name)return!0;return!1}hasFirefoxWebRTC(){return this.isFirefox()}requiresPlaybackLatencyHintForAudioContext(){return navigator.userAgent.indexOf("Windows")!==-1}supportsCanvasCapturedStreamPlayback(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()&&!this.isIOSEdge()||this.isIOSSafari()&&this.majorVersion()>=Ng.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK||this.majorVersion()>=Ng.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK}supportsBackgroundFilter(){return!(this.name()==="safari"&&this.majorVersion()===15||!this.supportsCanvasCapturedStreamPlayback())}supportsVideoLayersAllocationRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsDependencyDescriptorRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsScalableVideoCoding(){return this.hasChromiumWebRTC()&&this.engine()==="Blink"&&this.engineMajorVersion()>=111}supportsAudioRedundancy(){return this.hasChromiumWebRTC()?this.engineMajorVersion()>=107:!this.hasFirefoxWebRTC()}requiresResolutionAlignment(a,i){return this.isAndroid()&&this.isPixel3()?[Math.ceil(a/64)*64,Math.ceil(i/64)*64]:[a,i]}requiresCheckForSdpConnectionAttributes(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()}requiresIceCandidateGatheringTimeoutWorkaround(){return this.hasChromiumWebRTC()}requiresBundlePolicy(){return"max-bundle"}requiresNoExactMediaStreamConstraints(){return this.isSamsungInternet()}requiresGroupIdMediaStreamConstraints(){return this.isSamsungInternet()}getDisplayMediaAudioCaptureSupport(){return this.isChrome()||this.isEdge()}doesNotSupportMediaDeviceLabels(){return this.browser.name==="chromium-webview"}isSupported(){return!(!this.browserSupport[this.browser.name]||this.majorVersion()<this.browserSupport[this.browser.name]||this.browser.name==="firefox"&&this.isAndroid())}isSimulcastSupported(){return this.hasChromiumWebRTC()}supportDownlinkBandwidthEstimation(){return!this.isFirefox()}supportString(){if(this.isAndroid())return`${this.browserName.chrome} ${this.browserSupport.chrome}+, ${this.browserName.samsung} ${this.browserSupport.samsung}+`;const a=[];for(const i in this.browserSupport)a.push(`${this.browserName[i]} ${this.browserSupport[i]}+`);return a.join(", ")}supportedVideoCodecs(){return u(this,void 0,void 0,function*(){const a=new RTCPeerConnection;return a.addTransceiver("video",{direction:"inactive",streams:[]}),(yield a.createOffer({offerToReceiveVideo:!0})).sdp.split(`\r
`).filter(i=>i.includes("a=rtpmap:")).map(i=>i.replace(/.* /,"").replace(/\/.*/,"")).filter((i,e,t)=>t.indexOf(i)===e).filter(i=>i!=="rtx"&&i!=="red"&&i!=="ulpfec")})}supportsSetSinkId(){return"setSinkId"in HTMLAudioElement.prototype}disableResolutionScaleDown(){return this.isAndroid()}disable480pResolutionScaleDown(){return/( Chrome\/98\.)/i.test(navigator.userAgent)&&this.browser.os.startsWith("Windows")}requiresDisablingH264Encoding(){return(this.isIOSSafari()||this.isIOSChrome()||this.isIOSFirefox())&&(this.version()==="15.1.0"||/( OS 15_1)/i.test(navigator.userAgent))}requiresVideoPlayWorkaround(){return this.isSafari()}isVideoFxSupportedBrowser(){return this.supportsBackgroundFilter()}isIOSSafari(){return this.browser.name==="ios"||this.browser.name==="ios-webview"||this.browser.name==="safari"&&/( Mac )/i.test(navigator.userAgent)&&navigator.maxTouchPoints>1}isSafari(){return this.browser.name==="safari"||this.isIOSSafari()}isFirefox(){return this.browser.name==="firefox"}isIOSFirefox(){return this.browser.name==="fxios"}isIOSChrome(){return this.browser.name==="crios"}isChrome(){return this.browser.name==="chrome"}isEdge(){return this.browser.name==="edge-chromium"}isIOSEdge(){return this.browser.name==="edge-ios"}isSamsungInternet(){return this.browser.name==="samsung"}isAndroid(){return/(android)/i.test(navigator.userAgent)}isPixel3(){return/( pixel 3)/i.test(navigator.userAgent)}constructor(){this.FALLBACK_BROWSER={type:"browser",name:"unknown",version:"unknown",os:"unknown"},this.browser=m.detect()||this.FALLBACK_BROWSER,this.uaParserResult=navigator&&navigator.userAgent?new v.UAParser(navigator.userAgent).getResult():null,this.browserSupport={chrome:78,"edge-chromium":79,electron:7,firefox:75,ios:13,safari:13,opera:66,samsung:12,crios:86,fxios:23,"ios-webview":605,"chromium-webview":92},this.browserName={chrome:"Google Chrome","edge-chromium":"Microsoft Edge",electron:"Electron",firefox:"Mozilla Firefox",ios:"Safari iOS",safari:"Safari",opera:"Opera",samsung:"Samsung Internet",crios:"Chrome iOS",fxios:"Firefox iOS","ios-webview":"WKWebView iOS","chromium-webview":"Chrome WebView"},this.chromeLike=["chrome","edge-chromium","chromium-webview","opera","samsung"],this.webkitBrowsers=["crios","fxios","safari","ios","ios-webview","edge-ios"]}},"DefaultBrowserBehavior");l.default=g,g.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK=16,g.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK=106},7059763395:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const m=c(5391134031),v=u(c(5147189764)),g=u(c(1847926377)),s=u(c(3572556907));let a=n(class Lv{getMetricMap(e,t){switch(e){case g.default.AUDIO:switch(t){case v.default.UPSTREAM:return this.audioUpstreamMetricMap;case v.default.DOWNSTREAM:return this.audioDownstreamMetricMap}case g.default.VIDEO:switch(t){case v.default.UPSTREAM:return this.videoUpstreamMetricMap;case v.default.DOWNSTREAM:return this.videoDownstreamMetricMap}default:return this.globalMetricMap}}getStreamDimensionMap(){return this.streamDimensionMap}getObservableMetricValue(e){if(this.overriddenObservableMetrics.has(e))return this.overriddenObservableMetrics.get(e);const t=this.observableMetricSpec[e],o=this.getMetricMap(t.media,t.dir)[t.source],{transform:f,source:h}=o;if(t.hasOwnProperty("media"))for(const p in this.streamMetricReports){const d=this.streamMetricReports[p];if(d.direction===t.dir&&d.mediaType===t.media)return f(h||t.source,Number(p))}else return f(h||t.source);return 0}getObservableVideoMetricValue(e,t){const r=this.observableVideoMetricSpec[e],f=this.getMetricMap(r.media,r.dir)[r.source],{transform:h,source:p}=f;return h(p||r.source,t)}getVideoUpstreamSsrc(){for(const e in this.streamMetricReports)if(this.streamMetricReports[e].mediaType===g.default.VIDEO&&this.streamMetricReports[e].direction===v.default.UPSTREAM)return Number(e);return null}getObservableMetrics(){const e={};for(const t in this.observableMetricSpec)e[t]=this.getObservableMetricValue(t);return e}getObservableVideoMetrics(){const e={};if(!this.videoStreamIndex||!this.selfAttendeeId)return this.logger.error("Need to define VideoStreamIndex and selfAttendeeId if using getObservableVideoMetrics API"),e;for(const t in this.streamMetricReports)if(this.streamMetricReports[t].mediaType===g.default.VIDEO){const r={};for(const p in this.observableVideoMetricSpec)if(this.observableVideoMetricSpec[p].dir===this.streamMetricReports[t].direction){const d=this.getObservableVideoMetricValue(p,Number(t));isNaN(d)||(r[p]=d)}const o=this.streamMetricReports[t].groupId,f=this.streamMetricReports[t].streamId;let h="";this.videoStreamIndex.attendeeIdForGroupId!==void 0?h=o?this.videoStreamIndex.attendeeIdForGroupId(o):this.selfAttendeeId:h=f?this.videoStreamIndex.attendeeIdForStreamId(f):this.selfAttendeeId,e[h]=e[h]?e[h]:{},e[h][t]=r}return e}getRTCStatsReport(){return this.rtcStatsReport}clone(){const e=new Lv(this.logger,this.videoStreamIndex,this.selfAttendeeId);return e.globalMetricReport=this.globalMetricReport,e.streamMetricReports=this.streamMetricReports,e.rtcStatsReport=this.rtcStatsReport,e.customStatsReports=this.customStatsReports,e.currentTimestampMs=this.currentTimestampMs,e.previousTimestampMs=this.previousTimestampMs,e.overriddenObservableMetrics=this.overriddenObservableMetrics,e}print(){const e={globalMetricReport:this.globalMetricReport,streamMetricReports:this.streamMetricReports,currentTimestampMs:this.currentTimestampMs,previousTimestampMs:this.previousTimestampMs};this.logger.debug(()=>`Client Metric Report: ${JSON.stringify(e)}`)}removeDestroyedSsrcs(){for(const e in this.streamMetricReports)this.currentSsrcs[e]||delete this.streamMetricReports[e]}overrideObservableMetric(e,t){this.overriddenObservableMetrics.set(e,t)}constructor(e,t,r){this.logger=e,this.videoStreamIndex=t,this.selfAttendeeId=r,this.globalMetricReport=new s.default,this.streamMetricReports={},this.rtcStatsReport={},this.customStatsReports=[],this.currentTimestampMs=0,this.previousTimestampMs=0,this.currentSsrcs={},this.overriddenObservableMetrics=new Map,this.identityValue=(o,f)=>{const h=f?this.streamMetricReports[f]:this.globalMetricReport;return Number(h.currentMetrics[o])},this.decoderLossPercent=(o,f)=>{const h=this.streamMetricReports[f],p=h.currentMetrics.concealedSamples-(h.previousMetrics.concealedSamples||0),d=h.currentMetrics.totalSamplesReceived-(h.previousMetrics.totalSamplesReceived||0);return d<=0||d-p<=0?0:p/d*100},this.packetLossPercent=(o,f)=>{const h=this.streamMetricReports[f],p=h.currentMetrics[o]-(h.previousMetrics[o]||0),d=h.currentMetrics.packetsLost-(h.previousMetrics.packetsLost||0),y=p+d;return y<=0||d<=0?0:d*100/y},this.jitterBufferMs=(o,f)=>{const h=this.streamMetricReports[f],p=h.currentMetrics.jitterBufferDelay-(h.previousMetrics.jitterBufferDelay||0),d=h.currentMetrics.jitterBufferEmittedCount-(h.previousMetrics.jitterBufferEmittedCount||0);return p<=0||d<=0?0:p/d*1e3},this.countPerSecond=(o,f)=>{const h=f?this.streamMetricReports[f]:this.globalMetricReport;let p=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(p<=0)return 0;this.previousTimestampMs<=0&&(p=1);const d=h.currentMetrics[o]-(h.previousMetrics[o]||0);return d<=0?0:Math.trunc(d/p)},this.bitsPerSecond=(o,f)=>{const h=f?this.streamMetricReports[f]:this.globalMetricReport;let p=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(p<=0)return 0;this.previousTimestampMs<=0&&(p=1);const d=(h.currentMetrics[o]-(h.previousMetrics[o]||0))*8;return d<=0?0:Math.trunc(d/p)},this.secondsToMilliseconds=(o,f)=>{const h=f?this.streamMetricReports[f]:this.globalMetricReport;return Number(h.currentMetrics[o]*1e3)},this.averageTimeSpentPerSecondInMilliseconds=(o,f)=>{const h=f?this.streamMetricReports[f]:this.globalMetricReport;let p=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(p<=0)return 0;this.previousTimestampMs<=0&&(p=1);const d=h.currentMetrics[o]-(h.previousMetrics[o]||0);return d<=0?0:d*1e3/p},this.averageCpuQualityLimitationDurationPerSecondInMilliseconds=(o,f)=>{const h=this.streamMetricReports[f];if(h.previousObjectMetrics[o]===void 0||h.currentObjectMetrics[o]===void 0)return NaN;let p=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(p<=0)return 0;this.previousTimestampMs<=0&&(p=1);let d=0,y=0;for(const[b,_]of Object.entries(h.previousObjectMetrics[o]))b==="cpu"&&(d=_);for(const[b,_]of Object.entries(h.currentObjectMetrics[o]))b==="cpu"&&(y=_);const S=y-d;return S<=0?0:S*1e3/p},this.isHardwareImplementation=(o,f)=>{const h=this.streamMetricReports[f];if(h.currentStringMetrics[o]===void 0)return NaN;const p=String(h.currentStringMetrics[o]),d=p.includes("ExternalDecoder")||p.includes("ExternalEncoder")||p.includes("EncodeAccelerator")||p.includes("DecodeAccelerator"),y=p.includes("fallback from");return d&&!y?1:0},this.globalMetricMap={retransmittedBytesSent:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_RETRANSMIT_BITRATE},totalEncodedBytesTarget:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_TARGET_ENCODER_BITRATE},totalPacketSendDelay:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_BUCKET_DELAY_MS},packetsDiscardedOnSend:{transform:this.countPerSecond,type:m.SdkMetric.Type.SOCKET_DISCARDED_PPS},availableIncomingBitrate:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_AVAILABLE_RECEIVE_BANDWIDTH},availableOutgoingBitrate:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_AVAILABLE_SEND_BANDWIDTH},currentRoundTripTime:{transform:this.secondsToMilliseconds,type:m.SdkMetric.Type.STUN_RTT_MS},audioLevel:{transform:this.identityValue,type:m.SdkMetric.Type.RTC_MIC_AUDIO_LEVEL,source:"audioLevel"}},this.audioUpstreamMetricMap={jitter:{transform:this.secondsToMilliseconds,type:m.SdkMetric.Type.RTC_MIC_JITTER_MS},packetsSent:{transform:this.countPerSecond,type:m.SdkMetric.Type.RTC_MIC_PPS},bytesSent:{transform:this.bitsPerSecond,type:m.SdkMetric.Type.RTC_MIC_BITRATE},roundTripTime:{transform:this.secondsToMilliseconds,type:m.SdkMetric.Type.RTC_MIC_RTT_MS},packetsLost:{transform:this.packetLossPercent,type:m.SdkMetric.Type.RTC_MIC_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"}},this.audioDownstreamMetricMap={concealedSamples:{transform:this.countPerSecond},totalSamplesReceived:{transform:this.countPerSecond},decoderLoss:{transform:this.decoderLossPercent,type:m.SdkMetric.Type.RTC_SPK_FRACTION_DECODER_LOSS_PERCENT},packetsReceived:{transform:this.countPerSecond,type:m.SdkMetric.Type.RTC_SPK_PPS},packetsLost:{transform:this.packetLossPercent,type:m.SdkMetric.Type.RTC_SPK_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},jitter:{transform:this.secondsToMilliseconds,type:m.SdkMetric.Type.RTC_SPK_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:m.SdkMetric.Type.RTC_SPK_JITTER_BUFFER_MS},bytesReceived:{transform:this.bitsPerSecond,type:m.SdkMetric.Type.RTC_SPK_BITRATE},audioLevel:{transform:this.identityValue,type:m.SdkMetric.Type.RTC_SPK_AUDIO_LEVEL},totalAudioPacketsLost:{transform:this.identityValue,type:m.SdkMetric.Type.RTC_SPK_TOTAL_LOST},totalAudioPacketsExpected:{transform:this.identityValue,type:m.SdkMetric.Type.RTC_SPK_TOTAL_EXPECTED},totalAudioPacketsRecoveredRed:{transform:this.identityValue,type:m.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_RED},totalAudioPacketsRecoveredFec:{transform:this.identityValue,type:m.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_FEC}},this.videoUpstreamMetricMap={roundTripTime:{transform:this.secondsToMilliseconds,type:m.SdkMetric.Type.VIDEO_SENT_RTT_MS},nackCount:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_NACKS_RECEIVED},pliCount:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_PLIS_RECEIVED},firCount:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_FIRS_RECEIVED},framesPerSecond:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_INPUT_FPS},framesEncoded:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_ENCODE_FPS},packetsSent:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_SENT_PPS},packetsLost:{transform:this.packetLossPercent,type:m.SdkMetric.Type.VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"},bytesSent:{transform:this.bitsPerSecond,type:m.SdkMetric.Type.VIDEO_SENT_BITRATE},qpSum:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_SENT_QP_SUM},frameHeight:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_ENCODE_HEIGHT},frameWidth:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_ENCODE_WIDTH},jitter:{transform:this.secondsToMilliseconds},totalEncodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:m.SdkMetric.Type.VIDEO_ENCODE_MS},encoderImplementation:{transform:this.isHardwareImplementation,type:m.SdkMetric.Type.VIDEO_ENCODER_IS_HARDWARE},qualityLimitationDurations:{transform:this.averageCpuQualityLimitationDurationPerSecondInMilliseconds,type:m.SdkMetric.Type.VIDEO_QUALITY_LIMITATION_DURATION_CPU},videoCodecDegradationHighEncodeCpu:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU},videoCodecDegradationEncodeFailure:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE}},this.videoDownstreamMetricMap={packetsReceived:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_RECEIVED_PPS},packetsLost:{transform:this.packetLossPercent,type:m.SdkMetric.Type.VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},framesReceived:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_RECEIVED_FPS},framesDecoded:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_DECODE_FPS},nackCount:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_NACKS_SENT},firCount:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_FIRS_SENT},pliCount:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_PLIS_SENT},bytesReceived:{transform:this.bitsPerSecond,type:m.SdkMetric.Type.VIDEO_RECEIVED_BITRATE},jitter:{transform:this.secondsToMilliseconds,type:m.SdkMetric.Type.VIDEO_RECEIVED_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:m.SdkMetric.Type.VIDEO_JITTER_BUFFER_MS},qpSum:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_RECEIVED_QP_SUM},frameHeight:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_DECODE_HEIGHT},frameWidth:{transform:this.identityValue,type:m.SdkMetric.Type.VIDEO_DECODE_WIDTH},totalDecodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:m.SdkMetric.Type.VIDEO_DECODE_MS},decoderImplementation:{transform:this.isHardwareImplementation,type:m.SdkMetric.Type.VIDEO_DECODER_IS_HARDWARE},totalFreezesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:m.SdkMetric.Type.VIDEO_FREEZE_DURATION},freezeCount:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_FREEZE_COUNT},totalPausesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:m.SdkMetric.Type.VIDEO_PAUSE_DURATION},pauseCount:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_PAUSE_COUNT},framesDropped:{transform:this.countPerSecond,type:m.SdkMetric.Type.VIDEO_DROPPED_FPS}},this.streamDimensionMap={encoderImplementation:m.SdkStreamDimension.Type.VIDEO_ENCODER_NAME,decoderImplementation:m.SdkStreamDimension.Type.VIDEO_DECODER_NAME},this.observableVideoMetricSpec={videoUpstreamBitrate:{source:"bytesSent",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoUpstreamPacketsSent:{source:"packetsSent",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoUpstreamPacketLossPercent:{source:"packetsLost",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoUpstreamFramesEncodedPerSecond:{source:"framesEncoded",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoUpstreamFramesInputPerSecond:{source:"framesPerSecond",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoUpstreamFrameHeight:{source:"frameHeight",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoUpstreamFrameWidth:{source:"frameWidth",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoUpstreamJitterMs:{source:"jitter",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoUpstreamRoundTripTimeMs:{source:"roundTripTime",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoUpstreamEncoderImplementation:{source:"encoderImplementation",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoUpstreamTotalEncodeTimePerSecond:{source:"totalEncodeTime",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoUpstreamCpuQualityLimitationDurationPerSecond:{source:"qualityLimitationDurations",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoDownstreamBitrate:{source:"bytesReceived",media:g.default.VIDEO,dir:v.default.DOWNSTREAM},videoDownstreamPacketLossPercent:{source:"packetsLost",media:g.default.VIDEO,dir:v.default.DOWNSTREAM},videoDownstreamPacketsReceived:{source:"packetsReceived",media:g.default.VIDEO,dir:v.default.DOWNSTREAM},videoDownstreamFramesDecodedPerSecond:{source:"framesDecoded",media:g.default.VIDEO,dir:v.default.DOWNSTREAM},videoDownstreamFrameHeight:{source:"frameHeight",media:g.default.VIDEO,dir:v.default.DOWNSTREAM},videoDownstreamFrameWidth:{source:"frameWidth",media:g.default.VIDEO,dir:v.default.DOWNSTREAM},videoDownstreamJitterMs:{source:"jitter",media:g.default.VIDEO,dir:v.default.DOWNSTREAM},videoDownstreamDelayMs:{source:"jitterBufferMs",media:g.default.VIDEO,dir:v.default.DOWNSTREAM}},this.observableMetricSpec={audioPacketsReceived:{source:"packetsReceived",media:g.default.AUDIO,dir:v.default.DOWNSTREAM},audioPacketsReceivedFractionLoss:{source:"packetsLost",media:g.default.AUDIO,dir:v.default.DOWNSTREAM},audioDecoderLoss:{source:"decoderLoss",media:g.default.AUDIO,dir:v.default.DOWNSTREAM},audioPacketsSent:{source:"packetsSent",media:g.default.AUDIO,dir:v.default.UPSTREAM},audioPacketLossPercent:{source:"packetsLost",media:g.default.AUDIO,dir:v.default.UPSTREAM},audioUpstreamRoundTripTimeMs:{source:"roundTripTime",media:g.default.AUDIO,dir:v.default.UPSTREAM},videoUpstreamBitrate:{source:"bytesSent",media:g.default.VIDEO,dir:v.default.UPSTREAM},videoPacketSentPerSecond:{source:"packetsSent",media:g.default.VIDEO,dir:v.default.UPSTREAM},audioSpeakerDelayMs:{source:"jitterBufferMs",media:g.default.AUDIO,dir:v.default.DOWNSTREAM},audioUpstreamJitterMs:{source:"jitter",media:g.default.AUDIO,dir:v.default.UPSTREAM},audioDownstreamJitterMs:{source:"jitter",media:g.default.AUDIO,dir:v.default.DOWNSTREAM},nackCountReceivedPerSecond:{source:"nackCount",media:g.default.VIDEO,dir:v.default.UPSTREAM},availableOutgoingBitrate:{source:"availableOutgoingBitrate"},availableIncomingBitrate:{source:"availableIncomingBitrate"},currentRoundTripTimeMs:{source:"currentRoundTripTime"},audioDownstreamLevel:{source:"audioLevel",media:g.default.AUDIO,dir:v.default.DOWNSTREAM},audioUpstreamLevel:{source:"audioLevel"}}}},"ClientMetricReport");l.default=a},5147189764:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportDirection=void 0;var c;(function(u){u[u.UPSTREAM=0]="UPSTREAM",u[u.DOWNSTREAM=1]="DOWNSTREAM"})(c=l.ClientMetricReportDirection||(l.ClientMetricReportDirection={})),l.default=c},1847926377:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportMediaType=void 0;var c;(function(u){u[u.AUDIO=0]="AUDIO",u[u.VIDEO=1]="VIDEO"})(c=l.ClientMetricReportMediaType||(l.ClientMetricReportMediaType={})),l.default=c},9895069884:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"ClientVideoStreamReceivingReport");l.default=c},3572556907:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"GlobalMetricReport");l.default=c},7894724558:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(){this.currentTimestampMs=0,this.ssrc=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsExpected=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}},"RedundantAudioRecoveryMetricReport");l.default=c},7825873064:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"StreamMetricReport");l.default=c},6963727640:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{minimumHealth(){return this.minHealth}maximumHealth(){return this.maxHealth}health(){return this.maximumHealth()}update(m){this.currentData=m}getConnectionHealthData(){return this.currentData.clone()}healthy(){return this.health()>this.minimumHealth()}healthIfChanged(){const m=this.health();return m!==this.currentHealth?(this.currentHealth=m,m):null}constructor(m,v,g){this.minHealth=m.minHealth,this.maxHealth=m.maxHealth,this.currentHealth=m.initialHealth,this.currentData=v.clone(),this.name=g}},"BaseConnectionHealthPolicy");l.default=c},3544934903:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class qc{static isTimestampRecent(m,v){return Date.now()<m+v}setConnectionStartTime(){this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}reset(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now(),this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0}isConnectionStartRecent(m){return qc.isTimestampRecent(this.connectionStartTimestampMs,m)}isLastPacketLossRecent(m){return qc.isTimestampRecent(this.lastPacketLossInboundTimestampMs,m)}isGoodSignalRecent(m){return qc.isTimestampRecent(this.lastGoodSignalTimestampMs,m)}isWeakSignalRecent(m){return qc.isTimestampRecent(this.lastWeakSignalTimestampMs,m)}isNoSignalRecent(m){return qc.isTimestampRecent(this.lastNoSignalTimestampMs,m)}clone(){const m=new qc;return m.connectionStartTimestampMs=this.connectionStartTimestampMs,m.consecutiveStatsWithNoPackets=this.consecutiveStatsWithNoPackets,m.consecutiveStatsWithNoAudioPacketsSent=this.consecutiveStatsWithNoAudioPacketsSent,m.lastPacketLossInboundTimestampMs=this.lastPacketLossInboundTimestampMs,m.lastGoodSignalTimestampMs=this.lastGoodSignalTimestampMs,m.lastWeakSignalTimestampMs=this.lastWeakSignalTimestampMs,m.lastNoSignalTimestampMs=this.lastNoSignalTimestampMs,m.consecutiveMissedPongs=this.consecutiveMissedPongs,m.packetsReceivedInLastMinute=this.packetsReceivedInLastMinute.slice(0),m.fractionPacketsLostInboundInLastMinute=this.fractionPacketsLostInboundInLastMinute.slice(0),m.audioSpeakerDelayMs=this.audioSpeakerDelayMs,m.isVideoEncoderHardware=this.isVideoEncoderHardware,m.videoEncodingTimeInMs=this.videoEncodingTimeInMs,m.cpuLimitationDuration=this.cpuLimitationDuration,m.videoInputFps=this.videoInputFps,m.videoEncodeFps=this.videoEncodeFps,m}setConsecutiveMissedPongs(m){this.consecutiveMissedPongs=m}setConsecutiveStatsWithNoPackets(m){this.consecutiveStatsWithNoPackets=m}setConsecutiveStatsWithNoAudioPacketsSent(m){this.consecutiveStatsWithNoAudioPacketsSent=m}setLastPacketLossInboundTimestampMs(m){this.lastPacketLossInboundTimestampMs=m}setLastNoSignalTimestampMs(m){this.lastNoSignalTimestampMs=m}setLastWeakSignalTimestampMs(m){this.lastWeakSignalTimestampMs=m}setLastGoodSignalTimestampMs(m){this.lastGoodSignalTimestampMs=m}setAudioSpeakerDelayMs(m){this.audioSpeakerDelayMs=m}setIsVideoEncoderHardware(m){this.isVideoEncoderHardware=m}setVideoEncodingTimeInMs(m){this.videoEncodingTimeInMs=m}setCpuLimitationDuration(m){this.cpuLimitationDuration=m}setVideoInputFps(m){this.videoInputFps=m}setVideoEncodeFps(m){this.videoEncodeFps=m}constructor(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}},"ConnectionHealthData");l.default=c},1091173065:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(8438187697)),v=u(c(1615281264));let g=n(class{constructor(){this.minHealth=0,this.maxHealth=1,this.initialHealth=1,this.connectionUnhealthyThreshold=25,this.noSignalThresholdTimeMs=1e4,this.connectionWaitTimeMs=1e4,this.zeroBarsNoSignalTimeMs=5e3,this.oneBarWeakSignalTimeMs=5e3,this.twoBarsTimeMs=5e3,this.threeBarsTimeMs=1e4,this.fourBarsTimeMs=2e4,this.fiveBarsTimeMs=6e4,this.cooldownTimeMs=6e4,this.pastSamplesToConsider=15,this.goodSignalTimeMs=15e3,this.fractionalLoss=.5,this.packetsExpected=50,this.maximumTimesToWarn=2,this.missedPongsLowerThreshold=1,this.missedPongsUpperThreshold=4,this.maximumAudioDelayMs=6e4,this.maximumAudioDelayDataPoints=10,this.sendingAudioFailureSamplesToConsider=2,this.sendingAudioFailureInitialWaitTimeMs=3e3,this.videoEncodingHealthPolicies=[m.default,v.default],this.consecutiveHighEncodeCpuThreshold=10,this.highEncodeCpuMsThreshold=500,this.consecutiveVideoEncodingFailureThreshold=5}},"ConnectionHealthPolicyConfiguration");l.default=g},8929805428:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(6963727640));let v=n(class nl extends m.default{health(){if(this.currentData.isConnectionStartRecent(nl.CONNECTION_WAIT_TIME_MS))return 1;const a=this.currentData.consecutiveStatsWithNoPackets>=nl.CONNECTION_UNHEALTHY_THRESHOLD,i=this.currentData.consecutiveMissedPongs>=nl.MISSED_PONGS_THRESHOLD;this.currentData.audioSpeakerDelayMs>nl.MAXIMUM_AUDIO_DELAY_MS?this.audioDelayPointsOverMaximum+=1:this.audioDelayPointsOverMaximum=0;const e=this.audioDelayPointsOverMaximum>nl.MAXIMUM_AUDIO_DELAY_DATA_POINTS;return e&&(this.audioDelayPointsOverMaximum=0),a||i||e?(this.logger.warn(`reconnection recommended due to: no packets received: ${a}, missed pongs: ${i}, bad audio delay: ${e}`),0):1}constructor(s,a,i){super(a,i,"Reconnection Health"),this.logger=s,this.audioDelayPointsOverMaximum=0,nl.CONNECTION_UNHEALTHY_THRESHOLD=a.connectionUnhealthyThreshold,nl.CONNECTION_WAIT_TIME_MS=a.connectionWaitTimeMs,nl.MISSED_PONGS_THRESHOLD=a.missedPongsUpperThreshold,nl.MAXIMUM_AUDIO_DELAY_MS=a.maximumAudioDelayMs,nl.MAXIMUM_AUDIO_DELAY_DATA_POINTS=a.maximumAudioDelayDataPoints}},"ReconnectionHealthPolicy");l.default=v},2115341037:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(6963727640));let v=n(class extends m.default{isSendingAudioUnhealthy(){const s=!this.currentData.isConnectionStartRecent(this.sendingAudioFailureInitialWaitTimeMs),a=this.currentData.consecutiveStatsWithNoAudioPacketsSent>=this.sendingAudioFailureSamplesToConsider;return s&&a}health(){if(this.isSendingAudioUnhealthy()){const s=Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs;return this.currentHealth>this.minimumHealth()&&!s?(this.logger.warn(`Sending Audio is unhealthy for ${this.sendingAudioFailureSamplesToConsider} seconds consecutively.`),this.warnCount++,this.warnCount>this.maximumTimesToWarn?(this.logger.warn("SendingAudioFailure health policy maximum warnings breached. Falling back to reporting healthy."),this.maximumHealth()):(this.lastWarnTimestampMs=Date.now(),this.minimumHealth())):this.currentHealth}return this.maximumHealth()}constructor(s,a,i){super(a,i,"Sending Audio Health"),this.logger=s,this.sendingAudioFailureSamplesToConsider=a.sendingAudioFailureSamplesToConsider>0?a.sendingAudioFailureSamplesToConsider:1,this.sendingAudioFailureInitialWaitTimeMs=a.sendingAudioFailureInitialWaitTimeMs,this.maximumTimesToWarn=a.maximumTimesToWarn,this.coolDownTimeMs=a.cooldownTimeMs,this.lastWarnTimestampMs=0,this.warnCount=0}},"SendingAudioFailureConnectionHealthPolicy");l.default=v},5928001672:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(6963727640));let v=n(class extends m.default{calculateFractionalLoss(){if(this.currentData.packetsReceivedInLastMinute.length<this.pastSamplesToConsider)return 0;const s=this.pastSamplesToConsider,a=s*this.packetsExpected;let i=0;for(let e=0;e<s;e++)i+=this.currentData.packetsReceivedInLastMinute[e];return Math.min(Math.max(1-i/a,0),1)}health(){return Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs?this.currentHealth:this.calculateFractionalLoss()>=this.fractionalLoss?this.currentHealth!==0&&(this.lastWarnTimestampMs=Date.now(),this.warnCount++,this.warnCount>this.maximumTimesToWarn)?1:0:1}constructor(s,a){super(s,a,"Unusable Audio Warning"),this.coolDownTimeMs=s.cooldownTimeMs,this.pastSamplesToConsider=s.pastSamplesToConsider,this.fractionalLoss=s.fractionalLoss,this.packetsExpected=s.packetsExpected,this.maximumTimesToWarn=s.maximumTimesToWarn,this.lastWarnTimestampMs=0,this.warnCount=0}},"UnusableAudioWarningConnectionHealthPolicy");l.default=v},6005421222:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoEncodingConnectionHealthPolicyName=void 0;var c;(function(u){u.VideoEncodingCpuHealth="Video Encoding CPU Health",u.VideoEncodingFramerateHealth="Video Encoding framerate Health"})(c=l.VideoEncodingConnectionHealthPolicyName||(l.VideoEncodingConnectionHealthPolicyName={})),l.default=c},8438187697:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(6963727640)),v=u(c(6005421222));let g=n(class extends m.default{health(){if(!this.currentData.isVideoEncoderHardware&&(this.currentData.videoEncodingTimeInMs>=this.highEncodeCpuMsThreshold||this.currentData.cpuLimitationDuration>0)){if(this.consecutiveHighEncodeCpuCnt++,this.consecutiveHighEncodeCpuCnt>this.consecutiveHighEncodeCpuThreshold)return this.consecutiveHighEncodeCpuCnt=0,this.minimumHealth()}else this.consecutiveHighEncodeCpuCnt=0;return this.maximumHealth()}constructor(a,i){super(a,i,v.default.VideoEncodingCpuHealth),this.consecutiveHighEncodeCpuCnt=0,this.consecutiveHighEncodeCpuThreshold=a.consecutiveHighEncodeCpuThreshold,this.highEncodeCpuMsThreshold=a.highEncodeCpuMsThreshold}},"VideoEncodingCpuConnectionHealthPolicy");l.default=g},1615281264:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(6963727640)),v=u(c(6005421222));let g=n(class extends m.default{health(){if(this.currentData.videoEncodeFps===0&&this.currentData.videoInputFps>0){if(this.consecutiveEncodeFailureCnt++,this.consecutiveEncodeFailureCnt>this.consecutiveVideoEncodingFailureThreshold)return this.consecutiveEncodeFailureCnt=0,this.minimumHealth()}else this.consecutiveEncodeFailureCnt=0;return this.maximumHealth()}constructor(a,i){super(a,i,v.default.VideoEncodingFramerateHealth),this.consecutiveEncodeFailureCnt=0,this.consecutiveVideoEncodingFailureThreshold=a.consecutiveVideoEncodingFailureThreshold}},"VideoEncodingFramerateConnectionHealthPolicy");l.default=g},1523356655:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=c(903520651);let m=n(class{start(){this.isActive=!0,this.pingPong.addObserver(this),this.pingPong.start(),this.audioVideoController.addObserver(this)}stop(){this.isActive=!1,this.pingPong.removeObserver(this),this.pingPong.stop(),this.audioVideoController.removeObserver(this)}receiveSignalStrengthChange(g){g===0?this.connectionHealthData.setLastNoSignalTimestampMs(Date.now()):g<=.5?this.connectionHealthData.setLastWeakSignalTimestampMs(Date.now()):this.connectionHealthData.setLastGoodSignalTimestampMs(Date.now()),this.updateConnectionHealth()}didReceivePong(g,s,a){this.connectionHealthData.setConsecutiveMissedPongs(0),this.statsCollector.logLatency("ping_pong",s),this.statsCollector.logLatency("ping_pong_clock_skew",a),this.updateConnectionHealth()}didMissPongs(){this.connectionHealthData.setConsecutiveMissedPongs(this.connectionHealthData.consecutiveMissedPongs+1),this.updateConnectionHealth()}metricsDidReceive(g){let s=0,a=0;const i=g.getObservableMetrics(),e=i.audioPacketsReceived,t=i.audioPacketsReceivedFractionLoss,r=i.audioSpeakerDelayMs;typeof r=="number"&&!isNaN(r)&&this.connectionHealthData.setAudioSpeakerDelayMs(r);const o=g.getRTCStatsReport();let f=0;o.forEach(p=>{p.type==="candidate-pair"&&p.bytesReceived&&(f+=p.bytesReceived)});const h=f-this.lastTotalBytesReceived;if(this.lastTotalBytesReceived=f,typeof e=="number"&&typeof t=="number"){if(s=e,a=t,s<0||a<0||h<0)return}else return;this.addToMinuteWindow(this.connectionHealthData.packetsReceivedInLastMinute,s),this.addToMinuteWindow(this.connectionHealthData.fractionPacketsLostInboundInLastMinute,a),h>0?(this.hasSeenValidCandidatePairMetricsBefore=!0,this.connectionHealthData.setConsecutiveStatsWithNoPackets(0)):this.hasSeenValidCandidatePairMetricsBefore&&this.connectionHealthData.setConsecutiveStatsWithNoPackets(this.connectionHealthData.consecutiveStatsWithNoPackets+1),(s===0||a>0)&&this.connectionHealthData.setLastPacketLossInboundTimestampMs(Date.now()),typeof i.audioPacketsSent=="number"&&this.updateAudioPacketsSentInConnectionHealth(i.audioPacketsSent),this.updateVideoEncodingHealth(g),this.updateConnectionHealth()}updateAudioPacketsSentInConnectionHealth(g){g>0?this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(0):this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(this.connectionHealthData.consecutiveStatsWithNoAudioPacketsSent+1)}updateVideoEncodingHealth(g){const s=this.audioVideoController.videoTileController.hasStartedLocalVideoTile(),a=g.getVideoUpstreamSsrc();if(!s||a===null){this.connectionHealthData.setIsVideoEncoderHardware(!1),this.connectionHealthData.setVideoEncodingTimeInMs(0),this.connectionHealthData.setCpuLimitationDuration(0),this.connectionHealthData.setVideoInputFps(0),this.connectionHealthData.setVideoEncodeFps(0);return}const i=g.getObservableVideoMetricValue("videoUpstreamEncoderImplementation",a),e=g.getObservableVideoMetricValue("videoUpstreamTotalEncodeTimePerSecond",a),t=g.getObservableVideoMetricValue("videoUpstreamCpuQualityLimitationDurationPerSecond",a),r=g.getObservableVideoMetricValue("videoUpstreamFramesInputPerSecond",a),o=g.getObservableVideoMetricValue("videoUpstreamFramesEncodedPerSecond",a);this.connectionHealthData.setIsVideoEncoderHardware(Boolean(i)),this.connectionHealthData.setVideoEncodingTimeInMs(e),this.connectionHealthData.setCpuLimitationDuration(t),this.connectionHealthData.setVideoInputFps(r),this.connectionHealthData.setVideoEncodeFps(o)}addToMinuteWindow(g,s){g.unshift(s),g.length>60&&g.pop()}updateConnectionHealth(){this.audioVideoController.forEachObserver(g=>{u.Maybe.of(g.connectionHealthDidChange).map(s=>s.bind(g)(this.connectionHealthData.clone()))})}constructor(g,s,a,i,e){this.audioVideoController=g,this.realtimeController=s,this.connectionHealthData=a,this.pingPong=i,this.statsCollector=e,this.isActive=!1,this.hasSeenValidCandidatePairMetricsBefore=!1,this.lastTotalBytesReceived=0,this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(t=>{this.isActive&&this.receiveSignalStrengthChange(t)})}},"SignalingAndMetricsConnectionMonitor");l.default=m},3560634922:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var c;(function(u){u.Modality="#content"})(c||(c={})),l.default=c},8271576690:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(8351168186)),g=m(c(8152963890));let s=n(class Lg{get mediaStream(){return this._mediaStream}set mediaStream(i){this._mediaStream=i}acquireAudioInputStream(){return u(this,void 0,void 0,function*(){return this._mediaStream.getAudioTracks().length===0?(this.logger.info("No audio stream available. Synthesizing an audio stream."),g.default.synthesizeAudioDevice(0)):this._mediaStream})}acquireVideoInputStream(){return u(this,void 0,void 0,function*(){return this._mediaStream})}acquireDisplayInputStream(i){return u(this,void 0,void 0,function*(){return i&&i.video&&i.video.mandatory&&i.video.mandatory.chromeMediaSource&&i.video.mandatory.chromeMediaSourceId?navigator.mediaDevices.getUserMedia(i):navigator.mediaDevices.getDisplayMedia(i)})}acquireScreenCaptureDisplayInputStream(i,e){return u(this,void 0,void 0,function*(){return this.acquireDisplayInputStream(this.screenCaptureDisplayMediaConstraints(i,e))})}screenCaptureDisplayMediaConstraints(i,e){return{audio:!!(!i&&new v.default().getDisplayMediaAudioCaptureSupport()),video:Object.assign(Object.assign({},!i&&{frameRate:{max:e||Lg.defaultFrameRate}}),i&&{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:e||Lg.defaultFrameRate}})}}toggleMediaStream(i){let e=!1;if(this.mediaStream)for(let t=0;t<this.mediaStream.getTracks().length;t++)this.mediaStream.getTracks()[t].enabled!==i&&(this.mediaStream.getTracks()[t].enabled=i,e=!0);return e}cleanup(){if(this.mediaStream)for(let i=0;i<this.mediaStream.getTracks().length;i++)this.mediaStream.getTracks()[i].stop();this.mediaStream=null}muteLocalAudioInputStream(){throw new Error("unsupported")}unmuteLocalAudioInputStream(){throw new Error("unsupported")}addMediaStreamBrokerObserver(i){}removeMediaStreamBrokerObserver(i){}constructor(i){this.logger=i}},"ContentShareMediaStreamBroker");l.default=s,s.defaultFrameRate=15},4707988254:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(h,p,d,y){function S(b){return b instanceof d?b:new d(function(_){_(b)})}return n(S,"adopt"),new(d||(d=Promise))(function(b,_){function C(O){try{R(y.next(O))}catch(D){_(D)}}n(C,"fulfilled");function w(O){try{R(y.throw(O))}catch(D){_(D)}}n(w,"rejected");function R(O){O.done?b(O.value):S(O.value).then(C,w)}n(R,"step"),R((y=y.apply(h,p||[])).next())})},m=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(8981226922)),g=m(c(7136804647)),s=m(c(7147499759)),a=m(c(4599834734)),i=m(c(3741513515)),e=c(903520651),t=m(c(9248911078)),r=m(c(4134174226)),o=m(c(3560634922));let f=n(class{static createContentShareMeetingSessionConfigure(p){const d=new g.default;return d.meetingId=p.meetingId,d.externalMeetingId=p.externalMeetingId,d.urls=p.urls,d.disablePeriodicKeyframeRequestOnContentSender=p.disablePeriodicKeyframeRequestOnContentSender,d.credentials=new s.default,d.credentials.attendeeId=p.credentials.attendeeId+o.default.Modality,d.credentials.externalUserId=p.credentials.externalUserId,d.credentials.joinToken=p.credentials.joinToken+o.default.Modality,d.meetingFeatures=p.meetingFeatures.clone(),d.videoDownlinkBandwidthPolicy=new t.default,d}setContentAudioProfile(p){this.contentAudioVideo.setAudioProfile(p)}enableSimulcastForContentShare(p,d){p?(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=new r.default(this.contentAudioVideo.logger,d)):(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=void 0)}enableSVCForContentShare(p){p?this.contentAudioVideo.configuration.enableSVC=!0:this.contentAudioVideo.configuration.enableSVC=!1}startContentShare(p){return u(this,void 0,void 0,function*(){if(p){if(this.contentAudioVideo.configuration.meetingFeatures.contentMaxResolution===v.default.VideoDisabled){this.contentAudioVideo.logger.info("Could not start content because max content resolution was set to None");return}this.mediaStreamBroker.mediaStream=p;for(let d=0;d<this.mediaStreamBroker.mediaStream.getTracks().length;d++)this.mediaStreamBroker.mediaStream.getTracks()[d].addEventListener("ended",()=>{this.stopContentShare()});this.contentAudioVideo.start()}})}startContentShareFromScreenCapture(p,d){return u(this,void 0,void 0,function*(){const y=yield this.mediaStreamBroker.acquireScreenCaptureDisplayInputStream(p,d);return yield this.startContentShare(y),y})}pauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!1)&&this.forEachContentShareObserver(p=>{e.Maybe.of(p.contentShareDidPause).map(d=>d.call(p))})}unpauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!0)&&this.forEachContentShareObserver(p=>{e.Maybe.of(p.contentShareDidUnpause).map(d=>d.call(p))})}setContentShareVideoCodecPreferences(p){this.contentAudioVideo.setVideoCodecSendPreferences(p)}destroy(){return u(this,void 0,void 0,function*(){this.contentAudioVideo&&(this.destroyed=!0,this.contentAudioVideo.removeObserver(this),this.stopContentShare(),this.observerQueue.clear(),this.contentAudioVideo=void 0,this.attendeeAudioVideo=void 0,this.mediaStreamBroker=void 0)})}stopContentShare(){this.contentAudioVideo.stop(),this.mediaStreamBroker.cleanup()}addContentShareObserver(p){this.observerQueue.add(p)}removeContentShareObserver(p){this.observerQueue.delete(p)}forEachContentShareObserver(p){for(const d of this.observerQueue)i.default.nextTick(()=>{this.observerQueue.has(d)&&p(d)})}audioVideoDidStart(){var p;((p=this.mediaStreamBroker.mediaStream)===null||p===void 0?void 0:p.getVideoTracks().length)>0&&this.contentAudioVideo.videoTileController.startLocalVideoTile()}audioVideoDidStop(p){this.mediaStreamBroker.cleanup(),this.contentShareTile&&(this.attendeeAudioVideo.videoTileController.removeVideoTile(this.contentShareTile.id()),this.contentShareTile=null),this.forEachContentShareObserver(d=>{e.Maybe.of(d.contentShareDidStop).map(y=>y.call(d))})}setupContentShareEvents(){this.attendeeAudioVideo.realtimeController.realtimeSubscribeToAttendeeIdPresence((p,d,y,S)=>{const b=new a.default(p).hasModality(a.default.MODALITY_CONTENT),_=new a.default(p).base()===this.attendeeAudioVideo.configuration.credentials.attendeeId;if(!b||!_||!d||this.contentShareTile)return;const C=this.mediaStreamBroker.mediaStream;if(C!=null&&C.getVideoTracks().length){this.contentShareTile=this.attendeeAudioVideo.videoTileController.addVideoTile();const w=C.getVideoTracks()[0];let R,O;if(w.getSettings){const D=w.getSettings();R=D.width,O=D.height}else{const D=w.getCapabilities();R=D.width,O=D.height}this.contentShareTile.bindVideoStream(this.contentAudioVideo.configuration.credentials.attendeeId,!1,C,R,O,null,this.contentAudioVideo.configuration.credentials.externalUserId)}this.forEachContentShareObserver(w=>{e.Maybe.of(w.contentShareDidStart).map(R=>R.call(w))})})}constructor(p,d,y){this.mediaStreamBroker=p,this.contentAudioVideo=d,this.attendeeAudioVideo=y,this.observerQueue=new Set,this.destroyed=!1,this.contentAudioVideo.addObserver(this),this.setupContentShareEvents()}},"DefaultContentShareController");l.default=f},1252089397:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let u=n(class Hs{static register(){!("document"in c.g)||!document.addEventListener||Hs.shouldRegisterCSPMonitor&&(Hs.added||(document.addEventListener("securitypolicyviolation",Hs.listener),Hs.added=!0))}static unregister(){!("document"in c.g)||!document.removeEventListener||(document.removeEventListener("securitypolicyviolation",Hs.listener),Hs.loggers=new Set,Hs.added=!1)}static disable(){Hs.shouldRegisterCSPMonitor=!1,Hs.unregister()}static addLogger(v){v&&Hs.loggers.add(v)}static removeLogger(v){v&&Hs.loggers.delete(v)}},"CSPMonitor");l.default=u,u.loggers=new Set,u.shouldRegisterCSPMonitor=!0,u.added=!1,u.listener=m=>{const v=`Security Policy Violation
Blocked URI: ${m.blockedURI}
Violated Directive: ${m.violatedDirective}
Original Policy: ${m.originalPolicy}
Document URI: ${m.documentURI}
Source File: ${m.sourceFile}
Line No.: ${m.lineNumber}
`;for(const g of u.loggers)g.error(v);u.loggers.size===0&&console.error(v)}},1766966835:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{text(){return new TextDecoder().decode(this.data)}json(){return JSON.parse(new TextDecoder().decode(this.data))}constructor(m,v,g,s,a,i){this.timestampMs=m,this.topic=v,this.data=g,this.senderAttendeeId=s,this.senderExternalUserId=a,this.throttled=!!i}},"DataMessage");l.default=c},3171772403:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isDestroyable=void 0;function c(u){return u&&"destroy"in u}n(c,"isDestroyable"),l.isDestroyable=c},3961458747:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isAudioTransformDevice=void 0;function c(u){return!!u&&typeof u=="object"&&"mute"in u&&"stop"in u&&"intrinsicDevice"in u}n(c,"isAudioTransformDevice"),l.isAudioTransformDevice=c},8152963890:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(R,O,D,I){function M(k){return k instanceof D?k:new D(function(N){N(k)})}return n(M,"adopt"),new(D||(D=Promise))(function(k,N){function j(Q){try{J(I.next(Q))}catch(oe){N(oe)}}n(j,"fulfilled");function B(Q){try{J(I.throw(Q))}catch(oe){N(oe)}}n(B,"rejected");function J(Q){Q.done?k(Q.value):M(Q.value).then(j,B)}n(J,"step"),J((I=I.apply(R,O||[])).next())})},m=this&&this.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(8351168186)),g=m(c(113406342)),s=m(c(3741513515)),a=m(c(2997222898)),i=c(903520651),e=m(c(5709738441)),t=m(c(1140481832)),r=c(3961458747),o=m(c(4261566413)),f=m(c(2083236720)),h=m(c(9468773362)),p=m(c(6809352498)),d=m(c(3288618491)),y=m(c(6997557363)),S=m(c(8219602063)),b=m(c(8981226922)),_=c(272852764);let C=n(class Ro{isWatchingForDeviceChanges(){return!!this.onDeviceChangeCallback}ensureWatchingDeviceChanges(){var O;this.isWatchingForDeviceChanges()||(this.logger.info("Starting devicechange listener."),this.onDeviceChangeCallback=()=>{this.logger.info("Device change event callback is triggered"),this.handleDeviceChange()},(O=this.mediaDeviceWrapper)===null||O===void 0||O.addEventListener("devicechange",this.onDeviceChangeCallback))}stopWatchingDeviceChanges(){var O;this.isWatchingForDeviceChanges()&&(this.logger.info("Stopping devicechange listener."),(O=this.mediaDeviceWrapper)===null||O===void 0||O.removeEventListener("devicechange",this.onDeviceChangeCallback),this.onDeviceChangeCallback=void 0)}shouldObserveDeviceChanges(){return this.deviceChangeObservers.size?!0:this.activeDevices.audio&&this.activeDevices.audio.constraints!==null||this.activeDevices.video&&this.activeDevices.video.constraints!==null||!!this.audioOutputDeviceId}watchForDeviceChangesIfNecessary(){this.shouldObserveDeviceChanges()?this.ensureWatchingDeviceChanges():this.stopWatchingDeviceChanges()}destroy(){return u(this,void 0,void 0,function*(){this.stopWatchingDeviceChanges(),yield this.stopAudioInput(),yield this.stopVideoInput()})}listAudioInputDevices(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const D=yield this.listDevicesOfKind("audioinput",O);return this.trace("listAudioInputDevices",O,D),D})}listVideoInputDevices(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const D=yield this.listDevicesOfKind("videoinput",O);return this.trace("listVideoInputDevices",O,D),D})}listAudioOutputDevices(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const D=yield this.listDevicesOfKind("audiooutput",O);return this.trace("listAudioOutputDevices",O,D),D})}pushAudioMeetingStateForPermissions(O){var D;(D=this.eventController)===null||D===void 0||D.publishEvent(O===void 0?"audioInputUnselected":"audioInputSelected")}pushVideoMeetingStateForPermissions(O){var D;(D=this.eventController)===null||D===void 0||D.publishEvent(O===void 0?"videoInputUnselected":"videoInputSelected")}startAudioInput(O){return u(this,void 0,void 0,function*(){return yield this.audioInputTaskQueue.add(()=>this.startAudioInputTask(O))})}startAudioInputTask(O){var D;return u(this,void 0,void 0,function*(){if(O===void 0){this.logger.error("Audio input device cannot be undefined");return}try{return r.isAudioTransformDevice(O)?(this.logger.info(`Choosing transform input device ${O}`),yield this.chooseAudioTransformInputDevice(O)):(this.logger.info(`Choosing intrinsic audio input device ${O}`),this.removeTransform(),yield this.chooseInputIntrinsicDevice("audio",O)),this.trace("startAudioInputDevice",O,"success"),this.useWebAudio?(this.attachAudioInputStreamToAudioContext(this.activeDevices.audio.stream),this.pushAudioMeetingStateForPermissions(this.getMediaStreamDestinationNode().stream),yield(D=this.transform)===null||D===void 0?void 0:D.device.mute(this.muted),this.getMediaStreamDestinationNode().stream):(this.publishAudioInputDidChangeEvent(this.activeDevices.audio.stream),this.activeDevices.audio.stream)}catch(I){throw I}})}stopAudioInput(){return u(this,void 0,void 0,function*(){return this.audioInputTaskQueue.add(()=>this.stopAudioInputTask())})}stopAudioInputTask(){return u(this,void 0,void 0,function*(){try{if(this.useWebAudio){this.releaseAudioTransformStream();return}this.stopTracksAndRemoveCallbacks("audio")}finally{this.watchForDeviceChangesIfNecessary(),this.publishAudioInputDidChangeEvent(void 0)}})}chooseAudioTransformInputDevice(O){var D;return u(this,void 0,void 0,function*(){if(((D=this.transform)===null||D===void 0?void 0:D.device)===O)return;if(!this.useWebAudio)throw new Error("Cannot apply transform device without enabling Web Audio.");const I=Ro.getAudioContext();if(!(I instanceof OfflineAudioContext))switch(I.state){case"running":break;case"closed":throw new Error("Cannot choose a transform device with a closed audio context.");case"suspended":yield I.resume()}let M;try{M=yield O.createAudioNode(I)}catch(N){throw this.logger.error(`Unable to create transform device node: ${N}.`),N}const k=yield O.intrinsicDevice();yield this.chooseInputIntrinsicDevice("audio",k),this.logger.debug(`Got inner stream: ${k}.`),this.setTransform(O,M)})}chooseVideoTransformInputDevice(O){var D;return u(this,void 0,void 0,function*(){if(this.eventController&&O instanceof e.default&&O.passEventControllerToProcessors(this.eventController),O===this.chosenVideoTransformDevice){this.logger.info("Reselecting same VideoTransformDevice");return}const I=this.chosenVideoTransformDevice;I&&this.logger.info("Switched from previous VideoTransformDevice");const M=!!I,k=yield O.intrinsicDevice();if(!this.isMediaStreamReusableByDeviceId((D=this.activeDevices.video)===null||D===void 0?void 0:D.stream,k)){this.logger.info("video transform device needs new intrinsic device"),M&&I.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=O,this.activeDevices.video=null,yield this.chooseInputIntrinsicDevice("video",k),this.logger.info("apply processors to transform"),yield this.chosenVideoTransformDevice.transformStream(this.activeDevices.video.stream);return}this.chosenVideoTransformDevice=O,this.logger.info("video transform device uses previous stream"),this.logger.info("apply processors to transform"),yield O.transformStream(this.activeDevices.video.stream)})}startVideoInput(O){return u(this,void 0,void 0,function*(){return yield this.videoInputTaskQueue.add(()=>this.startVideoInputTask(O))})}startVideoInputTask(O){return u(this,void 0,void 0,function*(){if(!O){this.logger.error("Invalid video input device");return}try{return _.isVideoTransformDevice(O)?(this.logger.info(`Choosing video transform device ${O}`),yield this.chooseVideoTransformInputDevice(O),this.publishVideoInputDidChangeEvent(this.chosenVideoTransformDevice.outputMediaStream),this.chosenVideoTransformDevice.outputMediaStream):(this.chosenVideoInputIsTransformDevice()&&(this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null),yield this.chooseInputIntrinsicDevice("video",O),this.trace("startVideoInputDevice",O),this.publishVideoInputDidChangeEvent(this.activeDevices.video.stream),this.activeDevices.video.stream)}catch(D){throw D}})}stopVideoInput(){return u(this,void 0,void 0,function*(){return this.videoInputTaskQueue.add(()=>this.stopVideoInputTask())})}stopVideoInputTask(){return u(this,void 0,void 0,function*(){try{if(this.chosenVideoInputIsTransformDevice()){this.releaseVideoTransformStream();return}this.stopTracksAndRemoveCallbacks("video")}finally{this.watchForDeviceChangesIfNecessary(),this.publishVideoInputDidChangeEvent(void 0)}})}chooseAudioOutput(O){return u(this,void 0,void 0,function*(){this.audioOutputDeviceId=O,this.watchForDeviceChangesIfNecessary();const D=this.deviceInfoFromDeviceId("audiooutput",this.audioOutputDeviceId);this.publishAudioOutputDidChangeEvent(D),this.trace("chooseAudioOutput",O,null)})}addDeviceChangeObserver(O){this.logger.info("adding device change observer"),this.deviceChangeObservers.add(O),this.watchForDeviceChangesIfNecessary(),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(O){this.logger.info("removing device change observer"),this.deviceChangeObservers.delete(O),this.watchForDeviceChangesIfNecessary(),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){var O,D;if(!this.activeDevices.audio)return null;const I=(D=(O=this.transform)===null||O===void 0?void 0:O.nodes)===null||D===void 0?void 0:D.end;if(I){const M=I.context.createAnalyser();return M.removeOriginalInputs=()=>{try{I.disconnect(M)}catch{}},I.connect(M),M}return this.createAnalyserNodeForRawAudioInput()}createAnalyserNodeForRawAudioInput(){return this.activeDevices.audio?this.createAnalyserNodeForStream(this.activeDevices.audio.stream):null}createAnalyserNodeForStream(O){const D=Ro.getAudioContext(),I=D.createAnalyser(),M=D.createMediaStreamSource(O);return M.connect(I),this.trace("createAnalyserNodeForAudioInput"),I.removeOriginalInputs=()=>{try{M.disconnect(I)}catch{}},I}startVideoPreviewForVideoInput(O){if(!this.activeDevices.video){this.logger.warn("cannot bind video preview since video input device has not been chosen"),this.trace("startVideoPreviewForVideoInput",O.id);return}t.default.connectVideoStreamToVideoElement(this.chosenVideoTransformDevice?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream,O,!0),this.trace("startVideoPreviewForVideoInput",O.id)}stopVideoPreviewForVideoInput(O){t.default.disconnectVideoStreamFromVideoElement(O,!1),this.trace("stopVideoPreviewForVideoInput",O.id)}setDeviceLabelTrigger(O){if(this.deviceInfoCache){for(const D of this.deviceInfoCache)if(!D.label){this.deviceInfoCache=null;break}}this.deviceLabelTrigger=O,this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(O){let D=null;return this.useWebAudio?(D=Ro.getAudioContext().createMediaStreamSource(O),D.connect(this.getMediaStreamOutputNode())):this.logger.warn("WebAudio is not enabled, mixIntoAudioInput will not work"),this.trace("mixIntoAudioInput",O.id),D}chooseVideoInputQuality(O,D,I){const M=this.browserBehavior.requiresResolutionAlignment(O,D);this.videoInputQualitySettings=new b.default(M[0],M[1],I)}getVideoInputQualitySettings(){return this.videoInputQualitySettings}acquireAudioInputStream(){return u(this,void 0,void 0,function*(){return this.activeDevices.audio||(this.logger.info("No audio device chosen, creating empty audio device"),yield this.startAudioInput(null)),this.useWebAudio?this.getMediaStreamDestinationNode().stream:this.activeDevices.audio.stream})}acquireVideoInputStream(){return u(this,void 0,void 0,function*(){if(!this.activeDevices.video)throw new Error("No video device chosen");return this.chosenVideoInputIsTransformDevice()?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream})}acquireDisplayInputStream(O){return u(this,void 0,void 0,function*(){throw new Error("unsupported")})}releaseAudioTransformStream(){this.logger.info("Stopping audio track for Web Audio graph"),this.stopTracksAndRemoveCallbacks("audio"),this.logger.info("Removing audio transform, if there is one."),this.removeTransform(),this.audioInputSourceNode&&(this.audioInputSourceNode.disconnect(),this.audioInputSourceNode=void 0),this.audioInputDestinationNode&&(this.audioInputDestinationNode.disconnect(),this.audioInputDestinationNode=void 0)}releaseVideoTransformStream(){this.logger.info("Stopping video track for transform"),this.stopTracksAndRemoveCallbacks("video"),this.logger.info("Disconnecting video transform"),this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null}stopTracksAndRemoveCallbacks(O){const D=this.activeDevices[O];if(!D)return;const I=D.endedCallback,M=D.trackMuteCallback,k=D.trackUnmuteCallback;for(const N of D.stream.getTracks())N.stop(),I&&N.removeEventListener("ended",I),M&&N.removeEventListener("mute",M),k&&N.removeEventListener("unmute",k),delete D.endedCallback,delete D.trackMuteCallback,delete D.trackUnmuteCallback,delete this.activeDevices[O]}chosenVideoInputIsTransformDevice(){return!!this.chosenVideoTransformDevice}muteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!1)}unmuteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!0)}toggleLocalAudioInputStream(O){var D;let I=this.activeDevices.audio;if(this.useWebAudio&&(I=this.getMediaStreamDestinationNode()),!!I){for(const M of I.stream.getTracks())M.enabled!==O&&(M.enabled=O);this.muted!==!O&&(this.muted=!O,(D=this.transform)===null||D===void 0||D.device.mute(this.muted))}}static getIntrinsicDeviceId(O){if(!O)return;if(typeof O=="string")return O;if(O.id)return O.id;const I=O.deviceId;if(!I)return;if(typeof I=="string"||Array.isArray(I))return I;const M=I;if(typeof M.exact=="string"||Array.isArray(M.exact))return M.exact}static createEmptyAudioDevice(){return Ro.synthesizeAudioDevice(0)}static synthesizeAudioDevice(O){const D=Ro.getAudioContext(),I=D.createMediaStreamDestination();if(O){const M=D.createGain();M.gain.value=.1,M.connect(I);const k=D.createOscillator();k.frequency.value=O,k.connect(M),k.start()}else{const M=D.createBufferSource();try{M.buffer=D.createBuffer(1,D.sampleRate*5,D.sampleRate)}catch(k){if(k&&k.name==="NotSupportedError")M.buffer=D.createBuffer(1,Ro.defaultSampleRate*5,Ro.defaultSampleRate);else throw k}M.buffer.getChannelData(0)[0]=3e-4,M.loop=!0,M.connect(I),M.start()}return I.stream}listDevicesOfKind(O,D){return u(this,void 0,void 0,function*(){return(D||this.deviceInfoCache===null||!this.isWatchingForDeviceChanges())&&(yield this.updateDeviceInfoCacheFromBrowser()),this.listCachedDevicesOfKind(O)})}updateDeviceInfoCacheFromBrowser(){var O;return u(this,void 0,void 0,function*(){if(typeof MediaDeviceInfo>"u"){this.deviceInfoCache=[];return}let I=yield navigator.mediaDevices.enumerateDevices(),M=!0;for(const k of I)if(!k.label){M=!1;break}if(!M)try{this.logger.info("attempting to trigger media device labels since they are hidden");const k=yield this.deviceLabelTrigger();I=yield navigator.mediaDevices.enumerateDevices();for(const N of k.getTracks())N.stop()}catch(k){this.logger.info("unable to get media device labels"),(O=this.eventController)===null||O===void 0||O.publishEvent("deviceLabelTriggerFailed",{deviceLabelTriggerErrorMessage:this.getErrorMessage(k)})}this.logger.debug(`Update device info cache with devices: ${JSON.stringify(I)}`),this.deviceInfoCache=I})}listCachedDevicesOfKind(O){const D=[];if(this.deviceInfoCache)for(const I of this.deviceInfoCache)I.kind===O&&D.push(I);return D}handleDeviceChange(){return u(this,void 0,void 0,function*(){if(this.deviceInfoCache===null)return;if(this.alreadyHandlingDeviceChange){s.default.nextTick(()=>{this.handleDeviceChange()});return}this.alreadyHandlingDeviceChange=!0;const O=this.listCachedDevicesOfKind("audioinput"),D=this.listCachedDevicesOfKind("videoinput"),I=this.listCachedDevicesOfKind("audiooutput");yield this.updateDeviceInfoCacheFromBrowser();const M=this.listCachedDevicesOfKind("audioinput"),k=this.listCachedDevicesOfKind("videoinput"),N=this.listCachedDevicesOfKind("audiooutput");this.forEachObserver(j=>{this.areDeviceListsEqual(O,M)||i.Maybe.of(j.audioInputsChanged).map(B=>B.bind(j)(M)),this.areDeviceListsEqual(D,k)||i.Maybe.of(j.videoInputsChanged).map(B=>B.bind(j)(k)),this.areDeviceListsEqual(I,N)||i.Maybe.of(j.audioOutputsChanged).map(B=>B.bind(j)(N))}),this.alreadyHandlingDeviceChange=!1})}handleDeviceStreamEnded(O,D){return u(this,void 0,void 0,function*(){try{O==="audio"?(this.logger.warn("Audio input device which was active is no longer available, resetting to null device"),yield this.startAudioInput(null)):(this.logger.warn("Video input device which was active is no longer available, stopping video"),yield this.stopVideoInput())}catch{this.logger.error("Failed to choose null device after stream ended.")}O==="audio"?this.forEachObserver(I=>{i.Maybe.of(I.audioInputStreamEnded).map(M=>M.bind(I)(D))}):this.forEachObserver(I=>{i.Maybe.of(I.videoInputStreamEnded).map(M=>M.bind(I)(D))})})}forEachObserver(O){for(const D of this.deviceChangeObservers)s.default.nextTick(()=>{this.deviceChangeObservers.has(D)&&O(D)})}forEachMediaStreamBrokerObserver(O){for(const D of this.mediaStreamBrokerObservers)s.default.nextTick(()=>{this.mediaStreamBrokerObservers.has(D)&&O(D)})}areDeviceListsEqual(O,D){return JSON.stringify(O.map(I=>JSON.stringify(I)).sort())===JSON.stringify(D.map(I=>JSON.stringify(I)).sort())}intrinsicDeviceAsMediaStream(O){return O&&O.id?O:null}hasSameMediaStreamId(O,D,I){var M,k,N,j;let B;return O==="audio"?(B=I==null?void 0:I.audio.streamId,!!B&&B===((k=(M=D.constraints)===null||M===void 0?void 0:M.audio)===null||k===void 0?void 0:k.streamId)):(B=I==null?void 0:I.video.streamId,!!B&&B===((j=(N=D==null?void 0:D.constraints)===null||N===void 0?void 0:N.video)===null||j===void 0?void 0:j.streamId))}hasSameGroupId(O,D,I){if(O==="")return!0;const M=Ro.getIntrinsicDeviceId(I);return this.logger.debug(`Checking deviceIds ${M} of type ${typeof M} with groupId ${O}`),typeof M=="string"&&O===this.getGroupIdFromDeviceId(D,M)}getGroupIdFromDeviceId(O,D){if(this.deviceInfoCache!==null){const I=this.listCachedDevicesOfKind(`${O}input`).find(M=>M.deviceId===D);if(I&&I.groupId)return this.logger.debug(`GroupId of deviceId ${D} found in cache is ${I.groupId}`),I.groupId}return this.logger.debug(`GroupId of deviceId ${D} found in cache is empty`),""}handleGetUserMediaError(O,D){if(!O)throw new f.default(O);switch(O.name){case"NotReadableError":case"TrackStartError":throw new p.default(O);case"NotFoundError":case"DevicesNotFoundError":throw new h.default(O);case"NotAllowedError":case"PermissionDeniedError":case"SecurityError":throw D&&D<Ro.permissionDeniedOriginDetectionThresholdMs?new y.default(O,"Permission denied by browser"):new y.default(O,"Permission denied by user");case"OverconstrainedError":case"ConstraintNotSatisfiedError":throw new d.default(O);case"TypeError":throw new S.default(O);case"AbortError":default:throw new f.default(O)}}matchesDeviceSelection(O,D,I,M){return I&&I.stream.active&&(this.hasSameMediaStreamId(O,I,M)||I.groupId!==null&&this.hasSameGroupId(I.groupId,O,D))?(this.logger.debug(`Compare current device constraint ${JSON.stringify(I.constraints)} to proposed constraints ${JSON.stringify(M)}`),I.matchesConstraints(M)):!1}chooseInputIntrinsicDevice(O,D){var I,M;return u(this,void 0,void 0,function*(){const k=this.getMediaStreamConstraints(O,D);if(this.matchesDeviceSelection(O,D,this.activeDevices[O],k)){this.logger.info(`reusing existing ${O} input device`);return}this.activeDevices[O]&&this.activeDevices[O].stream&&this.stopTracksAndRemoveCallbacks(O);const N=Date.now(),j=new o.default;try{this.logger.info(`requesting new ${O} device with constraint ${JSON.stringify(k)}`);const B=this.intrinsicDeviceAsMediaStream(D);O==="audio"&&D===null?(j.stream=Ro.createEmptyAudioDevice(),j.constraints=null):B?(this.logger.info(`using media stream ${B.id} for ${O} device`),j.stream=B,j.constraints=k):(j.stream=yield navigator.mediaDevices.getUserMedia(k),j.constraints=k),yield this.handleNewInputDevice(O,j)}catch(B){const J=this.getErrorMessage(B);O==="audio"?(I=this.eventController)===null||I===void 0||I.publishEvent("audioInputFailed",{audioInputErrorMessage:J}):(M=this.eventController)===null||M===void 0||M.publishEvent("videoInputFailed",{videoInputErrorMessage:J}),this.logger.error(`failed to get ${O} device for constraints ${JSON.stringify(k)}: ${J}`);let Q=!0;if(B&&"constraint"in B&&(this.logger.error(`Over-constrained by constraint: ${B.constraint}`),this.useMediaConstraintsFallback)){const oe=this.getMediaStreamConstraints(O,D,!0),$=JSON.stringify(oe);if($!==JSON.stringify(k)){this.logger.info(`retry requesting new ${O} device with minimal constraint ${$}`);try{j.stream=yield navigator.mediaDevices.getUserMedia(oe),j.constraints=oe,yield this.handleNewInputDevice(O,j),Q=!1}catch(he){this.logger.error(`failed to get ${O} device for constraints ${$}: ${this.getErrorMessage(he)}`)}}}if(Q){if(O==="audio"){this.logger.info(`choosing null ${O} device instead`);try{j.stream=Ro.createEmptyAudioDevice(),j.constraints=null,yield this.handleNewInputDevice(O,j)}catch(oe){this.logger.error(`failed to choose null ${O} device. ${oe.name}: ${oe.message}`)}}this.handleGetUserMediaError(B,Date.now()-N)}}finally{this.watchForDeviceChangesIfNecessary()}})}getErrorMessage(O){return O?O.name&&O.message?`${O.name}: ${O.message}`:O.name?O.name:O.message?O.message:"UnknownError":"UnknownError"}handleNewInputDevice(O,D){var I;return u(this,void 0,void 0,function*(){this.logger.info(`got ${O} device for constraints ${JSON.stringify(D.constraints)}`);const M=(I=this.getMediaTrackSettings(D.stream))===null||I===void 0?void 0:I.deviceId;D.groupId=M?this.getGroupIdFromDeviceId(O,M):"",this.activeDevices[O]=D,this.logger.debug(`Set activeDevice to ${JSON.stringify(D)}`),this.watchForDeviceChangesIfNecessary();const k=D.stream.getTracks()[0];if(k&&(D.endedCallback=()=>{this.activeDevices[O]&&this.activeDevices[O].stream===D.stream&&(this.handleDeviceStreamEnded(O,M),delete D.endedCallback)},k.addEventListener("ended",D.endedCallback,{once:!0})),O==="audio"){const N=D.stream.getAudioTracks()[0];if(N){const j=N.getSettings().deviceId||D.stream;D.trackMuteCallback=()=>{this.mediaStreamMuteObserver(j,!0)},D.trackUnmuteCallback=()=>{this.mediaStreamMuteObserver(j,!1)},N.addEventListener("mute",D.trackMuteCallback,{once:!1}),N.addEventListener("unmute",D.trackUnmuteCallback,{once:!1}),this.logger.debug("Notifying mute state after selection"),N.muted?D.trackMuteCallback():D.trackUnmuteCallback()}}})}calculateMediaStreamConstraints(O,D,I,M){if(M&&this.listCachedDevicesOfKind(`${O}input`).length===1)return!0;const k={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?k.deviceId=D:k.deviceId={exact:D},I&&(k.groupId=I),M?k:O==="video"?(k.width={ideal:this.videoInputQualitySettings.videoWidth},k.height={ideal:this.videoInputQualitySettings.videoHeight},k.frameRate={ideal:this.videoInputQualitySettings.videoFrameRate},k):(this.supportSampleRateConstraint()&&(k.sampleRate={ideal:Ro.defaultSampleRate}),this.supportSampleSizeConstraint()&&(k.sampleSize={ideal:Ro.defaultSampleSize}),this.supportChannelCountConstraint()&&(k.channelCount={ideal:Ro.defaultChannelCount}),Object.assign({echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0},k))}getMediaStreamConstraintsFromTrackConstraints(O,D){return O==="audio"?{audio:D}:{video:D}}getMediaStreamConstraints(O,D){let I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,M={};if(!D)return null;const k=this.intrinsicDeviceAsMediaStream(D);if(k)return M.streamId=k.id,this.getMediaStreamConstraintsFromTrackConstraints(O,M);if(typeof D=="string"){let N="";return this.browserBehavior.requiresGroupIdMediaStreamConstraints()&&(this.deviceInfoCache!==null?N=this.getGroupIdFromDeviceId(O,D):this.logger.error("Device cache is not populated. Please make sure to call list devices first")),M=this.calculateMediaStreamConstraints(O,D,N,I),this.getMediaStreamConstraintsFromTrackConstraints(O,M)}return w(D)?(M=this.calculateMediaStreamConstraints(O,D.deviceId,D.groupId,I),this.getMediaStreamConstraintsFromTrackConstraints(O,M)):(M=D,this.getMediaStreamConstraintsFromTrackConstraints(O,M))}deviceInfoFromDeviceId(O,D){if(this.deviceInfoCache===null)return null;for(const I of this.deviceInfoCache)if(I.kind===O&&I.deviceId===D)return I;return null}hasAppliedTransform(){return!!this.transform}isMediaStreamReusableByDeviceId(O,D){if(!O||!O.active||!D)return!1;if(D.id)return O.id===D.id;const I=this.getMediaTrackSettings(O);if(!I.deviceId)return!1;const M=Ro.getIntrinsicDeviceId(D);return typeof M=="string"?I.deviceId===M:!1}getMediaTrackSettings(O){var D;return(D=O.getTracks()[0])===null||D===void 0?void 0:D.getSettings()}reconnectAudioInputs(){if(!this.audioInputSourceNode)return;this.audioInputSourceNode.disconnect();const O=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(O)}setTransform(O,D){var I,M;(M=(I=this.transform)===null||I===void 0?void 0:I.nodes)===null||M===void 0||M.end.disconnect(),this.transform={nodes:D,device:O};const k=D==null?void 0:D.end,N=this.getMediaStreamDestinationNode();this.logger.debug(`Connecting transform node ${k} to destination ${N}.`),k==null||k.connect(N),this.reconnectAudioInputs()}removeTransform(){var O;const D=this.transform;if(D)return(O=this.transform.nodes)===null||O===void 0||O.end.disconnect(),this.transform=void 0,this.reconnectAudioInputs(),D}attachAudioInputStreamToAudioContext(O){var D;(D=this.audioInputSourceNode)===null||D===void 0||D.disconnect(),this.audioInputSourceNode=Ro.getAudioContext().createMediaStreamSource(O);const I=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(I)}getMediaStreamDestinationNode(){return this.audioInputDestinationNode||(this.audioInputDestinationNode=Ro.getAudioContext().createMediaStreamDestination()),this.audioInputDestinationNode}getMediaStreamOutputNode(){var O,D;return((D=(O=this.transform)===null||O===void 0?void 0:O.nodes)===null||D===void 0?void 0:D.start)||this.getMediaStreamDestinationNode()}static setDefaultLatencyHint(O){Ro.defaultLatencyHint=O}static getAudioContext(){if(!Ro.audioContext){const O={};navigator.mediaDevices.getSupportedConstraints().sampleRate&&(O.sampleRate=Ro.defaultSampleRate),new v.default().requiresPlaybackLatencyHintForAudioContext()&&(O.latencyHint="playback"),Ro.defaultLatencyHint&&(O.latencyHint=Ro.defaultLatencyHint),Ro.audioContext=new(window.AudioContext||window.webkitAudioContext)(O)}return Ro.audioContext}static suspendAudioContext(){return u(this,void 0,void 0,function*(){return Ro.audioContext?Ro.audioContext.suspend():Promise.resolve()})}static resumeAudioContext(){return u(this,void 0,void 0,function*(){return Ro.audioContext?Ro.audioContext.resume():Promise.resolve()})}static closeAudioContext(){if(Ro.audioContext)try{Ro.audioContext.close()}catch{}Ro.audioContext=null}addMediaStreamBrokerObserver(O){this.mediaStreamBrokerObservers.add(O)}removeMediaStreamBrokerObserver(O){this.mediaStreamBrokerObservers.delete(O)}publishVideoInputDidChangeEvent(O){this.forEachMediaStreamBrokerObserver(D=>{D.videoInputDidChange&&D.videoInputDidChange(O)}),this.pushVideoMeetingStateForPermissions(O)}publishAudioInputDidChangeEvent(O){this.forEachMediaStreamBrokerObserver(D=>{D.audioInputDidChange&&D.audioInputDidChange(O)}),this.pushAudioMeetingStateForPermissions(O)}publishAudioOutputDidChangeEvent(O){this.forEachMediaStreamBrokerObserver(D=>{D.audioOutputDidChange&&D.audioOutputDidChange(O)})}supportSampleRateConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleRate}supportSampleSizeConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleSize}supportChannelCountConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().channelCount}trace(O,D,I){let M=`API/DefaultDeviceController/${O}`;typeof D<"u"&&(M+=` ${JSON.stringify(D)}`),typeof I<"u"&&(M+=` -> ${JSON.stringify(I)}`),this.logger.info(M)}constructor(O,D,I=new v.default,M){this.logger=O,this.browserBehavior=I,this.eventController=M,this.deviceInfoCache=null,this.activeDevices={audio:null,video:null},this.chosenVideoTransformDevice=null,this.audioOutputDeviceId=void 0,this.deviceChangeObservers=new Set,this.mediaStreamBrokerObservers=new Set,this.deviceLabelTrigger=()=>navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),this.audioInputDestinationNode=null,this.audioInputSourceNode=null,this.videoInputQualitySettings=null,this.useWebAudio=!1,this.useMediaConstraintsFallback=!0,this.audioInputTaskQueue=new a.default,this.videoInputTaskQueue=new a.default,this.muted=!1,this.mediaStreamMuteObserver=(B,J)=>{for(const Q of this.deviceChangeObservers)s.default.nextTick(()=>{this.deviceChangeObservers.has(Q)&&Q.audioInputMuteStateChanged&&Q.audioInputMuteStateChanged(B,J)})},this.alreadyHandlingDeviceChange=!1;const{enableWebAudio:k=!1,useMediaConstraintsFallback:N=!0}=D||{};this.useWebAudio=k,this.useMediaConstraintsFallback=N,this.videoInputQualitySettings=new b.default(Ro.defaultVideoWidth,Ro.defaultVideoHeight,Ro.defaultVideoFrameRate);const j=this.browserBehavior.requiresResolutionAlignment(this.videoInputQualitySettings.videoWidth,this.videoInputQualitySettings.videoHeight);this.videoInputQualitySettings.videoWidth=j[0],this.videoInputQualitySettings.videoHeight=j[1],this.logger.info(`DefaultDeviceController video dimension ${this.videoInputQualitySettings.videoWidth} x ${this.videoInputQualitySettings.videoHeight}`);try{this.mediaDeviceWrapper=new g.default().create();const B=navigator.mediaDevices.getSupportedConstraints();this.logger.info(`Supported Constraints in this browser ${JSON.stringify(B)}`)}catch(B){O.error(B.message)}}},"DefaultDeviceController");l.default=C,C.permissionDeniedOriginDetectionThresholdMs=500,C.defaultVideoWidth=960,C.defaultVideoHeight=540,C.defaultVideoFrameRate=15,C.defaultSampleRate=48e3,C.defaultSampleSize=16,C.defaultChannelCount=1,C.audioContext=null;function w(R){return typeof R=="object"&&"deviceId"in R&&"groupId"in R&&"kind"in R&&"label"in R}n(w,"isMediaDeviceInfo")},4261566413:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{matchesConstraints(m){return JSON.stringify(this.constraints)===JSON.stringify(m)}constructor(){this.groupId=""}},"DeviceSelection");l.default=c},2083236720:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class extends Error{constructor(m,v){super(v||"Error fetching device."),this.cause=m,this.name="GetUserMediaError"}},"GetUserMediaError");l.default=c},9799823045:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0}),l.NoOpDeviceControllerWithEventController=void 0;const v=m(c(1946951215)),g=m(c(8981226922));let s=n(class extends v.default{destroy(){return u(this,void 0,void 0,function*(){this.destroyed=!0})}listAudioInputDevices(){return Promise.resolve([])}listVideoInputDevices(){return Promise.resolve([])}listAudioOutputDevices(){return Promise.resolve([])}startAudioInput(e){return Promise.reject()}stopAudioInput(){return Promise.resolve()}startVideoInput(e){return Promise.reject()}stopVideoInput(){return Promise.resolve()}chooseAudioOutput(e){return Promise.reject()}addDeviceChangeObserver(e){}removeDeviceChangeObserver(e){}createAnalyserNodeForAudioInput(){return null}startVideoPreviewForVideoInput(e){}stopVideoPreviewForVideoInput(e){}setDeviceLabelTrigger(e){}mixIntoAudioInput(e){return null}chooseVideoInputQuality(e,t,r){}getVideoInputQualitySettings(){return g.default.VideoDisabled}constructor(e){super(),this.destroyed=!1}},"NoOpDeviceController");l.default=s;let a=n(class extends s{constructor(e){super(),this.eventController=e}},"NoOpDeviceControllerWithEventController");l.NoOpDeviceControllerWithEventController=a},9468773362:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(2083236720));let v=n(class extends m.default{constructor(s){super(s),this.name="NotFoundError"}},"NotFoundError");l.default=v},6809352498:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(2083236720));let v=n(class extends m.default{constructor(s){super(s),this.name="NotReadableError"}},"NotReadableError");l.default=v},3288618491:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(2083236720));let v=n(class extends m.default{constructor(s,a){super(s),this.constraint=a,this.name="OverconstrainedError"}},"OverconstrainedError");l.default=v},6997557363:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(2083236720));let v=n(class extends m.default{constructor(s,a){super(s,a),this.name="PermissionDeniedError"}},"PermissionDeniedError");l.default=v},3083691903:function(H,l){"use strict";var c=this&&this.__awaiter||function(m,v,g,s){function a(i){return i instanceof g?i:new g(function(e){e(i)})}return n(a,"adopt"),new(g||(g=Promise))(function(i,e){function t(f){try{o(s.next(f))}catch(h){e(h)}}n(t,"fulfilled");function r(f){try{o(s.throw(f))}catch(h){e(h)}}n(r,"rejected");function o(f){f.done?i(f.value):a(f.value).then(t,r)}n(o,"step"),o((s=s.apply(m,v||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=n(class{mute(v){return c(this,void 0,void 0,function*(){})}stop(){var v;return c(this,void 0,void 0,function*(){(v=this.node)===null||v===void 0||v.disconnect()})}intrinsicDevice(){return c(this,void 0,void 0,function*(){return this.inner})}createAudioNode(v){var g;return c(this,void 0,void 0,function*(){return(g=this.node)===null||g===void 0||g.disconnect(),this.node=yield this.createSingleAudioNode(v),{start:this.node,end:this.node}})}constructor(v){this.inner=v}},"SingleNodeAudioTransformDevice");l.default=u},8219602063:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(2083236720));let v=n(class extends m.default{constructor(s){super(s),this.name="TypeError"}},"TypeError");l.default=v},8981226922:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{equals(m){return this.videoWidth===m.videoWidth&&this.videoHeight===m.videoHeight&&this.videoFrameRate===m.videoFrameRate}constructor(m,v,g){this.videoWidth=m,this.videoHeight=v,this.videoFrameRate=g}},"VideoQualitySettings");l.default=c,c.VideoDisabled=new c(0,0,0),c.VideoResolutionHD=new c(1280,720,30),c.VideoResolutionFHD=new c(1920,1080,30),c.VideoResolutionUHD=new c(3840,2160,30)},272852764:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isVideoTransformDevice=void 0;function c(u){return!!u&&typeof u=="object"&&"transformStream"in u&&"stop"in u&&"intrinsicDevice"in u}n(c,"isVideoTransformDevice"),l.isVideoTransformDevice=c},2343182956:function(H,l){"use strict";var c=this&&this.__awaiter||function(m,v,g,s){function a(i){return i instanceof g?i:new g(function(e){e(i)})}return n(a,"adopt"),new(g||(g=Promise))(function(i,e){function t(f){try{o(s.next(f))}catch(h){e(h)}}n(t,"fulfilled");function r(f){try{o(s.throw(f))}catch(h){e(h)}}n(r,"rejected");function o(f){f.done?i(f.value):a(f.value).then(t,r)}n(o,"step"),o((s=s.apply(m,v||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=n(class{destroy(){return c(this,void 0,void 0,function*(){this.mediaQueryList&&(typeof this.mediaQueryList.addEventListener=="function"?this.mediaQueryList.removeEventListener("change",this.mediaQueryListener):this.mediaQueryList.removeListener(this.mediaQueryListener)),delete this.mediaQueryListener,this.observerQueue.clear()})}registerObserver(v){this.observerQueue.add(v),v.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())}removeObserver(v){this.observerQueue.delete(v)}constructor(v,g){if(this.devicePixelRatioSource=v,this.observerQueue=new Set,this.mediaQueryListener=()=>{this.observerQueue.forEach(a=>{a.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())})},typeof window>"u")return;const s=matchMedia(`(resolution: ${this.devicePixelRatioSource.devicePixelRatio()}dppx)`);typeof s.addEventListener=="function"?(s.addEventListener("change",this.mediaQueryListener),this.mediaQueryList=s):typeof s.addListener=="function"?(s.addListener(this.mediaQueryListener),this.mediaQueryList=s):g.warn("ignoring DefaultDevicePixelRatioMonitor")}},"DefaultDevicePixelRatioMonitor");l.default=u},2827699573:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{devicePixelRatio(){return typeof window>"u"||!window||!window.devicePixelRatio?1:window.devicePixelRatio}},"DevicePixelRatioWindowSource");l.default=c},5578123693:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(t,r,o,f){function h(p){return p instanceof o?p:new o(function(d){d(p)})}return n(h,"adopt"),new(o||(o=Promise))(function(p,d){function y(_){try{b(f.next(_))}catch(C){d(C)}}n(y,"fulfilled");function S(_){try{b(f.throw(_))}catch(C){d(C)}}n(S,"rejected");function b(_){_.done?p(_.value):h(_.value).then(y,S)}n(b,"step"),b((f=f.apply(t,r||[])).next())})},m=this&&this.__rest||function(t,r){var o={};for(var f in t)Object.prototype.hasOwnProperty.call(t,f)&&r.indexOf(f)<0&&(o[f]=t[f]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,f=Object.getOwnPropertySymbols(t);h<f.length;h++)r.indexOf(f[h])<0&&Object.prototype.propertyIsEnumerable.call(t,f[h])&&(o[f[h]]=t[f[h]]);return o},v=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const g=v(c(5384631890)),s=v(c(9013967876)),a=v(c(3564840480)),i=c(840544383);let e=n(class Ql{addEventListeners(){!this.beaconEventListener||!("window"in c.g)||!window.addEventListener||!("document"in c.g)||!document.addEventListener||(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - addEventListeners - adding pagehide and visibility change event listeners"),window.addEventListener("pagehide",this.beaconEventListener),document.addEventListener("visibilitychange",this.beaconEventListener))}beaconEventHandler(r){(r.type==="visibilitychange"&&document.visibilityState==="hidden"||r.type==="pagehide")&&(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - beaconEventHandler is triggered calling sendBeacon"),this.sendBeacon())}removeEventListeners(){!this.beaconEventListener||!("window"in c.g)||!window.removeEventListener||!("document"in c.g)||!document.removeEventListener||(window.removeEventListener("pagehide",this.beaconEventListener),document.removeEventListener("visibilitychange",this.beaconEventListener),this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - removeEventListeners - removing pagehide and visibility change event listeners"))}start(){var r;this.removeEventListeners(),this.addEventListeners(),(r=this.intervalScheduler)===null||r===void 0||r.stop(),this.intervalScheduler=new s.default(this.flushIntervalMs),this.intervalScheduler.start(()=>this.sendEvents())}stop(){var r;(r=this.intervalScheduler)===null||r===void 0||r.stop(),this.intervalScheduler=void 0,this.sendBeacon(),this.removeEventListeners()}addItem(r){return u(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - received event ${JSON.stringify(r)}`);const{name:o,ts:f,attributes:h}=r,p=h&&this.filterAttributes(h,this.attributesToFilter),d=Object.assign({name:o,ts:f},p);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - event after filtering attributes ${JSON.stringify(d)}`);const y=this.getSize(d);if(y>Ql.MAX_ITEM_SIZE_BYTES_ALLOWED)throw new Error(`Event Reporting - Item to be added has size ${y} bytes. Item cannot exceed max item size allowed of ${Ql.MAX_ITEM_SIZE_BYTES_ALLOWED} bytes.`);if(this.importantEvents.has(o)){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - sending important event ${JSON.stringify(d)}`),this.sendEventImmediately({name:o,ts:f,attributes:p});return}if(this.isFull())throw this.logger.warn("Event Reporting - Event buffer is full"),new Error("Buffer full");if(this.currentIngestionEvent.payloads.push(d),this.ingestionEventSize+=y,this.bufferItemThresholdReached(y)){const S=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);this.buffer.push(S),this.bufferSize+=this.ingestionEventSize,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - buffer item threshold reached updated buffer ${JSON.stringify(this.buffer)}`)}})}filterAttributes(r,o){const f=new Set(o);return Object.keys(r).filter(p=>f.has(p)).forEach(p=>delete r[p]),r}initializeAndGetCurrentIngestionEvent(){const r={type:this.type,v:this.v,payloads:[]};return this.ingestionEventSize=this.getSize(r),r}bufferItemThresholdReached(r){return r+this.ingestionEventSize>=this.maxBufferItemCapacityBytes||this.currentIngestionEvent.payloads.length===Ql.MAX_PAYLOAD_ITEMS}getSize(r){let o=0;if(typeof r=="object")for(const[f,h]of Object.entries(r))o+=this.getPrimitiveSize(f),o+=this.getSize(h);else o+=this.getPrimitiveSize(r);return o}getPrimitiveSize(r){let o=0;return typeof r=="string"?o+=r.length*2:typeof r=="number"&&(o+=8),o}isFull(){return this.bufferSize===this.maxBufferCapacityBytes||this.buffer.length===this.totalBufferItems}isEmpty(){return this.buffer.length===0||this.bufferSize===0}getItems(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.isEmpty()?[]:(r=Math.min(this.buffer.length,r+1),this.buffer.splice(o,r))}makeBeaconRequestBody(r){const o={metadata:this.metadata,events:r,authorization:this.authenticationToken};return JSON.stringify(o)}makeRequestBody(r){const o={metadata:this.metadata,events:r};return JSON.stringify(o)}sendEventImmediately(r){return u(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - important event received ${JSON.stringify(r)}`);const{name:o,ts:f,attributes:h}=r,p={type:this.type,v:this.v,payloads:[Object.assign({name:o,ts:f},h)]};let d=!1,y=null;const S=this.makeRequestBody([p]);try{if(y=yield this.send(S),y.ok){try{const b=yield y.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - send successful event: ${S}, message: ${JSON.stringify(b)}`)}catch(b){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Error reading OK response ${b} for event ${S}`)}return}else this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Failed to send an important event ${S} with response status ${y.status}`),d=!0}catch(b){this.logger.warn(`Event Reporting - There may be a failure in sending an important event ${S} to the ingestion endpoint ${b}.`),d=!0;try{if(this.metadata.browserName.toLowerCase()==="firefox"){const _=this.makeBeaconRequestBody([p]);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - beaconing data out ${_}`),navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,_)?d=!1:d=!0}}catch{this.logger.warn(`Event Reporting - Error sending beacon for an important event ${S}`),d=!0}}d&&(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - pushing to failed events ${S}`),this.failedIngestionEvents.push(p))})}send(r){return u(this,void 0,void 0,function*(){const o=new g.default(Ql.RETRY_FIXED_BACKOFF_WAIT_MS,Ql.RETRY_SHORT_BACKOFF_MS,Ql.RETRY_LONG_BACKOFF_MS);try{let f=0;for(;f<this.retryCountLimit;){const h=yield fetch(this.ingestionURL,{method:"POST",headers:{Authorization:`Bearer ${this.authenticationToken}`},body:r});if(h.ok||!Ql.SENDING_FAILURE_CODES.has(h.status))return h;if(this.logger.warn(`Will retry sending failure for ${r} due to status code ${h.status}.`),f++,f<this.retryCountLimit){const p=o.nextBackoffAmountMs();yield i.wait(p)}}if(f===this.retryCountLimit)throw new Error(`Retry count limit reached for ${r}`)}catch(f){throw f}})}sendBeacon(){return u(this,void 0,void 0,function*(){const r=this.buffer;if(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out buffer events ${JSON.stringify(r)}`),this.buffer=[],this.currentIngestionEvent.payloads.length>0){const f=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);r.push(f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out current ingestion event ${JSON.stringify(f)}`),this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent()}if(this.failedIngestionEvents.length>0){const f=this.failedIngestionEvents.map(h=>this.deepCopyCurrentIngestionEvent(h));r.push(...f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out any failed ingestion event ${JSON.stringify(f)}`),this.failedIngestionEvents=[]}if(this.cancellableEvents.size>0&&(this.cancellableEvents.forEach(f=>{r.push(...f),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out each cancellable event ${JSON.stringify(f)}`)}),this.cancellableEvents.clear()),r.length===0)return;const o=this.makeBeaconRequestBody(r);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - beacon data to send ${o}`);try{navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,o)||this.logger.warn(`Event Reporting - Browser failed to queue beacon data ${o}`)}catch(f){this.logger.warn(`Event Reporting - Sending beacon data ${o} failed with error ${f}`)}})}reset(){this.maxBufferCapacityBytes=0,this.totalBufferItems=0,this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.lock=!1,this.beaconEventListener=void 0,this.cancellableEvents.clear()}destroy(){return u(this,void 0,void 0,function*(){this.stop(),this.reset()})}constructor(r,o,f,h,p){this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.retryCountLimit=15,this.lock=!1,this.cancellableEvents=new Map,this.attributesToFilter=["externalUserId","externalMeetingId","timestampMs"],this.deepCopyCurrentIngestionEvent=k=>({type:k.type,v:k.v,payloads:[...k.payloads]}),this.sendEvents=()=>u(this,void 0,void 0,function*(){if(this.lock)return;const k=this.getItems(this.flushSize);if(k.length===0)return;this.lock=!0;const N=this.makeRequestBody(k);let j=!1;const B=Date.now();this.metadata.browserName.toLowerCase()==="firefox"&&this.cancellableEvents.set(B,k);try{this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - sending body ${N}`);const J=yield this.send(N);if(this.cancellableEvents.delete(B),!J.ok)this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Failed to send events ${N} with response status ${J.status}`),j=!0;else try{const Q=yield J.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - send successful events: ${N} message: ${JSON.stringify(Q)}`)}catch(Q){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents error reading OK response ${Q} for events ${N}`)}}catch(J){j=!0,this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Error in sending events ${N} to the ingestion endpoint ${J}`)}finally{this.lock=!1}j&&(this.cancellableEvents.delete(B),this.failedIngestionEvents.push(...k))});const d=new a.default(p).getParserResult(),{browserMajorVersion:y}=d,S=m(d,["browserMajorVersion"]),b=o.toJSON(),{type:_,v:C}=b,w=m(b,["type","v"]);this.authenticationToken=o.getAuthenticationToken(),this.metadata=Object.assign(Object.assign({},S),w),Object.keys(this.metadata).forEach(k=>this.attributesToFilter.push(k)),this.type=_,this.v=C,this.ingestionURL=f,this.logger=p,this.importantEvents=new Set(h);const{maxBufferCapacityKb:R,totalBufferItems:O,flushSize:D,flushIntervalMs:I,retryCountLimit:M}=r;this.maxBufferCapacityBytes=R*1024,this.totalBufferItems=O,this.maxBufferItemCapacityBytes=Math.round(this.maxBufferCapacityBytes/O),this.flushIntervalMs=I,this.flushSize=D,this.retryCountLimit=M,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.beaconEventListener=k=>this.beaconEventHandler(k),this.addEventListeners()}},"InMemoryJSONEventBuffer");l.default=e,e.SENDING_FAILURE_CODES=new Set([408,429,500,502,503,504]),e.RETRY_FIXED_BACKOFF_WAIT_MS=0,e.RETRY_SHORT_BACKOFF_MS=1e3,e.RETRY_LONG_BACKOFF_MS=15e3,e.MAX_PAYLOAD_ITEMS=2,e.MAX_ITEM_SIZE_BYTES_ALLOWED=3e3},375752845:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(m=5e3,v=2,g=64,s=100,a=15){this.flushIntervalMs=m,this.flushSize=v,this.maxBufferCapacityKb=g,this.totalBufferItems=s,this.retryCountLimit=a}},"EventBufferConfiguration");l.default=c},1653454410:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(f,h,p,d){function y(S){return S instanceof p?S:new p(function(b){b(S)})}return n(y,"adopt"),new(p||(p=Promise))(function(S,b){function _(R){try{w(d.next(R))}catch(O){b(O)}}n(_,"fulfilled");function C(R){try{w(d.throw(R))}catch(O){b(O)}}n(C,"rejected");function w(R){R.done?S(R.value):y(R.value).then(_,C)}n(w,"step"),w((d=d.apply(f,h||[])).next())})},m=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(l,"__esModule",{value:!0});const v=c(888724265),g=c(3171772403),s=m(c(6329274303)),a=m(c(3645942785)),i=m(c(380175942)),e=m(c(3741513515)),t=m(c(8066052849)),r=m(c(4622151742));let o=n(class eu{addObserver(h){this.observerSet.add(h)}removeObserver(h){this.observerSet.delete(h)}forEachObserver(h){for(const p of this.observerSet)e.default.nextTick(()=>{this.observerSet.has(p)&&h(p)})}publishEvent(h,p){return u(this,void 0,void 0,function*(){const d=Date.now();this.meetingHistoryStates.push({name:h,timestampMs:d});const y=Object.freeze(Object.assign(this.getAttributes(d),p));this.forEachObserver(S=>{S.eventDidReceive(h,y)}),this.reportEvent(h,d,p)})}reportEvent(h,p,d){var y;return u(this,void 0,void 0,function*(){let S;try{d&&(S=r.default(d)),yield(y=this.eventReporter)===null||y===void 0?void 0:y.reportEvent(p,h,S)}catch(b){this.logger.error(`Error reporting event ${b}`)}})}setupEventReporter(h,p,d){if(d)this._eventReporter=d;else if(h.urls){const y=h.urls.eventIngestionURL;if(y){this.logger.info("Event ingestion URL is present in the configuration");const{meetingId:S,credentials:{attendeeId:b,joinToken:_}}=h,C=new i.default(S,b,_),w=new s.default(C,y);this._eventReporter=new a.default(w,p)}}}getAttributes(h){var p,d;return{attendeeId:this.configuration.credentials.attendeeId,browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,externalMeetingId:typeof this.configuration.externalMeetingId=="string"?this.configuration.externalMeetingId:"",externalUserId:this.configuration.credentials.externalUserId,meetingHistory:this.meetingHistoryStates,meetingId:this.configuration.meetingId,osName:((p=this.parserResult)===null||p===void 0?void 0:p.os.name)||eu.UNAVAILABLE,osVersion:((d=this.parserResult)===null||d===void 0?void 0:d.os.version)||eu.UNAVAILABLE,sdkVersion:t.default.sdkVersion,sdkName:t.default.sdkName,timestampMs:h}}get eventReporter(){return this._eventReporter}destroy(){return u(this,void 0,void 0,function*(){g.isDestroyable(this.eventReporter)&&(yield this.eventReporter.destroy()),this.logger=void 0,this.configuration=void 0,this._eventReporter=void 0,this.destroyed=!0})}constructor(h,p,d){var y,S,b,_,C,w,R;this.meetingHistoryStates=[],this.observerSet=new Set,this.destroyed=!1,this.logger=p,this.configuration=h,this.setupEventReporter(h,p,d);try{this.parserResult=navigator&&navigator.userAgent?new v.UAParser(navigator.userAgent).getResult():null}catch(O){this.logger.error(O.message)}this.browserMajorVersion=((b=(S=(y=this.parserResult)===null||y===void 0?void 0:y.browser)===null||S===void 0?void 0:S.version)===null||b===void 0?void 0:b.split(".")[0])||eu.UNAVAILABLE,this.browserName=((_=this.parserResult)===null||_===void 0?void 0:_.browser.name)||eu.UNAVAILABLE,this.browserVersion=((C=this.parserResult)===null||C===void 0?void 0:C.browser.version)||eu.UNAVAILABLE,this.deviceName=[((w=this.parserResult)===null||w===void 0?void 0:w.device.vendor)||"",((R=this.parserResult)===null||R===void 0?void 0:R.device.model)||""].join(" ").trim()||eu.UNAVAILABLE}},"DefaultEventController");l.default=o,o.UNAVAILABLE="Unavailable"},4622151742:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const c=n(u=>{const m={};for(const[v,g]of Object.entries(u))if(!(g==null||g===""))if(typeof g=="number"||typeof g=="string")m[v]=g;else throw new TypeError("Unhandled type received while flattening attributes.");return m},"flattenEventAttributes");l.default=c},6329274303:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(375752845));let v=n(class{constructor(s,a,i=new m.default){this.eventsClientConfiguration=s,this.ingestionURL=a,this.eventBufferConfiguration=i}},"EventIngestionConfiguration");l.default=v},3645942785:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=c(3171772403),g=m(c(5578123693));let s=n(class{start(){if(!this.reportingEvents)try{this.eventBuffer.start(),this.logger.info("Event reporting started"),this.reportingEvents=!0}catch(i){this.logger.error(`Event Reporting - Error starting the event buffer ${i}`)}}stop(){if(this.reportingEvents)try{this.eventBuffer.stop(),this.logger.info("Event reporting stopped"),this.reportingEvents=!1}catch(i){this.logger.error(`Event Reporting - Error stopping the event buffer ${i}`)}}reportEvent(i,e,t){return u(this,void 0,void 0,function*(){if(this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - event received in reportEvent ${i}, ${e}, ${JSON.stringify(t)}`),this.eventsToIgnore.includes(e)){this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - ${e} event will be ignored as it is in events to ignore`);return}try{this.logger.debug("Event Reporting - DefaultMeetingEventReporter - adding item to event buffer"),yield this.eventBuffer.addItem({ts:i,name:e,attributes:t})}catch(r){this.logger.error(`Event Reporting - Error adding event to buffer ${r}`)}})}destroy(){return u(this,void 0,void 0,function*(){this.destroyed=!0,this.stop(),v.isDestroyable(this.eventBuffer)&&this.eventBuffer.destroy(),this.eventBuffer=void 0})}constructor(i,e){this.reportingEvents=!1,this.importantEvents=["meetingEnded","meetingFailed","meetingStartFailed","audioInputFailed","videoInputFailed","meetingStartSucceeded","deviceLabelTriggerFailed"],this.destroyed=!1;const{eventsClientConfiguration:t,ingestionURL:r,eventBufferConfiguration:o}=i,{eventsToIgnore:f}=t;this.eventBuffer=new g.default(o,t,r,this.importantEvents,e),this.logger=e,this.eventsToIgnore=f,this.start()}},"DefaultMeetingEventReporter");l.default=s},4400960579:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{reportEvent(m,v,g){}start(){}stop(){}constructor(){}},"NoOpEventReporter");l.default=c},380175942:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{getAuthenticationToken(){return this.authenticationToken}toJSON(){const m={};return m.type=this.type,m.v=this.v,m.meetingId=this.meetingId,m.attendeeId=this.attendeeId,m}constructor(m,v,g,s=[]){this.type="Meet",this.v=1,this.meetingId=m,this.attendeeId=v,this.eventsToIgnore=s,this.authenticationToken=g}},"MeetingEventsClientConfiguration");l.default=c},7164668892:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(la){return la&&la.__esModule?la:{default:la}};Object.defineProperty(l,"__esModule",{value:!0}),l.DefaultEventController=l.DefaultDevicePixelRatioMonitor=l.DefaultDeviceController=l.DefaultContentShareController=l.DefaultBrowserBehavior=l.DefaultAudioVideoFacade=l.DefaultAudioVideoController=l.DefaultAudioMixController=l.DefaultActiveSpeakerPolicy=l.DefaultActiveSpeakerDetector=l.DataMessage=l.CreateSDPTask=l.CreatePeerConnectionTask=l.ContentShareMediaStreamBroker=l.ContentShareConstants=l.ConsoleLogger=l.ConnectionHealthPolicyConfiguration=l.ConnectionHealthData=l.ClientVideoStreamReceivingReport=l.ClientMetricReportMediaType=l.ClientMetricReportDirection=l.ClientMetricReport=l.CleanStoppedSessionTask=l.CleanRestartedSessionTask=l.CheckVideoInputFeedback=l.CheckVideoConnectivityFeedback=l.CheckNetworkUDPConnectivityFeedback=l.CheckNetworkTCPConnectivityFeedback=l.CheckContentShareConnectivityFeedback=l.CheckCameraResolutionFeedback=l.CheckAudioOutputFeedback=l.CheckAudioInputFeedback=l.CheckAudioConnectivityFeedback=l.CanvasVideoFrameBuffer=l.CSPMonitor=l.BitrateParameters=l.BaseTask=l.BaseConnectionHealthPolicy=l.BackgroundReplacementVideoFrameProcessor=l.BackgroundFilterVideoFrameProcessor=l.BackgroundBlurVideoFrameProcessor=l.BackgroundBlurStrength=l.AudioVideoControllerState=l.AudioProfile=l.AudioLogEvent=l.Attendee=l.AttachMediaInputTask=l.AsyncScheduler=l.ApplicationMetadata=l.AllHighestVideoBandwidthPolicy=void 0,l.MeetingReadinessCheckerConfiguration=l.MeetingFeatures=l.MeetingEventsClientConfiguration=l.MediaDeviceProxyHandler=l.Maybe=l.LogLevel=l.Log=l.ListenForVolumeIndicatorsTask=l.LeaveAndReceiveLeaveAckTask=l.JoinAndReceiveIndexTask=l.IntervalScheduler=l.InMemoryJSONEventBuffer=l.GlobalMetricReport=l.GetUserMediaError=l.FullJitterLimitedBackoff=l.FullJitterBackoffFactory=l.FullJitterBackoff=l.FinishGatheringICECandidatesTask=l.EventIngestionConfiguration=l.EventBufferConfiguration=l.DeviceSelection=l.DevicePixelRatioWindowSource=l.DefaultWebSocketAdapter=l.DefaultVolumeIndicatorAdapter=l.DefaultVideoTransformDevice=l.DefaultVideoTileFactory=l.DefaultVideoTileController=l.DefaultVideoTile=l.DefaultVideoStreamIndex=l.DefaultVideoStreamIdSet=l.DefaultVideoFrameProcessorTimer=l.DefaultVideoFrameProcessorPipeline=l.DefaultVideoCaptureAndEncodeParameter=l.DefaultUserAgentParser=l.DefaultTranscriptionController=l.DefaultTransceiverController=l.DefaultSimulcastUplinkPolicyForContentShare=l.DefaultSimulcastUplinkPolicy=l.DefaultSignalingClient=l.DefaultSigV4=l.DefaultSessionStateController=l.DefaultReconnectController=l.DefaultRealtimeController=l.DefaultPingPong=l.DefaultModality=l.DefaultMessagingSession=l.DefaultMeetingSession=l.DefaultMeetingReadinessChecker=l.DefaultMeetingEventReporter=l.DefaultMediaDeviceFactory=void 0,l.RedundantAudioEncoderWorkerCode=l.RedundantAudioEncoder=l.ReconnectionHealthPolicy=l.ReceiveVideoStreamIndexTask=l.ReceiveVideoInputTask=l.ReceiveRemoteVideoPauseResumeTask=l.ReceiveAudioInputTask=l.RealtimeVolumeIndicator=l.RealtimeState=l.RealtimeAttendeePositionInFrame=l.PromoteToPrimaryMeetingTask=l.PromiseQueue=l.PrefetchSortBy=l.PrefetchOn=l.PermissionDeniedError=l.ParallelGroupTask=l.POSTLogger=l.OverconstrainedError=l.OpenSignalingConnectionTask=l.OnceTask=l.NotReadableError=l.NotFoundError=l.None=l.NoVideoUplinkBandwidthPolicy=l.NoVideoDownlinkBandwidthPolicy=l.NoOpVideoFrameProcessor=l.NoOpVideoElementFactory=l.NoOpTask=l.NoOpMediaStreamBroker=l.NoOpLogger=l.NoOpEventReporter=l.NoOpDeviceController=l.NoOpDebugLogger=l.NoOpAudioVideoController=l.NScaleVideoUplinkBandwidthPolicy=l.MutableVideoPreferences=l.MultiLogger=l.MonitorTask=l.ModelSpecBuilder=l.MessagingSessionConfiguration=l.Message=l.MeetingSessionVideoAvailability=l.MeetingSessionURLs=l.MeetingSessionTURNCredentials=l.MeetingSessionStatusCode=l.MeetingSessionStatus=l.MeetingSessionLifecycleEventCondition=l.MeetingSessionLifecycleEvent=l.MeetingSessionCredentials=l.MeetingSessionConfiguration=void 0,l.VideoEncodingCpuConnectionHealthPolicy=l.VideoEncodingConnectionHealthPolicyName=l.VideoCodecCapability=l.VideoAdaptiveProbePolicy=l.Versioning=l.UnusableAudioWarningConnectionHealthPolicy=l.TypeError=l.TranscriptionStatusType=l.TranscriptionStatus=l.TranscriptResult=l.TranscriptLanguageWithScore=l.TranscriptItemType=l.TranscriptItem=l.TranscriptEntity=l.TranscriptAlternative=l.Transcript=l.TimeoutTask=l.TimeoutScheduler=l.TaskStatus=l.TargetDisplaySize=l.SubscribeAndReceiveSubscribeAckTask=l.StreamMetricReport=l.Some=l.SingleNodeAudioTransformDevice=l.SimulcastVideoStreamIndex=l.SimulcastTransceiverController=l.SimulcastLayers=l.SimulcastContentShareTransceiverController=l.SignalingClientVideoSubscriptionConfiguration=l.SignalingClientSubscribe=l.SignalingClientJoin=l.SignalingClientEventType=l.SignalingClientEvent=l.SignalingClientConnectionRequest=l.SignalingAndMetricsConnectionMonitor=l.SetRemoteDescriptionTask=l.SetLocalDescriptionTask=l.SessionStateControllerTransitionResult=l.SessionStateControllerState=l.SessionStateControllerDeferPriority=l.SessionStateControllerAction=l.ServerSideNetworkAdaption=l.SerialGroupTask=l.SendingAudioFailureConnectionHealthPolicy=l.SendAndReceiveDataMessagesTask=l.SDPMediaSection=l.SDPCandidateType=l.SDP=l.RunnableTask=l.RedundantAudioRecoveryMetricReport=void 0,l.isVideoTransformDevice=l.isDestroyable=l.isAudioTransformDevice=l.ZLIBTextCompressor=l.WebSocketReadyState=l.WaitForAttendeePresenceTask=l.VoiceFocusTransformDevice=l.VoiceFocusDeviceTransformer=l.VideoTileState=l.VideoStreamDescription=l.VideoSource=l.VideoQualitySettings=l.VideoQualityAdaptationPreference=l.VideoPriorityBasedPolicyConfig=l.VideoPriorityBasedPolicy=l.VideoPreferences=l.VideoPreference=l.VideoOnlyTransceiverController=l.VideoLogEvent=l.VideoFxProcessor=l.VideoEncodingFramerateConnectionHealthPolicy=void 0;const m=u(c(7744958188));l.AllHighestVideoBandwidthPolicy=m.default;const v=u(c(9821410283));l.ApplicationMetadata=v.default;const g=u(c(3741513515));l.AsyncScheduler=g.default;const s=u(c(7063021350));l.AttachMediaInputTask=s.default;const a=u(c(4846700713));l.Attendee=a.default;const i=u(c(6392364773));l.AudioLogEvent=i.default;const e=u(c(4999349075));l.AudioProfile=e.default;const t=u(c(8430013536));l.AudioVideoControllerState=t.default;const r=u(c(9721779232));l.BackgroundBlurStrength=r.default;const o=u(c(7840699215));l.BackgroundBlurVideoFrameProcessor=o.default;const f=u(c(6292069043));l.BackgroundFilterVideoFrameProcessor=f.default;const h=u(c(45891509));l.BackgroundReplacementVideoFrameProcessor=h.default;const p=u(c(6963727640));l.BaseConnectionHealthPolicy=p.default;const d=u(c(516529594));l.BaseTask=d.default;const y=u(c(7699083583));l.BitrateParameters=y.default;const S=u(c(1252089397));l.CSPMonitor=S.default;const b=u(c(6672418579));l.CanvasVideoFrameBuffer=b.default;const _=u(c(7337337789));l.CheckAudioConnectivityFeedback=_.default;const C=u(c(9946611704));l.CheckAudioInputFeedback=C.default;const w=u(c(2655850275));l.CheckAudioOutputFeedback=w.default;const R=u(c(9670709847));l.CheckCameraResolutionFeedback=R.default;const O=u(c(1236878429));l.CheckContentShareConnectivityFeedback=O.default;const D=u(c(9380119960));l.CheckNetworkTCPConnectivityFeedback=D.default;const I=u(c(7487205960));l.CheckNetworkUDPConnectivityFeedback=I.default;const M=u(c(2886652712));l.CheckVideoConnectivityFeedback=M.default;const k=u(c(4725233475));l.CheckVideoInputFeedback=k.default;const N=u(c(4019918320));l.CleanRestartedSessionTask=N.default;const j=u(c(7819987893));l.CleanStoppedSessionTask=j.default;const B=u(c(7059763395));l.ClientMetricReport=B.default;const J=u(c(5147189764));l.ClientMetricReportDirection=J.default;const Q=u(c(1847926377));l.ClientMetricReportMediaType=Q.default;const oe=u(c(9895069884));l.ClientVideoStreamReceivingReport=oe.default;const $=u(c(3544934903));l.ConnectionHealthData=$.default;const he=u(c(1091173065));l.ConnectionHealthPolicyConfiguration=he.default;const Ae=u(c(5956893594));l.ConsoleLogger=Ae.default;const Ee=u(c(3560634922));l.ContentShareConstants=Ee.default;const Oe=u(c(8271576690));l.ContentShareMediaStreamBroker=Oe.default;const be=u(c(2918138407));l.CreatePeerConnectionTask=be.default;const De=u(c(7869625838));l.CreateSDPTask=De.default;const ut=u(c(1766966835));l.DataMessage=ut.default;const St=u(c(3323583056));l.DefaultActiveSpeakerDetector=St.default;const Rt=u(c(1644292716));l.DefaultActiveSpeakerPolicy=Rt.default;const Ze=u(c(3227886346));l.DefaultAudioMixController=Ze.default;const mt=u(c(616382858));l.DefaultAudioVideoController=mt.default;const At=u(c(314828250));l.DefaultAudioVideoFacade=At.default;const Vt=u(c(8351168186));l.DefaultBrowserBehavior=Vt.default;const dt=u(c(4707988254));l.DefaultContentShareController=dt.default;const Cn=u(c(8152963890));l.DefaultDeviceController=Cn.default;const gt=u(c(2343182956));l.DefaultDevicePixelRatioMonitor=gt.default;const Ut=u(c(1653454410));l.DefaultEventController=Ut.default;const en=u(c(113406342));l.DefaultMediaDeviceFactory=en.default;const sn=u(c(3645942785));l.DefaultMeetingEventReporter=sn.default;const $t=u(c(2741503378));l.DefaultMeetingReadinessChecker=$t.default;const Rn=u(c(542823578));l.DefaultMeetingSession=Rn.default;const di=u(c(9249618790));l.DefaultMessagingSession=di.default;const ii=u(c(4599834734));l.DefaultModality=ii.default;const Kn=u(c(2311029370));l.DefaultPingPong=Kn.default;const hi=u(c(5403024322));l.DefaultRealtimeController=hi.default;const Ln=u(c(8855787924));l.DefaultReconnectController=Ln.default;const Hn=u(c(4641929542));l.DefaultSessionStateController=Hn.default;const ui=u(c(7822521824));l.DefaultSigV4=ui.default;const jn=u(c(7258714924));l.DefaultSignalingClient=jn.default;const ri=u(c(3361826027));l.DefaultSimulcastUplinkPolicy=ri.default;const ie=u(c(4134174226));l.DefaultSimulcastUplinkPolicyForContentShare=ie.default;const Mt=u(c(6769427378));l.DefaultTransceiverController=Mt.default;const Ot=u(c(246495600));l.DefaultTranscriptionController=Ot.default;const Ht=u(c(3564840480));l.DefaultUserAgentParser=Ht.default;const hn=u(c(8261422434));l.DefaultVideoCaptureAndEncodeParameter=hn.default;const tn=u(c(7145536260));l.DefaultVideoFrameProcessorPipeline=tn.default;const xe=u(c(1902736443));l.DefaultVideoFrameProcessorTimer=xe.default;const Dt=u(c(5134603106));l.DefaultVideoStreamIdSet=Dt.default;const Y=u(c(5216544790));l.DefaultVideoStreamIndex=Y.default;const fe=u(c(1140481832));l.DefaultVideoTile=fe.default;const et=u(c(9251190564));l.DefaultVideoTileController=et.default;const nt=u(c(1695899970));l.DefaultVideoTileFactory=nt.default;const nn=u(c(5709738441));l.DefaultVideoTransformDevice=nn.default;const kt=u(c(338869682));l.DefaultVolumeIndicatorAdapter=kt.default;const Jt=u(c(8796204466));l.DefaultWebSocketAdapter=Jt.default;const Ke=u(c(2827699573));l.DevicePixelRatioWindowSource=Ke.default;const vt=u(c(4261566413));l.DeviceSelection=vt.default;const x=u(c(375752845));l.EventBufferConfiguration=x.default;const Ye=u(c(6329274303));l.EventIngestionConfiguration=Ye.default;const it=u(c(9613312866));l.FinishGatheringICECandidatesTask=it.default;const ft=u(c(5384631890));l.FullJitterBackoff=ft.default;const ge=u(c(1363278032));l.FullJitterBackoffFactory=ge.default;const Zn=u(c(8220481840));l.FullJitterLimitedBackoff=Zn.default;const Xt=u(c(2083236720));l.GetUserMediaError=Xt.default;const pn=u(c(3572556907));l.GlobalMetricReport=pn.default;const Bi=u(c(5578123693));l.InMemoryJSONEventBuffer=Bi.default;const Gn=u(c(9013967876));l.IntervalScheduler=Gn.default;const yo=u(c(1495317641));l.JoinAndReceiveIndexTask=yo.default;const no=u(c(5110013894));l.LeaveAndReceiveLeaveAckTask=no.default;const Vi=u(c(3708122413));l.ListenForVolumeIndicatorsTask=Vi.default;const or=u(c(3382381733));l.Log=or.default;const ki=u(c(3756404293));l.LogLevel=ki.default;const qi=u(c(3072764689));l.MediaDeviceProxyHandler=qi.default;const Or=u(c(380175942));l.MeetingEventsClientConfiguration=Or.default;const Zo=u(c(7584876358));l.MeetingFeatures=Zo.default;const Xn=u(c(7683606499));l.MeetingReadinessCheckerConfiguration=Xn.default;const Dn=u(c(7136804647));l.MeetingSessionConfiguration=Dn.default;const Ni=u(c(7147499759));l.MeetingSessionCredentials=Ni.default;const pi=u(c(5446246651));l.MeetingSessionLifecycleEvent=pi.default;const ir=u(c(7192341248));l.MeetingSessionLifecycleEventCondition=ir.default;const br=u(c(3777990285));l.MeetingSessionStatus=br.default;const zr=u(c(4882394368));l.MeetingSessionStatusCode=zr.default;const pr=u(c(7999114886));l.MeetingSessionTURNCredentials=pr.default;const mr=u(c(2653083101));l.MeetingSessionURLs=mr.default;const Ur=u(c(1880578541));l.MeetingSessionVideoAvailability=Ur.default;const io=u(c(1721682483));l.Message=io.default;const ur=u(c(9309957401));l.MessagingSessionConfiguration=ur.default;const wo=u(c(7472936477));l.ModelSpecBuilder=wo.default;const $r=u(c(1504187181));l.MonitorTask=$r.default;const Vo=u(c(950290054));l.MultiLogger=Vo.default;const V=u(c(3423911843));l.NScaleVideoUplinkBandwidthPolicy=V.default;const we=u(c(1292880771));l.NoOpAudioVideoController=we.default;const ct=u(c(9416545472));l.NoOpDebugLogger=ct.default;const Wt=u(c(9799823045));l.NoOpDeviceController=Wt.default;const On=u(c(4400960579));l.NoOpEventReporter=On.default;const fi=u(c(7338764361));l.NoOpLogger=fi.default;const Li=u(c(1946951215));l.NoOpMediaStreamBroker=Li.default;const gi=u(c(1992142375));l.NoOpTask=gi.default;const Mi=u(c(8481249111));l.NoOpVideoElementFactory=Mi.default;const Oi=u(c(7000795223));l.NoOpVideoFrameProcessor=Oi.default;const Yi=u(c(9248911078));l.NoVideoDownlinkBandwidthPolicy=Yi.default;const Cr=u(c(9128807920));l.NoVideoUplinkBandwidthPolicy=Cr.default;const wr=u(c(9468773362));l.NotFoundError=wr.default;const Kr=u(c(6809352498));l.NotReadableError=Kr.default;const bo=u(c(2913368614));l.OnceTask=bo.default;const ia=u(c(6907504899));l.OpenSignalingConnectionTask=ia.default;const Fo=u(c(3288618491));l.OverconstrainedError=Fo.default;const zi=u(c(1141297335));l.POSTLogger=zi.default;const co=u(c(6015743885));l.ParallelGroupTask=co.default;const Zr=u(c(6997557363));l.PermissionDeniedError=Zr.default;const Ao=u(c(6747155167));l.PrefetchOn=Ao.default;const No=u(c(9468168383));l.PrefetchSortBy=No.default;const qo=u(c(2997222898));l.PromiseQueue=qo.default;const ca=u(c(3627106901));l.PromoteToPrimaryMeetingTask=ca.default;const Bo=u(c(4412582314));l.RealtimeAttendeePositionInFrame=Bo.default;const ba=u(c(6045987188));l.RealtimeState=ba.default;const Ho=u(c(2450851234));l.RealtimeVolumeIndicator=Ho.default;const Fe=u(c(3151098372));l.ReceiveAudioInputTask=Fe.default;const tt=u(c(9363406688));l.ReceiveRemoteVideoPauseResumeTask=tt.default;const It=u(c(6069988831));l.ReceiveVideoInputTask=It.default;const Qt=u(c(2452872079));l.ReceiveVideoStreamIndexTask=Qt.default;const cn=u(c(8929805428));l.ReconnectionHealthPolicy=cn.default;const fn=u(c(1510239283));l.RedundantAudioEncoder=fn.default;const ci=u(c(3440292739));l.RedundantAudioEncoderWorkerCode=ci.default;const _i=u(c(7894724558));l.RedundantAudioRecoveryMetricReport=_i.default;const bi=u(c(6771673942));l.RunnableTask=bi.default;const si=u(c(3430379175));l.SDP=si.default;const Ui=u(c(9615283928));l.SDPCandidateType=Ui.default;const Nn=u(c(3364495052));l.SDPMediaSection=Nn.default;const Sr=u(c(2471283351));l.SendAndReceiveDataMessagesTask=Sr.default;const wi=u(c(2115341037));l.SendingAudioFailureConnectionHealthPolicy=wi.default;const qr=u(c(3894566132));l.SerialGroupTask=qr.default;const uo=u(c(1448262436));l.ServerSideNetworkAdaption=uo.default;const go=u(c(3097552577));l.SessionStateControllerAction=go.default;const ji=u(c(3049140029));l.SessionStateControllerDeferPriority=ji.default;const Qi=u(c(953236500));l.SessionStateControllerState=Qi.default;const _r=u(c(7338273141));l.SessionStateControllerTransitionResult=_r.default;const Jr=u(c(6412210284));l.SetLocalDescriptionTask=Jr.default;const jo=u(c(839180639));l.SetRemoteDescriptionTask=jo.default;const ea=u(c(1523356655));l.SignalingAndMetricsConnectionMonitor=ea.default;const gr=u(c(893025464));l.SignalingClientConnectionRequest=gr.default;const ua=u(c(8152250765));l.SignalingClientEvent=ua.default;const so=u(c(426218501));l.SignalingClientEventType=so.default;const Jo=u(c(9315300759));l.SignalingClientJoin=Jo.default;const $a=u(c(1026405281));l.SignalingClientSubscribe=$a.default;const Qa=u(c(4983545831));l.SignalingClientVideoSubscriptionConfiguration=Qa.default;const _a=u(c(1438956810));l.SimulcastContentShareTransceiverController=_a.default;const Wa=u(c(8438160003));l.SimulcastLayers=Wa.default;const za=u(c(2962876954));l.SimulcastTransceiverController=za.default;const Na=u(c(7562203998));l.SimulcastVideoStreamIndex=Na.default;const sa=u(c(3083691903));l.SingleNodeAudioTransformDevice=sa.default;const pa=u(c(7825873064));l.StreamMetricReport=pa.default;const Ka=u(c(2641934340));l.SubscribeAndReceiveSubscribeAckTask=Ka.default;const Lo=u(c(6110401981));l.TargetDisplaySize=Lo.default;const ma=u(c(9293073193));l.TaskStatus=ma.default;const Ja=u(c(6393942734));l.TimeoutScheduler=Ja.default;const Ta=u(c(3450261616));l.TimeoutTask=Ta.default;const ns=u(c(9138893973));l.Transcript=ns.default;const bs=u(c(866659076));l.TranscriptAlternative=bs.default;const da=u(c(7538060970));l.TranscriptEntity=da.default;const fs=u(c(3531434754));l.TranscriptItem=fs.default;const So=u(c(2024984314));l.TranscriptItemType=So.default;const Wo=u(c(9584814027));l.TranscriptLanguageWithScore=Wo.default;const Uo=u(c(3443368328));l.TranscriptResult=Uo.default;const ra=u(c(2461374283));l.TranscriptionStatus=ra.default;const oa=u(c(3798201443));l.TranscriptionStatusType=oa.default;const hs=u(c(8219602063));l.TypeError=hs.default;const me=u(c(5928001672));l.UnusableAudioWarningConnectionHealthPolicy=me.default;const Ie=u(c(8066052849));l.Versioning=Ie.default;const $e=u(c(1437705752));l.VideoAdaptiveProbePolicy=$e.default;const ot=u(c(4883941895));l.VideoCodecCapability=ot.default;const Et=u(c(6005421222));l.VideoEncodingConnectionHealthPolicyName=Et.default;const Yt=u(c(8438187697));l.VideoEncodingCpuConnectionHealthPolicy=Yt.default;const jt=u(c(1615281264));l.VideoEncodingFramerateConnectionHealthPolicy=jt.default;const yn=u(c(2403769553));l.VideoFxProcessor=yn.default;const Sn=u(c(4715258780));l.VideoLogEvent=Sn.default;const Pn=u(c(3052177122));l.VideoOnlyTransceiverController=Pn.default;const In=u(c(7981698535));l.VideoPreference=In.default;const Jn=u(c(6700033168));l.VideoPreferences=Jn.default;const ei=u(c(6313276823));l.VideoPriorityBasedPolicy=ei.default;const oi=u(c(9837586225));l.VideoPriorityBasedPolicyConfig=oi.default;const Si=u(c(5116495551));l.VideoQualityAdaptationPreference=Si.default;const yi=u(c(8981226922));l.VideoQualitySettings=yi.default;const li=u(c(2551170247));l.VideoSource=li.default;const Yn=u(c(4202624657));l.VideoStreamDescription=Yn.default;const Gi=u(c(5449946032));l.VideoTileState=Gi.default;const Wr=u(c(8525594090));l.VoiceFocusDeviceTransformer=Wr.default;const oo=u(c(282836061));l.VoiceFocusTransformDevice=oo.default;const lo=u(c(7500181884));l.WaitForAttendeePresenceTask=lo.default;const dn=u(c(2686893898));l.WebSocketReadyState=dn.default;const fo=u(c(9675039205));l.ZLIBTextCompressor=fo.default;const to=c(6700033168);Object.defineProperty(l,"MutableVideoPreferences",{enumerable:!0,get:function(){return to.MutableVideoPreferences}});const fr=c(903520651);Object.defineProperty(l,"Some",{enumerable:!0,get:function(){return fr.Some}}),Object.defineProperty(l,"None",{enumerable:!0,get:function(){return fr.None}}),Object.defineProperty(l,"Maybe",{enumerable:!0,get:function(){return fr.Maybe}});const xo=c(3961458747);Object.defineProperty(l,"isAudioTransformDevice",{enumerable:!0,get:function(){return xo.isAudioTransformDevice}});const _o=c(3171772403);Object.defineProperty(l,"isDestroyable",{enumerable:!0,get:function(){return _o.isDestroyable}});const fa=c(272852764);Object.defineProperty(l,"isVideoTransformDevice",{enumerable:!0,get:function(){return fa.isVideoTransformDevice}})},5956893594:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(3756404293));let v=n(class{info(s){this.log(m.default.INFO,s)}warn(s){this.log(m.default.WARN,s)}error(s){this.log(m.default.ERROR,s)}debug(s){m.default.DEBUG<this.level||(typeof s=="string"?this.log(m.default.DEBUG,s):s?this.log(m.default.DEBUG,s()):this.log(m.default.DEBUG,""+s))}setLogLevel(s){this.level=s}getLogLevel(){return this.level}log(s,a){if(s<this.level)return;const e=`${new Date().toISOString()} [${m.default[s]}] ${this.name} - ${a}`;switch(s){case m.default.ERROR:console.error(e);break;case m.default.WARN:console.warn(e);break;case m.default.DEBUG:console.debug(e.replace(/\\r\\n/g,`
`));break;case m.default.INFO:console.info(e);break}}constructor(s,a=m.default.WARN){this.name=s,this.level=a}},"ConsoleLogger");l.default=v},3382381733:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(m,v,g,s){this.sequenceNumber=m,this.message=v,this.timestampMs=g,this.logLevel=s}},"Log");l.default=c},3756404293:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.LogLevel=void 0;var c;(function(u){u[u.DEBUG=0]="DEBUG",u[u.INFO=1]="INFO",u[u.WARN=2]="WARN",u[u.ERROR=3]="ERROR",u[u.OFF=4]="OFF"})(c=l.LogLevel||(l.LogLevel={})),l.default=c},950290054:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(3756404293));let v=n(class{info(s){for(const a of this._loggers)a.info(s)}warn(s){for(const a of this._loggers)a.warn(s)}error(s){for(const a of this._loggers)a.error(s)}debug(s){let a,i;typeof s=="string"?i=s:s?i=n(()=>(a||(a=s()),a),"memoized"):i=""+s;for(const e of this._loggers)e.debug(i)}setLogLevel(s){for(const a of this._loggers)a.setLogLevel(s)}getLogLevel(){for(const s of this._loggers)return s.getLogLevel();return m.default.OFF}constructor(...s){this._loggers=s}},"MultiLogger");l.default=v},9416545472:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(3756404293)),v=u(c(7338764361));let g=n(class extends v.default{constructor(){super(m.default.DEBUG)}},"NoOpDebugLogger");l.default=g},7338764361:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(3756404293));let v=n(class{info(s){}warn(s){}error(s){}debug(s){m.default.DEBUG<this.level||typeof s!="string"&&s()}setLogLevel(s){this.level=s}getLogLevel(){return this.level}constructor(s=m.default.OFF){this.level=s}},"NoOpLogger");l.default=v},1141297335:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(9013967876)),g=m(c(3382381733)),s=m(c(3756404293));let a=n(class xg{addEventListener(){!this.eventListener||!("window"in c.g)||!window.addEventListener||window.addEventListener("unload",this.eventListener)}removeEventListener(){!this.eventListener||!("window"in c.g)||!window.removeEventListener||window.removeEventListener("unload",this.eventListener)}debug(e){s.default.DEBUG<this.logLevel||(typeof e=="string"?this.log(s.default.DEBUG,e):e?this.log(s.default.DEBUG,e()):this.log(s.default.DEBUG,""+e))}info(e){this.log(s.default.INFO,e)}warn(e){this.log(s.default.WARN,e)}error(e){this.log(s.default.ERROR,e)}setLogLevel(e){this.logLevel=e}getLogLevel(){return this.logLevel}getLogCaptureSize(){return this.logCapture.length}start(){this.addEventListener(),this.intervalScheduler=new v.default(this.intervalMs),this.intervalScheduler.start(()=>u(this,void 0,void 0,function*(){if(this.lock===!0||this.getLogCaptureSize()===0)return;this.lock=!0;const e=this.logCapture.slice(0,this.batchSize),t=this.makeRequestBody(e);try{(yield fetch(this.url,Object.assign({method:"POST",body:t},this.headers?{headers:this.headers}:{}))).status===200&&(this.logCapture=this.logCapture.slice(e.length))}catch(r){console.warn("[POSTLogger] "+r.message)}finally{this.lock=!1}}))}stop(){var e;(e=this.intervalScheduler)===null||e===void 0||e.stop(),this.intervalScheduler=void 0,this.removeEventListener();const t=this.makeRequestBody(this.logCapture);navigator.sendBeacon(this.url,t)}destroy(){return u(this,void 0,void 0,function*(){this.stop(),this.metadata=void 0,this.headers=void 0,this.logCapture=[],this.sequenceNumber=0,this.lock=!1,this.batchSize=0,this.intervalMs=0,this.url=void 0})}makeRequestBody(e){return JSON.stringify(Object.assign(Object.assign({},this.metadata),{logs:e}))}log(e,t){if(e<this.logLevel)return;const r=Date.now();this.logCapture.push(new g.default(this.sequenceNumber,t,r,s.default[e])),this.sequenceNumber+=1}constructor(e){this.logCapture=[],this.lock=!1,this.sequenceNumber=0;const{url:t,batchSize:r=xg.BATCH_SIZE,intervalMs:o=xg.INTERVAL_MS,logLevel:f=s.default.WARN,metadata:h,headers:p}=e;this.url=t,this.batchSize=r,this.intervalMs=o,this.logLevel=f,this.metadata=h,this.headers=p,this.start(),this.eventListener=()=>{this.stop()},this.addEventListener()}},"POSTLogger");l.default=a,a.BATCH_SIZE=85,a.INTERVAL_MS=2e3},113406342:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(3072764689));let v=n(class{create(){if(this.isMediaDevicesSupported)return new Proxy(navigator.mediaDevices,new m.default);throw new Error("navigator.mediaDevices is not supported")}constructor(){this.isMediaDevicesSupported=typeof navigator<"u"&&!!navigator.mediaDevices}},"DefaultMediaDeviceFactory");l.default=v},3072764689:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(3741513515)),g=m(c(9013967876));let s=n(class xv{sortedDeviceList(){return u(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).sort((e,t)=>e.deviceId<t.deviceId?1:e.deviceId>t.deviceId?-1:0)})}handleDeviceChangeEvent(){for(const i of this.deviceChangeListeners)v.default.nextTick(()=>{if(this.deviceChangeListeners.has(i)){const e=new Event("devicechange");typeof i=="function"?i(e):i.handleEvent(e)}})}constructor(){this.scheduler=null,this.devices=null,this.deviceChangeListeners=new Set,this.get=(i,e,t)=>{if(!Reflect.has(i,e))return;if(!("ondevicechange"in navigator.mediaDevices)){if(e==="addEventListener")return this.patchAddEventListener(i,e,t);if(e==="removeEventListener")return this.patchRemoveEventListener(i,e,t)}const r=Reflect.get(i,e,t);return typeof r=="function"?r.bind(i):r},this.patchAddEventListener=(i,e,t)=>{const r=Reflect.get(i,e,t);return(o,f,h)=>{if(o==="devicechange")this.deviceChangeListeners.add(f),this.scheduler||(this.scheduler=new g.default(xv.INTERVAL_MS),this.scheduler.start(this.pollDeviceLists));else return Reflect.apply(r,i,[o,f,h])}},this.patchRemoveEventListener=(i,e,t)=>{const r=Reflect.get(i,e,t);return(o,f,h)=>{if(o==="devicechange")this.deviceChangeListeners.delete(f),this.deviceChangeListeners.size===0&&this.scheduler&&(this.scheduler.stop(),this.scheduler=null);else return Reflect.apply(r,i,[o,f,h])}},this.pollDeviceLists=()=>u(this,void 0,void 0,function*(){const i=yield this.sortedDeviceList();this.devices&&(i.length!==this.devices.length||i.some((t,r)=>t.deviceId!==this.devices[r].deviceId))&&this.handleDeviceChangeEvent(),this.devices=i})}},"MediaDeviceProxyHandler");l.default=s,s.INTERVAL_MS=1e3},1946951215:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{acquireAudioInputStream(){return Promise.reject()}acquireVideoInputStream(){return Promise.reject()}acquireDisplayInputStream(m){return Promise.reject()}muteLocalAudioInputStream(){}unmuteLocalAudioInputStream(){}addMediaStreamBrokerObserver(m){}removeMediaStreamBrokerObserver(m){}},"NoOpMediaStreamBroker");l.default=c},7337337789:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioConnectivityFeedback=void 0;var c;(function(u){u[u.Succeeded=0]="Succeeded",u[u.AudioInputRequestFailed=1]="AudioInputRequestFailed",u[u.AudioInputPermissionDenied=2]="AudioInputPermissionDenied",u[u.ConnectionFailed=3]="ConnectionFailed",u[u.AudioNotReceived=4]="AudioNotReceived"})(c=l.CheckAudioConnectivityFeedback||(l.CheckAudioConnectivityFeedback={})),l.default=c},9946611704:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioInputFeedback=void 0;var c;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.PermissionDenied=2]="PermissionDenied"})(c=l.CheckAudioInputFeedback||(l.CheckAudioInputFeedback={})),l.default=c},2655850275:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioOutputFeedback=void 0;var c;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed"})(c=l.CheckAudioOutputFeedback||(l.CheckAudioOutputFeedback={})),l.default=c},9670709847:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckCameraResolutionFeedback=void 0;var c;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.ResolutionNotSupported=2]="ResolutionNotSupported",u[u.PermissionDenied=3]="PermissionDenied"})(c=l.CheckCameraResolutionFeedback||(l.CheckCameraResolutionFeedback={})),l.default=c},1236878429:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckContentShareConnectivityFeedback=void 0;var c;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.PermissionDenied=2]="PermissionDenied",u[u.TimedOut=3]="TimedOut",u[u.ConnectionFailed=4]="ConnectionFailed"})(c=l.CheckContentShareConnectivityFeedback||(l.CheckContentShareConnectivityFeedback={})),l.default=c},9380119960:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkTCPConnectivityFeedback=void 0;var c;(function(u){u[u.Succeeded=0]="Succeeded",u[u.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",u[u.ConnectionFailed=2]="ConnectionFailed",u[u.ICENegotiationFailed=3]="ICENegotiationFailed"})(c=l.CheckNetworkTCPConnectivityFeedback||(l.CheckNetworkTCPConnectivityFeedback={})),l.default=c},7487205960:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkUDPConnectivityFeedback=void 0;var c;(function(u){u[u.Succeeded=0]="Succeeded",u[u.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",u[u.ConnectionFailed=2]="ConnectionFailed",u[u.ICENegotiationFailed=3]="ICENegotiationFailed"})(c=l.CheckNetworkUDPConnectivityFeedback||(l.CheckNetworkUDPConnectivityFeedback={})),l.default=c},2886652712:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoConnectivityFeedback=void 0;var c;(function(u){u[u.Succeeded=0]="Succeeded",u[u.VideoInputRequestFailed=1]="VideoInputRequestFailed",u[u.VideoInputPermissionDenied=2]="VideoInputPermissionDenied",u[u.ConnectionFailed=3]="ConnectionFailed",u[u.VideoNotSent=4]="VideoNotSent"})(c=l.CheckVideoConnectivityFeedback||(l.CheckVideoConnectivityFeedback={})),l.default=c},4725233475:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoInputFeedback=void 0;var c;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.PermissionDenied=2]="PermissionDenied"})(c=l.CheckVideoInputFeedback||(l.CheckVideoInputFeedback={})),l.default=c},2741503378:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(C,w,R,O){function D(I){return I instanceof R?I:new R(function(M){M(I)})}return n(D,"adopt"),new(R||(R=Promise))(function(I,M){function k(B){try{j(O.next(B))}catch(J){M(J)}}n(k,"fulfilled");function N(B){try{j(O.throw(B))}catch(J){M(J)}}n(N,"rejected");function j(B){B.done?I(B.value):D(B.value).then(k,N)}n(j,"step"),j((O=O.apply(C,w||[])).next())})},m=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(3227886346)),g=m(c(8351168186)),s=m(c(8152963890)),a=m(c(6997557363)),i=m(c(516529594)),e=m(c(3450261616)),t=m(c(7337337789)),r=m(c(9946611704)),o=m(c(2655850275)),f=m(c(9670709847)),h=m(c(1236878429)),p=m(c(9380119960)),d=m(c(7487205960)),y=m(c(2886652712)),S=m(c(4725233475)),b=m(c(7683606499));let _=n(class Fv{static delay(w){return u(this,void 0,void 0,function*(){return new Promise(R=>setTimeout(R,w))})}checkAudioInput(w){return u(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startAudioInput(w),yield this.meetingSession.audioVideo.stopAudioInput(),r.default.Succeeded}catch(R){return this.logger.error(`MeetingReadinessChecker: Audio input check failed with error ${R}`),R instanceof a.default?r.default.PermissionDenied:r.default.Failed}})}checkAudioOutput(w,R){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return u(this,void 0,void 0,function*(){try{const D=w?s.default.getIntrinsicDeviceId(w):"";return yield this.playTone(D,this.configuration.audioOutputFrequency,O),(yield R())?o.default.Succeeded:o.default.Failed}catch(D){return this.logger.error(`MeetingReadinessChecker: Audio output check failed with error: ${D}`),o.default.Failed}finally{this.stopTone()}})}playTone(w,R,O){return u(this,void 0,void 0,function*(){const I=this.configuration.audioOutputGain;this.oscillatorNode&&this.stopTone(),this.audioContext=s.default.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=0,this.oscillatorNode=this.audioContext.createOscillator(),this.oscillatorNode.frequency.value=R,this.oscillatorNode.connect(this.gainNode),this.destinationStream=this.audioContext.createMediaStreamDestination(),this.gainNode.connect(this.destinationStream);const k=this.audioContext.currentTime+.1;this.gainNode.gain.linearRampToValueAtTime(0,k),this.gainNode.gain.linearRampToValueAtTime(I,k+.1),this.oscillatorNode.start();const N=new v.default(this.logger);try{this.browserBehavior.supportsSetSinkId()&&(yield N.bindAudioDevice({deviceId:w}))}catch(j){this.logger.error(`Failed to bind audio device: ${j}`)}try{yield N.bindAudioElement(O||new Audio)}catch(j){this.logger.error(`Failed to bind audio element: ${j}`)}yield N.bindAudioStream(this.destinationStream.stream)})}stopTone(){if(!this.audioContext||!this.gainNode||!this.oscillatorNode||!this.destinationStream)return;const w=1,R=.1,O=this.configuration.audioOutputGain,D=this.audioContext.currentTime;this.gainNode.gain.linearRampToValueAtTime(O,D+R+w),this.gainNode.gain.linearRampToValueAtTime(0,D+R*2+w),this.oscillatorNode.stop(),this.oscillatorNode.disconnect(this.gainNode),this.gainNode.disconnect(this.destinationStream),this.oscillatorNode=null,this.gainNode=null,this.destinationStream=null}checkVideoInput(w){return u(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startVideoInput(w),yield this.meetingSession.audioVideo.stopVideoInput(),S.default.Succeeded}catch(R){return this.logger.error(`MeetingReadinessChecker: Video check failed with error ${R}`),R instanceof a.default?S.default.PermissionDenied:S.default.Failed}})}checkCameraResolution(w,R,O){return u(this,void 0,void 0,function*(){let D;try{const I=s.default.getIntrinsicDeviceId(w),M={video:this.calculateVideoConstraint(I,R,O)};D=yield navigator.mediaDevices.getUserMedia(M)}catch(I){return this.logger.error(`MeetingReadinessChecker: Camera resolution check with width: ${R} height ${O} failed with error ${I}`),I&&I.name==="OverconstrainedError"?f.default.ResolutionNotSupported:I&&I.name==="NotAllowedError"?f.default.PermissionDenied:f.default.Failed}finally{D&&D.getTracks().forEach(function(I){I.stop()})}return f.default.Succeeded})}calculateVideoConstraint(w,R,O){const D=this.browserBehavior.requiresResolutionAlignment(R,O),I={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?(I.deviceId=w,I.width=R,I.height=O):(I.deviceId={exact:w},I.width={exact:D[0]},I.height={exact:D[1]}),I}checkContentShareConnectivity(w){return u(this,void 0,void 0,function*(){let R=!1,O=!1;const D={contentShareDidStart:()=>{R=!0}},I={audioVideoDidStart:()=>{O=!0}};try{return this.meetingSession.audioVideo.addObserver(I),this.meetingSession.audioVideo.start(),this.meetingSession.audioVideo.addContentShareObserver(D),yield this.meetingSession.audioVideo.startContentShareFromScreenCapture(w),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return O&&R})),O?(yield this.stopMeeting(),R?h.default.Succeeded:h.default.TimedOut):h.default.ConnectionFailed}catch(M){return this.logger.error(`MeetingReadinessChecker: Content share check failed with error ${M}`),M.name==="NotAllowedError"?h.default.PermissionDenied:h.default.Failed}finally{this.meetingSession.audioVideo.removeObserver(I),this.meetingSession.audioVideo.stopContentShare(),this.meetingSession.audioVideo.removeContentShareObserver(D)}})}checkAudioConnectivity(w){return u(this,void 0,void 0,function*(){let R=!1;const O={packetsReceived:0},D=this.meetingSession.audioVideo,I={metricsDidReceive(k){k.getRTCStatsReport().forEach(N=>{N.type==="inbound-rtp"&&(N.mediaType==="audio"||N.kind==="audio")&&(O.packetsReceived=N.packetsReceived)})}},M=n((k,N,j,B)=>{k===this.meetingSession.configuration.credentials.attendeeId&&N&&(R=!0)},"attendeePresenceHandler");try{yield D.startAudioInput(w)}catch(k){return this.logger.error(`MeetingReadinessChecker: Failed to get audio input device with error ${k}`),k instanceof a.default?t.default.AudioInputPermissionDenied:t.default.AudioInputRequestFailed}return D.realtimeSubscribeToAttendeeIdPresence(M),D.addObserver(I),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return this.isAudioConnectionSuccessful(R,O)})),D.removeObserver(I),D.realtimeUnsubscribeToAttendeeIdPresence(M),yield this.stopMeeting(),yield this.meetingSession.audioVideo.stopAudioInput(),this.isAudioConnectionSuccessful(R,O)?t.default.Succeeded:t.default.AudioNotReceived):(D.removeObserver(I),D.realtimeUnsubscribeToAttendeeIdPresence(M),yield this.meetingSession.audioVideo.stopAudioInput(),t.default.ConnectionFailed)})}checkVideoConnectivity(w){return u(this,void 0,void 0,function*(){const R=this.meetingSession.audioVideo;let O=0;const D={metricsDidReceive(I){I.getRTCStatsReport().forEach(k=>{k.type==="outbound-rtp"&&(k.mediaType==="video"||k.kind==="video")&&(O=k.packetsSent)})}};try{yield R.startVideoInput(w)}catch(I){return this.logger.error(`MeetingReadinessChecker: Failed to get video input device with error ${I}`),I instanceof a.default?y.default.VideoInputPermissionDenied:y.default.VideoInputRequestFailed}return R.addObserver(D),(yield this.startMeeting())?(R.startLocalVideoTile(),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return O>0})),yield R.stopVideoInput(),yield this.stopMeeting(),R.removeObserver(D),O<=0?y.default.VideoNotSent:y.default.Succeeded):y.default.ConnectionFailed})}checkNetworkUDPConnectivity(){return u(this,void 0,void 0,function*(){let w=!1;const R={metricsDidReceive(D){D.getRTCStatsReport().forEach(M=>{M.type==="candidate-pair"&&M.state==="succeeded"&&(w=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(D){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${D}`),d.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=D=>{const I=this.originalURLRewriter(D);return I.includes("transport=tcp")?"":I};const O=this.meetingSession.audioVideo;return O.addObserver(R),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return w})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),O.removeObserver(R),w?d.default.Succeeded:d.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,d.default.ConnectionFailed)})}checkNetworkTCPConnectivity(){return u(this,void 0,void 0,function*(){let w=!1;const R={metricsDidReceive(D){D.getRTCStatsReport().forEach(M=>{M.type==="candidate-pair"&&M.state==="succeeded"&&(w=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(D){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${D}`),p.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=D=>{const I=this.originalURLRewriter(D);return I.includes("transport=udp")?"":I};const O=this.meetingSession.audioVideo;return O.addObserver(R),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return w})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),O.removeObserver(R),w?p.default.Succeeded:p.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,p.default.ConnectionFailed)})}startMeeting(){return u(this,void 0,void 0,function*(){let w=!1;const R={audioVideoDidStart:()=>{w=!0}};return this.meetingSession.audioVideo.addObserver(R),this.meetingSession.audioVideo.start(),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return w})),this.meetingSession.audioVideo.removeObserver(R),w})}stopMeeting(){return u(this,void 0,void 0,function*(){let w=!1;const R={audioVideoDidStop:O=>{w=!0}};return this.meetingSession.audioVideo.addObserver(R),this.meetingSession.audioVideo.stop(),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return w})),this.meetingSession.audioVideo.removeObserver(R),w})}executeTimeoutTask(w){return u(this,void 0,void 0,function*(){let R=!1,O=n(class extends i.default{cancel(){this.isCancelled=!0}run(){return u(this,void 0,void 0,function*(){for(;!this.isCancelled;){if(yield w()){R=!0;break}yield Fv.delay(this.waitDurationMs)}})}constructor(M,k){super(M),this.waitDurationMs=k,this.isCancelled=!1}},"CheckForConditionTask");return yield new e.default(this.logger,new O(this.logger,this.configuration.waitDurationMs),this.configuration.timeoutMs).run(),R})}isAudioConnectionSuccessful(w,R){return w&&R.packetsReceived>0}constructor(w,R,O=new b.default){this.logger=w,this.meetingSession=R,this.configuration=O,this.browserBehavior=new g.default}},"DefaultMeetingReadinessChecker");l.default=_},7683606499:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(){this.timeoutMs=1e4,this.waitDurationMs=3e3,this.audioOutputFrequency=440,this.audioOutputGain=.1}},"MeetingReadinessCheckerConfiguration");l.default=c},542823578:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(d,y,S,b){function _(C){return C instanceof S?C:new S(function(w){w(C)})}return n(_,"adopt"),new(S||(S=Promise))(function(C,w){function R(I){try{D(b.next(I))}catch(M){w(M)}}n(R,"fulfilled");function O(I){try{D(b.throw(I))}catch(M){w(M)}}n(O,"rejected");function D(I){I.done?C(I.value):_(I.value).then(R,O)}n(D,"step"),D((b=b.apply(d,y||[])).next())})},m=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(616382858)),g=m(c(314828250)),s=m(c(5384631890)),a=m(c(8351168186)),i=m(c(8271576690)),e=m(c(4707988254)),t=m(c(1252089397)),r=c(3171772403),o=m(c(1653454410)),f=m(c(8855787924)),h=m(c(8796204466));let p=n(class{get configuration(){return this._configuration}get logger(){return this._logger}get audioVideo(){return this.audioVideoFacade}get contentShare(){return this.contentShareController}get deviceController(){return this._deviceController}get eventController(){return this._eventController}destroy(){return u(this,void 0,void 0,function*(){r.isDestroyable(this.contentShareController)&&(yield this.contentShareController.destroy()),r.isDestroyable(this.audioVideoController)&&(yield this.audioVideoController.destroy()),r.isDestroyable(this.eventController)&&(yield this.eventController.destroy()),t.default.removeLogger(this._logger),this._logger=void 0,this._configuration=void 0,this._deviceController=void 0,this.audioVideoFacade=void 0,this.audioVideoController=void 0,this.contentShareController=void 0,this._eventController=void 0})}checkBrowserSupportAndFeatureConfiguration(){const y=new a.default,S=`${y.name()} ${y.majorVersion()} (${y.version()})`;if(this.logger.info(`browser is ${S}`),y.isSupported()||this.logger.warn(`this browser is not currently supported. Stability may suffer. Supported browsers are: ${y.supportString()}.`),this._configuration.videoUplinkBandwidthPolicy)if(this.isSimulcastUplinkPolicy(this._configuration.videoUplinkBandwidthPolicy)){if(!y.hasChromiumWebRTC())throw new Error("Simulcast is only supported on Chromium-based browsers");this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0}else this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1;this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&(y.hasChromiumWebRTC()?this.logger.info(`Simulcast is enabled for ${y.name()}`):(this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.logger.info("Simulcast is only supported on Chromium-based browsers")),this._configuration.enableSVC&&(this._configuration.enableSVC=!1,this.logger.info("SVC is not successfully enabled since simulcast is enabled"))),this._configuration.enableSVC&&!y.supportsScalableVideoCoding()&&(this._configuration.enableSVC=!1,this.logger.info("SVC is only supported on Chromium-based browsers with version 111 or above"))}isSimulcastUplinkPolicy(y){return!!(y&&y.addObserver)}constructor(y,S,b,_){this._eventController=_,this._configuration=y,this._logger=S,this.checkBrowserSupportAndFeatureConfiguration(),t.default.addLogger(this._logger),t.default.register(),this._eventController||(this._eventController=new o.default(y,S)),b.eventController||(b.eventController=this.eventController),this.audioVideoController=new v.default(this._configuration,this._logger,new h.default(this._logger),b,new f.default(this._configuration.reconnectTimeoutMs,new s.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs)),this.eventController),this._deviceController=b,this.logger.info(`MeetingFeatures: ${JSON.stringify(y.meetingFeatures)}`);const C=new i.default(this._logger);this.contentShareController=new e.default(C,new v.default(e.default.createContentShareMeetingSessionConfigure(this._configuration),this._logger,new h.default(this._logger),C,new f.default(this._configuration.reconnectTimeoutMs,new s.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs))),this.audioVideoController),this.audioVideoFacade=new g.default(this.audioVideoController,this.audioVideoController.videoTileController,this.audioVideoController.realtimeController,this.audioVideoController.audioMixController,this._deviceController,this.contentShareController)}},"DefaultMeetingSession");l.default=p},7584876358:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(8981226922));let v=n(class Bv{clone(){return new Bv(this.videoMaxResolution,this.contentMaxResolution)}constructor(s=m.default.VideoResolutionHD,a=m.default.VideoResolutionFHD){this.videoMaxResolution=s,this.contentMaxResolution=a}},"MeetingFeatures");l.default=v},7136804647:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(1091173065)),v=u(c(8981226922)),g=c(840544383),s=u(c(7584876358)),a=u(c(7147499759)),i=u(c(2653083101));let e=n(class{constructor(r,o){var f,h;if(this.meetingId=null,this.externalMeetingId=null,this.credentials=null,this.urls=null,this.connectionTimeoutMs=15e3,this.attendeePresenceTimeoutMs=0,this.connectionHealthPolicyConfiguration=new m.default,this.reconnectTimeoutMs=120*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackOffMs=1*1e3,this.reconnectLongBackOffMs=5*1e3,this.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.enableSVC=!1,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.keepLastFrameWhenPaused=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1,this.meetingFeatures=new s.default,r){r=g.toLowerCasePropertyNames(r),r.meeting&&(r=r.meeting),this.meetingId=r.meetingid,this.externalMeetingId=r.externalmeetingid,this.urls=new i.default,this.urls.audioHostURL=r.mediaplacement.audiohosturl,this.urls.signalingURL=r.mediaplacement.signalingurl,this.urls.turnControlURL=r.mediaplacement.turncontrolurl,r.mediaplacement.eventingestionurl&&(this.urls.eventIngestionURL=r.mediaplacement.eventingestionurl);const p=n((d,y)=>{switch(d){case"None":return v.default.VideoDisabled;case"HD":return v.default.VideoResolutionHD;case"FHD":return v.default.VideoResolutionFHD;case"UHD":return v.default.VideoResolutionUHD;default:return y}},"parseVideoResolution");if(((f=r.meetingfeatures)===null||f===void 0?void 0:f.video)!==void 0||((h=r.meetingfeatures)===null||h===void 0?void 0:h.content)!==void 0){const d=r.meetingfeatures.video===void 0?"HD":r.meetingfeatures.video.maxresolution,y=r.meetingfeatures.content===void 0?"FHD":r.meetingfeatures.content.maxresolution;this.meetingFeatures=new s.default(p(d,v.default.VideoResolutionHD),p(y,v.default.VideoResolutionFHD))}}o&&(o=g.toLowerCasePropertyNames(o),o.attendee&&(o=o.attendee),this.credentials=new a.default,this.credentials.attendeeId=o.attendeeid,this.credentials.externalUserId=o.externaluserid,this.credentials.joinToken=o.jointoken)}},"MeetingSessionConfiguration");l.default=e},7147499759:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{toJSON(){return{attendeeId:this.attendeeId,joinToken:this.joinToken===null?null:"<redacted>"}}constructor(){this.attendeeId=null,this.externalUserId=null,this.joinToken=null}},"MeetingSessionCredentials");l.default=c},5446246651:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEvent=void 0;var c;(function(u){u[u.Connecting=0]="Connecting",u[u.Started=1]="Started",u[u.Stopped=2]="Stopped"})(c=l.MeetingSessionLifecycleEvent||(l.MeetingSessionLifecycleEvent={})),l.default=c},7192341248:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEventCondition=void 0;var c;(function(u){u[u.ConnectingNew=0]="ConnectingNew",u[u.ReconnectingExisting=1]="ReconnectingExisting",u[u.StartedNew=2]="StartedNew",u[u.StartedExisting=3]="StartedExisting",u[u.StartedAfterReconnect=4]="StartedAfterReconnect",u[u.StoppedCleanly=5]="StoppedCleanly",u[u.StoppedWithFailure=6]="StoppedWithFailure"})(c=l.MeetingSessionLifecycleEventCondition||(l.MeetingSessionLifecycleEventCondition={})),l.default=c},3777990285:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const m=c(5391134031),v=u(c(4882394368));let g=n(class Ea{statusCode(){return this._statusCode}isFailure(){switch(this._statusCode){case v.default.AudioAuthenticationRejected:case v.default.AudioCallAtCapacity:case v.default.AudioInternalServerError:case v.default.AudioServiceUnavailable:case v.default.AudioDisconnected:case v.default.VideoCallAtSourceCapacity:case v.default.SignalingBadRequest:case v.default.SignalingInternalServerError:case v.default.SignalingRequestFailed:case v.default.ICEGatheringTimeoutWorkaround:case v.default.ConnectionHealthReconnect:case v.default.RealtimeApiFailed:case v.default.TaskFailed:case v.default.NoAttendeePresent:return!0;default:return!1}}isTerminal(){switch(this._statusCode){case v.default.Left:case v.default.AudioJoinedFromAnotherDevice:case v.default.AudioAuthenticationRejected:case v.default.AudioCallAtCapacity:case v.default.MeetingEnded:case v.default.AudioDisconnected:case v.default.TURNCredentialsForbidden:case v.default.SignalingBadRequest:case v.default.SignalingRequestFailed:case v.default.VideoCallAtSourceCapacity:case v.default.RealtimeApiFailed:case v.default.AudioAttendeeRemoved:return!0;default:return!1}}isAudioConnectionFailure(){switch(this._statusCode){case v.default.AudioAuthenticationRejected:case v.default.AudioInternalServerError:case v.default.AudioServiceUnavailable:case v.default.ICEGatheringTimeoutWorkaround:case v.default.SignalingBadRequest:case v.default.SignalingInternalServerError:case v.default.SignalingRequestFailed:case v.default.RealtimeApiFailed:case v.default.NoAttendeePresent:return!0;default:return!1}}toString(){switch(this._statusCode){case v.default.OK:return"Everything is OK so far.";case v.default.Left:return"The attendee left the meeting.";case v.default.AudioJoinedFromAnotherDevice:return"The attendee joined from another device.";case v.default.AudioAuthenticationRejected:return"The meeting rejected the attendee.";case v.default.AudioCallAtCapacity:return"The attendee couldn't join because the meeting was at capacity.";case v.default.MeetingEnded:return"The meeting ended.";case v.default.AudioInternalServerError:case v.default.AudioServiceUnavailable:case v.default.AudioDisconnected:return"The audio connection failed.";case v.default.VideoCallSwitchToViewOnly:return"The attendee couldn't start the local video because the maximum video capacity was reached.";case v.default.VideoCallAtSourceCapacity:return"The connection failed due to an internal server error.";case v.default.SignalingBadRequest:case v.default.SignalingInternalServerError:case v.default.SignalingRequestFailed:return"The signaling connection failed.";case v.default.ICEGatheringTimeoutWorkaround:return"Gathering ICE candidates timed out. In Chrome, this might indicate that the browser is in a bad state after reconnecting to VPN.";case v.default.ConnectionHealthReconnect:return"The meeting was reconnected.";case v.default.RealtimeApiFailed:return"The real-time API failed. This status code might indicate that the callback you passed to the real-time API threw an exception.";case v.default.TaskFailed:return"The connection failed. See the error message for more details.";case v.default.IncompatibleSDP:return"The connection failed due to incompatible SDP.";case v.default.TURNCredentialsForbidden:return"The meeting ended, or the attendee was removed.";case v.default.NoAttendeePresent:return"The attendee was not present.";case v.default.AudioAttendeeRemoved:return"The meeting ended because attendee removed.";case v.default.AudioVideoWasRemovedFromPrimaryMeeting:return"The Primary meeting credentials provided are no longer valid. chime::DeleteAttendee may have been called on them.";case v.default.AudioVideoDisconnectedWhilePromoted:return"The client disconnected while promoted, which will automatically demote. The attendee must promote again to participate.";case v.default.AudioDisconnectAudio:return"The audio connection failed.";default:{const a=this._statusCode;throw new Error(`Unhandled case: ${a}`)}}}static fromSignalFrame(a){return a.error&&a.error.status?this.fromSignalingStatus(a.error.status):a.type===m.SdkSignalFrame.Type.AUDIO_STATUS?a.audioStatus?this.fromAudioStatus(a.audioStatus.audioStatus):new Ea(v.default.SignalingRequestFailed):a.type===m.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE?new Ea(v.default.AudioVideoWasRemovedFromPrimaryMeeting):new Ea(v.default.OK)}static fromAudioStatus(a){switch(a){case 200:return new Ea(v.default.OK);case 301:return new Ea(v.default.AudioJoinedFromAnotherDevice);case 302:return new Ea(v.default.AudioDisconnectAudio);case 403:return new Ea(v.default.AudioAuthenticationRejected);case 409:return new Ea(v.default.AudioCallAtCapacity);case 410:return new Ea(v.default.MeetingEnded);case 411:return new Ea(v.default.AudioAttendeeRemoved);case 500:return new Ea(v.default.AudioInternalServerError);case 503:return new Ea(v.default.AudioServiceUnavailable);default:switch(Math.floor(a/100)){case 2:return new Ea(v.default.OK);default:return new Ea(v.default.AudioDisconnected)}}}static fromSignalingStatus(a){switch(a){case 206:return new Ea(v.default.VideoCallSwitchToViewOnly);case 509:return new Ea(v.default.VideoCallAtSourceCapacity);case 403:return new Ea(v.default.AudioAuthenticationRejected);case 409:return new Ea(v.default.AudioCallAtCapacity);default:switch(Math.floor(a/100)){case 2:return new Ea(v.default.OK);case 4:return new Ea(v.default.SignalingBadRequest);case 5:return new Ea(v.default.SignalingInternalServerError);default:return new Ea(v.default.SignalingRequestFailed)}}}constructor(a){this._statusCode=a}},"MeetingSessionStatus");l.default=g},4882394368:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionStatusCode=void 0;var c;(function(u){u[u.OK=0]="OK",u[u.Left=1]="Left",u[u.AudioJoinedFromAnotherDevice=2]="AudioJoinedFromAnotherDevice",u[u.AudioAuthenticationRejected=3]="AudioAuthenticationRejected",u[u.AudioCallAtCapacity=4]="AudioCallAtCapacity",u[u.MeetingEnded=5]="MeetingEnded",u[u.AudioInternalServerError=6]="AudioInternalServerError",u[u.AudioServiceUnavailable=7]="AudioServiceUnavailable",u[u.AudioDisconnected=8]="AudioDisconnected",u[u.VideoCallSwitchToViewOnly=9]="VideoCallSwitchToViewOnly",u[u.VideoCallAtSourceCapacity=10]="VideoCallAtSourceCapacity",u[u.SignalingBadRequest=11]="SignalingBadRequest",u[u.SignalingInternalServerError=12]="SignalingInternalServerError",u[u.SignalingRequestFailed=13]="SignalingRequestFailed",u[u.ICEGatheringTimeoutWorkaround=14]="ICEGatheringTimeoutWorkaround",u[u.ConnectionHealthReconnect=15]="ConnectionHealthReconnect",u[u.RealtimeApiFailed=16]="RealtimeApiFailed",u[u.TaskFailed=17]="TaskFailed",u[u.IncompatibleSDP=18]="IncompatibleSDP",u[u.TURNCredentialsForbidden=19]="TURNCredentialsForbidden",u[u.NoAttendeePresent=20]="NoAttendeePresent",u[u.AudioAttendeeRemoved=21]="AudioAttendeeRemoved",u[u.AudioVideoWasRemovedFromPrimaryMeeting=22]="AudioVideoWasRemovedFromPrimaryMeeting",u[u.AudioVideoDisconnectedWhilePromoted=23]="AudioVideoDisconnectedWhilePromoted",u[u.AudioDisconnectAudio=24]="AudioDisconnectAudio"})(c=l.MeetingSessionStatusCode||(l.MeetingSessionStatusCode={})),l.default=c},7999114886:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(){this.username=null,this.password=null,this.ttl=null,this.uris=null}},"MeetingSessionTURNCredentials");l.default=c},2653083101:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{get audioHostURL(){return this.urlRewriter(this._audioHostURL)}set audioHostURL(m){this._audioHostURL=m}get signalingURL(){return this.urlRewriter(this._signalingURL)}set signalingURL(m){this._signalingURL=m}get turnControlURL(){return this.urlRewriter(this._turnControlURL)}set turnControlURL(m){this._turnControlURL=m}get eventIngestionURL(){return this.urlRewriter(this._eventIngestionURL)}set eventIngestionURL(m){this._eventIngestionURL=m}constructor(){this._audioHostURL=null,this._signalingURL=null,this._turnControlURL=null,this._eventIngestionURL=null,this.urlRewriter=m=>m}},"MeetingSessionURLs");l.default=c},1880578541:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class Uv{equal(m){return this.remoteVideoAvailable===m.remoteVideoAvailable&&this.canStartLocalVideo===m.canStartLocalVideo}clone(){const m=new Uv;return m.remoteVideoAvailable=this.remoteVideoAvailable,m.canStartLocalVideo=this.canStartLocalVideo,m}constructor(){this.remoteVideoAvailable=!1,this.canStartLocalVideo=!1}},"MeetingSessionVideoAvailability");l.default=c},1721682483:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(m,v,g){this.type=m,this.headers=v,this.payload=g}},"Message");l.default=c},9249618790:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(p,d,y,S){function b(_){return _ instanceof y?_:new y(function(C){C(_)})}return n(b,"adopt"),new(y||(y=Promise))(function(_,C){function w(D){try{O(S.next(D))}catch(I){C(I)}}n(w,"fulfilled");function R(D){try{O(S.throw(D))}catch(I){C(I)}}n(R,"rejected");function O(D){D.done?_(D.value):b(D.value).then(w,R)}n(O,"step"),O((S=S.apply(p,d||[])).next())})},m=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const v=c(7135774191),g=m(c(5384631890)),s=m(c(1252089397)),a=m(c(1721682483)),i=m(c(8855787924)),e=m(c(3741513515)),t=m(c(7822521824)),r=m(c(8796204466)),o=m(c(2686893898)),f=m(c(6747155167));let h=n(class{addObserver(d){this.logger.info("adding messaging observer"),this.observerQueue.add(d)}removeObserver(d){this.logger.info("removing messaging observer"),this.observerQueue.delete(d)}start(){return u(this,void 0,void 0,function*(){this.isClosed()?yield this.startConnecting(!1):this.logger.info("messaging session already started")})}stop(){this.isClosed()?this.logger.info("no existing messaging session needs closing"):(this.isClosing=!0,this.webSocket.close(),s.default.removeLogger(this.logger))}forEachObserver(d){for(const y of this.observerQueue)e.default.nextTick(()=>{this.observerQueue.has(y)&&d(y)})}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.openEventHandler()}),this.webSocket.addEventListener("message",d=>{this.receiveMessageHandler(d.data)}),this.webSocket.addEventListener("close",d=>{this.closeEventHandler(d)}),this.webSocket.addEventListener("error",()=>{this.logger.error("WebSocket error")})}startConnecting(d){return u(this,void 0,void 0,function*(){return yield this.startConnectingInternal(d),yield new Promise((y,S)=>{this.bootstrapResolved=y,this.bootstrapRejected=S})})}startConnectingInternal(d){var y;return u(this,void 0,void 0,function*(){let S=this.configuration.endpointUrl;if(d||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),d||S===void 0)try{if(this.configuration.chimeClient.getMessagingSessionEndpoint instanceof Function){const _=yield this.configuration.chimeClient.getMessagingSessionEndpoint();!((y=_.Endpoint)===null||y===void 0)&&y.Url?S=_.Endpoint.Url:S=(yield this.configuration.chimeClient.getMessagingSessionEndpoint().promise()).Endpoint.Url}else S=(yield this.configuration.chimeClient.send(new v.GetMessagingSessionEndpointCommand({}))).Endpoint.Url;this.logger.debug(`Messaging endpoint resolved to: ${S}`)}catch(_){this.logger.error(`Messaging Session failed to resolve endpoint: ${_}`);const C=new CloseEvent("close",{wasClean:!1,code:4999,reason:"Failed to get messaging session endpoint URL",bubbles:!1});this.closeEventHandler(C);return}const b=yield this.prepareWebSocketUrl(S);this.logger.info(`opening connection to ${b}`),d||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),this.webSocket.create(b,[],!0),this.forEachObserver(_=>{_.messagingSessionDidStartConnecting&&_.messagingSessionDidStartConnecting(d)}),this.setUpEventListeners()})}prepareWebSocketUrl(d){return u(this,void 0,void 0,function*(){const y=new Map;return y.set("userArn",[this.configuration.userArn]),y.set("sessionId",[this.configuration.messagingSessionId]),this.configuration.prefetchOn===f.default.Connect&&y.set("prefetch-on",[f.default.Connect]),this.configuration.prefetchSortBy&&y.set("prefetch-sort-by",[this.configuration.prefetchSortBy]),yield this.sigV4.signURL("GET","wss","chime",d,"/connect","",y)})}isClosed(){return this.webSocket.readyState()===o.default.None||this.webSocket.readyState()===o.default.Closed}openEventHandler(){this.reconnectController.reset(),this.isSessionEstablished=!1}receiveMessageHandler(d){try{const y=JSON.parse(d),S=y.Headers["x-amz-chime-event-type"],b=new a.default(S,y.Headers,y.Payload||null);if(!this.isSessionEstablished&&S==="SESSION_ESTABLISHED"){this.forEachObserver(C=>{C.messagingSessionDidStart&&C.messagingSessionDidStart()}),this.bootstrapResolved(),this.isSessionEstablished=!0;const _=this.preBootstrapMessages.length;for(let C=0;C<_;C++){const w=this.preBootstrapMessages.shift();this.forEachObserver(R=>{this.sendMessageToObserver(R,w)})}}else if(!this.isSessionEstablished){this.preBootstrapMessages.push(b);return}this.forEachObserver(_=>{this.sendMessageToObserver(_,b)})}catch(y){this.logger.error(`Messaging parsing failed: ${y}`)}}sendMessageToObserver(d,y){d.messagingSessionDidReceiveMessage&&d.messagingSessionDidReceiveMessage(y)}retryConnection(){return this.reconnectController.retryWithBackoff(()=>u(this,void 0,void 0,function*(){yield this.startConnecting(!0)}),null)}closeEventHandler(d){this.logger.info(`WebSocket close: ${d.code} ${d.reason}`),d.code!==4999&&this.webSocket.destroy(),!(!this.isClosing&&this.canReconnect(d.code)&&this.retryConnection())&&(this.isClosing=!1,this.isSessionEstablished?this.forEachObserver(y=>{y.messagingSessionDidStop&&y.messagingSessionDidStop(d)}):this.bootstrapRejected(d))}canReconnect(d){return d===1001||d===1006||d>=1011&&d<=1014||d>4e3&&d!==4002&&d!==4003&&d!==4401}constructor(d,y,S,b,_){this.configuration=d,this.logger=y,this.webSocket=S,this.reconnectController=b,this.sigV4=_,this.observerQueue=new Set,this.webSocket||(this.webSocket=new r.default(this.logger)),this.reconnectController||(this.reconnectController=new i.default(d.reconnectTimeoutMs,new g.default(d.reconnectFixedWaitMs,d.reconnectShortBackoffMs,d.reconnectLongBackoffMs))),this.sigV4||(this.sigV4=new t.default(this.configuration.chimeClient)),s.default.addLogger(this.logger),s.default.register(),this.preBootstrapMessages=[]}},"DefaultMessagingSession");l.default=h},9309957401:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=c(840544383);let m=n(class{generateSessionId(){const g=new Uint32Array(1);return u.getRandomValues(g),g[0].toString()}constructor(g,s,a,i){this.userArn=g,this.messagingSessionId=s,this.endpointUrl=a,this.chimeClient=i,this.reconnectTimeoutMs=10*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackoffMs=1*1e3,this.reconnectLongBackoffMs=5*1e3,this.prefetchOn=void 0,this.prefetchSortBy=void 0,this.messagingSessionId||(this.messagingSessionId=this.generateSessionId())}},"MessagingSessionConfiguration");l.default=m},6747155167:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var c;(function(u){u.Connect="connect"})(c||(c={})),l.default=c},9468168383:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var c;(function(u){u.Unread="unread",u.LastMessageTimestamp="last-message-timestamp"})(c||(c={})),l.default=c},4599834734:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(3560634922));let v=n(class tu{id(){return this._id}base(){return this._id?this._id.split(tu.MODALITY_SEPARATOR)[0]:""}modality(){if(!this._id)return"";const s=this._id.split(tu.MODALITY_SEPARATOR);return s.length===2?s[1]:""}hasModality(s){return s!==""&&this.modality()===s}withModality(s){const a=new tu(this.base()+tu.MODALITY_SEPARATOR+s);return s===""||this.base()===""||new tu(a._id).modality()!==s?new tu(this.base()):a}constructor(s){this._id=s}},"DefaultModality");l.default=v,v.MODALITY_SEPARATOR=m.default.Modality[0],v.MODALITY_CONTENT=m.default.Modality.substr(1)},2311029370:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(3741513515)),v=u(c(9013967876)),g=u(c(426218501)),s=c(5391134031),a=c(903520651);let i=n(class{addObserver(t){this.logger.info("adding a ping-pong observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing a ping-pong observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const r of this.observerQueue)m.default.nextTick(()=>{this.observerQueue.has(r)&&t(r)})}start(){this.stop(),this.signalingClient.registerObserver(this),this.signalingClient.ready()&&this.startPingInterval()}stop(){this.stopPingInterval(),this.signalingClient.removeObserver(this)}startPingInterval(){this.intervalScheduler.start(()=>{this.ping()}),this.ping()}stopPingInterval(){this.intervalScheduler.stop(),this.pingId=0,this.consecutivePongsUnaccountedFor=0}ping(){this.consecutivePongsUnaccountedFor>0&&(this.logger.warn(`missed pong ${this.consecutivePongsUnaccountedFor} time(s)`),this.forEachObserver(r=>{a.Maybe.of(r.didMissPongs).map(o=>o.bind(r)(this.consecutivePongsUnaccountedFor))})),this.consecutivePongsUnaccountedFor+=1,this.pingId=this.pingId+1&4294967295;const t=s.SdkPingPongFrame.create();t.pingId=this.pingId,t.type=s.SdkPingPongType.PING,this.pingTimestampLocalMs=this.signalingClient.pingPong(t),this.logger.debug(()=>`sent ping ${this.pingId}`)}pong(t){const r=s.SdkPingPongFrame.create();r.pingId=t,r.type=s.SdkPingPongType.PONG,this.signalingClient.pingPong(r)}handleSignalingClientEvent(t){switch(t.type){case g.default.WebSocketOpen:this.startPingInterval();break;case g.default.WebSocketFailed:case g.default.WebSocketError:this.logger.warn(`stopped pinging (${g.default[t.type]})`),this.stopPingInterval();break;case g.default.WebSocketClosing:case g.default.WebSocketClosed:this.logger.info(`stopped pinging (${g.default[t.type]})`),this.stopPingInterval();break;case g.default.ReceivedSignalFrame:if(t.message.type!==s.SdkSignalFrame.Type.PING_PONG)break;if(t.message.pingPong.type===s.SdkPingPongType.PONG){const r=t.message.pingPong.pingId;if(r!==this.pingId){this.logger.warn(`unexpected ping id ${r} (expected ${this.pingId})`);break}this.consecutivePongsUnaccountedFor=0;let o;if(typeof t.message.timestampMs=="number")o=t.message.timestampMs;else break;this.logger.debug(()=>`received pong ${r} with timestamp ${o}`);const h=t.timestampMs-this.pingTimestampLocalMs,p=Math.round(o-h/2),d=this.pingTimestampLocalMs-p;this.logger.info(`local clock skew estimate=${d}ms from ping-pong time=${h}ms`),this.forEachObserver(y=>{a.Maybe.of(y.didReceivePong).map(S=>S.bind(y)(r,d,h))})}else this.pong(t.message.pingPong.pingId);break}}constructor(t,r,o){this.signalingClient=t,this.intervalMs=r,this.logger=o,this.observerQueue=new Set,this.consecutivePongsUnaccountedFor=0,this.intervalScheduler=new v.default(this.intervalMs),this.pingId=0}},"DefaultPingPong");l.default=i},5403024322:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(246495600)),v=u(c(6045987188)),g=u(c(2450851234));let s=n(class{realtimeSetLocalAttendeeId(i,e){this.state.localAttendeeId=i,this.state.localExternalUserId=e}realtimeSetAttendeeIdPresence(i,e,t,r,o){try{e&&(this.state.attendeeIdToExternalUserId[i]=t);for(const f of this.state.attendeeIdChangesCallbacks)f(i,e,t,r,o)}catch(f){this.onError(f)}}realtimeSubscribeToAttendeeIdPresence(i){try{this.state.attendeeIdChangesCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToAttendeeIdPresence(i){try{const e=this.state.attendeeIdChangesCallbacks.indexOf(i);e!==-1&&this.state.attendeeIdChangesCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSetCanUnmuteLocalAudio(i){try{if(this.state.canUnmute===i)return;this.state.canUnmute=i;for(const e of this.state.setCanUnmuteLocalAudioCallbacks)e(i)}catch(e){this.onError(e)}}realtimeSubscribeToSetCanUnmuteLocalAudio(i){try{this.state.setCanUnmuteLocalAudioCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToSetCanUnmuteLocalAudio(i){try{const e=this.state.setCanUnmuteLocalAudioCallbacks.indexOf(i);e!==-1&&this.state.setCanUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeCanUnmuteLocalAudio(){return this.state.canUnmute}realtimeMuteLocalAudio(){if(!this.state.muted)try{this.setAudioInputEnabled(!1),this.state.muted=!0,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const i of this.state.muteAndUnmuteLocalAudioCallbacks)i(!0)}catch(i){this.onError(i)}}realtimeUnmuteLocalAudio(){if(!this.state.muted)return!0;if(!this.state.canUnmute)return!1;try{this.setAudioInputEnabled(!0),this.state.muted=!1,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const i of this.state.muteAndUnmuteLocalAudioCallbacks)i(!1);return!0}catch(i){return this.onError(i),!1}}realtimeSubscribeToMuteAndUnmuteLocalAudio(i){try{this.state.muteAndUnmuteLocalAudioCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(i){try{const e=this.state.muteAndUnmuteLocalAudioCallbacks.indexOf(i);e!==-1&&this.state.muteAndUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeIsLocalAudioMuted(){return this.state.muted}realtimeSubscribeToVolumeIndicator(i,e){try{this.state.volumeIndicatorCallbacks.hasOwnProperty(i)||(this.state.volumeIndicatorCallbacks[i]=[]),this.state.volumeIndicatorCallbacks[i].push(e),this.sendVolumeIndicatorChange(i,!0,!0,!0,this.state.attendeeIdToExternalUserId[i])}catch(t){this.onError(t)}}realtimeUnsubscribeFromVolumeIndicator(i,e){if(this.state.volumeIndicatorCallbacks[i])if(e){const r=this.state.volumeIndicatorCallbacks[i].indexOf(e);r>=0&&this.state.volumeIndicatorCallbacks[i].splice(r,1)}else delete this.state.volumeIndicatorCallbacks[i]}realtimeUpdateVolumeIndicator(i,e,t,r,o){try{t=this.applyLocalMuteOverride(i,t);const f=this.getVolumeIndicatorState(i);let h=!1,p=!1,d=!1;t!==null&&f.muted!==t&&(f.muted=t,p=!0,f.muted&&f.volume!==0&&(f.volume=0,h=!0)),!f.muted&&e!==null&&(f.volume!==e&&(f.volume=e,h=!0),f.muted===null&&(f.muted=!1,p=!0)),r!==null&&f.signalStrength!==r&&(f.signalStrength=r,d=!0),this.sendVolumeIndicatorChange(i,h,p,d,o)}catch(f){this.onError(f)}}realtimeSubscribeToLocalSignalStrengthChange(i){try{if(this.state.localSignalStrengthChangeCallbacks.push(i),this.state.localAttendeeId===null)return;this.sendLocalSignalStrengthChange(this.state.localAttendeeId,!0)}catch(e){this.onError(e)}}realtimeUnsubscribeToLocalSignalStrengthChange(i){try{const e=this.state.localSignalStrengthChangeCallbacks.indexOf(i);e!==-1&&this.state.localSignalStrengthChangeCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSubscribeToSendDataMessage(i){try{this.state.sendDataMessageCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeFromSendDataMessage(i){try{const e=this.state.sendDataMessageCallbacks.indexOf(i);e!==-1&&this.state.sendDataMessageCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSendDataMessage(i,e,t){try{for(const r of this.state.sendDataMessageCallbacks)r(i,e,t)}catch(r){this.onError(r)}}realtimeSubscribeToReceiveDataMessage(i,e){try{this.state.receiveDataMessageCallbacks.has(i)?this.state.receiveDataMessageCallbacks.get(i).push(e):this.state.receiveDataMessageCallbacks.set(i,[e])}catch(t){this.onError(t)}}realtimeUnsubscribeFromReceiveDataMessage(i){try{this.state.receiveDataMessageCallbacks.delete(i)}catch(e){this.onError(e)}}realtimeReceiveDataMessage(i){try{if(this.state.receiveDataMessageCallbacks.has(i.topic))for(const e of this.state.receiveDataMessageCallbacks.get(i.topic))e(i)}catch(e){this.onError(e)}}realtimeSubscribeToFatalError(i){try{this.state.fatalErrorCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToFatalError(i){try{const e=this.state.fatalErrorCallbacks.indexOf(i);e!==-1&&this.state.fatalErrorCallbacks.splice(e,1)}catch(e){this.onError(e)}}get transcriptionController(){return this._transcriptionController}setAudioInputEnabled(i){i?this.mediaStreamBroker.unmuteLocalAudioInputStream():this.mediaStreamBroker.muteLocalAudioInputStream()}applyLocalMuteOverride(i,e){const t=this.state.localAttendeeId,r=this.state.muted;return i!==t||!("activeDevices"in this.mediaStreamBroker&&this.mediaStreamBroker.activeDevices.audio)?e:r}sendVolumeIndicatorChange(i,e,t,r,o){if(this.sendLocalSignalStrengthChange(i,r),!this.state.volumeIndicatorCallbacks.hasOwnProperty(i))return;const f=this.getVolumeIndicatorState(i),h=new g.default;if(e&&(h.volume=f.volume),t&&(h.muted=f.muted),r&&(h.signalStrength=f.signalStrength),!this.stateIsEmpty(h))for(const p of this.state.volumeIndicatorCallbacks[i])p(i,h.volume,h.muted,h.signalStrength,o)}sendLocalSignalStrengthChange(i,e){if(!e||i!==this.state.localAttendeeId)return;const r=this.getVolumeIndicatorState(i).signalStrength;if(r!==null)for(const o of this.state.localSignalStrengthChangeCallbacks)o(r)}getVolumeIndicatorState(i){return this.state.volumeIndicatorState.hasOwnProperty(i)||(this.state.volumeIndicatorState[i]=new g.default),this.state.volumeIndicatorState[i]}stateIsEmpty(i){return i.volume===null&&i.muted===null&&i.signalStrength===null}onError(i){try{for(const e of this.state.fatalErrorCallbacks)e(i)}catch(e){try{console.error(i),console.error(e)}catch{}}}constructor(i,e){this.mediaStreamBroker=i,this.state=new v.default,this._transcriptionController=e||new m.default(this)}},"DefaultRealtimeController");l.default=s},4412582314:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(){this.attendeeIndex=null,this.attendeesInFrame=null}},"RealtimeAttendeePositionInFrame");l.default=c},6045987188:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(){this.localAttendeeId=null,this.localExternalUserId=null,this.attendeeIdChangesCallbacks=[],this.canUnmute=!0,this.setCanUnmuteLocalAudioCallbacks=[],this.muted=!1,this.muteAndUnmuteLocalAudioCallbacks=[],this.volumeIndicatorState={},this.attendeeIdToExternalUserId={},this.volumeIndicatorCallbacks={},this.localSignalStrengthChangeCallbacks=[],this.fatalErrorCallbacks=[],this.sendDataMessageCallbacks=[],this.receiveDataMessageCallbacks=new Map}},"RealtimeState");l.default=c},2450851234:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(){this.volume=null,this.muted=null,this.signalStrength=null}},"RealtimeVolumeIndicator");l.default=c},8855787924:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(6393942734));let v=n(class Vv{timeSpentReconnectingMs(){return this.firstConnectionAttempted?Date.now()-this.firstConnectionAttemptTimestampMs:0}hasPastReconnectDeadline(){return Date.now()-this.lastActiveTimestampMs>=this.reconnectTimeoutMs?!0:this.timeSpentReconnectingMs()>=this.reconnectTimeoutMs}reset(){this.cancel(),this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this.backoffPolicy.reset()}startedConnectionAttempt(s){this._isFirstConnection=s,this.firstConnectionAttempted||(this.firstConnectionAttempted=!0,this.firstConnectionAttemptTimestampMs=Date.now())}hasStartedConnectionAttempt(){return this.firstConnectionAttempted}isFirstConnection(){return this._isFirstConnection}disableReconnect(){this.shouldReconnect=!1}enableRestartPeerConnection(){this.onlyRestartPeerConnection=!0}cancel(){this.disableReconnect(),this.backoffTimer&&(this.backoffTimer.stop(),this.backoffCancel&&(this.backoffCancel(),this.backoffCancel=null))}retryWithBackoff(s,a){const i=this.shouldReconnect&&!this.hasPastReconnectDeadline();return i&&(this.backoffCancel=a,this.backoffTimer=new m.default(this.backoffPolicy.nextBackoffAmountMs()),this.backoffTimer.start(()=>{this.backoffCancel=null,s()})),i}shouldOnlyRestartPeerConnection(){return this.onlyRestartPeerConnection}clone(){return new Vv(this.reconnectTimeoutMs,this.backoffPolicy)}setLastActiveTimestampMs(s){this.lastActiveTimestampMs=s}constructor(s,a){this.reconnectTimeoutMs=s,this.backoffPolicy=a,this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this._isFirstConnection=!0,this.backoffTimer=null,this.backoffCancel=null,this.reset()}},"DefaultReconnectController");l.default=v},1510239283:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class js{static initializeWorker(){js.log("Initializing RedundantAudioEncoder");const m=new js;self.RTCRtpScriptTransformer&&(self.onrtctransform=v=>{v.transformer.options.type==="SenderTransform"?m.setupSenderTransform(v.transformer.readable,v.transformer.writable):v.transformer.options.type==="ReceiverTransform"?m.setupReceiverTransform(v.transformer.readable,v.transformer.writable):v.transformer.options.type==="PassthroughTransform"&&m.setupPassthroughTransform(v.transformer.readable,v.transformer.writable)}),self.onmessage=v=>{v.data.msgType==="StartRedWorker"?(m.setupSenderTransform(v.data.send.readable,v.data.send.writable),m.setupReceiverTransform(v.data.receive.readable,v.data.receive.writable)):v.data.msgType==="PassthroughTransform"?(m.setupPassthroughTransform(v.data.send.readable,v.data.send.writable),m.setupPassthroughTransform(v.data.receive.readable,v.data.receive.writable)):v.data.msgType==="RedPayloadType"?m.setRedPayloadType(v.data.payloadType):v.data.msgType==="OpusPayloadType"?m.setOpusPayloadType(v.data.payloadType):v.data.msgType==="UpdateNumRedundantEncodings"?m.setNumRedundantEncodings(v.data.numRedundantEncodings):v.data.msgType==="Enable"?m.setRedundancyEnabled(!0):v.data.msgType==="Disable"&&m.setRedundancyEnabled(!1)}}static log(m){js.shouldLog&&self.postMessage({type:"REDWorkerLog",log:`[AudioRed] ${m}`})}static getNumRedundantEncodingsForPacketLoss(m){let v=0,g=!1;return m<=8?v=0:m<=18?v=1:m<=75?v=2:(v=0,g=!0),[v,g]}setupPassthroughTransform(m,v){js.log("Setting up passthrough transform"),m.pipeTo(v)}setupSenderTransform(m,v){js.log("Setting up sender RED transform");const g=new TransformStream({transform:this.senderTransform.bind(this)});m.pipeThrough(g).pipeTo(v)}setupReceiverTransform(m,v){js.log("Setting up receiver RED transform");const g=new TransformStream({transform:this.receivePacketLogTransform.bind(this)});m.pipeThrough(g).pipeTo(v)}setRedPayloadType(m){this.redPayloadType=m,js.log(`red payload type set to ${this.redPayloadType}`)}setOpusPayloadType(m){this.opusPayloadType=m,js.log(`opus payload type set to ${this.opusPayloadType}`)}setNumRedundantEncodings(m){this.numRedundantEncodings=m,this.numRedundantEncodings>this.maxRedEncodings&&(this.numRedundantEncodings=this.maxRedEncodings),js.log(`Updated numRedundantEncodings to ${this.numRedundantEncodings}`)}setRedundancyEnabled(m){this.redundancyEnabled=m,js.log(`redundancy ${this.redundancyEnabled?"enabled":"disabled"}`)}enqueueAudioFrameIfPayloadSizeIsValid(m,v){m.data.byteLength>this.maxAudioPayloadSizeBytes||v.enqueue(m)}senderTransform(m,v){if(m.getMetadata().payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(m,v);return}const s=this.getPrimaryPayload(m.timestamp,m.data);if(!s){this.enqueueAudioFrameIfPayloadSizeIsValid(m,v);return}const a=this.encode(m.timestamp,s);if(!a){this.enqueueAudioFrameIfPayloadSizeIsValid(m,v);return}m.data=a,this.enqueueAudioFrameIfPayloadSizeIsValid(m,v)}getPrimaryPayload(m,v){const g=this.splitEncodings(m,v);return!g||g.length<1?null:g[g.length-1].payload}splitEncodings(m,v){let g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;const a=new DataView(v);let i=a.byteLength,e=0,t=0,r=0,o=0,f=!1;const h=new Array,p=new Array,d=new Array;for(;i>0;)if(f=(a.getUint8(o)&128)===0,f){if((a.getUint8(o)&127)!==this.opusPayloadType||(e+=this.redLastHeaderSizeBytes,t+=this.redLastHeaderSizeBytes,e>=a.byteLength))return null;r=a.byteLength-e;break}else{if(i<this.redHeaderSizeBytes)return null;const w=((a.getUint8(o+2)&3)<<8)+a.getUint8(o+3);p.push(w);const R=a.getUint16(o+1)>>2,O=m-R;d.push(O),e+=w+this.redHeaderSizeBytes,t+=this.redHeaderSizeBytes,o+=this.redHeaderSizeBytes,i-=this.redHeaderSizeBytes}if(!f)return null;let y=t;for(let w=0;w<d.length;w++){const R=new ArrayBuffer(p[w]);new Uint8Array(R).set(new Uint8Array(a.buffer,y,p[w]),0);const D={timestamp:d[w],payload:R,isRedundant:!0};g&&(D.hasFec=this.opusPacketHasFec(new DataView(R),R.byteLength)),h.push(D),y+=p[w]}const S=a.byteLength-r,b=new ArrayBuffer(r);new Uint8Array(b).set(new Uint8Array(a.buffer,S,r),0);const C={timestamp:m,payload:b,isRedundant:!1,seq:s};return g&&(C.hasFec=this.opusPacketHasFec(new DataView(b),b.byteLength)),h.push(C),h}encode(m,v){const g=v.byteLength;if(g===0||g>=this.maxRedPacketSizeBytes||g>=this.maxAudioPayloadSizeBytes)return null;const s=this.numRedundantEncodings;let a=this.redLastHeaderSizeBytes,i=g,e=this.maxAudioPayloadSizeBytes-g-a;const t=new Array,r=new Array;if(this.redundancyEnabled){let d=this.uint32WrapAround(m-this.redPacketizationTime*this.redPacketDistance);for(let y=0;y<s&&!(this.uint32WrapAround(m-d)>=this.maxRedTimestampOffset);y++){let S=d,b=this.encodingHistory.find(_=>_.timestamp===S);if(b||(S=this.uint32WrapAround(d-this.redPacketizationTime),b=this.encodingHistory.find(_=>_.timestamp===S)),b){const _=b.payload.byteLength;if(e<this.redHeaderSizeBytes+_)break;e-=this.redHeaderSizeBytes+_,a+=this.redHeaderSizeBytes,i+=_,t.unshift(b.timestamp),r.unshift(b.payload)}d-=this.redPacketizationTime*this.redPacketDistance,d=this.uint32WrapAround(d)}}const o=new ArrayBuffer(a+i),f=new DataView(o);let h=0;for(let d=0;d<t.length;d++){const y=m-t[d];f.setUint8(h,this.opusPayloadType|128),f.setUint16(h+1,y<<2|r[d].byteLength>>8),f.setUint8(h+3,r[d].byteLength&255),h+=this.redHeaderSizeBytes}f.setUint8(h,this.opusPayloadType),h+=this.redLastHeaderSizeBytes;const p=new Uint8Array(o);for(let d=0;d<r.length;d++)p.set(new Uint8Array(r[d]),h),h+=r[d].byteLength;return p.set(new Uint8Array(v),h),h+=v.byteLength,h!==a+i?null:(this.updateEncodingHistory(m,v),o)}updateEncodingHistory(m,v){for(const s of this.encodingHistory){const a=this.redPacketizationTime*this.redMaxRecoveryDistance;if(m-s.timestamp>=a)this.encodingHistory.shift();else break}const g=new DataView(v);(this.opusPacketIsCeltOnly(g)||this.opusPacketHasVoiceActivity(g,g.byteLength)>0)&&(this.encodingHistory.length+1>this.maxEncodingHistorySize&&(this.encodingHistory.length=0),this.encodingHistory.push({timestamp:m,payload:v}))}initializePacketLogs(){const m=this.maxOutOfOrderPacketDistance+this.redMaxRecoveryDistance;this.primaryPacketLog={window:new Array(m),index:0,windowSize:m},this.redRecoveryLog={window:new Array(m),index:0,windowSize:m},this.fecRecoveryLog={window:new Array(m),index:0,windowSize:m},this.totalAudioPacketsExpected=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}receivePacketLogTransform(m,v){const g=m.getMetadata();if(g.payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(m,v);return}const s=this.splitEncodings(m.timestamp,m.data,!0,g.sequenceNumber);if(!s){this.enqueueAudioFrameIfPayloadSizeIsValid(m,v);return}for(let a=s.length-1;a>=0;a--)this.updateLossStats(s[a])&&(this.updateRedStats(s[a]),this.updateFecStats(s[a]));this.maybeReportLossStats(s[s.length-1].timestamp,g.synchronizationSource),this.enqueueAudioFrameIfPayloadSizeIsValid(m,v)}updateLossStats(m){if(m.isRedundant)return!0;const v=m.timestamp,g=m.seq;if(this.totalAudioPacketsExpected===0)return this.totalAudioPacketsExpected=1,this.newestSequenceNumber=g,this.addTimestamp(this.primaryPacketLog,v),!0;const s=this.int16(g-this.newestSequenceNumber);return s<-this.maxOutOfOrderPacketDistance?!1:(s<0?this.hasTimestamp(this.primaryPacketLog,v)||(this.totalAudioPacketsLost>0&&this.totalAudioPacketsLost--,this.addTimestamp(this.primaryPacketLog,v),this.removeFromRecoveryWindows(v)):s>1&&(this.totalAudioPacketsLost+=s-1),s>0&&(this.totalAudioPacketsExpected+=s,this.newestSequenceNumber=m.seq,this.addTimestamp(this.primaryPacketLog,v)),!0)}updateRedStats(m){if(!m.isRedundant||this.totalAudioPacketsLost===0)return;const v=m.timestamp;this.hasTimestamp(this.primaryPacketLog,v)||(this.hasTimestamp(this.redRecoveryLog,v)||(this.totalAudioPacketsRecoveredRed++,this.addTimestamp(this.redRecoveryLog,v)),this.removeTimestamp(this.fecRecoveryLog,v)&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--)}updateFecStats(m){if(!m.hasFec||this.totalAudioPacketsLost===0)return;const v=m.timestamp-this.redPacketizationTime;this.hasTimestamp(this.primaryPacketLog,v)||this.hasTimestamp(this.redRecoveryLog,v)||this.hasTimestamp(this.fecRecoveryLog,v)||(this.totalAudioPacketsRecoveredFec++,this.addTimestamp(this.fecRecoveryLog,v))}maybeReportLossStats(m,v){m-this.lastLossReportTimestamp<this.lossReportInterval||(js.shouldReportStats&&self.postMessage({type:"RedundantAudioEncoderStats",ssrc:v,totalAudioPacketsLost:this.totalAudioPacketsLost,totalAudioPacketsExpected:this.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.totalAudioPacketsRecoveredFec}),this.lastLossReportTimestamp=m)}addTimestamp(m,v){m.window[m.index]=v,m.index=(m.index+1)%m.windowSize}hasTimestamp(m,v){return!!m.window.find(s=>s===v)}removeTimestamp(m,v){const g=m.window.indexOf(v);return g>=0?(m.window[g]=void 0,!0):!1}removeFromRecoveryWindows(m){let v=this.removeTimestamp(this.redRecoveryLog,m);v&&this.totalAudioPacketsRecoveredRed>0&&this.totalAudioPacketsRecoveredRed--,v=this.removeTimestamp(this.fecRecoveryLog,m),v&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--}uint32WrapAround(m){let g=m;return m>=4294967296?g=m-4294967296:m<0&&(g=4294967296+m),g}int16(m){return m<<16>>16}opusPacketIsCeltOnly(m){return!!(m.getUint8(0)&128)}opusPacketGetSamplesPerFrame(m,v){v=Math.round(v),v=Math.min(Math.max(v,-Math.pow(2,32)),Math.pow(2,32)-1);let g,s;return this.opusPacketIsCeltOnly(m)?(s=m.getUint8(0)>>3&3,g=(v<<s)/400):(m.getUint8(0)&96)===96?g=m.getUint8(0)&8?v/50:v/100:(s=m.getUint8(0)>>3&3,s===3?g=v*60/1e3:g=(v<<s)/100),g}opusNumSilkFrames(m){let v=this.opusPacketGetSamplesPerFrame(m,48e3)/48;switch(v<10&&(v=10),v){case 10:case 20:return 1;case 40:return 2;case 60:return 3;default:return 0}}opusPacketGetNumChannels(m){return m.getUint8(0)&4?2:1}opusParseSize(m,v,g,s){return g<1?(s[0]=-1,-1):m.getUint8(v)<252?(s[0]=m.getUint8(v),1):g<2?(s[0]=-1,-1):(s[0]=4*m.getUint8(v+1)+m.getUint8(v),2)}opusPacketParseImpl(m,v,g,s,a,i,e,t){if(!i||v<0)return this.OPUS_BAD_ARG;if(v===0)return this.OPUS_INVALID_PACKET;let r,o,f=0,h=!1;const p=m.getUint8(0);s&&(s[0]=p);let d=v-1,y=1,S=d;switch(p&3){case 0:r=1;break;case 1:if(r=2,h=!0,!g){if(d&1)return this.OPUS_INVALID_PACKET;S=d/2,i[0][0]=S}break;case 2:if(r=2,o=this.opusParseSize(m,y,d,i[0]),d-=o,i[0][0]<0||i[0][0]>d)return this.OPUS_INVALID_PACKET;y+=o,S=d-i[0][0];break;default:if(d<1)return this.OPUS_INVALID_PACKET;const b=m.getUint8(y++);if(--d,r=b&63,r<=0)return this.OPUS_INVALID_PACKET;if(this.opusPacketGetSamplesPerFrame(m,48e3)*r>5760)return this.OPUS_INVALID_PACKET;if(b&64){let C,w;do{if(d<=0)return this.OPUS_INVALID_PACKET;C=m.getUint8(y++),--d,w=C===255?254:C,d-=w,f+=w}while(C===255)}if(d<0)return this.OPUS_INVALID_PACKET;if(h=!(b&128),h){if(!g){if(S=Math.trunc(d/r),S*r!==d)return this.OPUS_INVALID_PACKET;for(let C=0;C<r-1;++C)i[C][0]=S}}else{S=d;for(let C=0;C<r-1;++C){if(o=this.opusParseSize(m,y,d,i[C]),d-=o,i[C][0]<0||i[C][0]>d)return this.OPUS_INVALID_PACKET;y+=o,S-=o+i[C][0]}if(S<0)return this.OPUS_INVALID_PACKET}}if(g){if(o=this.opusParseSize(m,y,d,i[r-1]),d-=o,i[r-1][0]<0||i[r-1][0]>d)return this.OPUS_INVALID_PACKET;if(y+=o,h){if(i[r-1][0]*r>d)return this.OPUS_INVALID_PACKET;for(let b=0;b<r-1;++b)i[b][0]=i[r-1][0]}else if(!(o+i[r-1][0]<=S))return this.OPUS_INVALID_PACKET}else{if(S>this.OPUS_MAX_FRAME_SIZE_BYTES)return this.OPUS_INVALID_PACKET;i[r-1][0]=S}e&&(e[0]=y);for(let b=0;b<r;++b)a&&(a[b][0]=y),y+=i[b][0];return t&&(t[0]=y+f),r}opusPacketParse(m,v,g,s,a,i){return this.opusPacketParseImpl(m,v,!1,g,s,a,i,null)}opusPacketHasVoiceActivity(m,v){if(!m||v<=0)return 0;if(this.opusPacketIsCeltOnly(m))return-1;const g=this.opusNumSilkFrames(m);if(g===0)return-1;const s=new Array(this.OPUS_MAX_OPUS_FRAMES),a=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let e=0;e<this.OPUS_MAX_OPUS_FRAMES;++e)s[e]=[void 0],a[e]=[void 0];const i=this.opusPacketParse(m,v,null,s,a,null);if(i<0)return-1;for(let e=0;e<i;++e){if(a[e][0]<1)continue;if(m.getUint8(s[e][0])>>8-g||this.opusPacketGetNumChannels(m)===2&&m.getUint8(s[e][0])<<g+1>>8-g)return 1}return 0}opusPacketHasFec(m,v){if(!m||v<=0||this.opusPacketIsCeltOnly(m))return!1;const g=new Array(this.OPUS_MAX_OPUS_FRAMES),s=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let t=0;t<this.OPUS_MAX_OPUS_FRAMES;++t)g[t]=[void 0],s[t]=[void 0];if(this.opusPacketParse(m,v,null,g,s,null)<0||s[0][0]<=1)return!1;const i=this.opusNumSilkFrames(m);if(i===0)return!1;const e=this.opusPacketGetNumChannels(m);if(e!==1&&e!==2)return!1;for(let t=0;t<e;t++)if(m.getUint8(g[0][0])&128>>(t+1)*(i+1)-1)return!0;return!1}constructor(){this.maxRedPacketSizeBytes=1<<10,this.maxAudioPayloadSizeBytes=1e3,this.maxRedTimestampOffset=1<<14,this.redHeaderSizeBytes=4,this.redLastHeaderSizeBytes=1,this.redPacketizationTime=960,this.redPacketDistance=2,this.maxRedEncodings=2,this.redMaxRecoveryDistance=this.redPacketDistance*this.maxRedEncodings+1,this.maxEncodingHistorySize=10,this.numRedundantEncodings=0,this.redundancyEnabled=!0,this.lossReportInterval=48e3*5,this.maxOutOfOrderPacketDistance=16,this.OPUS_BAD_ARG=-1,this.OPUS_INVALID_PACKET=-4,this.OPUS_MAX_OPUS_FRAMES=48,this.OPUS_MAX_FRAME_SIZE_BYTES=1275,this.encodingHistory=new Array,this.opusPayloadType=0,this.redPayloadType=0,this.initializePacketLogs()}},"RedundantAudioEncoder");l.default=c,c.shouldLog=!1,c.shouldReportStats=!1},3440292739:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const c=`class RedundantAudioEncoder {
    constructor() {
        // Each payload must be less than 1024 bytes to fit the 10 bit block length
        this.maxRedPacketSizeBytes = 1 << 10;
        // Limit payload to 1000 bytes to handle small MTU. 1000 is chosen because in Chromium-based browsers, writing audio
        // payloads larger than 1000 bytes using the WebRTC Insertable Streams API (which is used to enable dynamic audio
        // redundancy) will cause an error to be thrown and cause audio flow to permanently stop. See
        // https://crbug.com/1248479.
        this.maxAudioPayloadSizeBytes = 1000;
        // Each payload can encode a timestamp delta of 14 bits
        this.maxRedTimestampOffset = 1 << 14;
        // 4 byte RED header
        this.redHeaderSizeBytes = 4;
        // reduced size for last RED header
        this.redLastHeaderSizeBytes = 1;
        // P-Time for Opus 20 msec packets
        // We do not support other p-times or clock rates
        this.redPacketizationTime = 960;
        // distance between redundant payloads, Opus FEC handles a distance of 1
        // TODO(https://issues.amazon.com/issues/ChimeSDKAudio-55):
        // Consider making this dynamic
        this.redPacketDistance = 2;
        // maximum number of redundant payloads per RTP packet
        this.maxRedEncodings = 2;
        // Maximum number of encodings that can be recovered with a single RED packet, assuming the primary and redundant
        // payloads have FEC.
        this.redMaxRecoveryDistance = this.redPacketDistance * this.maxRedEncodings + 1;
        // maximum history of prior payloads to keep
        // generally we will expire old entries based on timestamp
        // this limit is in place just to make sure the history does not
        // grow too large in the case of erroneous timestamp inputs
        this.maxEncodingHistorySize = 10;
        // Current number of encodings we want to send
        // to the remote end. This will be dynamically
        // updated through the setNumEncodingsFromPacketloss API
        this.numRedundantEncodings = 0;
        // Used to enable or disable redundancy
        // in response to very high packet loss events
        this.redundancyEnabled = true;
        // Loss stats are reported to the main thread every 5 seconds.
        // Since timestamp differences between 2 consecutive packets
        // give us the number of samples in each channel, 1 second
        // is equivalent to 48000 samples:
        // P-time * (1000ms/1s)
        // = (960 samples/20ms) * (1000ms/1s)
        // = 48000 samples/s
        this.lossReportInterval = 48000 * 5;
        // Maximum distance of a packet from the most recent packet timestamp
        // that we will consider for recovery.
        this.maxOutOfOrderPacketDistance = 16;
        /**
         * Below are Opus helper methods and constants.
         */
        this.OPUS_BAD_ARG = -1;
        this.OPUS_INVALID_PACKET = -4;
        // Max number of Opus frames in an Opus packet is 48 (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5).
        this.OPUS_MAX_OPUS_FRAMES = 48;
        // Max number of bytes that any individual Opus frame can have.
        this.OPUS_MAX_FRAME_SIZE_BYTES = 1275;
        this.encodingHistory = new Array();
        this.opusPayloadType = 0;
        this.redPayloadType = 0;
        this.initializePacketLogs();
    }
    /**
     * Creates an instance of RedundantAudioEncoder and sets up callbacks.
     */
    static initializeWorker() {
        RedundantAudioEncoder.log('Initializing RedundantAudioEncoder');
        const encoder = new RedundantAudioEncoder();
        // RED encoding is done using WebRTC Encoded Transform
        // https://github.com/w3c/webrtc-encoded-transform/blob/main/explainer.md
        // Check the DedicatedWorkerGlobalScope for existence of
        // RTCRtpScriptTransformer interface. If exists, then
        // RTCRtpScriptTransform is supported by this browser.
        // @ts-ignore
        if (self.RTCRtpScriptTransformer) {
            // @ts-ignore
            self.onrtctransform = (event) => {
                if (event.transformer.options.type === 'SenderTransform') {
                    encoder.setupSenderTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'ReceiverTransform') {
                    encoder.setupReceiverTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'PassthroughTransform') {
                    encoder.setupPassthroughTransform(event.transformer.readable, event.transformer.writable);
                }
            };
        }
        self.onmessage = (event) => {
            if (event.data.msgType === 'StartRedWorker') {
                encoder.setupSenderTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupReceiverTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'PassthroughTransform') {
                encoder.setupPassthroughTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupPassthroughTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'RedPayloadType') {
                encoder.setRedPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'OpusPayloadType') {
                encoder.setOpusPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'UpdateNumRedundantEncodings') {
                encoder.setNumRedundantEncodings(event.data.numRedundantEncodings);
            }
            else if (event.data.msgType === 'Enable') {
                encoder.setRedundancyEnabled(true);
            }
            else if (event.data.msgType === 'Disable') {
                encoder.setRedundancyEnabled(false);
            }
        };
    }
    /**
     * Post logs to the main thread
     */
    static log(msg) {
        if (RedundantAudioEncoder.shouldLog) {
            // @ts-ignore
            self.postMessage({
                type: 'REDWorkerLog',
                log: \`[AudioRed] \${msg}\`,
            });
        }
    }
    /**
     * Returns the number of encodings based on packetLoss value. This is used by \`DefaultTransceiverController\` to
     * determine when to alert the encoder to update the number of encodings. It also determines if we need to
     * turn off red in cases of very high packet loss to avoid congestion collapse.
     */
    static getNumRedundantEncodingsForPacketLoss(packetLoss) {
        let recommendedRedundantEncodings = 0;
        let shouldTurnOffRed = false;
        if (packetLoss <= 8) {
            recommendedRedundantEncodings = 0;
        }
        else if (packetLoss <= 18) {
            recommendedRedundantEncodings = 1;
        }
        else if (packetLoss <= 75) {
            recommendedRedundantEncodings = 2;
        }
        else {
            recommendedRedundantEncodings = 0;
            shouldTurnOffRed = true;
        }
        return [recommendedRedundantEncodings, shouldTurnOffRed];
    }
    /**
     * Sets up a passthrough (no-op) transform for the given streams.
     */
    setupPassthroughTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up passthrough transform');
        readable.pipeTo(writable);
    }
    /**
     * Sets up the transform stream and pipes the outgoing encoded audio frames through the transform function.
     */
    setupSenderTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up sender RED transform');
        const transformStream = new TransformStream({
            transform: this.senderTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Sets up the transform stream and pipes the received encoded audio frames through the transform function.
     */
    setupReceiverTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up receiver RED transform');
        const transformStream = new TransformStream({
            transform: this.receivePacketLogTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Set the RED payload type ideally obtained from local offer.
     */
    setRedPayloadType(payloadType) {
        this.redPayloadType = payloadType;
        RedundantAudioEncoder.log(\`red payload type set to \${this.redPayloadType}\`);
    }
    /**
     * Set the opus payload type ideally obtained from local offer.
     */
    setOpusPayloadType(payloadType) {
        this.opusPayloadType = payloadType;
        RedundantAudioEncoder.log(\`opus payload type set to \${this.opusPayloadType}\`);
    }
    /**
     * Set the number of redundant encodings
     */
    setNumRedundantEncodings(numRedundantEncodings) {
        this.numRedundantEncodings = numRedundantEncodings;
        if (this.numRedundantEncodings > this.maxRedEncodings) {
            this.numRedundantEncodings = this.maxRedEncodings;
        }
        RedundantAudioEncoder.log(\`Updated numRedundantEncodings to \${this.numRedundantEncodings}\`);
    }
    /**
     * Enable or disable redundancy in response to
     * high packet loss event.
     */
    setRedundancyEnabled(enabled) {
        this.redundancyEnabled = enabled;
        RedundantAudioEncoder.log(\`redundancy \${this.redundancyEnabled ? 'enabled' : 'disabled'}\`);
    }
    /**
     * Helper function to only enqueue audio frames if they do not exceed the audio payload byte limit imposed by
     * Chromium-based browsers. Chromium will throw an error (https://crbug.com/1248479) if an audio payload larger than
     * 1000 bytes is enqueued. Any controller that attempts to enqueue an audio payload larger than 1000 bytes will
     * encounter this error and will permanently stop sending or receiving audio.
     */
    enqueueAudioFrameIfPayloadSizeIsValid(
    // @ts-ignore
    frame, controller) {
        if (frame.data.byteLength > this.maxAudioPayloadSizeBytes)
            return;
        controller.enqueue(frame);
    }
    /**
     * Receives encoded frames and modifies as needed before sending to transport.
     */
    senderTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const primaryPayloadBuffer = this.getPrimaryPayload(frame.timestamp, frame.data);
        if (!primaryPayloadBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const encodedBuffer = this.encode(frame.timestamp, primaryPayloadBuffer);
        /* istanbul ignore next */
        if (!encodedBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        frame.data = encodedBuffer;
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
        return;
    }
    /**
     * Get the primary payload from encoding
     */
    getPrimaryPayload(primaryTimestamp, frame) {
        const encodings = this.splitEncodings(primaryTimestamp, frame);
        if (!encodings || encodings.length < 1)
            return null;
        return encodings[encodings.length - 1].payload;
    }
    /**
     * Split up the encoding received into primary and redundant encodings
     * These will be ordered oldest to newest which is the same ordering
     * in the RTP red payload.
     */
    splitEncodings(primaryTimestamp, frame, getFecInfo = false, primarySequenceNumber = undefined) {
        // process RED headers (according to RFC 2198)
        //   0                   1                   2                   3
        //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //  |F|   block PT  |  timestamp offset         |   block length    |
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //
        // last header
        //   0 1 2 3 4 5 6 7
        //  +-+-+-+-+-+-+-+-+
        //  |0|   Block PT  |
        //  +-+-+-+-+-+-+-+-+
        const payload = new DataView(frame);
        let payloadSizeBytes = payload.byteLength;
        let totalPayloadSizeBytes = 0;
        let totalHeaderSizeBytes = 0;
        let primaryPayloadSizeBytes = 0;
        let payloadOffset = 0;
        let gotLastBlock = false;
        const encodings = new Array();
        const redundantEncodingBlockLengths = new Array();
        const redundantEncodingTimestamps = new Array();
        while (payloadSizeBytes > 0) {
            gotLastBlock = (payload.getUint8(payloadOffset) & 0x80) === 0;
            if (gotLastBlock) {
                // Bits 1 through 7 are payload type
                const payloadType = payload.getUint8(payloadOffset) & 0x7f;
                // Unexpected payload type. This is a bad packet.
                if (payloadType !== this.opusPayloadType) {
                    return null;
                }
                totalPayloadSizeBytes += this.redLastHeaderSizeBytes;
                totalHeaderSizeBytes += this.redLastHeaderSizeBytes;
                // Accumulated block lengths are equal to or larger than the buffer, which means there is no primary block. This
                // is a bad packet.
                if (totalPayloadSizeBytes >= payload.byteLength) {
                    return null;
                }
                primaryPayloadSizeBytes = payload.byteLength - totalPayloadSizeBytes;
                break;
            }
            else {
                if (payloadSizeBytes < this.redHeaderSizeBytes) {
                    return null;
                }
                // Bits 22 through 31 are payload length
                const blockLength = ((payload.getUint8(payloadOffset + 2) & 0x03) << 8) + payload.getUint8(payloadOffset + 3);
                redundantEncodingBlockLengths.push(blockLength);
                const timestampOffset = payload.getUint16(payloadOffset + 1) >> 2;
                const timestamp = primaryTimestamp - timestampOffset;
                redundantEncodingTimestamps.push(timestamp);
                totalPayloadSizeBytes += blockLength + this.redHeaderSizeBytes;
                totalHeaderSizeBytes += this.redHeaderSizeBytes;
                payloadOffset += this.redHeaderSizeBytes;
                payloadSizeBytes -= this.redHeaderSizeBytes;
            }
        }
        // The last block was never found. This is a bad packet.
        if (!gotLastBlock) {
            return null;
        }
        let redundantPayloadOffset = totalHeaderSizeBytes;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const redundantPayloadBuffer = new ArrayBuffer(redundantEncodingBlockLengths[i]);
            const redundantPayloadArray = new Uint8Array(redundantPayloadBuffer);
            redundantPayloadArray.set(new Uint8Array(payload.buffer, redundantPayloadOffset, redundantEncodingBlockLengths[i]), 0);
            const encoding = {
                timestamp: redundantEncodingTimestamps[i],
                payload: redundantPayloadBuffer,
                isRedundant: true,
            };
            if (getFecInfo) {
                encoding.hasFec = this.opusPacketHasFec(new DataView(redundantPayloadBuffer), redundantPayloadBuffer.byteLength);
            }
            encodings.push(encoding);
            redundantPayloadOffset += redundantEncodingBlockLengths[i];
        }
        const primaryPayloadOffset = payload.byteLength - primaryPayloadSizeBytes;
        const primaryPayloadBuffer = new ArrayBuffer(primaryPayloadSizeBytes);
        const primaryArray = new Uint8Array(primaryPayloadBuffer);
        primaryArray.set(new Uint8Array(payload.buffer, primaryPayloadOffset, primaryPayloadSizeBytes), 0);
        const encoding = {
            timestamp: primaryTimestamp,
            payload: primaryPayloadBuffer,
            isRedundant: false,
            seq: primarySequenceNumber,
        };
        if (getFecInfo) {
            encoding.hasFec = this.opusPacketHasFec(new DataView(primaryPayloadBuffer), primaryPayloadBuffer.byteLength);
        }
        encodings.push(encoding);
        return encodings;
    }
    /**
     * Create a new encoding with current primary payload and the older payloads of choice.
     */
    encode(primaryTimestamp, primaryPayload) {
        const primaryPayloadSize = primaryPayload.byteLength;
        // Payload size needs to be valid.
        if (primaryPayloadSize === 0 ||
            primaryPayloadSize >= this.maxRedPacketSizeBytes ||
            primaryPayloadSize >= this.maxAudioPayloadSizeBytes) {
            return null;
        }
        const numRedundantEncodings = this.numRedundantEncodings;
        let headerSizeBytes = this.redLastHeaderSizeBytes;
        let payloadSizeBytes = primaryPayloadSize;
        let bytesAvailable = this.maxAudioPayloadSizeBytes - primaryPayloadSize - headerSizeBytes;
        const redundantEncodingTimestamps = new Array();
        const redundantEncodingPayloads = new Array();
        // If redundancy is disabled then only send the primary payload
        if (this.redundancyEnabled) {
            // Determine how much redundancy we can fit into our packet
            let redundantTimestamp = this.uint32WrapAround(primaryTimestamp - this.redPacketizationTime * this.redPacketDistance);
            for (let i = 0; i < numRedundantEncodings; i++) {
                // Do not add redundant encodings that are beyond the maximum timestamp offset.
                if (this.uint32WrapAround(primaryTimestamp - redundantTimestamp) >= this.maxRedTimestampOffset) {
                    break;
                }
                let findTimestamp = redundantTimestamp;
                let encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                if (!encoding) {
                    // If not found or not important then look for the previous packet.
                    // The current packet may have included FEC for the previous, so just
                    // use the previous packet instead provided that it has voice activity.
                    findTimestamp = this.uint32WrapAround(redundantTimestamp - this.redPacketizationTime);
                    encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                }
                if (encoding) {
                    const redundantEncodingSizeBytes = encoding.payload.byteLength;
                    // Only add redundancy if there are enough bytes available.
                    if (bytesAvailable < this.redHeaderSizeBytes + redundantEncodingSizeBytes)
                        break;
                    bytesAvailable -= this.redHeaderSizeBytes + redundantEncodingSizeBytes;
                    headerSizeBytes += this.redHeaderSizeBytes;
                    payloadSizeBytes += redundantEncodingSizeBytes;
                    redundantEncodingTimestamps.unshift(encoding.timestamp);
                    redundantEncodingPayloads.unshift(encoding.payload);
                }
                redundantTimestamp -= this.redPacketizationTime * this.redPacketDistance;
                redundantTimestamp = this.uint32WrapAround(redundantTimestamp);
            }
        }
        const redPayloadBuffer = new ArrayBuffer(headerSizeBytes + payloadSizeBytes);
        const redPayloadView = new DataView(redPayloadBuffer);
        // Add redundant encoding header(s) to new buffer
        let redPayloadOffset = 0;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const timestampDelta = primaryTimestamp - redundantEncodingTimestamps[i];
            redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType | 0x80);
            redPayloadView.setUint16(redPayloadOffset + 1, (timestampDelta << 2) | (redundantEncodingPayloads[i].byteLength >> 8));
            redPayloadView.setUint8(redPayloadOffset + 3, redundantEncodingPayloads[i].byteLength & 0xff);
            redPayloadOffset += this.redHeaderSizeBytes;
        }
        // Add primary encoding header to new buffer
        redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType);
        redPayloadOffset += this.redLastHeaderSizeBytes;
        // Add redundant payload(s) to new buffer
        const redPayloadArray = new Uint8Array(redPayloadBuffer);
        for (let i = 0; i < redundantEncodingPayloads.length; i++) {
            redPayloadArray.set(new Uint8Array(redundantEncodingPayloads[i]), redPayloadOffset);
            redPayloadOffset += redundantEncodingPayloads[i].byteLength;
        }
        // Add primary payload to new buffer
        redPayloadArray.set(new Uint8Array(primaryPayload), redPayloadOffset);
        redPayloadOffset += primaryPayload.byteLength;
        /* istanbul ignore next */
        // Sanity check that we got the expected total payload size.
        if (redPayloadOffset !== headerSizeBytes + payloadSizeBytes)
            return null;
        this.updateEncodingHistory(primaryTimestamp, primaryPayload);
        return redPayloadBuffer;
    }
    /**
     * Update the encoding history with the latest primary encoding
     */
    updateEncodingHistory(primaryTimestamp, primaryPayload) {
        // Remove encodings from the history if they are too old.
        for (const encoding of this.encodingHistory) {
            const maxTimestampDelta = this.redPacketizationTime * this.redMaxRecoveryDistance;
            if (primaryTimestamp - encoding.timestamp >= maxTimestampDelta) {
                this.encodingHistory.shift();
            }
            else {
                break;
            }
        }
        // Only add an encoding to the history if the encoding is deemed to be important. An encoding is important if it is
        // a CELT-only packet or contains voice activity.
        const packet = new DataView(primaryPayload);
        if (this.opusPacketIsCeltOnly(packet) ||
            this.opusPacketHasVoiceActivity(packet, packet.byteLength) > 0) {
            // Check if adding an encoding will cause the length of the encoding history to exceed the maximum history size.
            // This is not expected to happen but could occur if we get incorrect timestamps. We want to make sure our memory
            // usage is bounded. In this case, just clear the history and start over from empty.
            if (this.encodingHistory.length + 1 > this.maxEncodingHistorySize)
                this.encodingHistory.length = 0;
            this.encodingHistory.push({ timestamp: primaryTimestamp, payload: primaryPayload });
        }
    }
    /**
     * Initialize packet logs and metric values.
     */
    initializePacketLogs() {
        // The extra space from the max RED recovery distance is to ensure that we do not incorrectly count recovery for
        // packets that have already been received but are outside of the max out-of-order distance.
        const packetLogSize = this.maxOutOfOrderPacketDistance + this.redMaxRecoveryDistance;
        this.primaryPacketLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.redRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.fecRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.totalAudioPacketsExpected = 0;
        this.totalAudioPacketsLost = 0;
        this.totalAudioPacketsRecoveredRed = 0;
        this.totalAudioPacketsRecoveredFec = 0;
    }
    /**
     * Receives encoded frames from the server
     * and adds the timestamps to a packet log
     * to calculate an approximate recovery metric.
     */
    receivePacketLogTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        // @ts-ignore
        const encodings = this.splitEncodings(frame.timestamp, frame.data, 
        /*getFecInfo*/ true, frameMetadata.sequenceNumber);
        if (!encodings) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        for (let i = encodings.length - 1; i >= 0; i--) {
            if (this.updateLossStats(encodings[i])) {
                this.updateRedStats(encodings[i]);
                this.updateFecStats(encodings[i]);
            }
        }
        this.maybeReportLossStats(encodings[encodings.length - 1].timestamp, frameMetadata.synchronizationSource);
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
    }
    /**
     * Adds a timestamp to the primary packet log.
     * This also updates totalAudioPacketsLost and totalAudioPacketsExpected by looking
     * at the difference between timestamps.
     *
     * @param encoding : The encoding to be analyzed
     * @returns false if sequence number was greater than max out of order distance
     *          true otherwise
     */
    updateLossStats(encoding) {
        if (encoding.isRedundant)
            return true;
        const timestamp = encoding.timestamp;
        const seq = encoding.seq;
        if (this.totalAudioPacketsExpected === 0) {
            this.totalAudioPacketsExpected = 1;
            this.newestSequenceNumber = seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
            return true;
        }
        const diff = this.int16(seq - this.newestSequenceNumber);
        if (diff < -this.maxOutOfOrderPacketDistance)
            return false;
        if (diff < 0) {
            if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
                if (this.totalAudioPacketsLost > 0)
                    this.totalAudioPacketsLost--;
                this.addTimestamp(this.primaryPacketLog, timestamp);
                this.removeFromRecoveryWindows(timestamp);
            }
        }
        else if (diff > 1) {
            this.totalAudioPacketsLost += diff - 1;
        }
        if (diff > 0) {
            this.totalAudioPacketsExpected += diff;
            this.newestSequenceNumber = encoding.seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
        }
        return true;
    }
    /**
     * Adds a timestamp to the red recovery log if it is not present in
     * the primary packet log and if it's not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateRedStats(encoding) {
        if (!encoding.isRedundant || this.totalAudioPacketsLost === 0)
            return;
        const timestamp = encoding.timestamp;
        if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
            if (!this.hasTimestamp(this.redRecoveryLog, timestamp)) {
                this.totalAudioPacketsRecoveredRed++;
                this.addTimestamp(this.redRecoveryLog, timestamp);
            }
            if (this.removeTimestamp(this.fecRecoveryLog, timestamp)) {
                /* istanbul ignore else */
                if (this.totalAudioPacketsRecoveredFec > 0)
                    this.totalAudioPacketsRecoveredFec--;
            }
        }
    }
    /**
     * Adds a timestamp to the fec recovery log if it is not present in
     * the primary packet log and red recovery log and if it is not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateFecStats(encoding) {
        if (!encoding.hasFec || this.totalAudioPacketsLost === 0)
            return;
        const fecTimestamp = encoding.timestamp - this.redPacketizationTime;
        if (this.hasTimestamp(this.primaryPacketLog, fecTimestamp) ||
            this.hasTimestamp(this.redRecoveryLog, fecTimestamp) ||
            this.hasTimestamp(this.fecRecoveryLog, fecTimestamp)) {
            return;
        }
        this.totalAudioPacketsRecoveredFec++;
        this.addTimestamp(this.fecRecoveryLog, fecTimestamp);
    }
    /**
     * Reports loss metrics to DefaultTransceiverController
     *
     * @param timestamp : Timestamp of most recent primary packet
     */
    maybeReportLossStats(timestamp, ssrc) {
        if (timestamp - this.lastLossReportTimestamp < this.lossReportInterval)
            return;
        /* istanbul ignore next */
        if (RedundantAudioEncoder.shouldReportStats) {
            // @ts-ignore
            self.postMessage({
                type: 'RedundantAudioEncoderStats',
                ssrc,
                totalAudioPacketsLost: this.totalAudioPacketsLost,
                totalAudioPacketsExpected: this.totalAudioPacketsExpected,
                totalAudioPacketsRecoveredRed: this.totalAudioPacketsRecoveredRed,
                totalAudioPacketsRecoveredFec: this.totalAudioPacketsRecoveredFec,
            });
        }
        this.lastLossReportTimestamp = timestamp;
    }
    /**
     * Adds a timestamp to a packet log
     *
     * @param packetLog : The packetlog to add the timestamp to
     * @param timestamp : The timestamp that should be added
     */
    addTimestamp(packetLog, timestamp) {
        packetLog.window[packetLog.index] = timestamp;
        packetLog.index = (packetLog.index + 1) % packetLog.windowSize;
    }
    /**
     * Checks if a timestamp is in a packetlog
     *
     * @param packetLog : The packetlog to search
     * @param timestamp : The timestamp to search for
     * @returns true if timestamp is present, false otherwise
     */
    hasTimestamp(packetLog, timestamp) {
        const element = packetLog.window.find(t => t === timestamp);
        return !!element;
    }
    /**
     * Removes a timestamp from a packet log
     *
     * @param packetLog : The packetlog from which the timestamp should be removed
     * @param timestamp : The timestamp to be removed
     * @returns true if timestamp was present in the log and removed, false otherwise
     */
    removeTimestamp(packetLog, timestamp) {
        const index = packetLog.window.indexOf(timestamp);
        if (index >= 0) {
            packetLog.window[index] = undefined;
            return true;
        }
        return false;
    }
    /**
     * Removes a timestamp from red and fec recovery windows.
     *
     * @param timestamp : The timestamp to be removed
     */
    removeFromRecoveryWindows(timestamp) {
        let removed = this.removeTimestamp(this.redRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredRed > 0)
                this.totalAudioPacketsRecoveredRed--;
        }
        removed = this.removeTimestamp(this.fecRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredFec > 0)
                this.totalAudioPacketsRecoveredFec--;
        }
    }
    /**
     * Converts the supplied argument to 32-bit unsigned integer
     */
    uint32WrapAround(num) {
        const mod = 4294967296; // 2^32
        let res = num;
        if (num >= mod) {
            res = num - mod;
        }
        else if (num < 0) {
            res = mod + num;
        }
        return res;
    }
    /**
     * Converts the supplied argument to 16-bit signed integer
     */
    int16(num) {
        return (num << 16) >> 16;
    }
    /**
     * Determines if an Opus packet is in CELT-only mode.
     *
     * @param packet Opus packet.
     * @returns \`true\` if the packet is in CELT-only mode.
     */
    opusPacketIsCeltOnly(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // Since CELT-only packets are represented using configurations 16 to 31, the highest 'config' bit will always be 1
        // for CELT-only packets.
        return !!(packet.getUint8(0) & 0x80);
    }
    /**
     * Gets the number of samples per frame from an Opus packet.
     *
     * @param packet Opus packet. This must contain at least one byte of data.
     * @param sampleRateHz 32-bit integer sampling rate in Hz. This must be a multiple of 400 or inaccurate results will
     *                     be returned.
     * @returns Number of samples per frame.
     */
    opusPacketGetSamplesPerFrame(packet, sampleRateHz) {
        // Sample rate must be a 32-bit integer.
        sampleRateHz = Math.round(sampleRateHz);
        sampleRateHz = Math.min(Math.max(sampleRateHz, -(Math.pow(2, 32))), Math.pow(2, 32) - 1);
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        let numSamples;
        let frameSizeOption;
        // Case for CELT-only packet.
        if (this.opusPacketIsCeltOnly(packet)) {
            // The lower 3 'config' bits indicate the frame size option.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            // The frame size options 0, 1, 2, 3 correspond to frame sizes of 2.5, 5, 10, 20 ms. Notice that the frame sizes
            // can be represented as (2.5 * 2^0), (2.5 * 2^1), (2.5 * 2^2), (2.5 * 2^3) ms. So, the number of samples can be
            // calculated as follows:
            // (sample/s) * (1s/1000ms) * (2.5ms) * 2^(frameSizeOption)
            // = (sample/s) * (1s/400) * 2^(frameSizeOption)
            // = (sample/s) * 2^(frameSizeOption) * (1s/400)
            numSamples = (sampleRateHz << frameSizeOption) / 400;
        }
        // Case for Hybrid packet. Since Hybrid packets are represented using configurations 12 to 15, bits 1 and 2 in the
        // above TOC byte diagram will both be 1.
        else if ((packet.getUint8(0) & 0x60) === 0x60) {
            // In the case of configuration 13 or 15, bit 4 in the above TOC byte diagram will be 1. Configurations 13 and 15
            // correspond to a 20ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (20ms)
            // = (sample/s) * (1s/50)
            //
            // In the case of configuration 12 or 14, bit 4 in the above TOC byte diagram will be 0. Configurations 12 and 14
            // correspond to a 10ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (10ms)
            // = (sample/s) * (1s/100)
            numSamples = packet.getUint8(0) & 0x08 ? sampleRateHz / 50 : sampleRateHz / 100;
        }
        // Case for SILK-only packet.
        else {
            // The lower 3 'config' bits indicate the frame size option for SILK-only packets.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            if (frameSizeOption === 3) {
                // Frame size option 3 corresponds to a frame size of 60ms, so the number of samples is calculated as follows:
                // (sample/s) * (1s/1000ms) * (60ms)
                // = (sample/s) * (60ms) * (1s/1000ms)
                numSamples = (sampleRateHz * 60) / 1000;
            }
            else {
                // The frame size options 0, 1, 2 correspond to frame sizes of 10, 20, 40 ms. Notice that the frame sizes can be
                // represented as (10 * 2^0), (10 * 2^1), (10 * 2^2) ms. So, the number of samples can be calculated as follows:
                // (sample/s) * (1s/1000ms) * (10ms) * 2^(frameSizeOption)
                // = (sample/s) * (1s/100) * 2^(frameSizeOption)
                // = (sample/s) * 2^(frameSizeOption) * (1s/100)
                numSamples = (sampleRateHz << frameSizeOption) / 100;
            }
        }
        return numSamples;
    }
    /**
     * Gets the number of SILK frames per Opus frame.
     *
     * @param packet Opus packet.
     * @returns Number of SILK frames per Opus frame.
     */
    opusNumSilkFrames(packet) {
        // For computing the frame length in ms, the sample rate is not important since it cancels out. We use 48 kHz, but
        // any valid sample rate would work.
        //
        // To calculate the length of a frame (with a 48kHz sample rate) in ms:
        // (samples/frame) * (1s/48000 samples) * (1000ms/s)
        // = (samples/frame) * (1000ms/48000 samples)
        // = (samples/frame) * (1ms/48 samples)
        let frameLengthMs = this.opusPacketGetSamplesPerFrame(packet, 48000) / 48;
        if (frameLengthMs < 10)
            frameLengthMs = 10;
        // The number of SILK frames per Opus frame is described in https://www.rfc-editor.org/rfc/rfc6716#section-4.2.2.
        switch (frameLengthMs) {
            case 10:
            case 20:
                return 1;
            case 40:
                return 2;
            case 60:
                return 3;
            // It is not possible to reach the default case since an Opus packet can only encode sizes of 2.5, 5, 10, 20, 40,
            // or 60 ms, so we ignore the default case for test coverage.
            /* istanbul ignore next */
            default:
                return 0;
        }
    }
    /**
     * Gets the number of channels from an Opus packet.
     *
     * @param packet Opus packet.
     * @returns Number of channels.
     */
    opusPacketGetNumChannels(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // The 's' bit indicates mono or stereo audio, with 0 indicating mono and 1 indicating stereo.
        return packet.getUint8(0) & 0x4 ? 2 : 1;
    }
    /**
     * Determine the size (in bytes) of an Opus frame.
     *
     * @param packet Opus packet.
     * @param byteOffset Offset (from the start of the packet) to the byte containing the size information.
     * @param remainingBytes Remaining number of bytes to parse from the Opus packet.
     * @param sizeBytes Variable to store the parsed frame size (in bytes).
     * @returns Number of bytes that were parsed to determine the frame size.
     */
    opusParseSize(packet, byteOffset, remainingBytes, sizeBytes) {
        // See https://www.rfc-editor.org/rfc/rfc6716#section-3.2.1 for an explanation of how frame size is represented.
        // If there are no remaining bytes to parse the size from, then the size cannot be determined.
        if (remainingBytes < 1) {
            sizeBytes[0] = -1;
            return -1;
        }
        // If the first byte is in the range 0...251, then this value is the size of the frame.
        else if (packet.getUint8(byteOffset) < 252) {
            sizeBytes[0] = packet.getUint8(byteOffset);
            return 1;
        }
        // If the first byte is in the range 252...255, a second byte is needed. If there is no second byte, then the size
        // cannot be determined.
        else if (remainingBytes < 2) {
            sizeBytes[0] = -1;
            return -1;
        }
        // The total size of the frame given two size bytes is:
        // (4 * secondSizeByte) + firstSizeByte
        else {
            sizeBytes[0] = 4 * packet.getUint8(byteOffset + 1) + packet.getUint8(byteOffset);
            return 2;
        }
    }
    /**
     * Parse binary data containing an Opus packet into one or more Opus frames.
     *
     * @param data Binary data containing an Opus packet to be parsed. The data should begin with the first byte (i.e the
     *             TOC byte) of an Opus packet. Note that the size of the data does not have to equal the size of the
     *             contained Opus packet.
     * @param lenBytes Size of the data (in bytes).
     * @param selfDelimited Indicates if the Opus packet is self-delimiting
     *                      (https://www.rfc-editor.org/rfc/rfc6716#appendix-B).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the data) to the first bytes of each
     *                     Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the data) to the first byte of the
     *                      payload.
     * @param packetLenBytes Optional variable to store the length of the Opus packet (in bytes).
     * @returns Number of Opus frames.
     */
    opusPacketParseImpl(data, lenBytes, selfDelimited, tocByte, frameOffsets, frameSizes, payloadOffset, packetLenBytes) {
        if (!frameSizes || lenBytes < 0)
            return this.OPUS_BAD_ARG;
        if (lenBytes === 0)
            return this.OPUS_INVALID_PACKET;
        // The number of Opus frames in the packet.
        let numFrames;
        // Intermediate storage for the number of bytes parsed to determine the size of a frame.
        let numBytesParsed;
        // The number of the padding bytes (excluding the padding count bytes) in the packet.
        let paddingBytes = 0;
        // Indicates whether CBR (constant bitrate) framing is used.
        let cbr = false;
        // The TOC (table of contents) byte (https://www.rfc-editor.org/rfc/rfc6716#section-3.1).
        const toc = data.getUint8(0);
        // Store the TOC byte.
        if (tocByte)
            tocByte[0] = toc;
        // The remaining number of bytes to parse from the packet. Note that the TOC byte has already been parsed, hence the
        // minus 1.
        let remainingBytes = lenBytes - 1;
        // This keeps track of where we are in the packet. This starts at 1 since the TOC byte has already been read.
        let byteOffset = 1;
        // The size of the last Opus frame in bytes.
        let lastSizeBytes = remainingBytes;
        // Read the \`c\` bits (i.e. code bits) from the TOC byte.
        switch (toc & 0x3) {
            // A code 0 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.2) has one frame.
            case 0:
                numFrames = 1;
                break;
            // A code 1 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.3) has two CBR (constant bitrate) frames.
            case 1:
                numFrames = 2;
                cbr = true;
                if (!selfDelimited) {
                    // Undelimited code 1 packets must be an even number of data bytes, otherwise the packet is invalid.
                    if (remainingBytes & 0x1)
                        return this.OPUS_INVALID_PACKET;
                    // The sizes of both frames are equal (i.e. half of the number of data bytes).
                    lastSizeBytes = remainingBytes / 2;
                    // If \`lastSizeBytes\` is too large, we will catch it later.
                    frameSizes[0][0] = lastSizeBytes;
                }
                break;
            // A code 2 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.4) has two VBR (variable bitrate) frames.
            case 2:
                numFrames = 2;
                numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[0]);
                remainingBytes -= numBytesParsed;
                // The parsed size of the first frame cannot be larger than the number of remaining bytes in the packet.
                if (frameSizes[0][0] < 0 || frameSizes[0][0] > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                byteOffset += numBytesParsed;
                // The size of the second frame is the remaining number of bytes after the first frame.
                lastSizeBytes = remainingBytes - frameSizes[0][0];
                break;
            // A code 3 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5) has multiple CBR/VBR frames (from 0 to
            // 120 ms).
            default:
                // Code 3 packets must have at least 2 bytes (i.e. at least 1 byte after the TOC byte).
                if (remainingBytes < 1)
                    return this.OPUS_INVALID_PACKET;
                // Frame count byte format:
                //  0
                //  0 1 2 3 4 5 6 7
                // +-+-+-+-+-+-+-+-+
                // |v|p|     M     |
                // +-+-+-+-+-+-+-+-+
                //
                // Read the frame count byte, which immediately follows the TOC byte.
                const frameCountByte = data.getUint8(byteOffset++);
                --remainingBytes;
                // Read the 'M' bits of the frame count byte, which encode the number of frames.
                numFrames = frameCountByte & 0x3f;
                // The number of frames in a code 3 packet must not be 0.
                if (numFrames <= 0)
                    return this.OPUS_INVALID_PACKET;
                const samplesPerFrame = this.opusPacketGetSamplesPerFrame(data, 48000);
                // A single frame can have at most 2880 samples, which happens in the case where 60ms of 48kHz audio is encoded
                // per frame. A code 3 packet cannot contain more than 120ms of audio, so the total number of samples cannot
                // exceed 2880 * 2 = 5760.
                if (samplesPerFrame * numFrames > 5760)
                    return this.OPUS_INVALID_PACKET;
                // Parse padding bytes if the 'p' bit is 1.
                if (frameCountByte & 0x40) {
                    let paddingCountByte;
                    let numPaddingBytes;
                    // Remove padding bytes (including padding count bytes) from the remaining byte count.
                    do {
                        // Sanity check that there are enough bytes to parse and remove the padding.
                        if (remainingBytes <= 0)
                            return this.OPUS_INVALID_PACKET;
                        // Get the next padding count byte.
                        paddingCountByte = data.getUint8(byteOffset++);
                        --remainingBytes;
                        // If the padding count byte has a value in the range 0...254, then the total size of the padding is the
                        // value in the padding count byte.
                        //
                        // If the padding count byte has value 255, then the total size of the padding is 254 plus the value in the
                        // next padding count byte. Therefore, keep reading padding count bytes while the value is 255.
                        numPaddingBytes = paddingCountByte === 255 ? 254 : paddingCountByte;
                        remainingBytes -= numPaddingBytes;
                        paddingBytes += numPaddingBytes;
                    } while (paddingCountByte === 255);
                }
                // Sanity check that the remaining number of bytes is not negative after removing the padding.
                if (remainingBytes < 0)
                    return this.OPUS_INVALID_PACKET;
                // Read the 'v' bit (i.e. VBR bit).
                cbr = !(frameCountByte & 0x80);
                // VBR case
                if (!cbr) {
                    lastSizeBytes = remainingBytes;
                    // Let M be the number of frames. There will be M - 1 frame length indicators (which can be 1 or 2 bytes)
                    // corresponding to the lengths of frames 0 to M - 2. The size of the last frame (i.e. frame M - 1) is the
                    // number of data bytes after the end of frame M - 2 and before the start of the padding bytes.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[i]);
                        remainingBytes -= numBytesParsed;
                        // The remaining number of data bytes must be enough to contain each frame.
                        if (frameSizes[i][0] < 0 || frameSizes[i][0] > remainingBytes) {
                            return this.OPUS_INVALID_PACKET;
                        }
                        byteOffset += numBytesParsed;
                        lastSizeBytes -= numBytesParsed + frameSizes[i][0];
                    }
                    // Sanity check that the size of the last frame is not negative.
                    if (lastSizeBytes < 0)
                        return this.OPUS_INVALID_PACKET;
                }
                // CBR case
                else if (!selfDelimited) {
                    // The size of each frame is the number of data bytes divided by the number of frames.
                    lastSizeBytes = Math.trunc(remainingBytes / numFrames);
                    // The number of data bytes must be a non-negative integer multiple of the number of frames.
                    if (lastSizeBytes * numFrames !== remainingBytes)
                        return this.OPUS_INVALID_PACKET;
                    // All frames have equal size in the undelimited CBR case.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        frameSizes[i][0] = lastSizeBytes;
                    }
                }
        }
        // Self-delimited framing uses an extra 1 or 2 bytes, immediately preceding the data bytes, to indicate either the
        // size of the last frame (for code 0, code 2, and VBR code 3 packets) or the size of all the frames (for code 1 and
        // CBR code 3 packets). See https://www.rfc-editor.org/rfc/rfc6716#appendix-B.
        if (selfDelimited) {
            // The extra frame size byte(s) will always indicate the size of the last frame.
            numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[numFrames - 1]);
            remainingBytes -= numBytesParsed;
            // There must be enough data bytes for the last frame.
            if (frameSizes[numFrames - 1][0] < 0 || frameSizes[numFrames - 1][0] > remainingBytes) {
                return this.OPUS_INVALID_PACKET;
            }
            byteOffset += numBytesParsed;
            // For CBR packets, the sizes of all the frames are equal.
            if (cbr) {
                // There must be enough data bytes for all the frames.
                if (frameSizes[numFrames - 1][0] * numFrames > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                for (let i = 0; i < numFrames - 1; ++i) {
                    frameSizes[i][0] = frameSizes[numFrames - 1][0];
                }
            }
            // At this point, \`lastSizeBytes\` contains the size of the last frame plus the size of the extra frame size
            // byte(s), so sanity check that \`lastSizeBytes\` is the upper bound for the size of the last frame.
            else if (!(numBytesParsed + frameSizes[numFrames - 1][0] <= lastSizeBytes)) {
                return this.OPUS_INVALID_PACKET;
            }
        }
        // Undelimited case
        else {
            // Because the size of the last packet is not encoded explicitly, it is possible that the size of the last packet
            // (or of all the packets, for the CBR case) is larger than maximum frame size.
            if (lastSizeBytes > this.OPUS_MAX_FRAME_SIZE_BYTES)
                return this.OPUS_INVALID_PACKET;
            frameSizes[numFrames - 1][0] = lastSizeBytes;
        }
        // Store the offset to the start of the payload.
        if (payloadOffset)
            payloadOffset[0] = byteOffset;
        // Store the offsets to the start of each frame.
        for (let i = 0; i < numFrames; ++i) {
            if (frameOffsets)
                frameOffsets[i][0] = byteOffset;
            byteOffset += frameSizes[i][0];
        }
        // Store the length of the Opus packet.
        if (packetLenBytes)
            packetLenBytes[0] = byteOffset + paddingBytes;
        return numFrames;
    }
    /**
     * Parse a single undelimited Opus packet into one or more Opus frames.
     *
     * @param packet Opus packet to be parsed.
     * @param lenBytes Size of the packet (in bytes).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the packet) to the first bytes of
     *                     each Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the packet) to the first byte of the
     *                      payload.
     * @returns Number of Opus frames.
     */
    opusPacketParse(packet, lenBytes, tocByte, frameOffsets, frameSizes, payloadOffset) {
        return this.opusPacketParseImpl(packet, lenBytes, 
        /* selfDelimited */ false, tocByte, frameOffsets, frameSizes, payloadOffset, null);
    }
    /**
     * This function returns the SILK VAD (voice activity detection) information encoded in the Opus packet. For CELT-only
     * packets that do not have VAD information, it returns -1.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  0: no frame had the VAD flag set.
     *           1: at least one frame had the VAD flag set.
     *          -1: VAD status could not be determined.
     */
    opusPacketHasVoiceActivity(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return 0;
        // In CELT-only mode, we can not determine whether there is VAD.
        if (this.opusPacketIsCeltOnly(packet))
            return -1;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        // It is not possible for \`opusNumSilkFrames()\` to return 0, so we ignore the next sanity check for test coverage.
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return -1;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        // VAD status cannot be determined for invalid packets.
        if (numOpusFrames < 0)
            return -1;
        // Iterate over all Opus frames, which may contain multiple SILK frames, to determine the VAD status.
        for (let i = 0; i < numOpusFrames; ++i) {
            if (opusFrameSizes[i][0] < 1)
                continue;
            // LP layer header bits format (https://www.rfc-editor.org/rfc/rfc6716#section-4.2.3):
            //
            // Mono case:
            // +-----------------+----------+
            // | 1 to 3 VAD bits | LBRR bit |
            // +-----------------+----------+
            //
            // Stereo case:
            // +---------------------+--------------+----------------------+---------------+
            // | 1 to 3 mid VAD bits | mid LBRR bit | 1 to 3 side VAD bits | side LBRR bit |
            // +---------------------+--------------+----------------------+---------------+
            // The upper 1 to 3 bits (dependent on the number of SILK frames) of the LP layer contain VAD bits. If any of
            // these VAD bits are 1, then voice activity is present.
            if (packet.getUint8(opusFrameOffsets[i][0]) >> (8 - numSilkFrames))
                return 1;
            // In the stereo case, there is a second set of 1 to 3 VAD bits, so also check these VAD bits.
            const channels = this.opusPacketGetNumChannels(packet);
            if (channels === 2 &&
                (packet.getUint8(opusFrameOffsets[i][0]) << (numSilkFrames + 1)) >> (8 - numSilkFrames)) {
                return 1;
            }
        }
        // No voice activity was detected.
        return 0;
    }
    /**
     * This method is based on Definition of the Opus Audio Codec
     * (https://tools.ietf.org/html/rfc6716). Basically, this method is based on
     * parsing the LP layer of an Opus packet, particularly the LBRR flag.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  true: packet has fec encoding about previous packet.
     *           false: no fec encoding present.
     */
    opusPacketHasFec(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return false;
        // In CELT-only mode, packets should not have FEC.
        if (this.opusPacketIsCeltOnly(packet))
            return false;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        if (numOpusFrames < 0)
            return false;
        /* istanbul ignore next */
        if (opusFrameSizes[0][0] <= 1)
            return false;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return false;
        const channels = this.opusPacketGetNumChannels(packet);
        /* istanbul ignore next */
        if (channels !== 1 && channels !== 2)
            return false;
        // A frame starts with the LP layer. The LP layer begins with two to eight
        // header bits.These consist of one VAD bit per SILK frame (up to 3),
        // followed by a single flag indicating the presence of LBRR frames.
        // For a stereo packet, these first flags correspond to the mid channel, and
        // a second set of flags is included for the side channel. Because these are
        // the first symbols decoded by the range coder and because they are coded
        // as binary values with uniform probability, they can be extracted directly
        // from the most significant bits of the first byte of compressed data.
        for (let i = 0; i < channels; i++) {
            if (packet.getUint8(opusFrameOffsets[0][0]) & (0x80 >> ((i + 1) * (numSilkFrames + 1) - 1)))
                return true;
        }
        return false;
    }
}
RedundantAudioEncoder.shouldLog = true;
RedundantAudioEncoder.shouldReportStats = true;
RedundantAudioEncoder.initializeWorker();
`;l.default=c},3741513515:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(6393942734));let v=n(class extends m.default{static nextTick(s){setTimeout(s,0)}constructor(){super(0)}},"AsyncScheduler");l.default=v},9013967876:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{start(m){this.stop(),this.timer=setInterval(m,this.intervalMs)}stop(){this.timer!==void 0&&(clearInterval(this.timer),this.timer=void 0)}running(){return this.timer!==void 0}constructor(m){this.intervalMs=m}},"IntervalScheduler");l.default=c},6393942734:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{start(m){this.stop(),this.timer=setTimeout(()=>{clearTimeout(this.timer),m()},this.timeoutMs)}stop(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)}constructor(m){this.timeoutMs=m,this.timer=null}},"TimeoutScheduler");l.default=c},3430379175:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(9615283928)),v=u(c(3364495052)),g=u(c(4883941895));let s=n(class Fi{clone(){return new Fi(this.sdp)}static isRTPCandidate(i){const e=/candidate[:](\S+) (\d+)/g.exec(i);return!(e===null||e[2]!=="1")}static linesToSDP(i){return new Fi(i.join(Fi.CRLF))}static candidateTypeFromString(i){switch(i){case m.default.Host:return m.default.Host;case m.default.ServerReflexive:return m.default.ServerReflexive;case m.default.PeerReflexive:return m.default.PeerReflexive;case m.default.Relay:return m.default.Relay}return null}static candidateType(i){const e=/a[=]candidate[:].* typ ([a-z]+) /g.exec(i);return e===null?null:Fi.candidateTypeFromString(e[1])}static mediaType(i){const e=/m=(audio|video)/g.exec(i);if(e!==null)return e[1]}static mid(i){if(i.includes("a=mid:"))return i.replace(/^(a=mid:)/,"")}static direction(i){const e=/a=(sendrecv|sendonly|recvonly|inactive)/g.exec(i);if(e!==null)return e[1]}static splitLines(i){return i.trim().split(`
`).map(e=>e.trim())}static splitSections(i){return i.split(`
m=`).map((t,r)=>(r>0?"m="+t:t).trim()+Fi.CRLF)}static findActiveCameraSection(i){let e=0,t=!1;for(const r of i){if(/^m=video/.test(r)&&(r.indexOf("sendrecv")>-1||r.indexOf("sendonly")===-1&&r.indexOf("recvonly")===-1&&r.indexOf("inactive")===-1)){t=!0;break}e++}return t===!1&&(e=-1),e}static extractSSRCsFromFIDGroupLine(i){return/^a=ssrc-group:FID\s(.+)/.exec(i)[1]}static matchPrefix(i,e){return Fi.splitLines(i).filter(t=>t.indexOf(e)===0)}lines(){return this.sdp.split(Fi.CRLF)}hasVideo(){return/^m=video/gm.exec(this.sdp)!==null}hasCandidates(){return/a[=]candidate[:]/g.exec(this.sdp)!==null}hasCandidatesForAllMLines(){return!(this.sdp.indexOf("c=IN IP4 0.0.0.0")>-1)}withoutCandidateType(i){return Fi.linesToSDP(this.lines().filter(e=>Fi.candidateType(e)!==i))}withoutServerReflexiveCandidates(){return this.withoutCandidateType(m.default.ServerReflexive)}withAudioMaxAverageBitrate(i){if(!i)return this.clone();i=Math.trunc(Math.min(Math.max(i,Fi.rfc7587LowestBitrate),Fi.rfc7587HighestBitrate));const e=this.lines(),t=Fi.findOpusFmtpAttributes(e),r=Fi.updateOpusFmtpAttributes(e,t,[`maxaveragebitrate=${i}`]);return Fi.linesToSDP(r)}withStereoAudio(){const i=this.lines(),e=Fi.findOpusFmtpAttributes(i),t=Fi.updateOpusFmtpAttributes(i,e,["stereo=1","sprop-stereo=1"]);return Fi.linesToSDP(t)}static findOpusFmtpAttributes(i){const e=/^a=rtpmap:\s*(\d+)\s+opus\/48000/;let t=!1;const r=[];for(const o of i)if(o.startsWith("m=audio")&&(r.push(null),t=!0),o.startsWith("m=video")&&(t=!1),t){const f=e.exec(o);f!==null&&(r[r.length-1]=`a=fmtp:${f[1]} `)}return r}static updateOpusFmtpAttributes(i,e,t){const r=[];let o=0,f=null;for(const h of i)if(h.startsWith("m=audio")&&(f=e[o],o++),h.startsWith("m=video")&&(f=null),f&&h.startsWith(f)){const p=h.slice(f.length).split(";"),d=[];for(const y of p)t.findIndex(b=>b.startsWith(y.split("=")[0]))<0&&d.push(y);for(const y of t)d.push(y);r.push(f+d.join(";"))}else r.push(h);return r}withUnifiedPlanFormat(){let i=this.sdp;return i.includes("mozilla")?this.clone():(i=i.replace("o=-","o=mozilla-chrome"),new Fi(i))}getUniqueRtpHeaderExtensionId(i){const e=[];for(const r of i)if(/^a=extmap:/.test(r.trim())){const f=+r.split("a=extmap:")[1].split(" ")[0];e.includes(f)||e.push(f)}e.sort((r,o)=>r-o);let t=0;for(const r of e){if(r-t>1)return t+1;t=r}return t===14?-1:t+1}withVideoLayersAllocationRtpHeaderExtension(i){return this.withRtpHeaderExtension(i,Fi.videoLayersAllocationRtpHeaderExtensionUrl)}withDependencyDescriptorRtpHeaderExtension(i){return this.withRtpHeaderExtension(i,Fi.dependencyDescriptorRtpHeaderExtensionUrl)}withoutDependencyDescriptorRtpHeaderExtension(){const i=Fi.splitLines(this.sdp).filter(e=>!e.includes(Fi.dependencyDescriptorRtpHeaderExtensionUrl));return new Fi(i.join(Fi.CRLF)+Fi.CRLF)}withRtpHeaderExtension(i,e){const t=i?i.getRtpHeaderExtensionId(e):-1,r=t===-1?this.getUniqueRtpHeaderExtensionId(Fi.splitLines(this.sdp)):t,o=Fi.splitSections(this.sdp),f=[];for(let p of o){if(/^m=video/.test(p)&&Fi.getRtpHeaderExtensionIdInSection(p,e)===-1){const d=Fi.splitLines(p),y=[];if(r===-1||this.hasRtpHeaderExtensionId(r)){f.push(p);continue}for(const S of d)if(y.push(S),/^a=sendrecv/.test(S.trim())){const b="a=extmap:"+r+" "+e;y.push(b)}p=y.join(Fi.CRLF)+Fi.CRLF}else if(t!==-1&&/^m=video/.test(p)&&Fi.getRtpHeaderExtensionIdInSection(p,e)!==t){const d=Fi.splitLines(p),y=[];for(const S of d){if(/^a=extmap:/.test(S.trim())&&S.split("a=extmap:")[1].split(" ")[1]===e){if(!this.hasRtpHeaderExtensionId(t)){const _="a=extmap:"+t+" "+e;y.push(_)}continue}y.push(S)}p=y.join(Fi.CRLF)+Fi.CRLF}f.push(p)}const h=f.join("");return new Fi(h)}ssrcForVideoSendingSection(){const i=this.sdp,e=Fi.splitSections(i);if(e.length<2)return"";const t=Fi.findActiveCameraSection(e);if(t===-1)return"";const r=Fi.matchPrefix(e[t],"a=ssrc-group:FID ");if(r.length<1)return"";const o=Fi.extractSSRCsFromFIDGroupLine(r[0]),[f]=o.split(" ").map(h=>parseInt(h,10));return f.toString()}videoSendSectionHasDifferentSSRC(i){const e=this.ssrcForVideoSendingSection(),t=i.ssrcForVideoSendingSection();if(e===""||t==="")return!1;const r=parseInt(e,10),o=parseInt(t,10);return r!==o}removeH264SupportFromSendSection(){const i=this.sdp,e=Fi.splitSections(i),t=Fi.findActiveCameraSection(e);if(t===-1)return new Fi(this.sdp);const r=e[t],o=Fi.splitLines(r),f=[],h=new Map;o.forEach(S=>{if(/^a=rtpmap:/.test(S)){const b=/^a=rtpmap:([0-9]+)\s/.exec(S);b&&S.toLowerCase().includes("h264")&&f.push(parseInt(b[1],10))}if(/^a=fmtp:/.test(S)){const b=/^a=fmtp:([0-9]+) apt=([0-9]+)/.exec(S);if(b&&b.length===3){const _=parseInt(b[1],10),C=parseInt(b[2],10);h.has(C)?h.get(C).push(_):h.set(C,[_])}}});const p=new Set;for(const S of f){p.add(S);const b=h.get(S);if(b)for(const _ of b)p.add(_)}if(f.length>0){const S=o[0].split(" ");o[0]=S.filter(b=>!p.has(parseInt(b))).join(" ")}const d=o.filter(S=>{if(!S.includes("rtpmap")&&!S.includes("rtcp-fb")&&!S.includes("fmtp"))return!0;for(const b of p)if(S.includes(b.toString()))return!1;return!0});e[t]=d.join(Fi.CRLF)+Fi.CRLF;const y=e.join("");return new Fi(y)}mediaSections(){const i=Fi.splitSections(this.sdp);if(i.length<2)return[];const e=[];for(let t=1;t<i.length;t++){const r=new v.default,o=Fi.splitLines(i[t]);for(const f of o){const h=Fi.mediaType(f);if(h!==void 0){r.mediaType=h;continue}const p=Fi.direction(f);if(p!==void 0){r.direction=p;continue}const d=Fi.mid(f);if(d!==void 0){r.mid=d;continue}}e.push(r)}return e}static getRtpHeaderExtensionIdInSection(i,e){const t=Fi.splitLines(i);for(const r of t)if(/^a=extmap:/.test(r.trim())){const o=r.split("a=extmap:")[1].split(" "),f=+o[0];if(o[1]===e)return f}return-1}getRtpHeaderExtensionId(i){const e=Fi.splitSections(this.sdp);for(const t of e)if(/^m=video/.test(t)){const r=Fi.getRtpHeaderExtensionIdInSection(t,i);if(r!==-1)return r}return-1}hasRtpHeaderExtensionId(i){const e=Fi.splitLines(this.sdp);for(const t of e)if(/^a=extmap:/.test(t.trim())&&+t.split("a=extmap:")[1].split(" ")[0]===i)return!0;return!1}withVideoSendCodecPreferences(i){const e=this.sdp,t=Fi.splitSections(e),r=Fi.findActiveCameraSection(t);if(r===-1)return new Fi(this.sdp);t[r]=this.sectionWithCodecPreferences(t[r],i);const o=t.join("");return new Fi(o)}sectionWithCodecPreferences(i,e){const t=new Map,r=Fi.splitLines(i);r.forEach(p=>{if(!p.startsWith("a=rtpmap:"))return;const d=/^a=rtpmap:(\d+)\s/.exec(p);if(!d)return;const y=d[1];for(const S of e){if(!p.includes(`${S.codecName}/${S.codecCapability.clockRate}`))continue;let b=!1;if(S.codecCapability.sdpFmtpLine!==void 0){let _=!1;for(const C of r){if(S.fmtpLineMatches(C,parseInt(y))){b=!0;break}_||(_=C.startsWith(`a=fmtp:${y} profile-id=`))}S.equals(g.default.vp9Profile0())&&!_&&(b=!0)}else b=!0;if(b){t.set(y,S);break}}});const o=new Set(t.keys()),f=r[0].split(" ").filter(p=>!o.has(p)),h=Array.from(t.entries()).sort((p,d)=>{let[y,S]=p,[b,_]=d;const C=e.indexOf(S),w=e.indexOf(_);return C-w}).map(p=>{let[d,y]=p;return d});return f.splice(3,0,...h),r[0]=f.join(" "),r.join(Fi.CRLF)+Fi.CRLF}highestPriorityVideoSendCodec(){const i=this.prioritizedSendVideoCodecCapabilities();return i.length>0?i[0]:void 0}prioritizedSendVideoCodecCapabilities(){const i=this.sdp,e=Fi.splitSections(i),t=Fi.findActiveCameraSection(e);if(t===-1)return[];const r=Fi.splitLines(e[t]),o=r[0].split(" ");return o.length<4?[]:o.slice(3).map(p=>this.videoCodecCapabilityForPayloadType(r,p)).filter(p=>p!==void 0&&["VP8","H264","VP9","AV1"].includes(p.codecName))}videoCodecCapabilityForPayloadType(i,e){let t,r,o;for(const f of i){const h=/^a=rtpmap:([0-9]+)\s/.exec(f);if(h&&h[1]===e){const d=f.split(" ")[1].split("/");d.length>=2&&(t=d[0],r=d[1])}f.startsWith(`a=fmtp:${e} `)&&(o=f.split(" ")[1])}if(t!==void 0)return new g.default(t,{clockRate:parseInt(r),mimeType:`video/${t}`,sdpFmtpLine:o})}getAudioPayloadTypes(){const i=new Map,e=this.sdp,t=Fi.splitSections(e);return i.set("opus",Fi.findAudioPayloadType("opus",t)),i.set("red",Fi.findAudioPayloadType("red",t)),i}static findAudioPayloadType(i,e){const t=`a=rtpmap:\\s*(\\d+)\\s+${i}\\/48000`,r=new RegExp(t);for(const o of e)if(/^m=audio/.test(o)){const f=r.exec(o);if(f!==null)return Number(f[1])}return 0}withStartingVideoSendBitrate(i){const e=Fi.splitSections(this.sdp),t=Fi.findActiveCameraSection(e);if(t===-1)return this;const r=Fi.splitLines(e[t]),o=[];for(const h of r)if(/^a=fmtp:\d*/.test(h)){const p=h+`;x-google-start-bitrate=${i*1e3}`;o.push(p)}else o.push(h);e[t]=o.join(Fi.CRLF)+Fi.CRLF;const f=e.join("");return new Fi(f)}constructor(i){this.sdp=i}},"SDP");l.default=s,s.CRLF=`\r
`,s.rfc7587LowestBitrate=6e3,s.rfc7587HighestBitrate=51e4,s.dependencyDescriptorRtpHeaderExtensionUrl="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension",s.videoLayersAllocationRtpHeaderExtensionUrl="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00"},9615283928:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SDPCandidateType=void 0;var c;(function(u){u.Host="host",u.ServerReflexive="srflx",u.PeerReflexive="prflx",u.Relay="relay"})(c=l.SDPCandidateType||(l.SDPCandidateType={})),l.default=c},3364495052:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"SDPMediaSection");l.default=c},4883941895:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=c(5391134031);let m=n(class Ba{equals(g){return g!==void 0&&this.codecName===g.codecName&&this.codecCapability.mimeType===g.codecCapability.mimeType&&this.codecCapability.clockRate===g.codecCapability.clockRate&&this.codecCapability.sdpFmtpLine===g.codecCapability.sdpFmtpLine}fmtpLineMatches(g,s){const a=this.codecCapability.sdpFmtpLine;if(!a)return!1;if(this.codecName==="H264"){const i=/profile-level-id=([0-9a-f]{4})[0-9a-f]{2}/i,e=a.replace(i,"profile-level-id=$1");return g.replace(i,"profile-level-id=$1").startsWith(`a=fmtp:${s} ${e}`)}return g.startsWith(`a=fmtp:${s} ${a}`)}static vp8(){return new Ba("VP8",{clockRate:9e4,mimeType:"video/VP8"})}static h264BaselineProfile(){return new Ba("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f"})}static h264ConstrainedBaselineProfile(){return new Ba("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f"})}static h264MainProfile(){return new Ba("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=4d001f"})}static h264HighProfile(){return new Ba("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=64001f"})}static h264ConstrainedHighProfile(){return new Ba("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=640c1f"})}static h264(){return Ba.h264ConstrainedBaselineProfile()}static vp9Profile0(){return new Ba("VP9",{clockRate:9e4,mimeType:"video/VP9",sdpFmtpLine:"profile-id=0"})}static vp9(){return Ba.vp9Profile0()}static av1Main(){return new Ba("AV1",{clockRate:9e4,mimeType:"video/AV1"})}static av1(){return Ba.av1Main()}static fromSignaled(g){switch(g){case u.SdkVideoCodecCapability.VP8:return Ba.vp8();case u.SdkVideoCodecCapability.H264_BASELINE_PROFILE:return Ba.h264BaselineProfile();case u.SdkVideoCodecCapability.H264_CONSTRAINED_BASELINE_PROFILE:return Ba.h264ConstrainedBaselineProfile();case u.SdkVideoCodecCapability.H264_MAIN_PROFILE:return Ba.h264MainProfile();case u.SdkVideoCodecCapability.H264_HIGH_PROFILE:return Ba.h264HighProfile();case u.SdkVideoCodecCapability.H264_CONSTRAINED_HIGH_PROFILE:return Ba.h264ConstrainedHighProfile();case u.SdkVideoCodecCapability.VP9_PROFILE_0:return Ba.vp9Profile0();case u.SdkVideoCodecCapability.AV1_MAIN_PROFILE:return Ba.av1Main();default:return}}constructor(g,s){this.codecName=g,this.codecCapability=s}},"VideoCodecCapability");l.default=m},9675039205:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=c(2179555054);let m=n(class Uf{compress(g,s){if(s.length>0){const e=Math.min(s.length,Uf.MAX_DICTIONARY_SIZE);s=s.slice(0,e)}const a={memLevel:Uf.Z_MEM_LEVEL,dictionary:s};return u.deflateRaw(g,a)}decompress(g,s){if(s.length>0){const e=Math.min(s.length,Uf.MAX_DICTIONARY_SIZE);s=s.slice(0,e)}const a={to:"string",dictionary:s,chunkSize:4096};let i="";try{i=u.inflateRaw(g,a)}catch(e){this.logger.error(`failed to decompress the string with error: [${e}]`)}return i}constructor(g){this.logger=g}},"ZLIBTextCompressor");l.default=m,m.Z_MEM_LEVEL=9,m.MAX_DICTIONARY_SIZE=31744},4641929542:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=c(3097552577),m=c(3049140029),v=c(953236500),g=c(7338273141);let s=n(class{perform(i,e){const t=this.currentState;if(t===v.SessionStateControllerState.NotConnected&&i===u.SessionStateControllerAction.Connect)this.transition(v.SessionStateControllerState.Connecting,i);else if(t===v.SessionStateControllerState.Connecting&&i===u.SessionStateControllerAction.Fail)this.transition(v.SessionStateControllerState.Disconnecting,i);else if(t===v.SessionStateControllerState.Connecting&&i===u.SessionStateControllerAction.FinishConnecting)this.transition(v.SessionStateControllerState.Connected,i);else if(t===v.SessionStateControllerState.Connected&&i===u.SessionStateControllerAction.Disconnect)this.transition(v.SessionStateControllerState.Disconnecting,i);else if(t===v.SessionStateControllerState.Connected&&i===u.SessionStateControllerAction.Reconnect)this.transition(v.SessionStateControllerState.Connecting,i);else if(t===v.SessionStateControllerState.Connected&&i===u.SessionStateControllerAction.Fail)this.transition(v.SessionStateControllerState.Disconnecting,i);else if(t===v.SessionStateControllerState.Connected&&i===u.SessionStateControllerAction.Update)this.transition(v.SessionStateControllerState.Updating,i);else if(t===v.SessionStateControllerState.Updating&&i===u.SessionStateControllerAction.Fail)this.transition(v.SessionStateControllerState.Disconnecting,i);else if(t===v.SessionStateControllerState.Updating&&i===u.SessionStateControllerAction.FinishUpdating)this.transition(v.SessionStateControllerState.Connected,i);else if(t===v.SessionStateControllerState.Disconnecting&&i===u.SessionStateControllerAction.FinishDisconnecting)this.transition(v.SessionStateControllerState.NotConnected,i);else return this.canDefer(i)?(this.logger.info(`deferring transition from ${v.SessionStateControllerState[this.currentState]} with ${u.SessionStateControllerAction[i]}`),this.deferAction(i,e),g.SessionStateControllerTransitionResult.DeferredTransition):(this.logger.warn(`no transition found from ${v.SessionStateControllerState[this.currentState]} with ${u.SessionStateControllerAction[i]}`),g.SessionStateControllerTransitionResult.NoTransitionAvailable);try{e()}catch(r){return this.logger.error(`error during state ${v.SessionStateControllerState[this.currentState]} with action ${u.SessionStateControllerAction[i]}: ${r}`),this.logger.info(`rolling back transition to ${v.SessionStateControllerState[t]}`),this.currentState=t,g.SessionStateControllerTransitionResult.TransitionFailed}return this.performDeferredAction(),g.SessionStateControllerTransitionResult.Transitioned}state(){return this.currentState}transition(i,e){this.logger.info(`transitioning from ${v.SessionStateControllerState[this.currentState]} to ${v.SessionStateControllerState[i]} with ${u.SessionStateControllerAction[e]}`),this.currentState=i}deferPriority(i){switch(i){case u.SessionStateControllerAction.Disconnect:return m.SessionStateControllerDeferPriority.VeryHigh;case u.SessionStateControllerAction.Fail:return m.SessionStateControllerDeferPriority.High;case u.SessionStateControllerAction.Reconnect:return m.SessionStateControllerDeferPriority.Medium;case u.SessionStateControllerAction.Update:return m.SessionStateControllerDeferPriority.Low;default:return m.SessionStateControllerDeferPriority.DoNotDefer}}deferAction(i,e){this.deferredAction!==null&&this.deferPriority(this.deferredAction)>this.deferPriority(i)||(this.deferredAction=i,this.deferredWork=e)}canDefer(i){return this.deferPriority(i)!==m.SessionStateControllerDeferPriority.DoNotDefer&&(this.currentState===v.SessionStateControllerState.Connecting||this.currentState===v.SessionStateControllerState.Updating)}performDeferredAction(){if(!this.deferredAction)return;const i=this.deferredAction,e=this.deferredWork;this.deferredAction=null,this.deferredWork=null,this.logger.info(`performing deferred action ${u.SessionStateControllerAction[i]}`),this.perform(i,e)!==g.SessionStateControllerTransitionResult.Transitioned&&this.logger.info(`unable to perform deferred action ${u.SessionStateControllerAction[i]} in state ${v.SessionStateControllerState[this.currentState]}`)}constructor(i){this.logger=i,this.currentState=v.SessionStateControllerState.NotConnected,this.deferredAction=null,this.deferredWork=null}},"DefaultSessionStateController");l.default=s},3097552577:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerAction=void 0;var c;(function(u){u[u.Connect=0]="Connect",u[u.FinishConnecting=1]="FinishConnecting",u[u.Update=2]="Update",u[u.FinishUpdating=3]="FinishUpdating",u[u.Reconnect=4]="Reconnect",u[u.Disconnect=5]="Disconnect",u[u.Fail=6]="Fail",u[u.FinishDisconnecting=7]="FinishDisconnecting"})(c=l.SessionStateControllerAction||(l.SessionStateControllerAction={})),l.default=c},3049140029:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerDeferPriority=void 0;var c;(function(u){u[u.DoNotDefer=0]="DoNotDefer",u[u.Low=1]="Low",u[u.Medium=2]="Medium",u[u.High=3]="High",u[u.VeryHigh=4]="VeryHigh"})(c=l.SessionStateControllerDeferPriority||(l.SessionStateControllerDeferPriority={})),l.default=c},953236500:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerState=void 0;var c;(function(u){u[u.NotConnected=0]="NotConnected",u[u.Connecting=1]="Connecting",u[u.Connected=2]="Connected",u[u.Updating=3]="Updating",u[u.Disconnecting=4]="Disconnecting"})(c=l.SessionStateControllerState||(l.SessionStateControllerState={})),l.default=c},7338273141:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerTransitionResult=void 0;var c;(function(u){u[u.Transitioned=0]="Transitioned",u[u.NoTransitionAvailable=1]="NoTransitionAvailable",u[u.DeferredTransition=2]="DeferredTransition",u[u.TransitionFailed=3]="TransitionFailed"})(c=l.SessionStateControllerTransitionResult||(l.SessionStateControllerTransitionResult={})),l.default=c},7258714924:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(8351168186)),v=u(c(6393942734)),g=c(5391134031),s=c(840544383),a=u(c(8066052849)),i=u(c(5116495551)),e=u(c(2686893898)),t=c(1448262436),r=u(c(8152250765)),o=u(c(426218501));let f=n(class rd{registerObserver(p){this.logger.debug(()=>"registering signaling client observer"),this.observerQueue.add(p)}removeObserver(p){this.logger.debug(()=>"removing signaling client observer"),this.observerQueue.delete(p)}openConnection(p){this.logger.info("adding connection request to queue: "+p.url()),this.connectionRequestQueue.push(p),this.closeConnection()}pingPong(p){this.logger.debug(()=>"sending ping");const d=g.SdkSignalFrame.create();return d.type=g.SdkSignalFrame.Type.PING_PONG,d.pingPong=p,this.sendMessage(d),d.timestampMs}join(p){this.logger.info("sending join");const d=g.SdkJoinFrame.create();d.protocolVersion=2,d.flags=g.SdkJoinFlags.HAS_STREAM_UPDATE;const y=new m.default,S={platformName:y.name(),platformVersion:y.version(),clientSource:a.default.sdkName,chimeSdkVersion:a.default.sdkVersion,clientUtcOffset:s.getFormattedOffset(new Date().getTimezoneOffset())};if(p.applicationMetadata){const{appName:_,appVersion:C}=p.applicationMetadata;S.appName=_,S.appVersion=C}d.clientDetails=g.SdkClientDetails.create(S),d.audioSessionId=this.audioSessionId,d.wantsCompressedSdp=rd.CLIENT_SUPPORTS_COMPRESSION,d.disablePeriodicKeyframeRequestOnContentSender=p.disablePeriodicKeyframeRequestOnContentSender,d.serverSideNetworkAdaption=t.convertServerSideNetworkAdaptionEnumToSignaled(p.serverSideNetworkAdaption),d.supportedServerSideNetworkAdaptions=p.supportedServerSideNetworkAdaptions.map(t.convertServerSideNetworkAdaptionEnumToSignaled),d.wantsAllTemporalLayersInIndex=p.wantsAllTemporalLayersInIndex;const b=g.SdkSignalFrame.create();b.type=g.SdkSignalFrame.Type.JOIN,b.join=d,this.sendMessage(b)}subscribe(p){const d=g.SdkSubscribeFrame.create();if(d.sendStreams=[],d.sdpOffer=p.sdpOffer,p.connectionTypeHasVideo&&(d.receiveStreamIds=p.receiveStreamIds),p.audioHost&&(d.audioCheckin=p.audioCheckin,d.audioHost=p.audioHost,d.audioMuted=p.audioMuted,!p.audioCheckin)){const S=g.SdkStreamDescriptor.create();S.mediaType=g.SdkStreamMediaType.AUDIO,S.trackLabel="AmazonChimeExpressAudio",S.attendeeId=p.attendeeId,S.streamId=1,S.groupId=1,S.framerate=15,S.maxBitrateKbps=600,S.avgBitrateBps=4e5,d.sendStreams.push(S)}if(d.compressedSdpOffer=p.compressedSdpOffer,d.duplex=g.SdkStreamServiceType.RX,p.localVideoEnabled){d.duplex=g.SdkStreamServiceType.DUPLEX;for(let S=0;S<p.videoStreamDescriptions.length;S++){const b=p.videoStreamDescriptions[S].clone();b.attendeeId=p.attendeeId,d.sendStreams.push(b.toStreamDescriptor())}}p.videoSubscriptionConfiguration.length>0&&(d.videoSubscriptionConfiguration=p.videoSubscriptionConfiguration.map(this.convertSignalingClientVideoSubscriptionConfiguration));const y=g.SdkSignalFrame.create();y.type=g.SdkSignalFrame.Type.SUBSCRIBE,y.sub=d,this.sendMessage(y)}remoteVideoUpdate(p,d){const y=g.SdkRemoteVideoUpdateFrame.create();y.addedOrUpdatedVideoSubscriptions=p.map(this.convertSignalingClientVideoSubscriptionConfiguration),y.removedVideoSubscriptionMids=d;const S=g.SdkSignalFrame.create();S.type=g.SdkSignalFrame.Type.REMOTE_VIDEO_UPDATE,S.remoteVideoUpdate=y,this.sendMessage(S)}convertSignalingClientVideoSubscriptionConfiguration(p){const d=new g.SdkVideoSubscriptionConfiguration;switch(d.mid=p.mid,d.attendeeId=p.attendeeId,d.streamId=p.streamId,d.groupId=p.groupId,d.priority=p.priority,d.targetBitrateKbps=p.targetBitrateKbps,p.qualityAdaptationPreference){case i.default.Balanced:d.qualityAdaptationPreference=g.SdkVideoQualityAdaptationPreference.BALANCED;break;case i.default.MaintainFramerate:d.qualityAdaptationPreference=g.SdkVideoQualityAdaptationPreference.MAINTAIN_FRAMERATE;break;case i.default.MaintainResolution:d.qualityAdaptationPreference=g.SdkVideoQualityAdaptationPreference.MAINTAIN_RESOLUTION;break;default:d.qualityAdaptationPreference=g.SdkVideoQualityAdaptationPreference.BALANCED}return d}leave(){const p=g.SdkSignalFrame.create();p.type=g.SdkSignalFrame.Type.LEAVE,p.leave=g.SdkLeaveFrame.create(),this.sendMessage(p),this.logger.debug(()=>"sent leave")}sendClientMetrics(p){const d=g.SdkSignalFrame.create();d.type=g.SdkSignalFrame.Type.CLIENT_METRIC,d.clientMetric=p,this.sendMessage(d)}sendDataMessage(p){const d=g.SdkSignalFrame.create();d.type=g.SdkSignalFrame.Type.DATA_MESSAGE,d.dataMessage=p,this.sendMessage(d)}closeConnection(){var p,d;if(this.webSocket.readyState()!==e.default.None&&this.webSocket.readyState()!==e.default.Closed){this.isClosing=!0,this.sendEvent(new r.default(this,o.default.WebSocketClosing,null));const y=new v.default(rd.CLOSE_EVENT_TIMEOUT_MS),S=n(b=>{var _,C;(C=(_=this.webSocket).removeEventListener)===null||C===void 0||C.call(_,"close",S),y.stop(),this.closeEventHandler(b)},"handler");(d=(p=this.webSocket).removeEventListener)===null||d===void 0||d.call(p,"close",this.closeEventHandler),this.webSocket.addEventListener("close",S),y.start(()=>{S(new CloseEvent("close",{wasClean:!1,code:1006,reason:"",bubbles:!1}))}),this.webSocket.close(),this.deactivatePageUnloadHandler()}else this.logger.info("no existing signaling client connection needs closing"),this.serviceConnectionRequestQueue()}ready(){return this.webSocket.readyState()===e.default.Open&&!this.isClosing&&this.wasOpened}mute(p){const d=g.SdkSignalFrame.create();d.type=g.SdkSignalFrame.Type.AUDIO_CONTROL;const y=g.SdkAudioControlFrame.create();y.muted=p,d.audioControl=y,this.sendMessage(d)}pause(p){const d=g.SdkSignalFrame.create();d.type=g.SdkSignalFrame.Type.PAUSE,d.pause=g.SdkPauseResumeFrame.create(),d.pause.streamIds=p,this.sendMessage(d)}resume(p){const d=g.SdkSignalFrame.create();d.type=g.SdkSignalFrame.Type.RESUME,d.pause=g.SdkPauseResumeFrame.create(),d.pause.streamIds=p,this.sendMessage(d)}resetConnection(){this.webSocket.destroy(),this.wasOpened=!1}sendMessage(p){p.timestampMs=Date.now(),this.logger.debug(()=>`sending: ${JSON.stringify(p)}`);const d=this.prependWithFrameTypeRTC(g.SdkSignalFrame.encode(p).finish());if(this.ready()){if(!this.webSocket.send(d)){this.sendEvent(new r.default(this,o.default.WebSocketSendMessageFailure,null));return}this.sendEvent(new r.default(this,o.default.WebSocketSentMessage,null))}else this.sendEvent(new r.default(this,o.default.WebSocketSkippedMessage,null))}receiveMessage(p){let d;try{d=g.SdkSignalFrame.decode(p)}catch{this.logger.info(`failed to decode: ${p}`),this.sendEvent(new r.default(this,o.default.ProtocolDecodeFailure,null));return}this.logger.debug(()=>`received: ${JSON.stringify(d)}`),this.webSocket.readyState()===e.default.Open?this.sendEvent(new r.default(this,o.default.ReceivedSignalFrame,d)):this.logger.info(`skipping notification of message since WebSocket is not open: ${JSON.stringify(d)}`)}stripFrameTypeRTC(p){const d=p[0];return d!==rd.FRAME_TYPE_RTC&&d!==2&&this.logger.warn(`expected FrameTypeRTC for message but got ${d}`),p.slice(1)}prependWithFrameTypeRTC(p){const d=new Uint8Array(p.length+1);return d[0]=rd.FRAME_TYPE_RTC,d.set(p,1),d}serviceConnectionRequestQueue(){if(this.connectionRequestQueue.length===0){this.logger.info("no connection requests to service");return}const p=this.connectionRequestQueue.shift();this.logger.info(`opening connection to ${p.url()}`),this.isClosing=!1,this.webSocket.create(p.url(),p.protocols()),this.setUpEventListeners(),this.sendEvent(new r.default(this,o.default.WebSocketConnecting,null))}sendEvent(p){switch(p.type){case o.default.WebSocketMessage:case o.default.ReceivedSignalFrame:case o.default.WebSocketSentMessage:this.logger.debug(()=>`notifying event: ${o.default[p.type]}`);break;case o.default.WebSocketSkippedMessage:this.logger.debug(()=>`notifying event: ${o.default[p.type]}, websocket state=${e.default[this.webSocket.readyState()]}`);break;default:this.logger.info(`notifying event: ${o.default[p.type]}`);break}for(const d of this.observerQueue)d.handleSignalingClientEvent(p)}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.activatePageUnloadHandler(),this.wasOpened=!0,this.sendEvent(new r.default(this,o.default.WebSocketOpen,null))}),this.webSocket.addEventListener("message",p=>{this.sendEvent(new r.default(this,o.default.WebSocketMessage,null)),this.receiveMessage(this.stripFrameTypeRTC(new Uint8Array(p.data)))}),this.webSocket.addEventListener("close",this.closeEventHandler),this.webSocket.addEventListener("error",()=>{if(this.isClosing&&!this.wasOpened){this.logger.info("ignoring error closing signaling while connecting");return}this.wasOpened?(this.logger.error("received error while connected"),this.sendEvent(new r.default(this,o.default.WebSocketError,null))):(this.logger.error("failed to connect"),this.sendEvent(new r.default(this,o.default.WebSocketFailed,null)))})}activatePageUnloadHandler(){this.unloadHandler=()=>{this.leave()};const p=c.g;p.window&&p.window.addEventListener&&window.addEventListener("unload",this.unloadHandler)}deactivatePageUnloadHandler(){const p=c.g;p.window&&p.window.removeEventListener&&window.removeEventListener("unload",this.unloadHandler),this.unloadHandler=null}generateNewAudioSessionId(){const p=new Uint32Array(1);return s.getRandomValues(p),p[0]}promoteToPrimaryMeeting(p){const d=g.SdkMeetingSessionCredentials.create();d.attendeeId=p.attendeeId,d.externalUserId=p.externalUserId,d.joinToken=p.joinToken;const y=g.SdkPrimaryMeetingJoinFrame.create();y.credentials=d;const S=g.SdkSignalFrame.create();S.type=g.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN,S.primaryMeetingJoin=y,this.sendMessage(S)}demoteFromPrimaryMeeting(){const p=g.SdkPrimaryMeetingLeaveFrame.create(),d=g.SdkSignalFrame.create();d.type=g.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE,d.primaryMeetingLeave=p,this.sendMessage(d)}constructor(p,d){this.webSocket=p,this.logger=d,this.unloadHandler=null,this.closeEventHandler=y=>{this.deactivatePageUnloadHandler(),this.resetConnection(),this.sendEvent(new r.default(this,o.default.WebSocketClosed,null,y.code,y.reason)),this.serviceConnectionRequestQueue()},this.observerQueue=new Set,this.connectionRequestQueue=[],this.resetConnection(),this.logger.debug(()=>"signaling client init"),this.audioSessionId=this.generateNewAudioSessionId()}},"DefaultSignalingClient");l.default=f,f.FRAME_TYPE_RTC=5,f.CLOSE_EVENT_TIMEOUT_MS=2e3,f.CLIENT_SUPPORTS_COMPRESSION=!0},1448262436:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertServerSideNetworkAdaptionEnumToSignaled=l.convertServerSideNetworkAdaptionEnumFromSignaled=l.serverSideNetworkAdaptionIsNoneOrDefault=l.ServerSideNetworkAdaption=void 0;const u=c(5391134031);var m;(function(a){a[a.Default=0]="Default",a[a.None=1]="None",a[a.BandwidthProbing=2]="BandwidthProbing",a[a.BandwidthProbingAndRemoteVideoQualityAdaption=3]="BandwidthProbingAndRemoteVideoQualityAdaption"})(m=l.ServerSideNetworkAdaption||(l.ServerSideNetworkAdaption={})),l.default=m;function v(a){return a===m.None||a===m.Default}n(v,"serverSideNetworkAdaptionIsNoneOrDefault"),l.serverSideNetworkAdaptionIsNoneOrDefault=v;function g(a){switch(a){case u.SdkServerSideNetworkAdaption.DEFAULT:return m.Default;case u.SdkServerSideNetworkAdaption.NONE:return m.None;case u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING:return m.BandwidthProbing;case u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION:return m.BandwidthProbingAndRemoteVideoQualityAdaption}}n(g,"convertServerSideNetworkAdaptionEnumFromSignaled"),l.convertServerSideNetworkAdaptionEnumFromSignaled=g;function s(a){switch(a){case m.Default:return u.SdkServerSideNetworkAdaption.DEFAULT;case m.None:return u.SdkServerSideNetworkAdaption.NONE;case m.BandwidthProbing:return u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING;case m.BandwidthProbingAndRemoteVideoQualityAdaption:return u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION}}n(s,"convertServerSideNetworkAdaptionEnumToSignaled"),l.convertServerSideNetworkAdaptionEnumToSignaled=s},893025464:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{url(){return this.signalingURL+"?X-Chime-Control-Protocol-Version=3&X-Amzn-Chime-Send-Close-On-Error=1"}protocols(){return["_aws_wt_session",this.joinToken]}constructor(m,v){this.signalingURL=m,this.joinToken=v}},"SignalingClientConnectionRequest");l.default=c},8152250765:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(426218501));let v=n(class{isConnectionTerminated(){switch(this.type){case m.default.WebSocketFailed:case m.default.WebSocketError:case m.default.WebSocketClosing:case m.default.WebSocketClosed:return!0;default:return!1}}constructor(s,a,i,e,t){this.client=s,this.type=a,this.message=i,this.closeCode=e,this.closeReason=t,this.timestampMs=Date.now()}},"SignalingClientEvent");l.default=v},426218501:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SignalingClientEventType=void 0;var c;(function(u){u[u.WebSocketConnecting=0]="WebSocketConnecting",u[u.WebSocketOpen=1]="WebSocketOpen",u[u.WebSocketError=2]="WebSocketError",u[u.WebSocketClosing=3]="WebSocketClosing",u[u.WebSocketClosed=4]="WebSocketClosed",u[u.WebSocketFailed=5]="WebSocketFailed",u[u.WebSocketMessage=6]="WebSocketMessage",u[u.WebSocketSendMessageFailure=7]="WebSocketSendMessageFailure",u[u.WebSocketSentMessage=8]="WebSocketSentMessage",u[u.ProtocolDecodeFailure=9]="ProtocolDecodeFailure",u[u.ReceivedSignalFrame=10]="ReceivedSignalFrame",u[u.WebSocketSkippedMessage=11]="WebSocketSkippedMessage"})(c=l.SignalingClientEventType||(l.SignalingClientEventType={})),l.default=c},9315300759:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(1448262436));let v=n(class{constructor(s){this.applicationMetadata=s,this.serverSideNetworkAdaption=m.default.Default,this.supportedServerSideNetworkAdaptions=[],this.wantsAllTemporalLayersInIndex=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1}},"SignalingClientJoin");l.default=v},1026405281:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{constructor(m,v,g,s,a,i,e,t,r,o){this.attendeeId=m,this.sdpOffer=v,this.audioHost=g,this.audioMuted=s,this.audioCheckin=a,this.receiveStreamIds=i,this.localVideoEnabled=e,this.videoStreamDescriptions=t,this.connectionTypeHasVideo=r,this.compressedSdpOffer=o,this.videoSubscriptionConfiguration=[]}},"SignalingClientSubscribe");l.default=c},4983545831:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{equals(m){return m!==void 0&&this.mid===m.mid&&this.attendeeId===m.attendeeId&&this.streamId===m.streamId&&this.groupId===m.groupId&&this.priority===m.priority&&this.targetBitrateKbps===m.targetBitrateKbps&&this.qualityAdaptationPreference===m.qualityAdaptationPreference}},"SignalingClientVideoSubscriptionConfiguration");l.default=c},5391134031:(H,l,c)=>{"use strict";var u=c(7232944804),m=u.Reader,v=u.Writer,g=u.util,s=u.roots.default||(u.roots.default={});s.SdkSignalFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkSignalFrame"),a.prototype.timestampMs=g.Long?g.Long.fromBits(0,0,!0):0,a.prototype.type=1,a.prototype.error=null,a.prototype.join=null,a.prototype.joinack=null,a.prototype.sub=null,a.prototype.suback=null,a.prototype.index=null,a.prototype.pause=null,a.prototype.leave=null,a.prototype.leaveAck=null,a.prototype.bitrates=null,a.prototype.audioControl=null,a.prototype.audioMetadata=null,a.prototype.audioStreamIdInfo=null,a.prototype.pingPong=null,a.prototype.audioStatus=null,a.prototype.clientMetric=null,a.prototype.dataMessage=null,a.prototype.remoteVideoUpdate=null,a.prototype.primaryMeetingJoin=null,a.prototype.primaryMeetingJoinAck=null,a.prototype.primaryMeetingLeave=null,a.prototype.notification=null,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),t.uint32(8).uint64(e.timestampMs),t.uint32(16).int32(e.type),e.error!=null&&Object.hasOwnProperty.call(e,"error")&&s.SdkErrorFrame.encode(e.error,t.uint32(26).fork()).ldelim(),e.join!=null&&Object.hasOwnProperty.call(e,"join")&&s.SdkJoinFrame.encode(e.join,t.uint32(34).fork()).ldelim(),e.joinack!=null&&Object.hasOwnProperty.call(e,"joinack")&&s.SdkJoinAckFrame.encode(e.joinack,t.uint32(42).fork()).ldelim(),e.sub!=null&&Object.hasOwnProperty.call(e,"sub")&&s.SdkSubscribeFrame.encode(e.sub,t.uint32(50).fork()).ldelim(),e.suback!=null&&Object.hasOwnProperty.call(e,"suback")&&s.SdkSubscribeAckFrame.encode(e.suback,t.uint32(58).fork()).ldelim(),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&s.SdkIndexFrame.encode(e.index,t.uint32(66).fork()).ldelim(),e.pause!=null&&Object.hasOwnProperty.call(e,"pause")&&s.SdkPauseResumeFrame.encode(e.pause,t.uint32(82).fork()).ldelim(),e.leave!=null&&Object.hasOwnProperty.call(e,"leave")&&s.SdkLeaveFrame.encode(e.leave,t.uint32(90).fork()).ldelim(),e.leaveAck!=null&&Object.hasOwnProperty.call(e,"leaveAck")&&s.SdkLeaveAckFrame.encode(e.leaveAck,t.uint32(98).fork()).ldelim(),e.bitrates!=null&&Object.hasOwnProperty.call(e,"bitrates")&&s.SdkBitrateFrame.encode(e.bitrates,t.uint32(114).fork()).ldelim(),e.audioControl!=null&&Object.hasOwnProperty.call(e,"audioControl")&&s.SdkAudioControlFrame.encode(e.audioControl,t.uint32(138).fork()).ldelim(),e.audioMetadata!=null&&Object.hasOwnProperty.call(e,"audioMetadata")&&s.SdkAudioMetadataFrame.encode(e.audioMetadata,t.uint32(146).fork()).ldelim(),e.audioStreamIdInfo!=null&&Object.hasOwnProperty.call(e,"audioStreamIdInfo")&&s.SdkAudioStreamIdInfoFrame.encode(e.audioStreamIdInfo,t.uint32(154).fork()).ldelim(),e.pingPong!=null&&Object.hasOwnProperty.call(e,"pingPong")&&s.SdkPingPongFrame.encode(e.pingPong,t.uint32(162).fork()).ldelim(),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&s.SdkAudioStatusFrame.encode(e.audioStatus,t.uint32(170).fork()).ldelim(),e.clientMetric!=null&&Object.hasOwnProperty.call(e,"clientMetric")&&s.SdkClientMetricFrame.encode(e.clientMetric,t.uint32(178).fork()).ldelim(),e.dataMessage!=null&&Object.hasOwnProperty.call(e,"dataMessage")&&s.SdkDataMessageFrame.encode(e.dataMessage,t.uint32(186).fork()).ldelim(),e.remoteVideoUpdate!=null&&Object.hasOwnProperty.call(e,"remoteVideoUpdate")&&s.SdkRemoteVideoUpdateFrame.encode(e.remoteVideoUpdate,t.uint32(202).fork()).ldelim(),e.primaryMeetingJoin!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoin")&&s.SdkPrimaryMeetingJoinFrame.encode(e.primaryMeetingJoin,t.uint32(210).fork()).ldelim(),e.primaryMeetingJoinAck!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoinAck")&&s.SdkPrimaryMeetingJoinAckFrame.encode(e.primaryMeetingJoinAck,t.uint32(218).fork()).ldelim(),e.primaryMeetingLeave!=null&&Object.hasOwnProperty.call(e,"primaryMeetingLeave")&&s.SdkPrimaryMeetingLeaveFrame.encode(e.primaryMeetingLeave,t.uint32(226).fork()).ldelim(),e.notification!=null&&Object.hasOwnProperty.call(e,"notification")&&s.SdkNotificationFrame.encode(e.notification,t.uint32(282).fork()).ldelim(),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkSignalFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.timestampMs=e.uint64();break}case 2:{o.type=e.int32();break}case 3:{o.error=s.SdkErrorFrame.decode(e,e.uint32());break}case 4:{o.join=s.SdkJoinFrame.decode(e,e.uint32());break}case 5:{o.joinack=s.SdkJoinAckFrame.decode(e,e.uint32());break}case 6:{o.sub=s.SdkSubscribeFrame.decode(e,e.uint32());break}case 7:{o.suback=s.SdkSubscribeAckFrame.decode(e,e.uint32());break}case 8:{o.index=s.SdkIndexFrame.decode(e,e.uint32());break}case 10:{o.pause=s.SdkPauseResumeFrame.decode(e,e.uint32());break}case 11:{o.leave=s.SdkLeaveFrame.decode(e,e.uint32());break}case 12:{o.leaveAck=s.SdkLeaveAckFrame.decode(e,e.uint32());break}case 14:{o.bitrates=s.SdkBitrateFrame.decode(e,e.uint32());break}case 17:{o.audioControl=s.SdkAudioControlFrame.decode(e,e.uint32());break}case 18:{o.audioMetadata=s.SdkAudioMetadataFrame.decode(e,e.uint32());break}case 19:{o.audioStreamIdInfo=s.SdkAudioStreamIdInfoFrame.decode(e,e.uint32());break}case 20:{o.pingPong=s.SdkPingPongFrame.decode(e,e.uint32());break}case 21:{o.audioStatus=s.SdkAudioStatusFrame.decode(e,e.uint32());break}case 22:{o.clientMetric=s.SdkClientMetricFrame.decode(e,e.uint32());break}case 23:{o.dataMessage=s.SdkDataMessageFrame.decode(e,e.uint32());break}case 25:{o.remoteVideoUpdate=s.SdkRemoteVideoUpdateFrame.decode(e,e.uint32());break}case 26:{o.primaryMeetingJoin=s.SdkPrimaryMeetingJoinFrame.decode(e,e.uint32());break}case 27:{o.primaryMeetingJoinAck=s.SdkPrimaryMeetingJoinAckFrame.decode(e,e.uint32());break}case 28:{o.primaryMeetingLeave=s.SdkPrimaryMeetingLeaveFrame.decode(e,e.uint32());break}case 35:{o.notification=s.SdkNotificationFrame.decode(e,e.uint32());break}default:e.skipType(f&7);break}}if(!o.hasOwnProperty("timestampMs"))throw g.ProtocolError("missing required 'timestampMs'",{instance:o});if(!o.hasOwnProperty("type"))throw g.ProtocolError("missing required 'type'",{instance:o});return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(!g.isInteger(e.timestampMs)&&!(e.timestampMs&&g.isInteger(e.timestampMs.low)&&g.isInteger(e.timestampMs.high)))return"timestampMs: integer|Long expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 7:case 8:case 9:case 10:case 13:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 34:break}if(e.error!=null&&e.hasOwnProperty("error")){var t=s.SdkErrorFrame.verify(e.error);if(t)return"error."+t}if(e.join!=null&&e.hasOwnProperty("join")){var t=s.SdkJoinFrame.verify(e.join);if(t)return"join."+t}if(e.joinack!=null&&e.hasOwnProperty("joinack")){var t=s.SdkJoinAckFrame.verify(e.joinack);if(t)return"joinack."+t}if(e.sub!=null&&e.hasOwnProperty("sub")){var t=s.SdkSubscribeFrame.verify(e.sub);if(t)return"sub."+t}if(e.suback!=null&&e.hasOwnProperty("suback")){var t=s.SdkSubscribeAckFrame.verify(e.suback);if(t)return"suback."+t}if(e.index!=null&&e.hasOwnProperty("index")){var t=s.SdkIndexFrame.verify(e.index);if(t)return"index."+t}if(e.pause!=null&&e.hasOwnProperty("pause")){var t=s.SdkPauseResumeFrame.verify(e.pause);if(t)return"pause."+t}if(e.leave!=null&&e.hasOwnProperty("leave")){var t=s.SdkLeaveFrame.verify(e.leave);if(t)return"leave."+t}if(e.leaveAck!=null&&e.hasOwnProperty("leaveAck")){var t=s.SdkLeaveAckFrame.verify(e.leaveAck);if(t)return"leaveAck."+t}if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){var t=s.SdkBitrateFrame.verify(e.bitrates);if(t)return"bitrates."+t}if(e.audioControl!=null&&e.hasOwnProperty("audioControl")){var t=s.SdkAudioControlFrame.verify(e.audioControl);if(t)return"audioControl."+t}if(e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")){var t=s.SdkAudioMetadataFrame.verify(e.audioMetadata);if(t)return"audioMetadata."+t}if(e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")){var t=s.SdkAudioStreamIdInfoFrame.verify(e.audioStreamIdInfo);if(t)return"audioStreamIdInfo."+t}if(e.pingPong!=null&&e.hasOwnProperty("pingPong")){var t=s.SdkPingPongFrame.verify(e.pingPong);if(t)return"pingPong."+t}if(e.audioStatus!=null&&e.hasOwnProperty("audioStatus")){var t=s.SdkAudioStatusFrame.verify(e.audioStatus);if(t)return"audioStatus."+t}if(e.clientMetric!=null&&e.hasOwnProperty("clientMetric")){var t=s.SdkClientMetricFrame.verify(e.clientMetric);if(t)return"clientMetric."+t}if(e.dataMessage!=null&&e.hasOwnProperty("dataMessage")){var t=s.SdkDataMessageFrame.verify(e.dataMessage);if(t)return"dataMessage."+t}if(e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")){var t=s.SdkRemoteVideoUpdateFrame.verify(e.remoteVideoUpdate);if(t)return"remoteVideoUpdate."+t}if(e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")){var t=s.SdkPrimaryMeetingJoinFrame.verify(e.primaryMeetingJoin);if(t)return"primaryMeetingJoin."+t}if(e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")){var t=s.SdkPrimaryMeetingJoinAckFrame.verify(e.primaryMeetingJoinAck);if(t)return"primaryMeetingJoinAck."+t}if(e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")){var t=s.SdkPrimaryMeetingLeaveFrame.verify(e.primaryMeetingLeave);if(t)return"primaryMeetingLeave."+t}if(e.notification!=null&&e.hasOwnProperty("notification")){var t=s.SdkNotificationFrame.verify(e.notification);if(t)return"notification."+t}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkSignalFrame)return e;var t=new s.SdkSignalFrame;switch(e.timestampMs!=null&&(g.Long?(t.timestampMs=g.Long.fromValue(e.timestampMs)).unsigned=!0:typeof e.timestampMs=="string"?t.timestampMs=parseInt(e.timestampMs,10):typeof e.timestampMs=="number"?t.timestampMs=e.timestampMs:typeof e.timestampMs=="object"&&(t.timestampMs=new g.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0))),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"JOIN":case 1:t.type=1;break;case"JOIN_ACK":case 2:t.type=2;break;case"SUBSCRIBE":case 3:t.type=3;break;case"SUBSCRIBE_ACK":case 4:t.type=4;break;case"INDEX":case 5:t.type=5;break;case"PAUSE":case 7:t.type=7;break;case"RESUME":case 8:t.type=8;break;case"LEAVE":case 9:t.type=9;break;case"LEAVE_ACK":case 10:t.type=10;break;case"BITRATES":case 13:t.type=13;break;case"AUDIO_CONTROL":case 16:t.type=16;break;case"AUDIO_METADATA":case 17:t.type=17;break;case"AUDIO_STREAM_ID_INFO":case 18:t.type=18;break;case"PING_PONG":case 19:t.type=19;break;case"AUDIO_STATUS":case 20:t.type=20;break;case"CLIENT_METRIC":case 21:t.type=21;break;case"DATA_MESSAGE":case 22:t.type=22;break;case"REMOTE_VIDEO_UPDATE":case 24:t.type=24;break;case"PRIMARY_MEETING_JOIN":case 25:t.type=25;break;case"PRIMARY_MEETING_JOIN_ACK":case 26:t.type=26;break;case"PRIMARY_MEETING_LEAVE":case 27:t.type=27;break;case"NOTIFICATION":case 34:t.type=34;break}if(e.error!=null){if(typeof e.error!="object")throw TypeError(".SdkSignalFrame.error: object expected");t.error=s.SdkErrorFrame.fromObject(e.error)}if(e.join!=null){if(typeof e.join!="object")throw TypeError(".SdkSignalFrame.join: object expected");t.join=s.SdkJoinFrame.fromObject(e.join)}if(e.joinack!=null){if(typeof e.joinack!="object")throw TypeError(".SdkSignalFrame.joinack: object expected");t.joinack=s.SdkJoinAckFrame.fromObject(e.joinack)}if(e.sub!=null){if(typeof e.sub!="object")throw TypeError(".SdkSignalFrame.sub: object expected");t.sub=s.SdkSubscribeFrame.fromObject(e.sub)}if(e.suback!=null){if(typeof e.suback!="object")throw TypeError(".SdkSignalFrame.suback: object expected");t.suback=s.SdkSubscribeAckFrame.fromObject(e.suback)}if(e.index!=null){if(typeof e.index!="object")throw TypeError(".SdkSignalFrame.index: object expected");t.index=s.SdkIndexFrame.fromObject(e.index)}if(e.pause!=null){if(typeof e.pause!="object")throw TypeError(".SdkSignalFrame.pause: object expected");t.pause=s.SdkPauseResumeFrame.fromObject(e.pause)}if(e.leave!=null){if(typeof e.leave!="object")throw TypeError(".SdkSignalFrame.leave: object expected");t.leave=s.SdkLeaveFrame.fromObject(e.leave)}if(e.leaveAck!=null){if(typeof e.leaveAck!="object")throw TypeError(".SdkSignalFrame.leaveAck: object expected");t.leaveAck=s.SdkLeaveAckFrame.fromObject(e.leaveAck)}if(e.bitrates!=null){if(typeof e.bitrates!="object")throw TypeError(".SdkSignalFrame.bitrates: object expected");t.bitrates=s.SdkBitrateFrame.fromObject(e.bitrates)}if(e.audioControl!=null){if(typeof e.audioControl!="object")throw TypeError(".SdkSignalFrame.audioControl: object expected");t.audioControl=s.SdkAudioControlFrame.fromObject(e.audioControl)}if(e.audioMetadata!=null){if(typeof e.audioMetadata!="object")throw TypeError(".SdkSignalFrame.audioMetadata: object expected");t.audioMetadata=s.SdkAudioMetadataFrame.fromObject(e.audioMetadata)}if(e.audioStreamIdInfo!=null){if(typeof e.audioStreamIdInfo!="object")throw TypeError(".SdkSignalFrame.audioStreamIdInfo: object expected");t.audioStreamIdInfo=s.SdkAudioStreamIdInfoFrame.fromObject(e.audioStreamIdInfo)}if(e.pingPong!=null){if(typeof e.pingPong!="object")throw TypeError(".SdkSignalFrame.pingPong: object expected");t.pingPong=s.SdkPingPongFrame.fromObject(e.pingPong)}if(e.audioStatus!=null){if(typeof e.audioStatus!="object")throw TypeError(".SdkSignalFrame.audioStatus: object expected");t.audioStatus=s.SdkAudioStatusFrame.fromObject(e.audioStatus)}if(e.clientMetric!=null){if(typeof e.clientMetric!="object")throw TypeError(".SdkSignalFrame.clientMetric: object expected");t.clientMetric=s.SdkClientMetricFrame.fromObject(e.clientMetric)}if(e.dataMessage!=null){if(typeof e.dataMessage!="object")throw TypeError(".SdkSignalFrame.dataMessage: object expected");t.dataMessage=s.SdkDataMessageFrame.fromObject(e.dataMessage)}if(e.remoteVideoUpdate!=null){if(typeof e.remoteVideoUpdate!="object")throw TypeError(".SdkSignalFrame.remoteVideoUpdate: object expected");t.remoteVideoUpdate=s.SdkRemoteVideoUpdateFrame.fromObject(e.remoteVideoUpdate)}if(e.primaryMeetingJoin!=null){if(typeof e.primaryMeetingJoin!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoin: object expected");t.primaryMeetingJoin=s.SdkPrimaryMeetingJoinFrame.fromObject(e.primaryMeetingJoin)}if(e.primaryMeetingJoinAck!=null){if(typeof e.primaryMeetingJoinAck!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoinAck: object expected");t.primaryMeetingJoinAck=s.SdkPrimaryMeetingJoinAckFrame.fromObject(e.primaryMeetingJoinAck)}if(e.primaryMeetingLeave!=null){if(typeof e.primaryMeetingLeave!="object")throw TypeError(".SdkSignalFrame.primaryMeetingLeave: object expected");t.primaryMeetingLeave=s.SdkPrimaryMeetingLeaveFrame.fromObject(e.primaryMeetingLeave)}if(e.notification!=null){if(typeof e.notification!="object")throw TypeError(".SdkSignalFrame.notification: object expected");t.notification=s.SdkNotificationFrame.fromObject(e.notification)}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if(t.defaults){if(g.Long){var o=new g.Long(0,0,!0);r.timestampMs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.timestampMs=t.longs===String?"0":0;r.type=t.enums===String?"JOIN":1,r.error=null,r.join=null,r.joinack=null,r.sub=null,r.suback=null,r.index=null,r.pause=null,r.leave=null,r.leaveAck=null,r.bitrates=null,r.audioControl=null,r.audioMetadata=null,r.audioStreamIdInfo=null,r.pingPong=null,r.audioStatus=null,r.clientMetric=null,r.dataMessage=null,r.remoteVideoUpdate=null,r.primaryMeetingJoin=null,r.primaryMeetingJoinAck=null,r.primaryMeetingLeave=null,r.notification=null}return e.timestampMs!=null&&e.hasOwnProperty("timestampMs")&&(typeof e.timestampMs=="number"?r.timestampMs=t.longs===String?String(e.timestampMs):e.timestampMs:r.timestampMs=t.longs===String?g.Long.prototype.toString.call(e.timestampMs):t.longs===Number?new g.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0):e.timestampMs),e.type!=null&&e.hasOwnProperty("type")&&(r.type=t.enums===String?s.SdkSignalFrame.Type[e.type]===void 0?e.type:s.SdkSignalFrame.Type[e.type]:e.type),e.error!=null&&e.hasOwnProperty("error")&&(r.error=s.SdkErrorFrame.toObject(e.error,t)),e.join!=null&&e.hasOwnProperty("join")&&(r.join=s.SdkJoinFrame.toObject(e.join,t)),e.joinack!=null&&e.hasOwnProperty("joinack")&&(r.joinack=s.SdkJoinAckFrame.toObject(e.joinack,t)),e.sub!=null&&e.hasOwnProperty("sub")&&(r.sub=s.SdkSubscribeFrame.toObject(e.sub,t)),e.suback!=null&&e.hasOwnProperty("suback")&&(r.suback=s.SdkSubscribeAckFrame.toObject(e.suback,t)),e.index!=null&&e.hasOwnProperty("index")&&(r.index=s.SdkIndexFrame.toObject(e.index,t)),e.pause!=null&&e.hasOwnProperty("pause")&&(r.pause=s.SdkPauseResumeFrame.toObject(e.pause,t)),e.leave!=null&&e.hasOwnProperty("leave")&&(r.leave=s.SdkLeaveFrame.toObject(e.leave,t)),e.leaveAck!=null&&e.hasOwnProperty("leaveAck")&&(r.leaveAck=s.SdkLeaveAckFrame.toObject(e.leaveAck,t)),e.bitrates!=null&&e.hasOwnProperty("bitrates")&&(r.bitrates=s.SdkBitrateFrame.toObject(e.bitrates,t)),e.audioControl!=null&&e.hasOwnProperty("audioControl")&&(r.audioControl=s.SdkAudioControlFrame.toObject(e.audioControl,t)),e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")&&(r.audioMetadata=s.SdkAudioMetadataFrame.toObject(e.audioMetadata,t)),e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")&&(r.audioStreamIdInfo=s.SdkAudioStreamIdInfoFrame.toObject(e.audioStreamIdInfo,t)),e.pingPong!=null&&e.hasOwnProperty("pingPong")&&(r.pingPong=s.SdkPingPongFrame.toObject(e.pingPong,t)),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(r.audioStatus=s.SdkAudioStatusFrame.toObject(e.audioStatus,t)),e.clientMetric!=null&&e.hasOwnProperty("clientMetric")&&(r.clientMetric=s.SdkClientMetricFrame.toObject(e.clientMetric,t)),e.dataMessage!=null&&e.hasOwnProperty("dataMessage")&&(r.dataMessage=s.SdkDataMessageFrame.toObject(e.dataMessage,t)),e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")&&(r.remoteVideoUpdate=s.SdkRemoteVideoUpdateFrame.toObject(e.remoteVideoUpdate,t)),e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")&&(r.primaryMeetingJoin=s.SdkPrimaryMeetingJoinFrame.toObject(e.primaryMeetingJoin,t)),e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")&&(r.primaryMeetingJoinAck=s.SdkPrimaryMeetingJoinAckFrame.toObject(e.primaryMeetingJoinAck,t)),e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")&&(r.primaryMeetingLeave=s.SdkPrimaryMeetingLeaveFrame.toObject(e.primaryMeetingLeave,t)),e.notification!=null&&e.hasOwnProperty("notification")&&(r.notification=s.SdkNotificationFrame.toObject(e.notification,t)),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSignalFrame"},"getTypeUrl"),a.Type=function(){var i={},e=Object.create(i);return e[i[1]="JOIN"]=1,e[i[2]="JOIN_ACK"]=2,e[i[3]="SUBSCRIBE"]=3,e[i[4]="SUBSCRIBE_ACK"]=4,e[i[5]="INDEX"]=5,e[i[7]="PAUSE"]=7,e[i[8]="RESUME"]=8,e[i[9]="LEAVE"]=9,e[i[10]="LEAVE_ACK"]=10,e[i[13]="BITRATES"]=13,e[i[16]="AUDIO_CONTROL"]=16,e[i[17]="AUDIO_METADATA"]=17,e[i[18]="AUDIO_STREAM_ID_INFO"]=18,e[i[19]="PING_PONG"]=19,e[i[20]="AUDIO_STATUS"]=20,e[i[21]="CLIENT_METRIC"]=21,e[i[22]="DATA_MESSAGE"]=22,e[i[24]="REMOTE_VIDEO_UPDATE"]=24,e[i[25]="PRIMARY_MEETING_JOIN"]=25,e[i[26]="PRIMARY_MEETING_JOIN_ACK"]=26,e[i[27]="PRIMARY_MEETING_LEAVE"]=27,e[i[34]="NOTIFICATION"]=34,e}(),a}(),s.SdkErrorFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkErrorFrame"),a.prototype.status=0,a.prototype.description="",a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.status!=null&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).uint32(e.status),e.description!=null&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkErrorFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.status=e.uint32();break}case 2:{o.description=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.status!=null&&e.hasOwnProperty("status")&&!g.isInteger(e.status)?"status: integer expected":e.description!=null&&e.hasOwnProperty("description")&&!g.isString(e.description)?"description: string expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkErrorFrame)return e;var t=new s.SdkErrorFrame;return e.status!=null&&(t.status=e.status>>>0),e.description!=null&&(t.description=String(e.description)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.status=0,r.description=""),e.status!=null&&e.hasOwnProperty("status")&&(r.status=e.status),e.description!=null&&e.hasOwnProperty("description")&&(r.description=e.description),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkErrorFrame"},"getTypeUrl"),a}(),s.SdkJoinFlags=function(){var a={},i=Object.create(a);return i[a[2]="HAS_STREAM_UPDATE"]=2,i[a[16]="COMPLETE_VIDEO_SOURCES_LIST"]=16,i[a[32]="EXCLUDE_SELF_CONTENT_IN_INDEX"]=32,i}(),s.SdkClientDetails=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkClientDetails"),a.prototype.appName="",a.prototype.appVersion="",a.prototype.deviceModel="",a.prototype.deviceMake="",a.prototype.platformName="",a.prototype.platformVersion="",a.prototype.clientSource="",a.prototype.chimeSdkVersion="",a.prototype.clientUtcOffset="",a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.appName!=null&&Object.hasOwnProperty.call(e,"appName")&&t.uint32(10).string(e.appName),e.appVersion!=null&&Object.hasOwnProperty.call(e,"appVersion")&&t.uint32(18).string(e.appVersion),e.deviceModel!=null&&Object.hasOwnProperty.call(e,"deviceModel")&&t.uint32(26).string(e.deviceModel),e.deviceMake!=null&&Object.hasOwnProperty.call(e,"deviceMake")&&t.uint32(34).string(e.deviceMake),e.platformName!=null&&Object.hasOwnProperty.call(e,"platformName")&&t.uint32(42).string(e.platformName),e.platformVersion!=null&&Object.hasOwnProperty.call(e,"platformVersion")&&t.uint32(50).string(e.platformVersion),e.clientSource!=null&&Object.hasOwnProperty.call(e,"clientSource")&&t.uint32(58).string(e.clientSource),e.chimeSdkVersion!=null&&Object.hasOwnProperty.call(e,"chimeSdkVersion")&&t.uint32(66).string(e.chimeSdkVersion),e.clientUtcOffset!=null&&Object.hasOwnProperty.call(e,"clientUtcOffset")&&t.uint32(74).string(e.clientUtcOffset),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkClientDetails;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.appName=e.string();break}case 2:{o.appVersion=e.string();break}case 3:{o.deviceModel=e.string();break}case 4:{o.deviceMake=e.string();break}case 5:{o.platformName=e.string();break}case 6:{o.platformVersion=e.string();break}case 7:{o.clientSource=e.string();break}case 8:{o.chimeSdkVersion=e.string();break}case 9:{o.clientUtcOffset=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.appName!=null&&e.hasOwnProperty("appName")&&!g.isString(e.appName)?"appName: string expected":e.appVersion!=null&&e.hasOwnProperty("appVersion")&&!g.isString(e.appVersion)?"appVersion: string expected":e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&!g.isString(e.deviceModel)?"deviceModel: string expected":e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&!g.isString(e.deviceMake)?"deviceMake: string expected":e.platformName!=null&&e.hasOwnProperty("platformName")&&!g.isString(e.platformName)?"platformName: string expected":e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&!g.isString(e.platformVersion)?"platformVersion: string expected":e.clientSource!=null&&e.hasOwnProperty("clientSource")&&!g.isString(e.clientSource)?"clientSource: string expected":e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&!g.isString(e.chimeSdkVersion)?"chimeSdkVersion: string expected":e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&!g.isString(e.clientUtcOffset)?"clientUtcOffset: string expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkClientDetails)return e;var t=new s.SdkClientDetails;return e.appName!=null&&(t.appName=String(e.appName)),e.appVersion!=null&&(t.appVersion=String(e.appVersion)),e.deviceModel!=null&&(t.deviceModel=String(e.deviceModel)),e.deviceMake!=null&&(t.deviceMake=String(e.deviceMake)),e.platformName!=null&&(t.platformName=String(e.platformName)),e.platformVersion!=null&&(t.platformVersion=String(e.platformVersion)),e.clientSource!=null&&(t.clientSource=String(e.clientSource)),e.chimeSdkVersion!=null&&(t.chimeSdkVersion=String(e.chimeSdkVersion)),e.clientUtcOffset!=null&&(t.clientUtcOffset=String(e.clientUtcOffset)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.appName="",r.appVersion="",r.deviceModel="",r.deviceMake="",r.platformName="",r.platformVersion="",r.clientSource="",r.chimeSdkVersion="",r.clientUtcOffset=""),e.appName!=null&&e.hasOwnProperty("appName")&&(r.appName=e.appName),e.appVersion!=null&&e.hasOwnProperty("appVersion")&&(r.appVersion=e.appVersion),e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&(r.deviceModel=e.deviceModel),e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&(r.deviceMake=e.deviceMake),e.platformName!=null&&e.hasOwnProperty("platformName")&&(r.platformName=e.platformName),e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&(r.platformVersion=e.platformVersion),e.clientSource!=null&&e.hasOwnProperty("clientSource")&&(r.clientSource=e.clientSource),e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&(r.chimeSdkVersion=e.chimeSdkVersion),e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&(r.clientUtcOffset=e.clientUtcOffset),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientDetails"},"getTypeUrl"),a}(),s.SdkServerSideNetworkAdaption=function(){var a={},i=Object.create(a);return i[a[1]="DEFAULT"]=1,i[a[2]="NONE"]=2,i[a[3]="BANDWIDTH_PROBING"]=3,i[a[4]="BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION"]=4,i}(),s.SdkJoinFrame=function(){function a(i){if(this.supportedServerSideNetworkAdaptions=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkJoinFrame"),a.prototype.protocolVersion=2,a.prototype.maxNumOfVideos=0,a.prototype.flags=0,a.prototype.clientDetails=null,a.prototype.audioSessionId=g.Long?g.Long.fromBits(0,0,!0):0,a.prototype.wantsCompressedSdp=!1,a.prototype.serverSideNetworkAdaption=1,a.prototype.supportedServerSideNetworkAdaptions=g.emptyArray,a.prototype.wantsAllTemporalLayersInIndex=!1,a.prototype.disablePeriodicKeyframeRequestOnContentSender=!1,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.protocolVersion!=null&&Object.hasOwnProperty.call(e,"protocolVersion")&&t.uint32(8).uint32(e.protocolVersion),e.maxNumOfVideos!=null&&Object.hasOwnProperty.call(e,"maxNumOfVideos")&&t.uint32(16).uint32(e.maxNumOfVideos),e.flags!=null&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(24).uint32(e.flags),e.clientDetails!=null&&Object.hasOwnProperty.call(e,"clientDetails")&&s.SdkClientDetails.encode(e.clientDetails,t.uint32(34).fork()).ldelim(),e.audioSessionId!=null&&Object.hasOwnProperty.call(e,"audioSessionId")&&t.uint32(48).uint64(e.audioSessionId),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(56).bool(e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"serverSideNetworkAdaption")&&t.uint32(80).int32(e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions!=null&&e.supportedServerSideNetworkAdaptions.length)for(var r=0;r<e.supportedServerSideNetworkAdaptions.length;++r)t.uint32(88).int32(e.supportedServerSideNetworkAdaptions[r]);return e.wantsAllTemporalLayersInIndex!=null&&Object.hasOwnProperty.call(e,"wantsAllTemporalLayersInIndex")&&t.uint32(96).bool(e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&Object.hasOwnProperty.call(e,"disablePeriodicKeyframeRequestOnContentSender")&&t.uint32(104).bool(e.disablePeriodicKeyframeRequestOnContentSender),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkJoinFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.protocolVersion=e.uint32();break}case 2:{o.maxNumOfVideos=e.uint32();break}case 3:{o.flags=e.uint32();break}case 4:{o.clientDetails=s.SdkClientDetails.decode(e,e.uint32());break}case 6:{o.audioSessionId=e.uint64();break}case 7:{o.wantsCompressedSdp=e.bool();break}case 10:{o.serverSideNetworkAdaption=e.int32();break}case 11:{if(o.supportedServerSideNetworkAdaptions&&o.supportedServerSideNetworkAdaptions.length||(o.supportedServerSideNetworkAdaptions=[]),(f&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.supportedServerSideNetworkAdaptions.push(e.int32());else o.supportedServerSideNetworkAdaptions.push(e.int32());break}case 12:{o.wantsAllTemporalLayersInIndex=e.bool();break}case 13:{o.disablePeriodicKeyframeRequestOnContentSender=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&!g.isInteger(e.protocolVersion))return"protocolVersion: integer expected";if(e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&!g.isInteger(e.maxNumOfVideos))return"maxNumOfVideos: integer expected";if(e.flags!=null&&e.hasOwnProperty("flags")&&!g.isInteger(e.flags))return"flags: integer expected";if(e.clientDetails!=null&&e.hasOwnProperty("clientDetails")){var t=s.SdkClientDetails.verify(e.clientDetails);if(t)return"clientDetails."+t}if(e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&!g.isInteger(e.audioSessionId)&&!(e.audioSessionId&&g.isInteger(e.audioSessionId.low)&&g.isInteger(e.audioSessionId.high)))return"audioSessionId: integer|Long expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption"))switch(e.serverSideNetworkAdaption){default:return"serverSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}if(e.supportedServerSideNetworkAdaptions!=null&&e.hasOwnProperty("supportedServerSideNetworkAdaptions")){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))return"supportedServerSideNetworkAdaptions: array expected";for(var r=0;r<e.supportedServerSideNetworkAdaptions.length;++r)switch(e.supportedServerSideNetworkAdaptions[r]){default:return"supportedServerSideNetworkAdaptions: enum value[] expected";case 1:case 2:case 3:case 4:break}}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&typeof e.wantsAllTemporalLayersInIndex!="boolean"?"wantsAllTemporalLayersInIndex: boolean expected":e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&typeof e.disablePeriodicKeyframeRequestOnContentSender!="boolean"?"disablePeriodicKeyframeRequestOnContentSender: boolean expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkJoinFrame)return e;var t=new s.SdkJoinFrame;if(e.protocolVersion!=null&&(t.protocolVersion=e.protocolVersion>>>0),e.maxNumOfVideos!=null&&(t.maxNumOfVideos=e.maxNumOfVideos>>>0),e.flags!=null&&(t.flags=e.flags>>>0),e.clientDetails!=null){if(typeof e.clientDetails!="object")throw TypeError(".SdkJoinFrame.clientDetails: object expected");t.clientDetails=s.SdkClientDetails.fromObject(e.clientDetails)}switch(e.audioSessionId!=null&&(g.Long?(t.audioSessionId=g.Long.fromValue(e.audioSessionId)).unsigned=!0:typeof e.audioSessionId=="string"?t.audioSessionId=parseInt(e.audioSessionId,10):typeof e.audioSessionId=="number"?t.audioSessionId=e.audioSessionId:typeof e.audioSessionId=="object"&&(t.audioSessionId=new g.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0))),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.serverSideNetworkAdaption){default:if(typeof e.serverSideNetworkAdaption=="number"){t.serverSideNetworkAdaption=e.serverSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.serverSideNetworkAdaption=1;break;case"NONE":case 2:t.serverSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.serverSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.serverSideNetworkAdaption=4;break}if(e.supportedServerSideNetworkAdaptions){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))throw TypeError(".SdkJoinFrame.supportedServerSideNetworkAdaptions: array expected");t.supportedServerSideNetworkAdaptions=[];for(var r=0;r<e.supportedServerSideNetworkAdaptions.length;++r)switch(e.supportedServerSideNetworkAdaptions[r]){default:if(typeof e.supportedServerSideNetworkAdaptions[r]=="number"){t.supportedServerSideNetworkAdaptions[r]=e.supportedServerSideNetworkAdaptions[r];break}case"DEFAULT":case 1:t.supportedServerSideNetworkAdaptions[r]=1;break;case"NONE":case 2:t.supportedServerSideNetworkAdaptions[r]=2;break;case"BANDWIDTH_PROBING":case 3:t.supportedServerSideNetworkAdaptions[r]=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.supportedServerSideNetworkAdaptions[r]=4;break}}return e.wantsAllTemporalLayersInIndex!=null&&(t.wantsAllTemporalLayersInIndex=Boolean(e.wantsAllTemporalLayersInIndex)),e.disablePeriodicKeyframeRequestOnContentSender!=null&&(t.disablePeriodicKeyframeRequestOnContentSender=Boolean(e.disablePeriodicKeyframeRequestOnContentSender)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.supportedServerSideNetworkAdaptions=[]),t.defaults){if(r.protocolVersion=2,r.maxNumOfVideos=0,r.flags=0,r.clientDetails=null,g.Long){var o=new g.Long(0,0,!0);r.audioSessionId=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.audioSessionId=t.longs===String?"0":0;r.wantsCompressedSdp=!1,r.serverSideNetworkAdaption=t.enums===String?"DEFAULT":1,r.wantsAllTemporalLayersInIndex=!1,r.disablePeriodicKeyframeRequestOnContentSender=!1}if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&(r.protocolVersion=e.protocolVersion),e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&(r.maxNumOfVideos=e.maxNumOfVideos),e.flags!=null&&e.hasOwnProperty("flags")&&(r.flags=e.flags),e.clientDetails!=null&&e.hasOwnProperty("clientDetails")&&(r.clientDetails=s.SdkClientDetails.toObject(e.clientDetails,t)),e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&(typeof e.audioSessionId=="number"?r.audioSessionId=t.longs===String?String(e.audioSessionId):e.audioSessionId:r.audioSessionId=t.longs===String?g.Long.prototype.toString.call(e.audioSessionId):t.longs===Number?new g.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0):e.audioSessionId),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(r.wantsCompressedSdp=e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption")&&(r.serverSideNetworkAdaption=t.enums===String?s.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]===void 0?e.serverSideNetworkAdaption:s.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]:e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions&&e.supportedServerSideNetworkAdaptions.length){r.supportedServerSideNetworkAdaptions=[];for(var f=0;f<e.supportedServerSideNetworkAdaptions.length;++f)r.supportedServerSideNetworkAdaptions[f]=t.enums===String?s.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[f]]===void 0?e.supportedServerSideNetworkAdaptions[f]:s.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[f]]:e.supportedServerSideNetworkAdaptions[f]}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&(r.wantsAllTemporalLayersInIndex=e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&(r.disablePeriodicKeyframeRequestOnContentSender=e.disablePeriodicKeyframeRequestOnContentSender),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinFrame"},"getTypeUrl"),a}(),s.SdkJoinAckFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkJoinAckFrame"),a.prototype.turnCredentials=null,a.prototype.videoSubscriptionLimit=0,a.prototype.wantsCompressedSdp=!1,a.prototype.defaultServerSideNetworkAdaption=1,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.turnCredentials!=null&&Object.hasOwnProperty.call(e,"turnCredentials")&&s.SdkTurnCredentials.encode(e.turnCredentials,t.uint32(10).fork()).ldelim(),e.videoSubscriptionLimit!=null&&Object.hasOwnProperty.call(e,"videoSubscriptionLimit")&&t.uint32(16).uint32(e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(24).bool(e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"defaultServerSideNetworkAdaption")&&t.uint32(32).int32(e.defaultServerSideNetworkAdaption),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkJoinAckFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.turnCredentials=s.SdkTurnCredentials.decode(e,e.uint32());break}case 2:{o.videoSubscriptionLimit=e.uint32();break}case 3:{o.wantsCompressedSdp=e.bool();break}case 4:{o.defaultServerSideNetworkAdaption=e.int32();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")){var t=s.SdkTurnCredentials.verify(e.turnCredentials);if(t)return"turnCredentials."+t}if(e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&!g.isInteger(e.videoSubscriptionLimit))return"videoSubscriptionLimit: integer expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption"))switch(e.defaultServerSideNetworkAdaption){default:return"defaultServerSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkJoinAckFrame)return e;var t=new s.SdkJoinAckFrame;if(e.turnCredentials!=null){if(typeof e.turnCredentials!="object")throw TypeError(".SdkJoinAckFrame.turnCredentials: object expected");t.turnCredentials=s.SdkTurnCredentials.fromObject(e.turnCredentials)}switch(e.videoSubscriptionLimit!=null&&(t.videoSubscriptionLimit=e.videoSubscriptionLimit>>>0),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.defaultServerSideNetworkAdaption){default:if(typeof e.defaultServerSideNetworkAdaption=="number"){t.defaultServerSideNetworkAdaption=e.defaultServerSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.defaultServerSideNetworkAdaption=1;break;case"NONE":case 2:t.defaultServerSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.defaultServerSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.defaultServerSideNetworkAdaption=4;break}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.turnCredentials=null,r.videoSubscriptionLimit=0,r.wantsCompressedSdp=!1,r.defaultServerSideNetworkAdaption=t.enums===String?"DEFAULT":1),e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")&&(r.turnCredentials=s.SdkTurnCredentials.toObject(e.turnCredentials,t)),e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&(r.videoSubscriptionLimit=e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(r.wantsCompressedSdp=e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption")&&(r.defaultServerSideNetworkAdaption=t.enums===String?s.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]===void 0?e.defaultServerSideNetworkAdaption:s.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]:e.defaultServerSideNetworkAdaption),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinAckFrame"},"getTypeUrl"),a}(),s.SdkLeaveFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkLeaveFrame"),a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkLeaveFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),a.fromObject=n(function(e){return e instanceof s.SdkLeaveFrame?e:new s.SdkLeaveFrame},"fromObject"),a.toObject=n(function(){return{}},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveFrame"},"getTypeUrl"),a}(),s.SdkLeaveAckFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkLeaveAckFrame"),a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkLeaveAckFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),a.fromObject=n(function(e){return e instanceof s.SdkLeaveAckFrame?e:new s.SdkLeaveAckFrame},"fromObject"),a.toObject=n(function(){return{}},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveAckFrame"},"getTypeUrl"),a}(),s.SdkStreamServiceType=function(){var a={},i=Object.create(a);return i[a[1]="RX"]=1,i[a[2]="TX"]=2,i[a[3]="DUPLEX"]=3,i}(),s.SdkStreamMediaType=function(){var a={},i=Object.create(a);return i[a[1]="AUDIO"]=1,i[a[2]="VIDEO"]=2,i}(),s.SdkSubscribeFrame=function(){function a(i){if(this.sendStreams=[],this.receiveStreamIds=[],this.videoSubscriptionConfiguration=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkSubscribeFrame"),a.prototype.duplex=1,a.prototype.sendStreams=g.emptyArray,a.prototype.receiveStreamIds=g.emptyArray,a.prototype.sdpOffer="",a.prototype.audioHost="",a.prototype.audioCheckin=!1,a.prototype.audioMuted=!1,a.prototype.compressedSdpOffer=g.newBuffer([]),a.prototype.videoSubscriptionConfiguration=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.sendStreams!=null&&e.sendStreams.length)for(var r=0;r<e.sendStreams.length;++r)s.SdkStreamDescriptor.encode(e.sendStreams[r],t.uint32(18).fork()).ldelim();if(e.receiveStreamIds!=null&&e.receiveStreamIds.length)for(var r=0;r<e.receiveStreamIds.length;++r)t.uint32(24).uint32(e.receiveStreamIds[r]);if(e.sdpOffer!=null&&Object.hasOwnProperty.call(e,"sdpOffer")&&t.uint32(34).string(e.sdpOffer),e.audioHost!=null&&Object.hasOwnProperty.call(e,"audioHost")&&t.uint32(42).string(e.audioHost),e.audioCheckin!=null&&Object.hasOwnProperty.call(e,"audioCheckin")&&t.uint32(48).bool(e.audioCheckin),e.audioMuted!=null&&Object.hasOwnProperty.call(e,"audioMuted")&&t.uint32(56).bool(e.audioMuted),e.compressedSdpOffer!=null&&Object.hasOwnProperty.call(e,"compressedSdpOffer")&&t.uint32(66).bytes(e.compressedSdpOffer),e.videoSubscriptionConfiguration!=null&&e.videoSubscriptionConfiguration.length)for(var r=0;r<e.videoSubscriptionConfiguration.length;++r)s.SdkVideoSubscriptionConfiguration.encode(e.videoSubscriptionConfiguration[r],t.uint32(74).fork()).ldelim();return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkSubscribeFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.sendStreams&&o.sendStreams.length||(o.sendStreams=[]),o.sendStreams.push(s.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.receiveStreamIds&&o.receiveStreamIds.length||(o.receiveStreamIds=[]),(f&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.receiveStreamIds.push(e.uint32());else o.receiveStreamIds.push(e.uint32());break}case 4:{o.sdpOffer=e.string();break}case 5:{o.audioHost=e.string();break}case 6:{o.audioCheckin=e.bool();break}case 7:{o.audioMuted=e.bool();break}case 8:{o.compressedSdpOffer=e.bytes();break}case 9:{o.videoSubscriptionConfiguration&&o.videoSubscriptionConfiguration.length||(o.videoSubscriptionConfiguration=[]),o.videoSubscriptionConfiguration.push(s.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.sendStreams!=null&&e.hasOwnProperty("sendStreams")){if(!Array.isArray(e.sendStreams))return"sendStreams: array expected";for(var t=0;t<e.sendStreams.length;++t){var r=s.SdkStreamDescriptor.verify(e.sendStreams[t]);if(r)return"sendStreams."+r}}if(e.receiveStreamIds!=null&&e.hasOwnProperty("receiveStreamIds")){if(!Array.isArray(e.receiveStreamIds))return"receiveStreamIds: array expected";for(var t=0;t<e.receiveStreamIds.length;++t)if(!g.isInteger(e.receiveStreamIds[t]))return"receiveStreamIds: integer[] expected"}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&!g.isString(e.sdpOffer))return"sdpOffer: string expected";if(e.audioHost!=null&&e.hasOwnProperty("audioHost")&&!g.isString(e.audioHost))return"audioHost: string expected";if(e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&typeof e.audioCheckin!="boolean")return"audioCheckin: boolean expected";if(e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&typeof e.audioMuted!="boolean")return"audioMuted: boolean expected";if(e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&!(e.compressedSdpOffer&&typeof e.compressedSdpOffer.length=="number"||g.isString(e.compressedSdpOffer)))return"compressedSdpOffer: buffer expected";if(e.videoSubscriptionConfiguration!=null&&e.hasOwnProperty("videoSubscriptionConfiguration")){if(!Array.isArray(e.videoSubscriptionConfiguration))return"videoSubscriptionConfiguration: array expected";for(var t=0;t<e.videoSubscriptionConfiguration.length;++t){var r=s.SdkVideoSubscriptionConfiguration.verify(e.videoSubscriptionConfiguration[t]);if(r)return"videoSubscriptionConfiguration."+r}}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkSubscribeFrame)return e;var t=new s.SdkSubscribeFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.sendStreams){if(!Array.isArray(e.sendStreams))throw TypeError(".SdkSubscribeFrame.sendStreams: array expected");t.sendStreams=[];for(var r=0;r<e.sendStreams.length;++r){if(typeof e.sendStreams[r]!="object")throw TypeError(".SdkSubscribeFrame.sendStreams: object expected");t.sendStreams[r]=s.SdkStreamDescriptor.fromObject(e.sendStreams[r])}}if(e.receiveStreamIds){if(!Array.isArray(e.receiveStreamIds))throw TypeError(".SdkSubscribeFrame.receiveStreamIds: array expected");t.receiveStreamIds=[];for(var r=0;r<e.receiveStreamIds.length;++r)t.receiveStreamIds[r]=e.receiveStreamIds[r]>>>0}if(e.sdpOffer!=null&&(t.sdpOffer=String(e.sdpOffer)),e.audioHost!=null&&(t.audioHost=String(e.audioHost)),e.audioCheckin!=null&&(t.audioCheckin=Boolean(e.audioCheckin)),e.audioMuted!=null&&(t.audioMuted=Boolean(e.audioMuted)),e.compressedSdpOffer!=null&&(typeof e.compressedSdpOffer=="string"?g.base64.decode(e.compressedSdpOffer,t.compressedSdpOffer=g.newBuffer(g.base64.length(e.compressedSdpOffer)),0):e.compressedSdpOffer.length>=0&&(t.compressedSdpOffer=e.compressedSdpOffer)),e.videoSubscriptionConfiguration){if(!Array.isArray(e.videoSubscriptionConfiguration))throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: array expected");t.videoSubscriptionConfiguration=[];for(var r=0;r<e.videoSubscriptionConfiguration.length;++r){if(typeof e.videoSubscriptionConfiguration[r]!="object")throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: object expected");t.videoSubscriptionConfiguration[r]=s.SdkVideoSubscriptionConfiguration.fromObject(e.videoSubscriptionConfiguration[r])}}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.sendStreams=[],r.receiveStreamIds=[],r.videoSubscriptionConfiguration=[]),t.defaults&&(r.duplex=t.enums===String?"RX":1,r.sdpOffer="",r.audioHost="",r.audioCheckin=!1,r.audioMuted=!1,t.bytes===String?r.compressedSdpOffer="":(r.compressedSdpOffer=[],t.bytes!==Array&&(r.compressedSdpOffer=g.newBuffer(r.compressedSdpOffer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(r.duplex=t.enums===String?s.SdkStreamServiceType[e.duplex]===void 0?e.duplex:s.SdkStreamServiceType[e.duplex]:e.duplex),e.sendStreams&&e.sendStreams.length){r.sendStreams=[];for(var o=0;o<e.sendStreams.length;++o)r.sendStreams[o]=s.SdkStreamDescriptor.toObject(e.sendStreams[o],t)}if(e.receiveStreamIds&&e.receiveStreamIds.length){r.receiveStreamIds=[];for(var o=0;o<e.receiveStreamIds.length;++o)r.receiveStreamIds[o]=e.receiveStreamIds[o]}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&(r.sdpOffer=e.sdpOffer),e.audioHost!=null&&e.hasOwnProperty("audioHost")&&(r.audioHost=e.audioHost),e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&(r.audioCheckin=e.audioCheckin),e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&(r.audioMuted=e.audioMuted),e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&(r.compressedSdpOffer=t.bytes===String?g.base64.encode(e.compressedSdpOffer,0,e.compressedSdpOffer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpOffer):e.compressedSdpOffer),e.videoSubscriptionConfiguration&&e.videoSubscriptionConfiguration.length){r.videoSubscriptionConfiguration=[];for(var o=0;o<e.videoSubscriptionConfiguration.length;++o)r.videoSubscriptionConfiguration[o]=s.SdkVideoSubscriptionConfiguration.toObject(e.videoSubscriptionConfiguration[o],t)}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeFrame"},"getTypeUrl"),a}(),s.SdkSubscribeAckFrame=function(){function a(i){if(this.allocations=[],this.tracks=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkSubscribeAckFrame"),a.prototype.duplex=1,a.prototype.allocations=g.emptyArray,a.prototype.sdpAnswer="",a.prototype.tracks=g.emptyArray,a.prototype.compressedSdpAnswer=g.newBuffer([]),a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.allocations!=null&&e.allocations.length)for(var r=0;r<e.allocations.length;++r)s.SdkStreamAllocation.encode(e.allocations[r],t.uint32(18).fork()).ldelim();if(e.sdpAnswer!=null&&Object.hasOwnProperty.call(e,"sdpAnswer")&&t.uint32(26).string(e.sdpAnswer),e.tracks!=null&&e.tracks.length)for(var r=0;r<e.tracks.length;++r)s.SdkTrackMapping.encode(e.tracks[r],t.uint32(34).fork()).ldelim();return e.compressedSdpAnswer!=null&&Object.hasOwnProperty.call(e,"compressedSdpAnswer")&&t.uint32(42).bytes(e.compressedSdpAnswer),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkSubscribeAckFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.allocations&&o.allocations.length||(o.allocations=[]),o.allocations.push(s.SdkStreamAllocation.decode(e,e.uint32()));break}case 3:{o.sdpAnswer=e.string();break}case 4:{o.tracks&&o.tracks.length||(o.tracks=[]),o.tracks.push(s.SdkTrackMapping.decode(e,e.uint32()));break}case 5:{o.compressedSdpAnswer=e.bytes();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.allocations!=null&&e.hasOwnProperty("allocations")){if(!Array.isArray(e.allocations))return"allocations: array expected";for(var t=0;t<e.allocations.length;++t){var r=s.SdkStreamAllocation.verify(e.allocations[t]);if(r)return"allocations."+r}}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&!g.isString(e.sdpAnswer))return"sdpAnswer: string expected";if(e.tracks!=null&&e.hasOwnProperty("tracks")){if(!Array.isArray(e.tracks))return"tracks: array expected";for(var t=0;t<e.tracks.length;++t){var r=s.SdkTrackMapping.verify(e.tracks[t]);if(r)return"tracks."+r}}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&!(e.compressedSdpAnswer&&typeof e.compressedSdpAnswer.length=="number"||g.isString(e.compressedSdpAnswer))?"compressedSdpAnswer: buffer expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkSubscribeAckFrame)return e;var t=new s.SdkSubscribeAckFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.allocations){if(!Array.isArray(e.allocations))throw TypeError(".SdkSubscribeAckFrame.allocations: array expected");t.allocations=[];for(var r=0;r<e.allocations.length;++r){if(typeof e.allocations[r]!="object")throw TypeError(".SdkSubscribeAckFrame.allocations: object expected");t.allocations[r]=s.SdkStreamAllocation.fromObject(e.allocations[r])}}if(e.sdpAnswer!=null&&(t.sdpAnswer=String(e.sdpAnswer)),e.tracks){if(!Array.isArray(e.tracks))throw TypeError(".SdkSubscribeAckFrame.tracks: array expected");t.tracks=[];for(var r=0;r<e.tracks.length;++r){if(typeof e.tracks[r]!="object")throw TypeError(".SdkSubscribeAckFrame.tracks: object expected");t.tracks[r]=s.SdkTrackMapping.fromObject(e.tracks[r])}}return e.compressedSdpAnswer!=null&&(typeof e.compressedSdpAnswer=="string"?g.base64.decode(e.compressedSdpAnswer,t.compressedSdpAnswer=g.newBuffer(g.base64.length(e.compressedSdpAnswer)),0):e.compressedSdpAnswer.length>=0&&(t.compressedSdpAnswer=e.compressedSdpAnswer)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.allocations=[],r.tracks=[]),t.defaults&&(r.duplex=t.enums===String?"RX":1,r.sdpAnswer="",t.bytes===String?r.compressedSdpAnswer="":(r.compressedSdpAnswer=[],t.bytes!==Array&&(r.compressedSdpAnswer=g.newBuffer(r.compressedSdpAnswer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(r.duplex=t.enums===String?s.SdkStreamServiceType[e.duplex]===void 0?e.duplex:s.SdkStreamServiceType[e.duplex]:e.duplex),e.allocations&&e.allocations.length){r.allocations=[];for(var o=0;o<e.allocations.length;++o)r.allocations[o]=s.SdkStreamAllocation.toObject(e.allocations[o],t)}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&(r.sdpAnswer=e.sdpAnswer),e.tracks&&e.tracks.length){r.tracks=[];for(var o=0;o<e.tracks.length;++o)r.tracks[o]=s.SdkTrackMapping.toObject(e.tracks[o],t)}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&(r.compressedSdpAnswer=t.bytes===String?g.base64.encode(e.compressedSdpAnswer,0,e.compressedSdpAnswer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpAnswer):e.compressedSdpAnswer),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeAckFrame"},"getTypeUrl"),a}(),s.SdkIndexFrame=function(){function a(i){if(this.sources=[],this.pausedAtSourceIds=[],this.supportedReceiveCodecIntersection=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkIndexFrame"),a.prototype.atCapacity=!1,a.prototype.sources=g.emptyArray,a.prototype.pausedAtSourceIds=g.emptyArray,a.prototype.numParticipants=0,a.prototype.supportedReceiveCodecIntersection=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.atCapacity!=null&&Object.hasOwnProperty.call(e,"atCapacity")&&t.uint32(8).bool(e.atCapacity),e.sources!=null&&e.sources.length)for(var r=0;r<e.sources.length;++r)s.SdkStreamDescriptor.encode(e.sources[r],t.uint32(18).fork()).ldelim();if(e.pausedAtSourceIds!=null&&e.pausedAtSourceIds.length)for(var r=0;r<e.pausedAtSourceIds.length;++r)t.uint32(24).uint32(e.pausedAtSourceIds[r]);if(e.numParticipants!=null&&Object.hasOwnProperty.call(e,"numParticipants")&&t.uint32(32).uint32(e.numParticipants),e.supportedReceiveCodecIntersection!=null&&e.supportedReceiveCodecIntersection.length)for(var r=0;r<e.supportedReceiveCodecIntersection.length;++r)t.uint32(40).int32(e.supportedReceiveCodecIntersection[r]);return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkIndexFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.atCapacity=e.bool();break}case 2:{o.sources&&o.sources.length||(o.sources=[]),o.sources.push(s.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.pausedAtSourceIds&&o.pausedAtSourceIds.length||(o.pausedAtSourceIds=[]),(f&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.pausedAtSourceIds.push(e.uint32());else o.pausedAtSourceIds.push(e.uint32());break}case 4:{o.numParticipants=e.uint32();break}case 5:{if(o.supportedReceiveCodecIntersection&&o.supportedReceiveCodecIntersection.length||(o.supportedReceiveCodecIntersection=[]),(f&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.supportedReceiveCodecIntersection.push(e.int32());else o.supportedReceiveCodecIntersection.push(e.int32());break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&typeof e.atCapacity!="boolean")return"atCapacity: boolean expected";if(e.sources!=null&&e.hasOwnProperty("sources")){if(!Array.isArray(e.sources))return"sources: array expected";for(var t=0;t<e.sources.length;++t){var r=s.SdkStreamDescriptor.verify(e.sources[t]);if(r)return"sources."+r}}if(e.pausedAtSourceIds!=null&&e.hasOwnProperty("pausedAtSourceIds")){if(!Array.isArray(e.pausedAtSourceIds))return"pausedAtSourceIds: array expected";for(var t=0;t<e.pausedAtSourceIds.length;++t)if(!g.isInteger(e.pausedAtSourceIds[t]))return"pausedAtSourceIds: integer[] expected"}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&!g.isInteger(e.numParticipants))return"numParticipants: integer expected";if(e.supportedReceiveCodecIntersection!=null&&e.hasOwnProperty("supportedReceiveCodecIntersection")){if(!Array.isArray(e.supportedReceiveCodecIntersection))return"supportedReceiveCodecIntersection: array expected";for(var t=0;t<e.supportedReceiveCodecIntersection.length;++t)switch(e.supportedReceiveCodecIntersection[t]){default:return"supportedReceiveCodecIntersection: enum value[] expected";case 1:case 2:case 3:case 4:case 5:case 6:case 8:case 11:break}}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkIndexFrame)return e;var t=new s.SdkIndexFrame;if(e.atCapacity!=null&&(t.atCapacity=Boolean(e.atCapacity)),e.sources){if(!Array.isArray(e.sources))throw TypeError(".SdkIndexFrame.sources: array expected");t.sources=[];for(var r=0;r<e.sources.length;++r){if(typeof e.sources[r]!="object")throw TypeError(".SdkIndexFrame.sources: object expected");t.sources[r]=s.SdkStreamDescriptor.fromObject(e.sources[r])}}if(e.pausedAtSourceIds){if(!Array.isArray(e.pausedAtSourceIds))throw TypeError(".SdkIndexFrame.pausedAtSourceIds: array expected");t.pausedAtSourceIds=[];for(var r=0;r<e.pausedAtSourceIds.length;++r)t.pausedAtSourceIds[r]=e.pausedAtSourceIds[r]>>>0}if(e.numParticipants!=null&&(t.numParticipants=e.numParticipants>>>0),e.supportedReceiveCodecIntersection){if(!Array.isArray(e.supportedReceiveCodecIntersection))throw TypeError(".SdkIndexFrame.supportedReceiveCodecIntersection: array expected");t.supportedReceiveCodecIntersection=[];for(var r=0;r<e.supportedReceiveCodecIntersection.length;++r)switch(e.supportedReceiveCodecIntersection[r]){default:if(typeof e.supportedReceiveCodecIntersection[r]=="number"){t.supportedReceiveCodecIntersection[r]=e.supportedReceiveCodecIntersection[r];break}case"VP8":case 1:t.supportedReceiveCodecIntersection[r]=1;break;case"H264_BASELINE_PROFILE":case 2:t.supportedReceiveCodecIntersection[r]=2;break;case"H264_CONSTRAINED_BASELINE_PROFILE":case 3:t.supportedReceiveCodecIntersection[r]=3;break;case"H264_MAIN_PROFILE":case 4:t.supportedReceiveCodecIntersection[r]=4;break;case"H264_HIGH_PROFILE":case 5:t.supportedReceiveCodecIntersection[r]=5;break;case"H264_CONSTRAINED_HIGH_PROFILE":case 6:t.supportedReceiveCodecIntersection[r]=6;break;case"VP9_PROFILE_0":case 8:t.supportedReceiveCodecIntersection[r]=8;break;case"AV1_MAIN_PROFILE":case 11:t.supportedReceiveCodecIntersection[r]=11;break}}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.sources=[],r.pausedAtSourceIds=[],r.supportedReceiveCodecIntersection=[]),t.defaults&&(r.atCapacity=!1,r.numParticipants=0),e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&(r.atCapacity=e.atCapacity),e.sources&&e.sources.length){r.sources=[];for(var o=0;o<e.sources.length;++o)r.sources[o]=s.SdkStreamDescriptor.toObject(e.sources[o],t)}if(e.pausedAtSourceIds&&e.pausedAtSourceIds.length){r.pausedAtSourceIds=[];for(var o=0;o<e.pausedAtSourceIds.length;++o)r.pausedAtSourceIds[o]=e.pausedAtSourceIds[o]}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&(r.numParticipants=e.numParticipants),e.supportedReceiveCodecIntersection&&e.supportedReceiveCodecIntersection.length){r.supportedReceiveCodecIntersection=[];for(var o=0;o<e.supportedReceiveCodecIntersection.length;++o)r.supportedReceiveCodecIntersection[o]=t.enums===String?s.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]===void 0?e.supportedReceiveCodecIntersection[o]:s.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]:e.supportedReceiveCodecIntersection[o]}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkIndexFrame"},"getTypeUrl"),a}(),s.SdkPauseResumeFrame=function(){function a(i){if(this.streamIds=[],this.groupIds=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkPauseResumeFrame"),a.prototype.streamIds=g.emptyArray,a.prototype.groupIds=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.streamIds!=null&&e.streamIds.length)for(var r=0;r<e.streamIds.length;++r)t.uint32(8).uint32(e.streamIds[r]);if(e.groupIds!=null&&e.groupIds.length)for(var r=0;r<e.groupIds.length;++r)t.uint32(16).uint32(e.groupIds[r]);return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkPauseResumeFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{if(o.streamIds&&o.streamIds.length||(o.streamIds=[]),(f&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.streamIds.push(e.uint32());else o.streamIds.push(e.uint32());break}case 2:{if(o.groupIds&&o.groupIds.length||(o.groupIds=[]),(f&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.groupIds.push(e.uint32());else o.groupIds.push(e.uint32());break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamIds!=null&&e.hasOwnProperty("streamIds")){if(!Array.isArray(e.streamIds))return"streamIds: array expected";for(var t=0;t<e.streamIds.length;++t)if(!g.isInteger(e.streamIds[t]))return"streamIds: integer[] expected"}if(e.groupIds!=null&&e.hasOwnProperty("groupIds")){if(!Array.isArray(e.groupIds))return"groupIds: array expected";for(var t=0;t<e.groupIds.length;++t)if(!g.isInteger(e.groupIds[t]))return"groupIds: integer[] expected"}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkPauseResumeFrame)return e;var t=new s.SdkPauseResumeFrame;if(e.streamIds){if(!Array.isArray(e.streamIds))throw TypeError(".SdkPauseResumeFrame.streamIds: array expected");t.streamIds=[];for(var r=0;r<e.streamIds.length;++r)t.streamIds[r]=e.streamIds[r]>>>0}if(e.groupIds){if(!Array.isArray(e.groupIds))throw TypeError(".SdkPauseResumeFrame.groupIds: array expected");t.groupIds=[];for(var r=0;r<e.groupIds.length;++r)t.groupIds[r]=e.groupIds[r]>>>0}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.streamIds=[],r.groupIds=[]),e.streamIds&&e.streamIds.length){r.streamIds=[];for(var o=0;o<e.streamIds.length;++o)r.streamIds[o]=e.streamIds[o]}if(e.groupIds&&e.groupIds.length){r.groupIds=[];for(var o=0;o<e.groupIds.length;++o)r.groupIds[o]=e.groupIds[o]}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPauseResumeFrame"},"getTypeUrl"),a}(),s.SdkBitrateFrame=function(){function a(i){if(this.bitrates=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkBitrateFrame"),a.prototype.bitrates=g.emptyArray,a.prototype.serverAvailableOutgoingBitrate=0,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.bitrates!=null&&e.bitrates.length)for(var r=0;r<e.bitrates.length;++r)s.SdkBitrate.encode(e.bitrates[r],t.uint32(10).fork()).ldelim();return e.serverAvailableOutgoingBitrate!=null&&Object.hasOwnProperty.call(e,"serverAvailableOutgoingBitrate")&&t.uint32(16).uint32(e.serverAvailableOutgoingBitrate),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkBitrateFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.bitrates&&o.bitrates.length||(o.bitrates=[]),o.bitrates.push(s.SdkBitrate.decode(e,e.uint32()));break}case 2:{o.serverAvailableOutgoingBitrate=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){if(!Array.isArray(e.bitrates))return"bitrates: array expected";for(var t=0;t<e.bitrates.length;++t){var r=s.SdkBitrate.verify(e.bitrates[t]);if(r)return"bitrates."+r}}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&!g.isInteger(e.serverAvailableOutgoingBitrate)?"serverAvailableOutgoingBitrate: integer expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkBitrateFrame)return e;var t=new s.SdkBitrateFrame;if(e.bitrates){if(!Array.isArray(e.bitrates))throw TypeError(".SdkBitrateFrame.bitrates: array expected");t.bitrates=[];for(var r=0;r<e.bitrates.length;++r){if(typeof e.bitrates[r]!="object")throw TypeError(".SdkBitrateFrame.bitrates: object expected");t.bitrates[r]=s.SdkBitrate.fromObject(e.bitrates[r])}}return e.serverAvailableOutgoingBitrate!=null&&(t.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate>>>0),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.bitrates=[]),t.defaults&&(r.serverAvailableOutgoingBitrate=0),e.bitrates&&e.bitrates.length){r.bitrates=[];for(var o=0;o<e.bitrates.length;++o)r.bitrates[o]=s.SdkBitrate.toObject(e.bitrates[o],t)}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&(r.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrateFrame"},"getTypeUrl"),a}(),s.SdkStreamDescriptor=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkStreamDescriptor"),a.prototype.streamId=0,a.prototype.framerate=0,a.prototype.maxBitrateKbps=0,a.prototype.trackLabel="",a.prototype.groupId=0,a.prototype.avgBitrateBps=0,a.prototype.attendeeId="",a.prototype.mediaType=1,a.prototype.externalUserId="",a.prototype.width=0,a.prototype.height=0,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.framerate!=null&&Object.hasOwnProperty.call(e,"framerate")&&t.uint32(16).uint32(e.framerate),e.maxBitrateKbps!=null&&Object.hasOwnProperty.call(e,"maxBitrateKbps")&&t.uint32(24).uint32(e.maxBitrateKbps),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(34).string(e.trackLabel),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(56).uint32(e.avgBitrateBps),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(66).string(e.attendeeId),e.mediaType!=null&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(72).int32(e.mediaType),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(82).string(e.externalUserId),e.width!=null&&Object.hasOwnProperty.call(e,"width")&&t.uint32(88).uint32(e.width),e.height!=null&&Object.hasOwnProperty.call(e,"height")&&t.uint32(96).uint32(e.height),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkStreamDescriptor;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.framerate=e.uint32();break}case 3:{o.maxBitrateKbps=e.uint32();break}case 4:{o.trackLabel=e.string();break}case 6:{o.groupId=e.uint32();break}case 7:{o.avgBitrateBps=e.uint32();break}case 8:{o.attendeeId=e.string();break}case 9:{o.mediaType=e.int32();break}case 10:{o.externalUserId=e.string();break}case 11:{o.width=e.uint32();break}case 12:{o.height=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!g.isInteger(e.streamId))return"streamId: integer expected";if(e.framerate!=null&&e.hasOwnProperty("framerate")&&!g.isInteger(e.framerate))return"framerate: integer expected";if(e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&!g.isInteger(e.maxBitrateKbps))return"maxBitrateKbps: integer expected";if(e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!g.isString(e.trackLabel))return"trackLabel: string expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!g.isInteger(e.groupId))return"groupId: integer expected";if(e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!g.isInteger(e.avgBitrateBps))return"avgBitrateBps: integer expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!g.isString(e.attendeeId))return"attendeeId: string expected";if(e.mediaType!=null&&e.hasOwnProperty("mediaType"))switch(e.mediaType){default:return"mediaType: enum value expected";case 1:case 2:break}return e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!g.isString(e.externalUserId)?"externalUserId: string expected":e.width!=null&&e.hasOwnProperty("width")&&!g.isInteger(e.width)?"width: integer expected":e.height!=null&&e.hasOwnProperty("height")&&!g.isInteger(e.height)?"height: integer expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkStreamDescriptor)return e;var t=new s.SdkStreamDescriptor;switch(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.framerate!=null&&(t.framerate=e.framerate>>>0),e.maxBitrateKbps!=null&&(t.maxBitrateKbps=e.maxBitrateKbps>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.mediaType){default:if(typeof e.mediaType=="number"){t.mediaType=e.mediaType;break}break;case"AUDIO":case 1:t.mediaType=1;break;case"VIDEO":case 2:t.mediaType=2;break}return e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.width!=null&&(t.width=e.width>>>0),e.height!=null&&(t.height=e.height>>>0),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.streamId=0,r.framerate=0,r.maxBitrateKbps=0,r.trackLabel="",r.groupId=0,r.avgBitrateBps=0,r.attendeeId="",r.mediaType=t.enums===String?"AUDIO":1,r.externalUserId="",r.width=0,r.height=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(r.streamId=e.streamId),e.framerate!=null&&e.hasOwnProperty("framerate")&&(r.framerate=e.framerate),e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&(r.maxBitrateKbps=e.maxBitrateKbps),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(r.trackLabel=e.trackLabel),e.groupId!=null&&e.hasOwnProperty("groupId")&&(r.groupId=e.groupId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(r.avgBitrateBps=e.avgBitrateBps),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(r.attendeeId=e.attendeeId),e.mediaType!=null&&e.hasOwnProperty("mediaType")&&(r.mediaType=t.enums===String?s.SdkStreamMediaType[e.mediaType]===void 0?e.mediaType:s.SdkStreamMediaType[e.mediaType]:e.mediaType),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(r.externalUserId=e.externalUserId),e.width!=null&&e.hasOwnProperty("width")&&(r.width=e.width),e.height!=null&&e.hasOwnProperty("height")&&(r.height=e.height),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDescriptor"},"getTypeUrl"),a}(),s.SdkStreamAllocation=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkStreamAllocation"),a.prototype.trackLabel="",a.prototype.streamId=0,a.prototype.groupId=0,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(10).string(e.trackLabel),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(16).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(24).uint32(e.groupId),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkStreamAllocation;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.trackLabel=e.string();break}case 2:{o.streamId=e.uint32();break}case 3:{o.groupId=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!g.isString(e.trackLabel)?"trackLabel: string expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!g.isInteger(e.streamId)?"streamId: integer expected":e.groupId!=null&&e.hasOwnProperty("groupId")&&!g.isInteger(e.groupId)?"groupId: integer expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkStreamAllocation)return e;var t=new s.SdkStreamAllocation;return e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.trackLabel="",r.streamId=0,r.groupId=0),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(r.trackLabel=e.trackLabel),e.streamId!=null&&e.hasOwnProperty("streamId")&&(r.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(r.groupId=e.groupId),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamAllocation"},"getTypeUrl"),a}(),s.SdkTrackMapping=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkTrackMapping"),a.prototype.streamId=0,a.prototype.ssrc=0,a.prototype.trackLabel="",a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.ssrc!=null&&Object.hasOwnProperty.call(e,"ssrc")&&t.uint32(16).uint32(e.ssrc),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(26).string(e.trackLabel),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkTrackMapping;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.ssrc=e.uint32();break}case 3:{o.trackLabel=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!g.isInteger(e.streamId)?"streamId: integer expected":e.ssrc!=null&&e.hasOwnProperty("ssrc")&&!g.isInteger(e.ssrc)?"ssrc: integer expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!g.isString(e.trackLabel)?"trackLabel: string expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkTrackMapping)return e;var t=new s.SdkTrackMapping;return e.streamId!=null&&(t.streamId=e.streamId>>>0),e.ssrc!=null&&(t.ssrc=e.ssrc>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.streamId=0,r.ssrc=0,r.trackLabel=""),e.streamId!=null&&e.hasOwnProperty("streamId")&&(r.streamId=e.streamId),e.ssrc!=null&&e.hasOwnProperty("ssrc")&&(r.ssrc=e.ssrc),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(r.trackLabel=e.trackLabel),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTrackMapping"},"getTypeUrl"),a}(),s.SdkBitrate=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkBitrate"),a.prototype.sourceStreamId=0,a.prototype.avgBitrateBps=0,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.sourceStreamId!=null&&Object.hasOwnProperty.call(e,"sourceStreamId")&&t.uint32(8).uint32(e.sourceStreamId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(16).uint32(e.avgBitrateBps),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkBitrate;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.sourceStreamId=e.uint32();break}case 2:{o.avgBitrateBps=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&!g.isInteger(e.sourceStreamId)?"sourceStreamId: integer expected":e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!g.isInteger(e.avgBitrateBps)?"avgBitrateBps: integer expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkBitrate)return e;var t=new s.SdkBitrate;return e.sourceStreamId!=null&&(t.sourceStreamId=e.sourceStreamId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.sourceStreamId=0,r.avgBitrateBps=0),e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&(r.sourceStreamId=e.sourceStreamId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(r.avgBitrateBps=e.avgBitrateBps),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrate"},"getTypeUrl"),a}(),s.SdkAudioControlFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkAudioControlFrame"),a.prototype.muted=!1,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(8).bool(e.muted),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkAudioControlFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.muted=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkAudioControlFrame)return e;var t=new s.SdkAudioControlFrame;return e.muted!=null&&(t.muted=Boolean(e.muted)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.muted=!1),e.muted!=null&&e.hasOwnProperty("muted")&&(r.muted=e.muted),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioControlFrame"},"getTypeUrl"),a}(),s.SdkAudioMetadataFrame=function(){function a(i){if(this.attendeeStates=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkAudioMetadataFrame"),a.prototype.attendeeStates=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.attendeeStates!=null&&e.attendeeStates.length)for(var r=0;r<e.attendeeStates.length;++r)s.SdkAudioAttendeeState.encode(e.attendeeStates[r],t.uint32(10).fork()).ldelim();return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkAudioMetadataFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.attendeeStates&&o.attendeeStates.length||(o.attendeeStates=[]),o.attendeeStates.push(s.SdkAudioAttendeeState.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.attendeeStates!=null&&e.hasOwnProperty("attendeeStates")){if(!Array.isArray(e.attendeeStates))return"attendeeStates: array expected";for(var t=0;t<e.attendeeStates.length;++t){var r=s.SdkAudioAttendeeState.verify(e.attendeeStates[t]);if(r)return"attendeeStates."+r}}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkAudioMetadataFrame)return e;var t=new s.SdkAudioMetadataFrame;if(e.attendeeStates){if(!Array.isArray(e.attendeeStates))throw TypeError(".SdkAudioMetadataFrame.attendeeStates: array expected");t.attendeeStates=[];for(var r=0;r<e.attendeeStates.length;++r){if(typeof e.attendeeStates[r]!="object")throw TypeError(".SdkAudioMetadataFrame.attendeeStates: object expected");t.attendeeStates[r]=s.SdkAudioAttendeeState.fromObject(e.attendeeStates[r])}}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.attendeeStates=[]),e.attendeeStates&&e.attendeeStates.length){r.attendeeStates=[];for(var o=0;o<e.attendeeStates.length;++o)r.attendeeStates[o]=s.SdkAudioAttendeeState.toObject(e.attendeeStates[o],t)}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioMetadataFrame"},"getTypeUrl"),a}(),s.SdkAudioAttendeeState=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkAudioAttendeeState"),a.prototype.audioStreamId=0,a.prototype.volume=0,a.prototype.muted=!1,a.prototype.signalStrength=0,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.volume!=null&&Object.hasOwnProperty.call(e,"volume")&&t.uint32(16).uint32(e.volume),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.signalStrength!=null&&Object.hasOwnProperty.call(e,"signalStrength")&&t.uint32(32).uint32(e.signalStrength),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkAudioAttendeeState;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.volume=e.uint32();break}case 3:{o.muted=e.bool();break}case 4:{o.signalStrength=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!g.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.volume!=null&&e.hasOwnProperty("volume")&&!g.isInteger(e.volume)?"volume: integer expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&!g.isInteger(e.signalStrength)?"signalStrength: integer expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkAudioAttendeeState)return e;var t=new s.SdkAudioAttendeeState;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.volume!=null&&(t.volume=e.volume>>>0),e.muted!=null&&(t.muted=Boolean(e.muted)),e.signalStrength!=null&&(t.signalStrength=e.signalStrength>>>0),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.audioStreamId=0,r.volume=0,r.muted=!1,r.signalStrength=0),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(r.audioStreamId=e.audioStreamId),e.volume!=null&&e.hasOwnProperty("volume")&&(r.volume=e.volume),e.muted!=null&&e.hasOwnProperty("muted")&&(r.muted=e.muted),e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&(r.signalStrength=e.signalStrength),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioAttendeeState"},"getTypeUrl"),a}(),s.SdkAudioStreamIdInfoFrame=function(){function a(i){if(this.streams=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkAudioStreamIdInfoFrame"),a.prototype.streams=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.streams!=null&&e.streams.length)for(var r=0;r<e.streams.length;++r)s.SdkAudioStreamIdInfo.encode(e.streams[r],t.uint32(10).fork()).ldelim();return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkAudioStreamIdInfoFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.streams&&o.streams.length||(o.streams=[]),o.streams.push(s.SdkAudioStreamIdInfo.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streams!=null&&e.hasOwnProperty("streams")){if(!Array.isArray(e.streams))return"streams: array expected";for(var t=0;t<e.streams.length;++t){var r=s.SdkAudioStreamIdInfo.verify(e.streams[t]);if(r)return"streams."+r}}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkAudioStreamIdInfoFrame)return e;var t=new s.SdkAudioStreamIdInfoFrame;if(e.streams){if(!Array.isArray(e.streams))throw TypeError(".SdkAudioStreamIdInfoFrame.streams: array expected");t.streams=[];for(var r=0;r<e.streams.length;++r){if(typeof e.streams[r]!="object")throw TypeError(".SdkAudioStreamIdInfoFrame.streams: object expected");t.streams[r]=s.SdkAudioStreamIdInfo.fromObject(e.streams[r])}}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.streams=[]),e.streams&&e.streams.length){r.streams=[];for(var o=0;o<e.streams.length;++o)r.streams[o]=s.SdkAudioStreamIdInfo.toObject(e.streams[o],t)}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfoFrame"},"getTypeUrl"),a}(),s.SdkAudioStreamIdInfo=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkAudioStreamIdInfo"),a.prototype.audioStreamId=0,a.prototype.attendeeId="",a.prototype.muted=!1,a.prototype.externalUserId="",a.prototype.dropped=!1,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(34).string(e.externalUserId),e.dropped!=null&&Object.hasOwnProperty.call(e,"dropped")&&t.uint32(40).bool(e.dropped),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkAudioStreamIdInfo;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.attendeeId=e.string();break}case 3:{o.muted=e.bool();break}case 4:{o.externalUserId=e.string();break}case 5:{o.dropped=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!g.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!g.isString(e.attendeeId)?"attendeeId: string expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!g.isString(e.externalUserId)?"externalUserId: string expected":e.dropped!=null&&e.hasOwnProperty("dropped")&&typeof e.dropped!="boolean"?"dropped: boolean expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkAudioStreamIdInfo)return e;var t=new s.SdkAudioStreamIdInfo;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.muted!=null&&(t.muted=Boolean(e.muted)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.dropped!=null&&(t.dropped=Boolean(e.dropped)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.audioStreamId=0,r.attendeeId="",r.muted=!1,r.externalUserId="",r.dropped=!1),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(r.audioStreamId=e.audioStreamId),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(r.attendeeId=e.attendeeId),e.muted!=null&&e.hasOwnProperty("muted")&&(r.muted=e.muted),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(r.externalUserId=e.externalUserId),e.dropped!=null&&e.hasOwnProperty("dropped")&&(r.dropped=e.dropped),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfo"},"getTypeUrl"),a}(),s.SdkPingPongType=function(){var a={},i=Object.create(a);return i[a[1]="PING"]=1,i[a[2]="PONG"]=2,i}(),s.SdkPingPongFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkPingPongFrame"),a.prototype.type=1,a.prototype.pingId=0,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),t.uint32(8).int32(e.type),t.uint32(16).uint32(e.pingId),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkPingPongFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.pingId=e.uint32();break}default:e.skipType(f&7);break}}if(!o.hasOwnProperty("type"))throw g.ProtocolError("missing required 'type'",{instance:o});if(!o.hasOwnProperty("pingId"))throw g.ProtocolError("missing required 'pingId'",{instance:o});return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return g.isInteger(e.pingId)?null:"pingId: integer expected"},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkPingPongFrame)return e;var t=new s.SdkPingPongFrame;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PING":case 1:t.type=1;break;case"PONG":case 2:t.type=2;break}return e.pingId!=null&&(t.pingId=e.pingId>>>0),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.type=t.enums===String?"PING":1,r.pingId=0),e.type!=null&&e.hasOwnProperty("type")&&(r.type=t.enums===String?s.SdkPingPongType[e.type]===void 0?e.type:s.SdkPingPongType[e.type]:e.type),e.pingId!=null&&e.hasOwnProperty("pingId")&&(r.pingId=e.pingId),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPingPongFrame"},"getTypeUrl"),a}(),s.SdkAudioStatusFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkAudioStatusFrame"),a.prototype.audioStatus=0,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&t.uint32(8).uint32(e.audioStatus),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkAudioStatusFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.audioStatus=e.uint32();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&!g.isInteger(e.audioStatus)?"audioStatus: integer expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkAudioStatusFrame)return e;var t=new s.SdkAudioStatusFrame;return e.audioStatus!=null&&(t.audioStatus=e.audioStatus>>>0),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.audioStatus=0),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(r.audioStatus=e.audioStatus),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStatusFrame"},"getTypeUrl"),a}(),s.SdkMetric=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkMetric"),a.prototype.type=1,a.prototype.value=0,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&t.uint32(17).double(e.value),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkMetric;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=e.double();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 64:case 66:case 69:case 72:case 86:case 87:case 88:case 89:case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:break}return e.value!=null&&e.hasOwnProperty("value")&&typeof e.value!="number"?"value: number expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkMetric)return e;var t=new s.SdkMetric;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ACTUAL_ENCODER_BITRATE":case 1:t.type=1;break;case"VIDEO_AVAILABLE_SEND_BANDWIDTH":case 2:t.type=2;break;case"VIDEO_RETRANSMIT_BITRATE":case 3:t.type=3;break;case"VIDEO_AVAILABLE_RECEIVE_BANDWIDTH":case 4:t.type=4;break;case"VIDEO_TARGET_ENCODER_BITRATE":case 5:t.type=5;break;case"VIDEO_BUCKET_DELAY_MS":case 6:t.type=6;break;case"STUN_RTT_MS":case 7:t.type=7;break;case"SOCKET_DISCARDED_PPS":case 8:t.type=8;break;case"RTC_MIC_JITTER_MS":case 9:t.type=9;break;case"RTC_MIC_PPS":case 10:t.type=10;break;case"RTC_MIC_FRACTION_PACKET_LOST_PERCENT":case 11:t.type=11;break;case"RTC_MIC_BITRATE":case 12:t.type=12;break;case"RTC_MIC_RTT_MS":case 13:t.type=13;break;case"RTC_SPK_PPS":case 14:t.type=14;break;case"RTC_SPK_FRACTION_PACKET_LOST_PERCENT":case 15:t.type=15;break;case"RTC_SPK_JITTER_MS":case 16:t.type=16;break;case"RTC_SPK_FRACTION_DECODER_LOSS_PERCENT":case 17:t.type=17;break;case"RTC_SPK_BITRATE":case 18:t.type=18;break;case"RTC_SPK_CURRENT_DELAY_MS":case 19:t.type=19;break;case"RTC_SPK_JITTER_BUFFER_MS":case 20:t.type=20;break;case"VIDEO_SENT_RTT_MS":case 21:t.type=21;break;case"VIDEO_ENCODE_USAGE_PERCENT":case 22:t.type=22;break;case"VIDEO_NACKS_RECEIVED":case 23:t.type=23;break;case"VIDEO_PLIS_RECEIVED":case 24:t.type=24;break;case"VIDEO_ENCODE_MS":case 25:t.type=25;break;case"VIDEO_INPUT_FPS":case 26:t.type=26;break;case"VIDEO_ENCODE_FPS":case 27:t.type=27;break;case"VIDEO_SENT_FPS":case 28:t.type=28;break;case"VIDEO_FIRS_RECEIVED":case 29:t.type=29;break;case"VIDEO_SENT_PPS":case 30:t.type=30;break;case"VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT":case 31:t.type=31;break;case"VIDEO_SENT_BITRATE":case 32:t.type=32;break;case"VIDEO_DROPPED_FPS":case 33:t.type=33;break;case"VIDEO_TARGET_DELAY_MS":case 34:t.type=34;break;case"VIDEO_DECODE_MS":case 35:t.type=35;break;case"VIDEO_OUTPUT_FPS":case 36:t.type=36;break;case"VIDEO_RECEIVED_PPS":case 37:t.type=37;break;case"VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT":case 38:t.type=38;break;case"VIDEO_RENDER_DELAY_MS":case 39:t.type=39;break;case"VIDEO_RECEIVED_FPS":case 40:t.type=40;break;case"VIDEO_DECODE_FPS":case 41:t.type=41;break;case"VIDEO_NACKS_SENT":case 42:t.type=42;break;case"VIDEO_FIRS_SENT":case 43:t.type=43;break;case"VIDEO_RECEIVED_BITRATE":case 44:t.type=44;break;case"VIDEO_CURRENT_DELAY_MS":case 45:t.type=45;break;case"VIDEO_JITTER_BUFFER_MS":case 46:t.type=46;break;case"VIDEO_DISCARDED_PPS":case 47:t.type=47;break;case"VIDEO_PLIS_SENT":case 48:t.type=48;break;case"VIDEO_RECEIVED_JITTER_MS":case 49:t.type=49;break;case"VIDEO_ENCODE_HEIGHT":case 64:t.type=64;break;case"VIDEO_SENT_QP_SUM":case 66:t.type=66;break;case"VIDEO_DECODE_HEIGHT":case 69:t.type=69;break;case"VIDEO_RECEIVED_QP_SUM":case 72:t.type=72;break;case"VIDEO_ENCODE_WIDTH":case 86:t.type=86;break;case"VIDEO_DECODE_WIDTH":case 87:t.type=87;break;case"VIDEO_ENCODER_IS_HARDWARE":case 88:t.type=88;break;case"VIDEO_DECODER_IS_HARDWARE":case 89:t.type=89;break;case"VIDEO_FREEZE_COUNT":case 90:t.type=90;break;case"VIDEO_FREEZE_DURATION":case 91:t.type=91;break;case"VIDEO_PAUSE_COUNT":case 92:t.type=92;break;case"VIDEO_PAUSE_DURATION":case 93:t.type=93;break;case"VIDEO_QUALITY_REASON":case 94:t.type=94;break;case"VIDEO_PROCESSING_TIME":case 95:t.type=95;break;case"RTC_SPK_AUDIO_LEVEL":case 96:t.type=96;break;case"RTC_MIC_AUDIO_LEVEL":case 97:t.type=97;break;case"RTC_SPK_TOTAL_LOST":case 98:t.type=98;break;case"RTC_SPK_TOTAL_EXPECTED":case 99:t.type=99;break;case"RTC_SPK_TOTAL_RECOVERED_RED":case 100:t.type=100;break;case"RTC_SPK_TOTAL_RECOVERED_FEC":case 101:t.type=101;break;case"VIDEO_QUALITY_LIMITATION_DURATION_CPU":case 102:t.type=102;break;case"VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU":case 103:t.type=103;break;case"VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE":case 104:t.type=104;break}return e.value!=null&&(t.value=Number(e.value)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.type=t.enums===String?"VIDEO_ACTUAL_ENCODER_BITRATE":1,r.value=0),e.type!=null&&e.hasOwnProperty("type")&&(r.type=t.enums===String?s.SdkMetric.Type[e.type]===void 0?e.type:s.SdkMetric.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(r.value=t.json&&!isFinite(e.value)?String(e.value):e.value),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMetric"},"getTypeUrl"),a.Type=function(){var i={},e=Object.create(i);return e[i[1]="VIDEO_ACTUAL_ENCODER_BITRATE"]=1,e[i[2]="VIDEO_AVAILABLE_SEND_BANDWIDTH"]=2,e[i[3]="VIDEO_RETRANSMIT_BITRATE"]=3,e[i[4]="VIDEO_AVAILABLE_RECEIVE_BANDWIDTH"]=4,e[i[5]="VIDEO_TARGET_ENCODER_BITRATE"]=5,e[i[6]="VIDEO_BUCKET_DELAY_MS"]=6,e[i[7]="STUN_RTT_MS"]=7,e[i[8]="SOCKET_DISCARDED_PPS"]=8,e[i[9]="RTC_MIC_JITTER_MS"]=9,e[i[10]="RTC_MIC_PPS"]=10,e[i[11]="RTC_MIC_FRACTION_PACKET_LOST_PERCENT"]=11,e[i[12]="RTC_MIC_BITRATE"]=12,e[i[13]="RTC_MIC_RTT_MS"]=13,e[i[14]="RTC_SPK_PPS"]=14,e[i[15]="RTC_SPK_FRACTION_PACKET_LOST_PERCENT"]=15,e[i[16]="RTC_SPK_JITTER_MS"]=16,e[i[17]="RTC_SPK_FRACTION_DECODER_LOSS_PERCENT"]=17,e[i[18]="RTC_SPK_BITRATE"]=18,e[i[19]="RTC_SPK_CURRENT_DELAY_MS"]=19,e[i[20]="RTC_SPK_JITTER_BUFFER_MS"]=20,e[i[21]="VIDEO_SENT_RTT_MS"]=21,e[i[22]="VIDEO_ENCODE_USAGE_PERCENT"]=22,e[i[23]="VIDEO_NACKS_RECEIVED"]=23,e[i[24]="VIDEO_PLIS_RECEIVED"]=24,e[i[25]="VIDEO_ENCODE_MS"]=25,e[i[26]="VIDEO_INPUT_FPS"]=26,e[i[27]="VIDEO_ENCODE_FPS"]=27,e[i[28]="VIDEO_SENT_FPS"]=28,e[i[29]="VIDEO_FIRS_RECEIVED"]=29,e[i[30]="VIDEO_SENT_PPS"]=30,e[i[31]="VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT"]=31,e[i[32]="VIDEO_SENT_BITRATE"]=32,e[i[33]="VIDEO_DROPPED_FPS"]=33,e[i[34]="VIDEO_TARGET_DELAY_MS"]=34,e[i[35]="VIDEO_DECODE_MS"]=35,e[i[36]="VIDEO_OUTPUT_FPS"]=36,e[i[37]="VIDEO_RECEIVED_PPS"]=37,e[i[38]="VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT"]=38,e[i[39]="VIDEO_RENDER_DELAY_MS"]=39,e[i[40]="VIDEO_RECEIVED_FPS"]=40,e[i[41]="VIDEO_DECODE_FPS"]=41,e[i[42]="VIDEO_NACKS_SENT"]=42,e[i[43]="VIDEO_FIRS_SENT"]=43,e[i[44]="VIDEO_RECEIVED_BITRATE"]=44,e[i[45]="VIDEO_CURRENT_DELAY_MS"]=45,e[i[46]="VIDEO_JITTER_BUFFER_MS"]=46,e[i[47]="VIDEO_DISCARDED_PPS"]=47,e[i[48]="VIDEO_PLIS_SENT"]=48,e[i[49]="VIDEO_RECEIVED_JITTER_MS"]=49,e[i[64]="VIDEO_ENCODE_HEIGHT"]=64,e[i[66]="VIDEO_SENT_QP_SUM"]=66,e[i[69]="VIDEO_DECODE_HEIGHT"]=69,e[i[72]="VIDEO_RECEIVED_QP_SUM"]=72,e[i[86]="VIDEO_ENCODE_WIDTH"]=86,e[i[87]="VIDEO_DECODE_WIDTH"]=87,e[i[88]="VIDEO_ENCODER_IS_HARDWARE"]=88,e[i[89]="VIDEO_DECODER_IS_HARDWARE"]=89,e[i[90]="VIDEO_FREEZE_COUNT"]=90,e[i[91]="VIDEO_FREEZE_DURATION"]=91,e[i[92]="VIDEO_PAUSE_COUNT"]=92,e[i[93]="VIDEO_PAUSE_DURATION"]=93,e[i[94]="VIDEO_QUALITY_REASON"]=94,e[i[95]="VIDEO_PROCESSING_TIME"]=95,e[i[96]="RTC_SPK_AUDIO_LEVEL"]=96,e[i[97]="RTC_MIC_AUDIO_LEVEL"]=97,e[i[98]="RTC_SPK_TOTAL_LOST"]=98,e[i[99]="RTC_SPK_TOTAL_EXPECTED"]=99,e[i[100]="RTC_SPK_TOTAL_RECOVERED_RED"]=100,e[i[101]="RTC_SPK_TOTAL_RECOVERED_FEC"]=101,e[i[102]="VIDEO_QUALITY_LIMITATION_DURATION_CPU"]=102,e[i[103]="VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU"]=103,e[i[104]="VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE"]=104,e}(),a}(),s.SdkStreamMetricFrame=function(){function a(i){if(this.metrics=[],this.dimensions=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkStreamMetricFrame"),a.prototype.streamId=0,a.prototype.groupId=0,a.prototype.metrics=g.emptyArray,a.prototype.dimensions=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(32).uint32(e.groupId),e.metrics!=null&&e.metrics.length)for(var r=0;r<e.metrics.length;++r)s.SdkMetric.encode(e.metrics[r],t.uint32(42).fork()).ldelim();if(e.dimensions!=null&&e.dimensions.length)for(var r=0;r<e.dimensions.length;++r)s.SdkStreamDimension.encode(e.dimensions[r],t.uint32(50).fork()).ldelim();return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkStreamMetricFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 3:{o.streamId=e.uint32();break}case 4:{o.groupId=e.uint32();break}case 5:{o.metrics&&o.metrics.length||(o.metrics=[]),o.metrics.push(s.SdkMetric.decode(e,e.uint32()));break}case 6:{o.dimensions&&o.dimensions.length||(o.dimensions=[]),o.dimensions.push(s.SdkStreamDimension.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!g.isInteger(e.streamId))return"streamId: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!g.isInteger(e.groupId))return"groupId: integer expected";if(e.metrics!=null&&e.hasOwnProperty("metrics")){if(!Array.isArray(e.metrics))return"metrics: array expected";for(var t=0;t<e.metrics.length;++t){var r=s.SdkMetric.verify(e.metrics[t]);if(r)return"metrics."+r}}if(e.dimensions!=null&&e.hasOwnProperty("dimensions")){if(!Array.isArray(e.dimensions))return"dimensions: array expected";for(var t=0;t<e.dimensions.length;++t){var r=s.SdkStreamDimension.verify(e.dimensions[t]);if(r)return"dimensions."+r}}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkStreamMetricFrame)return e;var t=new s.SdkStreamMetricFrame;if(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.metrics){if(!Array.isArray(e.metrics))throw TypeError(".SdkStreamMetricFrame.metrics: array expected");t.metrics=[];for(var r=0;r<e.metrics.length;++r){if(typeof e.metrics[r]!="object")throw TypeError(".SdkStreamMetricFrame.metrics: object expected");t.metrics[r]=s.SdkMetric.fromObject(e.metrics[r])}}if(e.dimensions){if(!Array.isArray(e.dimensions))throw TypeError(".SdkStreamMetricFrame.dimensions: array expected");t.dimensions=[];for(var r=0;r<e.dimensions.length;++r){if(typeof e.dimensions[r]!="object")throw TypeError(".SdkStreamMetricFrame.dimensions: object expected");t.dimensions[r]=s.SdkStreamDimension.fromObject(e.dimensions[r])}}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.metrics=[],r.dimensions=[]),t.defaults&&(r.streamId=0,r.groupId=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(r.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(r.groupId=e.groupId),e.metrics&&e.metrics.length){r.metrics=[];for(var o=0;o<e.metrics.length;++o)r.metrics[o]=s.SdkMetric.toObject(e.metrics[o],t)}if(e.dimensions&&e.dimensions.length){r.dimensions=[];for(var o=0;o<e.dimensions.length;++o)r.dimensions[o]=s.SdkStreamDimension.toObject(e.dimensions[o],t)}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamMetricFrame"},"getTypeUrl"),a}(),s.SdkClientMetricFrame=function(){function a(i){if(this.globalMetrics=[],this.streamMetricFrames=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkClientMetricFrame"),a.prototype.globalMetrics=g.emptyArray,a.prototype.streamMetricFrames=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.globalMetrics!=null&&e.globalMetrics.length)for(var r=0;r<e.globalMetrics.length;++r)s.SdkMetric.encode(e.globalMetrics[r],t.uint32(10).fork()).ldelim();if(e.streamMetricFrames!=null&&e.streamMetricFrames.length)for(var r=0;r<e.streamMetricFrames.length;++r)s.SdkStreamMetricFrame.encode(e.streamMetricFrames[r],t.uint32(18).fork()).ldelim();return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkClientMetricFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.globalMetrics&&o.globalMetrics.length||(o.globalMetrics=[]),o.globalMetrics.push(s.SdkMetric.decode(e,e.uint32()));break}case 2:{o.streamMetricFrames&&o.streamMetricFrames.length||(o.streamMetricFrames=[]),o.streamMetricFrames.push(s.SdkStreamMetricFrame.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.globalMetrics!=null&&e.hasOwnProperty("globalMetrics")){if(!Array.isArray(e.globalMetrics))return"globalMetrics: array expected";for(var t=0;t<e.globalMetrics.length;++t){var r=s.SdkMetric.verify(e.globalMetrics[t]);if(r)return"globalMetrics."+r}}if(e.streamMetricFrames!=null&&e.hasOwnProperty("streamMetricFrames")){if(!Array.isArray(e.streamMetricFrames))return"streamMetricFrames: array expected";for(var t=0;t<e.streamMetricFrames.length;++t){var r=s.SdkStreamMetricFrame.verify(e.streamMetricFrames[t]);if(r)return"streamMetricFrames."+r}}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkClientMetricFrame)return e;var t=new s.SdkClientMetricFrame;if(e.globalMetrics){if(!Array.isArray(e.globalMetrics))throw TypeError(".SdkClientMetricFrame.globalMetrics: array expected");t.globalMetrics=[];for(var r=0;r<e.globalMetrics.length;++r){if(typeof e.globalMetrics[r]!="object")throw TypeError(".SdkClientMetricFrame.globalMetrics: object expected");t.globalMetrics[r]=s.SdkMetric.fromObject(e.globalMetrics[r])}}if(e.streamMetricFrames){if(!Array.isArray(e.streamMetricFrames))throw TypeError(".SdkClientMetricFrame.streamMetricFrames: array expected");t.streamMetricFrames=[];for(var r=0;r<e.streamMetricFrames.length;++r){if(typeof e.streamMetricFrames[r]!="object")throw TypeError(".SdkClientMetricFrame.streamMetricFrames: object expected");t.streamMetricFrames[r]=s.SdkStreamMetricFrame.fromObject(e.streamMetricFrames[r])}}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.globalMetrics=[],r.streamMetricFrames=[]),e.globalMetrics&&e.globalMetrics.length){r.globalMetrics=[];for(var o=0;o<e.globalMetrics.length;++o)r.globalMetrics[o]=s.SdkMetric.toObject(e.globalMetrics[o],t)}if(e.streamMetricFrames&&e.streamMetricFrames.length){r.streamMetricFrames=[];for(var o=0;o<e.streamMetricFrames.length;++o)r.streamMetricFrames[o]=s.SdkStreamMetricFrame.toObject(e.streamMetricFrames[o],t)}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientMetricFrame"},"getTypeUrl"),a}(),s.SdkStreamDimension=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkStreamDimension"),a.prototype.type=1,a.prototype.value=null,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&s.SdkDimensionValue.encode(e.value,t.uint32(18).fork()).ldelim(),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkStreamDimension;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=s.SdkDimensionValue.decode(e,e.uint32());break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}if(e.value!=null&&e.hasOwnProperty("value")){var t=s.SdkDimensionValue.verify(e.value);if(t)return"value."+t}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkStreamDimension)return e;var t=new s.SdkStreamDimension;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ENCODER_NAME":case 1:t.type=1;break;case"VIDEO_DECODER_NAME":case 2:t.type=2;break}if(e.value!=null){if(typeof e.value!="object")throw TypeError(".SdkStreamDimension.value: object expected");t.value=s.SdkDimensionValue.fromObject(e.value)}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.type=t.enums===String?"VIDEO_ENCODER_NAME":1,r.value=null),e.type!=null&&e.hasOwnProperty("type")&&(r.type=t.enums===String?s.SdkStreamDimension.Type[e.type]===void 0?e.type:s.SdkStreamDimension.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(r.value=s.SdkDimensionValue.toObject(e.value,t)),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDimension"},"getTypeUrl"),a.Type=function(){var i={},e=Object.create(i);return e[i[1]="VIDEO_ENCODER_NAME"]=1,e[i[2]="VIDEO_DECODER_NAME"]=2,e}(),a}(),s.SdkDimensionValue=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkDimensionValue"),a.prototype.stringValue="",a.prototype.boolValue=!1,a.prototype.uintValue=g.Long?g.Long.fromBits(0,0,!0):0,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.stringValue!=null&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(10).string(e.stringValue),e.boolValue!=null&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),e.uintValue!=null&&Object.hasOwnProperty.call(e,"uintValue")&&t.uint32(24).uint64(e.uintValue),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkDimensionValue;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.stringValue=e.string();break}case 2:{o.boolValue=e.bool();break}case 3:{o.uintValue=e.uint64();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.stringValue!=null&&e.hasOwnProperty("stringValue")&&!g.isString(e.stringValue)?"stringValue: string expected":e.boolValue!=null&&e.hasOwnProperty("boolValue")&&typeof e.boolValue!="boolean"?"boolValue: boolean expected":e.uintValue!=null&&e.hasOwnProperty("uintValue")&&!g.isInteger(e.uintValue)&&!(e.uintValue&&g.isInteger(e.uintValue.low)&&g.isInteger(e.uintValue.high))?"uintValue: integer|Long expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkDimensionValue)return e;var t=new s.SdkDimensionValue;return e.stringValue!=null&&(t.stringValue=String(e.stringValue)),e.boolValue!=null&&(t.boolValue=Boolean(e.boolValue)),e.uintValue!=null&&(g.Long?(t.uintValue=g.Long.fromValue(e.uintValue)).unsigned=!0:typeof e.uintValue=="string"?t.uintValue=parseInt(e.uintValue,10):typeof e.uintValue=="number"?t.uintValue=e.uintValue:typeof e.uintValue=="object"&&(t.uintValue=new g.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0))),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if(t.defaults)if(r.stringValue="",r.boolValue=!1,g.Long){var o=new g.Long(0,0,!0);r.uintValue=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.uintValue=t.longs===String?"0":0;return e.stringValue!=null&&e.hasOwnProperty("stringValue")&&(r.stringValue=e.stringValue),e.boolValue!=null&&e.hasOwnProperty("boolValue")&&(r.boolValue=e.boolValue),e.uintValue!=null&&e.hasOwnProperty("uintValue")&&(typeof e.uintValue=="number"?r.uintValue=t.longs===String?String(e.uintValue):e.uintValue:r.uintValue=t.longs===String?g.Long.prototype.toString.call(e.uintValue):t.longs===Number?new g.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0):e.uintValue),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDimensionValue"},"getTypeUrl"),a}(),s.SdkDataMessageFrame=function(){function a(i){if(this.messages=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkDataMessageFrame"),a.prototype.messages=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.messages!=null&&e.messages.length)for(var r=0;r<e.messages.length;++r)s.SdkDataMessagePayload.encode(e.messages[r],t.uint32(10).fork()).ldelim();return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkDataMessageFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.messages&&o.messages.length||(o.messages=[]),o.messages.push(s.SdkDataMessagePayload.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.messages!=null&&e.hasOwnProperty("messages")){if(!Array.isArray(e.messages))return"messages: array expected";for(var t=0;t<e.messages.length;++t){var r=s.SdkDataMessagePayload.verify(e.messages[t]);if(r)return"messages."+r}}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkDataMessageFrame)return e;var t=new s.SdkDataMessageFrame;if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".SdkDataMessageFrame.messages: array expected");t.messages=[];for(var r=0;r<e.messages.length;++r){if(typeof e.messages[r]!="object")throw TypeError(".SdkDataMessageFrame.messages: object expected");t.messages[r]=s.SdkDataMessagePayload.fromObject(e.messages[r])}}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.messages=[]),e.messages&&e.messages.length){r.messages=[];for(var o=0;o<e.messages.length;++o)r.messages[o]=s.SdkDataMessagePayload.toObject(e.messages[o],t)}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessageFrame"},"getTypeUrl"),a}(),s.SdkDataMessagePayload=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkDataMessagePayload"),a.prototype.topic="",a.prototype.data=g.newBuffer([]),a.prototype.lifetimeMs=0,a.prototype.senderAttendeeId="",a.prototype.ingestTimeNs=g.Long?g.Long.fromBits(0,0,!1):0,a.prototype.senderExternalUserId="",a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.topic!=null&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),e.data!=null&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),e.lifetimeMs!=null&&Object.hasOwnProperty.call(e,"lifetimeMs")&&t.uint32(24).uint32(e.lifetimeMs),e.senderAttendeeId!=null&&Object.hasOwnProperty.call(e,"senderAttendeeId")&&t.uint32(34).string(e.senderAttendeeId),e.ingestTimeNs!=null&&Object.hasOwnProperty.call(e,"ingestTimeNs")&&t.uint32(40).int64(e.ingestTimeNs),e.senderExternalUserId!=null&&Object.hasOwnProperty.call(e,"senderExternalUserId")&&t.uint32(50).string(e.senderExternalUserId),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkDataMessagePayload;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.topic=e.string();break}case 2:{o.data=e.bytes();break}case 3:{o.lifetimeMs=e.uint32();break}case 4:{o.senderAttendeeId=e.string();break}case 5:{o.ingestTimeNs=e.int64();break}case 6:{o.senderExternalUserId=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.topic!=null&&e.hasOwnProperty("topic")&&!g.isString(e.topic)?"topic: string expected":e.data!=null&&e.hasOwnProperty("data")&&!(e.data&&typeof e.data.length=="number"||g.isString(e.data))?"data: buffer expected":e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&!g.isInteger(e.lifetimeMs)?"lifetimeMs: integer expected":e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&!g.isString(e.senderAttendeeId)?"senderAttendeeId: string expected":e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&!g.isInteger(e.ingestTimeNs)&&!(e.ingestTimeNs&&g.isInteger(e.ingestTimeNs.low)&&g.isInteger(e.ingestTimeNs.high))?"ingestTimeNs: integer|Long expected":e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&!g.isString(e.senderExternalUserId)?"senderExternalUserId: string expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkDataMessagePayload)return e;var t=new s.SdkDataMessagePayload;return e.topic!=null&&(t.topic=String(e.topic)),e.data!=null&&(typeof e.data=="string"?g.base64.decode(e.data,t.data=g.newBuffer(g.base64.length(e.data)),0):e.data.length>=0&&(t.data=e.data)),e.lifetimeMs!=null&&(t.lifetimeMs=e.lifetimeMs>>>0),e.senderAttendeeId!=null&&(t.senderAttendeeId=String(e.senderAttendeeId)),e.ingestTimeNs!=null&&(g.Long?(t.ingestTimeNs=g.Long.fromValue(e.ingestTimeNs)).unsigned=!1:typeof e.ingestTimeNs=="string"?t.ingestTimeNs=parseInt(e.ingestTimeNs,10):typeof e.ingestTimeNs=="number"?t.ingestTimeNs=e.ingestTimeNs:typeof e.ingestTimeNs=="object"&&(t.ingestTimeNs=new g.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber())),e.senderExternalUserId!=null&&(t.senderExternalUserId=String(e.senderExternalUserId)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if(t.defaults){if(r.topic="",t.bytes===String?r.data="":(r.data=[],t.bytes!==Array&&(r.data=g.newBuffer(r.data))),r.lifetimeMs=0,r.senderAttendeeId="",g.Long){var o=new g.Long(0,0,!1);r.ingestTimeNs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.ingestTimeNs=t.longs===String?"0":0;r.senderExternalUserId=""}return e.topic!=null&&e.hasOwnProperty("topic")&&(r.topic=e.topic),e.data!=null&&e.hasOwnProperty("data")&&(r.data=t.bytes===String?g.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&(r.lifetimeMs=e.lifetimeMs),e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&(r.senderAttendeeId=e.senderAttendeeId),e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&(typeof e.ingestTimeNs=="number"?r.ingestTimeNs=t.longs===String?String(e.ingestTimeNs):e.ingestTimeNs:r.ingestTimeNs=t.longs===String?g.Long.prototype.toString.call(e.ingestTimeNs):t.longs===Number?new g.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber():e.ingestTimeNs),e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&(r.senderExternalUserId=e.senderExternalUserId),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessagePayload"},"getTypeUrl"),a}(),s.SdkTurnCredentials=function(){function a(i){if(this.uris=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkTurnCredentials"),a.prototype.username="",a.prototype.password="",a.prototype.ttl=0,a.prototype.uris=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.username!=null&&Object.hasOwnProperty.call(e,"username")&&t.uint32(10).string(e.username),e.password!=null&&Object.hasOwnProperty.call(e,"password")&&t.uint32(18).string(e.password),e.ttl!=null&&Object.hasOwnProperty.call(e,"ttl")&&t.uint32(24).uint32(e.ttl),e.uris!=null&&e.uris.length)for(var r=0;r<e.uris.length;++r)t.uint32(34).string(e.uris[r]);return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkTurnCredentials;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.username=e.string();break}case 2:{o.password=e.string();break}case 3:{o.ttl=e.uint32();break}case 4:{o.uris&&o.uris.length||(o.uris=[]),o.uris.push(e.string());break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.username!=null&&e.hasOwnProperty("username")&&!g.isString(e.username))return"username: string expected";if(e.password!=null&&e.hasOwnProperty("password")&&!g.isString(e.password))return"password: string expected";if(e.ttl!=null&&e.hasOwnProperty("ttl")&&!g.isInteger(e.ttl))return"ttl: integer expected";if(e.uris!=null&&e.hasOwnProperty("uris")){if(!Array.isArray(e.uris))return"uris: array expected";for(var t=0;t<e.uris.length;++t)if(!g.isString(e.uris[t]))return"uris: string[] expected"}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkTurnCredentials)return e;var t=new s.SdkTurnCredentials;if(e.username!=null&&(t.username=String(e.username)),e.password!=null&&(t.password=String(e.password)),e.ttl!=null&&(t.ttl=e.ttl>>>0),e.uris){if(!Array.isArray(e.uris))throw TypeError(".SdkTurnCredentials.uris: array expected");t.uris=[];for(var r=0;r<e.uris.length;++r)t.uris[r]=String(e.uris[r])}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.uris=[]),t.defaults&&(r.username="",r.password="",r.ttl=0),e.username!=null&&e.hasOwnProperty("username")&&(r.username=e.username),e.password!=null&&e.hasOwnProperty("password")&&(r.password=e.password),e.ttl!=null&&e.hasOwnProperty("ttl")&&(r.ttl=e.ttl),e.uris&&e.uris.length){r.uris=[];for(var o=0;o<e.uris.length;++o)r.uris[o]=e.uris[o]}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTurnCredentials"},"getTypeUrl"),a}(),s.SdkTranscriptItem=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkTranscriptItem"),a.prototype.content="",a.prototype.endTime=g.Long?g.Long.fromBits(0,0,!1):0,a.prototype.speakerAttendeeId="",a.prototype.speakerExternalUserId="",a.prototype.startTime=g.Long?g.Long.fromBits(0,0,!1):0,a.prototype.type=1,a.prototype.vocabularyFilterMatch=!1,a.prototype.confidence=0,a.prototype.stable=!1,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(10).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(16).int64(e.endTime),e.speakerAttendeeId!=null&&Object.hasOwnProperty.call(e,"speakerAttendeeId")&&t.uint32(26).string(e.speakerAttendeeId),e.speakerExternalUserId!=null&&Object.hasOwnProperty.call(e,"speakerExternalUserId")&&t.uint32(34).string(e.speakerExternalUserId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(48).int32(e.type),e.vocabularyFilterMatch!=null&&Object.hasOwnProperty.call(e,"vocabularyFilterMatch")&&t.uint32(56).bool(e.vocabularyFilterMatch),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(65).double(e.confidence),e.stable!=null&&Object.hasOwnProperty.call(e,"stable")&&t.uint32(72).bool(e.stable),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkTranscriptItem;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.content=e.string();break}case 2:{o.endTime=e.int64();break}case 3:{o.speakerAttendeeId=e.string();break}case 4:{o.speakerExternalUserId=e.string();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.int32();break}case 7:{o.vocabularyFilterMatch=e.bool();break}case 8:{o.confidence=e.double();break}case 9:{o.stable=e.bool();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.content!=null&&e.hasOwnProperty("content")&&!g.isString(e.content))return"content: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!g.isInteger(e.endTime)&&!(e.endTime&&g.isInteger(e.endTime.low)&&g.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&!g.isString(e.speakerAttendeeId))return"speakerAttendeeId: string expected";if(e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&!g.isString(e.speakerExternalUserId))return"speakerExternalUserId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!g.isInteger(e.startTime)&&!(e.startTime&&g.isInteger(e.startTime.low)&&g.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&typeof e.vocabularyFilterMatch!="boolean"?"vocabularyFilterMatch: boolean expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.stable!=null&&e.hasOwnProperty("stable")&&typeof e.stable!="boolean"?"stable: boolean expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkTranscriptItem)return e;var t=new s.SdkTranscriptItem;switch(e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(g.Long?(t.endTime=g.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.speakerAttendeeId!=null&&(t.speakerAttendeeId=String(e.speakerAttendeeId)),e.speakerExternalUserId!=null&&(t.speakerExternalUserId=String(e.speakerExternalUserId)),e.startTime!=null&&(g.Long?(t.startTime=g.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PRONUNCIATION":case 1:t.type=1;break;case"PUNCTUATION":case 2:t.type=2;break}return e.vocabularyFilterMatch!=null&&(t.vocabularyFilterMatch=Boolean(e.vocabularyFilterMatch)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.stable!=null&&(t.stable=Boolean(e.stable)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if(t.defaults){if(r.content="",g.Long){var o=new g.Long(0,0,!1);r.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.endTime=t.longs===String?"0":0;if(r.speakerAttendeeId="",r.speakerExternalUserId="",g.Long){var o=new g.Long(0,0,!1);r.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.startTime=t.longs===String?"0":0;r.type=t.enums===String?"PRONUNCIATION":1,r.vocabularyFilterMatch=!1,r.confidence=0,r.stable=!1}return e.content!=null&&e.hasOwnProperty("content")&&(r.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?r.endTime=t.longs===String?String(e.endTime):e.endTime:r.endTime=t.longs===String?g.Long.prototype.toString.call(e.endTime):t.longs===Number?new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&(r.speakerAttendeeId=e.speakerAttendeeId),e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&(r.speakerExternalUserId=e.speakerExternalUserId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?r.startTime=t.longs===String?String(e.startTime):e.startTime:r.startTime=t.longs===String?g.Long.prototype.toString.call(e.startTime):t.longs===Number?new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(r.type=t.enums===String?s.SdkTranscriptItem.Type[e.type]===void 0?e.type:s.SdkTranscriptItem.Type[e.type]:e.type),e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&(r.vocabularyFilterMatch=e.vocabularyFilterMatch),e.confidence!=null&&e.hasOwnProperty("confidence")&&(r.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.stable!=null&&e.hasOwnProperty("stable")&&(r.stable=e.stable),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptItem"},"getTypeUrl"),a.Type=function(){var i={},e=Object.create(i);return e[i[1]="PRONUNCIATION"]=1,e[i[2]="PUNCTUATION"]=2,e}(),a}(),s.SdkTranscriptEntity=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkTranscriptEntity"),a.prototype.category="",a.prototype.confidence=0,a.prototype.content="",a.prototype.endTime=g.Long?g.Long.fromBits(0,0,!1):0,a.prototype.startTime=g.Long?g.Long.fromBits(0,0,!1):0,a.prototype.type="",a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.category!=null&&Object.hasOwnProperty.call(e,"category")&&t.uint32(10).string(e.category),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(17).double(e.confidence),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(26).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(32).int64(e.endTime),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(50).string(e.type),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkTranscriptEntity;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.category=e.string();break}case 2:{o.confidence=e.double();break}case 3:{o.content=e.string();break}case 4:{o.endTime=e.int64();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.category!=null&&e.hasOwnProperty("category")&&!g.isString(e.category)?"category: string expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.content!=null&&e.hasOwnProperty("content")&&!g.isString(e.content)?"content: string expected":e.endTime!=null&&e.hasOwnProperty("endTime")&&!g.isInteger(e.endTime)&&!(e.endTime&&g.isInteger(e.endTime.low)&&g.isInteger(e.endTime.high))?"endTime: integer|Long expected":e.startTime!=null&&e.hasOwnProperty("startTime")&&!g.isInteger(e.startTime)&&!(e.startTime&&g.isInteger(e.startTime.low)&&g.isInteger(e.startTime.high))?"startTime: integer|Long expected":e.type!=null&&e.hasOwnProperty("type")&&!g.isString(e.type)?"type: string expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkTranscriptEntity)return e;var t=new s.SdkTranscriptEntity;return e.category!=null&&(t.category=String(e.category)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(g.Long?(t.endTime=g.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.startTime!=null&&(g.Long?(t.startTime=g.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type!=null&&(t.type=String(e.type)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if(t.defaults){if(r.category="",r.confidence=0,r.content="",g.Long){var o=new g.Long(0,0,!1);r.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.endTime=t.longs===String?"0":0;if(g.Long){var o=new g.Long(0,0,!1);r.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.startTime=t.longs===String?"0":0;r.type=""}return e.category!=null&&e.hasOwnProperty("category")&&(r.category=e.category),e.confidence!=null&&e.hasOwnProperty("confidence")&&(r.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.content!=null&&e.hasOwnProperty("content")&&(r.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?r.endTime=t.longs===String?String(e.endTime):e.endTime:r.endTime=t.longs===String?g.Long.prototype.toString.call(e.endTime):t.longs===Number?new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?r.startTime=t.longs===String?String(e.startTime):e.startTime:r.startTime=t.longs===String?g.Long.prototype.toString.call(e.startTime):t.longs===Number?new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(r.type=e.type),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptEntity"},"getTypeUrl"),a}(),s.SdkTranscriptAlternative=function(){function a(i){if(this.items=[],this.entities=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkTranscriptAlternative"),a.prototype.items=g.emptyArray,a.prototype.transcript="",a.prototype.entities=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.items!=null&&e.items.length)for(var r=0;r<e.items.length;++r)s.SdkTranscriptItem.encode(e.items[r],t.uint32(10).fork()).ldelim();if(e.transcript!=null&&Object.hasOwnProperty.call(e,"transcript")&&t.uint32(18).string(e.transcript),e.entities!=null&&e.entities.length)for(var r=0;r<e.entities.length;++r)s.SdkTranscriptEntity.encode(e.entities[r],t.uint32(26).fork()).ldelim();return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkTranscriptAlternative;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.items&&o.items.length||(o.items=[]),o.items.push(s.SdkTranscriptItem.decode(e,e.uint32()));break}case 2:{o.transcript=e.string();break}case 3:{o.entities&&o.entities.length||(o.entities=[]),o.entities.push(s.SdkTranscriptEntity.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.items!=null&&e.hasOwnProperty("items")){if(!Array.isArray(e.items))return"items: array expected";for(var t=0;t<e.items.length;++t){var r=s.SdkTranscriptItem.verify(e.items[t]);if(r)return"items."+r}}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&!g.isString(e.transcript))return"transcript: string expected";if(e.entities!=null&&e.hasOwnProperty("entities")){if(!Array.isArray(e.entities))return"entities: array expected";for(var t=0;t<e.entities.length;++t){var r=s.SdkTranscriptEntity.verify(e.entities[t]);if(r)return"entities."+r}}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkTranscriptAlternative)return e;var t=new s.SdkTranscriptAlternative;if(e.items){if(!Array.isArray(e.items))throw TypeError(".SdkTranscriptAlternative.items: array expected");t.items=[];for(var r=0;r<e.items.length;++r){if(typeof e.items[r]!="object")throw TypeError(".SdkTranscriptAlternative.items: object expected");t.items[r]=s.SdkTranscriptItem.fromObject(e.items[r])}}if(e.transcript!=null&&(t.transcript=String(e.transcript)),e.entities){if(!Array.isArray(e.entities))throw TypeError(".SdkTranscriptAlternative.entities: array expected");t.entities=[];for(var r=0;r<e.entities.length;++r){if(typeof e.entities[r]!="object")throw TypeError(".SdkTranscriptAlternative.entities: object expected");t.entities[r]=s.SdkTranscriptEntity.fromObject(e.entities[r])}}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.items=[],r.entities=[]),t.defaults&&(r.transcript=""),e.items&&e.items.length){r.items=[];for(var o=0;o<e.items.length;++o)r.items[o]=s.SdkTranscriptItem.toObject(e.items[o],t)}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&(r.transcript=e.transcript),e.entities&&e.entities.length){r.entities=[];for(var o=0;o<e.entities.length;++o)r.entities[o]=s.SdkTranscriptEntity.toObject(e.entities[o],t)}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptAlternative"},"getTypeUrl"),a}(),s.SdkTranscriptLanguageWithScore=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkTranscriptLanguageWithScore"),a.prototype.languageCode="",a.prototype.score=0,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(10).string(e.languageCode),e.score!=null&&Object.hasOwnProperty.call(e,"score")&&t.uint32(17).double(e.score),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkTranscriptLanguageWithScore;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.languageCode=e.string();break}case 2:{o.score=e.double();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!g.isString(e.languageCode)?"languageCode: string expected":e.score!=null&&e.hasOwnProperty("score")&&typeof e.score!="number"?"score: number expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkTranscriptLanguageWithScore)return e;var t=new s.SdkTranscriptLanguageWithScore;return e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.score!=null&&(t.score=Number(e.score)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.languageCode="",r.score=0),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(r.languageCode=e.languageCode),e.score!=null&&e.hasOwnProperty("score")&&(r.score=t.json&&!isFinite(e.score)?String(e.score):e.score),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptLanguageWithScore"},"getTypeUrl"),a}(),s.SdkTranscriptResult=function(){function a(i){if(this.alternatives=[],this.languageIdentification=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkTranscriptResult"),a.prototype.alternatives=g.emptyArray,a.prototype.channelId="",a.prototype.endTime=g.Long?g.Long.fromBits(0,0,!1):0,a.prototype.isPartial=!1,a.prototype.resultId="",a.prototype.startTime=g.Long?g.Long.fromBits(0,0,!1):0,a.prototype.languageCode="",a.prototype.languageIdentification=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.alternatives!=null&&e.alternatives.length)for(var r=0;r<e.alternatives.length;++r)s.SdkTranscriptAlternative.encode(e.alternatives[r],t.uint32(10).fork()).ldelim();if(e.channelId!=null&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(24).int64(e.endTime),e.isPartial!=null&&Object.hasOwnProperty.call(e,"isPartial")&&t.uint32(32).bool(e.isPartial),e.resultId!=null&&Object.hasOwnProperty.call(e,"resultId")&&t.uint32(42).string(e.resultId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(48).int64(e.startTime),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(58).string(e.languageCode),e.languageIdentification!=null&&e.languageIdentification.length)for(var r=0;r<e.languageIdentification.length;++r)s.SdkTranscriptLanguageWithScore.encode(e.languageIdentification[r],t.uint32(66).fork()).ldelim();return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkTranscriptResult;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.alternatives&&o.alternatives.length||(o.alternatives=[]),o.alternatives.push(s.SdkTranscriptAlternative.decode(e,e.uint32()));break}case 2:{o.channelId=e.string();break}case 3:{o.endTime=e.int64();break}case 4:{o.isPartial=e.bool();break}case 5:{o.resultId=e.string();break}case 6:{o.startTime=e.int64();break}case 7:{o.languageCode=e.string();break}case 8:{o.languageIdentification&&o.languageIdentification.length||(o.languageIdentification=[]),o.languageIdentification.push(s.SdkTranscriptLanguageWithScore.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.alternatives!=null&&e.hasOwnProperty("alternatives")){if(!Array.isArray(e.alternatives))return"alternatives: array expected";for(var t=0;t<e.alternatives.length;++t){var r=s.SdkTranscriptAlternative.verify(e.alternatives[t]);if(r)return"alternatives."+r}}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&!g.isString(e.channelId))return"channelId: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!g.isInteger(e.endTime)&&!(e.endTime&&g.isInteger(e.endTime.low)&&g.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.isPartial!=null&&e.hasOwnProperty("isPartial")&&typeof e.isPartial!="boolean")return"isPartial: boolean expected";if(e.resultId!=null&&e.hasOwnProperty("resultId")&&!g.isString(e.resultId))return"resultId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!g.isInteger(e.startTime)&&!(e.startTime&&g.isInteger(e.startTime.low)&&g.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!g.isString(e.languageCode))return"languageCode: string expected";if(e.languageIdentification!=null&&e.hasOwnProperty("languageIdentification")){if(!Array.isArray(e.languageIdentification))return"languageIdentification: array expected";for(var t=0;t<e.languageIdentification.length;++t){var r=s.SdkTranscriptLanguageWithScore.verify(e.languageIdentification[t]);if(r)return"languageIdentification."+r}}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkTranscriptResult)return e;var t=new s.SdkTranscriptResult;if(e.alternatives){if(!Array.isArray(e.alternatives))throw TypeError(".SdkTranscriptResult.alternatives: array expected");t.alternatives=[];for(var r=0;r<e.alternatives.length;++r){if(typeof e.alternatives[r]!="object")throw TypeError(".SdkTranscriptResult.alternatives: object expected");t.alternatives[r]=s.SdkTranscriptAlternative.fromObject(e.alternatives[r])}}if(e.channelId!=null&&(t.channelId=String(e.channelId)),e.endTime!=null&&(g.Long?(t.endTime=g.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.isPartial!=null&&(t.isPartial=Boolean(e.isPartial)),e.resultId!=null&&(t.resultId=String(e.resultId)),e.startTime!=null&&(g.Long?(t.startTime=g.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.languageIdentification){if(!Array.isArray(e.languageIdentification))throw TypeError(".SdkTranscriptResult.languageIdentification: array expected");t.languageIdentification=[];for(var r=0;r<e.languageIdentification.length;++r){if(typeof e.languageIdentification[r]!="object")throw TypeError(".SdkTranscriptResult.languageIdentification: object expected");t.languageIdentification[r]=s.SdkTranscriptLanguageWithScore.fromObject(e.languageIdentification[r])}}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.alternatives=[],r.languageIdentification=[]),t.defaults){if(r.channelId="",g.Long){var o=new g.Long(0,0,!1);r.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.endTime=t.longs===String?"0":0;if(r.isPartial=!1,r.resultId="",g.Long){var o=new g.Long(0,0,!1);r.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.startTime=t.longs===String?"0":0;r.languageCode=""}if(e.alternatives&&e.alternatives.length){r.alternatives=[];for(var f=0;f<e.alternatives.length;++f)r.alternatives[f]=s.SdkTranscriptAlternative.toObject(e.alternatives[f],t)}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&(r.channelId=e.channelId),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?r.endTime=t.longs===String?String(e.endTime):e.endTime:r.endTime=t.longs===String?g.Long.prototype.toString.call(e.endTime):t.longs===Number?new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.isPartial!=null&&e.hasOwnProperty("isPartial")&&(r.isPartial=e.isPartial),e.resultId!=null&&e.hasOwnProperty("resultId")&&(r.resultId=e.resultId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?r.startTime=t.longs===String?String(e.startTime):e.startTime:r.startTime=t.longs===String?g.Long.prototype.toString.call(e.startTime):t.longs===Number?new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(r.languageCode=e.languageCode),e.languageIdentification&&e.languageIdentification.length){r.languageIdentification=[];for(var f=0;f<e.languageIdentification.length;++f)r.languageIdentification[f]=s.SdkTranscriptLanguageWithScore.toObject(e.languageIdentification[f],t)}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptResult"},"getTypeUrl"),a}(),s.SdkTranscript=function(){function a(i){if(this.results=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkTranscript"),a.prototype.results=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.results!=null&&e.results.length)for(var r=0;r<e.results.length;++r)s.SdkTranscriptResult.encode(e.results[r],t.uint32(10).fork()).ldelim();return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkTranscript;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.results&&o.results.length||(o.results=[]),o.results.push(s.SdkTranscriptResult.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.results!=null&&e.hasOwnProperty("results")){if(!Array.isArray(e.results))return"results: array expected";for(var t=0;t<e.results.length;++t){var r=s.SdkTranscriptResult.verify(e.results[t]);if(r)return"results."+r}}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkTranscript)return e;var t=new s.SdkTranscript;if(e.results){if(!Array.isArray(e.results))throw TypeError(".SdkTranscript.results: array expected");t.results=[];for(var r=0;r<e.results.length;++r){if(typeof e.results[r]!="object")throw TypeError(".SdkTranscript.results: object expected");t.results[r]=s.SdkTranscriptResult.fromObject(e.results[r])}}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.results=[]),e.results&&e.results.length){r.results=[];for(var o=0;o<e.results.length;++o)r.results[o]=s.SdkTranscriptResult.toObject(e.results[o],t)}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscript"},"getTypeUrl"),a}(),s.SdkTranscriptionStatus=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkTranscriptionStatus"),a.prototype.type=1,a.prototype.eventTime=g.Long?g.Long.fromBits(0,0,!1):0,a.prototype.transcriptionRegion="",a.prototype.transcriptionConfiguration="",a.prototype.message="",a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.eventTime!=null&&Object.hasOwnProperty.call(e,"eventTime")&&t.uint32(16).int64(e.eventTime),e.transcriptionRegion!=null&&Object.hasOwnProperty.call(e,"transcriptionRegion")&&t.uint32(26).string(e.transcriptionRegion),e.transcriptionConfiguration!=null&&Object.hasOwnProperty.call(e,"transcriptionConfiguration")&&t.uint32(34).string(e.transcriptionConfiguration),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(42).string(e.message),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkTranscriptionStatus;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.type=e.int32();break}case 2:{o.eventTime=e.int64();break}case 3:{o.transcriptionRegion=e.string();break}case 4:{o.transcriptionConfiguration=e.string();break}case 5:{o.message=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:break}return e.eventTime!=null&&e.hasOwnProperty("eventTime")&&!g.isInteger(e.eventTime)&&!(e.eventTime&&g.isInteger(e.eventTime.low)&&g.isInteger(e.eventTime.high))?"eventTime: integer|Long expected":e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&!g.isString(e.transcriptionRegion)?"transcriptionRegion: string expected":e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&!g.isString(e.transcriptionConfiguration)?"transcriptionConfiguration: string expected":e.message!=null&&e.hasOwnProperty("message")&&!g.isString(e.message)?"message: string expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkTranscriptionStatus)return e;var t=new s.SdkTranscriptionStatus;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"STARTED":case 1:t.type=1;break;case"INTERRUPTED":case 2:t.type=2;break;case"RESUMED":case 3:t.type=3;break;case"STOPPED":case 4:t.type=4;break;case"FAILED":case 5:t.type=5;break}return e.eventTime!=null&&(g.Long?(t.eventTime=g.Long.fromValue(e.eventTime)).unsigned=!1:typeof e.eventTime=="string"?t.eventTime=parseInt(e.eventTime,10):typeof e.eventTime=="number"?t.eventTime=e.eventTime:typeof e.eventTime=="object"&&(t.eventTime=new g.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber())),e.transcriptionRegion!=null&&(t.transcriptionRegion=String(e.transcriptionRegion)),e.transcriptionConfiguration!=null&&(t.transcriptionConfiguration=String(e.transcriptionConfiguration)),e.message!=null&&(t.message=String(e.message)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if(t.defaults){if(r.type=t.enums===String?"STARTED":1,g.Long){var o=new g.Long(0,0,!1);r.eventTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.eventTime=t.longs===String?"0":0;r.transcriptionRegion="",r.transcriptionConfiguration="",r.message=""}return e.type!=null&&e.hasOwnProperty("type")&&(r.type=t.enums===String?s.SdkTranscriptionStatus.Type[e.type]===void 0?e.type:s.SdkTranscriptionStatus.Type[e.type]:e.type),e.eventTime!=null&&e.hasOwnProperty("eventTime")&&(typeof e.eventTime=="number"?r.eventTime=t.longs===String?String(e.eventTime):e.eventTime:r.eventTime=t.longs===String?g.Long.prototype.toString.call(e.eventTime):t.longs===Number?new g.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber():e.eventTime),e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&(r.transcriptionRegion=e.transcriptionRegion),e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&(r.transcriptionConfiguration=e.transcriptionConfiguration),e.message!=null&&e.hasOwnProperty("message")&&(r.message=e.message),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptionStatus"},"getTypeUrl"),a.Type=function(){var i={},e=Object.create(i);return e[i[1]="STARTED"]=1,e[i[2]="INTERRUPTED"]=2,e[i[3]="RESUMED"]=3,e[i[4]="STOPPED"]=4,e[i[5]="FAILED"]=5,e}(),a}(),s.SdkTranscriptEvent=function(){function a(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)e[t[r]]!=null&&(this[t[r]]=e[t[r]])}n(a,"SdkTranscriptEvent"),a.prototype.status=null,a.prototype.transcript=null;var i;return Object.defineProperty(a.prototype,"Event",{get:g.oneOfGetter(i=["status","transcript"]),set:g.oneOfSetter(i)}),a.create=n(function(t){return new a(t)},"create"),a.encode=n(function(t,r){return r||(r=v.create()),t.status!=null&&Object.hasOwnProperty.call(t,"status")&&s.SdkTranscriptionStatus.encode(t.status,r.uint32(10).fork()).ldelim(),t.transcript!=null&&Object.hasOwnProperty.call(t,"transcript")&&s.SdkTranscript.encode(t.transcript,r.uint32(18).fork()).ldelim(),r},"encode"),a.encodeDelimited=n(function(t,r){return this.encode(t,r).ldelim()},"encodeDelimited"),a.decode=n(function(t,r){t instanceof m||(t=m.create(t));for(var o=r===void 0?t.len:t.pos+r,f=new s.SdkTranscriptEvent;t.pos<o;){var h=t.uint32();switch(h>>>3){case 1:{f.status=s.SdkTranscriptionStatus.decode(t,t.uint32());break}case 2:{f.transcript=s.SdkTranscript.decode(t,t.uint32());break}default:t.skipType(h&7);break}}return f},"decode"),a.decodeDelimited=n(function(t){return t instanceof m||(t=new m(t)),this.decode(t,t.uint32())},"decodeDelimited"),a.verify=n(function(t){if(typeof t!="object"||t===null)return"object expected";var r={};if(t.status!=null&&t.hasOwnProperty("status")){r.Event=1;{var o=s.SdkTranscriptionStatus.verify(t.status);if(o)return"status."+o}}if(t.transcript!=null&&t.hasOwnProperty("transcript")){if(r.Event===1)return"Event: multiple values";r.Event=1;{var o=s.SdkTranscript.verify(t.transcript);if(o)return"transcript."+o}}return null},"verify"),a.fromObject=n(function(t){if(t instanceof s.SdkTranscriptEvent)return t;var r=new s.SdkTranscriptEvent;if(t.status!=null){if(typeof t.status!="object")throw TypeError(".SdkTranscriptEvent.status: object expected");r.status=s.SdkTranscriptionStatus.fromObject(t.status)}if(t.transcript!=null){if(typeof t.transcript!="object")throw TypeError(".SdkTranscriptEvent.transcript: object expected");r.transcript=s.SdkTranscript.fromObject(t.transcript)}return r},"fromObject"),a.toObject=n(function(t,r){r||(r={});var o={};return t.status!=null&&t.hasOwnProperty("status")&&(o.status=s.SdkTranscriptionStatus.toObject(t.status,r),r.oneofs&&(o.Event="status")),t.transcript!=null&&t.hasOwnProperty("transcript")&&(o.transcript=s.SdkTranscript.toObject(t.transcript,r),r.oneofs&&(o.Event="transcript")),o},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(t){return t===void 0&&(t="type.googleapis.com"),t+"/SdkTranscriptEvent"},"getTypeUrl"),a}(),s.SdkTranscriptFrame=function(){function a(i){if(this.events=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkTranscriptFrame"),a.prototype.events=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.events!=null&&e.events.length)for(var r=0;r<e.events.length;++r)s.SdkTranscriptEvent.encode(e.events[r],t.uint32(10).fork()).ldelim();return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkTranscriptFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.events&&o.events.length||(o.events=[]),o.events.push(s.SdkTranscriptEvent.decode(e,e.uint32()));break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.events!=null&&e.hasOwnProperty("events")){if(!Array.isArray(e.events))return"events: array expected";for(var t=0;t<e.events.length;++t){var r=s.SdkTranscriptEvent.verify(e.events[t]);if(r)return"events."+r}}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkTranscriptFrame)return e;var t=new s.SdkTranscriptFrame;if(e.events){if(!Array.isArray(e.events))throw TypeError(".SdkTranscriptFrame.events: array expected");t.events=[];for(var r=0;r<e.events.length;++r){if(typeof e.events[r]!="object")throw TypeError(".SdkTranscriptFrame.events: object expected");t.events[r]=s.SdkTranscriptEvent.fromObject(e.events[r])}}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.events=[]),e.events&&e.events.length){r.events=[];for(var o=0;o<e.events.length;++o)r.events[o]=s.SdkTranscriptEvent.toObject(e.events[o],t)}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptFrame"},"getTypeUrl"),a}(),s.SdkRemoteVideoUpdateFrame=function(){function a(i){if(this.addedOrUpdatedVideoSubscriptions=[],this.removedVideoSubscriptionMids=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkRemoteVideoUpdateFrame"),a.prototype.addedOrUpdatedVideoSubscriptions=g.emptyArray,a.prototype.removedVideoSubscriptionMids=g.emptyArray,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){if(t||(t=v.create()),e.addedOrUpdatedVideoSubscriptions!=null&&e.addedOrUpdatedVideoSubscriptions.length)for(var r=0;r<e.addedOrUpdatedVideoSubscriptions.length;++r)s.SdkVideoSubscriptionConfiguration.encode(e.addedOrUpdatedVideoSubscriptions[r],t.uint32(10).fork()).ldelim();if(e.removedVideoSubscriptionMids!=null&&e.removedVideoSubscriptionMids.length)for(var r=0;r<e.removedVideoSubscriptionMids.length;++r)t.uint32(18).string(e.removedVideoSubscriptionMids[r]);return t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkRemoteVideoUpdateFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.addedOrUpdatedVideoSubscriptions&&o.addedOrUpdatedVideoSubscriptions.length||(o.addedOrUpdatedVideoSubscriptions=[]),o.addedOrUpdatedVideoSubscriptions.push(s.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}case 2:{o.removedVideoSubscriptionMids&&o.removedVideoSubscriptionMids.length||(o.removedVideoSubscriptionMids=[]),o.removedVideoSubscriptionMids.push(e.string());break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.addedOrUpdatedVideoSubscriptions!=null&&e.hasOwnProperty("addedOrUpdatedVideoSubscriptions")){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))return"addedOrUpdatedVideoSubscriptions: array expected";for(var t=0;t<e.addedOrUpdatedVideoSubscriptions.length;++t){var r=s.SdkVideoSubscriptionConfiguration.verify(e.addedOrUpdatedVideoSubscriptions[t]);if(r)return"addedOrUpdatedVideoSubscriptions."+r}}if(e.removedVideoSubscriptionMids!=null&&e.hasOwnProperty("removedVideoSubscriptionMids")){if(!Array.isArray(e.removedVideoSubscriptionMids))return"removedVideoSubscriptionMids: array expected";for(var t=0;t<e.removedVideoSubscriptionMids.length;++t)if(!g.isString(e.removedVideoSubscriptionMids[t]))return"removedVideoSubscriptionMids: string[] expected"}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkRemoteVideoUpdateFrame)return e;var t=new s.SdkRemoteVideoUpdateFrame;if(e.addedOrUpdatedVideoSubscriptions){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: array expected");t.addedOrUpdatedVideoSubscriptions=[];for(var r=0;r<e.addedOrUpdatedVideoSubscriptions.length;++r){if(typeof e.addedOrUpdatedVideoSubscriptions[r]!="object")throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: object expected");t.addedOrUpdatedVideoSubscriptions[r]=s.SdkVideoSubscriptionConfiguration.fromObject(e.addedOrUpdatedVideoSubscriptions[r])}}if(e.removedVideoSubscriptionMids){if(!Array.isArray(e.removedVideoSubscriptionMids))throw TypeError(".SdkRemoteVideoUpdateFrame.removedVideoSubscriptionMids: array expected");t.removedVideoSubscriptionMids=[];for(var r=0;r<e.removedVideoSubscriptionMids.length;++r)t.removedVideoSubscriptionMids[r]=String(e.removedVideoSubscriptionMids[r])}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.addedOrUpdatedVideoSubscriptions=[],r.removedVideoSubscriptionMids=[]),e.addedOrUpdatedVideoSubscriptions&&e.addedOrUpdatedVideoSubscriptions.length){r.addedOrUpdatedVideoSubscriptions=[];for(var o=0;o<e.addedOrUpdatedVideoSubscriptions.length;++o)r.addedOrUpdatedVideoSubscriptions[o]=s.SdkVideoSubscriptionConfiguration.toObject(e.addedOrUpdatedVideoSubscriptions[o],t)}if(e.removedVideoSubscriptionMids&&e.removedVideoSubscriptionMids.length){r.removedVideoSubscriptionMids=[];for(var o=0;o<e.removedVideoSubscriptionMids.length;++o)r.removedVideoSubscriptionMids[o]=e.removedVideoSubscriptionMids[o]}return r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkRemoteVideoUpdateFrame"},"getTypeUrl"),a}(),s.SdkVideoQualityAdaptationPreference=function(){var a={},i=Object.create(a);return i[a[1]="BALANCED"]=1,i[a[2]="MAINTAIN_FRAMERATE"]=2,i[a[3]="MAINTAIN_RESOLUTION"]=3,i}(),s.SdkVideoSubscriptionConfiguration=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkVideoSubscriptionConfiguration"),a.prototype.mid="",a.prototype.attendeeId="",a.prototype.streamId=0,a.prototype.priority=0,a.prototype.targetBitrateKbps=0,a.prototype.groupId=0,a.prototype.qualityAdaptationPreference=1,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),t.uint32(10).string(e.mid),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.priority!=null&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(32).uint32(e.priority),e.targetBitrateKbps!=null&&Object.hasOwnProperty.call(e,"targetBitrateKbps")&&t.uint32(40).uint32(e.targetBitrateKbps),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.qualityAdaptationPreference!=null&&Object.hasOwnProperty.call(e,"qualityAdaptationPreference")&&t.uint32(56).int32(e.qualityAdaptationPreference),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkVideoSubscriptionConfiguration;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.mid=e.string();break}case 2:{o.attendeeId=e.string();break}case 3:{o.streamId=e.uint32();break}case 4:{o.priority=e.uint32();break}case 5:{o.targetBitrateKbps=e.uint32();break}case 6:{o.groupId=e.uint32();break}case 7:{o.qualityAdaptationPreference=e.int32();break}default:e.skipType(f&7);break}}if(!o.hasOwnProperty("mid"))throw g.ProtocolError("missing required 'mid'",{instance:o});return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(!g.isString(e.mid))return"mid: string expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!g.isString(e.attendeeId))return"attendeeId: string expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!g.isInteger(e.streamId))return"streamId: integer expected";if(e.priority!=null&&e.hasOwnProperty("priority")&&!g.isInteger(e.priority))return"priority: integer expected";if(e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&!g.isInteger(e.targetBitrateKbps))return"targetBitrateKbps: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!g.isInteger(e.groupId))return"groupId: integer expected";if(e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference"))switch(e.qualityAdaptationPreference){default:return"qualityAdaptationPreference: enum value expected";case 1:case 2:case 3:break}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkVideoSubscriptionConfiguration)return e;var t=new s.SdkVideoSubscriptionConfiguration;switch(e.mid!=null&&(t.mid=String(e.mid)),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.priority!=null&&(t.priority=e.priority>>>0),e.targetBitrateKbps!=null&&(t.targetBitrateKbps=e.targetBitrateKbps>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.qualityAdaptationPreference){default:if(typeof e.qualityAdaptationPreference=="number"){t.qualityAdaptationPreference=e.qualityAdaptationPreference;break}break;case"BALANCED":case 1:t.qualityAdaptationPreference=1;break;case"MAINTAIN_FRAMERATE":case 2:t.qualityAdaptationPreference=2;break;case"MAINTAIN_RESOLUTION":case 3:t.qualityAdaptationPreference=3;break}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.mid="",r.attendeeId="",r.streamId=0,r.priority=0,r.targetBitrateKbps=0,r.groupId=0,r.qualityAdaptationPreference=t.enums===String?"BALANCED":1),e.mid!=null&&e.hasOwnProperty("mid")&&(r.mid=e.mid),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(r.attendeeId=e.attendeeId),e.streamId!=null&&e.hasOwnProperty("streamId")&&(r.streamId=e.streamId),e.priority!=null&&e.hasOwnProperty("priority")&&(r.priority=e.priority),e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&(r.targetBitrateKbps=e.targetBitrateKbps),e.groupId!=null&&e.hasOwnProperty("groupId")&&(r.groupId=e.groupId),e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference")&&(r.qualityAdaptationPreference=t.enums===String?s.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]===void 0?e.qualityAdaptationPreference:s.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]:e.qualityAdaptationPreference),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkVideoSubscriptionConfiguration"},"getTypeUrl"),a}(),s.SdkNotificationFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkNotificationFrame"),a.prototype.level=3,a.prototype.message="",a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.level!=null&&Object.hasOwnProperty.call(e,"level")&&t.uint32(8).int32(e.level),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkNotificationFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.level=e.int32();break}case 2:{o.message=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.level!=null&&e.hasOwnProperty("level"))switch(e.level){default:return"level: enum value expected";case 1:case 2:case 3:break}return e.message!=null&&e.hasOwnProperty("message")&&!g.isString(e.message)?"message: string expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkNotificationFrame)return e;var t=new s.SdkNotificationFrame;switch(e.level){case"INFO":case 1:t.level=1;break;case"WARNING":case 2:t.level=2;break;default:if(typeof e.level=="number"){t.level=e.level;break}break;case"ERROR":case 3:t.level=3;break}return e.message!=null&&(t.message=String(e.message)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.level=t.enums===String?"ERROR":3,r.message=""),e.level!=null&&e.hasOwnProperty("level")&&(r.level=t.enums===String?s.SdkNotificationFrame.NotificationLevel[e.level]===void 0?e.level:s.SdkNotificationFrame.NotificationLevel[e.level]:e.level),e.message!=null&&e.hasOwnProperty("message")&&(r.message=e.message),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkNotificationFrame"},"getTypeUrl"),a.NotificationLevel=function(){var i={},e=Object.create(i);return e[i[1]="INFO"]=1,e[i[2]="WARNING"]=2,e[i[3]="ERROR"]=3,e}(),a}(),s.SdkPrimaryMeetingJoinFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkPrimaryMeetingJoinFrame"),a.prototype.credentials=null,a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.credentials!=null&&Object.hasOwnProperty.call(e,"credentials")&&s.SdkMeetingSessionCredentials.encode(e.credentials,t.uint32(10).fork()).ldelim(),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkPrimaryMeetingJoinFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.credentials=s.SdkMeetingSessionCredentials.decode(e,e.uint32());break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.credentials!=null&&e.hasOwnProperty("credentials")){var t=s.SdkMeetingSessionCredentials.verify(e.credentials);if(t)return"credentials."+t}return null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkPrimaryMeetingJoinFrame)return e;var t=new s.SdkPrimaryMeetingJoinFrame;if(e.credentials!=null){if(typeof e.credentials!="object")throw TypeError(".SdkPrimaryMeetingJoinFrame.credentials: object expected");t.credentials=s.SdkMeetingSessionCredentials.fromObject(e.credentials)}return t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.credentials=null),e.credentials!=null&&e.hasOwnProperty("credentials")&&(r.credentials=s.SdkMeetingSessionCredentials.toObject(e.credentials,t)),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinFrame"},"getTypeUrl"),a}(),s.SdkPrimaryMeetingJoinAckFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkPrimaryMeetingJoinAckFrame"),a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkPrimaryMeetingJoinAckFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),a.fromObject=n(function(e){return e instanceof s.SdkPrimaryMeetingJoinAckFrame?e:new s.SdkPrimaryMeetingJoinAckFrame},"fromObject"),a.toObject=n(function(){return{}},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinAckFrame"},"getTypeUrl"),a}(),s.SdkPrimaryMeetingLeaveFrame=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkPrimaryMeetingLeaveFrame"),a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkPrimaryMeetingLeaveFrame;e.pos<r;){var f=e.uint32();switch(f>>>3){default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),a.fromObject=n(function(e){return e instanceof s.SdkPrimaryMeetingLeaveFrame?e:new s.SdkPrimaryMeetingLeaveFrame},"fromObject"),a.toObject=n(function(){return{}},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingLeaveFrame"},"getTypeUrl"),a}(),s.SdkMeetingSessionCredentials=function(){function a(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return n(a,"SdkMeetingSessionCredentials"),a.prototype.attendeeId="",a.prototype.externalUserId="",a.prototype.joinToken="",a.create=n(function(e){return new a(e)},"create"),a.encode=n(function(e,t){return t||(t=v.create()),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(10).string(e.attendeeId),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(18).string(e.externalUserId),e.joinToken!=null&&Object.hasOwnProperty.call(e,"joinToken")&&t.uint32(26).string(e.joinToken),t},"encode"),a.encodeDelimited=n(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),a.decode=n(function(e,t){e instanceof m||(e=m.create(e));for(var r=t===void 0?e.len:e.pos+t,o=new s.SdkMeetingSessionCredentials;e.pos<r;){var f=e.uint32();switch(f>>>3){case 1:{o.attendeeId=e.string();break}case 2:{o.externalUserId=e.string();break}case 3:{o.joinToken=e.string();break}default:e.skipType(f&7);break}}return o},"decode"),a.decodeDelimited=n(function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},"decodeDelimited"),a.verify=n(function(e){return typeof e!="object"||e===null?"object expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!g.isString(e.attendeeId)?"attendeeId: string expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!g.isString(e.externalUserId)?"externalUserId: string expected":e.joinToken!=null&&e.hasOwnProperty("joinToken")&&!g.isString(e.joinToken)?"joinToken: string expected":null},"verify"),a.fromObject=n(function(e){if(e instanceof s.SdkMeetingSessionCredentials)return e;var t=new s.SdkMeetingSessionCredentials;return e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.joinToken!=null&&(t.joinToken=String(e.joinToken)),t},"fromObject"),a.toObject=n(function(e,t){t||(t={});var r={};return t.defaults&&(r.attendeeId="",r.externalUserId="",r.joinToken=""),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(r.attendeeId=e.attendeeId),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(r.externalUserId=e.externalUserId),e.joinToken!=null&&e.hasOwnProperty("joinToken")&&(r.joinToken=e.joinToken),r},"toObject"),a.prototype.toJSON=n(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),a.getTypeUrl=n(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMeetingSessionCredentials"},"getTypeUrl"),a}(),s.SdkVideoCodecCapability=function(){var a={},i=Object.create(a);return i[a[1]="VP8"]=1,i[a[2]="H264_BASELINE_PROFILE"]=2,i[a[3]="H264_CONSTRAINED_BASELINE_PROFILE"]=3,i[a[4]="H264_MAIN_PROFILE"]=4,i[a[5]="H264_HIGH_PROFILE"]=5,i[a[6]="H264_CONSTRAINED_HIGH_PROFILE"]=6,i[a[8]="VP9_PROFILE_0"]=8,i[a[11]="AV1_MAIN_PROFILE"]=11,i}(),H.exports=s,g.Long=void 0,u.configure()},7822521824:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const v=c(1222670195),g=c(4602188990),s=m(c(8066052849));let a=n(class{makeTwoDigits(e){return e>9?e.toString():"0"+e.toString()}hmac(e,t){const r=new v.Sha256(t);return r.update(e),r.digest()}getDateTimeString(){const e=new Date;return e.getUTCFullYear()+this.makeTwoDigits(e.getUTCMonth()+1)+this.makeTwoDigits(e.getUTCDate())+"T"+this.makeTwoDigits(e.getUTCHours())+this.makeTwoDigits(e.getUTCMinutes())+this.makeTwoDigits(e.getUTCSeconds())+"Z"}getDateString(e){return e.substring(0,e.indexOf("T"))}getSignatureKey(e,t,r,o){return u(this,void 0,void 0,function*(){const f=yield this.hmac(t,"AWS4"+e),h=yield this.hmac(r,f),p=yield this.hmac(o,h);return yield this.hmac("aws4_request",p)})}signURL(e,t,r,o,f,h,p){return u(this,void 0,void 0,function*(){const d=this.getDateTimeString(),y=this.getDateString(d),S="AWS4-HMAC-SHA256";let b="";this.chimeClient.config.region instanceof Function?b=yield this.chimeClient.config.region():b=this.chimeClient.config.region;const _="host",C="host:"+o.toLowerCase()+`
`,w=y+"/"+b+"/"+r+"/aws4_request";let R;this.chimeClient.config.credentials instanceof Function?R=yield this.chimeClient.config.credentials():R=this.chimeClient.config.credentials;let O=new Map;O.set("X-Amz-Algorithm",[S]),O.set("X-Amz-Credential",[encodeURIComponent(R.accessKeyId+"/"+w)]),O.set("X-Amz-Date",[d]),O.set("X-Amz-Expires",["10"]),O.set("X-Amz-SignedHeaders",["host"]),R.sessionToken&&O.set("X-Amz-Security-Token",[encodeURIComponent(R.sessionToken)]),O.set(s.default.X_AMZN_VERSION,[encodeURIComponent(s.default.sdkVersion)]),O.set(s.default.X_AMZN_USER_AGENT,[encodeURIComponent(s.default.sdkUserAgentLowResolution)]),p==null||p.forEach((J,Q)=>{const oe=encodeURIComponent(Q);J.sort().forEach($=>{O.has(oe)||O.set(oe,[]),O.get(oe).push(encodeURIComponent($))})});let D="";O=new Map([...O.entries()].sort()),O.forEach((J,Q)=>{J.forEach(oe=>{D.length&&(D+="&"),D+=Q+"="+oe})});const I=e+`
`+f+`
`+D+`
`+C+`
`+_+`
`+g.toHex(yield this.hmac(h)),M=g.toHex(yield this.hmac(I)),k=`AWS4-HMAC-SHA256
`+d+`
`+y+"/"+b+"/"+r+`/aws4_request
`+M,N=yield this.getSignatureKey(R.secretAccessKey,y,b,r),j=g.toHex(yield this.hmac(k,N)),B=D+"&X-Amz-Signature="+j;return t+"://"+o+f+"?"+B})}constructor(e){this.chimeClient=e}},"DefaultSigV4");l.default=a},8438160003:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SimulcastLayers=void 0;var c;(function(u){u[u.Low=0]="Low",u[u.LowAndMedium=1]="LowAndMedium",u[u.LowAndHigh=2]="LowAndHigh",u[u.Medium=3]="Medium",u[u.MediumAndHigh=4]="MediumAndHigh",u[u.High=5]="High"})(c=l.SimulcastLayers||(l.SimulcastLayers={})),l.default=c},6392364773:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.AudioLogEvent=void 0;var c;(function(u){u[u.DeviceChanged=0]="DeviceChanged",u[u.MutedLocal=1]="MutedLocal",u[u.UnmutedLocal=2]="UnmutedLocal",u[u.Connected=3]="Connected",u[u.ConnectFailed=4]="ConnectFailed",u[u.RedmicStartLoss=5]="RedmicStartLoss",u[u.RedmicEndLoss=6]="RedmicEndLoss"})(c=l.AudioLogEvent||(l.AudioLogEvent={})),l.default=c},5954709649:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(y,S,b,_){function C(w){return w instanceof b?w:new b(function(R){R(w)})}return n(C,"adopt"),new(b||(b=Promise))(function(w,R){function O(M){try{I(_.next(M))}catch(k){R(k)}}n(O,"fulfilled");function D(M){try{I(_.throw(M))}catch(k){R(k)}}n(D,"rejected");function I(M){M.done?w(M.value):C(M.value).then(O,D)}n(I,"step"),I((_=_.apply(y,S||[])).next())})},m=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(7059763395)),g=m(c(5147189764)),s=m(c(1847926377)),a=m(c(7894724558)),i=m(c(7825873064)),e=m(c(5446246651)),t=m(c(7192341248)),r=m(c(9013967876)),o=c(5391134031),f=c(903520651),h=m(c(6392364773)),p=m(c(4715258780));let d=n(class Vf{toAttribute(S){return this.toSuffix(S).substring(1)}toSuffix(S){return S.toLowerCase()===S?`_${S}`:S.toUpperCase()===S?`_${S.toLowerCase()}`:S.replace(/([A-Z][a-z]+)/g,function(b){return`_${b}`}).replace(/([A-Z][A-Z]+)/g,function(b){return`_${b}`}).toLowerCase()}logLatency(S,b,_){const C=this.toSuffix(S);this.logEventTime("meeting"+C,b,_)}logStateTimeout(S,b){const _=this.toSuffix(S);this.logEvent("meeting_session_state_timeout",Object.assign(Object.assign({},b),{state:`state${_}`}))}logAudioEvent(S,b){const _="audio"+this.toSuffix(h.default[S]);this.logEvent(_,b)}logVideoEvent(S,b){const _="video"+this.toSuffix(p.default[S]);this.logEvent(_,b)}logEventTime(S,b){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const C=Object.assign(Object.assign({},_),{call_id:this.audioVideoController.configuration.meetingId,client_type:Vf.CLIENT_TYPE,metric_type:"latency"});this.logger.debug(()=>`[StatsCollector] ${S}: ${JSON.stringify(C)}`),this.metricsAddTime(S,b,C)}logMeetingSessionStatus(S){const b=`${S.statusCode()}`;this.logEvent(b);const _={status:b,status_code:`${S.statusCode()}`};this.logEvent("meeting_session_status",_),S.isTerminal()&&this.logEvent("meeting_session_stopped",_),S.isAudioConnectionFailure()&&this.logEvent("meeting_session_audio_failed",_),S.isFailure()&&this.logEvent("meeting_session_failed",_)}logLifecycleEvent(S,b){const _={lifecycle_event:`lifecycle${this.toSuffix(e.default[S])}`,lifecycle_event_code:`${S}`,lifecycle_event_condition:`condition${this.toSuffix(t.default[b])}`,lifecycle_event_condition_code:`${b}`};this.logEvent("meeting_session_lifecycle",_)}logEvent(S){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const _=Object.assign(Object.assign({},b),{call_id:this.audioVideoController.configuration.meetingId,client_type:Vf.CLIENT_TYPE});this.logger.debug(()=>`[StatsCollector] ${S}: ${JSON.stringify(_)}`),this.metricsLogEvent(S,_)}start(S,b){return this.intervalScheduler?!1:(this.logger.info("Starting StatsCollector"),this.signalingClient=S,this.videoStreamIndex=b,this.clientMetricReport=new v.default(this.logger,this.videoStreamIndex,this.audioVideoController.configuration.credentials.attendeeId),this.intervalScheduler=new r.default(this.interval),this.intervalScheduler.start(()=>u(this,void 0,void 0,function*(){yield this.getStatsWrapper()})),!0)}stop(){this.logger.info("Stopping StatsCollector"),this.intervalScheduler&&this.intervalScheduler.stop(),this.intervalScheduler=null}updateMetricValues(S,b){const _=b?this.clientMetricReport.streamMetricReports[Number(S.ssrc)]:this.clientMetricReport.globalMetricReport;let C;b?C=this.clientMetricReport.getMetricMap(_.mediaType,_.direction):C=this.clientMetricReport.getMetricMap();for(const w in S)w in C&&(typeof S[w]=="number"?(_.previousMetrics[w]=_.currentMetrics[w],_.currentMetrics[w]=S[w]):typeof S[w]=="string"?_.currentStringMetrics[w]=S[w]:typeof S[w]=="object"?(_.previousObjectMetrics[w]=_.currentObjectMetrics[w]===void 0?S[w]:_.currentObjectMetrics[w],_.currentObjectMetrics[w]=S[w]):this.logger.error(`Unknown metric value type ${typeof S[w]} for metric ${w}`))}processRawMetricReports(S){this.clientMetricReport.currentSsrcs={};const b=Date.now();for(const _ of S){const C=this.isStreamRawMetricReport(_.type);if(C){const w=this.clientMetricReport.streamMetricReports[Number(_.ssrc)];if(w)w.mediaType===s.default.VIDEO&&w.direction===g.default.UPSTREAM?w.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(_.rid):w.streamId=this.videoStreamIndex.streamIdForSSRC(Number(_.ssrc));else{const R=new i.default;R.mediaType=this.getMediaType(_),R.direction=this.getDirectionType(_),R.mediaType===s.default.VIDEO&&R.direction===g.default.UPSTREAM?R.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(_.rid):this.videoStreamIndex.allStreams().empty()||(R.streamId=this.videoStreamIndex.streamIdForSSRC(Number(_.ssrc)),this.videoStreamIndex.groupIdForSSRC!==void 0&&(R.groupId=this.videoStreamIndex.groupIdForSSRC(Number(_.ssrc)))),this.clientMetricReport.streamMetricReports[Number(_.ssrc)]=R}this.clientMetricReport.currentSsrcs[Number(_.ssrc)]=1}this.updateMetricValues(_,C)}this.clientMetricReport.removeDestroyedSsrcs(),this.clientMetricReport.previousTimestampMs=this.clientMetricReport.currentTimestampMs,this.clientMetricReport.currentTimestampMs=b,this.clientMetricReport.print()}addStreamMetricDimensionFrames(S,b){const _=this.clientMetricReport.getStreamDimensionMap();for(const C in b.currentStringMetrics)if(C in _){const w=o.SdkStreamDimension.create();w.type=_[C];const R=o.SdkDimensionValue.create();R.stringValue=b.currentStringMetrics[C],w.value=R,S.dimensions.push(w)}}addMetricFrame(S,b,_,C){const w=_.type,R=_.transform,O=_.source,D=b.streamMetricFrames.length,I=b.streamMetricFrames[D-1];if(w){const M=o.SdkMetric.create();M.type=w,M.value=R(O||S,C),C?I.metrics.push(M):b.globalMetrics.push(M)}}addGlobalMetricsToProtobuf(S){const b=this.clientMetricReport.getMetricMap();for(const _ in this.clientMetricReport.globalMetricReport.currentMetrics)this.addMetricFrame(_,S,b[_])}addStreamMetricsToProtobuf(S){for(const b in this.clientMetricReport.streamMetricReports){const _=this.clientMetricReport.streamMetricReports[b],C=o.SdkStreamMetricFrame.create();C.streamId=_.streamId,C.metrics=[],this.addStreamMetricDimensionFrames(C,_),S.streamMetricFrames.push(C);const w=this.clientMetricReport.getMetricMap(_.mediaType,_.direction);for(const R in _.currentMetrics)this.addMetricFrame(R,S,w[R],Number(b));for(const R in _.currentStringMetrics)this.addMetricFrame(R,S,w[R],Number(b));for(const R in _.currentObjectMetrics)this.addMetricFrame(R,S,w[R],Number(b))}}makeClientMetricProtobuf(){const S=o.SdkClientMetricFrame.create();return S.globalMetrics=[],S.streamMetricFrames=[],this.addGlobalMetricsToProtobuf(S),this.addStreamMetricsToProtobuf(S),S}sendClientMetricProtobuf(S){this.signalingClient.sendClientMetrics(S)}isStreamRawMetricReport(S){return["inbound-rtp","inbound-rtp-red","outbound-rtp","remote-inbound-rtp","remote-outbound-rtp"].includes(S)}getMediaType(S){return S.kind==="audio"?s.default.AUDIO:s.default.VIDEO}getDirectionType(S){const{type:b}=S;return b==="inbound-rtp"||b==="remote-outbound-rtp"||b==="inbound-rtp-red"?g.default.DOWNSTREAM:g.default.UPSTREAM}isValidStandardRawMetric(S){return S.type==="inbound-rtp"||S.type==="inbound-rtp-red"||S.type==="outbound-rtp"||S.type==="remote-inbound-rtp"||S.type==="remote-outbound-rtp"||S.type==="candidate-pair"&&S.state==="succeeded"||S.type==="media-source"&&S.kind==="audio"}isValidSsrc(S){let b=!0;return this.isStreamRawMetricReport(S.type)&&this.getDirectionType(S)===g.default.DOWNSTREAM&&this.getMediaType(S)===s.default.VIDEO&&(b=this.videoStreamIndex.streamIdForSSRC(Number(S.ssrc))>0),b}isValidRawMetricReport(S){return this.isValidStandardRawMetric(S)&&this.isValidSsrc(S)}filterRawMetricReports(S){const b=[];for(const _ of S)this.isValidRawMetricReport(_)&&b.push(_);return b}handleRawMetricReports(S){const b=this.filterRawMetricReports(S);this.logger.debug(()=>`Filtered raw metrics : ${JSON.stringify(b)}`);const _=[];this.maybeAddRedRecoveryMetrics(_),this.addVideoCodecDegradationMetrics(_),this.clientMetricReport.customStatsReports=_,b.push(..._),this.processRawMetricReports(b);const C=this.makeClientMetricProtobuf();this.sendClientMetricProtobuf(C),this.audioVideoController.forEachObserver(w=>{f.Maybe.of(w.metricsDidReceive).map(R=>R.bind(w)(this.clientMetricReport.clone()))})}getStatsWrapper(){return u(this,void 0,void 0,function*(){if(!this.audioVideoController.rtcPeerConnection)return;const S=[];try{const b=yield this.audioVideoController.rtcPeerConnection.getStats();this.clientMetricReport.rtcStatsReport=b,b.forEach(_=>{S.push(_)}),this.handleRawMetricReports(S)}catch(b){this.logger.error(b.message)}})}overrideObservableMetric(S,b){this.clientMetricReport.overrideObservableMetric(S,b)}recoveryMetricsDidReceive(S){this.redRecoveryMetricReport=S}maybeAddRedRecoveryMetrics(S){this.redRecoveryMetricReport.currentTimestampMs!==this.lastRedRecoveryMetricReportConsumedTimestampMs&&(S.push({kind:"audio",type:"inbound-rtp-red",ssrc:this.redRecoveryMetricReport.ssrc,timestamp:this.redRecoveryMetricReport.currentTimestampMs,totalAudioPacketsLost:this.redRecoveryMetricReport.totalAudioPacketsLost,totalAudioPacketsExpected:this.redRecoveryMetricReport.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.redRecoveryMetricReport.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.redRecoveryMetricReport.totalAudioPacketsRecoveredFec}),this.lastRedRecoveryMetricReportConsumedTimestampMs=this.redRecoveryMetricReport.currentTimestampMs)}videoCodecDegradationHighEncodeCpuDidReceive(){this.videoCodecDegradationHighEncodeCpuCount+=1}videoCodecDegradationEncodeFailureDidReceive(){this.videoCodecDegradationEncodeFailureCount+=1}addVideoCodecDegradationMetrics(S){const b=this.clientMetricReport.getVideoUpstreamSsrc();b!==null&&S.push({kind:"video",type:"outbound-rtp",ssrc:b,timestamp:Date.now(),videoCodecDegradationHighEncodeCpu:this.videoCodecDegradationHighEncodeCpuCount,videoCodecDegradationEncodeFailure:this.videoCodecDegradationEncodeFailureCount}),this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0}constructor(S,b,_=Vf.INTERVAL_MS){this.audioVideoController=S,this.logger=b,this.interval=_,this.intervalScheduler=null,this.redRecoveryMetricReport=new a.default,this.lastRedRecoveryMetricReportConsumedTimestampMs=0,this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0,this.metricsAddTime=(C,w,R)=>{},this.metricsLogEvent=(C,w)=>{}}},"StatsCollector");l.default=d,d.INTERVAL_MS=1e3,d.CLIENT_TYPE="amazon-chime-sdk-js"},4715258780:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoLogEvent=void 0;var c;(function(u){u[u.InputAttached=0]="InputAttached",u[u.SendingFailed=1]="SendingFailed",u[u.SendingSuccess=2]="SendingSuccess"})(c=l.VideoLogEvent||(l.VideoLogEvent={})),l.default=c},7063021350:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(4715258780)),g=m(c(516529594));let s=n(class extends g.default{run(){return u(this,void 0,void 0,function*(){const i=this.context.transceiverController;i.setPeer(this.context.peer),i.setupLocalTransceivers();const e=this.context.activeAudioInput;if(e){const r=e.getAudioTracks();this.context.logger.info("attaching audio track to peer connection"),yield i.setAudioInput(r.length?r[0]:null)}else yield i.setAudioInput(null),this.context.logger.info("no audio track");this.setAudioCodecPreferences();const t=this.context.activeVideoInput;if(t){const r=t.getVideoTracks(),o=r.length?r[0]:null;if(this.context.logger.info("attaching video track to peer connection"),yield i.setVideoInput(o),this.context.enableSimulcast&&this.context.videoUplinkBandwidthPolicy){const f=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();i.setEncodingParameters(f)}o&&this.context.statsCollector.logVideoEvent(v.default.InputAttached,this.context.videoDeviceInformation)}else yield i.setVideoInput(null),this.context.logger.info("no video track");this.context.videoSubscriptions=i.updateVideoTransceivers(this.context.videoStreamIndex,this.context.videosToReceive),this.context.videoStreamIndex.subscribeFrameSent()})}setAudioCodecPreferences(){const i=window.RTCRtpTransceiver&&"setCodecPreferences"in window.RTCRtpTransceiver.prototype,e=this.context.audioProfile.hasRedundancyEnabled();if(!i){this.context.logger.warn("Setting codec preferences not supported");return}const t=this.context.transceiverController.localAudioTransceiver(),{codecs:r}=RTCRtpSender.getCapabilities("audio");this.context.logger.debug(`Available audio codecs ${JSON.stringify(r,null,4)}`);const o=r.findIndex(f=>f.mimeType==="audio/red");if(!t){this.context.logger.error("audio transceiver is null");return}if(o>=0){const f=r[o];r.splice(o,1),e?(r.unshift(f),this.context.logger.info("audio/red set as preferred codec")):this.context.logger.info("audio/red removed from preferred codec"),t.setCodecPreferences(r);return}this.context.logger.info("audio/red codec not supported")}constructor(i){super(i.logger),this.context=i,this.taskName="AttachMediaInputTask"}},"AttachMediaInputTask");l.default=s},516529594:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(2913368614)),g=m(c(9293073193));let s=n(class{once(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return new v.default(this.logger,this,e)}cancel(){}name(){return this.parentTask?`${this.parentTask.name()}/${this.taskName}`:this.taskName}setParent(i){this.parentTask=i}getStatus(){return this.status}logAndThrow(i){throw this.logger.info(i),new Error(i)}baseRun(i){return u(this,void 0,void 0,function*(){try{const e=Date.now();switch(this.logger.info(`running task ${this.name()}`),this.status){case g.default.RUNNING:this.logAndThrow(`${this.name()} is already running`);case g.default.CANCELED:this.logAndThrow(`${this.name()} was canceled before running`);case g.default.FINISHED:this.logAndThrow(`${this.name()} was already finished`)}this.status=g.default.RUNNING,yield i.call(this),this.logger.info(`${this.name()} took ${Math.round(Date.now()-e)} ms`)}catch(e){throw e}finally{this.status!==g.default.CANCELED&&(this.status=g.default.FINISHED)}})}baseCancel(i){if(this.status===g.default.CANCELED||this.status===g.default.FINISHED){this.logger.info(`Not canceling ${this.name()}: state is ${this.status}`);return}this.logger.info(`canceling task ${this.name()}`),this.status=g.default.CANCELED,i.call(this)}constructor(i){this.logger=i,this.taskName="BaseTask",this.parentTask=null,this.status=g.default.IDLE,this.run=this.baseRun.bind(this,this.run),this.cancel=this.baseCancel.bind(this,this.cancel)}},"BaseTask");l.default=s},4019918320:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(s,a,i,e){function t(r){return r instanceof i?r:new i(function(o){o(r)})}return n(t,"adopt"),new(i||(i=Promise))(function(r,o){function f(d){try{p(e.next(d))}catch(y){o(y)}}n(f,"fulfilled");function h(d){try{p(e.throw(d))}catch(y){o(y)}}n(h,"rejected");function p(d){d.done?r(d.value):t(d.value).then(f,h)}n(p,"step"),p((e=e.apply(s,a||[])).next())})},m=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(516529594));let g=n(class extends v.default{run(){return u(this,void 0,void 0,function*(){this.context.resetConnectionSpecificState()})}constructor(a){super(a.logger),this.context=a,this.taskName="CleanRestartedSessionTask"}},"CleanRestartedSessionTask");l.default=g},7819987893:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(426218501)),g=m(c(516529594));let s=n(class extends g.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){try{this.context.signalingClient.ready()&&(this.context.signalingClient.closeConnection(),yield this.receiveWebSocketClosedEvent())}catch(i){throw i}finally{for(const e of this.context.removableObservers)e.removeObserver();this.context.resetConnectionSpecificState(),this.context.statsCollector.stop(),this.context.statsCollector=null,this.context.connectionMonitor.stop(),this.context.connectionMonitor=null,this.context.videoUplinkBandwidthPolicy.setTransceiverController&&this.context.videoUplinkBandwidthPolicy.setTransceiverController(void 0),this.context.videoDownlinkBandwidthPolicy.bindToTileController&&this.context.videoDownlinkBandwidthPolicy.bindToTileController(void 0);const i=this.context.videoTileController.getLocalVideoTile();i&&i.bindVideoStream("",!0,null,null,null,null),this.context.videoTileController.removeAllVideoTiles()}})}receiveWebSocketClosedEvent(){return new Promise((i,e)=>{let t=n(class{cancel(){this.signalingClient.removeObserver(this),e(new Error("CleanStoppedSessionTask got canceled while waiting for the WebSocket closed event"))}handleSignalingClientEvent(f){f.type===v.default.WebSocketClosed&&(this.signalingClient.removeObserver(this),i())}constructor(f){this.signalingClient=f}},"Interceptor");const r=new t(this.context.signalingClient);this.taskCanceler=r,this.context.signalingClient.registerObserver(r)})}constructor(i){super(i.logger),this.context=i,this.taskName="CleanStoppedSessionTask",this.taskCanceler=null}},"CleanStoppedSessionTask");l.default=s},2918138407:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(s,a,i,e){function t(r){return r instanceof i?r:new i(function(o){o(r)})}return n(t,"adopt"),new(i||(i=Promise))(function(r,o){function f(d){try{p(e.next(d))}catch(y){o(y)}}n(f,"fulfilled");function h(d){try{p(e.throw(d))}catch(y){o(y)}}n(h,"rejected");function p(d){d.done?r(d.value):t(d.value).then(f,h)}n(p,"step"),p((e=e.apply(s,a||[])).next())})},m=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(516529594));let g=n(class extends v.default{removeObserver(){this.removeTrackAddedEventListener&&this.removeTrackAddedEventListener();for(const a in this.removeTrackRemovedEventListeners)this.removeTrackRemovedEventListeners[a]()}addPeerConnectionEventLogger(){const a=this.context.peer;a.addEventListener("connectionstatechange",()=>{this.context.logger.info(`peer connection state changed: ${a.connectionState}`)}),a.addEventListener("negotiationneeded",()=>{this.context.logger.info("peer connection negotiation is needed")}),a.addEventListener("icegatheringstatechange",()=>{this.context.logger.info(`peer connection ice gathering state changed: ${a.iceGatheringState}`)}),a.addEventListener("icecandidate",i=>{this.context.logger.info(`peer connection ice candidate: ${i.candidate?i.candidate.candidate:"(null)"}`)}),a.addEventListener("iceconnectionstatechange",()=>{this.context.logger.info(`peer connection ice connection state changed: ${a.iceConnectionState}`)})}run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this);const i=this.context.turnCredentials&&this.context.turnCredentials.uris.length>0?{iceServers:[{urls:this.context.turnCredentials.uris,username:this.context.turnCredentials.username,credential:this.context.turnCredentials.password,credentialType:"password"}],iceTransportPolicy:"relay"}:{};i.bundlePolicy=this.context.browserBehavior.requiresBundlePolicy(),i.sdpSemantics="unified-plan",i.encodedInsertableStreams=this.context.audioProfile.hasRedundancyEnabled(),this.context.peer?this.context.logger.info("reusing peer connection"):(this.context.logger.info("creating new peer connection"),this.context.peer=new RTCPeerConnection(i),this.addPeerConnectionEventLogger()),this.removeTrackAddedEventListener=()=>{this.context.peer&&this.context.peer.removeEventListener("track",this.trackAddedHandler),this.removeTrackAddedEventListener=null},this.context.peer.addEventListener("track",this.trackAddedHandler)})}trackIsVideoInput(a){return this.context.transceiverController.useTransceivers()?(this.logger.debug(()=>"getting video track type"),this.context.transceiverController.trackIsVideoInput(a)):!1}addRemoteVideoTrack(a,i){var e;const t=i.id,r=this.context.videoStreamIndex.attendeeIdForTrack(t);let o,f;if(this.context.videoTileController.getVideoTileForAttendeeId?(f=this.context.videoTileController.getVideoTileForAttendeeId(r),o=!!(!((e=f==null?void 0:f.state())===null||e===void 0)&&e.boundVideoStream)):o=this.context.videoTileController.haveVideoTileForAttendeeId(r),o){this.context.logger.info(`Not adding remote track. Already have tile for attendeeId:  ${r}`);return}f||(f=this.context.videoTileController.addVideoTile(),this.logger.info(`Created video tile ${f.id()}`));let h=this.context.videoStreamIndex.streamIdForTrack(t);typeof h>"u"&&(this.logger.warn(`stream not found for tile=${f.id()} track=${t}`),h=null);let p=this.context.videoStreamIndex.groupIdForStreamId(h);p===void 0&&(p=null);for(let w=0;w<this.trackEvents.length;w++){const R=this.trackEvents[w],O=i.getVideoTracks();if(O&&O.length){const D=O[0],I=n(()=>{this.context.logger.info(`received the ${R} event for tile=${f.id()} id=${a.id} streamId=${h}`),R==="ended"&&this.removeRemoteVideoTrack(a,f.state())},"callback");D.addEventListener(R,I),this.removeVideoTrackEventListeners[a.id]||(this.removeVideoTrackEventListeners[a.id]=[]),this.removeVideoTrackEventListeners[a.id].push(()=>{D.removeEventListener(R,I)})}}let d,y;if(a.getSettings){const w=a.getSettings();d=w.width,y=w.height}else{const w=a.getCapabilities();d=w.width,y=w.height}const S=this.context.videoStreamIndex.externalUserIdForTrack(t);f.bindVideoStream(r,!1,i,d,y,h,S,p),this.logger.info(`video track added, use tile=${f.id()} track=${t} streamId=${h} groupId=${p}`);const b="removetrack",_=i,C=n(()=>this.removeRemoteVideoTrack(a,f.state()),"trackRemovedHandler");this.removeTrackRemovedEventListeners[a.id]=()=>{_.removeEventListener(b,C),delete this.removeTrackRemovedEventListeners[a.id]},_.addEventListener(b,C)}removeRemoteVideoTrack(a,i){if(this.removeTrackRemovedEventListeners.hasOwnProperty(a.id)){this.removeTrackRemovedEventListeners[a.id]();for(const e of this.removeVideoTrackEventListeners[a.id])e();delete this.removeVideoTrackEventListeners[a.id]}this.logger.info(`video track ended, removing tile=${i.tileId} id=${a.id} stream=${i.streamId}`),i.streamId?this.context.videosPaused.remove(i.streamId):this.logger.warn(`no stream found for tile=${i.tileId}`),this.context.videoTileController.removeVideoTile(i.tileId)}constructor(a){super(a.logger),this.context=a,this.taskName="CreatePeerConnectionTask",this.removeTrackAddedEventListener=null,this.removeTrackRemovedEventListeners={},this.trackEvents=["ended","mute","unmute","isolationchange","overconstrained"],this.removeVideoTrackEventListeners={},this.trackAddedHandler=i=>{const e=i.track;if(this.context.logger.info(`received track event: kind=${e.kind} id=${e.id} label=${e.label}`),i.transceiver&&i.transceiver.currentDirection==="inactive")return;if(i.streams.length===0){this.context.logger.warn("Track event but no stream");return}const t=i.streams[0];e.kind==="audio"?this.context.audioMixController.bindAudioStream(t):e.kind==="video"&&!this.trackIsVideoInput(e)&&this.addRemoteVideoTrack(e,t)}}},"CreatePeerConnectionTask");l.default=g,g.REMOVE_HANDLER_INTERVAL_MS=1e4},7869625838:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(4882394368)),g=m(c(3430379175)),s=m(c(516529594));let a=n(class extends s.default{cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}sessionUsesAudio(){var e,t;return!!(!((t=(e=this.context.meetingSessionConfiguration)===null||e===void 0?void 0:e.urls)===null||t===void 0)&&t.audioHostURL)}sessionUsesVideo(){let t;this.context.transceiverController.useTransceivers()?t=this.context.transceiverController.hasVideoInput():t=this.context.videoTileController.hasStartedLocalVideoTile();const r=!!this.context.videosToReceive&&!this.context.videosToReceive.empty(),o=t||r;return this.context.logger.info(`uses video: ${o} (enabled: ${!0}, sending: ${t}, receiving: ${r})`),o}run(){return u(this,void 0,void 0,function*(){const e={offerToReceiveAudio:this.sessionUsesAudio(),offerToReceiveVideo:this.sessionUsesVideo()};this.logger.info(`peer connection offerOptions: ${JSON.stringify(e)}`),yield new Promise((t,r)=>u(this,void 0,void 0,function*(){this.cancelPromise=o=>{r(o)};try{if(this.context.sdpOfferInit=yield this.context.peer.createOffer(e),this.context.logger.info("peer connection created offer"),this.context.previousSdpOffer&&new g.default(this.context.sdpOfferInit.sdp).videoSendSectionHasDifferentSSRC(this.context.previousSdpOffer)){const o=new Error(`canceling ${this.name()} due to the meeting status code: ${v.default.IncompatibleSDP}`);this.context.previousSdpOffer=null,r(o);return}t()}catch(o){r(o)}finally{delete this.cancelPromise}}))})}constructor(e){super(e.logger),this.context=e,this.taskName="CreateSDPTask"}},"CreateSDPTask");l.default=a},9613312866:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(4882394368)),g=m(c(3430379175)),s=m(c(516529594));let a=n(class Hv extends s.default{removeEventListener(){this.context.peer&&(this.context.peer.removeEventListener("icecandidate",this.context.iceCandidateHandler),this.context.turnCredentials||this.context.peer.removeEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler))}cancel(){let e;this.context.browserBehavior.requiresIceCandidateGatheringTimeoutWorkaround()&&this.chromeVpnTimeoutMs<this.context.meetingSessionConfiguration.connectionTimeoutMs&&Date.now()-this.startTimestampMs>this.chromeVpnTimeoutMs&&(e=new Error(`canceling ${this.name()} due to the meeting status code: ${v.default.ICEGatheringTimeoutWorkaround}`)),this.cancelPromise&&(e=e||new Error(`canceling ${this.name()}`),this.cancelPromise(e),delete this.cancelPromise)}run(){return u(this,void 0,void 0,function*(){if(this.context.peer||this.logAndThrow("session does not have peer connection; bypass ice gathering"),this.context.browserBehavior.requiresCheckForSdpConnectionAttributes()){if(new g.default(this.context.peer.localDescription.sdp).hasCandidatesForAllMLines()){this.context.logger.info(`ice gathering already complete; bypass gathering, current local description ${this.context.peer.localDescription.sdp}`);return}}else this.context.logger.info(`iOS device does not require checking for connection attributes in SDP, current local description ${this.context.peer.localDescription.sdp}`);if((this.context.browserBehavior.hasFirefoxWebRTC()||this.context.peer.iceGatheringState==="complete")&&new g.default(this.context.peer.localDescription.sdp).hasCandidates()){this.context.logger.info("ice gathering state is complete and candidates are in SDP; bypass gathering");return}try{yield new Promise((e,t)=>{this.cancelPromise=r=>{this.removeEventListener(),t(r)},this.context.turnCredentials||(this.context.iceGatheringStateEventHandler=()=>{if(this.context.peer.iceGatheringState==="complete"){this.removeEventListener(),e(),delete this.cancelPromise;return}},this.context.peer.addEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler)),this.context.iceCandidateHandler=r=>{if(this.context.logger.info(`ice candidate: ${r.candidate?r.candidate.candidate:"(null)"} state: ${this.context.peer.iceGatheringState}`),r.candidate&&(g.default.isRTPCandidate(r.candidate.candidate)&&this.context.iceCandidates.push(r.candidate),this.context.turnCredentials&&this.context.iceCandidates.length>=1)){this.context.logger.info("gathered at least one relay candidate"),this.removeEventListener(),e(),delete this.cancelPromise;return}this.context.peer.iceGatheringState==="complete"&&(this.context.logger.info("done gathering ice candidates"),this.removeEventListener(),!new g.default(this.context.peer.localDescription.sdp).hasCandidates()||this.context.iceCandidates.length===0?(t(new Error("no ice candidates were gathered")),delete this.cancelPromise):(e(),delete this.cancelPromise))},this.context.peer.addEventListener("icecandidate",this.context.iceCandidateHandler),this.startTimestampMs=Date.now()})}catch(e){throw e}finally{this.startTimestampMs&&(this.context.iceGatheringDurationMs=Math.round(Date.now()-this.startTimestampMs))}})}constructor(e,t=Hv.CHROME_VPN_TIMEOUT_MS){super(e.logger),this.context=e,this.chromeVpnTimeoutMs=t,this.taskName="FinishGatheringICECandidatesTask"}},"FinishGatheringICECandidatesTask");l.default=a,a.CHROME_VPN_TIMEOUT_MS=5e3},1495317641:function(H,l,c){"use strict";var u=this&&this.__createBinding||(Object.create?function(d,y,S,b){b===void 0&&(b=S),Object.defineProperty(d,b,{enumerable:!0,get:function(){return y[S]}})}:function(d,y,S,b){b===void 0&&(b=S),d[b]=y[S]}),m=this&&this.__setModuleDefault||(Object.create?function(d,y){Object.defineProperty(d,"default",{enumerable:!0,value:y})}:function(d,y){d.default=y}),v=this&&this.__importStar||function(d){if(d&&d.__esModule)return d;var y={};if(d!=null)for(var S in d)S!=="default"&&Object.prototype.hasOwnProperty.call(d,S)&&u(y,d,S);return m(y,d),y},g=this&&this.__awaiter||function(d,y,S,b){function _(C){return C instanceof S?C:new S(function(w){w(C)})}return n(_,"adopt"),new(S||(S=Promise))(function(C,w){function R(I){try{D(b.next(I))}catch(M){w(M)}}n(R,"fulfilled");function O(I){try{D(b.throw(I))}catch(M){w(M)}}n(O,"rejected");function D(I){I.done?C(I.value):_(I.value).then(R,O)}n(D,"step"),D((b=b.apply(d,y||[])).next())})},s=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(l,"__esModule",{value:!0});const a=s(c(3777990285)),i=s(c(4882394368)),e=s(c(7999114886)),t=v(c(1448262436)),r=s(c(426218501)),o=s(c(9315300759)),f=c(5391134031),h=s(c(516529594));let p=n(class extends h.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return g(this,void 0,void 0,function*(){const y=yield new Promise((S,b)=>{const _=this.context;_.turnCredentials=null;let C=n(class{cancel(){this.signalingClient.removeObserver(this),b(new Error("JoinAndReceiveIndexTask got canceled while waiting for SdkIndexFrame"))}handleSignalingClientEvent(D){if(D.type===r.default.WebSocketClosed){let M=`The signaling connection was closed with code ${D.closeCode} and reason: ${D.closeReason}`;_.logger.warn(M);let k=i.default.SignalingBadRequest;D.closeCode===4410?(M="The meeting already ended.",_.logger.warn(M),k=i.default.MeetingEnded):D.closeCode>=4500&&D.closeCode<4600&&(k=i.default.SignalingInternalServerError),_.audioVideoController.handleMeetingSessionStatus(new a.default(k),new Error(M));return}if(D.type!==r.default.ReceivedSignalFrame)return;if(D.message.type===f.SdkSignalFrame.Type.JOIN_ACK){const M=D.message.joinack;if(!M){_.audioVideoController.handleMeetingSessionStatus(new a.default(i.default.SignalingRequestFailed),new Error("Join ACK message did not include expected frame"));return}if(M.videoSubscriptionLimit&&(_.videoSubscriptionLimit=M.videoSubscriptionLimit),_.serverSupportsCompression=M.wantsCompressedSdp,M.defaultServerSideNetworkAdaption!==void 0&&M.defaultServerSideNetworkAdaption!==t.default.Default&&_.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption!==void 0){const k=M.defaultServerSideNetworkAdaption;_.logger.info(`Overriding server side network adaption value to ${k}`),_.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption(t.convertServerSideNetworkAdaptionEnumFromSignaled(k))}M&&M.turnCredentials?(_.turnCredentials=new e.default,_.turnCredentials.username=M.turnCredentials.username,_.turnCredentials.password=M.turnCredentials.password,_.turnCredentials.ttl=M.turnCredentials.ttl,_.turnCredentials.uris=M.turnCredentials.uris.map(k=>_.meetingSessionConfiguration.urls.urlRewriter(k)).filter(k=>!!k)):_.logger.error("missing TURN credentials in JoinAckFrame");return}if(D.message.type!==f.SdkSignalFrame.Type.INDEX)return;this.signalingClient.removeObserver(this);const I=D.message.index;S(I)}constructor(D){this.signalingClient=D}},"IndexFrameInterceptor");const w=new C(this.context.signalingClient);this.context.signalingClient.registerObserver(w),this.taskCanceler=w,this.context.previousSdpAnswerAsString="",this.context.previousSdpOffer=null,this.context.serverSupportsCompression=!1;const R=new o.default(this.context.meetingSessionConfiguration.applicationMetadata);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions!==void 0&&(R.serverSideNetworkAdaption=this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption(),R.supportedServerSideNetworkAdaptions=this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions()),this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex!==void 0&&(R.wantsAllTemporalLayersInIndex=this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex()),R.disablePeriodicKeyframeRequestOnContentSender=this.context.meetingSessionConfiguration.disablePeriodicKeyframeRequestOnContentSender,this.context.signalingClient.join(R)});this.context.logger.info(`received first index ${JSON.stringify(y)}`),this.context.indexFrame=y})}constructor(y){super(y.logger),this.context=y,this.taskName="JoinAndReceiveIndexTask",this.taskCanceler=null}},"JoinAndReceiveIndexTask");l.default=p},5110013894:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(426218501)),g=c(5391134031),s=m(c(516529594));let a=n(class extends s.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){this.context.signalingClient.ready()&&(this.context.signalingClient.leave(),this.context.logger.info("sent leave"),yield this.receiveLeaveAck())})}receiveLeaveAck(){return new Promise((e,t)=>{let r=n(class{cancel(){this.signalingClient.removeObserver(this),t(new Error("LeaveAndReceiveLeaveAckTask got canceled while waiting for IndexFrame"))}handleSignalingClientEvent(h){if(h.isConnectionTerminated()){this.signalingClient.removeObserver(this),this.logger.info("LeaveAndReceiveLeaveAckTask connection terminated"),e();return}h.type===v.default.ReceivedSignalFrame&&h.message.type===g.SdkSignalFrame.Type.LEAVE_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("got leave ack"),e())}constructor(h,p){this.signalingClient=h,this.logger=p}},"Interceptor");const o=new r(this.context.signalingClient,this.context.logger);this.taskCanceler=o,this.context.signalingClient.registerObserver(o)})}constructor(e){super(e.logger),this.context=e,this.taskName="LeaveAndReceiveLeaveAckTask",this.taskCanceler=null}},"LeaveAndReceiveLeaveAckTask");l.default=a},3708122413:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(426218501)),g=c(5391134031),s=m(c(516529594));let a=n(class extends s.default{run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(e){if(e.type===v.default.ReceivedSignalFrame){if(e.message.type===g.SdkSignalFrame.Type.AUDIO_STREAM_ID_INFO){const t=e.message.audioStreamIdInfo;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioStreamIdInfo(t)}else if(e.message.type===g.SdkSignalFrame.Type.AUDIO_METADATA){const t=e.message.audioMetadata;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioMetadata(t)}}}constructor(e){super(e.logger),this.context=e,this.taskName="ListenForVolumeIndicatorsTask",this.realtimeMuteAndUnmuteHandler=t=>{this.context.signalingClient.mute(t)}}},"ListenForVolumeIndicatorsTask");l.default=a},1504187181:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(b,_,C,w){function R(O){return O instanceof C?O:new C(function(D){D(O)})}return n(R,"adopt"),new(C||(C=Promise))(function(O,D){function I(N){try{k(w.next(N))}catch(j){D(j)}}n(I,"fulfilled");function M(N){try{k(w.throw(N))}catch(j){D(j)}}n(M,"rejected");function k(N){N.done?O(N.value):R(N.value).then(I,M)}n(k,"step"),k((w=w.apply(b,_||[])).next())})},m=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(5147189764)),g=m(c(1847926377)),s=m(c(8929805428)),a=m(c(2115341037)),i=m(c(5928001672)),e=m(c(6005421222)),t=m(c(3777990285)),r=m(c(4882394368)),o=m(c(4883941895)),f=m(c(426218501)),h=c(5391134031),p=m(c(6392364773)),d=c(903520651),y=m(c(516529594));let S=n(class extends y.default{removeObserver(){this.context.audioVideoController.removeObserver(this),this.context.realtimeController.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.signalingClient.removeObserver(this)}run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.audioVideoController.addObserver(this),this.context.realtimeController.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.connectionMonitor.start(),this.context.statsCollector.start(this.context.signalingClient,this.context.videoStreamIndex),this.context.signalingClient.registerObserver(this)})}pauseResubscribeCheck(){this.isResubscribeCheckPaused=!0}resumeResubscribeCheck(){this.isResubscribeCheckPaused&&(this.isResubscribeCheckPaused=!1,this.pendingMetricsReport&&(this.context.logger.info("Resuming resubscribe check with pending metrics report"),this.checkResubscribe(this.pendingMetricsReport)&&this.context.audioVideoController.update({needsRenegotiation:!1})))}videoTileDidUpdate(_){this.context.maxVideoTileCount=Math.max(this.context.maxVideoTileCount,this.context.videoTileController.getAllVideoTiles().length)}checkResubscribe(_){if(this.isResubscribeCheckPaused){this.context.logger.info("Resubscribe check is paused, setting incoming client metric report as pending"),this.pendingMetricsReport=_;return}else this.pendingMetricsReport=void 0;const C=_.getObservableMetrics(),w=C.availableOutgoingBitrate,R=C.nackCountReceivedPerSecond;let O=!1;this.context.videoDownlinkBandwidthPolicy.updateMetrics(_);const D=this.context.videoDownlinkBandwidthPolicy.wantsResubscribe();if(O=O||D,D){const I=this.context.videoDownlinkBandwidthPolicy.chooseSubscriptions();this.context.videosToReceive=I.truncate(this.context.videoSubscriptionLimit),I.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.logger.info(`trigger resubscribe for down=${D}; videosToReceive=[${this.context.videosToReceive.array()}]`)}if(this.context.videoTileController.hasStartedLocalVideoTile()){this.context.videoUplinkBandwidthPolicy.updateConnectionMetric({uplinkKbps:w/1e3,nackCountPerSecond:R});const I=this.context.videoUplinkBandwidthPolicy.wantsResubscribe();O=O||I,I&&(this.logger.info(`trigger resubscribe for up=${I}; videosToReceive=[${this.context.videosToReceive.array()}]`),this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters())}return O}metricsDidReceive(_){if(this.checkResubscribe(_)&&this.context.audioVideoController.update({needsRenegotiation:!1}),!this.currentAvailableStreamAvgBitrates)return;const C=_.streamMetricReports,w=new Map;for(const R in C)C[R].mediaType===g.default.VIDEO&&C[R].direction===v.default.DOWNSTREAM&&w.set(C[R].streamId,C[R])}connectionHealthDidChange(_){_.consecutiveMissedPongs===0&&this.context.reconnectController&&this.context.reconnectController.setLastActiveTimestampMs(Date.now()),this.applyHealthPolicy(this.reconnectionHealthPolicy,_,()=>{this.context.audioVideoController.handleMeetingSessionStatus(new t.default(r.default.ConnectionHealthReconnect),null)}),this.applyHealthPolicy(this.unusableAudioWarningHealthPolicy,_,()=>{var C;this.context.poorConnectionCount+=1;const w=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(C=this.context.eventController)===null||C===void 0||C.publishEvent("receivingAudioDropped",w),this.context.videoTileController.haveVideoTilesWithStreams()?this.context.audioVideoController.forEachObserver(R=>{d.Maybe.of(R.connectionDidSuggestStopVideo).map(O=>O.bind(R)())}):this.context.audioVideoController.forEachObserver(R=>{d.Maybe.of(R.connectionDidBecomePoor).map(O=>O.bind(R)())})},()=>{this.context.audioVideoController.forEachObserver(C=>{d.Maybe.of(C.connectionDidBecomeGood).map(w=>w.bind(C)())})});for(const C of this.videoEncodingHealthPolicies)this.applyHealthPolicy(C,_,()=>{switch(this.degradeVideoCodec(C.name),C.name){case e.default.VideoEncodingCpuHealth:this.context.statsCollector.videoCodecDegradationHighEncodeCpuDidReceive();break;case e.default.VideoEncodingFramerateHealth:this.context.statsCollector.videoCodecDegradationEncodeFailureDidReceive();break}});this.isMeetingConnected&&this.applyHealthPolicy(this.sendingAudioFailureHealthPolicy,_,()=>{var C;const w=this.generateBaseAudioVideoEventAttributes();(C=this.context.eventController)===null||C===void 0||C.publishEvent("sendingAudioFailed",w)},()=>{var C;const w=this.generateBaseAudioVideoEventAttributes();(C=this.context.eventController)===null||C===void 0||C.publishEvent("sendingAudioRecovered",w)})}audioVideoDidStart(){this.isMeetingConnected=!0}audioVideoDidStartConnecting(_){this.isMeetingConnected=!1}audioVideoDidStop(_){this.isMeetingConnected=!1}applyHealthPolicy(_,C,w,R){_.update(C);const O=_.healthIfChanged();O!==null&&(this.logger.info(`${_.name} value is now ${O}`),O<=_.minimumHealth()?d.Maybe.of(w).map(D=>D.bind(this)()):d.Maybe.of(R).map(D=>D.bind(this)()))}handleBitrateFrame(_){this.currentAvailableStreamAvgBitrates=_,_.serverAvailableOutgoingBitrate>0&&(this.logger.info(`Received server side estimation of available incoming bitrate ${_.serverAvailableOutgoingBitrate}kbps`),this.context.statsCollector.overrideObservableMetric("availableIncomingBitrate",_.serverAvailableOutgoingBitrate*1e3))}handleSignalingClientEvent(_){var C;if(_.type===f.default.WebSocketClosed&&(_.closeCode===4410||_.closeCode>=4500&&_.closeCode<4600)||_.type===f.default.WebSocketError||_.type===f.default.WebSocketFailed){if(!this.hasSignalingError){const w=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(C=this.context.eventController)===null||C===void 0||C.publishEvent("signalingDropped",w),this.hasSignalingError=!0}}else _.type===f.default.WebSocketOpen&&(this.hasSignalingError=!1);if(_.type===f.default.ReceivedSignalFrame){if(_.message.type===h.SdkSignalFrame.Type.NOTIFICATION){switch(_.message.notification.level){case h.SdkNotificationFrame.NotificationLevel.INFO:this.logger.info(`Received notification from server: ${_.message.notification.message}`);break;case h.SdkNotificationFrame.NotificationLevel.WARNING:this.logger.warn(`Received warning from server: ${_.message.notification.message}`);break;case h.SdkNotificationFrame.NotificationLevel.ERROR:this.logger.error(`Received error from server: ${_.message.notification.message}`);break;default:this.logger.error(`Received notification from server with unknown level ${_.message.notification.level}: ${_.message.notification.message}`);break}return}if(_.message.bitrates){const R=_.message.bitrates;this.context.videoStreamIndex.integrateBitratesFrame(R),this.context.videoDownlinkBandwidthPolicy.updateIndex(this.context.videoStreamIndex),this.handleBitrateFrame(_.message.bitrates)}const w=t.default.fromSignalFrame(_.message);_.message.type!==h.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&w.statusCode()!==r.default.OK&&this.context.audioVideoController.handleMeetingSessionStatus(w,null)}}degradeVideoCodec(_){if(this.context.meetingSupportedVideoSendCodecPreferences!==void 0&&this.context.meetingSupportedVideoSendCodecPreferences.length>1&&!(this.context.meetingSupportedVideoSendCodecPreferences[0].equals(o.default.h264ConstrainedBaselineProfile())||this.context.meetingSupportedVideoSendCodecPreferences[0].equals(o.default.vp8()))){const C=[];for(const w of this.context.videoSendCodecPreferences)w.equals(this.context.meetingSupportedVideoSendCodecPreferences[0])||C.push(w);C.length>0?(this.context.logger.info(`Downgrading codec from ${this.context.meetingSupportedVideoSendCodecPreferences[0].codecName} to ${C[0].codecName} due to ${_}`),this.context.degradedVideoSendCodecs.push(this.context.meetingSupportedVideoSendCodecPreferences[0]),this.context.meetingSupportedVideoSendCodecPreferences=C,this.context.audioVideoController.update({needsRenegotiation:!0})):this.context.logger.warn(`Degrading video codec failed since there is no alternative codec to select. Currently degraded codecs: ${this.context.degradedVideoSendCodecs.map(w=>w.codecName).join(",")}`)}}constructor(_,C,w){super(_.logger),this.context=_,this.initialConnectionHealthData=w,this.taskName="MonitorTask",this.prevSignalStrength=1,this.currentAvailableStreamAvgBitrates=null,this.hasSignalingError=!1,this.presenceHandlerCalled=!1,this.isResubscribeCheckPaused=!1,this.pendingMetricsReport=void 0,this.isMeetingConnected=!1,this.videoEncodingHealthPolicies=[],this.checkAndSendWeakSignalEvent=R=>{const O=R<1,D=this.prevSignalStrength<1,I=O?D?null:p.default.RedmicStartLoss:D?p.default.RedmicEndLoss:null;I&&this.context.statsCollector.logAudioEvent(I),this.prevSignalStrength=R},this.realtimeFatalErrorCallback=R=>{this.logger.error(`realtime error: ${R}: ${R.stack}`),this.context.audioVideoController.handleMeetingSessionStatus(new t.default(r.default.RealtimeApiFailed),R)},this.realtimeAttendeeIdPresenceHandler=(R,O)=>{var D;const I=this.context.meetingSessionConfiguration.credentials.attendeeId;this.logger.info(`attendeePresenceReceived: ${I}`),I===R&&O&&!this.presenceHandlerCalled&&(this.presenceHandlerCalled=!0,this.context.attendeePresenceDurationMs=Date.now()-this.context.startAudioVideoTimestamp,(D=this.context.eventController)===null||D===void 0||D.publishEvent("attendeePresenceReceived",{attendeePresenceDurationMs:this.context.attendeePresenceDurationMs}))},this.generateBaseAudioVideoEventAttributes=()=>{const{signalingOpenDurationMs:R,startTimeMs:O,iceGatheringDurationMs:D,attendeePresenceDurationMs:I,meetingStartDurationMs:M}=this.context;return{meetingDurationMs:O===null?0:Math.round(Date.now()-O),signalingOpenDurationMs:R,iceGatheringDurationMs:D,attendeePresenceDurationMs:I,meetingStartDurationMs:M}},this.generateAudioVideoEventAttributesForReceivingAudioDropped=()=>{const R=this.generateBaseAudioVideoEventAttributes();return Object.assign(Object.assign({},R),{maxVideoTileCount:this.context.maxVideoTileCount,poorConnectionCount:this.context.poorConnectionCount})},this.reconnectionHealthPolicy=new s.default(_.logger,Object.assign({},C),this.initialConnectionHealthData.clone()),this.unusableAudioWarningHealthPolicy=new i.default(Object.assign({},C),this.initialConnectionHealthData.clone()),this.sendingAudioFailureHealthPolicy=new a.default(_.logger,Object.assign({},C),this.initialConnectionHealthData.clone());for(const R of C.videoEncodingHealthPolicies)this.videoEncodingHealthPolicies.push(new R(Object.assign({},C),this.initialConnectionHealthData.clone()))}},"MonitorTask");l.default=S},1992142375:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{cancel(){}name(){return"NoOpTask"}run(){return Promise.resolve()}setParent(m){}},"NoOpTask");l.default=c},2913368614:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(3756404293)),v=u(c(3741513515));let g=n(class{name(){return`${this.task.name()} (once)`}cancel(){if(!this.canceled){if(this.dependencies)for(const a of this.dependencies)a.cancel();this.logger.info(`Canceling ${this.name()}`),v.default.nextTick(()=>this.task.cancel()),this.canceled=!0,this.cancelPromise&&v.default.nextTick(()=>this.cancelPromise(new Error(`canceling ${this.name()}`)))}}logDependencies(){if(this.logger.getLogLevel()>m.default.INFO||!this.dependencies)return;const a=this.dependencies.filter(i=>i).map(i=>i.name()).join(", ");this.logger.info(`${this.task.name()} waiting for dependencies: ${a}`)}run(){if(this.promise)return this.promise;const a=this.dependencies?Promise.all(this.dependencies.map(i=>i==null?void 0:i.run())):Promise.resolve();return this.logDependencies(),this.ongoing=a.then(()=>this.task.run()),this.promise=new Promise((i,e)=>{this.cancelPromise=e,this.ongoing.then(i).catch(e)})}setParent(a){this.task.setParent(a)}constructor(a,i,e){this.logger=a,this.task=i,this.dependencies=e,this.canceled=!1}},"OnceTask");l.default=g},6907504899:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(893025464)),g=m(c(426218501)),s=m(c(516529594));let a=n(class extends s.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){const e=this.context.meetingSessionConfiguration;this.context.signalingClient.openConnection(new v.default(e.urls.signalingURL,e.credentials.joinToken));const t=Date.now();try{yield new Promise((r,o)=>{let f=n(class{cancel(){this.signalingClient.removeObserver(this),o(new Error("OpenSignalingConnectionTask got canceled while waiting to open signaling connection"))}handleSignalingClientEvent(d){switch(d.type){case g.default.WebSocketOpen:this.signalingClient.removeObserver(this),r();break;case g.default.WebSocketFailed:this.signalingClient.removeObserver(this),o(new Error("WebSocket connection failed"));break}}constructor(d){this.signalingClient=d}},"WebSocketOpenInterceptor");const h=new f(this.context.signalingClient);this.context.signalingClient.registerObserver(h),this.taskCanceler=h})}catch(r){throw r}finally{this.context.signalingOpenDurationMs=Math.round(Date.now()-t),this.logger.info(`Opening signaling connection took ${this.context.signalingOpenDurationMs} ms`)}})}constructor(e){super(e.logger),this.context=e,this.taskName="OpenSignalingConnectionTask",this.taskCanceler=null}},"OpenSignalingConnectionTask");l.default=a},6015743885:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(s,a,i,e){function t(r){return r instanceof i?r:new i(function(o){o(r)})}return n(t,"adopt"),new(i||(i=Promise))(function(r,o){function f(d){try{p(e.next(d))}catch(y){o(y)}}n(f,"fulfilled");function h(d){try{p(e.throw(d))}catch(y){o(y)}}n(h,"rejected");function p(d){d.done?r(d.value):t(d.value).then(f,h)}n(p,"step"),p((e=e.apply(s,a||[])).next())})},m=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(516529594));let g=n(class extends v.default{cancel(){for(const a of this.tasksToRunParallel)this.logger.info(`canceling parallel group task ${this.name()} subtask ${a.name()}`),a.cancel()}run(){return u(this,void 0,void 0,function*(){const a=[];for(const e of this.tasksToRunParallel)this.logger.info(`parallel group task ${this.name()} running subtask ${e.name()}`),a.push(e.run());const i=[];for(let e=0;e<a.length;e++){try{yield a[e]}catch(t){i.push(`task ${this.tasksToRunParallel[e].name()} failed: ${t.message}`)}this.logger.info(`parallel group task ${this.name()} completed subtask ${this.tasksToRunParallel[e].name()}`)}if(i.length>0){const e=i.join(", ");this.logAndThrow(`parallel group task ${this.name()} failed for tasks: ${e}`)}this.logger.info(`parallel group task ${this.name()} completed`)})}constructor(a,i,e){super(a),this.taskName=i,this.tasksToRunParallel=e;for(const t of e)t.setParent(this)}},"ParallelGroupTask");l.default=g},3627106901:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(e,t,r,o){function f(h){return h instanceof r?h:new r(function(p){p(h)})}return n(f,"adopt"),new(r||(r=Promise))(function(h,p){function d(b){try{S(o.next(b))}catch(_){p(_)}}n(d,"fulfilled");function y(b){try{S(o.throw(b))}catch(_){p(_)}}n(y,"rejected");function S(b){b.done?h(b.value):f(b.value).then(d,y)}n(S,"step"),S((o=o.apply(e,t||[])).next())})},m=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const v=c(7164668892),g=m(c(426218501)),s=c(5391134031),a=m(c(516529594));let i=n(class extends a.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){this.context.signalingClient.ready()?(this.context.signalingClient.promoteToPrimaryMeeting(this.credentials),this.context.logger.info("Sent request to join primary meeting"),yield this.receivePrimaryMeetingJoinAck()):this.completionCallback(new v.MeetingSessionStatus(v.MeetingSessionStatusCode.SignalingRequestFailed))})}receivePrimaryMeetingJoinAck(){return new Promise((t,r)=>{let o=n(class{cancel(){this.signalingClient.removeObserver(this),this.completionCallback(new v.MeetingSessionStatus(v.MeetingSessionStatusCode.SignalingRequestFailed)),t()}handleSignalingClientEvent(p){p.isConnectionTerminated()&&(this.signalingClient.removeObserver(this),this.logger.info("PromoteToPrimaryMeetingTask connection terminated"),this.completionCallback(new v.MeetingSessionStatus(v.MeetingSessionStatusCode.SignalingRequestFailed)),t()),p.type===g.default.ReceivedSignalFrame&&p.message.type===s.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("Got a primary meeting join ACK"),this.completionCallback(v.MeetingSessionStatus.fromSignalFrame(p.message)),t())}constructor(p,d,y){this.signalingClient=p,this.completionCallback=d,this.logger=y}},"Interceptor");const f=new o(this.context.signalingClient,this.completionCallback,this.context.logger);this.taskCanceler=f,this.context.signalingClient.registerObserver(f)})}constructor(t,r,o){super(t.logger),this.context=t,this.credentials=r,this.completionCallback=o,this.taskName="PromoteToPrimaryMeetingTask",this.taskCanceler=null}},"PromoteToPrimaryMeetingTask");l.default=i},3151098372:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(s,a,i,e){function t(r){return r instanceof i?r:new i(function(o){o(r)})}return n(t,"adopt"),new(i||(i=Promise))(function(r,o){function f(d){try{p(e.next(d))}catch(y){o(y)}}n(f,"fulfilled");function h(d){try{p(e.throw(d))}catch(y){o(y)}}n(h,"rejected");function p(d){d.done?r(d.value):t(d.value).then(f,h)}n(p,"step"),p((e=e.apply(s,a||[])).next())})},m=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(516529594));let g=n(class extends v.default{run(){var a,i;return u(this,void 0,void 0,function*(){if(!(!((i=(a=this.context.meetingSessionConfiguration)===null||a===void 0?void 0:a.urls)===null||i===void 0)&&i.audioHostURL)){this.context.logger.info("No audio connection: not acquiring audio input");return}if(this.context.activeAudioInput){this.context.logger.info("an active audio input exists");return}let e;try{e=yield this.context.mediaStreamBroker.acquireAudioInputStream()}catch{this.context.logger.warn("could not acquire audio input from current device")}e?this.context.activeAudioInput=e:this.context.logger.warn("an audio input is not available")})}constructor(a){super(a.logger),this.context=a,this.taskName="ReceiveAudioInputTask"}},"ReceiveAudioInputTask");l.default=g},9363406688:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(426218501)),g=c(5391134031),s=m(c(516529594));let a=n(class extends s.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return u(this,void 0,void 0,function*(){this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}updateSubscribedGroupdIds(e){const t=new Set;for(const r of e){const o=this.context.videoStreamIndex.attendeeIdForGroupId(r);if(o.length===0){this.logger.warn(`Could not find attendee ID for newly subscribed group ID ${r}`);continue}let f=this.context.videoTileController.getVideoTileForAttendeeId(o);f===void 0&&(this.logger.info(`No existing video tile for attendee ID ${o} with new group ID ${r}. Creating new one.`),f=this.context.videoTileController.addVideoTile(),f.bindVideoStream(o,!1,null,0,0,0,null)),t.add(f.id())}this.serverPausedVideoTileIds.forEach(r=>{t.has(r)||this.serverPausedVideoTileIds.delete(r)})}handleSignalingClientEvent(e){if(e.type!==v.default.ReceivedSignalFrame||e.message.type!==g.SdkSignalFrame.Type.PAUSE&&e.message.type!==g.SdkSignalFrame.Type.RESUME)return;const t=e.message.pause,r=e.message.type;if(this.logger.info(`Received new ${r===g.SdkSignalFrame.Type.PAUSE?"pause":"resume"} frame: ${JSON.stringify(t)}`),!t||this.context.videoTileController.getVideoTileForAttendeeId===void 0||this.context.videoDownlinkBandwidthPolicy.forEachObserver===void 0||this.context.videoStreamIndex.attendeeIdForGroupId===void 0)return;const o=t.groupIds.map(f=>{const h=this.context.videoStreamIndex.attendeeIdForGroupId(f);if(h.length===0){this.logger.warn(`Could not find attendee ID for paused group ID ${f}`);return}return this.context.videoTileController.getVideoTileForAttendeeId(h)});for(const f of o)f!==void 0&&(r===g.SdkSignalFrame.Type.PAUSE?f.state().paused||(this.serverPausedVideoTileIds.add(f.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(h=>{h.tileWillBePausedByDownlinkPolicy(f.id())}),f.pause()):f.state().paused&&this.serverPausedVideoTileIds.has(f.id())&&(this.serverPausedVideoTileIds.delete(f.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(h=>{h.tileWillBeUnpausedByDownlinkPolicy(f.id())}),f.unpause()))}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveRemoteVideoPauseResume",this.serverPausedVideoTileIds=new Set}},"ReceiveRemoteVideoPauseResume");l.default=a},6069988831:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(4599834734)),g=c(5391134031),s=m(c(516529594));let a=n(class extends s.default{checkAndApplyVideoConstraint(e,t,r,o,f){return u(this,void 0,void 0,function*(){const h=t.getSettings();let p;if(e?p=this.context.meetingSessionConfiguration.meetingFeatures.contentMaxResolution:p=this.context.meetingSessionConfiguration.meetingFeatures.videoMaxResolution,r>p.videoWidth||o>p.videoHeight||f>p.videoFrameRate){const d={width:{ideal:p.videoWidth},height:{ideal:p.videoHeight},frameRate:{ideal:p.videoFrameRate}};this.context.logger.warn(`Video track (content = ${e}) will be constrained to: ${JSON.stringify(d)} to remain below configured video quality settings, trackSettings: ${JSON.stringify(h)}`);try{yield t.applyConstraints(d)}catch{this.context.logger.info(`Could not apply constraint for video track (content = ${e})`)}}})}run(){return u(this,void 0,void 0,function*(){const e=this.context.videoDuplexMode===g.SdkStreamServiceType.RX||this.context.videoDuplexMode===g.SdkStreamServiceType.DUPLEX;if(this.context.videoTileController.hasStartedLocalVideoTile()?this.context.videoDuplexMode=e?g.SdkStreamServiceType.DUPLEX:g.SdkStreamServiceType.TX:this.context.videoDuplexMode=e?g.SdkStreamServiceType.RX:0,this.context.videoCaptureAndEncodeParameter=this.context.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters(),!this.context.videoTileController.hasStartedLocalVideoTile()){this.context.logger.info("has not started local video tile"),this.context.activeVideoInput&&(this.context.activeVideoInput=void 0,this.context.videoStreamIndex.integrateUplinkPolicyDecision([]));return}const t=this.context.videoTileController.getLocalVideoTile();let r;try{r=yield this.context.mediaStreamBroker.acquireVideoInputStream()}catch{this.context.logger.warn("could not acquire video input from current device"),this.context.videoTileController.stopLocalVideoTile()}if(this.context.enableSimulcast){const o=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();this.context.videoStreamIndex.integrateUplinkPolicyDecision(Array.from(o.values()))}if(this.context.activeVideoInput=r,r){const o=r.getVideoTracks();if(!o||o.length===0)return;const f=this.context.meetingSessionConfiguration.credentials.attendeeId,h=new v.default(f).hasModality(v.default.MODALITY_CONTENT),p=o[0].getSettings();this.checkAndApplyVideoConstraint(h,o[0],p.width,p.height,p.frameRate);const d=this.context.audioVideoController.configuration.credentials.externalUserId;t.bindVideoStream(f,!0,r,p.width,p.height,null,d);for(const y of o)this.logger.info(`Using video device label=${y.label} id=${y.id}`),this.context.videoDeviceInformation.current_camera_name=y.label,this.context.videoDeviceInformation.current_camera_id=y.id}})}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveVideoInputTask"}},"ReceiveVideoInputTask");l.default=a},2452872079:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(o,f,h,p){function d(y){return y instanceof h?y:new h(function(S){S(y)})}return n(d,"adopt"),new(h||(h=Promise))(function(y,S){function b(w){try{C(p.next(w))}catch(R){S(R)}}n(b,"fulfilled");function _(w){try{C(p.throw(w))}catch(R){S(R)}}n(_,"rejected");function C(w){w.done?y(w.value):d(w.value).then(b,_)}n(C,"step"),C((p=p.apply(o,f||[])).next())})},m=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(1880578541)),g=m(c(4599834734)),s=m(c(4883941895)),a=m(c(426218501)),i=c(5391134031),e=c(903520651),t=m(c(516529594));let r=n(class extends t.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return u(this,void 0,void 0,function*(){this.handleIndexFrame(this.context.indexFrame),this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}handleSignalingClientEvent(f){if(f.type!==a.default.ReceivedSignalFrame||f.message.type!==i.SdkSignalFrame.Type.INDEX)return;const h=f.message.index;this.context.logger.info(`received new index ${JSON.stringify(h)}`),this.handleIndexFrame(h)}pauseIngestion(){this.isIngestionPaused=!0}resumeIngestion(){this.isIngestionPaused&&(this.isIngestionPaused=!1,this.pendingIndex&&(this.context.logger.info("Resuming index ingestion with pending index"),this.handleIndexFrame(this.pendingIndex)))}handleIndexFrame(f){if(!f)return;if(this.isIngestionPaused){this.context.logger.info("Index ingestion is paused, setting most recent index as pending"),this.pendingIndex=f;return}else this.pendingIndex=null;const h=this.context.audioVideoController.configuration.credentials.attendeeId;f.sources=f.sources.filter(_=>{const C=new g.default(_.attendeeId);return!(C.base()===h&&C.hasModality(g.default.MODALITY_CONTENT))});const{videoStreamIndex:p,videoDownlinkBandwidthPolicy:d,videoUplinkBandwidthPolicy:y}=this.context,S=p.allVideoSendingSourcesExcludingSelf(h);p.integrateIndexFrame(f),d.updateIndex(p),y.updateIndex(p),this.resubscribe(d,y),this.updateVideoAvailability(f),this.handleIndexVideosPausedAtSource(),f.supportedReceiveCodecIntersection.length>0&&this.handleSupportedVideoReceiveCodecIntersection(f);const b=p.allVideoSendingSourcesExcludingSelf(h);this.areVideoSourcesEqual(S,b)||this.context.audioVideoController.forEachObserver(_=>{e.Maybe.of(_.remoteVideoSourcesDidChange).map(C=>C.bind(_)(b))})}areVideoSourcesEqual(f,h){if(f.length!==h.length)return!1;const p=n((S,b)=>S.attendee.attendeeId.localeCompare(b.attendee.attendeeId),"compare"),d=[...f].sort(p),y=[...h].sort(p);for(let S=0;S<d.length;S++)if(d[S].attendee.attendeeId!==y[S].attendee.attendeeId)return!1;return!0}resubscribe(f,h){const p=f.wantsResubscribe(),d=(this.context.videoDuplexMode===i.SdkStreamServiceType.TX||this.context.videoDuplexMode===i.SdkStreamServiceType.DUPLEX)&&h.wantsResubscribe(),y=p||d;if(this.logger.info(`should resubscribe: ${y} (downlink: ${p} uplink: ${d})`),!y)return;const S=f.chooseSubscriptions();this.context.videosToReceive=S.truncate(this.context.videoSubscriptionLimit),S.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.context.videoCaptureAndEncodeParameter=h.chooseCaptureAndEncodeParameters(),this.logger.info(`trigger resubscribe for up=${d} down=${p}; videosToReceive=[${this.context.videosToReceive.array()}] captureParams=${JSON.stringify(this.context.videoCaptureAndEncodeParameter)}`),this.context.audioVideoController.update({needsRenegotiation:!1})}updateVideoAvailability(f){if(!this.context.videosToReceive){this.logger.error("videosToReceive must be set in the meeting context.");return}const h=new v.default;h.remoteVideoAvailable=!this.context.videosToReceive.empty(),h.canStartLocalVideo=!f.atCapacity,(!this.context.lastKnownVideoAvailability||!this.context.lastKnownVideoAvailability.equal(h))&&(this.context.lastKnownVideoAvailability=h.clone(),this.context.audioVideoController.forEachObserver(p=>{e.Maybe.of(p.videoAvailabilityDidChange).map(d=>d.bind(p)(h.clone()))}))}handleSupportedVideoReceiveCodecIntersection(f){if(this.context.videoSendCodecPreferences===void 0)return;const h=[];let p=!1;for(const d of this.context.videoSendCodecPreferences){if(this.context.degradedVideoSendCodecs.some(y=>d.equals(y))){this.logger.info(`Skipping ${d.codecName} since the codec has been identfied as degraded`);continue}for(const y of f.supportedReceiveCodecIntersection)if(d.equals(s.default.fromSignaled(y))){h.push(d);break}}if(h.length>0){const d=h.find(y=>this.context.prioritizedSendVideoCodecCapabilities.some(S=>y.equals(S)));this.context.currentVideoSendCodec!==void 0&&(d===void 0||!this.context.currentVideoSendCodec.equals(d))&&(p=!0),this.context.meetingSupportedVideoSendCodecPreferences=h}else this.logger.warn("Interesection of meeting receive codec support and send codec preferences has no overlap, falling back to just values provided in `setVideoCodecSendPreferences`"),this.context.meetingSupportedVideoSendCodecPreferences=void 0;this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs&&this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs(this.context.meetingSupportedVideoSendCodecPreferences,this.context.videoSendCodecPreferences),p&&this.context.audioVideoController.update({needsRenegotiation:!0})}handleIndexVideosPausedAtSource(){const f=this.context.videoStreamIndex.streamsPausedAtSource();for(const h of this.context.videoTileController.getAllVideoTiles()){const p=h.state();f.contain(p.streamId)?h.markPoorConnection()&&this.logger.info(`marks the tile ${p.tileId} as having a poor connection`):h.unmarkPoorConnection()&&this.logger.info(`unmarks the tile ${p.tileId} as having a poor connection`)}}constructor(f){super(f.logger),this.context=f,this.taskName="ReceiveVideoStreamIndexTask",this.isIngestionPaused=!1,this.pendingIndex=null}},"ReceiveVideoStreamIndexTask");l.default=r},6771673942:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(516529594));let v=n(class extends m.default{run(){return this.fn().then(()=>{})}constructor(s,a,i="RunnableTask"){super(s),this.fn=a,this.taskName=i}},"RunnableTask");l.default=v},2471283351:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(e,t,r,o){function f(h){return h instanceof r?h:new r(function(p){p(h)})}return n(f,"adopt"),new(r||(r=Promise))(function(h,p){function d(b){try{S(o.next(b))}catch(_){p(_)}}n(d,"fulfilled");function y(b){try{S(o.throw(b))}catch(_){p(_)}}n(y,"rejected");function S(b){b.done?h(b.value):f(b.value).then(d,y)}n(S,"step"),S((o=o.apply(e,t||[])).next())})},m=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(1766966835)),g=m(c(426218501)),s=c(5391134031),a=m(c(516529594));let i=n(class Fg extends a.default{run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToSendDataMessage(this.sendDataMessageHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeFromSendDataMessage(this.sendDataMessageHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(t){if(t.type===g.default.ReceivedSignalFrame&&t.message.type===s.SdkSignalFrame.Type.DATA_MESSAGE)for(const r of t.message.dataMessage.messages){const o=new v.default(r.ingestTimeNs/1e6,r.topic,r.data,r.senderAttendeeId,r.senderExternalUserId,r.ingestTimeNs===0);this.context.realtimeController.realtimeReceiveDataMessage(o)}}validateDataMessage(t,r,o){if(!Fg.TOPIC_REGEX.test(t))throw new Error("Invalid topic");if(r.length>Fg.DATA_SIZE)throw new Error("Data size has to be less than 2048 bytes");if(o&&o<0)throw new Error("The life time of the message has to be non negative")}constructor(t){super(t.logger),this.context=t,this.taskName="SendAndReceiveDataMessagesTask",this.sendDataMessageHandler=(r,o,f)=>{if(this.context.signalingClient.ready()){let h;o instanceof Uint8Array?h=o:typeof o=="string"?h=new TextEncoder().encode(o):h=new TextEncoder().encode(JSON.stringify(o)),this.validateDataMessage(r,h,f);const p=s.SdkDataMessagePayload.create();p.topic=r,p.lifetimeMs=f,p.data=h;const d=s.SdkDataMessageFrame.create();d.messages=[p],this.context.signalingClient.sendDataMessage(d)}else this.context.logger.error("Signaling client is not ready")}}},"SendAndReceiveDataMessagesTask");l.default=i,i.TOPIC_REGEX=new RegExp(/^[a-zA-Z0-9_-]{1,36}$/),i.DATA_SIZE=2048},3894566132:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(516529594)),g=m(c(9293073193));let s=n(class extends v.default{cancel(){this.currentTask&&(this.logger.info(`canceling serial group task ${this.name()} subtask ${this.currentTask.name()}`),this.currentTask.cancel())}run(){return u(this,void 0,void 0,function*(){for(const i of this.tasksToRunSerially){this.getStatus()===g.default.CANCELED&&this.logAndThrow(`serial group task ${this.name()} was canceled`);try{this.logger.info(`serial group task ${this.name()} running subtask ${i.name()}`),this.currentTask=i,yield i.run(),this.logger.info(`serial group task ${this.name()} completed subtask ${i.name()}`)}catch(e){this.logAndThrow(`serial group task ${this.name()} was canceled due to subtask ${this.currentTask.name()} error: ${e.message}`)}finally{this.currentTask=null}}this.logger.info(`serial group task ${this.name()} completed`)})}constructor(i,e,t){super(i),this.taskName=e,this.tasksToRunSerially=t,this.currentTask=null;for(const r of t)r.setParent(this)}},"SerialGroupTask");l.default=s},6412210284:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(e,t,r,o){function f(h){return h instanceof r?h:new r(function(p){p(h)})}return n(f,"adopt"),new(r||(r=Promise))(function(h,p){function d(b){try{S(o.next(b))}catch(_){p(_)}}n(d,"fulfilled");function y(b){try{S(o.throw(b))}catch(_){p(_)}}n(y,"rejected");function S(b){b.done?h(b.value):f(b.value).then(d,y)}n(S,"step"),S((o=o.apply(e,t||[])).next())})},m=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(8351168186)),g=m(c(4599834734)),s=m(c(3430379175)),a=m(c(516529594));let i=n(class extends a.default{cancel(){if(this.cancelPromise){const t=new Error(`canceling ${this.name()}`);this.cancelPromise(t),delete this.cancelPromise}}run(){return u(this,void 0,void 0,function*(){const t=this.context.peer;let o=this.context.sdpOfferInit.sdp;this.context.browserBehavior.supportsVideoLayersAllocationRtpHeaderExtension()&&(o=new s.default(o).withVideoLayersAllocationRtpHeaderExtension(this.context.previousSdpOffer).sdp),this.context.browserBehavior.supportsDependencyDescriptorRtpHeaderExtension()&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension!==void 0&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension()&&(o=new s.default(o).withDependencyDescriptorRtpHeaderExtension(this.context.previousSdpOffer).sdp),new v.default().requiresDisablingH264Encoding()&&(o=new s.default(o).removeH264SupportFromSendSection().sdp);const f=this.context.audioVideoController.configuration.credentials.attendeeId;if(new g.default(f).hasModality(g.default.MODALITY_CONTENT)&&this.context.audioVideoController.configuration.enableSVC&&(o=new s.default(o).withStartingVideoSendBitrate(100).sdp),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(o=new s.default(o).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.audioProfile&&(o=new s.default(o).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(o=new s.default(o).withStereoAudio().sdp),this.context.audioProfile.hasRedundancyEnabled())){const d=new s.default(o).getAudioPayloadTypes();this.context.transceiverController&&this.context.transceiverController.setAudioPayloadTypes&&this.context.transceiverController.setAudioPayloadTypes(d)}this.logger.debug(()=>`local description is >>>${o}<<<`);const p={type:"offer",sdp:o,toJSON:null};yield new Promise((d,y)=>u(this,void 0,void 0,function*(){this.cancelPromise=S=>{y(S)};try{yield t.setLocalDescription(p),d()}catch(S){y(S)}finally{delete this.cancelPromise}})),this.context.logger.info("set local description")})}constructor(t){super(t.logger),this.context=t,this.taskName="SetLocalDescriptionTask"}},"SetLocalDescriptionTask");l.default=i},839180639:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(e,t,r,o){function f(h){return h instanceof r?h:new r(function(p){p(h)})}return n(f,"adopt"),new(r||(r=Promise))(function(h,p){function d(b){try{S(o.next(b))}catch(_){p(_)}}n(d,"fulfilled");function y(b){try{S(o.throw(b))}catch(_){p(_)}}n(y,"rejected");function S(b){b.done?h(b.value):f(b.value).then(d,y)}n(S,"step"),S((o=o.apply(e,t||[])).next())})},m=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(4599834734)),g=m(c(3430379175)),s=m(c(4883941895)),a=m(c(516529594));let i=n(class extends a.default{cancel(){this.cancelICEPromise&&this.cancelICEPromise()}run(){var t;return u(this,void 0,void 0,function*(){this.context.peer||this.logAndThrow("session does not have peer connection; bypass set remote description");let o=this.context.sdpAnswer;o=new g.default(o).withoutServerReflexiveCandidates().sdp,this.context.audioProfile&&(o=new g.default(o).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(o=new g.default(o).withStereoAudio().sdp)),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(o=new g.default(o).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.prioritizedSendVideoCodecCapabilities=new g.default(o).prioritizedSendVideoCodecCapabilities(),this.context.currentVideoSendCodec=this.context.prioritizedSendVideoCodecCapabilities.length>0?this.context.prioritizedSendVideoCodecCapabilities[0]:void 0;const f=this.context.activeVideoInput;if(f!==void 0){const p=this.context.audioVideoController.configuration.credentials.attendeeId,d=new v.default(p).hasModality(v.default.MODALITY_CONTENT),y=f.getVideoTracks()[0];d&&(((t=this.context.currentVideoSendCodec)===null||t===void 0?void 0:t.codecName)===s.default.av1Main().codecName?(y.contentHint="text",this.logger.info(`Setting content hint to text for AV1, attendee: ${p}`)):this.context.audioVideoController.configuration.enableSVC&&(y.contentHint="motion",this.logger.info(`Setting content hint to motion to enable SVC, attendee: ${p}`)))}this.logger.info(`processed remote description is >>>${o}<<<`);const h={type:"answer",sdp:o,toJSON:null};try{yield this.createICEConnectionCompletedPromise(h)}catch(p){throw p}})}createICEConnectionCompletedPromise(t){return new Promise((r,o)=>u(this,void 0,void 0,function*(){const f=n(()=>{(this.context.peer.iceConnectionState==="connected"||this.context.peer.iceConnectionState==="completed")&&(this.context.peer.removeEventListener("iceconnectionstatechange",f),r())},"checkConnectionCompleted");this.cancelICEPromise=()=>{this.context.peer&&this.context.peer.removeEventListener("iceconnectionstatechange",f),o(new Error(`${this.name()} got canceled while waiting for the ICE connection state`))},this.context.peer.addEventListener("iceconnectionstatechange",f);try{yield this.context.peer.setRemoteDescription(t),this.logger.info("set remote description, waiting for ICE connection"),f()}catch(h){o(h)}}))}constructor(t){super(t.logger),this.context=t,this.taskName="SetRemoteDescriptionTask"}},"SetRemoteDescriptionTask");l.default=i},2641934340:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(p,d,y,S){function b(_){return _ instanceof y?_:new y(function(C){C(_)})}return n(b,"adopt"),new(y||(y=Promise))(function(_,C){function w(D){try{O(S.next(D))}catch(I){C(I)}}n(w,"fulfilled");function R(D){try{O(S.throw(D))}catch(I){C(I)}}n(R,"rejected");function O(D){D.done?_(D.value):b(D.value).then(w,R)}n(O,"step"),O((S=S.apply(p,d||[])).next())})},m=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(3777990285)),g=m(c(4882394368)),s=m(c(3430379175)),a=m(c(9675039205)),i=c(1448262436),e=m(c(426218501)),t=m(c(1026405281)),r=c(5391134031),o=c(6700033168),f=m(c(516529594));let h=n(class extends f.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){let d="";if(this.context.peer&&this.context.peer.localDescription&&(d=new s.default(this.context.peer.localDescription.sdp).withUnifiedPlanFormat().sdp),!this.context.enableSimulcast){let O=0,D=0;this.context.videoCaptureAndEncodeParameter&&(O=this.context.videoCaptureAndEncodeParameter.captureFrameRate(),D=this.context.videoCaptureAndEncodeParameter.encodeBitrates()[0]);const I={rid:"hi",maxBitrate:D*1e3,maxFramerate:O,active:!0};this.context.videoStreamIndex.integrateUplinkPolicyDecision([I])}const y=this.fixUpSubscriptionOrder(d,this.context.videoSubscriptions),S=this.context.videoDuplexMode===r.SdkStreamServiceType.TX||this.context.videoDuplexMode===r.SdkStreamServiceType.DUPLEX;let b,_=d;if((this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension===void 0||!this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension())&&(_=new s.default(_).withoutDependencyDescriptorRtpHeaderExtension().sdp),this.context.serverSupportsCompression){const O=this.context.previousSdpOffer?this.context.previousSdpOffer.sdp:"";b=this.textCompressor.compress(_,O),this.context.logger.info(`Compressed the SDP message from ${_.length} to ${b.length} bytes.`),d=""}this.context.previousSdpOffer=new s.default(d);const C=new t.default(this.context.meetingSessionConfiguration.credentials.attendeeId,d,this.context.meetingSessionConfiguration.urls.audioHostURL,this.context.realtimeController.realtimeIsLocalAudioMuted(),!1,y,S,this.context.videoStreamIndex.localStreamDescriptions(),!0,b);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!i.serverSideNetworkAdaptionIsNoneOrDefault(this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())&&this.context.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&(C.videoSubscriptionConfiguration=o.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(this.context,y.map(O=>O===0?0:this.context.videoStreamIndex.groupIdForStreamId(O)),this.context.videoDownlinkBandwidthPolicy.getVideoPreferences())),this.context.logger.info(`sending subscribe: ${JSON.stringify(C)}`),this.context.signalingClient.subscribe(C);const w=yield this.receiveSubscribeAck();this.context.logger.info(`got subscribe ack: ${JSON.stringify(w)}`);let R="";w.compressedSdpAnswer&&w.compressedSdpAnswer.length?(R=this.textCompressor.decompress(w.compressedSdpAnswer,this.context.previousSdpAnswerAsString),R.length===0&&(this.context.sdpAnswer="",this.context.previousSdpAnswerAsString="",this.logAndThrow("Error occurred while trying to decompress the SDP answer.")),this.context.logger.info(`Decompressed the SDP message from ${w.compressedSdpAnswer.length} to ${R.length} bytes.`),this.context.sdpAnswer=R):this.context.sdpAnswer=w.sdpAnswer,this.context.previousSdpAnswerAsString=this.context.sdpAnswer,this.context.videoStreamIndex.integrateSubscribeAckFrame(w)})}fixUpSubscriptionOrder(d,y){if(this.context.transceiverController.getMidForStreamId===void 0)return y;const S=new Map;for(const C of y){const w=this.context.transceiverController.getMidForStreamId(C);if(w===void 0){C!==0&&this.logger.warn(`Could not find MID for stream ID: ${C}`);continue}S.set(w,C)}const b=new s.default(d).mediaSections(),_=[];for(const C of b)if(C.mediaType==="video")if(C.direction==="recvonly"){const w=S.get(C.mid);if(w===void 0){this.logger.warn(`Could not find stream ID for MID: ${C.mid}`);continue}_.push(w)}else _.push(0);return this.logger.info(`Fixed up ${JSON.stringify(y)} to ${JSON.stringify(_)} (may be same))}`),_}receiveSubscribeAck(){return new Promise((d,y)=>{const S=this.context;let b=n(class{cancel(){this.signalingClient.removeObserver(this),y(new Error("SubscribeAndReceiveSubscribeAckTask got canceled while waiting for SdkSubscribeAckFrame"))}handleSignalingClientEvent(w){if(w.isConnectionTerminated()){const O=`SubscribeAndReceiveSubscribeAckTask connection was terminated with code ${w.closeCode} and reason: ${w.closeReason}`;S.logger.warn(O);let D=g.default.TaskFailed;w.closeCode>=4500&&w.closeCode<4600&&(D=g.default.SignalingInternalServerError),S.audioVideoController.handleMeetingSessionStatus(new v.default(D),new Error(O));return}if(w.type!==e.default.ReceivedSignalFrame||w.message.type!==r.SdkSignalFrame.Type.SUBSCRIBE_ACK)return;this.signalingClient.removeObserver(this);const R=w.message.suback;d(R)}constructor(w){this.signalingClient=w}},"Interceptor");const _=new b(this.context.signalingClient);this.context.signalingClient.registerObserver(_),this.taskCanceler=_})}constructor(d){super(d.logger),this.context=d,this.taskName="SubscribeAndReceiveSubscribeAckTask",this.taskCanceler=null,this.textCompressor=new a.default(d.logger)}},"SubscribeAndReceiveSubscribeAckTask");l.default=h},9293073193:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var c;(function(u){u.IDLE="IDLE",u.RUNNING="RUNNING",u.CANCELED="CANCELED",u.FINISHED="FINISHED"})(c||(c={})),l.default=c},3450261616:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(6393942734)),g=m(c(516529594));let s=n(class extends g.default{cancel(){this.logger.info(`canceling timeout task ${this.name()} subtask ${this.taskToRunBeforeTimeout}`),this.taskToRunBeforeTimeout.cancel()}run(){return u(this,void 0,void 0,function*(){const i=new v.default(this.timeoutMs);i.start(()=>{this.logger.info(`timeout reached for task ${this.name()}`),this.taskToRunBeforeTimeout.cancel()});try{yield this.taskToRunBeforeTimeout.run()}finally{i.stop()}this.logger.info(`timeout task ${this.name()} completed`)})}constructor(i,e,t){super(i),this.taskToRunBeforeTimeout=e,this.timeoutMs=t,this.taskName=`Timeout${this.timeoutMs}ms`,e.setParent(this)}},"TimeoutTask");l.default=s},7500181884:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(4882394368)),g=m(c(516529594));let s=n(class extends g.default{cancel(){if(this.cancelPromise){const i=new Error(`canceling ${this.name()} due to the meeting status code: ${v.default.NoAttendeePresent}`);this.cancelPromise(i),delete this.cancelPromise}}run(){return u(this,void 0,void 0,function*(){const i=this.context.meetingSessionConfiguration.credentials.attendeeId;return new Promise((e,t)=>{const r=n((o,f,h,p,d)=>{i===o&&f&&(this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(r),e(),delete this.cancelPromise)},"handler");this.cancelPromise=o=>{this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(r),t(o)},this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(r)})})}constructor(i){super(i.logger),this.context=i,this.taskName="WaitForAttendeePresenceTask"}},"WaitForAttendeePresenceTask");l.default=s},6769427378:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(t,r,o,f){function h(p){return p instanceof o?p:new o(function(d){d(p)})}return n(h,"adopt"),new(o||(o=Promise))(function(p,d){function y(_){try{b(f.next(_))}catch(C){d(C)}}n(y,"fulfilled");function S(_){try{b(f.throw(_))}catch(C){d(C)}}n(S,"rejected");function b(_){_.done?p(_.value):h(_.value).then(y,S)}n(b,"step"),b((f=f.apply(t,r||[])).next())})},m=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(4999349075)),g=m(c(7894724558)),s=m(c(1510239283)),a=m(c(3440292739)),i=m(c(3741513515));let e=n(class{setEncodingParameters(r){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!r||r.size===0)return;const f=Array.from(r.values()),h=o.getParameters();if(!h.encodings||h.encodings.length===0)h.encodings=f;else for(const p of h.encodings)for(const d of f){if((p.rid||d.rid)&&p.rid!==d.rid)continue;let y;for(y in d)y==="rid"||y==="codecPayloadType"||d.hasOwnProperty(y)&&(p[y]=d[y])}yield o.setParameters(h)})}localAudioTransceiver(){return this._localAudioTransceiver}localVideoTransceiver(){return this._localCameraTransceiver}setVideoSendingBitrateKbps(r){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!o||r<=0)return;const f=o.getParameters();f.encodings||(f.encodings=[{}]);for(const h of f.encodings)h.maxBitrate=r*1e3;yield o.setParameters(f)})}setPeer(r){this.peer=r}reset(){this.destroyAudioRedWorkerAndStates(),this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null}useTransceivers(){return!!this.peer&&typeof this.peer.getTransceivers<"u"}hasVideoInput(){return!(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")}trackIsVideoInput(r){return this._localCameraTransceiver?r===this._localCameraTransceiver.sender.track||r===this._localCameraTransceiver.receiver.track:!1}setupLocalTransceivers(){var r,o;this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((o=(r=this.meetingSessionContext)===null||r===void 0?void 0:r.audioProfile)===null||o===void 0)&&o.hasRedundancyEnabled()&&this.setupAudioRedWorker()),this._localCameraTransceiver||(this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}replaceAudioTrack(r){return u(this,void 0,void 0,function*(){return!this._localAudioTransceiver||this._localAudioTransceiver.direction!=="sendrecv"?(this.logger.info("audio transceiver direction is not set up or not activated"),!1):(yield this._localAudioTransceiver.sender.replaceTrack(r),!0)})}setAudioInput(r){return u(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localAudioTransceiver,r)})}setVideoInput(r){return u(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localCameraTransceiver,r)})}updateVideoTransceivers(r,o){if(!this.useTransceivers())return o.array();const f=this.peer.getTransceivers();return this.videoSubscriptions=[0],o=o.clone(),this.updateTransceivers(f,r,o),this.logger.debug(()=>this.debugDumpTransceivers()),this.videoSubscriptions}updateTransceivers(r,o,f){const h=f.array();r.length!==0&&!r[0].stop?(this.logger.info("Updating transceivers without `stop` function"),this.updateTransceiverWithoutStop(r,o,h)):r.length!==0&&this.updateTransceiverWithStop(r,o,h);for(const p of h){const d=this.addTransceiver("video",{direction:"recvonly",streams:[new MediaStream]});this.streamIdToTransceiver.set(p,d),this.groupIdToTransceiver.set(o.groupIdForStreamId(p),d),this.videoSubscriptions.push(p),this.logger.info(`adding transceiver mid: ${d.mid} subscription: ${p} direction: recvonly`)}}updateTransceiverWithStop(r,o,f){let h=1;this.videoSubscriptions=[0];for(const p of r){if(p===this._localCameraTransceiver||!this.transceiverIsVideo(p)||!p.mid)continue;let d=!1;const y=o.streamIdForTrack("v_"+p.mid);if(p.direction!=="inactive"&&y!==void 0){for(const[S,b]of f.entries())if(o.StreamIdsInSameGroup(y,b)){p.direction="recvonly",this.videoSubscriptions[h]=b,d=!0,this.streamIdToTransceiver.delete(y),this.streamIdToTransceiver.set(b,p),f.splice(S,1);break}}if(!d){this.videoSubscriptions[h]=0,this.logger.info(`Stopping MID: ${p.mid}, direction: ${p.direction}, current direction: ${p.currentDirection}`),p.stop();for(const[S,b]of this.streamIdToTransceiver.entries())p.mid===b.mid&&(this.streamIdToTransceiver.delete(S),this.groupIdToTransceiver.delete(o.groupIdForStreamId(S)))}h+=1}}updateTransceiverWithoutStop(r,o,f){let h=1;for(const p of r)if(!(p===this._localCameraTransceiver||!this.transceiverIsVideo(p))){if(this.videoSubscriptions[h]=0,p.direction!=="inactive"){const d=o.streamIdForTrack("v_"+p.mid);if(d!==void 0){for(const[y,S]of f.entries())if(o.StreamIdsInSameGroup(d,S)){p.direction="recvonly",this.videoSubscriptions[h]=S,this.streamIdToTransceiver.delete(d),this.streamIdToTransceiver.set(S,p),f.splice(y,1);break}}}h+=1}h=1;for(const p of r)if(!(p===this._localCameraTransceiver||!this.transceiverIsVideo(p))){if(p.direction==="inactive"&&f.length>0){p.direction="recvonly";const d=f.shift();this.videoSubscriptions[h]=d,this.streamIdToTransceiver.set(d,p),this.groupIdToTransceiver.set(o.groupIdForStreamId(d),p)}else if(this.videoSubscriptions[h]===0){p.direction="inactive";for(const[d,y]of this.streamIdToTransceiver.entries())p===y&&(this.streamIdToTransceiver.delete(d),this.groupIdToTransceiver.delete(o.groupIdForStreamId(d)))}h+=1}}getMidForStreamId(r){var o;return(o=this.streamIdToTransceiver.get(r))===null||o===void 0?void 0:o.mid}setStreamIdForMid(r,o){for(const[f,h]of this.streamIdToTransceiver.entries())if(h.mid===r){this.streamIdToTransceiver.delete(f),this.streamIdToTransceiver.set(o,h);return}}getMidForGroupId(r){var o,f;return(f=(o=this.groupIdToTransceiver.get(r))===null||o===void 0?void 0:o.mid)!==null&&f!==void 0?f:void 0}transceiverIsVideo(r){return r.receiver&&r.receiver.track&&r.receiver.track.kind==="video"||r.sender&&r.sender.track&&r.sender.track.kind==="video"}debugDumpTransceivers(){let r="",o=0;for(const f of this.peer.getTransceivers())this.transceiverIsVideo(f)&&(r+=`transceiver index=${o} mid=${f.mid} subscription=${this.videoSubscriptions[o]} direction=${f.direction}
`,o+=1);return r}setTransceiverInput(r,o){return u(this,void 0,void 0,function*(){r&&(o?r.direction="sendrecv":r.direction="inactive",yield r.sender.replaceTrack(o))})}forEachRedMetricsObserver(r){for(const o of this.redMetricsObservers)i.default.nextTick(()=>{this.redMetricsObservers.has(o)&&o.recoveryMetricsDidReceive(r)})}disableAudioRedundancy(){this.meetingSessionContext.audioProfile=new v.default(this.meetingSessionContext.audioProfile.audioBitrateBps,!1),this.meetingSessionContext.audioVideoController.setAudioProfile(this.meetingSessionContext.audioProfile)}setupAudioRedWorker(){var r,o;const f=!!window.RTCRtpScriptTransform,h=!!RTCRtpSender.prototype.createEncodedStreams;if(f)this.logger.info("[AudioRed] Supports encoded insertable streams using RTCRtpScriptTransform");else if(h)this.logger.info("[AudioRed] Supports encoded insertable streams using TransformStream");else throw this.disableAudioRedundancy(),new Error("[AudioRed] Encoded insertable streams not supported. Recreating peer connection with audio redundancy disabled.");try{this.audioRedWorkerURL=URL.createObjectURL(new Blob([a.default],{type:"application/javascript"})),this.logger.info(`[AudioRed] Redundant audio worker URL ${this.audioRedWorkerURL}`),this.audioRedWorker=new Worker(this.audioRedWorkerURL)}catch(p){throw this.logger.error(`[AudioRed] Unable to create audio red worker due to ${p}`),URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.disableAudioRedundancy(),this.logger.info("[AudioRed] Recreating peer connection with audio redundancy disabled"),p}if(this.audioRedEnabled=!0,this.audioRedWorker.onmessage=p=>{if(p.data.type==="REDWorkerLog")this.logger.info(p.data.log);else if(p.data.type==="RedundantAudioEncoderStats"){const d=new g.default;d.currentTimestampMs=Date.now(),d.ssrc=p.data.ssrc,d.totalAudioPacketsLost=p.data.totalAudioPacketsLost,d.totalAudioPacketsExpected=p.data.totalAudioPacketsExpected,d.totalAudioPacketsRecoveredRed=p.data.totalAudioPacketsRecoveredRed,d.totalAudioPacketsRecoveredFec=p.data.totalAudioPacketsRecoveredFec,this.forEachRedMetricsObserver(d)}},f)this._localAudioTransceiver.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"SenderTransform"}),this._localAudioTransceiver.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"ReceiverTransform"});else if(h){const p=this._localAudioTransceiver.sender.createEncodedStreams(),d=this._localAudioTransceiver.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"StartRedWorker",send:p,receive:d},[p.readable,p.writable,d.readable,d.writable])}(r=this.meetingSessionContext)===null||r===void 0||r.audioVideoController.addObserver(this),this.addRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector)}addTransceiver(r,o){var f;const h=this.peer.addTransceiver(r,o);if(!(!((f=this.peer.getConfiguration())===null||f===void 0)&&f.encodedInsertableStreams)||!this.audioRedWorker)return h;const p=!!window.RTCRtpScriptTransform,d=!!RTCRtpSender.prototype.createEncodedStreams;if(p)h.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"}),h.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"});else if(d){const y=h.sender.createEncodedStreams(),S=h.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"PassthroughTransform",send:y,receive:S},[y.readable,y.writable,S.readable,S.writable])}return h}destroyAudioRedWorkerAndStates(){var r,o;this.audioRedWorker&&(URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.audioRedEnabled=!0,(r=this.meetingSessionContext)===null||r===void 0||r.audioVideoController.removeObserver(this),this.removeRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector))}setAudioPayloadTypes(r){this.audioRedWorker&&(this.audioRedWorker.postMessage({msgType:"RedPayloadType",payloadType:r.get("red")}),this.audioRedWorker.postMessage({msgType:"OpusPayloadType",payloadType:r.get("opus")}))}metricsDidReceive(r){const{currentTimestampMs:o}=r,f=r.getRTCStatsReport();let h=0,p=0,d=0;f.forEach(w=>{w.kind==="audio"&&(w.type==="outbound-rtp"?p=w.packetsSent:w.type==="remote-inbound-rtp"&&(h=w.timestamp,d=w.packetsLost))}),(this.audioMetricsHistory.length===0||h>this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs&&p>this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent)&&this.audioMetricsHistory.push({timestampMs:h,totalPacketsSent:p,totalPacketsLost:d}),this.audioMetricsHistory.length>this.maxAudioMetricsHistory&&this.audioMetricsHistory.shift();const y=this.lossPercent(this.audioRedPacketLossShortEvalPeriodMs),S=this.lossPercent(this.audioRedPacketLossLongEvalPeriodMs),b=Math.max(y,S),[_,C]=s.default.getNumRedundantEncodingsForPacketLoss(b);if(C){this.lastHighPacketLossEventTimestampMs=o,this.audioRedEnabled&&(this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Disable"}),this.audioRedEnabled=!1,this.lastAudioRedTurnOffTimestampMs=o);return}else if(!this.audioRedEnabled){const w=o-this.lastAudioRedTurnOffTimestampMs,R=o-this.lastHighPacketLossEventTimestampMs;if(w>=this.audioRedPacketLossLongEvalPeriodMs&&R<this.redRecoveryTimeMs)return;this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Enable"}),this.audioRedEnabled=!0,this.maybeResetHoldDownTimer(o)}this.shouldUpdateAudioRedWorkerEncodings(o,_)&&this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"UpdateNumRedundantEncodings",numRedundantEncodings:_})}maybeResetHoldDownTimer(r){this.currentNumRedundantEncodings>0&&(this.lastRedHolddownTimerStartTimestampMs=r)}lossPercent(r){if(this.audioMetricsHistory.length<2)return 0;const o=this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs,f=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent,h=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsLost;for(let p=this.audioMetricsHistory.length-2;p>=0;p--)if(o-this.audioMetricsHistory[p].timestampMs>=r){const d=h-this.audioMetricsHistory[p].totalPacketsLost,y=f-this.audioMetricsHistory[p].totalPacketsSent,S=100*(d/y);return Math.max(0,Math.min(S,100))}return 0}shouldUpdateAudioRedWorkerEncodings(r,o){return this.currentNumRedundantEncodings===o?(this.maybeResetHoldDownTimer(r),!1):o<this.currentNumRedundantEncodings&&r-this.lastRedHolddownTimerStartTimestampMs<this.audioRedHoldDownTimeMs?!1:(this.currentNumRedundantEncodings=o,this.maybeResetHoldDownTimer(r),!0)}addRedundantAudioRecoveryMetricsObserver(r){this.redMetricsObservers.add(r)}removeRedundantAudioRecoveryMetricsObserver(r){this.redMetricsObservers.delete(r)}constructor(r,o,f){this.logger=r,this.browserBehavior=o,this.meetingSessionContext=f,this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null,this.streamIdToTransceiver=new Map,this.groupIdToTransceiver=new Map,this.audioRedWorker=null,this.audioRedWorkerURL=null,this.audioMetricsHistory=new Array,this.redMetricsObservers=new Set,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.maxAudioMetricsHistory=20,this.audioRedPacketLossShortEvalPeriodMs=5*1e3,this.audioRedPacketLossLongEvalPeriodMs=15*1e3,this.audioRedHoldDownTimeMs=5*60*1e3,this.redRecoveryTimeMs=1*60*1e3}},"DefaultTransceiverController");l.default=e},1438956810:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(s,a,i,e){function t(r){return r instanceof i?r:new i(function(o){o(r)})}return n(t,"adopt"),new(i||(i=Promise))(function(r,o){function f(d){try{p(e.next(d))}catch(y){o(y)}}n(f,"fulfilled");function h(d){try{p(e.throw(d))}catch(y){o(y)}}n(h,"rejected");function p(d){d.done?r(d.value):t(d.value).then(f,h)}n(p,"step"),p((e=e.apply(s,a||[])).next())})},m=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(2962876954));let g=n(class Hf extends v.default{setEncodingParameters(a){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const i=this._localCameraTransceiver.sender,e=Array.from(a.values());if(e.length<=0)return;const t=i.getParameters();if(!t.encodings)t.encodings=e;else for(let r=0;r<t.encodings.length;r++)t.encodings[r].rid===v.default.LOW_LEVEL_NAME&&this.copyEncodingParams(a.get(v.default.LOW_LEVEL_NAME),t.encodings[r]),t.encodings[r].rid===v.default.HIGH_LEVEL_NAME&&this.copyEncodingParams(a.get(v.default.HIGH_LEVEL_NAME),t.encodings[r]);yield i.setParameters(t),this.logVideoTransceiverParameters()})}constructor(a,i,e){super(a,i,e);let t=2;this.videoQualityControlParameterMap=new Map;for(let r=0;r<Hf.NAME_ARR_ASCENDING.length;r++){const o=Hf.NAME_ARR_ASCENDING[r];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:Hf.BITRATE_ARR_ASCENDING[r]*1e3}),t=t/2}}},"SimulcastContentShareTransceiverController");l.default=g,g.NAME_ARR_ASCENDING=["low","hi"],g.BITRATE_ARR_ASCENDING=[300,1200]},2962876954:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(s,a,i,e){function t(r){return r instanceof i?r:new i(function(o){o(r)})}return n(t,"adopt"),new(i||(i=Promise))(function(r,o){function f(d){try{p(e.next(d))}catch(y){o(y)}}n(f,"fulfilled");function h(d){try{p(e.throw(d))}catch(y){o(y)}}n(h,"rejected");function p(d){d.done?r(d.value):t(d.value).then(f,h)}n(p,"step"),p((e=e.apply(s,a||[])).next())})},m=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(6769427378));let g=n(class fl extends v.default{setEncodingParameters(a){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const i=this._localCameraTransceiver.sender,e=Array.from(a.values());if(e.length<=0)return;const t=i.getParameters();if(!t.encodings)t.encodings=e;else for(const r of t.encodings)r.rid===fl.LOW_LEVEL_NAME&&this.copyEncodingParams(a.get(fl.LOW_LEVEL_NAME),r),r.rid===fl.MID_LEVEL_NAME&&this.copyEncodingParams(a.get(fl.MID_LEVEL_NAME),r),r.rid===fl.HIGH_LEVEL_NAME&&this.copyEncodingParams(a.get(fl.HIGH_LEVEL_NAME),r);yield i.setParameters(t),this.logVideoTransceiverParameters()})}setVideoSendingBitrateKbps(a){return u(this,void 0,void 0,function*(){})}setupLocalTransceivers(){var a,i;if(this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((i=(a=this.meetingSessionContext)===null||a===void 0?void 0:a.audioProfile)===null||i===void 0)&&i.hasRedundancyEnabled()&&this.setupAudioRedWorker()),!this._localCameraTransceiver)){const e=Array.from(this.videoQualityControlParameterMap.values());this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream],sendEncodings:e})}}logVideoTransceiverParameters(){const i=this._localCameraTransceiver.sender.getParameters().encodings;let e=`simulcast: current encoding parameters 
`;for(const t of i)e+=`rid=${t.rid} maxBitrate=${t.maxBitrate} active=${t.active} scaleDownBy=${t.scaleResolutionDownBy} maxFrameRate = ${t.maxFramerate} 
`;this.logger.info(e)}copyEncodingParams(a,i){i.active=a.active,i.maxBitrate=a.maxBitrate,i.scaleResolutionDownBy=a.scaleResolutionDownBy,i.maxFramerate=a.maxFramerate}constructor(a,i,e){super(a,i,e),this.videoQualityControlParameterMap=new Map;let t=4;for(let r=0;r<fl.NAME_ARR_ASCENDING.length;r++){const o=fl.NAME_ARR_ASCENDING[r];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:fl.BITRATE_ARR_ASCENDING[r]*1e3}),t=t/2}}},"SimulcastTransceiverController");l.default=g,g.LOW_LEVEL_NAME="low",g.MID_LEVEL_NAME="mid",g.HIGH_LEVEL_NAME="hi",g.NAME_ARR_ASCENDING=["low","mid","hi"],g.BITRATE_ARR_ASCENDING=[200,400,1100]},3052177122:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(6769427378));let v=n(class extends m.default{setupLocalTransceivers(){this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localCameraTransceiver||(this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}constructor(s,a,i){super(s,a,i)}},"VideoOnlyTransceiverController");l.default=v},246495600:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TRANSCRIPTION_DATA_MESSAGE_TOPIC=void 0;const u=c(5269429115);l.TRANSCRIPTION_DATA_MESSAGE_TOPIC="aws:chime:transcription";let m=n(class{subscribeToTranscriptEvent(g){this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeSubscribeToReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC,s=>{for(const a of u.TranscriptEventConverter.from(s))for(const i of this.transcriptEventCallbacks)i(a)}),this.transcriptEventCallbacks.add(g)}unsubscribeFromTranscriptEvent(g){this.transcriptEventCallbacks.delete(g),this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC)}constructor(g){this.realtimeController=g,this.transcriptEventCallbacks=new Set}},"DefaultTranscriptionController");l.default=m},9138893973:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"Transcript");l.default=c},866659076:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"TranscriptAlternative");l.default=c},7538060970:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"TranscriptEntity");l.default=c},5269429115:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.TranscriptEventConverter=void 0;const m=c(5391134031),v=u(c(9138893973)),g=u(c(2461374283)),s=u(c(3798201443)),a=u(c(2024984314)),i={[m.SdkTranscriptionStatus.Type.STARTED]:s.default.STARTED,[m.SdkTranscriptionStatus.Type.INTERRUPTED]:s.default.INTERRUPTED,[m.SdkTranscriptionStatus.Type.RESUMED]:s.default.RESUMED,[m.SdkTranscriptionStatus.Type.STOPPED]:s.default.STOPPED,[m.SdkTranscriptionStatus.Type.FAILED]:s.default.FAILED};let e=n(class{static from(r){let o;try{o=m.SdkTranscriptFrame.decode(r.data)}catch(h){throw new Error("Cannot decode transcript data message: "+h)}const f=[];for(const h of o.events)if(h.status){const p=i[h.status.type];if(!p)continue;const d=new g.default;d.type=p,d.eventTimeMs=h.status.eventTime,d.transcriptionRegion=h.status.transcriptionRegion,d.transcriptionConfiguration=h.status.transcriptionConfiguration,h.status.message&&(d.message=h.status.message),f.push(d)}else if(h.transcript){const p=new v.default;p.results=[];for(const d of h.transcript.results){const y={channelId:d.channelId,isPartial:d.isPartial,resultId:d.resultId,startTimeMs:d.startTime,endTimeMs:d.endTime,alternatives:[]};if(d.languageCode&&(y.languageCode=d.languageCode),d.languageIdentification&&d.languageIdentification.length>0){y.languageIdentification=[];for(const S of d.languageIdentification){const b={languageCode:S.languageCode,score:S.score};y.languageIdentification.push(b)}}for(const S of d.alternatives){const b={items:[],transcript:S.transcript};for(const _ of S.items){const C={content:_.content,attendee:{attendeeId:_.speakerAttendeeId,externalUserId:_.speakerExternalUserId},startTimeMs:_.startTime,endTimeMs:_.endTime,type:null};switch(_.vocabularyFilterMatch&&(C.vocabularyFilterMatch=_.vocabularyFilterMatch),_.hasOwnProperty("stable")&&(C.stable=_.stable),_.hasOwnProperty("confidence")&&(C.confidence=_.confidence),_.type){case m.SdkTranscriptItem.Type.PRONUNCIATION:C.type=a.default.PRONUNCIATION;break;case m.SdkTranscriptItem.Type.PUNCTUATION:C.type=a.default.PUNCTUATION;break}b.items.push(C)}for(const _ of S.entities){b.entities||(b.entities=[]);const C={category:_.category,confidence:_.confidence,content:_.content,startTimeMs:_.startTime,endTimeMs:_.endTime};_.type&&(C.type=_.type),b.entities.push(C)}y.alternatives.push(b)}p.results.push(y)}f.push(p)}return f}},"TranscriptEventConverter");l.TranscriptEventConverter=e},3531434754:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"TranscriptItem");l.default=c},2024984314:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var c;(function(u){u.PRONUNCIATION="pronunciation",u.PUNCTUATION="punctuation"})(c||(c={})),l.default=c},9584814027:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"TranscriptLanguageWithScore");l.default=c},3443368328:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"TranscriptResult");l.default=c},2461374283:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"TranscriptionStatus");l.default=c},3798201443:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var c;(function(u){u.STARTED="started",u.INTERRUPTED="interrupted",u.RESUMED="resumed",u.STOPPED="stopped",u.FAILED="failed"})(c||(c={})),l.default=c},3564840480:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const m=c(888724265),v=u(c(8066052849));let g=n(class nu{getParserResult(){var a,i;return{browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,osName:((a=this.parserResult)===null||a===void 0?void 0:a.os.name)||nu.UNAVAILABLE,osVersion:((i=this.parserResult)===null||i===void 0?void 0:i.os.version)||nu.UNAVAILABLE,sdkVersion:v.default.sdkVersion,sdkName:v.default.sdkName}}constructor(a){var i,e,t,r,o,f,h;try{this.parserResult=navigator&&navigator.userAgent?new m.UAParser(navigator.userAgent).getResult():void 0}catch(p){a.error(p.message)}this.browserMajorVersion=((t=(e=(i=this.parserResult)===null||i===void 0?void 0:i.browser)===null||e===void 0?void 0:e.version)===null||t===void 0?void 0:t.split(".")[0])||nu.UNAVAILABLE,this.browserName=((r=this.parserResult)===null||r===void 0?void 0:r.browser.name)||nu.UNAVAILABLE,this.browserVersion=((o=this.parserResult)===null||o===void 0?void 0:o.browser.version)||nu.UNAVAILABLE,this.deviceName=[((f=this.parserResult)===null||f===void 0?void 0:f.device.vendor)||"",((h=this.parserResult)===null||h===void 0?void 0:h.device.model)||""].join(" ").trim()||nu.UNAVAILABLE}},"DefaultUserAgentParser");l.default=g,g.UNAVAILABLE="Unavailable"},2997222898:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{add(m){return new Promise((v,g)=>{this.queue=this.queue.then(m).then(v).catch(g)})}constructor(){this.queue=Promise.resolve()}},"PromiseQueue");l.default=c},903520651:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.None=l.Some=l.Maybe=void 0;let c=n(class{static of(g){return g==null?m.of():u.of(g)}},"Maybe");l.Maybe=c;let u=n(class jv{map(g){return c.of(g(this.value))}flatMap(g){return g(this.value)}get(){return this.value}getOrElse(g){return this.value}defaulting(g){return c.of(this.getOrElse(g))}static of(g){if(g==null)throw new Error("value is ${value}");return new jv(g)}constructor(g){this.value=g,this.isSome=!0,this.isNone=!1}},"Some");l.Some=u;let m=n(class jf{get(){throw new Error("value is null")}getOrElse(g){return g}map(g){return new jf}flatMap(g){return new jf}defaulting(g){return c.of(this.getOrElse(g))}static of(){return new jf}constructor(){this.isSome=!1,this.isNone=!0}},"None");l.None=m},840544383:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.getRandomValues=l.getFormattedOffset=l.getDefaultAssetSpec=l.toLowerCasePropertyNames=l.isIFramed=l.wait=void 0;const m=u(c(8066052849));function v(t){return new Promise(r=>setTimeout(r,t))}n(v,"wait"),l.wait=v;function g(){var t;try{return((t=window.frameElement)===null||t===void 0?void 0:t.nodeName)==="IFRAME"||parent!==top}catch{return!0}}n(g,"isIFramed"),l.isIFramed=g;function s(t){return t===null?null:typeof t!="object"?t:Array.isArray(t)?t.map(s):Object.keys(t).reduce((r,o)=>{const f=t[o],h=typeof f=="object"?s(f):f;return r[o.toLowerCase()]=h,r},{})}n(s,"toLowerCasePropertyNames"),l.toLowerCasePropertyNames=s;function a(){const t=m.default.sdkVersionSemVer;return{assetGroup:`sdk-${t.major}.${t.minor}`}}n(a,"getDefaultAssetSpec"),l.getDefaultAssetSpec=a;function i(t){const r=Math.abs(t),o=t<=0?"+":"-",f=Math.floor(r/60).toString().padStart(2,"0"),h=Math.floor(r%60).toString().padStart(2,"0");return`${o}${f}:${h}`}n(i,"getFormattedOffset"),l.getFormattedOffset=i;function e(t){try{window.crypto.getRandomValues(t)}catch{new DataView(t.buffer).setUint32(0,Math.trunc(Math.random()*Math.pow(2,32)),!0)}}n(e,"getRandomValues"),l.getRandomValues=e},8066052849:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(8351168186)),v=u(c(9778296323));let g=n(class od{static get sdkName(){return"amazon-chime-sdk-js"}static get sdkVersion(){return v.default.semverString}static get sdkVersionSemVer(){var a,i,e,t;const r=v.default.semverString.match(/^(?<major>[0-9]+)\.(?<minor>[0-9]+)((?:\.(?<patch>[0-9]+))(?:-(?<preRelease>[a-zA-Z]+(\.[0-9])*))?)?/);return{major:(a=r==null?void 0:r.groups)===null||a===void 0?void 0:a.major,minor:(i=r==null?void 0:r.groups)===null||i===void 0?void 0:i.minor,patch:(e=r==null?void 0:r.groups)===null||e===void 0?void 0:e.patch,preRelease:(t=r==null?void 0:r.groups)===null||t===void 0?void 0:t.preRelease}}static get buildSHA(){return v.default.hash.substr(1)}static get sdkUserAgentLowResolution(){const a=new m.default;return`${a.name()}-${a.majorVersion()}`}static urlWithVersion(a){const i=new URL(a);return i.searchParams.append(od.X_AMZN_VERSION,od.sdkVersion),i.searchParams.append(od.X_AMZN_USER_AGENT,od.sdkUserAgentLowResolution),i.toString()}},"Versioning");l.default=g,g.X_AMZN_VERSION="X-Amzn-Version",g.X_AMZN_USER_AGENT="X-Amzn-User-Agent"},9778296323:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.default={hash:"d7eee1f",raw:"v3.23.0",semverString:"3.23.0"}},8261422434:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class Wv{equal(m){let v=m.captureWidth()===this.cameraWidth&&m.captureHeight()===this.cameraHeight&&m.captureFrameRate()===this.cameraFrameRate&&m.encodeBitrates().length===this.encodeBitrates().length&&m.encodeScaleResolutionDownBy().length===this.encodeScaleResolutionDownBy().length&&m.encodeWidths().length===this.encodeWidths().length&&m.encodeHeights().length===this.encodeHeights().length&&m.isSVCEncoding()===this.isSVC;if(v){for(let g=0;g<m.encodeWidths().length;g++)if(m.encodeWidths()[g]!==this.encodeWidths()[g]||m.encodeHeights()[g]!==this.encodeHeights()[g]||m.encodeBitrates()[g]!==this.encodeBitrates()[g]||m.encodeScaleResolutionDownBy()[g]!==this.encodeScaleResolutionDownBy()[g])return v=!1,v}return v}clone(){return new Wv(this.cameraWidth,this.cameraHeight,this.cameraFrameRate,this.maxEncodeBitrateKbps,this.isSimulcast,this.scaleResolutionDownBy,this.isSVC)}captureWidth(){return this.cameraWidth}captureHeight(){return this.cameraHeight}captureFrameRate(){return this.cameraFrameRate}encodeBitrates(){return[this.maxEncodeBitrateKbps]}encodeScaleResolutionDownBy(){return[this.scaleResolutionDownBy]}encodeWidths(){return[this.cameraWidth]}encodeHeights(){return[this.cameraHeight]}isSVCEncoding(){return this.isSVC}constructor(m,v,g,s,a,i=1,e=!1){this.cameraWidth=m,this.cameraHeight=v,this.cameraFrameRate=g,this.maxEncodeBitrateKbps=s,this.isSimulcast=a,this.scaleResolutionDownBy=i,this.isSVC=e}},"DefaultVideoCaptureAndEncodeParameter");l.default=c},7744958188:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(5134603106));let v=n(class zv{reset(){this.optimalReceiveSet=new m.default,this.subscribedReceiveSet=new m.default,this.videoSources=void 0}updateIndex(s){this.videoIndex=s,this.optimalReceiveSet=this.calculateOptimalReceiveSet(s)}updateMetrics(s){}wantsResubscribe(){return!this.subscribedReceiveSet.equal(this.optimalReceiveSet)}chooseSubscriptions(){return this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveSet.clone()}chooseRemoteVideoSources(s){this.videoSources=s,this.optimalReceiveSet=this.calculateOptimalReceiveSet(this.videoIndex).clone()}calculateOptimalReceiveSet(s){const a=new m.default;if(!this.videoIndex||this.videoIndex.allStreams().empty())return a;const i=s.highestQualityStreamFromEachGroupExcludingSelf(this.selfAttendeeId),e=this.videoSources?this.videoSources:this.videoIndex.allVideoSendingSourcesExcludingSelf(this.selfAttendeeId),t=this.videoIndex.remoteStreamDescriptions(),r=new Map;for(const f of t)i.contain(f.streamId)&&r.set(f.attendeeId,f);let o=0;for(const f of e){const h=f.attendee.attendeeId;if(r.has(h)){const p=r.get(h);if(o+p.maxBitrateKbps<=zv.maxReceiveBitrateKbps)a.add(p.streamId),o+=p.maxBitrateKbps;else{console.warn("total bitrate "+(o+p.maxBitrateKbps)+" exceeds maximum limit (15000). Use chooseRemoteVideoSources to select a subset of participants to avoid this.");break}}}return a}constructor(s){this.selfAttendeeId=s,this.reset()}},"AllHighestVideoBandwidthPolicy");l.default=v,v.maxReceiveBitrateKbps=15e3},9248911078:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(5134603106));let v=n(class{reset(){}updateIndex(s){}updateMetrics(s){}wantsResubscribe(){return!1}chooseSubscriptions(){return new m.default}},"NoVideoDownlinkBandwidthPolicy");l.default=v},6110401981:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TargetDisplaySize=void 0;var c;(function(u){u[u.Low=0]="Low",u[u.Medium=1]="Medium",u[u.High=2]="High",u[u.Maximum=3]="Maximum"})(c=l.TargetDisplaySize||(l.TargetDisplaySize={})),l.default=c},1437705752:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(3560634922)),v=u(c(1448262436)),g=u(c(7981698535)),s=c(6700033168),a=u(c(6313276823)),i=u(c(9837586225));let e=n(class Gv extends a.default{static createConfig(){const r=new i.default;return r.serverSideNetworkAdaption=v.default.None,r}reset(){super.reset(),super.shouldPauseTiles=!1,this.videoPreferences=void 0}updateIndex(r){super.updateIndex(r);const o=s.VideoPreferences.prepare();let f=!1;const h=r.remoteStreamDescriptions();for(const p of h)o.some(d=>d.attendeeId===p.attendeeId)||(p.attendeeId.endsWith(m.default.Modality)?(o.add(new g.default(p.attendeeId,1)),f=!0):o.add(new g.default(p.attendeeId,2)));f?(this.videoPreferences=o.build(),this.videoPreferencesUpdated=!0):this.videoPreferences=void 0}chooseRemoteVideoSources(r){this.logger.error("chooseRemoteVideoSources should not be called by VideoAdaptiveProbePolicy")}constructor(r){super(r,Gv.createConfig()),this.logger=r,super.shouldPauseTiles=!1,this.videoPreferences=void 0}},"VideoAdaptiveProbePolicy");l.default=e},7981698535:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(6110401981)),v=u(c(5116495551));let g=n(class Su{partialCompare(a){return this.priority-a.priority}equals(a){return this.attendeeId===a.attendeeId&&this.targetSize===a.targetSize&&this.priority===a.priority&&this.degradationPreference===a.degradationPreference}clone(){return new Su(this.attendeeId,this.priority,this.targetSize,this.degradationPreference)}targetSizeToBitrateKbps(a){switch(a){case m.default.Maximum:return Su.MAXIMUM_BITRATE_KBPS;case m.default.High:return Su.HIGH_BITRATE_KBPS;case m.default.Medium:return Su.MID_BITRATE_KBPS;case m.default.Low:return Su.LOW_BITRATE_KBPS}}constructor(a,i,e,t){this.attendeeId=a,this.priority=i,this.targetSize=e!==void 0?e:m.default.Maximum,this.degradationPreference=t!==void 0?t:v.default.Balanced}},"VideoPreference");l.default=g,g.LOW_BITRATE_KBPS=300,g.MID_BITRATE_KBPS=600,g.HIGH_BITRATE_KBPS=1500,g.MAXIMUM_BITRATE_KBPS=1e4},6700033168:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoPreferences=l.MutableVideoPreferences=l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=void 0;const m=u(c(4983545831));function v(e,t,r){if(e.transceiverController.getMidForGroupId===void 0||e.videoStreamIndex.attendeeIdForGroupId===void 0||r===void 0)return[];const o=new Array,f=new Map,h=new Map;for(const p of t){const d=e.transceiverController.getMidForGroupId(p);if(d===void 0)continue;const y=e.videoStreamIndex.attendeeIdForGroupId(p);f.set(y,d),h.set(y,p)}for(const p of r){const d=new m.default,y=f.get(p.attendeeId);y!==void 0&&(d.mid=y,d.attendeeId=p.attendeeId,d.groupId=h.get(p.attendeeId),d.priority=Number.MAX_SAFE_INTEGER-p.priority,d.targetBitrateKbps=p.targetSizeToBitrateKbps(p.targetSize),d.qualityAdaptationPreference=p.degradationPreference,o.push(d))}return o}n(v,"convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration"),l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=v;let g=n(class Bg{static default(){return new Bg([])}[Symbol.iterator](){let t=0;const r=this.items;return{next(){return t<r.length?{done:!1,value:r[t++]}:{done:!0,value:null}}}}first(){return this.items[0]}add(t){this.items.push(t)}replaceFirst(t,r){const o=this.items.findIndex(r);o===-1?this.items.push(t):this.has(t)?this.items.splice(o,1):this.items[o]=t}remove(t){this.items=this.items.filter(r=>!r.equals(t))}clear(){this.items=[]}isEmpty(){return this.items.length===0}equals(t){if(t===this)return!0;if(t.items.length!==this.items.length)return!1;for(const r of this.items)if(!t.items.some(o=>o.equals(r)))return!1;return!0}has(t){return this.items.some(r=>r.equals(t))}some(t){return this.items.some(t)}clone(){return new Bg([...this.items])}sort(){this.items.sort((t,r)=>t.partialCompare(r))}modify(){return new s(this)}constructor(t=[]){this.items=t}},"ObjectSet"),s=n(class{cow(){this.copied||(this.items=this.items.clone(),this.copied=!0)}add(t){this.items.has(t)||(this.cow(),this.items.add(t))}replaceFirst(t,r){this.items.has(t)&&!this.items.some(r)||(this.cow(),this.items.replaceFirst(t,r))}remove(t){this.items.has(t)&&(this.cow(),this.items.remove(t))}some(t){return this.items.some(t)}clear(){this.items.isEmpty()||(this.cow(),this.items.clear())}build(){return this.copied&&this.items.sort(),this.copied=!1,this.items}constructor(t=new g){this.items=t,this.copied=!1}},"SetBuilder"),a=n(class{add(t){this.builder.add(t)}replaceFirst(t,r){this.builder.replaceFirst(t,r)}remove(t){this.builder.remove(t)}some(t){return this.builder.some(t)}clear(){this.builder.clear()}build(){return new i(this.builder.build())}constructor(t){this.builder=t}},"MutableVideoPreferences");l.MutableVideoPreferences=a;let i=n(class Ug{static prepare(){return new a(new s)}static default(){return new Ug(g.default())}[Symbol.iterator](){return this.items[Symbol.iterator]()}highestPriority(){var t;return(t=this.items.first())===null||t===void 0?void 0:t.priority}sorted(){return this.items[Symbol.iterator]()}equals(t){return t===this||this.items.equals(t.items)}modify(){return new a(this.items.modify())}some(t){return this.items.some(t)}isEmpty(){return this.items.isEmpty()}clone(){const t=Ug.prepare();for(const r of this.items)t.add(r.clone());return t.build()}constructor(t){this.items=t}},"VideoPreferences");l.VideoPreferences=i,l.default=i},6313276823:function(H,l,c){"use strict";var u=this&&this.__createBinding||(Object.create?function(w,R,O,D){D===void 0&&(D=O),Object.defineProperty(w,D,{enumerable:!0,get:function(){return R[O]}})}:function(w,R,O,D){D===void 0&&(D=O),w[D]=R[O]}),m=this&&this.__setModuleDefault||(Object.create?function(w,R){Object.defineProperty(w,"default",{enumerable:!0,value:R})}:function(w,R){w.default=R}),v=this&&this.__importStar||function(w){if(w&&w.__esModule)return w;var R={};if(w!=null)for(var O in w)O!=="default"&&Object.prototype.hasOwnProperty.call(w,O)&&u(R,w,O);return m(R,w),R},g=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(l,"__esModule",{value:!0});const s=g(c(4846700713)),a=g(c(5147189764)),i=g(c(1847926377)),e=g(c(3560634922)),t=c(3756404293),r=v(c(1448262436)),o=g(c(2551170247)),f=g(c(5134603106)),h=g(c(7744958188)),p=g(c(6110401981)),d=g(c(7981698535)),y=c(6700033168),S=g(c(9837586225)),b=g(c(5116495551));let _=n(class{constructor(){this.bandwidthEstimateKbps=0,this.usedBandwidthKbps=0,this.packetsLost=0,this.nackCount=0,this.rttMs=0}},"LinkMediaStats"),C=n(class ka{reset(){this.allHighestPolicy=new h.default(""),this.optimalReceiveSet=new f.default,this.optimalReceiveStreams=[],this.optimalNonPausedReceiveStreams=[],this.subscribedReceiveSet=new f.default,this.subscribedReceiveStreams=[],this.videoPreferences=void 0,this.defaultVideoPreferences=void 0,this.shouldPauseTiles=!0,this.pausedStreamIds=new f.default,this.pausedBwAttendeeIds=new Set,this.videoPreferencesUpdated=!1,this.logCount=0,this.startupPeriod=!0,this.usingPrevTargetRate=!1,this.rateProbeState="Not Probing",this.firstEstimateTimestamp=0,this.lastUpgradeRateKbps=0,this.timeBeforeAllowSubscribeMs=ka.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.lastProbeTimestamp=Date.now(),this.timeBeforeAllowProbeMs=ka.MIN_TIME_BETWEEN_PROBE_MS,this.downlinkStats=new _,this.prevDownlinkStats=new _,this.probeFailed=!1,this.serverSideNetworkAdaption=this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption,this.pendingActionAfterUpdatedPreferences=!1}bindToTileController(R){this.tileController=R,this.logger.info("tileController bound")}setWantsResubscribeObserver(R){this.wantsResubscribeObserver=R}chooseRemoteVideoSources(R){var O;if(!(!((O=this.videoPreferences)===null||O===void 0)&&O.equals(R))){if(this.videoPreferences=R==null?void 0:R.clone(),!r.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!0,this.wantsResubscribeObserver!==void 0&&(this.wantsResubscribeObserver(),this.pendingActionAfterUpdatedPreferences=!1),this.serverSideNetworkAdaption===r.default.BandwidthProbingAndRemoteVideoQualityAdaption)){const D=new Array;for(const I of this.videoPreferences){const M=new o.default;M.attendee=new s.default,M.attendee.attendeeId=I.attendeeId,D.push(M)}this.allHighestPolicy.chooseRemoteVideoSources(D);return}this.videoPreferencesUpdated=!0,this.logger.info(`bwe: setVideoPreferences bwe: new preferences: ${JSON.stringify(R)}`)}}updateIndex(R){this.videoIndex=R,this.serverSideNetworkAdaption===r.default.BandwidthProbingAndRemoteVideoQualityAdaption&&this.allHighestPolicy.updateIndex(R),this.videoPreferences||this.updateDefaultVideoPreferences()}updateDefaultVideoPreferences(){const R=new Set;for(const M of this.videoIndex.remoteStreamDescriptions())R.add(M.attendeeId);const O=y.VideoPreferences.prepare(),D=R.size;let I=p.default.Maximum;D>8?I=p.default.Low:D>4&&(I=p.default.Medium);for(const M of R)O.add(new d.default(M,1,I));this.defaultVideoPreferences=O.build()}updateMetrics(R){if(!this.videoIndex||this.videoIndex.allStreams().empty())return;this.prevDownlinkStats=this.downlinkStats,this.downlinkStats=new _;const O=R.getObservableMetrics();this.downlinkStats.bandwidthEstimateKbps=O.availableIncomingBitrate/1e3;for(const D in R.streamMetricReports){const I=Number.parseInt(D,10),M=R.streamMetricReports[I];M.direction===a.default.DOWNSTREAM&&M.mediaType===i.default.VIDEO&&(M.currentMetrics.hasOwnProperty("nackCount")&&(this.downlinkStats.nackCount+=R.countPerSecond("nackCount",I)),M.currentMetrics.hasOwnProperty("packetsLost")&&(this.downlinkStats.packetsLost+=R.countPerSecond("packetsLost",I)),M.currentMetrics.hasOwnProperty("bytesReceived")&&(this.downlinkStats.usedBandwidthKbps+=R.bitsPerSecond("bytesReceived",I)/1e3))}}wantsResubscribe(){let R=!1;return!r.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(R||(R=this.pendingActionAfterUpdatedPreferences),this.serverSideNetworkAdaption===r.default.BandwidthProbingAndRemoteVideoQualityAdaption)?R||this.allHighestPolicy.wantsResubscribe():(this.calculateOptimalReceiveSet(),R||(R=!this.subscribedReceiveSet.equal(this.optimalReceiveSet)),R)}chooseSubscriptions(){return!r.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!1,this.serverSideNetworkAdaption===r.default.BandwidthProbingAndRemoteVideoQualityAdaption)?this.allHighestPolicy.chooseSubscriptions():(this.subscribedReceiveSet.equal(this.optimalReceiveSet)||(this.lastSubscribeTimestamp=Date.now()),this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveStreams=this.optimalReceiveStreams.slice(),this.subscribedReceiveSet.clone())}addObserver(R){this.observerQueue.add(R)}removeObserver(R){this.observerQueue.delete(R)}forEachObserver(R){for(const O of this.observerQueue)R(O)}setVideoPriorityBasedPolicyConfigs(R){this.videoPriorityBasedPolicyConfig=R}calculateOptimalReceiveStreams(){var R;const O=[],D=this.videoIndex.remoteStreamDescriptions();if(D.length===0||!((R=this.videoPreferences)===null||R===void 0)&&R.isEmpty()){this.optimalReceiveStreams=[];return}const I=this.rateProbeState;this.cleanBwPausedTiles(D),this.handleAppPausedStreams(O,D);const M=new Map;for(const De of this.getCurrentVideoPreferences())M.set(De.attendeeId,De);const k=D.filter(De=>M.has(De.attendeeId)),N=!this.streamsWithPreferenceDidChange(k),j=!this.startupPeriod&&N;if(j&&Date.now()-this.lastSubscribeTimestamp<this.timeBeforeAllowSubscribeMs)return;k.sort((De,ut)=>De.maxBitrateKbps===ut.maxBitrateKbps?De.streamId-ut.streamId:De.maxBitrateKbps-ut.maxBitrateKbps);for(const De of k)(De.avgBitrateKbps===0||De.avgBitrateKbps>De.maxBitrateKbps)&&(De.attendeeId.endsWith(e.default.Modality)&&De.maxBitrateKbps<100?De.maxBitrateKbps=De.avgBitrateKbps:De.avgBitrateKbps=De.maxBitrateKbps);const B=new Set;for(const De of this.getCurrentVideoPreferences()){const ut=k.filter(mt=>mt.attendeeId===De.attendeeId);if(ut.length<3)continue;let St=15,Rt=320*480;ut.forEach(mt=>{St=Math.max(St,mt.maxFrameRate),Rt=Math.max(Rt,mt.totalPixels())}),ut.sort((mt,At)=>{if(De.degradationPreference===b.default.MaintainResolution)return Math.abs(mt.maxFrameRate-At.maxFrameRate)<2?mt.totalPixels()-At.totalPixels():mt.maxFrameRate-At.maxFrameRate;if(De.degradationPreference===b.default.MaintainFramerate)return mt.totalPixels()===At.totalPixels()?mt.maxFrameRate-At.maxFrameRate:mt.totalPixels()-At.totalPixels();{const Cn=n(gt=>gt.avgBitrateKbps*Math.pow(2,5*gt.maxFrameRate/St*Math.pow(4,gt.totalPixels()/Rt)),"weighByFramerate");return Cn(mt)-Cn(At)}});let Ze;for(const mt of ut){if(Ze!==void 0&&(mt.maxFrameRate<Ze.maxFrameRate&&Math.abs(Ze.maxFrameRate-mt.maxFrameRate)>2||mt.totalPixels()<Ze.totalPixels())){B.add(mt.streamId);continue}Ze=mt}}const J=k.filter(De=>!B.has(De.streamId));this.logger.info(`Filtered to ${JSON.stringify(J)}`);const Q={targetDownlinkBitrate:0,chosenTotalBitrate:0,deltaToNextUpgrade:0};Q.targetDownlinkBitrate=this.determineTargetRate();const oe=this.subscribedReceiveSet.size(),$=this.downlinkStats.bandwidthEstimateKbps,he=!this.videoPriorityBasedPolicyConfig.allowSubscribe(oe,$);if(this.probeFailed&&(this.probeFailed=!1,this.timeBeforeAllowSubscribeMs=ka.MIN_TIME_BETWEEN_SUBSCRIBE_MS,j&&he))return;const Ae=this.priorityPolicy(Q,J,O),Ee=!r.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption);let Oe=0;if(!Ee&&!this.startupPeriod&&N?this.rateProbeState==="Probing"?Oe=this.handleProbe(O,Q.targetDownlinkBitrate):Q.deltaToNextUpgrade!==0&&(Oe=this.maybeOverrideOrProbe(O,Q,Ae)):(this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0),this.previousStreamsWithPreference=k,this.videoPreferencesUpdated=!1,Oe===1){this.logger.info(`bwe: keepSameSubscriptions stats:${JSON.stringify(this.downlinkStats)}`),this.prevTargetRateKbps=Q.targetDownlinkBitrate;return}if(Oe===2){const De=this.calculateSubscribeRate(this.preProbeNonPausedReceiveStreams);this.optimalReceiveStreams=this.preProbeReceiveStreams.slice(),this.processBwPausedStreams(k,this.preProbeNonPausedReceiveStreams),this.logger.info("bwe: Use Pre-Probe subscription subscribedRate:"+De);return}this.optimalNonPausedReceiveStreams=O.slice();const be=this.pausedBwAttendeeIds.size;this.processBwPausedStreams(k,O),this.logger.getLogLevel()<=t.LogLevel.INFO&&(this.logCount%15===0||this.rateProbeState!==I||this.optimalReceiveStreams.length!==O.length||be!==this.pausedBwAttendeeIds.size)&&(this.logger.info(this.policyStateLogStr(D,Q.targetDownlinkBitrate)),this.logCount=0),this.logCount++,this.prevTargetRateKbps=Q.targetDownlinkBitrate,this.optimalReceiveStreams=O.slice()}calculateOptimalReceiveSet(){const R=new f.default;this.calculateOptimalReceiveStreams();for(const O of this.optimalReceiveStreams)R.add(O.streamId);if(!this.optimalReceiveSet.equal(R)){const O=this.calculateSubscribeRate(this.optimalReceiveStreams);this.logger.info(`bwe: new streamSelection: ${JSON.stringify(R)} subscribedRate:${O}`)}this.optimalReceiveSet=R}determineTargetRate(){let R=0;const O=Date.now();return this.downlinkStats.bandwidthEstimateKbps!==0?(this.firstEstimateTimestamp===0&&(this.firstEstimateTimestamp=O),this.startupPeriod&&(this.downlinkStats.bandwidthEstimateKbps>ka.DEFAULT_BANDWIDTH_KBPS||this.downlinkStats.packetsLost>0||O-this.firstEstimateTimestamp>ka.STARTUP_PERIOD_MS&&this.downlinkStats.bandwidthEstimateKbps<=this.prevDownlinkStats.bandwidthEstimateKbps)&&(this.startupPeriod=!1,this.prevTargetRateKbps=this.downlinkStats.bandwidthEstimateKbps),this.startupPeriod?R=ka.DEFAULT_BANDWIDTH_KBPS:this.rateProbeState==="Probing"&&this.downlinkStats.usedBandwidthKbps>this.downlinkStats.bandwidthEstimateKbps&&this.downlinkStats.packetsLost<ka.SPURIOUS_PACKET_LOST_THRESHOLD?(this.logger.info(`bwe: In probe state, overriding estimate ${this.downlinkStats.bandwidthEstimateKbps} with actual receive bitrate ${this.downlinkStats.usedBandwidthKbps}`),R=this.downlinkStats.usedBandwidthKbps+ka.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS):R=this.downlinkStats.bandwidthEstimateKbps):this.firstEstimateTimestamp===0?R=ka.DEFAULT_BANDWIDTH_KBPS:R=this.prevTargetRateKbps,!this.startupPeriod&&(this.usingPrevTargetRate&&this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps||this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps*(100-ka.LARGE_RATE_CHANGE_TRIGGER_PERCENT)/100||this.downlinkStats.bandwidthEstimateKbps<this.downlinkStats.usedBandwidthKbps*ka.LARGE_RATE_CHANGE_TRIGGER_PERCENT/100)&&this.downlinkStats.packetsLost===0?(this.logger.debug(()=>"bwe: ValidateRate: Using Previous rate "+this.prevTargetRateKbps),this.usingPrevTargetRate=!0,R=this.prevTargetRateKbps):this.usingPrevTargetRate=!1,R>15e3&&this.logger.warn("bwe: "+R+" exceeds maximum limit (15000). Limit TargetDisplaySize with VideoPreferences to avoid this."),Math.min(R,15e3)}setProbeState(R){if(this.rateProbeState===R)return!1;const O=Date.now();switch(R){case"Not Probing":this.probePendingStartTimestamp=0;break;case"Probe Pending":if(this.lastProbeTimestamp===0||O-this.lastProbeTimestamp>ka.MIN_TIME_BETWEEN_PROBE_MS)this.probePendingStartTimestamp=O;else return!1;break;case"Probing":if(O-this.probePendingStartTimestamp>this.timeBeforeAllowProbeMs)this.lastProbeTimestamp=O,this.preProbeReceiveStreams=this.subscribedReceiveStreams.slice(),this.preProbeNonPausedReceiveStreams=this.optimalNonPausedReceiveStreams,this.timeBeforeAllowProbeMs=Math.min(this.timeBeforeAllowProbeMs*2,ka.MAX_HOLD_BEFORE_PROBE_MS);else return!1;break}return this.logger.info("bwe: setProbeState to "+R+" from "+this.rateProbeState),this.rateProbeState=R,!0}upgradeToStream(R,O){for(let D=0;D<R.length;D++)if(R[D].groupId===O.groupId){const I=O.avgBitrateKbps-R[D].avgBitrateKbps;return this.logger.info("bwe: upgradeStream from "+JSON.stringify(R[D])+" to "+O),this.lastUpgradeRateKbps=I,R[D]=O,I}return R.push(O),this.lastUpgradeRateKbps=O.avgBitrateKbps,this.lastUpgradeRateKbps}handleProbe(R,O){if(Date.now()-this.lastProbeTimestamp>ka.MAX_ALLOWED_PROBE_TIME_MS)return this.logger.info("bwe: Canceling probe due to timeout"),this.setProbeState("Not Probing"),0;if(this.downlinkStats.packetsLost>0&&(this.logger.info(`bwe: Probe encountering packets lost:${this.downlinkStats.packetsLost}`),this.downlinkStats.packetsLost>ka.SPURIOUS_PACKET_LOST_THRESHOLD))return this.setProbeState("Not Probing"),this.logger.info(`bwe: Canceling probe due to packets lost:${this.downlinkStats.packetsLost}`),this.probeFailed=!0,this.timeBeforeAllowSubscribeMs=Math.max(ka.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.timeBeforeAllowSubscribeMs)*3,2;const D=this.calculateSubscribeRate(this.optimalReceiveStreams);return this.chosenStreamsSameAsLast(R)||O>D?(this.logger.info("bwe: Probe successful"),this.setProbeState("Not Probing"),this.timeBeforeAllowProbeMs=ka.MIN_TIME_BETWEEN_PROBE_MS,0):1}maybeOverrideOrProbe(R,O,D){const I=this.chosenStreamsSameAsLast(R);let M=0;const k=O.targetDownlinkBitrate>ka.LOW_BITRATE_THRESHOLD_KBPS?ka.TARGET_RATE_CHANGE_TRIGGER_PERCENT:ka.TARGET_RATE_CHANGE_TRIGGER_PERCENT*2,N=O.targetDownlinkBitrate*k/100;if(this.targetRateBaselineForDeltaCheckKbps=this.targetRateBaselineForDeltaCheckKbps!==void 0?this.targetRateBaselineForDeltaCheckKbps:this.prevTargetRateKbps,!I&&Math.abs(O.targetDownlinkBitrate-this.targetRateBaselineForDeltaCheckKbps)<N?(this.logger.info("bwe: MaybeOverrideOrProbe: Reuse last decision based on delta rate. {"+JSON.stringify(this.subscribedReceiveSet)+"}"),M=1):this.targetRateBaselineForDeltaCheckKbps=O.targetDownlinkBitrate,this.downlinkStats.packetsLost>this.prevDownlinkStats.packetsLost)return this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0,M;if(I||M===1)switch(this.rateProbeState){case"Not Probing":this.setProbeState("Probe Pending");break;case"Probe Pending":this.setProbeState("Probing")&&(this.upgradeToStream(R,D),M=0);break}else this.setProbeState("Not Probing");return M}calculateSubscribeRate(R){let O=0;for(const D of R)!this.pausedStreamIds.contain(D.streamId)&&!this.pausedBwAttendeeIds.has(D.attendeeId)&&(O+=D.maxBitrateKbps);return O}handleAppPausedStreams(R,O){if(!this.tileController){this.logger.warn("tileController not found!");return}this.pausedStreamIds=new f.default;const D=this.tileController.getAllRemoteVideoTiles();for(const I of D){const M=I.state();if(M.paused&&!this.pausedBwAttendeeIds.has(M.boundAttendeeId)){let k=O.length;for(;k--;)O[k].attendeeId===M.boundAttendeeId&&(this.logger.info("bwe: removed paused attendee "+M.boundAttendeeId+" streamId: "+O[k].streamId),this.pausedStreamIds.add(O[k].streamId),this.subscribedReceiveSet.contain(O[k].streamId)&&R.push(O[k]),O.splice(k,1))}}}processBwPausedStreams(R,O){if(!this.tileController){this.logger.warn("tileController not found!");return}const D=this.getCurrentVideoPreferences();if(D&&this.shouldPauseTiles){const I=this.tileController.getAllVideoTiles();for(const M of D){const k=this.getVideoTileForAttendeeId(M.attendeeId,I),N=(k==null?void 0:k.state().paused)||!1;if(O.some(j=>j.attendeeId===M.attendeeId))N&&this.pausedBwAttendeeIds.has(M.attendeeId)&&(this.logger.info(`bwe: unpausing attendee ${M.attendeeId} due to bandwidth`),this.forEachObserver(j=>{j.tileWillBeUnpausedByDownlinkPolicy(k.id())}),this.tileController.unpauseVideoTile(k.id()),this.pausedBwAttendeeIds.delete(M.attendeeId));else{const j=R.some(B=>B.attendeeId===M.attendeeId);if(k&&j){const B=this.optimalReceiveStreams.find(J=>J.attendeeId===M.attendeeId);B!==void 0&&(N||(this.logger.info(`bwe: pausing streamId ${B.streamId} attendee ${M.attendeeId} due to bandwidth`),this.forEachObserver(J=>{J.tileWillBePausedByDownlinkPolicy(k.id())}),this.tileController.pauseVideoTile(k.id())),O.push(B)),this.pausedBwAttendeeIds.add(M.attendeeId)}else if(j){const B=this.tileController.addVideoTile();B.bindVideoStream(M.attendeeId,!1,null,0,0,0,null),this.forEachObserver(J=>{J.tileWillBePausedByDownlinkPolicy(B.id())}),B.pause(),this.logger.info(`bwe: Created video tile ${B.id()} for bw paused attendee ${M.attendeeId}`),this.pausedBwAttendeeIds.add(M.attendeeId)}}}}}cleanBwPausedTiles(R){if(!this.tileController){this.logger.warn("tileController not found!");return}const O=this.tileController.getAllRemoteVideoTiles(),D=this.getCurrentVideoPreferences();for(const I of O){const M=I.state();M.boundVideoStream||(R.some(k=>k.attendeeId===M.boundAttendeeId)?D!==void 0&&!D.some(k=>k.attendeeId===M.boundAttendeeId)&&this.tileController.removeVideoTile(M.tileId):(this.tileController.removeVideoTile(M.tileId),this.logger.info(`bwe: Removed video tile ${M.tileId} for bw paused attendee ${M.boundAttendeeId}`)))}}priorityPolicy(R,O,D){let I;const M=this.getCurrentVideoPreferences(),k=M.highestPriority();let N,j=k;for(;j!==-1;){N=-1;for(const B of M)if(B.priority===j)for(const J of O)J.attendeeId===B.attendeeId&&(D.some(Q=>Q.groupId===J.groupId)||(R.chosenTotalBitrate+J.avgBitrateKbps<=R.targetDownlinkBitrate?(D.push(J),R.chosenTotalBitrate+=J.avgBitrateKbps):R.deltaToNextUpgrade===0&&(R.deltaToNextUpgrade=J.avgBitrateKbps,I=J)));else if(B.priority>j){N=B.priority;break}for(const B of M)if(B.priority===j){for(const J of O)if(J.attendeeId===B.attendeeId){const Q=D.findIndex(oe=>oe.groupId===J.groupId&&oe.maxBitrateKbps<=J.maxBitrateKbps&&oe.avgBitrateKbps<J.avgBitrateKbps);if(Q!==-1){const oe=J.avgBitrateKbps-D[Q].avgBitrateKbps;this.hasSimulcastStreams(O,J.attendeeId,J.groupId)&&this.canUpgrade(J.avgBitrateKbps,B.targetSize,B.targetSizeToBitrateKbps(B.targetSize),J.attendeeId.endsWith(e.default.Modality))?(this.logger.info(`bwe: attendee: ${J.attendeeId} group: ${J.groupId} has simulcast and can upgrade avgBitrate: ${J.avgBitrateKbps} target: ${B.targetSizeToBitrateKbps(B.targetSize)} targetTotalBitrate: ${R.targetDownlinkBitrate}`),R.chosenTotalBitrate+oe<=R.targetDownlinkBitrate?(R.chosenTotalBitrate+=oe,D[Q]=J):R.deltaToNextUpgrade===0&&(R.deltaToNextUpgrade=oe,I=J)):this.logger.info("bwe: cannot upgrade stream quality beyond target size")}}}else if(B.priority>j)break;if(j===k&&R.deltaToNextUpgrade!==0)break;j=N}return I}getVideoTileForAttendeeId(R,O){for(const D of O)if(D.state().boundAttendeeId===R)return D;return null}canUpgrade(R,O,D,I){let M=!1;return(O===p.default.High||!I&&R<=D||I&&O===p.default.Medium&&R<=D)&&(M=!0),M?(this.logger.info(`bwe: canUpgrade: bitrateKbps: ${R} targetBitrateKbps: ${D}`),!0):(this.logger.info(`bwe: cannot Upgrade: bitrateKbps: ${R} targetBitrateKbps: ${D}`),!1)}hasSimulcastStreams(R,O,D){let I=0;for(const M of R)M.attendeeId===O&&M.groupId===D&&I++;return this.logger.info(`bwe: attendeeId: ${O} groupId: ${D} hasSimulcastStreams: streamCount: ${I}`),I>1}streamsWithPreferenceDidChange(R){if(this.previousStreamsWithPreference===void 0||R.length!==this.previousStreamsWithPreference.length||this.videoPreferencesUpdated===!0)return!0;for(const O of R)if(this.previousStreamsWithPreference.find(I=>I.groupId===O.groupId&&I.streamId===O.streamId&&I.maxBitrateKbps===O.maxBitrateKbps)===void 0)return!0;return!1}chosenStreamsSameAsLast(R){if(this.optimalNonPausedReceiveStreams.length!==R.length)return!1;for(const O of this.optimalNonPausedReceiveStreams)if(!R.some(D=>D.streamId===O.streamId))return!1;return!0}policyStateLogStr(R,O){const D=this.calculateSubscribeRate(this.optimalReceiveStreams),I={targetBitrate:O,subscribedRate:D,probeState:this.rateProbeState,startupPeriod:this.startupPeriod};let M="remoteInfos: [";for(const N of R)M+=`{grpId:${N.groupId} strId:${N.streamId} maxBr:${N.maxBitrateKbps} avgBr:${N.avgBitrateKbps}}, `;M+="]";let k=`bwe: optimalReceiveSet ${JSON.stringify(I)}
bwe:   prev ${JSON.stringify(this.prevDownlinkStats)}
bwe:   now  ${JSON.stringify(this.downlinkStats)}
bwe:   ${M}
`;return(this.pausedStreamIds.size()>0||this.pausedBwAttendeeIds.size>0)&&(k+=`bwe:   paused: app stream ids ${JSON.stringify(this.pausedStreamIds)}  bw attendees { ${Array.from(this.pausedBwAttendeeIds).join(" ")} }
`),this.videoPreferences?k+=`bwe:   preferences: ${JSON.stringify(this.videoPreferences)}`:k+=`bwe:   default preferences: ${JSON.stringify(this.defaultVideoPreferences)}`,k}getCurrentVideoPreferences(){return this.videoPreferences||this.defaultVideoPreferences}getServerSideNetworkAdaption(){return this.serverSideNetworkAdaption}setServerSideNetworkAdaption(R){this.serverSideNetworkAdaption=R,this.setProbeState("Not Probing")}supportedServerSideNetworkAdaptions(){return[r.default.None,r.default.BandwidthProbing,r.default.BandwidthProbingAndRemoteVideoQualityAdaption]}getVideoPreferences(){let R=this.getCurrentVideoPreferences();return R||(R=y.VideoPreferences.prepare().build()),R}wantsAllTemporalLayersInIndex(){return!0}constructor(R,O=S.default.Default){this.logger=R,this.videoPriorityBasedPolicyConfig=O,this.shouldPauseTiles=!0,this.observerQueue=new Set,this.pausedBwAttendeeIds=new Set,this.wantsResubscribeObserver=void 0,this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption===r.default.Default&&(this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption=r.default.BandwidthProbingAndRemoteVideoQualityAdaption),this.reset()}},"VideoPriorityBasedPolicy");l.default=C,C.DEFAULT_BANDWIDTH_KBPS=2800,C.STARTUP_PERIOD_MS=6e3,C.LARGE_RATE_CHANGE_TRIGGER_PERCENT=20,C.TARGET_RATE_CHANGE_TRIGGER_PERCENT=15,C.LOW_BITRATE_THRESHOLD_KBPS=300,C.MIN_TIME_BETWEEN_PROBE_MS=5e3,C.MIN_TIME_BETWEEN_SUBSCRIBE_MS=2e3,C.MAX_HOLD_BEFORE_PROBE_MS=3e4,C.MAX_ALLOWED_PROBE_TIME_MS=6e4,C.SPURIOUS_PACKET_LOST_THRESHOLD=2,C.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS=100},9837586225:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(1448262436));let v=n(class ad{allowSubscribe(s,a){let i=0;const e=this.currentNetworkEvent;if(a>this.referenceBitrate)return this.currentNetworkEvent=2,this.referenceBitrate=a,!0;if(a<this.referenceBitrate){if(this.currentNetworkEvent=1,i=this.getSubscribeDelay(this.currentNetworkEvent,s),e!==1)this.bandwidthDecreaseTimestamp=Date.now();else if(Date.now()-this.bandwidthDecreaseTimestamp>i)return this.referenceBitrate=a,!0;return!1}else return this.currentNetworkEvent=0,!1}getSubscribeDelay(s,a){let i=ad.MINIMUM_DELAY_MS;const e=ad.MAXIMUM_DELAY_MS-ad.MINIMUM_DELAY_MS,t=this.networkIssueResponseDelayFactor;switch(s){case 1:i+=e*t*(1+a/10),i=Math.min(ad.MAXIMUM_DELAY_MS,i);break}return i}constructor(s=0,a=0){this.networkIssueResponseDelayFactor=s,this.networkIssueRecoveryDelayFactor=a,this.currentNetworkEvent=0,this.bandwidthDecreaseTimestamp=0,this.referenceBitrate=0,this.serverSideNetworkAdaption=m.default.BandwidthProbingAndRemoteVideoQualityAdaption,s<0?s=0:s>1&&(s=1),this.networkIssueResponseDelayFactor=s,a<0?a=0:a>1&&(a=1),this.networkIssueRecoveryDelayFactor=a}},"VideoPriorityBasedPolicyConfig");l.default=v,v.MINIMUM_DELAY_MS=2e3,v.MAXIMUM_DELAY_MS=8e3,v.Default=new v(0,0),v.UnstableNetworkPreset=new v(0,1),v.StableNetworkPreset=new v(1,0)},5116495551:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoQualityAdaptationPreference=void 0;var c;(function(u){u[u.Balanced=0]="Balanced",u[u.MaintainFramerate=1]="MaintainFramerate",u[u.MaintainResolution=2]="MaintainResolution"})(c=l.VideoQualityAdaptationPreference||(l.VideoQualityAdaptationPreference={})),l.default=c},8481249111:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{create(){const m={clientWidth:400,clientHeight:300,width:400,height:300,videoWidth:400,videoHeight:300,style:{transform:""},hasAttribute:()=>!1,removeAttribute:()=>{},setAttribute:()=>{},srcObject:!1,paused:!0,pause:()=>{m.paused=!0},play:()=>(m.paused=!1,Promise.resolve())};return m}},"NoOpVideoElementFactory");l.default=c},6672418579:function(H,l){"use strict";var c=this&&this.__awaiter||function(m,v,g,s){function a(i){return i instanceof g?i:new g(function(e){e(i)})}return n(a,"adopt"),new(g||(g=Promise))(function(i,e){function t(f){try{o(s.next(f))}catch(h){e(h)}}n(t,"fulfilled");function r(f){try{o(s.throw(f))}catch(h){e(h)}}n(r,"rejected");function o(f){f.done?i(f.value):a(f.value).then(t,r)}n(o,"step"),o((s=s.apply(m,v||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=n(class{destroy(){this.canvas=null,this.destroyed=!0}asCanvasImageSource(){return c(this,void 0,void 0,function*(){return this.destroyed?Promise.reject("canvas buffer is destroyed"):Promise.resolve(this.canvas)})}asCanvasElement(){return this.canvas}constructor(v){this.canvas=v,this.destroyed=!1}},"CanvasVideoFrameBuffer");l.default=u},7145536260:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})},m=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(6672418579)),g=m(c(1902736443)),s=15;let a=n(class{destroy(){if(this.stop(),this.stages)for(const e of this.stages)e.destroy();this.timer.destroy()}get framerate(){return this.fr}set framerate(e){this.fr=e<0?s:e}stop(){if(this.videoInput.removeEventListener("loadedmetadata",this.process),this.videoInput.srcObject=null,this.destroyInputMediaStreamAndBuffers(),this.outputMediaStream)for(const e of this.outputMediaStream.getVideoTracks())e.stop();this.hasStarted&&(this.hasStarted=!1,this.forEachObserver(e=>{e.processingDidStop&&e.processingDidStop()}))}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}getInputMediaStream(){return u(this,void 0,void 0,function*(){return this.inputVideoStream})}getActiveOutputMediaStream(){return this.isOutputMediaStreamActive()?this.outputMediaStream:(this.outputMediaStream=this.canvasOutput.captureStream(this.framerate),this.cloneInputAudioTracksToOutput(),this.outputMediaStream)}setInputMediaStream(e){return u(this,void 0,void 0,function*(){if(!e){this.stop();return}if(e.getVideoTracks().length===0){this.logger.error("No video tracks in input media stream, ignoring");return}this.inputVideoStream=e;const t=this.inputVideoStream.getVideoTracks()[0].getSettings();this.logger.info(`processing pipeline input stream settings ${JSON.stringify(t)}`),this.canvasOutput.width=t.width,this.canvasOutput.height=t.height,this.videoInput.addEventListener("loadedmetadata",this.process),this.videoInput.srcObject=this.inputVideoStream,this.videoInput.setAttribute("playsinline","true");const r=new v.default(this.canvasInput);this.sourceBuffers.push(r),this.videoInput.load();try{yield this.videoInput.play()}catch{this.logger.warn("Video element play() overrided by another load().")}this.cloneInputAudioTracksToOutput()})}cloneInputAudioTracksToOutput(){if(!this.isOutputMediaStreamActive()||this.inputVideoStream===null){this.logger.info("Not cloning input audio tracks to output, do not have media streams ready");return}for(const e of this.outputMediaStream.getAudioTracks())this.logger.info(`Removing audio track ${e.id} from output stream`),this.outputMediaStream.removeTrack(e);for(const e of this.inputVideoStream.getAudioTracks())this.logger.info(`Adding audio track ${e.id} to output stream`),this.outputMediaStream.addTrack(e)}isOutputMediaStreamActive(){return this.outputMediaStream&&this.outputMediaStream.active}set processors(e){this.stages=e}get processors(){return this.stages}forEachObserver(e){for(const t of this.observers)setTimeout(()=>{e(t)},0)}destroyInputMediaStreamAndBuffers(){if(this.inputVideoStream)for(const e of this.inputVideoStream.getTracks())e.stop();this.inputVideoStream=null;for(const e of this.sourceBuffers)e.destroy();this.sourceBuffers=[]}constructor(e,t,r=new g.default){this.logger=e,this.stages=t,this.fr=s,this.outputMediaStream=new MediaStream,this.videoInput=document.createElement("video"),this.canvasOutput=document.createElement("canvas"),this.outputCtx=this.canvasOutput.getContext("2d"),this.canvasInput=document.createElement("canvas"),this.inputCtx=this.canvasInput.getContext("2d"),this.inputVideoStream=null,this.sourceBuffers=[],this.destBuffers=[],this.observers=new Set,this.hasStarted=!1,this.process=o=>u(this,void 0,void 0,function*(){if(!this.inputVideoStream)return;const f=performance.now();this.videoInput.videoWidth&&(this.canvasInput.width!==this.videoInput.videoWidth&&(this.canvasInput.width=this.videoInput.videoWidth,this.canvasInput.height=this.videoInput.videoHeight,this.sourceBuffers[0].height=this.canvasInput.height,this.sourceBuffers[0].width=this.canvasInput.width,this.sourceBuffers[0].framerate=this.framerate),this.inputCtx.drawImage(this.videoInput,0,0));let h=[];h.push(this.sourceBuffers[0]);try{for(const C of this.processors)h=yield C.process(h)}catch{this.forEachObserver(w=>{w.processingDidFailToStart&&w.processingDidFailToStart()});return}this.destBuffers=h;let p;try{p=yield this.destBuffers[0].asCanvasImageSource()}catch{this.inputVideoStream&&(this.logger.info("buffers are destroyed and pipeline could not start"),this.forEachObserver(w=>{w.processingDidFailToStart&&w.processingDidFailToStart()}));return}const d=p.width,y=p.height;d!==0&&y!==0&&(this.canvasOutput.width!==d&&this.canvasOutput.height!==y&&(this.canvasOutput.width=d,this.canvasOutput.height=y),this.outputCtx.drawImage(p,0,0,d,y,0,0,d,y),this.hasStarted||(this.hasStarted=!0,this.forEachObserver(C=>{C.processingDidStart&&C.processingDidStart()})));const S=performance.now()-f,b=1e3*2/this.framerate-S,_=Math.max(0,1e3/this.framerate-S);b<=0&&this.forEachObserver(C=>{C.processingLatencyTooHigh&&C.processingLatencyTooHigh(S)}),yield this.timer.start(_,this.process.bind(this))}),this.timer=r}},"DefaultVideoFrameProcessorPipeline");l.default=a},1902736443:function(H,l){"use strict";var c=this&&this.__awaiter||function(m,v,g,s){function a(i){return i instanceof g?i:new g(function(e){e(i)})}return n(a,"adopt"),new(g||(g=Promise))(function(i,e){function t(f){try{o(s.next(f))}catch(h){e(h)}}n(t,"fulfilled");function r(f){try{o(s.throw(f))}catch(h){e(h)}}n(r,"rejected");function o(f){f.done?i(f.value):a(f.value).then(t,r)}n(o,"step"),o((s=s.apply(m,v||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=n(class{createWorkerTimer(){try{const v=new Blob([`self.onmessage = async function(e){ 
            var timerID = null;
            const awaitTimeout = delay => new Promise( resolve => {
              timerID = setTimeout(resolve, delay);
            })
            await awaitTimeout(e.data);
            postMessage(timerID);
          }`],{type:"application/javascript"});return new Worker(window.URL.createObjectURL(v))}catch{}}start(v,g){return c(this,void 0,void 0,function*(){this.callback=g,this.workerTimer?(this.workerTimer.onmessage=s=>{this.lastTimeout=s.data,this.callback()},this.workerTimer.postMessage(v)):this.lastTimeout=setTimeout(()=>{this.callback()},v)})}destroy(){return c(this,void 0,void 0,function*(){this.callback=void 0,this.lastTimeout&&(clearTimeout(this.lastTimeout),this.lastTimeout=void 0),this.workerTimer&&(this.workerTimer.terminate(),this.workerTimer=void 0)})}constructor(){this.workerTimer=void 0,this.callback=void 0,this.workerTimer=this.createWorkerTimer()}},"DefaultVideoFrameProcessorTimer");l.default=u},5709738441:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(8351168186)),g=m(c(7145536260));let s=n(class $v{get outputMediaStream(){return this.pipe.outputMediaStream}passEventControllerToProcessors(i){if(this.pipe.processors)for(const e of this.pipe.processors)typeof e.setEventController=="function"&&e.setEventController(i)}chooseNewInnerDevice(i){const e=new $v(this.logger,i,this.processors,this.browserBehavior);return e.pipe=this.pipe,e}getInnerDevice(){return this.device}intrinsicDevice(){return u(this,void 0,void 0,function*(){return this.device})}transformStream(i){return u(this,void 0,void 0,function*(){return yield this.pipe.setInputMediaStream(i),this.inputMediaStream=i,this.pipe.getActiveOutputMediaStream()})}onOutputStreamDisconnect(){this.logger.info("DefaultVideoTransformDevice: detach stopping input media stream");const i=this.device&&this.device.id;if(this.pipe.stop(),!i&&this.inputMediaStream)for(const e of this.inputMediaStream.getVideoTracks())e.stop()}stop(){return u(this,void 0,void 0,function*(){if(this.inputMediaStream)for(const i of this.inputMediaStream.getVideoTracks())i.stop();this.pipe.destroy(),this.inputMediaStream=null})}addObserver(i){this.observers.add(i)}removeObserver(i){this.observers.delete(i)}processingDidStart(){this.logger.info("video transform device processing started"),this.forEachObserver(i=>{i.processingDidStart&&i.processingDidStart()})}processingLatencyTooHigh(i){this.forEachObserver(e=>{e.processingLatencyTooHigh&&e.processingLatencyTooHigh(i)})}processingDidFailToStart(){this.logger.info("video transform device processing failed to start"),this.forEachObserver(i=>{i.processingDidFailToStart&&i.processingDidFailToStart()})}processingDidStop(){this.logger.info("video transform device processing stopped"),this.forEachObserver(i=>{i.processingDidStop&&i.processingDidStop()})}forEachObserver(i){for(const e of this.observers)setTimeout(()=>{i(e)},0)}constructor(i,e,t,r=new v.default){this.logger=i,this.device=e,this.processors=t,this.browserBehavior=r,this.observers=new Set,this.pipe=new g.default(this.logger,this.processors),this.pipe.addObserver(this)}},"DefaultVideoTransformDevice");l.default=s},7000795223:function(H,l){"use strict";var c=this&&this.__awaiter||function(m,v,g,s){function a(i){return i instanceof g?i:new g(function(e){e(i)})}return n(a,"adopt"),new(g||(g=Promise))(function(i,e){function t(f){try{o(s.next(f))}catch(h){e(h)}}n(t,"fulfilled");function r(f){try{o(s.throw(f))}catch(h){e(h)}}n(r,"rejected");function o(f){f.done?i(f.value):a(f.value).then(t,r)}n(o,"step"),o((s=s.apply(m,v||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=n(class{process(v){return c(this,void 0,void 0,function*(){return v})}destroy(){return c(this,void 0,void 0,function*(){})}},"NoOpVideoFrameProcessor");l.default=u},2887752350:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DeferredPromise=void 0;let c=n(class{getPromise(){return this.promise}resolvePromise(m){this.resolve(m)}resolveAndReplacePromise(m){this.resolve(m),this.promise=new Promise((v,g)=>{this.resolve=v,this.reject=g})}rejectPromise(m){this.reject(m)}rejectAndReplacePromise(m){this.reject(m),this.promise=new Promise((v,g)=>{this.resolve=v,this.reject=g})}constructor(){this.promise=new Promise((m,v)=>{this.resolve=m,this.reject=v})}},"DeferredPromise");l.DeferredPromise=c},8023592660:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(g,s,a,i){function e(t){return t instanceof a?t:new a(function(r){r(t)})}return n(e,"adopt"),new(a||(a=Promise))(function(t,r){function o(p){try{h(i.next(p))}catch(d){r(d)}}n(o,"fulfilled");function f(p){try{h(i.throw(p))}catch(d){r(d)}}n(f,"rejected");function h(p){p.done?t(p.value):e(p.value).then(o,f)}n(h,"step"),h((i=i.apply(g,s||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxCanvasOpsManager=void 0;const m=c(5513317584);let v=n(class{getInferenceInputData(s){return this.inferenceCtx.save(),this.inferenceCtx.scale(this.horizontalResizeScalar,this.verticalResizeScalar),this.inferenceCtx.drawImage(s,0,0),this.inferenceCtx.restore(),this.inferenceCtx.getImageData(0,0,m.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,m.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS)}configureForStreamParameters(s){return u(this,void 0,void 0,function*(){if(this.streamParameters=s,this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.backgroundReplacementCanvas){const a=document.createElement("canvas");a.width=this.streamParameters.width,a.height=this.streamParameters.height,a.getContext("2d").drawImage(this.backgroundReplacementCanvas,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=a}this.configureCanvasPipeline()})}configureCanvasPipeline(){this.inferenceCanvas=document.createElement("canvas"),this.inferenceCtx=this.inferenceCanvas.getContext("2d",{willReadFrequently:!0}),this.inferenceCanvas.width=m.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,this.inferenceCanvas.height=m.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.horizontalResizeScalar=m.SEGMENTATION_MODEL.WIDTH_IN_PIXELS/this.streamParameters.width,this.verticalResizeScalar=m.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS/this.streamParameters.height}getBackgroundReplacementCanvas(){return this.backgroundReplacementCanvas}loadReplacementBackground(s){return u(this,void 0,void 0,function*(){const a=s.backgroundReplacement.backgroundImageURL,i=s.backgroundReplacement.defaultColor;if(a)try{const e=yield this.loadImage(a);this.backgroundReplacementImage=e,this.resizeAndSetReplacementImage(this.backgroundReplacementImage)}catch(e){throw this.logger.error(e),new Error("Failed to set the replacement image.")}else this.resizeAndSetReplacementColor(i)})}resizeAndSetReplacementImage(s){const a=document.createElement("canvas"),i=a.getContext("2d");a.width=this.streamParameters.width,a.height=this.streamParameters.height,i.drawImage(s,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=a}resizeAndSetReplacementColor(s){const a=document.createElement("canvas"),i=a.getContext("2d");a.width=this.streamParameters.width,a.height=this.streamParameters.height,i.fillStyle=s,i.fillRect(0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=a}loadImage(s){return u(this,void 0,void 0,function*(){const i=yield(yield fetch(s).catch(t=>{throw this.logger.error(t.toString()),new Error("Failed to fetch image.")})).blob(),e=new Image;return e.src=URL.createObjectURL(i),new Promise((t,r)=>{e.onload=()=>{t(e)},e.onerror=o=>{r(o)}})})}constructor(s,a){this.streamParameters=s,this.outputCanvas=a,this.configureCanvasPipeline()}},"VideoFxCanvasOpsManager");l.VideoFxCanvasOpsManager=v},5513317584:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.FXLIB_PATH=l.WORKER_PATH=l.CDN_BASE_PATH=l.RESOURCE_CONSTRAINTS=l.SEGMENTATION_MODEL=l.DEFAULT_STREAM_PARAMETERS=l.WORKER_MSG=void 0,l.WORKER_MSG={BUILD_ENGINE_REQUEST:"BuildEngineRequest",BUILD_ENGINE_RESPONSE:"BuildEngineResponse",PERFORM_SEGMENTATION_REQUEST:"PerformSegmentationRequest",PERFORM_SEGMENTATION_RESPONSE:"PerformSegmentationResponse",PERFORM_SEGMENTATION_SAB_REQUEST:"PerformSegmentationSABRequest",PERFORM_SEGMENTATION_SAB_RESPONSE:"PerformSegmentationSABResponse",DESTROY_ASSETS_REQUEST:"DestroyAssetsRequest",DESTROY_ASSETS_RESPONSE:"DestroyAssetsResponse",CLOSE_WORKER_REQUEST:"CloseWorkerRequest"},l.DEFAULT_STREAM_PARAMETERS={FRAMES_PER_SECOND:15,WIDTH_IN_PIXEL:960,HEIGHT_IN_PIXEL:540,CHANNEL_COUNT:4},l.SEGMENTATION_MODEL={LOAD_SUCCESS:2,WIDTH_IN_PIXELS:176,HEIGHT_IN_PIXELS:160},l.RESOURCE_CONSTRAINTS={DEFAULT_PROCESSING_BUDGET_PER_FRAME:50,SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION:1,SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT:500,BLUR_DEFAULT_CYCLE_PERCENTAGE:10,BLUR_SAMPLING_PERIOD_FRAME_COUNT:1e3,MIN_PROCESSING_BUDGET:0,MAX_PROCESSING_BUDGET:100},l.CDN_BASE_PATH="https://static.sdkassets.chime.aws";const c="/ml_media_fx/otherassets";l.WORKER_PATH=`${c}/worker.js`,l.FXLIB_PATH=`${c}/fxlib.js`},2403769553:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(y,S,b,_){function C(w){return w instanceof b?w:new b(function(R){R(w)})}return n(C,"adopt"),new(b||(b=Promise))(function(w,R){function O(M){try{I(_.next(M))}catch(k){R(k)}}n(O,"fulfilled");function D(M){try{I(_.throw(M))}catch(k){R(k)}}n(D,"rejected");function I(M){M.done?w(M.value):C(M.value).then(O,D)}n(I,"step"),I((_=_.apply(y,S||[])).next())})},m=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(l,"__esModule",{value:!0});const v=c(4179955699),g=c(6582301018),s=c(8113008952),a=m(c(8351168186)),i=m(c(7338764361)),e=c(840544383),t=m(c(8066052849)),r=m(c(6672418579)),o=c(2887752350),f=c(8023592660),h=c(5513317584),p=c(615959602);let d=n(class Eu{process(S){return u(this,void 0,void 0,function*(){return S})}fxProcess(S){return u(this,void 0,void 0,function*(){const b=S[0].asCanvasElement();this.didStreamParametersChange(b)&&(yield this.adjustProcessorForNewStreamParameters(b));try{yield this.manageSegmentationMask(b)}catch(_){throw this.logger.error(_),new Error("Video stream could not be processed")}return yield this.renderer.render(b,this.segmentationMask),S[0]=this.canvasVideoFrameBuffer,S})}noOpProcess(S){return u(this,void 0,void 0,function*(){return S})}didStreamParametersChange(S){return S.width!==this.streamParameters.width||S.height!==this.streamParameters.height}adjustProcessorForNewStreamParameters(S){return u(this,void 0,void 0,function*(){this.streamParameters.width=S.width,this.streamParameters.height=S.height,yield this.canvasOpsManager.configureForStreamParameters(this.streamParameters),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,this.effectConfig)})}destroy(){return u(this,void 0,void 0,function*(){this.canvasVideoFrameBuffer.destroy(),this.fxLibScript&&this.fxLibScript.parentNode&&this.fxLibScript.parentNode.removeChild(this.fxLibScript),this.engineWorker&&(this.destroyedAssetsPromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:h.WORKER_MSG.DESTROY_ASSETS_REQUEST}),yield this.destroyedAssetsPromise.getPromise(),this.engineWorker.postMessage({msg:h.WORKER_MSG.CLOSE_WORKER_REQUEST})),this.logger.info("VideoFxProcessor destroyed.")})}manageSegmentationMask(S){return u(this,void 0,void 0,function*(){try{if(this.segmentationRateManager.submitFrame(),this.segmentationRateManager.shouldApplySegmentation()){this.segmentationRateManager.startSegmentation();const b=this.canvasOpsManager.getInferenceInputData(S);this.segmentationMask=yield this.generateSegmentationMask(b),this.segmentationRateManager.completeSegmentation()}}catch(b){throw this.logger.error(b.toString()),new Error("Can not properly manage the returned segmentation mask")}})}generateSegmentationMask(S){return u(this,void 0,void 0,function*(){Eu.isSharedArrayBufferSupported?(this.sharedImageData.set(S.data),this.engineWorker.postMessage({msg:h.WORKER_MSG.PERFORM_SEGMENTATION_SAB_REQUEST,payload:this.sharedImageBuffer})):this.engineWorker.postMessage({msg:h.WORKER_MSG.PERFORM_SEGMENTATION_REQUEST,payload:S},[S.data.buffer]);try{return yield this.segmentationRequestPromise.getPromise()}catch(b){throw this.logger.error(b.toString()),new Error("Segmentation mask could not be generated")}})}cloneConfigFrom(S){return{backgroundBlur:{isEnabled:S.backgroundBlur.isEnabled,strength:S.backgroundBlur.strength},backgroundReplacement:{isEnabled:S.backgroundReplacement.isEnabled,backgroundImageURL:S.backgroundReplacement.backgroundImageURL,defaultColor:S.backgroundReplacement.defaultColor}}}setEffectConfig(S){return u(this,void 0,void 0,function*(){if(this.sameVideoFxConfig(S,this.effectConfig))return;const b=this.cloneConfigFrom(S);try{yield this.validateEffectConfig(b)}catch(_){throw this.logger.error(_.toString()),new Error("Provided effect config is invalid, not updating VideoFxProcessor")}b.backgroundReplacement.isEnabled&&(yield this.canvasOpsManager.loadReplacementBackground(b),yield this.renderer.setBackgroundReplacementCanvas(this.canvasOpsManager.getBackgroundReplacementCanvas())),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,b),this.effectConfig=b,!this.effectConfig.backgroundBlur.isEnabled&&!this.effectConfig.backgroundReplacement.isEnabled?this.process=this.noOpProcess:this.process=this.fxProcess,this.logger.info(`VideoFxProcessor effect configuration updated to: ${JSON.stringify(this.effectConfig)}`),this.eventController&&this.publishVideoFxConfigEvent()})}validateEffectConfig(S){return u(this,void 0,void 0,function*(){if(S.backgroundBlur.isEnabled&&S.backgroundReplacement.isEnabled)throw new Error("Invalid VideoFx configuration: Background Blur and Background Replacement can not both be enabled");S.backgroundReplacement.isEnabled&&(yield this.validateReplacementConfig(S))})}validateReplacementConfig(S){return u(this,void 0,void 0,function*(){if(S.backgroundReplacement.backgroundImageURL&&S.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement can not have both an image URL and default color");if(!S.backgroundReplacement.backgroundImageURL&&!S.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement image URL and default can not both be null/undefined");try{S.backgroundReplacement.backgroundImageURL&&(yield this.canvasOpsManager.loadImage(S.backgroundReplacement.backgroundImageURL))}catch(_){throw this.logger.error(_.toString()),new Error("Invalid VideoFx configuration: backgroundImageURL failed to load")}const b=S.backgroundReplacement.defaultColor;if(b&&b!=="black"&&b!=="#000000"&&b!=="#000"){if(b.includes("#")&&!new RegExp(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/).test(b))throw new Error(`Invalid hexadecimal color code for default replacement background: ${b}`);const C=document.createElement("canvas").getContext("2d"),w=C.fillStyle;if(C.fillStyle=b,C.fillStyle===w)throw new Error(`Invalid color for default replacement background: ${b}`)}})}validateProcessingBudgetPerFrame(S){if(S<h.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET||S>h.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET)throw new Error(`Invalid resource constraint: cycle percentage must be within range of ${h.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET} and ${h.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET}`)}loadAssets(){return u(this,void 0,void 0,function*(){this.logger.info("Loading required assets for the VideoFxProcessor");try{const S=this.getVideoFxAssetParams();yield this.loadEngineWorker(S),yield this.buildEngine(S),yield this.loadFxLib(S),this.renderer=constructRenderer(h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.effectConfig,this.outputCanvas)}catch(S){throw this.logger.error(S.toString()),new Error("Failed to load necessary assets for the VideoFxProcessor")}this.logger.info("Finished loading of essential VideoFxProcessor assets.")})}getVideoFxAssetParams(){const S=e.getDefaultAssetSpec();return{assetGroup:S.assetGroup,revisionID:S.revisionID,sdk:encodeURIComponent(t.default.sdkVersion),ua:encodeURIComponent(t.default.sdkUserAgentLowResolution)}}getPathFromVideoFxAssetParams(S,b){const _=new URL(S);for(const[C,w]of Object.entries(b))if(w!==void 0){const R=encodeURIComponent(C),O=encodeURIComponent(w);_.searchParams.set(R,O)}return _.toString()}loadEngineWorker(S){return u(this,void 0,void 0,function*(){try{const b=this.getPathFromVideoFxAssetParams(h.CDN_BASE_PATH+h.WORKER_PATH,S);this.engineWorker=yield g.loadWorker(b,"VideoFxEngineWorker",{},null),this.logger.info("Successfully loaded the VideoFxProcessor's engine worker"),this.engineWorker.addEventListener("message",_=>this.engineWorkerReceiver(_))}catch(b){throw this.logger.error(b.toString()),new Error("Failed to load the VideoFxProcessor's engine worker")}})}buildEngine(S){return u(this,void 0,void 0,function*(){this.buildEnginePromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:h.WORKER_MSG.BUILD_ENGINE_REQUEST,payload:{cdnBasePath:h.CDN_BASE_PATH,sdkVersioningParams:S}});try{yield this.buildEnginePromise.getPromise()}catch(b){throw this.logger.error(b.toString()),new Error("Failed to instantiate the VideoFxEngine")}})}loadFxLib(S){return u(this,void 0,void 0,function*(){const b=this.getPathFromVideoFxAssetParams(h.CDN_BASE_PATH+h.FXLIB_PATH,S),_={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"};try{const C=yield v.fetchWithBehavior(b,_,{});if(!C.ok)throw new Error("Fetch failed.");const w=window.URL.createObjectURL(yield C.blob());yield new Promise((R,O)=>{this.fxLibScript=document.createElement("script"),this.fxLibScript.setAttribute("src",w),this.fxLibScript.setAttribute("type","module"),this.fxLibScript.setAttribute("async","false"),this.fxLibScript.addEventListener("load",R),this.fxLibScript.addEventListener("error",O),document.body.appendChild(this.fxLibScript)})}catch(C){throw this.logger.error(C.toString()),new Error("Failed to load the fxlib")}})}getEffectConfig(){return this.cloneConfigFrom(this.effectConfig)}engineWorkerReceiver(S){const b=S.data;switch(b.msg){case h.WORKER_MSG.BUILD_ENGINE_RESPONSE:this.settleEngineBuildPromise(b.payload);break;case h.WORKER_MSG.PERFORM_SEGMENTATION_RESPONSE:this.settleSegmentationPromise(b.payload.output);break;case h.WORKER_MSG.PERFORM_SEGMENTATION_SAB_RESPONSE:this.settleSegmentationPromiseSAB();break;case h.WORKER_MSG.DESTROY_ASSETS_RESPONSE:this.destroyedAssetsPromise.resolvePromise();break;default:this.logger.info(`VideoFx worker received unknown event msg: ${JSON.stringify(b)}`);break}}settleEngineBuildPromise(S){S!==h.SEGMENTATION_MODEL.LOAD_SUCCESS?this.buildEnginePromise.rejectPromise(new Error("Failed to build VideoFxProcessor's engine")):(this.logger.info("Successfully built the VideoFxEngine"),this.buildEnginePromise.resolvePromise())}settleSegmentationPromise(S){S?this.segmentationRequestPromise.resolveAndReplacePromise(S):this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation on the input image"))}settleSegmentationPromiseSAB(){try{const S=new ImageData(new Uint8ClampedArray(this.sharedImageData),h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS);this.segmentationRequestPromise.resolveAndReplacePromise(S)}catch{this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation with a shared array buffer on the input image"))}}setToNoOpProcess(){this.process=this.noOpProcess}static isSupported(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new i.default,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return u(this,void 0,void 0,function*(){let _=!0;const C=n((O,D)=>{O&&(S.info(D),_=!1)},"checkEnv");C(typeof globalThis>"u","Browser does not have globalThis."),C(!s.supportsWorker(globalThis,S),"Browser does not support web workers."),C(!s.supportsWASM(globalThis,S),"Browser does not support wasm."),C(!document.createElement("canvas").getContext("webgl2"),"Browser does not support webgl.");const w=new a.default;C(!w.isVideoFxSupportedBrowser(),"Browser is unsupported for VideoFxProcessor");const R=n(()=>u(this,void 0,void 0,function*(){if(b)try{const O=new Eu(S);yield O.loadAssets(),yield O.destroy()}catch{return S.info("Browser environment is unable to access the required external assets."),Promise.resolve(!1)}return Promise.resolve(!0)}),"checkProcessor");return Promise.resolve(_?yield R():!1)})}static create(S,b){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME;return u(this,void 0,void 0,function*(){const C=new Eu(S,_);try{return yield C.loadAssets(),yield C.setEffectConfig(b),C}catch(w){throw S.error(w.toString()),C.setToNoOpProcess(),new Error("VideoFxProcessor built with support for only NoOp processing")}})}setEventController(S){this.eventController?this.eventController=S:(this.eventController=S,this.publishVideoFxConfigEvent())}publishVideoFxConfigEvent(){const S={backgroundBlurEnabled:this.effectConfig.backgroundBlur.isEnabled.toString(),backgroundBlurStrength:this.effectConfig.backgroundBlur.strength,backgroundReplacementEnabled:this.effectConfig.backgroundReplacement.isEnabled.toString(),backgroundFilterVersion:2};this.eventController.publishEvent("backgroundFilterConfigSelected",S)}sameVideoFxConfig(S,b){return S.backgroundBlur.isEnabled===b.backgroundBlur.isEnabled&&S.backgroundBlur.strength===b.backgroundBlur.strength&&S.backgroundReplacement.backgroundImageURL===b.backgroundReplacement.backgroundImageURL&&S.backgroundReplacement.defaultColor===b.backgroundReplacement.defaultColor&&S.backgroundReplacement.isEnabled===b.backgroundReplacement.isEnabled}constructor(S,b=h.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME,_){this.logger=S,this.outputCanvas=document.createElement("canvas"),this.canvasVideoFrameBuffer=new r.default(this.outputCanvas);try{this.validateProcessingBudgetPerFrame(b)}catch(C){throw this.logger.error(C),new Error(`Cannot instantiate VideoFxProcessor due to invalid processingBudgetPerFrame of ${b}`)}_&&(this.eventController=_),this.effectConfig={backgroundBlur:{isEnabled:!1,strength:"low"},backgroundReplacement:{isEnabled:!1,backgroundImageURL:null,defaultColor:"black"}},this.segmentationRequestPromise=new o.DeferredPromise,this.segmentationRateManager=new p.VideoFxSegmentationRateManager(this.logger,b),this.streamParameters={framerate:h.DEFAULT_STREAM_PARAMETERS.FRAMES_PER_SECOND,width:h.DEFAULT_STREAM_PARAMETERS.WIDTH_IN_PIXEL,height:h.DEFAULT_STREAM_PARAMETERS.HEIGHT_IN_PIXEL,channels:h.DEFAULT_STREAM_PARAMETERS.CHANNEL_COUNT},Eu.isSharedArrayBufferSupported&&(this.sharedImageBuffer=new SharedArrayBuffer(h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS*h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS*this.streamParameters.channels),this.sharedImageData=new Uint8ClampedArray(this.sharedImageBuffer)),this.logger.info(`VideoFx supports Shared Array Buffer: ${Eu.isSharedArrayBufferSupported}`),this.canvasOpsManager=new f.VideoFxCanvasOpsManager(this.streamParameters,this.outputCanvas),this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.segmentationMask=new ImageData(this.streamParameters.width,this.streamParameters.height),this.logger.info(`VideoFxProcessor instantiated with a processingBudgetPerFrame of ${b}`)}},"VideoFxProcessor");l.default=d,d.isSharedArrayBufferSupported=typeof SharedArrayBuffer<"u"},615959602:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxSegmentationRateManager=void 0;const u=c(5513317584);let m=n(class{submitFrame(){this.frameCountOverSamplingPeriod++}shouldApplySegmentation(){return this.frameCountOverSamplingPeriod%this.framesPerSegmentation===0}startSegmentation(){this.frameSegmentationStartTime=performance.now()}completeSegmentation(){this.totalSegmentationDurationOverSamplingPeriod+=performance.now()-this.frameSegmentationStartTime,this.frameCountOverSamplingPeriod>=u.RESOURCE_CONSTRAINTS.SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT&&this.adjustFramesPerSegmentation(this.totalSegmentationDurationOverSamplingPeriod/(performance.now()-this.samplingPeriodStartTime))}adjustFramesPerSegmentation(g){g>this.targetSegmentationCyclePercentage?(this.framesPerSegmentation++,this.logger.info(`Segmentation cycle percentage above the configured maximal value. Decreasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)):this.framesPerSegmentation>1&&g<this.targetSegmentationCyclePercentage&&(this.framesPerSegmentation--,this.logger.info(`Segmentation cycle percentage below the configured maximal value. Increasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)),this.totalSegmentationDurationOverSamplingPeriod=0,this.frameCountOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now()}constructor(g,s){this.logger=g,this.targetSegmentationCyclePercentage=s/100,this.frameCountOverSamplingPeriod=0,this.totalSegmentationDurationOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now(),this.framesPerSegmentation=u.RESOURCE_CONSTRAINTS.SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION}},"VideoFxSegmentationRateManager");l.VideoFxSegmentationRateManager=m},2551170247:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"VideoSource");l.default=c},5134603106:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class Vg{add(m){this.ids.add(m)}array(){return Array.from(this.ids.values()).sort((v,g)=>v-g)}contain(m){return this.ids.has(m)}forEach(m){this.ids.forEach(m)}empty(){return this.ids.size===0}size(){return this.ids.size}equal(m){if(!m)return this.ids.size===0;const v=this.array(),g=m.array();if(v.length!==g.length)return!1;for(let s=0;s<v.length;s++)if(v[s]!==g[s])return!1;return!0}clone(){return new Vg(this.array())}remove(m){this.ids.delete(m)}toJSON(){return this.array()}truncate(m){const v=this.array();return new Vg(v.splice(0,m))}constructor(m){this.ids=new Set(m)}},"DefaultVideoStreamIdSet");l.default=c},5216544790:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=c(5391134031),v=u(c(5134603106)),g=u(c(4202624657));let s=n(class{localStreamDescriptions(){return[this.videoStreamDescription.clone()]}convertBpsToKbps(i){return i>0&&i<1e3?1:Math.trunc(i/1e3)}remoteStreamDescriptions(){if(!this.currentIndex||!this.currentIndex.sources)return[];const i=[];return this.currentIndex.sources.forEach(e=>{const t=new g.default;t.attendeeId=e.attendeeId,t.groupId=e.groupId,t.streamId=e.streamId,t.maxBitrateKbps=e.maxBitrateKbps,t.avgBitrateKbps=this.convertBpsToKbps(e.avgBitrateBps),t.width=e.width,t.height=e.height,t.maxFrameRate=e.framerate,i.push(t)}),i}integrateUplinkPolicyDecision(i){if(i&&i.length){const e=i[0];this.videoStreamDescription.maxBitrateKbps=e.maxBitrate/1e3,this.videoStreamDescription.maxFrameRate=e.maxFramerate}}integrateIndexFrame(i){if(this.currentIndex=i,!i)return;const e=new Map;let t=!1;for(const r of i.sources){if(!e.has(r.attendeeId)){e.set(r.attendeeId,r.groupId);continue}const o=e.get(r.attendeeId);o<r.groupId&&(this.logger.warn(`Old group ID ${o} found for attendee ID ${r.attendeeId}, replacing with newer group ID ${r.groupId}`),e.set(r.attendeeId,r.groupId)),t=!0}t&&(this.currentIndex.sources=this.currentIndex.sources.filter(r=>e.get(r.attendeeId)===r.groupId)),this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null}subscribeFrameSent(){this.indexForSubscribe=this.currentIndex}remoteVideoUpdateSent(){this.indexForLastRemoteVideoUpdate=this.currentIndex}integrateSubscribeAckFrame(i){this.currentSubscribeAck=i,this.subscribeTrackToStreamMap=this.buildTrackToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToStreamMap=this.buildSSRCToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToGroupMap=this.buildSSRCToGroupMap(this.currentSubscribeAck),this.subscribeStreamToAttendeeMap=this.buildStreamToAttendeeMap(this.indexForSubscribe),this.subscribeStreamToExternalUserIdMap=this.buildStreamExternalUserIdMap(this.indexForSubscribe),this.sendVideoStreamId=0,i.allocations&&i.allocations!==void 0&&i.allocations.length>0&&(this.sendVideoStreamId=i.allocations[0].streamId)}integrateBitratesFrame(i){if(this.currentIndex)for(const e of i.bitrates){const t=this.currentIndex.sources.find(r=>r.streamId===e.sourceStreamId);t!==void 0&&(t.avgBitrateBps=e.avgBitrateBps)}}allStreams(){const i=new v.default;if(this.currentIndex)for(const e of this.currentIndex.sources)i.add(e.streamId);return i}allVideoSendingSourcesExcludingSelf(i){const e=[],t=new Set;if(this.currentIndex&&this.currentIndex.sources&&this.currentIndex.sources.length)for(const r of this.currentIndex.sources){const{attendeeId:o,externalUserId:f,mediaType:h}=r;o!==i&&h===m.SdkStreamMediaType.VIDEO&&(t.has(o)||(e.push({attendee:{attendeeId:o,externalUserId:f}}),t.add(o)))}return e}streamSelectionUnderBandwidthConstraint(i,e,t,r){const o=new Set;if(this.currentIndex)for(const y of this.currentIndex.sources)y.attendeeId===i||y.mediaType!==m.SdkStreamMediaType.VIDEO||!e.has(y.attendeeId)&&!t.has(y.attendeeId)&&o.add(y.attendeeId);const f=this.buildAttendeeToSortedStreamDescriptorMapExcludingSelf(i),h=new Map;let p=0;f.forEach((y,S)=>{h.set(S,y[0]),p+=y[0].maxBitrateKbps}),p=this.trySelectHighBitrateForAttendees(f,e,p,r,h),this.trySelectHighBitrateForAttendees(f,o,p,r,h);const d=new v.default;for(const y of h.values())d.add(y.streamId);return d}highestQualityStreamFromEachGroupExcludingSelf(i){const e=new v.default;if(this.currentIndex){const t=new Map;for(const r of this.currentIndex.sources)r.attendeeId===i||r.mediaType!==m.SdkStreamMediaType.VIDEO||(!t.has(r.groupId)||r.maxBitrateKbps>t.get(r.groupId).maxBitrateKbps)&&t.set(r.groupId,r);for(const r of t.values())e.add(r.streamId)}return e}numberOfVideoPublishingParticipantsExcludingSelf(i){return this.highestQualityStreamFromEachGroupExcludingSelf(i).array().length}numberOfParticipants(){return this.currentIndex.numParticipants?this.currentIndex.numParticipants:-1}attendeeIdForTrack(i){const e=this.streamIdForTrack(i);if(e===void 0||!this.subscribeStreamToAttendeeMap)return this.logger.warn(`no attendee found for track ${i}`),"";const t=this.subscribeStreamToAttendeeMap.get(e);return t||(this.logger.info(`track ${i} (stream ${e}) does not correspond to a known attendee`),"")}externalUserIdForTrack(i){const e=this.streamIdForTrack(i);if(e===void 0||!this.subscribeStreamToExternalUserIdMap)return this.logger.warn(`no external user id found for track ${i}`),"";const t=this.subscribeStreamToExternalUserIdMap.get(e);return t||(this.logger.info(`track ${i} (stream ${e}) does not correspond to a known externalUserId`),"")}attendeeIdForStreamId(i){if(!this.streamToAttendeeMap)if(this.currentIndex)this.streamToAttendeeMap=this.buildStreamToAttendeeMap(this.currentIndex);else return"";const e=this.streamToAttendeeMap.get(i);return e||(this.logger.info(`stream ID ${i} does not correspond to a known attendee`),"")}attendeeIdForGroupId(i){if(!this.groupIdToAttendeeMap)if(this.currentIndex)this.groupIdToAttendeeMap=this.buildGroupIdToAttendeeMap(this.currentIndex);else return"";const e=this.groupIdToAttendeeMap.get(i);return e||(this.logger.info(`group ID ${i} does not correspond to a known attendee`),"")}groupIdForStreamId(i){if(!(!this.currentIndex||!this.currentIndex.sources)){for(const e of this.currentIndex.sources)if(e.streamId===i)return e.groupId;if(this.indexForSubscribe){for(const e of this.indexForSubscribe.sources)if(e.streamId===i)return e.groupId}if(this.indexForLastRemoteVideoUpdate){for(const e of this.indexForLastRemoteVideoUpdate.sources)if(e.streamId===i)return e.groupId}}}StreamIdsInSameGroup(i,e){return this.groupIdForStreamId(i)===this.groupIdForStreamId(e)}streamIdForTrack(i){if(this.subscribeTrackToStreamMap)return this.subscribeTrackToStreamMap.get(i)}streamIdForSSRC(i){if(this.subscribeSsrcToStreamMap)return this.subscribeSsrcToStreamMap.get(i)}overrideStreamIdMappings(i,e){if(this.subscribeTrackToStreamMap){for(const[t,r]of this.subscribeTrackToStreamMap.entries())if(i===r){this.subscribeTrackToStreamMap.set(t,e);break}}if(this.subscribeSsrcToStreamMap){for(const[t,r]of this.subscribeSsrcToStreamMap.entries())if(i===r){this.subscribeSsrcToStreamMap.set(t,e);break}}}groupIdForSSRC(i){if(this.subscribeSsrcToGroupMap)return this.subscribeSsrcToGroupMap.get(i)}streamsPausedAtSource(){const i=new v.default;if(this.currentIndex)for(const e of this.currentIndex.pausedAtSourceIds)i.add(e);return i}sendVideoStreamIdFromRid(i){return this.sendVideoStreamId}buildTrackToStreamMap(i){const e=new Map;this.logger.debug(()=>`trackMap ${JSON.stringify(i.tracks)}`);for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.trackLabel,t.streamId);return e}buildSSRCToStreamMap(i){const e=new Map;this.logger.debug(()=>`ssrcMap ${JSON.stringify(i.tracks)}`);for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,t.streamId);return e}buildSSRCToGroupMap(i){const e=new Map;for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,this.groupIdForStreamId(t.streamId));return e}buildStreamToAttendeeMap(i){const e=new Map;if(i)for(const t of i.sources)e.set(t.streamId,t.attendeeId);return e}buildGroupIdToAttendeeMap(i){const e=new Map;for(const t of i.sources)e.set(t.groupId,t.attendeeId);return e}buildStreamExternalUserIdMap(i){const e=new Map;if(i)for(const t of i.sources)t.externalUserId&&e.set(t.streamId,t.externalUserId);return e}trySelectHighBitrateForAttendees(i,e,t,r,o){for(const f of e){if(t>=r)break;if(i.has(f)){const h=i.get(f);for(const p of h.reverse())if(t-o.get(f).maxBitrateKbps+p.maxBitrateKbps<r){t=t-o.get(f).maxBitrateKbps+p.maxBitrateKbps,o.set(f,p);break}}}return t}buildAttendeeToSortedStreamDescriptorMapExcludingSelf(i){const e=new Map;if(this.currentIndex)for(const t of this.currentIndex.sources)t.attendeeId===i||t.mediaType!==m.SdkStreamMediaType.VIDEO||(e.has(t.attendeeId)?e.get(t.attendeeId).push(t):e.set(t.attendeeId,[t]));return e.forEach((t,r)=>{t.sort((o,f)=>o.maxBitrateKbps>f.maxBitrateKbps?1:o.maxBitrateKbps<f.maxBitrateKbps?-1:0)}),e}constructor(i){this.logger=i,this.currentIndex=null,this.indexForSubscribe=null,this.indexForLastRemoteVideoUpdate=null,this.currentSubscribeAck=null,this.subscribeTrackToStreamMap=null,this.subscribeStreamToAttendeeMap=null,this.subscribeStreamToExternalUserIdMap=null,this.subscribeSsrcToStreamMap=null,this.subscribeSsrcToGroupMap=null,this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null,this.videoStreamDescription=new g.default,this.sendVideoStreamId=0,this.videoStreamDescription.trackLabel="AmazonChimeExpressVideo",this.videoStreamDescription.streamId=2,this.videoStreamDescription.groupId=2}},"DefaultVideoStreamIndex");l.default=s},7562203998:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=c(5391134031),v=u(c(5216544790)),g=u(c(4202624657));let s=n(class bu extends v.default{localStreamDescriptions(){const i=[];return this._localStreamInfos.forEach(e=>{i.push(e.clone())}),i}integrateUplinkPolicyDecision(i){let e=!0,t=0;for(let r=0;r<i.length;r++){const o=i[r].maxBitrate/1e3,f=i[r].maxFramerate;if(!e||r===this._localStreamInfos.length){e=!1;const h=new g.default;h.maxBitrateKbps=o,h.maxFrameRate=f,h.disabledByUplinkPolicy=o===0,h.rid=i[r].rid,o!==0&&(h.timeEnabled=Date.now()),this._localStreamInfos.push(h),t++;continue}this._localStreamInfos[t].maxBitrateKbps===0&&o>0&&(this._localStreamInfos[t].timeEnabled=Date.now()),this._localStreamInfos[t].maxBitrateKbps=o,this._localStreamInfos[t].maxFrameRate=f,this._localStreamInfos[t].disabledByUplinkPolicy=o===0,t++}e&&this._localStreamInfos.splice(t)}integrateBitratesFrame(i){super.integrateBitratesFrame(i);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const r of i.bitrates)e.add(r.sourceStreamId),this.streamIdToBitrateKbpsMap.set(r.sourceStreamId,this.convertBpsToKbps(r.avgBitrateBps));for(const r of t)e.has(r)||(this.streamIdToBitrateKbpsMap.get(r)===bu.UNSEEN_STREAM_BITRATE?this.streamIdToBitrateKbpsMap.set(r,bu.RECENTLY_INACTIVE_STREAM_BITRATE):this.streamIdToBitrateKbpsMap.set(r,bu.NOT_SENDING_STREAM_BITRATE));this.logLocalStreamDescriptions()}logLocalStreamDescriptions(){let i="";for(const e of this._localStreamInfos)i+=`streamId=${e.streamId} maxBitrate=${e.maxBitrateKbps} disabledByUplink=${e.disabledByUplinkPolicy}
`;this.logger.debug(()=>i)}integrateIndexFrame(i){super.integrateIndexFrame(i);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const r of this.currentIndex.sources)r.mediaType===m.SdkStreamMediaType.VIDEO&&(e.add(r.streamId),this.streamIdToBitrateKbpsMap.has(r.streamId)||this.streamIdToBitrateKbpsMap.set(r.streamId,bu.UNSEEN_STREAM_BITRATE));for(const r of t)e.has(r)||this.streamIdToBitrateKbpsMap.delete(r)}integrateSubscribeAckFrame(i){if(super.integrateSubscribeAckFrame(i),!i.allocations||i.allocations===void 0)return;let e=0;this._sendRidToVideoStreamIdMap.clear();for(const t of i.allocations){if(this._localStreamInfos.length<e+1){this.logger.info("simulcast: allocation has more than number of local streams");break}this._localStreamInfos[e].groupId=t.groupId,this._localStreamInfos[e].streamId=t.streamId,this.streamIdToBitrateKbpsMap.has(t.streamId)||this.streamIdToBitrateKbpsMap.set(t.streamId,bu.UNSEEN_STREAM_BITRATE),this._sendRidToVideoStreamIdMap.set(this._localStreamInfos[e].rid,t.streamId),e++}}sendVideoStreamIdFromRid(i){let e=0;return this._sendRidToVideoStreamIdMap.has(i)&&(e=this._sendRidToVideoStreamIdMap.get(i)),e}constructor(){super(...arguments),this.streamIdToBitrateKbpsMap=new Map,this._localStreamInfos=[],this._sendRidToVideoStreamIdMap=new Map}},"SimulcastVideoStreamIndex");l.default=s,s.UNSEEN_STREAM_BITRATE=-2,s.RECENTLY_INACTIVE_STREAM_BITRATE=-1,s.NOT_SENDING_STREAM_BITRATE=0,s.BitratesMsgFrequencyMs=4e3},4202624657:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=c(5391134031);let m=n(class Kv{clone(){const g=new Kv;return g.attendeeId=this.attendeeId,g.groupId=this.groupId,g.streamId=this.streamId,g.ssrc=this.ssrc,g.trackLabel=this.trackLabel,g.maxBitrateKbps=this.maxBitrateKbps,g.avgBitrateKbps=this.avgBitrateKbps,g.maxFrameRate=this.maxFrameRate,g.timeEnabled=this.timeEnabled,g.disabledByUplinkPolicy=this.disabledByUplinkPolicy,g.width=this.width,g.height=this.height,g}toStreamDescriptor(){const g=u.SdkStreamDescriptor.create();return g.mediaType=u.SdkStreamMediaType.VIDEO,g.trackLabel=this.trackLabel,g.attendeeId=this.attendeeId,g.streamId=this.streamId,g.groupId=this.groupId,g.framerate=this.maxFrameRate,g.maxBitrateKbps=this.disabledByUplinkPolicy?0:this.maxBitrateKbps,g.avgBitrateBps=this.avgBitrateKbps,g}totalPixels(){return this.width*this.height}constructor(g,s,a,i,e){this.attendeeId="",this.groupId=0,this.streamId=0,this.ssrc=0,this.trackLabel="",this.maxBitrateKbps=0,this.avgBitrateKbps=0,this.maxFrameRate=0,this.width=0,this.height=0,this.timeEnabled=0,this.disabledByWebRTC=!1,this.disabledByUplinkPolicy=!1,this.rid="",this.attendeeId=g,this.groupId=s,this.streamId=a,this.maxBitrateKbps=i,this.avgBitrateKbps=e}},"VideoStreamDescription");l.default=m},1140481832:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(8351168186)),v=u(c(4599834734)),g=u(c(5449946032));let s=n(class Zl{static connectVideoStreamToVideoElement(i,e,t){const r=t&&i.getVideoTracks()[0].getSettings().facingMode!=="environment"?"rotateY(180deg)":"";if(Zl.setVideoElementFlag(e,"disablePictureInPicture",t),Zl.setVideoElementFlag(e,"disableRemotePlayback",t),e.style.transform!==r&&(e.style.transform=r),e.hasAttribute("controls")&&e.removeAttribute("controls"),e.hasAttribute("autoplay")||e.setAttribute("autoplay","true"),e.hasAttribute("playsinline")||e.setAttribute("playsinline","true"),e.hasAttribute("muted")||(e.setAttribute("muted","true"),e.muted=!0),e.srcObject!==i&&(e.srcObject=i,new m.default().requiresVideoPlayWorkaround()&&e.paused)){const o=e.play();o!==void 0&&o.catch(f=>{console.warn("Error playing video in Safari",f)}).then(()=>{console.debug("Video played successfully in Safari")})}}static disconnectVideoStreamFromVideoElement(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(i)if(e)t||(i.srcObject=null,i.style.transform="");else{if(!i.srcObject)return;i.pause(),i.style.transform="",Zl.setVideoElementFlag(i,"disablePictureInPicture",!1),Zl.setVideoElementFlag(i,"disableRemotePlayback",!1),i.srcObject=null}}destroy(){this.devicePixelRatioMonitor.removeObserver(this),this.tileState.boundVideoElement&&this.tileState.boundVideoElement.srcObject===this.tileState.boundVideoStream&&Zl.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,!1),this.tileState=new g.default}devicePixelRatioChanged(i){this.tileState.devicePixelRatio=i,this.sendTileStateUpdate()}id(){return this.tileState.tileId}state(){return this.tileState.clone()}stateRef(){return this.tileState}bindVideoStream(i,e,t,r,o,f,h,p){let d=!1;this.tileState.boundAttendeeId!==i&&(this.tileState.boundAttendeeId=i,new v.default(i).hasModality(v.default.MODALITY_CONTENT)&&(this.tileState.isContent=!0),d=!0),this.tileState.boundExternalUserId!==h&&(this.tileState.boundExternalUserId=h,d=!0),this.tileState.localTile!==e&&(this.tileState.localTile=e,d=!0),this.tileState.boundVideoStream!==t&&(this.tileState.boundVideoStream=t,d=!0),this.tileState.videoStreamContentWidth!==r&&(this.tileState.videoStreamContentWidth=r,d=!0),this.tileState.videoStreamContentHeight!==o&&(this.tileState.videoStreamContentHeight=o,d=!0),this.tileState.streamId!==f&&(this.tileState.streamId=f,d=!0),this.tileState.groupId!==p&&(this.tileState.groupId=p,d=!0),d&&this.sendTileStateUpdate()}bindVideoElement(i){let e=!1;this.tileState.boundVideoElement!==i&&(this.tileState.boundVideoElement=i,e=!0),this.tileState.boundVideoElement!==null?(this.tileState.videoElementCSSWidthPixels!==i.clientWidth&&(this.tileState.videoElementCSSWidthPixels=i.clientWidth,e=!0),this.tileState.videoElementCSSHeightPixels!==i.clientHeight&&(this.tileState.videoElementCSSHeightPixels=i.clientHeight,e=!0)):(this.tileState.videoElementCSSWidthPixels=null,this.tileState.videoElementCSSHeightPixels=null),e&&this.sendTileStateUpdate()}pause(){this.tileState.paused||(this.tileState.paused=!0,this.sendTileStateUpdate())}unpause(){this.tileState.paused&&(this.tileState.paused=!1,this.sendTileStateUpdate())}markPoorConnection(){return this.tileState.poorConnection?!1:(this.tileState.poorConnection=!0,this.sendTileStateUpdate(),!0)}unmarkPoorConnection(){return this.tileState.poorConnection?(this.tileState.poorConnection=!1,this.sendTileStateUpdate(),!0):!1}capture(){if(!this.tileState.active)return null;const i=document.createElement("canvas"),e=this.tileState.boundVideoElement;i.width=e.videoWidth||e.width,i.height=e.videoHeight||e.height;const t=i.getContext("2d");return t.drawImage(e,0,0,i.width,i.height),t.getImageData(0,0,i.width,i.height)}setStreamId(i){this.tileState.streamId=i,this.tileController.sendTileStateUpdate(this.state())}sendTileStateUpdate(){this.updateActiveState(),this.updateVideoStreamOnVideoElement(),this.updateVideoElementPhysicalPixels(),this.tileController.sendTileStateUpdate(this.state())}updateActiveState(){this.tileState.active=!!(!this.tileState.paused&&!this.tileState.poorConnection&&this.tileState.boundAttendeeId&&this.tileState.boundVideoElement&&this.tileState.boundVideoStream)}updateVideoElementPhysicalPixels(){typeof this.tileState.videoElementCSSWidthPixels=="number"&&typeof this.tileState.videoElementCSSHeightPixels=="number"?(this.tileState.videoElementPhysicalWidthPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSWidthPixels,this.tileState.videoElementPhysicalHeightPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSHeightPixels):(this.tileState.videoElementPhysicalWidthPixels=null,this.tileState.videoElementPhysicalHeightPixels=null)}updateVideoStreamOnVideoElement(){this.tileState.active?Zl.connectVideoStreamToVideoElement(this.tileState.boundVideoStream,this.tileState.boundVideoElement,this.tileState.localTile):Zl.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,this.tileState.paused,this.tileController.keepLastFrameWhenPaused)}static setVideoElementFlag(i,e,t){e in i&&(i[e]=t)}constructor(i,e,t,r){this.tileController=t,this.devicePixelRatioMonitor=r,this.tileState=new g.default,this.tileState.tileId=i,this.tileState.localTile=e,this.devicePixelRatioMonitor.registerObserver(this)}},"DefaultVideoTile");l.default=s},5449946032:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class Jv{clone(){const m=new Jv;return m.tileId=this.tileId,m.localTile=this.localTile,m.isContent=this.isContent,m.active=this.active,m.paused=this.paused,m.poorConnection=this.poorConnection,m.boundAttendeeId=this.boundAttendeeId,m.boundExternalUserId=this.boundExternalUserId,m.boundVideoStream=this.boundVideoStream,m.boundVideoElement=this.boundVideoElement,m.nameplate=this.nameplate,m.videoStreamContentWidth=this.videoStreamContentWidth,m.videoStreamContentHeight=this.videoStreamContentHeight,m.videoElementCSSWidthPixels=this.videoElementCSSWidthPixels,m.videoElementCSSHeightPixels=this.videoElementCSSHeightPixels,m.devicePixelRatio=this.devicePixelRatio,m.videoElementPhysicalWidthPixels=this.videoElementPhysicalWidthPixels,m.videoElementPhysicalHeightPixels=this.videoElementPhysicalHeightPixels,m.streamId=this.streamId,m.groupId=this.groupId,m}constructor(){this.tileId=null,this.localTile=!1,this.localTileStarted=!1,this.isContent=!1,this.active=!1,this.paused=!1,this.poorConnection=!1,this.boundAttendeeId=null,this.boundExternalUserId=null,this.boundVideoStream=null,this.boundVideoElement=null,this.nameplate=null,this.videoStreamContentWidth=null,this.videoStreamContentHeight=null,this.videoElementCSSWidthPixels=null,this.videoElementCSSHeightPixels=null,this.devicePixelRatio=0,this.videoElementPhysicalWidthPixels=null,this.videoElementPhysicalHeightPixels=null,this.streamId=null,this.groupId=null}},"VideoTileState");l.default=c},9251190564:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(t,r,o,f){function h(p){return p instanceof o?p:new o(function(d){d(p)})}return n(h,"adopt"),new(o||(o=Promise))(function(p,d){function y(_){try{b(f.next(_))}catch(C){d(C)}}n(y,"fulfilled");function S(_){try{b(f.throw(_))}catch(C){d(C)}}n(S,"rejected");function b(_){_.done?p(_.value):h(_.value).then(y,S)}n(b,"step"),b((f=f.apply(t,r||[])).next())})},m=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(8981226922)),g=m(c(2343182956)),s=m(c(2827699573)),a=c(903520651),i=m(c(1140481832));let e=n(class{createDevicePixelRatioMonitorIfNeeded(){this.devicePixelRatioMonitor||(this.devicePixelRatioMonitor=new g.default(new s.default,this.logger))}discardDevicePixelRatioMonitorIfNotNeeded(){return u(this,void 0,void 0,function*(){if(this.tileMap.size||!this.devicePixelRatioMonitor)return;const r=this.devicePixelRatioMonitor;return this.devicePixelRatioMonitor=void 0,r.destroy()})}bindVideoElement(r,o){const f=this.getVideoTile(r);if(f===null){this.logger.warn(`Ignoring video element binding for unknown tile id ${r}`);return}f.bindVideoElement(o)}unbindVideoElement(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const f=this.getVideoTile(r);if(f===null){this.logger.warn(`Ignoring video element unbinding for unknown tile id ${r}`);return}this.logger.info("Unbinding the video element");const h=f.stateRef().boundVideoElement;f.bindVideoElement(null),o&&(this.logger.info("Cleaning up the video element"),i.default.disconnectVideoStreamFromVideoElement(h,!1))}startLocalVideoTile(){if(this.audioVideoController.configuration.meetingFeatures.videoMaxResolution===v.default.VideoDisabled)return this.logger.warn("Could not start camera video because max video resolution was set to None"),-1;const r=this.findOrCreateLocalVideoTile();return this.currentLocalTile.stateRef().localTileStarted=!0,this.audioVideoController.update({needsRenegotiation:!0}),r.id()}stopLocalVideoTile(){this.currentLocalTile&&(this.currentLocalTile.stateRef().localTileStarted=!1,this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.audioVideoController.update({needsRenegotiation:!0}))}hasStartedLocalVideoTile(){return!!(this.currentLocalTile&&this.currentLocalTile.stateRef().localTileStarted)}removeLocalVideoTile(){this.currentLocalTile&&this.removeVideoTile(this.currentLocalTile.id())}getLocalVideoTile(){return this.currentLocalTile}pauseVideoTile(r){const o=this.getVideoTile(r);o&&(this.currentPausedTilesByIds.has(r)||(this.audioVideoController.pauseReceivingStream(o.stateRef().streamId),this.currentPausedTilesByIds.add(r)),o.pause())}unpauseVideoTile(r){const o=this.getVideoTile(r);o&&(this.currentPausedTilesByIds.has(r)&&(this.audioVideoController.resumeReceivingStream(o.stateRef().streamId),this.currentPausedTilesByIds.delete(r)),o.unpause())}getVideoTile(r){return this.tileMap.has(r)?this.tileMap.get(r):null}getVideoTileArea(r){const o=r.state();let f=0,h=0;return o.boundVideoElement&&(f=o.boundVideoElement.clientHeight*o.devicePixelRatio,h=o.boundVideoElement.clientWidth*o.devicePixelRatio),f*h}getAllRemoteVideoTiles(){const r=new Array;return this.tileMap.forEach((o,f)=>{(!this.currentLocalTile||f!==this.currentLocalTile.id())&&r.push(o)}),r}getAllVideoTiles(){return Array.from(this.tileMap.values())}addVideoTile(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const o=this.nextTileId;this.nextTileId+=1,this.createDevicePixelRatioMonitorIfNeeded();const f=this.tileFactory.makeTile(o,r,this,this.devicePixelRatioMonitor);return this.tileMap.set(o,f),f}removeVideoTile(r){if(!this.tileMap.has(r))return;const o=this.tileMap.get(r);this.currentLocalTile===o&&(this.currentLocalTile=null),o.destroy(),this.tileMap.delete(r),this.audioVideoController.forEachObserver(f=>{a.Maybe.of(f.videoTileWasRemoved).map(h=>h.bind(f)(r))}),this.discardDevicePixelRatioMonitorIfNotNeeded()}removeVideoTilesByAttendeeId(r){const o=[];for(const f of this.getAllVideoTiles()){const h=f.state();h.boundAttendeeId===r&&(this.removeVideoTile(h.tileId),o.push(h.tileId))}return o}removeAllVideoTiles(){const r=Array.from(this.tileMap.keys());for(const o of r)this.removeVideoTile(o)}sendTileStateUpdate(r){this.audioVideoController.forEachObserver(o=>{a.Maybe.of(o.videoTileDidUpdate).map(f=>f.bind(o)(r))})}haveVideoTilesWithStreams(){for(const r of this.getAllVideoTiles())if(r.state().boundVideoStream)return!0;return!1}haveVideoTileForAttendeeId(r){return!!this.getVideoTileForAttendeeId(r)}getVideoTileForAttendeeId(r){for(const o of this.getAllVideoTiles())if(o.state().boundAttendeeId===r)return o}captureVideoTile(r){const o=this.getVideoTile(r);return o?o.capture():null}findOrCreateLocalVideoTile(){return this.currentLocalTile?this.currentLocalTile:(this.currentLocalTile=this.addVideoTile(!0),this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.currentLocalTile)}constructor(r,o,f){this.tileFactory=r,this.audioVideoController=o,this.logger=f,this.tileMap=new Map,this.nextTileId=1,this.currentLocalTile=null,this.currentPausedTilesByIds=new Set,this.keepLastFrameWhenPaused=!1,this.keepLastFrameWhenPaused=o.configuration.keepLastFrameWhenPaused}},"DefaultVideoTileController");l.default=e},1695899970:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(1140481832));let v=n(class{makeTile(s,a,i,e){return new m.default(s,a,i,e)}},"DefaultVideoTileFactory");l.default=v},7699083583:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{},"BitrateParameters");l.default=c},3361826027:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(8438160003)),v=u(c(2962876954)),g=c(903520651),s=u(c(8261422434)),a=u(c(7699083583));let i=n(class hl{updateConnectionMetric(t){}calculateEncodingParameters(){const t=[new a.default,new a.default,new a.default];this.shouldDisableSimulcast?(this.newActiveStreams=0,t[0].maxBitrateKbps=0,t[1].maxBitrateKbps=this.hiTargetBitrateKbps,t[2].maxBitrateKbps=0):this.numSenders<=4?(this.newActiveStreams=1,t[0].maxBitrateKbps=this.lowTargetBitrateKbps,t[1].maxBitrateKbps=0,t[2].maxBitrateKbps=this.hiTargetBitrateKbps):(this.newActiveStreams=2,t[0].maxBitrateKbps=this.lowTargetBitrateKbps*2/3,t[1].maxBitrateKbps=this.numSenders<=6?this.midTargetBitrateKbps:this.midTargetBitrateKbps*.6,t[2].maxBitrateKbps=0);const r=t.map((o,f,h)=>o.maxBitrateKbps);return this.newQualityMap=this.fillEncodingParamWithBitrates(r),this.encodingParametersEqual()||this.logger.info(`simulcast: policy:calculateEncodingParameters numSources:${this.numSenders} shouldDisableSimulcast:${this.shouldDisableSimulcast} newQualityMap: ${this.getQualityMapString(this.newQualityMap)}`),this.newQualityMap}chooseMediaTrackConstraints(){}chooseEncodingParameters(){return this.currentQualityMap=this.newQualityMap,this.activeStreamsToPublish!==this.newActiveStreams&&(this.activeStreamsToPublish=this.newActiveStreams,this.publishEncodingSimulcastLayer()),this.currentQualityMap}updateIndex(t){const r=t.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+1,o=r!==this.numSenders,f=t.numberOfParticipants(),h=f>=0&&f<=2,p=this.shouldDisableSimulcast!==h;this.numSenders=r,this.shouldDisableSimulcast=h,this.optimalParameters=new s.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1),this.videoIndex=t,(o||p)&&(this.newQualityMap=this.calculateEncodingParameters())}wantsResubscribe(){return!this.encodingParametersEqual()}compareEncodingParameter(t,r){return JSON.stringify(t)===JSON.stringify(r)}encodingParametersEqual(){let t=!1;for(const r of v.default.NAME_ARR_ASCENDING)if(t=t||!this.compareEncodingParameter(this.newQualityMap.get(r),this.currentQualityMap.get(r)),t)break;return!t}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}captureWidth(){return this.enableFhdVideo?1920:1280}captureHeight(){return this.enableFhdVideo?1080:768}captureFrameRate(){return 15}maxBandwidthKbps(){return this.enableFhdVideo?2500:1400}setIdealMaxBandwidthKbps(t){}setHasBandwidthPriority(t){}setHighResolutionFeatureEnabled(t){this.enableFhdVideo=t,this.hiTargetBitrateKbps=t?hl.kHiTargetBitrateKbpsFhd:hl.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=t?hl.kMidTargetBitrateKbpsFhd:hl.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=t?hl.kLowTargetBitrateKbpsFhd:hl.kLowTargetBitrateKbpsHd}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!0}fillEncodingParamWithBitrates(t){const r=new Map,o=1e3,f=v.default.NAME_ARR_ASCENDING,h=t;let p=this.shouldDisableSimulcast?1:4;for(let d=0;d<f.length;d++){const y=f[d];r.set(y,{rid:y,active:h[d]>0,scaleResolutionDownBy:Math.max(p,1),maxBitrate:h[d]*o}),p=p/2}return r}getQualityMapString(t){let r="";return this.videoIndex.localStreamDescriptions().length===3&&t.forEach(f=>{r+=`{ rid: ${f.rid} active:${f.active} maxBitrate:${f.maxBitrate}}`}),r}getEncodingSimulcastLayer(t){switch(t){case 0:return m.default.High;case 1:return m.default.LowAndHigh;case 2:return m.default.LowAndMedium}}publishEncodingSimulcastLayer(){const t=this.getEncodingSimulcastLayer(this.activeStreamsToPublish);this.forEachObserver(r=>{g.Maybe.of(r.encodingSimulcastLayersDidChange).map(o=>o.bind(r)(t))})}addObserver(t){this.logger.info("adding simulcast uplink observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing simulcast uplink observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const r of this.observerQueue)t(r)}constructor(t,r){this.selfAttendeeId=t,this.logger=r,this.numSenders=0,this.shouldDisableSimulcast=!1,this.newQualityMap=new Map,this.currentQualityMap=new Map,this.newActiveStreams=1,this.videoIndex=null,this.observerQueue=new Set,this.hiTargetBitrateKbps=hl.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=hl.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=hl.kLowTargetBitrateKbpsHd,this.enableFhdVideo=!1,this.optimalParameters=new s.default(0,0,0,0,!0),this.parametersInEffect=new s.default(0,0,0,0,!0),this.currentQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps]),this.newQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps])}},"DefaultSimulcastUplinkPolicy");l.default=i,i.kHiTargetBitrateKbpsHd=1200,i.kMidTargetBitrateKbpsHd=600,i.kLowTargetBitrateKbpsHd=300,i.kHiTargetBitrateKbpsFhd=2e3,i.kMidTargetBitrateKbpsFhd=1e3,i.kLowTargetBitrateKbpsFhd=500},4134174226:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(1438956810));let v=n(class{updateConnectionMetric(s){}chooseMediaTrackConstraints(){}chooseEncodingParameters(){var s,a,i,e,t,r,o,f,h,p,d,y;const S=new Map,b=1e3,_=m.default.NAME_ARR_ASCENDING;return S.set(_[0],{rid:_[0],active:!0,scaleResolutionDownBy:((a=(s=this.encodingParams)===null||s===void 0?void 0:s.low)===null||a===void 0?void 0:a.scaleResolutionDownBy)||2,maxBitrate:(((e=(i=this.encodingParams)===null||i===void 0?void 0:i.low)===null||e===void 0?void 0:e.maxBitrateKbps)||this.defaultLowTargetBitrateKbps)*b,maxFramerate:((r=(t=this.encodingParams)===null||t===void 0?void 0:t.low)===null||r===void 0?void 0:r.maxFramerate)||5}),S.set(_[1],{rid:_[1],active:!0,scaleResolutionDownBy:((f=(o=this.encodingParams)===null||o===void 0?void 0:o.high)===null||f===void 0?void 0:f.scaleResolutionDownBy)||1,maxBitrate:(((p=(h=this.encodingParams)===null||h===void 0?void 0:h.high)===null||p===void 0?void 0:p.maxBitrateKbps)||this.defaultHiTargetBitrateKbps)*b,maxFramerate:(y=(d=this.encodingParams)===null||d===void 0?void 0:d.high)===null||y===void 0?void 0:y.maxFramerate}),S}updateIndex(s){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){}maxBandwidthKbps(){return this.enableUhdContent?2e3:1200}setIdealMaxBandwidthKbps(s){}setHasBandwidthPriority(s){}setHighResolutionFeatureEnabled(s){this.enableUhdContent=s,this.defaultHiTargetBitrateKbps=s?2e3:1200,this.defaultLowTargetBitrateKbps=s?500:300}addObserver(s){}removeObserver(s){}forEachObserver(s){}constructor(s,a){this.encodingParams=a,this.enableUhdContent=!1,this.defaultHiTargetBitrateKbps=1200,this.defaultLowTargetBitrateKbps=300}},"DefaultSimulcastUplinkPolicyForContentShare");l.default=v},3423911843:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(s,a,i,e){function t(r){return r instanceof i?r:new i(function(o){o(r)})}return n(t,"adopt"),new(i||(i=Promise))(function(r,o){function f(d){try{p(e.next(d))}catch(y){o(y)}}n(f,"fulfilled");function h(d){try{p(e.throw(d))}catch(y){o(y)}}n(h,"rejected");function p(d){d.done?r(d.value):t(d.value).then(f,h)}n(p,"step"),p((e=e.apply(s,a||[])).next())})},m=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(8261422434));let g=n(class _u{reset(){this.numberOfPublishedVideoSources=void 0,this.optimalParameters=new v.default(0,0,0,0,!1),this.parametersInEffect=new v.default(0,0,0,0,!1),this.encodingParamMap.set(_u.encodingMapKey,{maxBitrate:0})}updateConnectionMetric(a){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(a){var i;let e=!0;this.transceiverController&&(e=this.transceiverController.hasVideoInput());const t=a.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+(e?1:0),r=a.numberOfParticipants();if(this.numParticipants===r&&this.numberOfPublishedVideoSources===t){(i=this.logger)===null||i===void 0||i.debug("Skipping update index; Number of participants has not changed");return}this.numberOfPublishedVideoSources=t,this.numParticipants=r,this.updateOptimalParameters()}wantsResubscribe(){return!this.parametersInEffect.equal(this.optimalParameters)}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}updateOptimalParameters(){let a=1;if(this.transceiverController){const i=this.getStreamCaptureSetting();i&&(a=this.calculateEncodingParameters(i).scaleResolutionDownBy)}this.optimalParameters=new v.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1,a,this.enableSVC&&this.numParticipants>2&&this.isUsingSVCCodec)}captureWidth(){let a=640;return this.getNumberOfPublishedVideoSources()>4&&(a=320),a}captureHeight(){let a=384;return this.getNumberOfPublishedVideoSources()>4&&(a=192),a}captureFrameRate(){return 15}maxBandwidthKbps(){if(this.hasBandwidthPriority)return Math.trunc(this.idealMaxBandwidthKbps);let a=0;return this.getNumberOfPublishedVideoSources()<=2?a=this.idealMaxBandwidthKbps:this.getNumberOfPublishedVideoSources()<=4?a=this.idealMaxBandwidthKbps*2/3:a=(544/11+14880/(11*this.getNumberOfPublishedVideoSources()))/600*this.idealMaxBandwidthKbps,Math.trunc(a)}setIdealMaxBandwidthKbps(a){this.idealMaxBandwidthKbps=a}setHasBandwidthPriority(a){this.hasBandwidthPriority=a}setTransceiverController(a){this.transceiverController=a}setSVCEnabled(a){var i;this.enableSVC=a,(i=this.logger)===null||i===void 0||i.info(`setSVCEnabled, enable: ${a}}`)}setHighResolutionFeatureEnabled(a){this.enableHighResolutionFeature=a}updateTransceiverController(){return u(this,void 0,void 0,function*(){const a=this.getStreamCaptureSetting();if(!a)return;const i=this.calculateEncodingParameters(a);this.shouldUpdateEndcodingParameters(i)&&(this.encodingParamMap.set(_u.encodingMapKey,i),this.transceiverController.setEncodingParameters(this.encodingParamMap))})}shouldUpdateEndcodingParameters(a){var i,e;const t=(e=(i=this.transceiverController.localVideoTransceiver().sender.getParameters())===null||i===void 0?void 0:i.encodings)===null||e===void 0?void 0:e[0];return a.maxBitrate!==(t==null?void 0:t.maxBitrate)||a.scaleResolutionDownBy!==(t==null?void 0:t.scaleResolutionDownBy)||(a==null?void 0:a.scalabilityMode)!==(t==null?void 0:t.scalabilityMode)}calculateEncodingParameters(a){var i,e,t;const r=this.maxBandwidthKbps()*1e3;let o=1,f=720;if(a.height!==void 0&&a.width!==void 0&&this.scaleResolution&&!this.hasBandwidthPriority&&this.getNumberOfPublishedVideoSources()>2&&(f=_u.targetHeightArray[Math.min(this.getNumberOfPublishedVideoSources(),_u.targetHeightArray.length-1)][this.enableHighResolutionFeature?1:0],f===480&&(!((i=this.browserBehavior)===null||i===void 0)&&i.disable480pResolutionScaleDown())&&(f=360),o=Math.max(Math.min(a.height,a.width)/f,1),(e=this.logger)===null||e===void 0||e.info(`Resolution scale factor is ${o} for capture resolution ${a.width}x${a.height}. New dimension is ${a.width/o}x${a.height/o}`)),this.enableSVC){let h;return this.numParticipants>=0&&this.numParticipants<3||!this.isUsingSVCCodec?h="L1T1":h="L3T3",(t=this.logger)===null||t===void 0||t.info(`calculateEncodingParameters: SVC: ${this.enableSVC}    participants: ${this.numParticipants}     publishers: ${this.getNumberOfPublishedVideoSources()}     bitrate: ${r}  targetHeight: ${f}  scalabilityMode: ${h}   isUsingSVCCodec: ${this.isUsingSVCCodec}`),{scaleResolutionDownBy:o,maxBitrate:r,scalabilityMode:h}}else return{scaleResolutionDownBy:o,maxBitrate:r}}getStreamCaptureSetting(){var a,i,e,t;return(t=(e=(i=(a=this.transceiverController)===null||a===void 0?void 0:a.localVideoTransceiver())===null||i===void 0?void 0:i.sender)===null||e===void 0?void 0:e.track)===null||t===void 0?void 0:t.getSettings()}getNumberOfPublishedVideoSources(){var a;return(a=this.numberOfPublishedVideoSources)!==null&&a!==void 0?a:0}wantsVideoDependencyDescriptorRtpHeaderExtension(){return this.enableSVC}setMeetingSupportedVideoSendCodecs(a,i){const e=a??i,t=e.length>0&&_u.SVCCodecNames.includes(e[0].codecName);t!==this.isUsingSVCCodec&&(this.isUsingSVCCodec=t,this.updateOptimalParameters())}constructor(a,i=!0,e=void 0,t=void 0){this.selfAttendeeId=a,this.scaleResolution=i,this.logger=e,this.browserBehavior=t,this.numberOfPublishedVideoSources=void 0,this.idealMaxBandwidthKbps=1500,this.hasBandwidthPriority=!1,this.encodingParamMap=new Map,this.enableHighResolutionFeature=!1,this.enableSVC=!1,this.isUsingSVCCodec=!0,this.numParticipants=0,this.reset()}},"NScaleVideoUplinkBandwidthPolicy");l.default=g,g.encodingMapKey="video",g.targetHeightArray=[[0,0],[0,0],[0,0],[540,720],[540,720],[480,540],[480,540],[480,540],[480,540],[360,480],[360,480],[360,480],[360,480],[270,360],[270,360],[270,360],[270,360],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270]],g.SVCCodecNames=["VP9"]},9128807920:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(8261422434));let v=n(class{updateConnectionMetric(s){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(s){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){return new m.default(0,0,0,0,!1)}maxBandwidthKbps(){return 0}setIdealMaxBandwidthKbps(s){}setHasBandwidthPriority(s){}setHighResolutionFeatureEnabled(s){}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!1}constructor(){}},"NoVideoUplinkBandwidthPolicy");l.default=v},1622249334:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});function c(m){return m.map(v=>typeof v=="object"?JSON.stringify(v):`${v}`).join(" ")}n(c,"stringify");let u=n(class{debug(){for(var v=arguments.length,g=new Array(v),s=0;s<v;s++)g[s]=arguments[s];this.base.debug(c(g))}info(){for(var v=arguments.length,g=new Array(v),s=0;s<v;s++)g[s]=arguments[s];this.base.info(c(g))}warn(){for(var v=arguments.length,g=new Array(v),s=0;s<v;s++)g[s]=arguments[s];this.base.warn(c(g))}error(){for(var v=arguments.length,g=new Array(v),s=0;s<v;s++)g[s]=arguments[s];this.base.error(c(g))}constructor(v){this.base=v}},"LoggerAdapter");l.default=u},8525594090:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(r,o,f,h){function p(d){return d instanceof f?d:new f(function(y){y(d)})}return n(p,"adopt"),new(f||(f=Promise))(function(d,y){function S(C){try{_(h.next(C))}catch(w){y(w)}}n(S,"fulfilled");function b(C){try{_(h.throw(C))}catch(w){y(w)}}n(b,"rejected");function _(C){C.done?d(C.value):p(C.value).then(S,b)}n(_,"step"),_((h=h.apply(r,o||[])).next())})},m=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusDeviceTransformer=void 0;const v=c(8019356695),g=c(840544383),s=m(c(8066052849)),a=m(c(1622249334)),i=m(c(282836061)),e=m(c(9502253674));let t=n(class Dl{static isSupported(o,f){var h,p;const d=Dl.defaultFetchBehavior(),y=f!=null&&f.logger?new a.default(f.logger):void 0,S={fetchBehavior:d,logger:y};if(g.isIFramed()){if((f==null?void 0:f.allowIFrame)===!1)return(h=f==null?void 0:f.logger)===null||h===void 0||h.error("Amazon Voice Focus support check inside iframe: not supported."),Promise.resolve(!1);(p=f==null?void 0:f.logger)===null||p===void 0||p.warn("Amazon Voice Focus support check inside iframe: not recommended.")}return v.VoiceFocus.isSupported(Dl.augmentSpec(o),S)}static create(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=arguments.length>2?arguments[2]:void 0,p=arguments.length>3?arguments[3]:void 0,d=arguments.length>4?arguments[4]:void 0;var y,S,b;return u(this,void 0,void 0,function*(){p&&p.Meeting.Meeting&&(p=p.Meeting);const _=((b=(S=(y=p==null?void 0:p.Meeting)===null||y===void 0?void 0:y.MeetingFeatures)===null||S===void 0?void 0:S.Audio)===null||b===void 0?void 0:b.EchoReduction)==="AVAILABLE",C=h&&h.supported===!0&&h.model.name==="ns_es"&&!_,w=o.name==="ns_es"&&!_;if(C||w)throw new Error("Echo Reduction requested but not enabled.");const R=new Dl(o,f,h);return yield R.init(),R})}static configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return u(this,void 0,void 0,function*(){return new Dl(o,f,void 0).configure(!0)})}getConfiguration(){return this.configuration}isSupported(){return this.supported}createTransformDevice(o,f){return u(this,void 0,void 0,function*(){if(this.supported)try{const[p,d]=yield this.allocateVoiceFocus(!0),y=Object.assign(Object.assign({},f),{es:this.spec.name==="ns_es"});return new i.default(o,p,d,y)}catch{return}})}static destroyVoiceFocus(o){var f;return u(this,void 0,void 0,function*(){(f=o==null?void 0:o.vf)===null||f===void 0||f.destroy()})}static augmentSpec(o){return!o||!o.assetGroup&&!o.revisionID?Object.assign(Object.assign({},o),{assetGroup:Dl.currentSDKAssetGroup()}):o}configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const f={fetchBehavior:this.fetchBehavior,preResolve:o,logger:this.vfLogger};return v.VoiceFocus.configure(this.spec,f)})}init(){var o;return u(this,void 0,void 0,function*(){this.configuration||(this.configuration=this.configure());const f=yield this.configuration;if(!f.supported){this.supported=!1;return}this.pendingVoiceFocus=this.createVoiceFocus(f,this.preload);try{yield this.pendingVoiceFocus}catch(h){(o=this.logger)===null||o===void 0||o.error(`Unable to initialize Amazon Voice Focus: ${h}`),this.supported=!1}})}createVoiceFocus(o,f){return u(this,void 0,void 0,function*(){const h=new e.default;return this.vf=yield v.VoiceFocus.init(o,{delegate:h,preload:f,logger:this.vfLogger}),[this.vf,h]})}allocateVoiceFocus(o){return u(this,void 0,void 0,function*(){if(!this.supported)throw new Error("Not supported.");if(this.pendingVoiceFocus){const f=this.pendingVoiceFocus;return this.pendingVoiceFocus=void 0,f}return this.createVoiceFocus(yield this.configuration,o)})}static majorVersion(){return s.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|[1-9][0-9]*)/)[0]}static majorMinorVersion(){return s.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|(?:[1-9][0-9]*))\.(?:0|[1-9][0-9]*)/)[0]}static currentSDKAssetGroup(){const o=this.majorVersion();return o?`sdk-${o}`:"stable-v1"}static defaultFetchBehavior(){const o=Dl.majorMinorVersion()||"unknown",f=s.default.sdkUserAgentLowResolution;return{escapedQueryString:`sdk=${encodeURIComponent(o)}&ua=${encodeURIComponent(f)}`}}constructor(o,{preload:f=!0,logger:h,fetchBehavior:p=Dl.defaultFetchBehavior()},d){this.spec=o,this.supported=!0,this.logger=h,this.vfLogger=h?new a.default(h):void 0,this.preload=f,this.fetchBehavior=p,this.spec=Dl.augmentSpec(this.spec),d&&(this.configuration=Promise.resolve(d))}},"VoiceFocusDeviceTransformer");l.VoiceFocusDeviceTransformer=t,l.default=t},282836061:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})},m=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const v=m(c(8351168186));let g=n(class Yv{getInnerDevice(){return this.device}mute(i){return u(this,void 0,void 0,function*(){this.node&&(i?yield this.node.disable():yield this.node.enable())})}stop(){return u(this,void 0,void 0,function*(){this.node&&(this.node.disconnect(),yield this.node.stop())})}chooseNewInnerDevice(i){return u(this,void 0,void 0,function*(){return this.device===i&&!s(i)?this:new Yv(i,this.voiceFocus,this.delegate,this.nodeOptions,this.failed,this.node,this.browserBehavior,this.farEndStreamToAudioSourceNode,this.mixDestNode,this.mixSourceNode)})}intrinsicDevice(){return u(this,void 0,void 0,function*(){if(this.failed)return this.device;const i=this.nodeOptions.es,e={echoCancellation:!i,googEchoCancellation:!i,googEchoCancellation2:!i,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googNoiseSuppression2:!1};let t;return this.nodeOptions&&this.nodeOptions.agc!==void 0?t=this.nodeOptions.agc.useBuiltInAGC:t=!0,e.autoGainControl=t,e.googAutoGainControl=t,e.googAutoGainControl2=t,this.device?typeof this.device=="string"?(this.browserBehavior.requiresNoExactMediaStreamConstraints()?e.deviceId=this.device:e.deviceId={exact:this.device},e):this.device.id?this.device:Object.assign(Object.assign({},this.device),e):e})}createAudioNode(i){var e,t;return u(this,void 0,void 0,function*(){if(((e=this.node)===null||e===void 0?void 0:e.context)===i)return{start:this.node,end:this.node};const o=Object.assign({enabled:!0,agc:{useVoiceFocusAGC:!1}},this.nodeOptions);try{if((t=this.node)===null||t===void 0||t.disconnect(),this.node=yield this.voiceFocus.createNode(i,o),this.nodeOptions.es){this.mixDestNode=new MediaStreamAudioDestinationNode(i,{channelCount:1,channelCountMode:"explicit"});for(const p of this.farEndStreamToAudioSourceNode.keys())this.assignFarEndStreamToAudioSourceNode(p);this.createMixSourceNode()}const f=this.node,h=this.node;return{start:f,end:h}}catch(f){throw this.failed=!0,this.delegate.onFallback(this,f),f}})}observeMeetingAudio(i){return u(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;i.addAudioMixObserver(this);const e=yield i.getCurrentMeetingAudioStream();e&&this.addFarEndStream(e)})}unObserveMeetingAudio(i){return u(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;i.removeAudioMixObserver(this);const e=yield i.getCurrentMeetingAudioStream();e&&this.removeFarendStream(e)})}addObserver(i){this.delegate.addObserver(i)}removeObserver(i){this.delegate.removeObserver(i)}addFarEndStream(i){return u(this,void 0,void 0,function*(){!this.nodeOptions.es||!i||this.farEndStreamToAudioSourceNode.has(i)||(this.node?this.assignFarEndStreamToAudioSourceNode(i):this.farEndStreamToAudioSourceNode.set(i,null))})}removeFarendStream(i){var e;return u(this,void 0,void 0,function*(){(e=this.farEndStreamToAudioSourceNode.get(i))===null||e===void 0||e.disconnect(),this.farEndStreamToAudioSourceNode.delete(i)})}meetingAudioStreamBecameActive(i){return u(this,void 0,void 0,function*(){this.addFarEndStream(i)})}meetingAudioStreamBecameInactive(i){return u(this,void 0,void 0,function*(){this.removeFarendStream(i)})}assignFarEndStreamToAudioSourceNode(i){const e=this.node.context.createMediaStreamSource(i);e.channelCount=1,e.channelCountMode="explicit",this.farEndStreamToAudioSourceNode.set(i,e),e.connect(this.mixDestNode,0)}createMixSourceNode(){this.mixSourceNode=this.node.context.createMediaStreamSource(this.mixDestNode.stream),this.mixSourceNode.channelCount=1,this.mixSourceNode.channelCountMode="explicit",this.mixSourceNode.connect(this.node,0,1)}constructor(i,e,t,r,o=!1,f=void 0,h=new v.default,p=new Map,d=void 0,y=void 0){this.device=i,this.voiceFocus=e,this.delegate=t,this.nodeOptions=r,this.failed=o,this.node=f,this.browserBehavior=h,this.farEndStreamToAudioSourceNode=p,this.mixDestNode=d,this.mixSourceNode=y}},"VoiceFocusTransformDevice");function s(a){return a==="default"?!0:!a||typeof a!="object"?!1:"deviceId"in a&&a.deviceId==="default"||"id"in a&&a.id==="default"}n(s,"isDefaultDevice"),l.default=g},9502253674:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class{addObserver(m){this.observers.add(m)}removeObserver(m){this.observers.delete(m)}onFallback(m,v){var g;for(const s of this.observers)(g=s.voiceFocusFellBackToInnerStream)===null||g===void 0||g.call(s,m,v)}onCPUWarning(){var m;for(const v of this.observers)(m=v.voiceFocusInsufficientResources)===null||m===void 0||m.call(v)}constructor(){this.observers=new Set}},"VoiceFocusTransformDeviceDelegate");l.default=c},338869682:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let c=n(class Wf{onReconnect(){this.sessionReconnected=!0}sendRealtimeUpdatesForAudioStreamIdInfo(m){let v=0;for(const g of m.streams){const s=!!g.attendeeId,a=!!g.externalUserId,i=g.hasOwnProperty("muted"),e=!!g.dropped;if(s){this.attendeeIdToStreamId[g.attendeeId]&&this.attendeeIdToStreamId[g.attendeeId]<g.audioStreamId&&delete this.attendeeIdToStreamId[g.attendeeId],this.streamIdToAttendeeId[g.audioStreamId]=g.attendeeId;const t=a?g.externalUserId:g.attendeeId;this.streamIdToExternalUserId[g.audioStreamId]=t,this.attendeeIdToStreamId[g.attendeeId]=g.audioStreamId,this.realtimeController.realtimeSetAttendeeIdPresence(g.attendeeId,!0,t,!1,{attendeeIndex:v++,attendeesInFrame:m.streams.length})}if(i){const t=this.streamIdToAttendeeId[g.audioStreamId],r=this.streamIdToExternalUserId[g.audioStreamId];this.realtimeController.realtimeUpdateVolumeIndicator(t,null,g.muted,null,r)}if(!s&&!i){const t=this.streamIdToAttendeeId[g.audioStreamId];if(t){const r=this.streamIdToExternalUserId[g.audioStreamId];delete this.streamIdToAttendeeId[g.audioStreamId],delete this.streamIdToExternalUserId[g.audioStreamId],delete this.warnedAboutMissingStreamIdMapping[g.audioStreamId],this.attendeeIdToStreamId[t]===g.audioStreamId&&delete this.attendeeIdToStreamId[t];let o=!1;for(const f of Object.keys(this.streamIdToAttendeeId)){const h=parseInt(f);if(h>g.audioStreamId&&this.streamIdToAttendeeId[h]===t){o=!0;break}}o||this.realtimeController.realtimeSetAttendeeIdPresence(t,!1,r,e,{attendeeIndex:v++,attendeesInFrame:m.streams.length})}}}this.sessionReconnected&&(this.cleanUpState(m),this.sessionReconnected=!1)}cleanUpState(m){const v=Object.values(this.streamIdToAttendeeId),g=m.streams.map(a=>a.attendeeId),s=v.filter(a=>!g.includes(a));for(const[a,i]of s.entries()){const e=this.attendeeIdToStreamId[i],t=this.streamIdToExternalUserId[e];if(delete this.streamIdToAttendeeId[e],delete this.streamIdToExternalUserId[e],delete this.warnedAboutMissingStreamIdMapping[e],delete this.attendeeIdToStreamId[i],i===this.selfAttendeeId){this.logger.warn("the volume indicator adapter cleans up the current attendee (presence = false) after reconnection");continue}this.realtimeController.realtimeSetAttendeeIdPresence(i,!1,t,!1,{attendeeIndex:a,attendeesInFrame:i.length})}}sendRealtimeUpdatesForAudioMetadata(m){let v=null,g=null;for(const s of m.attendeeStates){const a=this.attendeeIdForStreamId(s.audioStreamId);s.hasOwnProperty("volume")&&(v===null&&(v={}),a!==null&&(v[a]=this.normalizedVolume(s))),s.hasOwnProperty("signalStrength")&&(g===null&&(g={}),a!==null&&(g[a]=this.normalizedSignalStrength(s)))}this.applyRealtimeUpdatesForAudioMetadata(v,g)}normalizedVolume(m){const g=1-(-m.volume-this.maxVolumeDecibels)/(this.minVolumeDecibels-this.maxVolumeDecibels);return Math.min(Math.max(g,0),1)}normalizedSignalStrength(m){const v=m.signalStrength/Wf.MAX_SIGNAL_STRENGTH_LEVELS;return Math.min(Math.max(v,0),1)}applyRealtimeUpdatesForAudioMetadata(m,v){for(const g in this.streamIdToAttendeeId){const s=this.streamIdToAttendeeId[g],a=this.streamIdToExternalUserId[g];let i=null,e=null;m!==null&&(m.hasOwnProperty(s)?i=m[s]:i=Wf.IMPLICIT_VOLUME),v!==null&&(v.hasOwnProperty(s)?e=v[s]:e=Wf.IMPLICIT_SIGNAL_STRENGTH),(i!==null||e!==null)&&this.realtimeController.realtimeUpdateVolumeIndicator(s,i,null,e,a)}}attendeeIdForStreamId(m){if(m===0)return null;const v=this.streamIdToAttendeeId[m];return v||(this.warnedAboutMissingStreamIdMapping[m]||(this.warnedAboutMissingStreamIdMapping[m]=!0,this.logger.warn(`volume indicator stream id ${m} seen before being defined`)),null)}constructor(m,v,g,s,a){this.logger=m,this.realtimeController=v,this.minVolumeDecibels=g,this.maxVolumeDecibels=s,this.selfAttendeeId=a,this.streamIdToAttendeeId={},this.streamIdToExternalUserId={},this.warnedAboutMissingStreamIdMapping={},this.attendeeIdToStreamId={},this.sessionReconnected=!1}},"DefaultVolumeIndicatorAdapter");l.default=c,c.MAX_SIGNAL_STRENGTH_LEVELS=2,c.IMPLICIT_VOLUME=0,c.IMPLICIT_SIGNAL_STRENGTH=1},8796204466:function(H,l,c){"use strict";var u=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(c(8066052849)),v=u(c(2686893898));let g=n(class{create(a,i,e){this.connection=new WebSocket(e?a:m.default.urlWithVersion(a),i),this.connection.binaryType="arraybuffer"}send(a){if(!this.connection)return this.logger.error("WebSocket not yet created or already destroyed."),!1;try{return a instanceof Uint8Array?this.connection.send(a.buffer):this.connection.send(a),!0}catch(i){return this.logger.debug(()=>`send error: ${i.message}, websocket state=${v.default[this.readyState()]}`),!1}}close(a,i){var e;(e=this.connection)===null||e===void 0||e.close(a,i)}destroy(){this.connection=void 0}addEventListener(a,i){if(!this.connection){this.logger.warn("Cannot add event listener with no WebSocket connection.");return}this.connection.addEventListener(a,i)}removeEventListener(a,i){var e;(e=this.connection)===null||e===void 0||e.removeEventListener(a,i)}readyState(){if(!this.connection)return v.default.None;switch(this.connection.readyState){case WebSocket.CONNECTING:return v.default.Connecting;case WebSocket.OPEN:return v.default.Open;case WebSocket.CLOSING:return v.default.Closing;case WebSocket.CLOSED:return v.default.Closed}}constructor(a){this.logger=a}},"DefaultWebSocketAdapter");l.default=g},2686893898:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.WebSocketReadyState=void 0;var c;(function(u){u[u.None=0]="None",u[u.Connecting=1]="Connecting",u[u.Open=2]="Open",u[u.Closing=3]="Closing",u[u.Closed=4]="Closed"})(c=l.WebSocketReadyState||(l.WebSocketReadyState={})),l.default=c},1716026697:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(_,C,w,R){function O(D){return D instanceof w?D:new w(function(I){I(D)})}return n(O,"adopt"),new(w||(w=Promise))(function(D,I){function M(j){try{N(R.next(j))}catch(B){I(B)}}n(M,"fulfilled");function k(j){try{N(R.throw(j))}catch(B){I(B)}}n(k,"rejected");function N(j){j.done?D(j.value):O(j.value).then(M,k)}n(N,"step"),N((R=R.apply(_,C||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.decideModel=l.measureAndDecideExecutionApproach=void 0;const m=c(6582301018),v=c(8113008952),g=3,s=2.5,a=2.63,i=.6,e=.65,t=.5,r=.7,o={wasm:{noSupport:.07,inline:{c100:1,c50:.36,c20:.16,c10:.07},worker:{c100:.5,c50:.18,c20:.08,c10:.06}},simd:{noSupport:.1,inline:{c100:1,c50:.43,c20:.3,c10:.2},worker:{c100:.5,c50:.21,c20:.15,c10:.1}}};let f=n(class{roundtrip(C,w,R){return new Promise((O,D)=>{this.worker.then(I=>{let M;M=n(k=>{const{message:N,key:j}=k.data;N===w&&j===R&&(I.removeEventListener("message",M),O(k.data))},"listener"),I.addEventListener("message",M),I.postMessage(C)}).catch(I=>{var M;(M=this.logger)===null||M===void 0||M.error("Failed to load worker.",I),D(I)})})}supportsSIMD(C){const w="simd",R=C||`${this.fetchConfig.paths.wasm}simd-v1.wasm`,O={message:"supports-simd",fetchBehavior:this.fetchBehavior,path:R,key:w};return this.roundtrip(O,"simd-support",w).then(D=>D.supports)}measure(C,w){const R=`${this.fetchConfig.paths.wasm}bench-v1.wasm`,O=`${this.fetchConfig.paths.wasm}bench-v1_simd.wasm`,D=C?O:R,I=`bench:${C}`,M={message:"measure",fetchBehavior:this.fetchBehavior,budget:w,path:D,key:I};return this.roundtrip(M,"measurement",I).then(k=>{if(k.measurement)return k.measurement;throw new Error("Failed to measure.")})}stop(){this.worker.then(C=>{var w;(w=this.logger)===null||w===void 0||w.debug("Stopping estimator worker."),C.terminate()}).catch(C=>{})}constructor(C,w){this.fetchConfig=C,this.logger=w;const R=`${C.paths.workers}estimator-v1.js`;this.fetchBehavior={headers:C.headers,escapedQueryString:C.escapedQueryString},this.worker=m.loadWorker(R,"VoiceFocusEstimator",this.fetchBehavior,w)}},"Estimator");const h=n((_,C)=>_===1?i:C==="quality"?e*_:t*_,"inlineScoreMultiplier"),p=n(function(_){let{supportsSIMD:C,supportsSAB:w,duration:R,executionPreference:O="auto",simdPreference:D,variantPreference:I="auto",namePreference:M="default",usagePreference:k,executionQuantaPreference:N=g}=_,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,B=arguments.length>2?arguments[2]:void 0;const Q=D==="force"||D!=="disable"&&C,oe=R!==-1,$=oe?(Q?s:a)/R:0,he=Q?j.simd:j.wasm,Ae=oe?h(N,k)*$:0,Ee=oe?r*$:0,Oe=M,be=n(Rt=>({supported:!1,reason:Rt}),"unsupported");if(oe){if($<he.noSupport)return be(`Performance score ${$} worse than threshold ${he.noSupport}.`)}else if(O==="auto"||I==="auto")return be(`Missing explicit execution (${O}) or variant (${I}) preference, but no scoring performed.`);B==null||B.debug(`Bench duration ${R} yields inline score ${Ae} and worker score ${Ee}.`);const De=n((Rt,Ze,mt)=>({supported:!0,useSIMD:Q,processor:Rt,executionApproach:Ze,variant:mt,executionQuanta:Ze==="inline"?N:void 0,name:Oe}),"succeed"),ut=n((Rt,Ze,mt)=>Ze!=="auto"?!oe||Rt>mt[Ze]?Ze:"failed":Rt>mt.c100?"c100":Rt>mt.c50?"c50":Rt>mt.c20?"c20":Rt>mt.c10?"c10":"failed","resolveVariant"),St=n(Rt=>{switch(Rt||"auto"){case"auto":{let Ze=St("inline"),mt=St("worker");return B==null||B.debug(`Reducing auto preference: ${JSON.stringify(Ze)} vs ${JSON.stringify(mt)}`),Ze.supported===!1||mt.supported===!1?mt:Ze.variant===mt.variant||Ze.variant==="c50"?Ze:mt}case"worker":return v.supportsSharedArrayBuffer(globalThis,window,B)?St("worker-sab"):St("worker-postMessage");case"inline":{const Ze=ut(Ae,I,he.inline);return Ze==="failed"?be(`Performance score ${Ae} not sufficient for inline use with variant preference ${I}.`):De("voicefocus-inline-processor","inline",Ze)}case"worker-sab":{if(!w){const mt="Requested worker-sab but no SharedArrayBuffer support.";return B==null||B.warn(mt),{supported:!1,reason:mt}}const Ze=ut(Ee,I,he.worker);return Ze==="failed"?be(`Performance score ${Ee} not sufficient for worker use with variant preference ${I}.`):De("voicefocus-worker-sab-processor","worker-sab",Ze)}case"worker-postMessage":{const Ze=ut(Ee,I,he.worker);if(Ze==="failed")return be(`Performance score ${Ee} not sufficient for worker use.`);if(Oe==="ns_es"){const mt="Requested echo suppression but postMessage executor does not support it.";return B==null||B.warn(mt),{supported:!1,reason:mt}}return De("voicefocus-worker-postMessage-processor","worker-postMessage",Ze)}}},"reducePreference");return St(O)},"decideExecutionApproach"),d=n((_,C,w,R)=>u(void 0,void 0,void 0,function*(){const O={supportsSIMD:_,supportsSAB:v.supportsSharedArrayBuffer(globalThis,window,w),duration:-1};if(_)return w==null||w.info("Supports SIMD: true (force)"),O;const D=!R,I=R||new f(C,w);try{const M=!v.isOldChrome(window,w)&&(yield I.supportsSIMD());return w==null||w.info(`Supports SIMD: ${M} (force: ${_})`),O.supportsSIMD=M,O}finally{D&&I.stop()}}),"featureCheck"),y=n((_,C,w,R)=>u(void 0,void 0,void 0,function*(){const O=new f(C,R);try{const D=yield d(_,C,R,O);if(D.supportsSIMD)try{return D.duration=yield O.measure(!0,w),R==null||R.info("SIMD timing:",D.duration),D}catch{R==null||R.warn("Failed SIMD estimation; falling back to non-SIMD."),D.supportsSIMD=!1}return D.duration=yield O.measure(!1,w),R==null||R.info("No-SIMD timing:",D.duration),D}catch(D){throw R==null||R.error("Could not feature check.",D),D}finally{O.stop()}}),"estimateAndFeatureCheck"),S=n(function(_,C,w){let R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:o;return u(void 0,void 0,void 0,function*(){let O=_.executionPreference;const{usagePreference:D,variantPreference:I,namePreference:M,simdPreference:k,estimatorBudget:N,executionQuantaPreference:j}=_;D==="interactivity"&&O!=="inline"&&(w==null||w.debug(`Overriding execution preference ${O} to reflect interactivity preference.`),O="inline");const B=k==="force",J=I!=="auto",Q=O!=="auto";let oe;try{J&&Q?oe=yield d(B,C,w):oe=yield y(B,C,N,w)}catch($){throw w==null||w.error("Could not load estimator.",$),new Error("Could not load Voice Focus estimator.")}return p(Object.assign(Object.assign({},oe),{simdPreference:k,executionPreference:O,variantPreference:I,namePreference:M,usagePreference:D,executionQuantaPreference:j}),R,w)})},"measureAndDecideExecutionApproach");l.measureAndDecideExecutionApproach=S;const b=n(_=>{let{category:C,name:w,variant:R,simd:O,url:D}=_;return`${C}-${w}-${R}-v1${O?"_simd":""}`},"decideModel");l.decideModel=b},4179955699:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isValidRevisionID=l.isValidAssetGroup=l.resolveURL=l.addQueryParams=l.withQueryString=l.withRequestHeaders=l.fetchWithBehavior=void 0;function c(e,t,r){if(!r)return fetch(e,t);const o=m(e,r),f=u(t,r);return fetch(o,f)}n(c,"fetchWithBehavior"),l.fetchWithBehavior=c;function u(e,t){return t!=null&&t.headers?e?Object.assign(Object.assign({},e),{headers:Object.assign(Object.assign({},e.headers||{}),t.headers)}):{headers:t.headers}:e}n(u,"withRequestHeaders"),l.withRequestHeaders=u;function m(e,t){if(!(t!=null&&t.escapedQueryString))return e;const r=e.lastIndexOf("?")!==-1;return`${e}${r?"&":"?"}${t.escapedQueryString}`}n(m,"withQueryString"),l.withQueryString=m;function v(e,t){const r=Object.keys(t);if(!r.length)return e;const o=new URLSearchParams(e==null?void 0:e.escapedQueryString);for(const f of r)o.append(f,t[f]);return Object.assign(Object.assign({},e),{escapedQueryString:o.toString()})}n(v,"addQueryParams"),l.addQueryParams=v;const g={method:"HEAD",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"origin"};function s(e,t){return c(e,g,t).then(r=>r.redirected?r.url:e)}n(s,"resolveURL"),l.resolveURL=s;function a(e){return!!e&&/^[-.a-zA-Z0-9]+$/.test(e)}n(a,"isValidAssetGroup"),l.isValidAssetGroup=a;function i(e){return!!e&&/^[123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ]{22}$/.test(e)}n(i,"isValidRevisionID"),l.isValidRevisionID=i},6582301018:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.loadWorker=void 0;const u=c(4179955699),m={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"},v=n((g,s,a,i)=>{i==null||i.debug(`Loading ${s} worker from ${g}.`);let e=!1;try{e=self.origin===new URL(g).origin}catch(t){i==null||i.error("Could not compare origins.",t)}if(e){const t=u.withQueryString(g,a);return Promise.resolve(new Worker(t,{name:s}))}return u.fetchWithBehavior(g,m,a).then(t=>{if(t.ok)return t.blob().then(r=>new Worker(window.URL.createObjectURL(r)));throw new Error("Fetch failed.")})},"loadWorker");l.loadWorker=v},8113008952:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(d,y,S,b){function _(C){return C instanceof S?C:new S(function(w){w(C)})}return n(_,"adopt"),new(S||(S=Promise))(function(C,w){function R(I){try{D(b.next(I))}catch(M){w(M)}}n(R,"fulfilled");function O(I){try{D(b.throw(I))}catch(M){w(M)}}n(O,"rejected");function D(I){I.done?C(I.value):_(I.value).then(R,O)}n(D,"step"),D((b=b.apply(d,y||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.isOldChrome=l.supportsWASMStreaming=l.supportsSharedArrayBuffer=l.supportsWASM=l.supportsAudioWorklet=l.supportsWorker=l.supportsVoiceFocusWorker=l.supportsWASMPostMessage=l.isSafari=void 0;const m=c(6582301018),v=n(function(){return!!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/)},"isChrome"),g=n(function(){const y=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent,S=y.match(/Safari\//),b=y.match(/Chrom(?:e|ium)\//);return!!(S&&!b)},"isSafari");l.isSafari=g;const s=n(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;return l.isSafari(d)?!1:v(d)?(h(d)||0)<95:!0},"supportsWASMPostMessage");l.supportsWASMPostMessage=s;const a=n(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0,S=arguments.length>2?arguments[2]:void 0;return u(void 0,void 0,void 0,function*(){if(!l.supportsWorker(d,S))return!1;const b=`${y.paths.workers}worker-v1.js`;try{const _=yield m.loadWorker(b,"VoiceFocusTestWorker",y,S);try{_.terminate()}catch(C){S==null||S.debug("Failed to terminate worker.",C)}return!0}catch(_){return S==null||S.info("Failed to fetch and instantiate test worker",_),!1}})},"supportsVoiceFocusWorker");l.supportsVoiceFocusWorker=a;const i=n(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!d.Worker}catch(S){return y==null||y.info("Does not support Worker",S),!1}},"supportsWorker");l.supportsWorker=i;const e=n(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!d.AudioWorklet&&!!d.AudioWorkletNode}catch(S){return y==null||y.info("Does not support Audio Worklet",S),!1}},"supportsAudioWorklet");l.supportsAudioWorklet=e;const t=n(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!d.WebAssembly&&(!!d.WebAssembly.compile||!!d.WebAssembly.compileStreaming)}catch(S){return y==null||y.info("Does not support WASM",S),!1}},"supportsWASM");l.supportsWASM=t;const r=n(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:globalThis,S=arguments.length>2?arguments[2]:void 0;try{return!!d.SharedArrayBuffer&&(!!y.chrome||!!d.crossOriginIsolated)}catch{return S==null||S.info("Does not support SharedArrayBuffer."),!1}},"supportsSharedArrayBuffer");l.supportsSharedArrayBuffer=r;const o=n(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;var S;try{return!!(!((S=d.WebAssembly)===null||S===void 0)&&S.compileStreaming)}catch(b){return y==null||y.info("Does not support WASM streaming compilation",b),!1}},"supportsWASMStreaming");l.supportsWASMStreaming=o;const f=90,h=n(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;try{if(!d.chrome)return}catch{}const y=d.navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/);if(y)return parseInt(y[1],10)},"chromeVersion"),p=n(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;const S=h(d);return S&&S<f?(y==null||y.debug(`Chrome ${S} has incomplete SIMD support.`),!0):!1},"isOldChrome");l.isOldChrome=p},3587844202:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusAudioWorkletNode=void 0;let c=n(class extends(typeof globalThis<"u"&&globalThis.AudioWorkletNode||n(class{},"Sadness")){},"VoiceFocusAudioWorkletNode");l.VoiceFocusAudioWorkletNode=c},8019356695:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(I,M,k,N){function j(B){return B instanceof k?B:new k(function(J){J(B)})}return n(j,"adopt"),new(k||(k=Promise))(function(B,J){function Q(he){try{$(N.next(he))}catch(Ae){J(Ae)}}n(Q,"fulfilled");function oe(he){try{$(N.throw(he))}catch(Ae){J(Ae)}}n(oe,"rejected");function $(he){he.done?B(he.value):j(he.value).then(Q,oe)}n($,"step"),$((N=N.apply(I,M||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getAudioInput=l.createAudioContext=l.VoiceFocus=void 0;const m=c(1716026697),v=c(4179955699),g=c(6582301018),s=c(8113008952),a=c(1074507e3),i=c(4096494996),e=c(1035990965),r={useVoiceFocusAGC:!1,useBuiltInAGC:!0},o="stable-v1",f="https://static.sdkassets.chime.aws",h={processors:`${f}/processors/`,workers:`${f}/workers/`,wasm:`${f}/wasm/`,models:`${f}/wasm/`},p={latencyHint:0},d={channelCount:1,echoCancellation:!0,googEchoCancellation:!0,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googTypingNoiseDetection:!1},y=Object.assign(Object.assign({},d),{autoGainControl:!0,googAutoGainControl:!0,googAutoGainControl2:!0}),S=Object.assign(Object.assign({},d),{autoGainControl:!1,googAutoGainControl:!1,googAutoGainControl2:!1}),b={"voicefocus-worker-sab-processor":{file:"worklet-worker-sab-processor-v1.js",node:i.default},"voicefocus-worker-postMessage-processor":{file:"worklet-worker-postMessage-processor-v1.js",node:e.default},"voicefocus-inline-processor":{file:"worklet-inline-processor-v1.js",node:a.default}},_=n((I,M)=>{if(I!==void 0&&!v.isValidAssetGroup(I))throw new Error(`Invalid asset group ${I}`);if(M!==void 0&&!v.isValidRevisionID(M))throw new Error(`Invalid revision ID ${M}`)},"validateAssetSpec"),C=n((I,M)=>{let k;if(M.useBuiltInAGC?k=y:k=S,!I)return{audio:k};if(!I.audio)return I;if(I.video)throw new Error("Not adding Voice Focus to multi-device getUserMedia call.");return Object.assign(Object.assign({},I),{audio:I.audio===!0?k:Object.assign(Object.assign({},I.audio),k)})},"mungeConstraints"),w=n((I,M)=>`${M.models}${m.decideModel(I)}.wasm`,"urlForModel");let R=n(class Xv{static isSupported(M,k){const{fetchBehavior:N,logger:j}=k||{};if(typeof globalThis>"u")return j==null||j.debug("Browser does not have globalThis."),Promise.resolve(!1);if(!s.supportsAudioWorklet(globalThis,j))return j==null||j.debug("Browser does not support Audio Worklet."),Promise.resolve(!1);if(!s.supportsWASM(globalThis,j))return j==null||j.debug("Browser does not support WASM."),Promise.resolve(!1);s.supportsWASMStreaming(globalThis,j)||j==null||j.debug("Browser does not support streaming WASM compilation.");const{assetGroup:B=o,revisionID:J,paths:Q=h}=M||{};_(B,J);const oe=J?{revisionID:J}:{assetGroup:B},$=v.addQueryParams(N,oe),he=Object.assign(Object.assign({},$),{paths:Q});return s.supportsVoiceFocusWorker(globalThis,he,j)}static mungeExecutionPreference(M,k){const N=M===void 0||M==="auto";if(s.isSafari(globalThis)){if(N||M==="inline")return"inline";if(!N)throw new Error(`Unsupported execution preference ${M}`)}if(M==="worker-sab"&&!s.supportsSharedArrayBuffer(globalThis,globalThis,k))throw new Error(`Unsupported execution preference ${M}`);return M||"auto"}static configure(M,k){return u(this,void 0,void 0,function*(){const{fetchBehavior:N,preResolve:j,logger:B}=k||{},{category:J="voicefocus",name:Q="default",variant:oe="auto",assetGroup:$=o,revisionID:he,simd:Ae="detect",executionPreference:Ee="auto",executionQuantaPreference:Oe,usagePreference:be="interactivity",estimatorBudget:De=100,paths:ut=h,thresholds:St}=M||{};if(B==null||B.debug("Configuring Voice Focus with spec",M),J!==void 0&&J!=="voicefocus")throw new Error(`Unrecognized category ${J}`);if(Q!==void 0&&Q!=="default"&&Q!=="ns_es")throw new Error(`Unrecognized feature name ${Q}`);if(oe!==void 0&&!["auto","c100","c50","c20","c10"].includes(oe))throw new Error(`Unrecognized feature variant ${oe}`);if(Oe!==void 0&&![1,2,3].includes(Oe))throw new Error(`Unrecognized execution quanta preference ${Oe}`);if(_($,he),Ae!==void 0&&!["detect","force","disable"].includes(Ae))throw new Error(`Unrecognized SIMD option ${Ae}`);if(Ee!==void 0&&!["auto","inline","worker","worker-sab","worker-postMessage"].includes(Ee))throw new Error(`Unrecognized execution preference ${Ee}`);if(be!==void 0&&!["quality","interactivity"].includes(be))throw new Error(`Unrecognized usage preference ${be}`);const Rt={executionPreference:this.mungeExecutionPreference(Ee,B),usagePreference:be,executionQuantaPreference:Oe,variantPreference:oe,namePreference:Q,simdPreference:Ae,estimatorBudget:De},Ze=he?{revisionID:he}:{assetGroup:$},mt=v.addQueryParams(N,Ze),At=Object.assign({paths:ut},mt),Vt=yield m.measureAndDecideExecutionApproach(Rt,At,B,St);if(Vt.supported===!1)return{supported:!1,reason:Vt.reason};B==null||B.info("Decided execution approach",Vt);const{useSIMD:dt,processor:Cn,variant:gt,executionQuanta:Ut}=Vt,en={category:J||"voicefocus",name:Q||"default",variant:gt,simd:dt};if(j){const sn=w(en,ut);en.url=yield v.resolveURL(sn,mt)}return{fetchConfig:At,model:en,processor:Cn,executionQuanta:Ut,supported:!0}})}static init(M,k){let{delegate:N,preload:j=!0,logger:B}=k;return u(this,void 0,void 0,function*(){if(M.supported===!1)throw new Error("Voice Focus not supported. Reason: "+M.reason);const{model:J,processor:Q,fetchConfig:oe,executionQuanta:$}=M,{simd:he,name:Ae}=J,{paths:Ee}=oe;if(Q!=="voicefocus-inline-processor"&&Q!=="voicefocus-worker-postMessage-processor"&&Q!=="voicefocus-worker-sab-processor")throw new Error(`Unknown processor ${Q}`);const Oe=J.url||w(J,Ee);B==null||B.debug(`Using model URL ${Oe}.`);const be=`${Ee.wasm}audio_buffer-v1${he?"_simd":""}.wasm`,De=`${Ee.wasm}resampler-v1${he?"_simd":""}.wasm`,ut=`${Ee.workers}worker-v1.js`,{file:St,node:Rt}=b[Q],Ze=`${Ee.processors}${St}`,mt=yield g.loadWorker(ut,"VoiceFocusWorker",oe,B);if(j){B==null||B.debug("Preloading",Oe);let Cn=s.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";mt.postMessage({message:Cn,preload:!0,key:"model",fetchBehavior:oe,path:Oe})}const Vt={processor:Q,worker:mt,audioBufferURL:be,resamplerURL:De,fetchBehavior:oe,modelURL:Oe,delegate:N,logger:B,numberOfInputs:Ae==="ns_es"?2:1},dt=new Xv(mt,Ze,Rt,Vt,$);return Promise.resolve(dt)})}createNode(M,k){var N;if(this.internal.isDestroyed)throw new Error("Unable to create node because VoiceFocus worker has been destroyed.");const{voiceFocusSampleRate:j=M.sampleRate===16e3?16e3:48e3,enabled:B=!0,agc:J=r}=k||{},Q=k==null?void 0:k.es,oe={voiceFocusSampleRate:j,enabled:B,sendBufferCount:10,prefill:6,agc:J,executionQuanta:this.executionQuanta,supportFarendStream:Q},$=v.withQueryString(this.processorURL,(N=this.nodeOptions)===null||N===void 0?void 0:N.fetchBehavior);return M.audioWorklet.addModule($).then(()=>new this.nodeConstructor(M,Object.assign(Object.assign({},this.nodeOptions),{processorOptions:oe})))}applyToStream(M,k,N){return u(this,void 0,void 0,function*(){if(this.internal.isDestroyed)throw new Error("Unable to apply stream because VoiceFocus worker has been destroyed");const j=k.createMediaStreamSource(M),B=yield this.applyToSourceNode(j,k,N),J=k.createMediaStreamDestination();return B.connect(J),{node:B,source:j,destination:J,stream:J.stream}})}applyToSourceNode(M,k,N){return u(this,void 0,void 0,function*(){const j=yield this.createNode(k,N);return M.connect(j),j})}destroy(){this.internal.worker&&this.internal.worker.terminate(),this.internal.isDestroyed=!0}constructor(M,k,N,j,B){this.processorURL=k,this.nodeConstructor=N,this.nodeOptions=j,this.executionQuanta=B,this.internal={worker:M,nodeOptions:j,isDestroyed:!1}}},"VoiceFocus");l.VoiceFocus=R;const O=n(function(){let I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p;return new(window.AudioContext||window.webkitAudioContext)(I)},"createAudioContext");l.createAudioContext=O;const D=n((I,M,k)=>u(void 0,void 0,void 0,function*(){var N,j;const{constraints:B,spec:J,delegate:Q,preload:oe=!0,options:$}=M,{logger:he}=k,Ae=yield R.configure(J,k);if(!Ae.supported)return(N=k.logger)===null||N===void 0||N.warn("Voice Focus not supported; returning standard stream."),window.navigator.mediaDevices.getUserMedia(B);const Ee=yield R.init(Ae,{delegate:Q,preload:oe,logger:he}),Oe=((j=M.options)===null||j===void 0?void 0:j.agc)||r,be=yield window.navigator.mediaDevices.getUserMedia(C(B,Oe));return Ee.applyToStream(be,I,$).then(De=>De.stream)}),"getAudioInput");l.getAudioInput=D},1074507e3:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(a,i,e,t){function r(o){return o instanceof e?o:new e(function(f){f(o)})}return n(r,"adopt"),new(e||(e=Promise))(function(o,f){function h(y){try{d(t.next(y))}catch(S){f(S)}}n(h,"fulfilled");function p(y){try{d(t.throw(y))}catch(S){f(S)}}n(p,"rejected");function d(y){y.done?o(y.value):r(y.value).then(h,p)}n(d,"step"),d((t=t.apply(a,i||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const m=c(8113008952),v=c(3587844202),g=5*1e3;let s=n(class extends v.VoiceFocusAudioWorkletNode{onModuleBufferLoaded(i,e){this.port.postMessage({message:"module-buffer",buffer:i,key:e})}onModuleLoaded(i,e){this.port.postMessage({message:"module",module:i,key:e})}enable(){return u(this,void 0,void 0,function*(){this.port.postMessage({message:"enable"})})}disable(){return u(this,void 0,void 0,function*(){this.port.postMessage({message:"disable"})})}stop(){var i;return u(this,void 0,void 0,function*(){this.port.postMessage({message:"stop"});try{(i=this.worker)===null||i===void 0||i.terminate()}catch(e){console.error("failed to terminate worker:",e)}this.disconnect()})}onProcessorMessage(i){var e,t,r;const o=i.data;switch(o.message){case"cpu":this.cpuWarningCount++;const f=Date.now(),h=this.cpuWarningLastTriggered||f,p=Math.abs(f-h);(!this.cpuWarningLastTriggered||p>g)&&((e=this.logger)===null||e===void 0||e.warn(`CPU warning (count: ${this.cpuWarningCount}):`,o.message),this.cpuWarningCount=0,this.cpuWarningLastTriggered=f),(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;default:(r=this.logger)===null||r===void 0||r.debug("Ignoring processor message.")}}onWorkerMessage(i){const e=i.data;switch(e.message){case"module-buffer":if(!e.buffer||!e.key)return;this.onModuleBufferLoaded(e.buffer,e.key);break;case"module":if(!e.module||!e.key)return;this.onModuleLoaded(e.module,e.key);break;case"stopped":this.worker&&this.worker.terminate();break;default:return}}constructor(i,e){super(i,e.processor,e),this.cpuWarningCount=0,this.channelCountMode="explicit",this.channelCount=1;const{modelURL:t,worker:r,fetchBehavior:o,logger:f,delegate:h}=e;this.logger=f,this.port.onmessage=this.onProcessorMessage.bind(this),this.delegate=h,f&&f.debug("VoiceFocusInlineNode:",t),this.worker=r,this.worker.onmessage=this.onWorkerMessage.bind(this);const p=m.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:p,key:"model",fetchBehavior:o,path:t})}},"VoiceFocusInlineNode");l.default=s},1035990965:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(s,a,i,e){function t(r){return r instanceof i?r:new i(function(o){o(r)})}return n(t,"adopt"),new(i||(i=Promise))(function(r,o){function f(d){try{p(e.next(d))}catch(y){o(y)}}n(f,"fulfilled");function h(d){try{p(e.throw(d))}catch(y){o(y)}}n(h,"rejected");function p(d){d.done?r(d.value):t(d.value).then(f,h)}n(p,"step"),p((e=e.apply(s,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const m=c(8113008952),v=c(3587844202);let g=n(class extends v.VoiceFocusAudioWorkletNode{enable(){return u(this,void 0,void 0,function*(){this.worker.postMessage({message:"enable"})})}disable(){return u(this,void 0,void 0,function*(){this.worker.postMessage({message:"disable"})})}stop(){return u(this,void 0,void 0,function*(){try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(a){var i;const e=a.data;switch(e.message){case"ready":this.port.postMessage({message:"ready",shared:e.shared},e.shared?Object.values(e.shared):[]);break;case"data":if(!e.buffer)return;this.port.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(e);break;case"cpu":(i=this.delegate)===null||i===void 0||i.onCPUWarning();break;case"processing":this.port.postMessage(e);break;default:return}}onProcessorMessage(a){var i;const e=a.data;switch(e.message){case"data":if(!e.buffer)return;this.worker.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"cpu":(i=this.delegate)===null||i===void 0||i.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(e);break;default:return}}constructor(a,i){super(a,i.processor,i),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:e,audioBufferURL:t,worker:r,fetchBehavior:o,delegate:f}=i;this.delegate=f,this.worker=r,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:h,agc:p,supportFarendStream:d}=i.processorOptions;this.worker.postMessage({message:"init",approach:"postMessage",frames:a.sampleRate===16e3?160:480,enabled:h,agc:p,fetchBehavior:o,model:e,supportFarendStream:d});const y=m.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:y,key:"buffer",fetchBehavior:o,path:t})}},"VoiceFocusWorkerPostMessageNode");l.default=g},4096494996:function(H,l,c){"use strict";var u=this&&this.__awaiter||function(i,e,t,r){function o(f){return f instanceof t?f:new t(function(h){h(f)})}return n(o,"adopt"),new(t||(t=Promise))(function(f,h){function p(S){try{y(r.next(S))}catch(b){h(b)}}n(p,"fulfilled");function d(S){try{y(r.throw(S))}catch(b){h(b)}}n(d,"rejected");function y(S){S.done?f(S.value):o(S.value).then(p,d)}n(y,"step"),y((r=r.apply(i,e||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const m=c(8113008952),v=c(3587844202),g={ready:0,enabled:1},s={disabled:0,enabled:1,stopped:2};let a=n(class extends v.VoiceFocusAudioWorkletNode{enable(){return u(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,g.enabled,s.enabled),Atomics.notify(this.state,g.ready,1)):this.worker.postMessage({message:"enable"})})}disable(){return u(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,g.enabled,s.disabled),Atomics.notify(this.state,g.ready,1)):this.worker.postMessage({message:"disable"})})}stop(){return u(this,void 0,void 0,function*(){if(this.state)Atomics.store(this.state,g.enabled,s.stopped),Atomics.notify(this.state,g.ready,1);else try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(e){var t;const r=e.data;switch(r.message){case"ready":if(!r.shared)throw new Error("No shared state.");this.state=new Int32Array(r.shared.state),this.port.postMessage(r);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(r);break;case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"processing":this.port.postMessage(r);break;default:return}}onProcessorMessage(e){var t;const r=e.data;switch(r.message){case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(r);break;default:}}constructor(e,t){super(e,t.processor,t),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:r,resamplerURL:o,worker:f,fetchBehavior:h,delegate:p}=t;this.delegate=p,this.worker=f,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:d,supportFarendStream:y}=t.processorOptions;this.worker.postMessage({message:"init",approach:"sab",frames:e.sampleRate===16e3?160:480,enabled:d,model:r,supportFarendStream:y});const S=m.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:S,key:"resampler",fetchBehavior:h,path:o})}},"VoiceFocusWorkerBufferNode");l.default=a},3712740514:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.RawSha256=void 0;var u=c(2291918858),m=function(){function v(){this.state=Int32Array.from(u.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return n(v,"RawSha2561"),v.prototype.update=function(g){if(this.finished)throw new Error("Attempted to update an already finished hash.");var s=0,a=g.byteLength;if(this.bytesHashed+=a,this.bytesHashed*8>u.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;a>0;)this.buffer[this.bufferLength++]=g[s++],a--,this.bufferLength===u.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},v.prototype.digest=function(){if(!this.finished){var g=this.bytesHashed*8,s=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),a=this.bufferLength;if(s.setUint8(this.bufferLength++,128),a%u.BLOCK_SIZE>=u.BLOCK_SIZE-8){for(var i=this.bufferLength;i<u.BLOCK_SIZE;i++)s.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<u.BLOCK_SIZE-8;i++)s.setUint8(i,0);s.setUint32(u.BLOCK_SIZE-8,Math.floor(g/4294967296),!0),s.setUint32(u.BLOCK_SIZE-4,g),this.hashBuffer(),this.finished=!0}for(var e=new Uint8Array(u.DIGEST_LENGTH),i=0;i<8;i++)e[i*4]=this.state[i]>>>24&255,e[i*4+1]=this.state[i]>>>16&255,e[i*4+2]=this.state[i]>>>8&255,e[i*4+3]=this.state[i]>>>0&255;return e},v.prototype.hashBuffer=function(){for(var g=this,s=g.buffer,a=g.state,i=a[0],e=a[1],t=a[2],r=a[3],o=a[4],f=a[5],h=a[6],p=a[7],d=0;d<u.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(s[d*4]&255)<<24|(s[d*4+1]&255)<<16|(s[d*4+2]&255)<<8|s[d*4+3]&255;else{var y=this.temp[d-2],S=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10;y=this.temp[d-15];var b=(y>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;this.temp[d]=(S+this.temp[d-7]|0)+(b+this.temp[d-16]|0)}var _=(((o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+(o&f^~o&h)|0)+(p+(u.KEY[d]+this.temp[d]|0)|0)|0,C=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&e^i&t^e&t)|0;p=h,h=f,f=o,o=r+_|0,r=t,t=e,e=i,i=_+C|0}a[0]+=i,a[1]+=e,a[2]+=t,a[3]+=r,a[4]+=o,a[5]+=f,a[6]+=h,a[7]+=p},v}();l.RawSha256=m},2291918858:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MAX_HASHABLE_LENGTH=l.INIT=l.KEY=l.DIGEST_LENGTH=l.BLOCK_SIZE=void 0,l.BLOCK_SIZE=64,l.DIGEST_LENGTH=32,l.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],l.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},1222670195:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var u=c(8400004479);u.__exportStar(c(9697312697),l)},9697312697:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var u=c(8400004479),m=c(2291918858),v=c(3712740514),g=c(9346984146),s=function(){function i(e){if(this.hash=new v.RawSha256,e){this.outer=new v.RawSha256;var t=a(e),r=new Uint8Array(m.BLOCK_SIZE);r.set(t);for(var o=0;o<m.BLOCK_SIZE;o++)t[o]^=54,r[o]^=92;this.hash.update(t),this.outer.update(r);for(var o=0;o<t.byteLength;o++)t[o]=0}}return n(i,"Sha2561"),i.prototype.update=function(e){if(!((0,g.isEmptyData)(e)||this.error))try{this.hash.update((0,g.convertToBuffer)(e))}catch(t){this.error=t}},i.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},i.prototype.digest=function(){return u.__awaiter(this,void 0,void 0,function(){return u.__generator(this,function(e){return[2,this.digestSync()]})})},i}();l.Sha256=s;function a(i){var e=(0,g.convertToBuffer)(i);if(e.byteLength>m.BLOCK_SIZE){var t=new v.RawSha256;t.update(e),e=t.digest()}var r=new Uint8Array(m.BLOCK_SIZE);return r.set(e),r}n(a,"bufferFromSecret")},1717667466:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertToBuffer=void 0;var u=c(2412280125),m=typeof Buffer<"u"&&Buffer.from?function(g){return Buffer.from(g,"utf8")}:u.fromUtf8;function v(g){return g instanceof Uint8Array?g:typeof g=="string"?m(g):ArrayBuffer.isView(g)?new Uint8Array(g.buffer,g.byteOffset,g.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(g)}n(v,"convertToBuffer"),l.convertToBuffer=v},9346984146:(H,l,c)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=l.numToUint8=l.isEmptyData=l.convertToBuffer=void 0;var u=c(1717667466);Object.defineProperty(l,"convertToBuffer",{enumerable:!0,get:function(){return u.convertToBuffer}});var m=c(4931641723);Object.defineProperty(l,"isEmptyData",{enumerable:!0,get:function(){return m.isEmptyData}});var v=c(3533405281);Object.defineProperty(l,"numToUint8",{enumerable:!0,get:function(){return v.numToUint8}});var g=c(4862639932);Object.defineProperty(l,"uint32ArrayFrom",{enumerable:!0,get:function(){return g.uint32ArrayFrom}})},4931641723:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isEmptyData=void 0;function c(u){return typeof u=="string"?u.length===0:u.byteLength===0}n(c,"isEmptyData"),l.isEmptyData=c},3533405281:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.numToUint8=void 0;function c(u){return new Uint8Array([(u&4278190080)>>24,(u&16711680)>>16,(u&65280)>>8,u&255])}n(c,"numToUint8"),l.numToUint8=c},4862639932:(H,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=void 0;function c(u){if(!Uint32Array.from){for(var m=new Uint32Array(u.length),v=0;v<u.length;)m[v]=u[v],v+=1;return m}return Uint32Array.from(u)}n(c,"uint32ArrayFrom"),l.uint32ArrayFrom=c},4602188990:(H,l,c)=>{"use strict";c.r(l),c.d(l,{fromHex:()=>v,toHex:()=>g});const u={},m={};for(let s=0;s<256;s++){let a=s.toString(16).toLowerCase();a.length===1&&(a=`0${a}`),u[s]=a,m[a]=s}function v(s){if(s.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const a=new Uint8Array(s.length/2);for(let i=0;i<s.length;i+=2){const e=s.slice(i,i+2).toLowerCase();if(e in m)a[i/2]=m[e];else throw new Error(`Cannot decode unrecognized sequence ${e} as hexadecimal`)}return a}n(v,"fromHex");function g(s){let a="";for(let i=0;i<s.byteLength;i++)a+=u[s[i]];return a}n(g,"toHex")},2179555054:(H,l,c)=>{"use strict";const{Deflate:u,deflate:m,deflateRaw:v,gzip:g}=c(8596517657),{Inflate:s,inflate:a,inflateRaw:i,ungzip:e}=c(5407065173),t=c(9516153853);H.exports.Deflate=u,H.exports.deflate=m,H.exports.deflateRaw=v,H.exports.gzip=g,H.exports.Inflate=s,H.exports.inflate=a,H.exports.inflateRaw=i,H.exports.ungzip=e,H.exports.constants=t},8596517657:(H,l,c)=>{"use strict";const u=c(9071164343),m=c(5261709245),v=c(3455347086),g=c(4276546412),s=c(8079600486),a=Object.prototype.toString,{Z_NO_FLUSH:i,Z_SYNC_FLUSH:e,Z_FULL_FLUSH:t,Z_FINISH:r,Z_OK:o,Z_STREAM_END:f,Z_DEFAULT_COMPRESSION:h,Z_DEFAULT_STRATEGY:p,Z_DEFLATED:d}=c(9516153853);function y(C){this.options=m.assign({level:h,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:p},C||{});let w=this.options;w.raw&&w.windowBits>0?w.windowBits=-w.windowBits:w.gzip&&w.windowBits>0&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;let R=u.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(R!==o)throw new Error(g[R]);if(w.header&&u.deflateSetHeader(this.strm,w.header),w.dictionary){let O;if(typeof w.dictionary=="string"?O=v.string2buf(w.dictionary):a.call(w.dictionary)==="[object ArrayBuffer]"?O=new Uint8Array(w.dictionary):O=w.dictionary,R=u.deflateSetDictionary(this.strm,O),R!==o)throw new Error(g[R]);this._dict_set=!0}}n(y,"Deflate"),y.prototype.push=function(C,w){const R=this.strm,O=this.options.chunkSize;let D,I;if(this.ended)return!1;for(w===~~w?I=w:I=w===!0?r:i,typeof C=="string"?R.input=v.string2buf(C):a.call(C)==="[object ArrayBuffer]"?R.input=new Uint8Array(C):R.input=C,R.next_in=0,R.avail_in=R.input.length;;){if(R.avail_out===0&&(R.output=new Uint8Array(O),R.next_out=0,R.avail_out=O),(I===e||I===t)&&R.avail_out<=6){this.onData(R.output.subarray(0,R.next_out)),R.avail_out=0;continue}if(D=u.deflate(R,I),D===f)return R.next_out>0&&this.onData(R.output.subarray(0,R.next_out)),D=u.deflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===o;if(R.avail_out===0){this.onData(R.output);continue}if(I>0&&R.next_out>0){this.onData(R.output.subarray(0,R.next_out)),R.avail_out=0;continue}if(R.avail_in===0)break}return!0},y.prototype.onData=function(C){this.chunks.push(C)},y.prototype.onEnd=function(C){C===o&&(this.result=m.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg};function S(C,w){const R=new y(w);if(R.push(C,!0),R.err)throw R.msg||g[R.err];return R.result}n(S,"deflate");function b(C,w){return w=w||{},w.raw=!0,S(C,w)}n(b,"deflateRaw");function _(C,w){return w=w||{},w.gzip=!0,S(C,w)}n(_,"gzip"),H.exports.Deflate=y,H.exports.deflate=S,H.exports.deflateRaw=b,H.exports.gzip=_,H.exports.constants=c(9516153853)},5407065173:(H,l,c)=>{"use strict";const u=c(8029791791),m=c(5261709245),v=c(3455347086),g=c(4276546412),s=c(8079600486),a=c(9654919892),i=Object.prototype.toString,{Z_NO_FLUSH:e,Z_FINISH:t,Z_OK:r,Z_STREAM_END:o,Z_NEED_DICT:f,Z_STREAM_ERROR:h,Z_DATA_ERROR:p,Z_MEM_ERROR:d}=c(9516153853);function y(_){this.options=m.assign({chunkSize:1024*64,windowBits:15,to:""},_||{});const C=this.options;C.raw&&C.windowBits>=0&&C.windowBits<16&&(C.windowBits=-C.windowBits,C.windowBits===0&&(C.windowBits=-15)),C.windowBits>=0&&C.windowBits<16&&!(_&&_.windowBits)&&(C.windowBits+=32),C.windowBits>15&&C.windowBits<48&&(C.windowBits&15||(C.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;let w=u.inflateInit2(this.strm,C.windowBits);if(w!==r)throw new Error(g[w]);if(this.header=new a,u.inflateGetHeader(this.strm,this.header),C.dictionary&&(typeof C.dictionary=="string"?C.dictionary=v.string2buf(C.dictionary):i.call(C.dictionary)==="[object ArrayBuffer]"&&(C.dictionary=new Uint8Array(C.dictionary)),C.raw&&(w=u.inflateSetDictionary(this.strm,C.dictionary),w!==r)))throw new Error(g[w])}n(y,"Inflate"),y.prototype.push=function(_,C){const w=this.strm,R=this.options.chunkSize,O=this.options.dictionary;let D,I,M;if(this.ended)return!1;for(C===~~C?I=C:I=C===!0?t:e,i.call(_)==="[object ArrayBuffer]"?w.input=new Uint8Array(_):w.input=_,w.next_in=0,w.avail_in=w.input.length;;){for(w.avail_out===0&&(w.output=new Uint8Array(R),w.next_out=0,w.avail_out=R),D=u.inflate(w,I),D===f&&O&&(D=u.inflateSetDictionary(w,O),D===r?D=u.inflate(w,I):D===p&&(D=f));w.avail_in>0&&D===o&&w.state.wrap>0&&_[w.next_in]!==0;)u.inflateReset(w),D=u.inflate(w,I);switch(D){case h:case p:case f:case d:return this.onEnd(D),this.ended=!0,!1}if(M=w.avail_out,w.next_out&&(w.avail_out===0||D===o))if(this.options.to==="string"){let k=v.utf8border(w.output,w.next_out),N=w.next_out-k,j=v.buf2string(w.output,k);w.next_out=N,w.avail_out=R-N,N&&w.output.set(w.output.subarray(k,k+N),0),this.onData(j)}else this.onData(w.output.length===w.next_out?w.output:w.output.subarray(0,w.next_out));if(!(D===r&&M===0)){if(D===o)return D=u.inflateEnd(this.strm),this.onEnd(D),this.ended=!0,!0;if(w.avail_in===0)break}}return!0},y.prototype.onData=function(_){this.chunks.push(_)},y.prototype.onEnd=function(_){_===r&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=m.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg};function S(_,C){const w=new y(C);if(w.push(_),w.err)throw w.msg||g[w.err];return w.result}n(S,"inflate");function b(_,C){return C=C||{},C.raw=!0,S(_,C)}n(b,"inflateRaw"),H.exports.Inflate=y,H.exports.inflate=S,H.exports.inflateRaw=b,H.exports.ungzip=S,H.exports.constants=c(9516153853)},5261709245:H=>{"use strict";const l=n((c,u)=>Object.prototype.hasOwnProperty.call(c,u),"_has");H.exports.assign=function(c){const u=Array.prototype.slice.call(arguments,1);for(;u.length;){const m=u.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(const v in m)l(m,v)&&(c[v]=m[v])}}return c},H.exports.flattenChunks=c=>{let u=0;for(let v=0,g=c.length;v<g;v++)u+=c[v].length;const m=new Uint8Array(u);for(let v=0,g=0,s=c.length;v<s;v++){let a=c[v];m.set(a,g),g+=a.length}return m}},3455347086:H=>{"use strict";let l=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}const c=new Uint8Array(256);for(let m=0;m<256;m++)c[m]=m>=252?6:m>=248?5:m>=240?4:m>=224?3:m>=192?2:1;c[254]=c[254]=1,H.exports.string2buf=m=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(m);let v,g,s,a,i,e=m.length,t=0;for(a=0;a<e;a++)g=m.charCodeAt(a),(g&64512)===55296&&a+1<e&&(s=m.charCodeAt(a+1),(s&64512)===56320&&(g=65536+(g-55296<<10)+(s-56320),a++)),t+=g<128?1:g<2048?2:g<65536?3:4;for(v=new Uint8Array(t),i=0,a=0;i<t;a++)g=m.charCodeAt(a),(g&64512)===55296&&a+1<e&&(s=m.charCodeAt(a+1),(s&64512)===56320&&(g=65536+(g-55296<<10)+(s-56320),a++)),g<128?v[i++]=g:g<2048?(v[i++]=192|g>>>6,v[i++]=128|g&63):g<65536?(v[i++]=224|g>>>12,v[i++]=128|g>>>6&63,v[i++]=128|g&63):(v[i++]=240|g>>>18,v[i++]=128|g>>>12&63,v[i++]=128|g>>>6&63,v[i++]=128|g&63);return v};const u=n((m,v)=>{if(v<65534&&m.subarray&&l)return String.fromCharCode.apply(null,m.length===v?m:m.subarray(0,v));let g="";for(let s=0;s<v;s++)g+=String.fromCharCode(m[s]);return g},"buf2binstring");H.exports.buf2string=(m,v)=>{const g=v||m.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(m.subarray(0,v));let s,a;const i=new Array(g*2);for(a=0,s=0;s<g;){let e=m[s++];if(e<128){i[a++]=e;continue}let t=c[e];if(t>4){i[a++]=65533,s+=t-1;continue}for(e&=t===2?31:t===3?15:7;t>1&&s<g;)e=e<<6|m[s++]&63,t--;if(t>1){i[a++]=65533;continue}e<65536?i[a++]=e:(e-=65536,i[a++]=55296|e>>10&1023,i[a++]=56320|e&1023)}return u(i,a)},H.exports.utf8border=(m,v)=>{v=v||m.length,v>m.length&&(v=m.length);let g=v-1;for(;g>=0&&(m[g]&192)===128;)g--;return g<0||g===0?v:g+c[m[g]]>v?g:v}},3145109445:H=>{"use strict";const l=n((c,u,m,v)=>{let g=c&65535|0,s=c>>>16&65535|0,a=0;for(;m!==0;){a=m>2e3?2e3:m,m-=a;do g=g+u[v++]|0,s=s+g|0;while(--a);g%=65521,s%=65521}return g|s<<16|0},"adler32");H.exports=l},9516153853:H=>{"use strict";H.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},3332910147:H=>{"use strict";const l=n(()=>{let m,v=[];for(var g=0;g<256;g++){m=g;for(var s=0;s<8;s++)m=m&1?3988292384^m>>>1:m>>>1;v[g]=m}return v},"makeTable"),c=new Uint32Array(l()),u=n((m,v,g,s)=>{const a=c,i=s+g;m^=-1;for(let e=s;e<i;e++)m=m>>>8^a[(m^v[e])&255];return m^-1},"crc32");H.exports=u},9071164343:(H,l,c)=>{"use strict";const{_tr_init:u,_tr_stored_block:m,_tr_flush_block:v,_tr_tally:g,_tr_align:s}=c(4407910137),a=c(3145109445),i=c(3332910147),e=c(4276546412),{Z_NO_FLUSH:t,Z_PARTIAL_FLUSH:r,Z_FULL_FLUSH:o,Z_FINISH:f,Z_BLOCK:h,Z_OK:p,Z_STREAM_END:d,Z_STREAM_ERROR:y,Z_DATA_ERROR:S,Z_BUF_ERROR:b,Z_DEFAULT_COMPRESSION:_,Z_FILTERED:C,Z_HUFFMAN_ONLY:w,Z_RLE:R,Z_FIXED:O,Z_DEFAULT_STRATEGY:D,Z_UNKNOWN:I,Z_DEFLATED:M}=c(9516153853),k=9,N=15,j=8,B=29,Q=256+1+B,oe=30,$=19,he=2*Q+1,Ae=15,Ee=3,Oe=258,be=Oe+Ee+1,De=32,ut=42,St=69,Rt=73,Ze=91,mt=103,At=113,Vt=666,dt=1,Cn=2,gt=3,Ut=4,en=3,sn=n((x,Ye)=>(x.msg=e[Ye],Ye),"err"),$t=n(x=>(x<<1)-(x>4?9:0),"rank"),Rn=n(x=>{let Ye=x.length;for(;--Ye>=0;)x[Ye]=0},"zero");let ii=n((x,Ye,it)=>(Ye<<x.hash_shift^it)&x.hash_mask,"HASH_ZLIB");const Kn=n(x=>{const Ye=x.state;let it=Ye.pending;it>x.avail_out&&(it=x.avail_out),it!==0&&(x.output.set(Ye.pending_buf.subarray(Ye.pending_out,Ye.pending_out+it),x.next_out),x.next_out+=it,Ye.pending_out+=it,x.total_out+=it,x.avail_out-=it,Ye.pending-=it,Ye.pending===0&&(Ye.pending_out=0))},"flush_pending"),hi=n((x,Ye)=>{v(x,x.block_start>=0?x.block_start:-1,x.strstart-x.block_start,Ye),x.block_start=x.strstart,Kn(x.strm)},"flush_block_only"),Ln=n((x,Ye)=>{x.pending_buf[x.pending++]=Ye},"put_byte"),Hn=n((x,Ye)=>{x.pending_buf[x.pending++]=Ye>>>8&255,x.pending_buf[x.pending++]=Ye&255},"putShortMSB"),ui=n((x,Ye,it,ft)=>{let ge=x.avail_in;return ge>ft&&(ge=ft),ge===0?0:(x.avail_in-=ge,Ye.set(x.input.subarray(x.next_in,x.next_in+ge),it),x.state.wrap===1?x.adler=a(x.adler,Ye,ge,it):x.state.wrap===2&&(x.adler=i(x.adler,Ye,ge,it)),x.next_in+=ge,x.total_in+=ge,ge)},"read_buf"),jn=n((x,Ye)=>{let it=x.max_chain_length,ft=x.strstart,ge,Zn,Xt=x.prev_length,pn=x.nice_match;const Bi=x.strstart>x.w_size-be?x.strstart-(x.w_size-be):0,Gn=x.window,yo=x.w_mask,no=x.prev,Vi=x.strstart+Oe;let or=Gn[ft+Xt-1],ki=Gn[ft+Xt];x.prev_length>=x.good_match&&(it>>=2),pn>x.lookahead&&(pn=x.lookahead);do if(ge=Ye,!(Gn[ge+Xt]!==ki||Gn[ge+Xt-1]!==or||Gn[ge]!==Gn[ft]||Gn[++ge]!==Gn[ft+1])){ft+=2,ge++;do;while(Gn[++ft]===Gn[++ge]&&Gn[++ft]===Gn[++ge]&&Gn[++ft]===Gn[++ge]&&Gn[++ft]===Gn[++ge]&&Gn[++ft]===Gn[++ge]&&Gn[++ft]===Gn[++ge]&&Gn[++ft]===Gn[++ge]&&Gn[++ft]===Gn[++ge]&&ft<Vi);if(Zn=Oe-(Vi-ft),ft=Vi-Oe,Zn>Xt){if(x.match_start=Ye,Xt=Zn,Zn>=pn)break;or=Gn[ft+Xt-1],ki=Gn[ft+Xt]}}while((Ye=no[Ye&yo])>Bi&&--it!==0);return Xt<=x.lookahead?Xt:x.lookahead},"longest_match"),ri=n(x=>{const Ye=x.w_size;let it,ft,ge,Zn,Xt;do{if(Zn=x.window_size-x.lookahead-x.strstart,x.strstart>=Ye+(Ye-be)){x.window.set(x.window.subarray(Ye,Ye+Ye),0),x.match_start-=Ye,x.strstart-=Ye,x.block_start-=Ye,ft=x.hash_size,it=ft;do ge=x.head[--it],x.head[it]=ge>=Ye?ge-Ye:0;while(--ft);ft=Ye,it=ft;do ge=x.prev[--it],x.prev[it]=ge>=Ye?ge-Ye:0;while(--ft);Zn+=Ye}if(x.strm.avail_in===0)break;if(ft=ui(x.strm,x.window,x.strstart+x.lookahead,Zn),x.lookahead+=ft,x.lookahead+x.insert>=Ee)for(Xt=x.strstart-x.insert,x.ins_h=x.window[Xt],x.ins_h=ii(x,x.ins_h,x.window[Xt+1]);x.insert&&(x.ins_h=ii(x,x.ins_h,x.window[Xt+Ee-1]),x.prev[Xt&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=Xt,Xt++,x.insert--,!(x.lookahead+x.insert<Ee)););}while(x.lookahead<be&&x.strm.avail_in!==0)},"fill_window"),ie=n((x,Ye)=>{let it=65535;for(it>x.pending_buf_size-5&&(it=x.pending_buf_size-5);;){if(x.lookahead<=1){if(ri(x),x.lookahead===0&&Ye===t)return dt;if(x.lookahead===0)break}x.strstart+=x.lookahead,x.lookahead=0;const ft=x.block_start+it;if((x.strstart===0||x.strstart>=ft)&&(x.lookahead=x.strstart-ft,x.strstart=ft,hi(x,!1),x.strm.avail_out===0)||x.strstart-x.block_start>=x.w_size-be&&(hi(x,!1),x.strm.avail_out===0))return dt}return x.insert=0,Ye===f?(hi(x,!0),x.strm.avail_out===0?gt:Ut):(x.strstart>x.block_start&&(hi(x,!1),x.strm.avail_out===0),dt)},"deflate_stored"),Mt=n((x,Ye)=>{let it,ft;for(;;){if(x.lookahead<be){if(ri(x),x.lookahead<be&&Ye===t)return dt;if(x.lookahead===0)break}if(it=0,x.lookahead>=Ee&&(x.ins_h=ii(x,x.ins_h,x.window[x.strstart+Ee-1]),it=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),it!==0&&x.strstart-it<=x.w_size-be&&(x.match_length=jn(x,it)),x.match_length>=Ee)if(ft=g(x,x.strstart-x.match_start,x.match_length-Ee),x.lookahead-=x.match_length,x.match_length<=x.max_lazy_match&&x.lookahead>=Ee){x.match_length--;do x.strstart++,x.ins_h=ii(x,x.ins_h,x.window[x.strstart+Ee-1]),it=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart;while(--x.match_length!==0);x.strstart++}else x.strstart+=x.match_length,x.match_length=0,x.ins_h=x.window[x.strstart],x.ins_h=ii(x,x.ins_h,x.window[x.strstart+1]);else ft=g(x,0,x.window[x.strstart]),x.lookahead--,x.strstart++;if(ft&&(hi(x,!1),x.strm.avail_out===0))return dt}return x.insert=x.strstart<Ee-1?x.strstart:Ee-1,Ye===f?(hi(x,!0),x.strm.avail_out===0?gt:Ut):x.last_lit&&(hi(x,!1),x.strm.avail_out===0)?dt:Cn},"deflate_fast"),Ot=n((x,Ye)=>{let it,ft,ge;for(;;){if(x.lookahead<be){if(ri(x),x.lookahead<be&&Ye===t)return dt;if(x.lookahead===0)break}if(it=0,x.lookahead>=Ee&&(x.ins_h=ii(x,x.ins_h,x.window[x.strstart+Ee-1]),it=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),x.prev_length=x.match_length,x.prev_match=x.match_start,x.match_length=Ee-1,it!==0&&x.prev_length<x.max_lazy_match&&x.strstart-it<=x.w_size-be&&(x.match_length=jn(x,it),x.match_length<=5&&(x.strategy===C||x.match_length===Ee&&x.strstart-x.match_start>4096)&&(x.match_length=Ee-1)),x.prev_length>=Ee&&x.match_length<=x.prev_length){ge=x.strstart+x.lookahead-Ee,ft=g(x,x.strstart-1-x.prev_match,x.prev_length-Ee),x.lookahead-=x.prev_length-1,x.prev_length-=2;do++x.strstart<=ge&&(x.ins_h=ii(x,x.ins_h,x.window[x.strstart+Ee-1]),it=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart);while(--x.prev_length!==0);if(x.match_available=0,x.match_length=Ee-1,x.strstart++,ft&&(hi(x,!1),x.strm.avail_out===0))return dt}else if(x.match_available){if(ft=g(x,0,x.window[x.strstart-1]),ft&&hi(x,!1),x.strstart++,x.lookahead--,x.strm.avail_out===0)return dt}else x.match_available=1,x.strstart++,x.lookahead--}return x.match_available&&(ft=g(x,0,x.window[x.strstart-1]),x.match_available=0),x.insert=x.strstart<Ee-1?x.strstart:Ee-1,Ye===f?(hi(x,!0),x.strm.avail_out===0?gt:Ut):x.last_lit&&(hi(x,!1),x.strm.avail_out===0)?dt:Cn},"deflate_slow"),Ht=n((x,Ye)=>{let it,ft,ge,Zn;const Xt=x.window;for(;;){if(x.lookahead<=Oe){if(ri(x),x.lookahead<=Oe&&Ye===t)return dt;if(x.lookahead===0)break}if(x.match_length=0,x.lookahead>=Ee&&x.strstart>0&&(ge=x.strstart-1,ft=Xt[ge],ft===Xt[++ge]&&ft===Xt[++ge]&&ft===Xt[++ge])){Zn=x.strstart+Oe;do;while(ft===Xt[++ge]&&ft===Xt[++ge]&&ft===Xt[++ge]&&ft===Xt[++ge]&&ft===Xt[++ge]&&ft===Xt[++ge]&&ft===Xt[++ge]&&ft===Xt[++ge]&&ge<Zn);x.match_length=Oe-(Zn-ge),x.match_length>x.lookahead&&(x.match_length=x.lookahead)}if(x.match_length>=Ee?(it=g(x,1,x.match_length-Ee),x.lookahead-=x.match_length,x.strstart+=x.match_length,x.match_length=0):(it=g(x,0,x.window[x.strstart]),x.lookahead--,x.strstart++),it&&(hi(x,!1),x.strm.avail_out===0))return dt}return x.insert=0,Ye===f?(hi(x,!0),x.strm.avail_out===0?gt:Ut):x.last_lit&&(hi(x,!1),x.strm.avail_out===0)?dt:Cn},"deflate_rle"),hn=n((x,Ye)=>{let it;for(;;){if(x.lookahead===0&&(ri(x),x.lookahead===0)){if(Ye===t)return dt;break}if(x.match_length=0,it=g(x,0,x.window[x.strstart]),x.lookahead--,x.strstart++,it&&(hi(x,!1),x.strm.avail_out===0))return dt}return x.insert=0,Ye===f?(hi(x,!0),x.strm.avail_out===0?gt:Ut):x.last_lit&&(hi(x,!1),x.strm.avail_out===0)?dt:Cn},"deflate_huff");function tn(x,Ye,it,ft,ge){this.good_length=x,this.max_lazy=Ye,this.nice_length=it,this.max_chain=ft,this.func=ge}n(tn,"Config");const xe=[new tn(0,0,0,0,ie),new tn(4,4,8,4,Mt),new tn(4,5,16,8,Mt),new tn(4,6,32,32,Mt),new tn(4,4,16,16,Ot),new tn(8,16,32,32,Ot),new tn(8,16,128,128,Ot),new tn(8,32,128,256,Ot),new tn(32,128,258,1024,Ot),new tn(32,258,258,4096,Ot)],Dt=n(x=>{x.window_size=2*x.w_size,Rn(x.head),x.max_lazy_match=xe[x.level].max_lazy,x.good_match=xe[x.level].good_length,x.nice_match=xe[x.level].nice_length,x.max_chain_length=xe[x.level].max_chain,x.strstart=0,x.block_start=0,x.lookahead=0,x.insert=0,x.match_length=x.prev_length=Ee-1,x.match_available=0,x.ins_h=0},"lm_init");function Y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=M,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(he*2),this.dyn_dtree=new Uint16Array((2*oe+1)*2),this.bl_tree=new Uint16Array((2*$+1)*2),Rn(this.dyn_ltree),Rn(this.dyn_dtree),Rn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Ae+1),this.heap=new Uint16Array(2*Q+1),Rn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Q+1),Rn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}n(Y,"DeflateState");const fe=n(x=>{if(!x||!x.state)return sn(x,y);x.total_in=x.total_out=0,x.data_type=I;const Ye=x.state;return Ye.pending=0,Ye.pending_out=0,Ye.wrap<0&&(Ye.wrap=-Ye.wrap),Ye.status=Ye.wrap?ut:At,x.adler=Ye.wrap===2?0:1,Ye.last_flush=t,u(Ye),p},"deflateResetKeep"),et=n(x=>{const Ye=fe(x);return Ye===p&&Dt(x.state),Ye},"deflateReset"),nt=n((x,Ye)=>!x||!x.state||x.state.wrap!==2?y:(x.state.gzhead=Ye,p),"deflateSetHeader"),nn=n((x,Ye,it,ft,ge,Zn)=>{if(!x)return y;let Xt=1;if(Ye===_&&(Ye=6),ft<0?(Xt=0,ft=-ft):ft>15&&(Xt=2,ft-=16),ge<1||ge>k||it!==M||ft<8||ft>15||Ye<0||Ye>9||Zn<0||Zn>O)return sn(x,y);ft===8&&(ft=9);const pn=new Y;return x.state=pn,pn.strm=x,pn.wrap=Xt,pn.gzhead=null,pn.w_bits=ft,pn.w_size=1<<pn.w_bits,pn.w_mask=pn.w_size-1,pn.hash_bits=ge+7,pn.hash_size=1<<pn.hash_bits,pn.hash_mask=pn.hash_size-1,pn.hash_shift=~~((pn.hash_bits+Ee-1)/Ee),pn.window=new Uint8Array(pn.w_size*2),pn.head=new Uint16Array(pn.hash_size),pn.prev=new Uint16Array(pn.w_size),pn.lit_bufsize=1<<ge+6,pn.pending_buf_size=pn.lit_bufsize*4,pn.pending_buf=new Uint8Array(pn.pending_buf_size),pn.d_buf=1*pn.lit_bufsize,pn.l_buf=(1+2)*pn.lit_bufsize,pn.level=Ye,pn.strategy=Zn,pn.method=it,et(x)},"deflateInit2"),kt=n((x,Ye)=>nn(x,Ye,M,N,j,D),"deflateInit"),Jt=n((x,Ye)=>{let it,ft;if(!x||!x.state||Ye>h||Ye<0)return x?sn(x,y):y;const ge=x.state;if(!x.output||!x.input&&x.avail_in!==0||ge.status===Vt&&Ye!==f)return sn(x,x.avail_out===0?b:y);ge.strm=x;const Zn=ge.last_flush;if(ge.last_flush=Ye,ge.status===ut)if(ge.wrap===2)x.adler=0,Ln(ge,31),Ln(ge,139),Ln(ge,8),ge.gzhead?(Ln(ge,(ge.gzhead.text?1:0)+(ge.gzhead.hcrc?2:0)+(ge.gzhead.extra?4:0)+(ge.gzhead.name?8:0)+(ge.gzhead.comment?16:0)),Ln(ge,ge.gzhead.time&255),Ln(ge,ge.gzhead.time>>8&255),Ln(ge,ge.gzhead.time>>16&255),Ln(ge,ge.gzhead.time>>24&255),Ln(ge,ge.level===9?2:ge.strategy>=w||ge.level<2?4:0),Ln(ge,ge.gzhead.os&255),ge.gzhead.extra&&ge.gzhead.extra.length&&(Ln(ge,ge.gzhead.extra.length&255),Ln(ge,ge.gzhead.extra.length>>8&255)),ge.gzhead.hcrc&&(x.adler=i(x.adler,ge.pending_buf,ge.pending,0)),ge.gzindex=0,ge.status=St):(Ln(ge,0),Ln(ge,0),Ln(ge,0),Ln(ge,0),Ln(ge,0),Ln(ge,ge.level===9?2:ge.strategy>=w||ge.level<2?4:0),Ln(ge,en),ge.status=At);else{let Xt=M+(ge.w_bits-8<<4)<<8,pn=-1;ge.strategy>=w||ge.level<2?pn=0:ge.level<6?pn=1:ge.level===6?pn=2:pn=3,Xt|=pn<<6,ge.strstart!==0&&(Xt|=De),Xt+=31-Xt%31,ge.status=At,Hn(ge,Xt),ge.strstart!==0&&(Hn(ge,x.adler>>>16),Hn(ge,x.adler&65535)),x.adler=1}if(ge.status===St)if(ge.gzhead.extra){for(it=ge.pending;ge.gzindex<(ge.gzhead.extra.length&65535)&&!(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>it&&(x.adler=i(x.adler,ge.pending_buf,ge.pending-it,it)),Kn(x),it=ge.pending,ge.pending===ge.pending_buf_size));)Ln(ge,ge.gzhead.extra[ge.gzindex]&255),ge.gzindex++;ge.gzhead.hcrc&&ge.pending>it&&(x.adler=i(x.adler,ge.pending_buf,ge.pending-it,it)),ge.gzindex===ge.gzhead.extra.length&&(ge.gzindex=0,ge.status=Rt)}else ge.status=Rt;if(ge.status===Rt)if(ge.gzhead.name){it=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>it&&(x.adler=i(x.adler,ge.pending_buf,ge.pending-it,it)),Kn(x),it=ge.pending,ge.pending===ge.pending_buf_size)){ft=1;break}ge.gzindex<ge.gzhead.name.length?ft=ge.gzhead.name.charCodeAt(ge.gzindex++)&255:ft=0,Ln(ge,ft)}while(ft!==0);ge.gzhead.hcrc&&ge.pending>it&&(x.adler=i(x.adler,ge.pending_buf,ge.pending-it,it)),ft===0&&(ge.gzindex=0,ge.status=Ze)}else ge.status=Ze;if(ge.status===Ze)if(ge.gzhead.comment){it=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>it&&(x.adler=i(x.adler,ge.pending_buf,ge.pending-it,it)),Kn(x),it=ge.pending,ge.pending===ge.pending_buf_size)){ft=1;break}ge.gzindex<ge.gzhead.comment.length?ft=ge.gzhead.comment.charCodeAt(ge.gzindex++)&255:ft=0,Ln(ge,ft)}while(ft!==0);ge.gzhead.hcrc&&ge.pending>it&&(x.adler=i(x.adler,ge.pending_buf,ge.pending-it,it)),ft===0&&(ge.status=mt)}else ge.status=mt;if(ge.status===mt&&(ge.gzhead.hcrc?(ge.pending+2>ge.pending_buf_size&&Kn(x),ge.pending+2<=ge.pending_buf_size&&(Ln(ge,x.adler&255),Ln(ge,x.adler>>8&255),x.adler=0,ge.status=At)):ge.status=At),ge.pending!==0){if(Kn(x),x.avail_out===0)return ge.last_flush=-1,p}else if(x.avail_in===0&&$t(Ye)<=$t(Zn)&&Ye!==f)return sn(x,b);if(ge.status===Vt&&x.avail_in!==0)return sn(x,b);if(x.avail_in!==0||ge.lookahead!==0||Ye!==t&&ge.status!==Vt){let Xt=ge.strategy===w?hn(ge,Ye):ge.strategy===R?Ht(ge,Ye):xe[ge.level].func(ge,Ye);if((Xt===gt||Xt===Ut)&&(ge.status=Vt),Xt===dt||Xt===gt)return x.avail_out===0&&(ge.last_flush=-1),p;if(Xt===Cn&&(Ye===r?s(ge):Ye!==h&&(m(ge,0,0,!1),Ye===o&&(Rn(ge.head),ge.lookahead===0&&(ge.strstart=0,ge.block_start=0,ge.insert=0))),Kn(x),x.avail_out===0))return ge.last_flush=-1,p}return Ye!==f?p:ge.wrap<=0?d:(ge.wrap===2?(Ln(ge,x.adler&255),Ln(ge,x.adler>>8&255),Ln(ge,x.adler>>16&255),Ln(ge,x.adler>>24&255),Ln(ge,x.total_in&255),Ln(ge,x.total_in>>8&255),Ln(ge,x.total_in>>16&255),Ln(ge,x.total_in>>24&255)):(Hn(ge,x.adler>>>16),Hn(ge,x.adler&65535)),Kn(x),ge.wrap>0&&(ge.wrap=-ge.wrap),ge.pending!==0?p:d)},"deflate"),Ke=n(x=>{if(!x||!x.state)return y;const Ye=x.state.status;return Ye!==ut&&Ye!==St&&Ye!==Rt&&Ye!==Ze&&Ye!==mt&&Ye!==At&&Ye!==Vt?sn(x,y):(x.state=null,Ye===At?sn(x,S):p)},"deflateEnd"),vt=n((x,Ye)=>{let it=Ye.length;if(!x||!x.state)return y;const ft=x.state,ge=ft.wrap;if(ge===2||ge===1&&ft.status!==ut||ft.lookahead)return y;if(ge===1&&(x.adler=a(x.adler,Ye,it,0)),ft.wrap=0,it>=ft.w_size){ge===0&&(Rn(ft.head),ft.strstart=0,ft.block_start=0,ft.insert=0);let Bi=new Uint8Array(ft.w_size);Bi.set(Ye.subarray(it-ft.w_size,it),0),Ye=Bi,it=ft.w_size}const Zn=x.avail_in,Xt=x.next_in,pn=x.input;for(x.avail_in=it,x.next_in=0,x.input=Ye,ri(ft);ft.lookahead>=Ee;){let Bi=ft.strstart,Gn=ft.lookahead-(Ee-1);do ft.ins_h=ii(ft,ft.ins_h,ft.window[Bi+Ee-1]),ft.prev[Bi&ft.w_mask]=ft.head[ft.ins_h],ft.head[ft.ins_h]=Bi,Bi++;while(--Gn);ft.strstart=Bi,ft.lookahead=Ee-1,ri(ft)}return ft.strstart+=ft.lookahead,ft.block_start=ft.strstart,ft.insert=ft.lookahead,ft.lookahead=0,ft.match_length=ft.prev_length=Ee-1,ft.match_available=0,x.next_in=Xt,x.input=pn,x.avail_in=Zn,ft.wrap=ge,p},"deflateSetDictionary");H.exports.deflateInit=kt,H.exports.deflateInit2=nn,H.exports.deflateReset=et,H.exports.deflateResetKeep=fe,H.exports.deflateSetHeader=nt,H.exports.deflate=Jt,H.exports.deflateEnd=Ke,H.exports.deflateSetDictionary=vt,H.exports.deflateInfo="pako deflate (from Nodeca project)"},9654919892:H=>{"use strict";function l(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}n(l,"GZheader"),H.exports=l},1551921669:H=>{"use strict";H.exports=n(function(m,v){let g,s,a,i,e,t,r,o,f,h,p,d,y,S,b,_,C,w,R,O,D,I,M,k;const N=m.state;g=m.next_in,M=m.input,s=g+(m.avail_in-5),a=m.next_out,k=m.output,i=a-(v-m.avail_out),e=a+(m.avail_out-257),t=N.dmax,r=N.wsize,o=N.whave,f=N.wnext,h=N.window,p=N.hold,d=N.bits,y=N.lencode,S=N.distcode,b=(1<<N.lenbits)-1,_=(1<<N.distbits)-1;e:do{d<15&&(p+=M[g++]<<d,d+=8,p+=M[g++]<<d,d+=8),C=y[p&b];t:for(;;){if(w=C>>>24,p>>>=w,d-=w,w=C>>>16&255,w===0)k[a++]=C&65535;else if(w&16){R=C&65535,w&=15,w&&(d<w&&(p+=M[g++]<<d,d+=8),R+=p&(1<<w)-1,p>>>=w,d-=w),d<15&&(p+=M[g++]<<d,d+=8,p+=M[g++]<<d,d+=8),C=S[p&_];n:for(;;){if(w=C>>>24,p>>>=w,d-=w,w=C>>>16&255,w&16){if(O=C&65535,w&=15,d<w&&(p+=M[g++]<<d,d+=8,d<w&&(p+=M[g++]<<d,d+=8)),O+=p&(1<<w)-1,O>t){m.msg="invalid distance too far back",N.mode=30;break e}if(p>>>=w,d-=w,w=a-i,O>w){if(w=O-w,w>o&&N.sane){m.msg="invalid distance too far back",N.mode=30;break e}if(D=0,I=h,f===0){if(D+=r-w,w<R){R-=w;do k[a++]=h[D++];while(--w);D=a-O,I=k}}else if(f<w){if(D+=r+f-w,w-=f,w<R){R-=w;do k[a++]=h[D++];while(--w);if(D=0,f<R){w=f,R-=w;do k[a++]=h[D++];while(--w);D=a-O,I=k}}}else if(D+=f-w,w<R){R-=w;do k[a++]=h[D++];while(--w);D=a-O,I=k}for(;R>2;)k[a++]=I[D++],k[a++]=I[D++],k[a++]=I[D++],R-=3;R&&(k[a++]=I[D++],R>1&&(k[a++]=I[D++]))}else{D=a-O;do k[a++]=k[D++],k[a++]=k[D++],k[a++]=k[D++],R-=3;while(R>2);R&&(k[a++]=k[D++],R>1&&(k[a++]=k[D++]))}}else if(w&64){m.msg="invalid distance code",N.mode=30;break e}else{C=S[(C&65535)+(p&(1<<w)-1)];continue n}break}}else if(w&64)if(w&32){N.mode=12;break e}else{m.msg="invalid literal/length code",N.mode=30;break e}else{C=y[(C&65535)+(p&(1<<w)-1)];continue t}break}}while(g<s&&a<e);R=d>>3,g-=R,d-=R<<3,p&=(1<<d)-1,m.next_in=g,m.next_out=a,m.avail_in=g<s?5+(s-g):5-(g-s),m.avail_out=a<e?257+(e-a):257-(a-e),N.hold=p,N.bits=d},"inflate_fast")},8029791791:(H,l,c)=>{"use strict";const u=c(3145109445),m=c(3332910147),v=c(1551921669),g=c(9262713900),s=0,a=1,i=2,{Z_FINISH:e,Z_BLOCK:t,Z_TREES:r,Z_OK:o,Z_STREAM_END:f,Z_NEED_DICT:h,Z_STREAM_ERROR:p,Z_DATA_ERROR:d,Z_MEM_ERROR:y,Z_BUF_ERROR:S,Z_DEFLATED:b}=c(9516153853),_=1,C=2,w=3,R=4,O=5,D=6,I=7,M=8,k=9,N=10,j=11,B=12,J=13,Q=14,oe=15,$=16,he=17,Ae=18,Ee=19,Oe=20,be=21,De=22,ut=23,St=24,Rt=25,Ze=26,mt=27,At=28,Vt=29,dt=30,Cn=31,gt=32,Ut=852,en=592,$t=15,Rn=n(xe=>(xe>>>24&255)+(xe>>>8&65280)+((xe&65280)<<8)+((xe&255)<<24),"zswap32");function di(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}n(di,"InflateState");const ii=n(xe=>{if(!xe||!xe.state)return p;const Dt=xe.state;return xe.total_in=xe.total_out=Dt.total=0,xe.msg="",Dt.wrap&&(xe.adler=Dt.wrap&1),Dt.mode=_,Dt.last=0,Dt.havedict=0,Dt.dmax=32768,Dt.head=null,Dt.hold=0,Dt.bits=0,Dt.lencode=Dt.lendyn=new Int32Array(Ut),Dt.distcode=Dt.distdyn=new Int32Array(en),Dt.sane=1,Dt.back=-1,o},"inflateResetKeep"),Kn=n(xe=>{if(!xe||!xe.state)return p;const Dt=xe.state;return Dt.wsize=0,Dt.whave=0,Dt.wnext=0,ii(xe)},"inflateReset"),hi=n((xe,Dt)=>{let Y;if(!xe||!xe.state)return p;const fe=xe.state;return Dt<0?(Y=0,Dt=-Dt):(Y=(Dt>>4)+1,Dt<48&&(Dt&=15)),Dt&&(Dt<8||Dt>15)?p:(fe.window!==null&&fe.wbits!==Dt&&(fe.window=null),fe.wrap=Y,fe.wbits=Dt,Kn(xe))},"inflateReset2"),Ln=n((xe,Dt)=>{if(!xe)return p;const Y=new di;xe.state=Y,Y.window=null;const fe=hi(xe,Dt);return fe!==o&&(xe.state=null),fe},"inflateInit2"),Hn=n(xe=>Ln(xe,$t),"inflateInit");let ui=!0,jn,ri;const ie=n(xe=>{if(ui){jn=new Int32Array(512),ri=new Int32Array(32);let Dt=0;for(;Dt<144;)xe.lens[Dt++]=8;for(;Dt<256;)xe.lens[Dt++]=9;for(;Dt<280;)xe.lens[Dt++]=7;for(;Dt<288;)xe.lens[Dt++]=8;for(g(a,xe.lens,0,288,jn,0,xe.work,{bits:9}),Dt=0;Dt<32;)xe.lens[Dt++]=5;g(i,xe.lens,0,32,ri,0,xe.work,{bits:5}),ui=!1}xe.lencode=jn,xe.lenbits=9,xe.distcode=ri,xe.distbits=5},"fixedtables"),Mt=n((xe,Dt,Y,fe)=>{let et;const nt=xe.state;return nt.window===null&&(nt.wsize=1<<nt.wbits,nt.wnext=0,nt.whave=0,nt.window=new Uint8Array(nt.wsize)),fe>=nt.wsize?(nt.window.set(Dt.subarray(Y-nt.wsize,Y),0),nt.wnext=0,nt.whave=nt.wsize):(et=nt.wsize-nt.wnext,et>fe&&(et=fe),nt.window.set(Dt.subarray(Y-fe,Y-fe+et),nt.wnext),fe-=et,fe?(nt.window.set(Dt.subarray(Y-fe,Y),0),nt.wnext=fe,nt.whave=nt.wsize):(nt.wnext+=et,nt.wnext===nt.wsize&&(nt.wnext=0),nt.whave<nt.wsize&&(nt.whave+=et))),0},"updatewindow"),Ot=n((xe,Dt)=>{let Y,fe,et,nt,nn,kt,Jt,Ke,vt,x,Ye,it,ft,ge,Zn=0,Xt,pn,Bi,Gn,yo,no,Vi,or;const ki=new Uint8Array(4);let qi,Or;const Zo=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!xe||!xe.state||!xe.output||!xe.input&&xe.avail_in!==0)return p;Y=xe.state,Y.mode===B&&(Y.mode=J),nn=xe.next_out,et=xe.output,Jt=xe.avail_out,nt=xe.next_in,fe=xe.input,kt=xe.avail_in,Ke=Y.hold,vt=Y.bits,x=kt,Ye=Jt,or=o;e:for(;;)switch(Y.mode){case _:if(Y.wrap===0){Y.mode=J;break}for(;vt<16;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}if(Y.wrap&2&&Ke===35615){Y.check=0,ki[0]=Ke&255,ki[1]=Ke>>>8&255,Y.check=m(Y.check,ki,2,0),Ke=0,vt=0,Y.mode=C;break}if(Y.flags=0,Y.head&&(Y.head.done=!1),!(Y.wrap&1)||(((Ke&255)<<8)+(Ke>>8))%31){xe.msg="incorrect header check",Y.mode=dt;break}if((Ke&15)!==b){xe.msg="unknown compression method",Y.mode=dt;break}if(Ke>>>=4,vt-=4,Vi=(Ke&15)+8,Y.wbits===0)Y.wbits=Vi;else if(Vi>Y.wbits){xe.msg="invalid window size",Y.mode=dt;break}Y.dmax=1<<Y.wbits,xe.adler=Y.check=1,Y.mode=Ke&512?N:B,Ke=0,vt=0;break;case C:for(;vt<16;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}if(Y.flags=Ke,(Y.flags&255)!==b){xe.msg="unknown compression method",Y.mode=dt;break}if(Y.flags&57344){xe.msg="unknown header flags set",Y.mode=dt;break}Y.head&&(Y.head.text=Ke>>8&1),Y.flags&512&&(ki[0]=Ke&255,ki[1]=Ke>>>8&255,Y.check=m(Y.check,ki,2,0)),Ke=0,vt=0,Y.mode=w;case w:for(;vt<32;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}Y.head&&(Y.head.time=Ke),Y.flags&512&&(ki[0]=Ke&255,ki[1]=Ke>>>8&255,ki[2]=Ke>>>16&255,ki[3]=Ke>>>24&255,Y.check=m(Y.check,ki,4,0)),Ke=0,vt=0,Y.mode=R;case R:for(;vt<16;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}Y.head&&(Y.head.xflags=Ke&255,Y.head.os=Ke>>8),Y.flags&512&&(ki[0]=Ke&255,ki[1]=Ke>>>8&255,Y.check=m(Y.check,ki,2,0)),Ke=0,vt=0,Y.mode=O;case O:if(Y.flags&1024){for(;vt<16;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}Y.length=Ke,Y.head&&(Y.head.extra_len=Ke),Y.flags&512&&(ki[0]=Ke&255,ki[1]=Ke>>>8&255,Y.check=m(Y.check,ki,2,0)),Ke=0,vt=0}else Y.head&&(Y.head.extra=null);Y.mode=D;case D:if(Y.flags&1024&&(it=Y.length,it>kt&&(it=kt),it&&(Y.head&&(Vi=Y.head.extra_len-Y.length,Y.head.extra||(Y.head.extra=new Uint8Array(Y.head.extra_len)),Y.head.extra.set(fe.subarray(nt,nt+it),Vi)),Y.flags&512&&(Y.check=m(Y.check,fe,it,nt)),kt-=it,nt+=it,Y.length-=it),Y.length))break e;Y.length=0,Y.mode=I;case I:if(Y.flags&2048){if(kt===0)break e;it=0;do Vi=fe[nt+it++],Y.head&&Vi&&Y.length<65536&&(Y.head.name+=String.fromCharCode(Vi));while(Vi&&it<kt);if(Y.flags&512&&(Y.check=m(Y.check,fe,it,nt)),kt-=it,nt+=it,Vi)break e}else Y.head&&(Y.head.name=null);Y.length=0,Y.mode=M;case M:if(Y.flags&4096){if(kt===0)break e;it=0;do Vi=fe[nt+it++],Y.head&&Vi&&Y.length<65536&&(Y.head.comment+=String.fromCharCode(Vi));while(Vi&&it<kt);if(Y.flags&512&&(Y.check=m(Y.check,fe,it,nt)),kt-=it,nt+=it,Vi)break e}else Y.head&&(Y.head.comment=null);Y.mode=k;case k:if(Y.flags&512){for(;vt<16;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}if(Ke!==(Y.check&65535)){xe.msg="header crc mismatch",Y.mode=dt;break}Ke=0,vt=0}Y.head&&(Y.head.hcrc=Y.flags>>9&1,Y.head.done=!0),xe.adler=Y.check=0,Y.mode=B;break;case N:for(;vt<32;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}xe.adler=Y.check=Rn(Ke),Ke=0,vt=0,Y.mode=j;case j:if(Y.havedict===0)return xe.next_out=nn,xe.avail_out=Jt,xe.next_in=nt,xe.avail_in=kt,Y.hold=Ke,Y.bits=vt,h;xe.adler=Y.check=1,Y.mode=B;case B:if(Dt===t||Dt===r)break e;case J:if(Y.last){Ke>>>=vt&7,vt-=vt&7,Y.mode=mt;break}for(;vt<3;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}switch(Y.last=Ke&1,Ke>>>=1,vt-=1,Ke&3){case 0:Y.mode=Q;break;case 1:if(ie(Y),Y.mode=Oe,Dt===r){Ke>>>=2,vt-=2;break e}break;case 2:Y.mode=he;break;case 3:xe.msg="invalid block type",Y.mode=dt}Ke>>>=2,vt-=2;break;case Q:for(Ke>>>=vt&7,vt-=vt&7;vt<32;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}if((Ke&65535)!==(Ke>>>16^65535)){xe.msg="invalid stored block lengths",Y.mode=dt;break}if(Y.length=Ke&65535,Ke=0,vt=0,Y.mode=oe,Dt===r)break e;case oe:Y.mode=$;case $:if(it=Y.length,it){if(it>kt&&(it=kt),it>Jt&&(it=Jt),it===0)break e;et.set(fe.subarray(nt,nt+it),nn),kt-=it,nt+=it,Jt-=it,nn+=it,Y.length-=it;break}Y.mode=B;break;case he:for(;vt<14;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}if(Y.nlen=(Ke&31)+257,Ke>>>=5,vt-=5,Y.ndist=(Ke&31)+1,Ke>>>=5,vt-=5,Y.ncode=(Ke&15)+4,Ke>>>=4,vt-=4,Y.nlen>286||Y.ndist>30){xe.msg="too many length or distance symbols",Y.mode=dt;break}Y.have=0,Y.mode=Ae;case Ae:for(;Y.have<Y.ncode;){for(;vt<3;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}Y.lens[Zo[Y.have++]]=Ke&7,Ke>>>=3,vt-=3}for(;Y.have<19;)Y.lens[Zo[Y.have++]]=0;if(Y.lencode=Y.lendyn,Y.lenbits=7,qi={bits:Y.lenbits},or=g(s,Y.lens,0,19,Y.lencode,0,Y.work,qi),Y.lenbits=qi.bits,or){xe.msg="invalid code lengths set",Y.mode=dt;break}Y.have=0,Y.mode=Ee;case Ee:for(;Y.have<Y.nlen+Y.ndist;){for(;Zn=Y.lencode[Ke&(1<<Y.lenbits)-1],Xt=Zn>>>24,pn=Zn>>>16&255,Bi=Zn&65535,!(Xt<=vt);){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}if(Bi<16)Ke>>>=Xt,vt-=Xt,Y.lens[Y.have++]=Bi;else{if(Bi===16){for(Or=Xt+2;vt<Or;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}if(Ke>>>=Xt,vt-=Xt,Y.have===0){xe.msg="invalid bit length repeat",Y.mode=dt;break}Vi=Y.lens[Y.have-1],it=3+(Ke&3),Ke>>>=2,vt-=2}else if(Bi===17){for(Or=Xt+3;vt<Or;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}Ke>>>=Xt,vt-=Xt,Vi=0,it=3+(Ke&7),Ke>>>=3,vt-=3}else{for(Or=Xt+7;vt<Or;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}Ke>>>=Xt,vt-=Xt,Vi=0,it=11+(Ke&127),Ke>>>=7,vt-=7}if(Y.have+it>Y.nlen+Y.ndist){xe.msg="invalid bit length repeat",Y.mode=dt;break}for(;it--;)Y.lens[Y.have++]=Vi}}if(Y.mode===dt)break;if(Y.lens[256]===0){xe.msg="invalid code -- missing end-of-block",Y.mode=dt;break}if(Y.lenbits=9,qi={bits:Y.lenbits},or=g(a,Y.lens,0,Y.nlen,Y.lencode,0,Y.work,qi),Y.lenbits=qi.bits,or){xe.msg="invalid literal/lengths set",Y.mode=dt;break}if(Y.distbits=6,Y.distcode=Y.distdyn,qi={bits:Y.distbits},or=g(i,Y.lens,Y.nlen,Y.ndist,Y.distcode,0,Y.work,qi),Y.distbits=qi.bits,or){xe.msg="invalid distances set",Y.mode=dt;break}if(Y.mode=Oe,Dt===r)break e;case Oe:Y.mode=be;case be:if(kt>=6&&Jt>=258){xe.next_out=nn,xe.avail_out=Jt,xe.next_in=nt,xe.avail_in=kt,Y.hold=Ke,Y.bits=vt,v(xe,Ye),nn=xe.next_out,et=xe.output,Jt=xe.avail_out,nt=xe.next_in,fe=xe.input,kt=xe.avail_in,Ke=Y.hold,vt=Y.bits,Y.mode===B&&(Y.back=-1);break}for(Y.back=0;Zn=Y.lencode[Ke&(1<<Y.lenbits)-1],Xt=Zn>>>24,pn=Zn>>>16&255,Bi=Zn&65535,!(Xt<=vt);){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}if(pn&&!(pn&240)){for(Gn=Xt,yo=pn,no=Bi;Zn=Y.lencode[no+((Ke&(1<<Gn+yo)-1)>>Gn)],Xt=Zn>>>24,pn=Zn>>>16&255,Bi=Zn&65535,!(Gn+Xt<=vt);){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}Ke>>>=Gn,vt-=Gn,Y.back+=Gn}if(Ke>>>=Xt,vt-=Xt,Y.back+=Xt,Y.length=Bi,pn===0){Y.mode=Ze;break}if(pn&32){Y.back=-1,Y.mode=B;break}if(pn&64){xe.msg="invalid literal/length code",Y.mode=dt;break}Y.extra=pn&15,Y.mode=De;case De:if(Y.extra){for(Or=Y.extra;vt<Or;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}Y.length+=Ke&(1<<Y.extra)-1,Ke>>>=Y.extra,vt-=Y.extra,Y.back+=Y.extra}Y.was=Y.length,Y.mode=ut;case ut:for(;Zn=Y.distcode[Ke&(1<<Y.distbits)-1],Xt=Zn>>>24,pn=Zn>>>16&255,Bi=Zn&65535,!(Xt<=vt);){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}if(!(pn&240)){for(Gn=Xt,yo=pn,no=Bi;Zn=Y.distcode[no+((Ke&(1<<Gn+yo)-1)>>Gn)],Xt=Zn>>>24,pn=Zn>>>16&255,Bi=Zn&65535,!(Gn+Xt<=vt);){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}Ke>>>=Gn,vt-=Gn,Y.back+=Gn}if(Ke>>>=Xt,vt-=Xt,Y.back+=Xt,pn&64){xe.msg="invalid distance code",Y.mode=dt;break}Y.offset=Bi,Y.extra=pn&15,Y.mode=St;case St:if(Y.extra){for(Or=Y.extra;vt<Or;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}Y.offset+=Ke&(1<<Y.extra)-1,Ke>>>=Y.extra,vt-=Y.extra,Y.back+=Y.extra}if(Y.offset>Y.dmax){xe.msg="invalid distance too far back",Y.mode=dt;break}Y.mode=Rt;case Rt:if(Jt===0)break e;if(it=Ye-Jt,Y.offset>it){if(it=Y.offset-it,it>Y.whave&&Y.sane){xe.msg="invalid distance too far back",Y.mode=dt;break}it>Y.wnext?(it-=Y.wnext,ft=Y.wsize-it):ft=Y.wnext-it,it>Y.length&&(it=Y.length),ge=Y.window}else ge=et,ft=nn-Y.offset,it=Y.length;it>Jt&&(it=Jt),Jt-=it,Y.length-=it;do et[nn++]=ge[ft++];while(--it);Y.length===0&&(Y.mode=be);break;case Ze:if(Jt===0)break e;et[nn++]=Y.length,Jt--,Y.mode=be;break;case mt:if(Y.wrap){for(;vt<32;){if(kt===0)break e;kt--,Ke|=fe[nt++]<<vt,vt+=8}if(Ye-=Jt,xe.total_out+=Ye,Y.total+=Ye,Ye&&(xe.adler=Y.check=Y.flags?m(Y.check,et,Ye,nn-Ye):u(Y.check,et,Ye,nn-Ye)),Ye=Jt,(Y.flags?Ke:Rn(Ke))!==Y.check){xe.msg="incorrect data check",Y.mode=dt;break}Ke=0,vt=0}Y.mode=At;case At:if(Y.wrap&&Y.flags){for(;vt<32;){if(kt===0)break e;kt--,Ke+=fe[nt++]<<vt,vt+=8}if(Ke!==(Y.total&4294967295)){xe.msg="incorrect length check",Y.mode=dt;break}Ke=0,vt=0}Y.mode=Vt;case Vt:or=f;break e;case dt:or=d;break e;case Cn:return y;case gt:default:return p}return xe.next_out=nn,xe.avail_out=Jt,xe.next_in=nt,xe.avail_in=kt,Y.hold=Ke,Y.bits=vt,(Y.wsize||Ye!==xe.avail_out&&Y.mode<dt&&(Y.mode<mt||Dt!==e))&&Mt(xe,xe.output,xe.next_out,Ye-xe.avail_out)?(Y.mode=Cn,y):(x-=xe.avail_in,Ye-=xe.avail_out,xe.total_in+=x,xe.total_out+=Ye,Y.total+=Ye,Y.wrap&&Ye&&(xe.adler=Y.check=Y.flags?m(Y.check,et,Ye,xe.next_out-Ye):u(Y.check,et,Ye,xe.next_out-Ye)),xe.data_type=Y.bits+(Y.last?64:0)+(Y.mode===B?128:0)+(Y.mode===Oe||Y.mode===oe?256:0),(x===0&&Ye===0||Dt===e)&&or===o&&(or=S),or)},"inflate"),Ht=n(xe=>{if(!xe||!xe.state)return p;let Dt=xe.state;return Dt.window&&(Dt.window=null),xe.state=null,o},"inflateEnd"),hn=n((xe,Dt)=>{if(!xe||!xe.state)return p;const Y=xe.state;return Y.wrap&2?(Y.head=Dt,Dt.done=!1,o):p},"inflateGetHeader"),tn=n((xe,Dt)=>{const Y=Dt.length;let fe,et,nt;return!xe||!xe.state||(fe=xe.state,fe.wrap!==0&&fe.mode!==j)?p:fe.mode===j&&(et=1,et=u(et,Dt,Y,0),et!==fe.check)?d:(nt=Mt(xe,Dt,Y,Y),nt?(fe.mode=Cn,y):(fe.havedict=1,o))},"inflateSetDictionary");H.exports.inflateReset=Kn,H.exports.inflateReset2=hi,H.exports.inflateResetKeep=ii,H.exports.inflateInit=Hn,H.exports.inflateInit2=Ln,H.exports.inflate=Ot,H.exports.inflateEnd=Ht,H.exports.inflateGetHeader=hn,H.exports.inflateSetDictionary=tn,H.exports.inflateInfo="pako inflate (from Nodeca project)"},9262713900:H=>{"use strict";const s=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),a=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),i=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),t=n((r,o,f,h,p,d,y,S)=>{const b=S.bits;let _=0,C=0,w=0,R=0,O=0,D=0,I=0,M=0,k=0,N=0,j,B,J,Q,oe,$=null,he=0,Ae;const Ee=new Uint16Array(15+1),Oe=new Uint16Array(15+1);let be=null,De=0,ut,St,Rt;for(_=0;_<=15;_++)Ee[_]=0;for(C=0;C<h;C++)Ee[o[f+C]]++;for(O=b,R=15;R>=1&&Ee[R]===0;R--);if(O>R&&(O=R),R===0)return p[d++]=1<<24|64<<16|0,p[d++]=1<<24|64<<16|0,S.bits=1,0;for(w=1;w<R&&Ee[w]===0;w++);for(O<w&&(O=w),M=1,_=1;_<=15;_++)if(M<<=1,M-=Ee[_],M<0)return-1;if(M>0&&(r===0||R!==1))return-1;for(Oe[1]=0,_=1;_<15;_++)Oe[_+1]=Oe[_]+Ee[_];for(C=0;C<h;C++)o[f+C]!==0&&(y[Oe[o[f+C]]++]=C);if(r===0?($=be=y,Ae=19):r===1?($=s,he-=257,be=a,De-=257,Ae=256):($=i,be=e,Ae=-1),N=0,C=0,_=w,oe=d,D=O,I=0,J=-1,k=1<<O,Q=k-1,r===1&&k>852||r===2&&k>592)return 1;for(;;){ut=_-I,y[C]<Ae?(St=0,Rt=y[C]):y[C]>Ae?(St=be[De+y[C]],Rt=$[he+y[C]]):(St=32+64,Rt=0),j=1<<_-I,B=1<<D,w=B;do B-=j,p[oe+(N>>I)+B]=ut<<24|St<<16|Rt|0;while(B!==0);for(j=1<<_-1;N&j;)j>>=1;if(j!==0?(N&=j-1,N+=j):N=0,C++,--Ee[_]===0){if(_===R)break;_=o[f+y[C]]}if(_>O&&(N&Q)!==J){for(I===0&&(I=O),oe+=w,D=_-I,M=1<<D;D+I<R&&(M-=Ee[D+I],!(M<=0));)D++,M<<=1;if(k+=1<<D,r===1&&k>852||r===2&&k>592)return 1;J=N&Q,p[J]=O<<24|D<<16|oe-d|0}}return N!==0&&(p[oe+N]=_-I<<24|64<<16|0),S.bits=O,0},"inflate_table");H.exports=t},4276546412:H=>{"use strict";H.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},4407910137:H=>{"use strict";function v(ie){let Mt=ie.length;for(;--Mt>=0;)ie[Mt]=0}n(v,"zero");const g=0,s=1,a=2,i=3,e=258,t=29,r=256,o=r+1+t,f=30,h=19,p=2*o+1,d=15,y=16,S=7,b=256,_=16,C=17,w=18,R=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),O=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),D=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),M=512,k=new Array((o+2)*2);v(k);const N=new Array(f*2);v(N);const j=new Array(M);v(j);const B=new Array(e-i+1);v(B);const J=new Array(t);v(J);const Q=new Array(f);v(Q);function oe(ie,Mt,Ot,Ht,hn){this.static_tree=ie,this.extra_bits=Mt,this.extra_base=Ot,this.elems=Ht,this.max_length=hn,this.has_stree=ie&&ie.length}n(oe,"StaticTreeDesc");let $,he,Ae;function Ee(ie,Mt){this.dyn_tree=ie,this.max_code=0,this.stat_desc=Mt}n(Ee,"TreeDesc");const Oe=n(ie=>ie<256?j[ie]:j[256+(ie>>>7)],"d_code"),be=n((ie,Mt)=>{ie.pending_buf[ie.pending++]=Mt&255,ie.pending_buf[ie.pending++]=Mt>>>8&255},"put_short"),De=n((ie,Mt,Ot)=>{ie.bi_valid>y-Ot?(ie.bi_buf|=Mt<<ie.bi_valid&65535,be(ie,ie.bi_buf),ie.bi_buf=Mt>>y-ie.bi_valid,ie.bi_valid+=Ot-y):(ie.bi_buf|=Mt<<ie.bi_valid&65535,ie.bi_valid+=Ot)},"send_bits"),ut=n((ie,Mt,Ot)=>{De(ie,Ot[Mt*2],Ot[Mt*2+1])},"send_code"),St=n((ie,Mt)=>{let Ot=0;do Ot|=ie&1,ie>>>=1,Ot<<=1;while(--Mt>0);return Ot>>>1},"bi_reverse"),Rt=n(ie=>{ie.bi_valid===16?(be(ie,ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0):ie.bi_valid>=8&&(ie.pending_buf[ie.pending++]=ie.bi_buf&255,ie.bi_buf>>=8,ie.bi_valid-=8)},"bi_flush"),Ze=n((ie,Mt)=>{const Ot=Mt.dyn_tree,Ht=Mt.max_code,hn=Mt.stat_desc.static_tree,tn=Mt.stat_desc.has_stree,xe=Mt.stat_desc.extra_bits,Dt=Mt.stat_desc.extra_base,Y=Mt.stat_desc.max_length;let fe,et,nt,nn,kt,Jt,Ke=0;for(nn=0;nn<=d;nn++)ie.bl_count[nn]=0;for(Ot[ie.heap[ie.heap_max]*2+1]=0,fe=ie.heap_max+1;fe<p;fe++)et=ie.heap[fe],nn=Ot[Ot[et*2+1]*2+1]+1,nn>Y&&(nn=Y,Ke++),Ot[et*2+1]=nn,!(et>Ht)&&(ie.bl_count[nn]++,kt=0,et>=Dt&&(kt=xe[et-Dt]),Jt=Ot[et*2],ie.opt_len+=Jt*(nn+kt),tn&&(ie.static_len+=Jt*(hn[et*2+1]+kt)));if(Ke!==0){do{for(nn=Y-1;ie.bl_count[nn]===0;)nn--;ie.bl_count[nn]--,ie.bl_count[nn+1]+=2,ie.bl_count[Y]--,Ke-=2}while(Ke>0);for(nn=Y;nn!==0;nn--)for(et=ie.bl_count[nn];et!==0;)nt=ie.heap[--fe],!(nt>Ht)&&(Ot[nt*2+1]!==nn&&(ie.opt_len+=(nn-Ot[nt*2+1])*Ot[nt*2],Ot[nt*2+1]=nn),et--)}},"gen_bitlen"),mt=n((ie,Mt,Ot)=>{const Ht=new Array(d+1);let hn=0,tn,xe;for(tn=1;tn<=d;tn++)Ht[tn]=hn=hn+Ot[tn-1]<<1;for(xe=0;xe<=Mt;xe++){let Dt=ie[xe*2+1];Dt!==0&&(ie[xe*2]=St(Ht[Dt]++,Dt))}},"gen_codes"),At=n(()=>{let ie,Mt,Ot,Ht,hn;const tn=new Array(d+1);for(Ot=0,Ht=0;Ht<t-1;Ht++)for(J[Ht]=Ot,ie=0;ie<1<<R[Ht];ie++)B[Ot++]=Ht;for(B[Ot-1]=Ht,hn=0,Ht=0;Ht<16;Ht++)for(Q[Ht]=hn,ie=0;ie<1<<O[Ht];ie++)j[hn++]=Ht;for(hn>>=7;Ht<f;Ht++)for(Q[Ht]=hn<<7,ie=0;ie<1<<O[Ht]-7;ie++)j[256+hn++]=Ht;for(Mt=0;Mt<=d;Mt++)tn[Mt]=0;for(ie=0;ie<=143;)k[ie*2+1]=8,ie++,tn[8]++;for(;ie<=255;)k[ie*2+1]=9,ie++,tn[9]++;for(;ie<=279;)k[ie*2+1]=7,ie++,tn[7]++;for(;ie<=287;)k[ie*2+1]=8,ie++,tn[8]++;for(mt(k,o+1,tn),ie=0;ie<f;ie++)N[ie*2+1]=5,N[ie*2]=St(ie,5);$=new oe(k,R,r+1,o,d),he=new oe(N,O,0,f,d),Ae=new oe(new Array(0),D,0,h,S)},"tr_static_init"),Vt=n(ie=>{let Mt;for(Mt=0;Mt<o;Mt++)ie.dyn_ltree[Mt*2]=0;for(Mt=0;Mt<f;Mt++)ie.dyn_dtree[Mt*2]=0;for(Mt=0;Mt<h;Mt++)ie.bl_tree[Mt*2]=0;ie.dyn_ltree[b*2]=1,ie.opt_len=ie.static_len=0,ie.last_lit=ie.matches=0},"init_block"),dt=n(ie=>{ie.bi_valid>8?be(ie,ie.bi_buf):ie.bi_valid>0&&(ie.pending_buf[ie.pending++]=ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0},"bi_windup"),Cn=n((ie,Mt,Ot,Ht)=>{dt(ie),Ht&&(be(ie,Ot),be(ie,~Ot)),ie.pending_buf.set(ie.window.subarray(Mt,Mt+Ot),ie.pending),ie.pending+=Ot},"copy_block"),gt=n((ie,Mt,Ot,Ht)=>{const hn=Mt*2,tn=Ot*2;return ie[hn]<ie[tn]||ie[hn]===ie[tn]&&Ht[Mt]<=Ht[Ot]},"smaller"),Ut=n((ie,Mt,Ot)=>{const Ht=ie.heap[Ot];let hn=Ot<<1;for(;hn<=ie.heap_len&&(hn<ie.heap_len&&gt(Mt,ie.heap[hn+1],ie.heap[hn],ie.depth)&&hn++,!gt(Mt,Ht,ie.heap[hn],ie.depth));)ie.heap[Ot]=ie.heap[hn],Ot=hn,hn<<=1;ie.heap[Ot]=Ht},"pqdownheap"),en=n((ie,Mt,Ot)=>{let Ht,hn,tn=0,xe,Dt;if(ie.last_lit!==0)do Ht=ie.pending_buf[ie.d_buf+tn*2]<<8|ie.pending_buf[ie.d_buf+tn*2+1],hn=ie.pending_buf[ie.l_buf+tn],tn++,Ht===0?ut(ie,hn,Mt):(xe=B[hn],ut(ie,xe+r+1,Mt),Dt=R[xe],Dt!==0&&(hn-=J[xe],De(ie,hn,Dt)),Ht--,xe=Oe(Ht),ut(ie,xe,Ot),Dt=O[xe],Dt!==0&&(Ht-=Q[xe],De(ie,Ht,Dt)));while(tn<ie.last_lit);ut(ie,b,Mt)},"compress_block"),sn=n((ie,Mt)=>{const Ot=Mt.dyn_tree,Ht=Mt.stat_desc.static_tree,hn=Mt.stat_desc.has_stree,tn=Mt.stat_desc.elems;let xe,Dt,Y=-1,fe;for(ie.heap_len=0,ie.heap_max=p,xe=0;xe<tn;xe++)Ot[xe*2]!==0?(ie.heap[++ie.heap_len]=Y=xe,ie.depth[xe]=0):Ot[xe*2+1]=0;for(;ie.heap_len<2;)fe=ie.heap[++ie.heap_len]=Y<2?++Y:0,Ot[fe*2]=1,ie.depth[fe]=0,ie.opt_len--,hn&&(ie.static_len-=Ht[fe*2+1]);for(Mt.max_code=Y,xe=ie.heap_len>>1;xe>=1;xe--)Ut(ie,Ot,xe);fe=tn;do xe=ie.heap[1],ie.heap[1]=ie.heap[ie.heap_len--],Ut(ie,Ot,1),Dt=ie.heap[1],ie.heap[--ie.heap_max]=xe,ie.heap[--ie.heap_max]=Dt,Ot[fe*2]=Ot[xe*2]+Ot[Dt*2],ie.depth[fe]=(ie.depth[xe]>=ie.depth[Dt]?ie.depth[xe]:ie.depth[Dt])+1,Ot[xe*2+1]=Ot[Dt*2+1]=fe,ie.heap[1]=fe++,Ut(ie,Ot,1);while(ie.heap_len>=2);ie.heap[--ie.heap_max]=ie.heap[1],Ze(ie,Mt),mt(Ot,Y,ie.bl_count)},"build_tree"),$t=n((ie,Mt,Ot)=>{let Ht,hn=-1,tn,xe=Mt[0*2+1],Dt=0,Y=7,fe=4;for(xe===0&&(Y=138,fe=3),Mt[(Ot+1)*2+1]=65535,Ht=0;Ht<=Ot;Ht++)tn=xe,xe=Mt[(Ht+1)*2+1],!(++Dt<Y&&tn===xe)&&(Dt<fe?ie.bl_tree[tn*2]+=Dt:tn!==0?(tn!==hn&&ie.bl_tree[tn*2]++,ie.bl_tree[_*2]++):Dt<=10?ie.bl_tree[C*2]++:ie.bl_tree[w*2]++,Dt=0,hn=tn,xe===0?(Y=138,fe=3):tn===xe?(Y=6,fe=3):(Y=7,fe=4))},"scan_tree"),Rn=n((ie,Mt,Ot)=>{let Ht,hn=-1,tn,xe=Mt[0*2+1],Dt=0,Y=7,fe=4;for(xe===0&&(Y=138,fe=3),Ht=0;Ht<=Ot;Ht++)if(tn=xe,xe=Mt[(Ht+1)*2+1],!(++Dt<Y&&tn===xe)){if(Dt<fe)do ut(ie,tn,ie.bl_tree);while(--Dt!==0);else tn!==0?(tn!==hn&&(ut(ie,tn,ie.bl_tree),Dt--),ut(ie,_,ie.bl_tree),De(ie,Dt-3,2)):Dt<=10?(ut(ie,C,ie.bl_tree),De(ie,Dt-3,3)):(ut(ie,w,ie.bl_tree),De(ie,Dt-11,7));Dt=0,hn=tn,xe===0?(Y=138,fe=3):tn===xe?(Y=6,fe=3):(Y=7,fe=4)}},"send_tree"),di=n(ie=>{let Mt;for($t(ie,ie.dyn_ltree,ie.l_desc.max_code),$t(ie,ie.dyn_dtree,ie.d_desc.max_code),sn(ie,ie.bl_desc),Mt=h-1;Mt>=3&&ie.bl_tree[I[Mt]*2+1]===0;Mt--);return ie.opt_len+=3*(Mt+1)+5+5+4,Mt},"build_bl_tree"),ii=n((ie,Mt,Ot,Ht)=>{let hn;for(De(ie,Mt-257,5),De(ie,Ot-1,5),De(ie,Ht-4,4),hn=0;hn<Ht;hn++)De(ie,ie.bl_tree[I[hn]*2+1],3);Rn(ie,ie.dyn_ltree,Mt-1),Rn(ie,ie.dyn_dtree,Ot-1)},"send_all_trees"),Kn=n(ie=>{let Mt=4093624447,Ot;for(Ot=0;Ot<=31;Ot++,Mt>>>=1)if(Mt&1&&ie.dyn_ltree[Ot*2]!==0)return 0;if(ie.dyn_ltree[9*2]!==0||ie.dyn_ltree[10*2]!==0||ie.dyn_ltree[13*2]!==0)return 1;for(Ot=32;Ot<r;Ot++)if(ie.dyn_ltree[Ot*2]!==0)return 1;return 0},"detect_data_type");let hi=!1;const Ln=n(ie=>{hi||(At(),hi=!0),ie.l_desc=new Ee(ie.dyn_ltree,$),ie.d_desc=new Ee(ie.dyn_dtree,he),ie.bl_desc=new Ee(ie.bl_tree,Ae),ie.bi_buf=0,ie.bi_valid=0,Vt(ie)},"_tr_init"),Hn=n((ie,Mt,Ot,Ht)=>{De(ie,(g<<1)+(Ht?1:0),3),Cn(ie,Mt,Ot,!0)},"_tr_stored_block"),ui=n(ie=>{De(ie,s<<1,3),ut(ie,b,k),Rt(ie)},"_tr_align"),jn=n((ie,Mt,Ot,Ht)=>{let hn,tn,xe=0;ie.level>0?(ie.strm.data_type===2&&(ie.strm.data_type=Kn(ie)),sn(ie,ie.l_desc),sn(ie,ie.d_desc),xe=di(ie),hn=ie.opt_len+3+7>>>3,tn=ie.static_len+3+7>>>3,tn<=hn&&(hn=tn)):hn=tn=Ot+5,Ot+4<=hn&&Mt!==-1?Hn(ie,Mt,Ot,Ht):ie.strategy===4||tn===hn?(De(ie,(s<<1)+(Ht?1:0),3),en(ie,k,N)):(De(ie,(a<<1)+(Ht?1:0),3),ii(ie,ie.l_desc.max_code+1,ie.d_desc.max_code+1,xe+1),en(ie,ie.dyn_ltree,ie.dyn_dtree)),Vt(ie),Ht&&dt(ie)},"_tr_flush_block"),ri=n((ie,Mt,Ot)=>(ie.pending_buf[ie.d_buf+ie.last_lit*2]=Mt>>>8&255,ie.pending_buf[ie.d_buf+ie.last_lit*2+1]=Mt&255,ie.pending_buf[ie.l_buf+ie.last_lit]=Ot&255,ie.last_lit++,Mt===0?ie.dyn_ltree[Ot*2]++:(ie.matches++,Mt--,ie.dyn_ltree[(B[Ot]+r+1)*2]++,ie.dyn_dtree[Oe(Mt)*2]++),ie.last_lit===ie.lit_bufsize-1),"_tr_tally");H.exports._tr_init=Ln,H.exports._tr_stored_block=Hn,H.exports._tr_flush_block=jn,H.exports._tr_tally=ri,H.exports._tr_align=ui},8079600486:H=>{"use strict";function l(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}n(l,"ZStream"),H.exports=l},7232944804:(H,l,c)=>{"use strict";H.exports=c(2045210164)},2045210164:(H,l,c)=>{"use strict";var u=l;u.build="minimal",u.Writer=c(7628345881),u.BufferWriter=c(4314741704),u.Reader=c(4066972109),u.BufferReader=c(5398895804),u.util=c(6381418898),u.rpc=c(9851642381),u.roots=c(2285340147),u.configure=m;function m(){u.util._configure(),u.Writer._configure(u.BufferWriter),u.Reader._configure(u.BufferReader)}n(m,"configure"),m()},4066972109:(H,l,c)=>{"use strict";H.exports=a;var u=c(6381418898),m,v=u.LongBits,g=u.utf8;function s(f,h){return RangeError("index out of range: "+f.pos+" + "+(h||1)+" > "+f.len)}n(s,"indexOutOfRange");function a(f){this.buf=f,this.pos=0,this.len=f.length}n(a,"Reader");var i=typeof Uint8Array<"u"?n(function(h){if(h instanceof Uint8Array||Array.isArray(h))return new a(h);throw Error("illegal buffer")},"create_typed_array"):n(function(h){if(Array.isArray(h))return new a(h);throw Error("illegal buffer")},"create_array"),e=n(function(){return u.Buffer?n(function(p){return(a.create=n(function(y){return u.Buffer.isBuffer(y)?new m(y):i(y)},"create_buffer"))(p)},"create_buffer_setup"):i},"create");a.create=e(),a.prototype._slice=u.Array.prototype.subarray||u.Array.prototype.slice,a.prototype.uint32=n(function(){var h=4294967295;return n(function(){if(h=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(h=(h|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return h;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return h},"read_uint32")},"read_uint32_setup")(),a.prototype.int32=n(function(){return this.uint32()|0},"read_int32"),a.prototype.sint32=n(function(){var h=this.uint32();return h>>>1^-(h&1)|0},"read_sint32");function t(){var f=new v(0,0),h=0;if(this.len-this.pos>4){for(;h<4;++h)if(f.lo=(f.lo|(this.buf[this.pos]&127)<<h*7)>>>0,this.buf[this.pos++]<128)return f;if(f.lo=(f.lo|(this.buf[this.pos]&127)<<28)>>>0,f.hi=(f.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return f;h=0}else{for(;h<3;++h){if(this.pos>=this.len)throw s(this);if(f.lo=(f.lo|(this.buf[this.pos]&127)<<h*7)>>>0,this.buf[this.pos++]<128)return f}return f.lo=(f.lo|(this.buf[this.pos++]&127)<<h*7)>>>0,f}if(this.len-this.pos>4){for(;h<5;++h)if(f.hi=(f.hi|(this.buf[this.pos]&127)<<h*7+3)>>>0,this.buf[this.pos++]<128)return f}else for(;h<5;++h){if(this.pos>=this.len)throw s(this);if(f.hi=(f.hi|(this.buf[this.pos]&127)<<h*7+3)>>>0,this.buf[this.pos++]<128)return f}throw Error("invalid varint encoding")}n(t,"readLongVarint"),a.prototype.bool=n(function(){return this.uint32()!==0},"read_bool");function r(f,h){return(f[h-4]|f[h-3]<<8|f[h-2]<<16|f[h-1]<<24)>>>0}n(r,"readFixed32_end"),a.prototype.fixed32=n(function(){if(this.pos+4>this.len)throw s(this,4);return r(this.buf,this.pos+=4)},"read_fixed32"),a.prototype.sfixed32=n(function(){if(this.pos+4>this.len)throw s(this,4);return r(this.buf,this.pos+=4)|0},"read_sfixed32");function o(){if(this.pos+8>this.len)throw s(this,8);return new v(r(this.buf,this.pos+=4),r(this.buf,this.pos+=4))}n(o,"readFixed64"),a.prototype.float=n(function(){if(this.pos+4>this.len)throw s(this,4);var h=u.float.readFloatLE(this.buf,this.pos);return this.pos+=4,h},"read_float"),a.prototype.double=n(function(){if(this.pos+8>this.len)throw s(this,4);var h=u.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,h},"read_double"),a.prototype.bytes=n(function(){var h=this.uint32(),p=this.pos,d=this.pos+h;if(d>this.len)throw s(this,h);if(this.pos+=h,Array.isArray(this.buf))return this.buf.slice(p,d);if(p===d){var y=u.Buffer;return y?y.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,p,d)},"read_bytes"),a.prototype.string=n(function(){var h=this.bytes();return g.read(h,0,h.length)},"read_string"),a.prototype.skip=n(function(h){if(typeof h=="number"){if(this.pos+h>this.len)throw s(this,h);this.pos+=h}else do if(this.pos>=this.len)throw s(this);while(this.buf[this.pos++]&128);return this},"skip"),a.prototype.skipType=function(f){switch(f){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(f=this.uint32()&7)!==4;)this.skipType(f);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+f+" at offset "+this.pos)}return this},a._configure=function(f){m=f,a.create=e(),m._configure();var h=u.Long?"toLong":"toNumber";u.merge(a.prototype,{int64:n(function(){return t.call(this)[h](!1)},"read_int64"),uint64:n(function(){return t.call(this)[h](!0)},"read_uint64"),sint64:n(function(){return t.call(this).zzDecode()[h](!1)},"read_sint64"),fixed64:n(function(){return o.call(this)[h](!0)},"read_fixed64"),sfixed64:n(function(){return o.call(this)[h](!1)},"read_sfixed64")})}},5398895804:(H,l,c)=>{"use strict";H.exports=v;var u=c(4066972109);(v.prototype=Object.create(u.prototype)).constructor=v;var m=c(6381418898);function v(g){u.call(this,g)}n(v,"BufferReader"),v._configure=function(){m.Buffer&&(v.prototype._slice=m.Buffer.prototype.slice)},v.prototype.string=n(function(){var s=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+s,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+s,this.len))},"read_string_buffer"),v._configure()},2285340147:H=>{"use strict";H.exports={}},9851642381:(H,l,c)=>{"use strict";var u=l;u.Service=c(6359991721)},6359991721:(H,l,c)=>{"use strict";H.exports=m;var u=c(6381418898);(m.prototype=Object.create(u.EventEmitter.prototype)).constructor=m;function m(v,g,s){if(typeof v!="function")throw TypeError("rpcImpl must be a function");u.EventEmitter.call(this),this.rpcImpl=v,this.requestDelimited=Boolean(g),this.responseDelimited=Boolean(s)}n(m,"Service"),m.prototype.rpcCall=n(function v(g,s,a,i,e){if(!i)throw TypeError("request must be specified");var t=this;if(!e)return u.asPromise(v,t,g,s,a,i);if(!t.rpcImpl){setTimeout(function(){e(Error("already ended"))},0);return}try{return t.rpcImpl(g,s[t.requestDelimited?"encodeDelimited":"encode"](i).finish(),n(function(o,f){if(o)return t.emit("error",o,g),e(o);if(f===null){t.end(!0);return}if(!(f instanceof a))try{f=a[t.responseDelimited?"decodeDelimited":"decode"](f)}catch(h){return t.emit("error",h,g),e(h)}return t.emit("data",f,g),e(null,f)},"rpcCallback"))}catch(r){t.emit("error",r,g),setTimeout(function(){e(r)},0);return}},"rpcCall"),m.prototype.end=n(function(g){return this.rpcImpl&&(g||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},"end")},3157215629:(H,l,c)=>{"use strict";H.exports=m;var u=c(6381418898);function m(a,i){this.lo=a>>>0,this.hi=i>>>0}n(m,"LongBits");var v=m.zero=new m(0,0);v.toNumber=function(){return 0},v.zzEncode=v.zzDecode=function(){return this},v.length=function(){return 1};var g=m.zeroHash="\0\0\0\0\0\0\0\0";m.fromNumber=n(function(i){if(i===0)return v;var e=i<0;e&&(i=-i);var t=i>>>0,r=(i-t)/4294967296>>>0;return e&&(r=~r>>>0,t=~t>>>0,++t>4294967295&&(t=0,++r>4294967295&&(r=0))),new m(t,r)},"fromNumber"),m.from=n(function(i){if(typeof i=="number")return m.fromNumber(i);if(u.isString(i))if(u.Long)i=u.Long.fromString(i);else return m.fromNumber(parseInt(i,10));return i.low||i.high?new m(i.low>>>0,i.high>>>0):v},"from"),m.prototype.toNumber=n(function(i){if(!i&&this.hi>>>31){var e=~this.lo+1>>>0,t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+t*4294967296)}return this.lo+this.hi*4294967296},"toNumber"),m.prototype.toLong=n(function(i){return u.Long?new u.Long(this.lo|0,this.hi|0,Boolean(i)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(i)}},"toLong");var s=String.prototype.charCodeAt;m.fromHash=n(function(i){return i===g?v:new m((s.call(i,0)|s.call(i,1)<<8|s.call(i,2)<<16|s.call(i,3)<<24)>>>0,(s.call(i,4)|s.call(i,5)<<8|s.call(i,6)<<16|s.call(i,7)<<24)>>>0)},"fromHash"),m.prototype.toHash=n(function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},"toHash"),m.prototype.zzEncode=n(function(){var i=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^i)>>>0,this.lo=(this.lo<<1^i)>>>0,this},"zzEncode"),m.prototype.zzDecode=n(function(){var i=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^i)>>>0,this.hi=(this.hi>>>1^i)>>>0,this},"zzDecode"),m.prototype.length=n(function(){var i=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,t=this.hi>>>24;return t===0?e===0?i<16384?i<128?1:2:i<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:t<128?9:10},"length")},6381418898:function(H,l,c){"use strict";var u=l;u.asPromise=c(7410930532),u.base64=c(3824736026),u.EventEmitter=c(6627060659),u.float=c(6797650127),u.inquire=c(3923667175),u.utf8=c(4612067386),u.pool=c(3002561995),u.LongBits=c(3157215629),u.isNode=Boolean(typeof c.g<"u"&&c.g&&c.g.process&&c.g.process.versions&&c.g.process.versions.node),u.global=u.isNode&&c.g||typeof window<"u"&&window||typeof self<"u"&&self||this,u.emptyArray=Object.freeze?Object.freeze([]):[],u.emptyObject=Object.freeze?Object.freeze({}):{},u.isInteger=Number.isInteger||n(function(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s},"isInteger"),u.isString=n(function(s){return typeof s=="string"||s instanceof String},"isString"),u.isObject=n(function(s){return s&&typeof s=="object"},"isObject"),u.isset=u.isSet=n(function(s,a){var i=s[a];return i!=null&&s.hasOwnProperty(a)?typeof i!="object"||(Array.isArray(i)?i.length:Object.keys(i).length)>0:!1},"isSet"),u.Buffer=function(){try{var g=u.inquire("buffer").Buffer;return g.prototype.utf8Write?g:null}catch{return null}}(),u._Buffer_from=null,u._Buffer_allocUnsafe=null,u.newBuffer=n(function(s){return typeof s=="number"?u.Buffer?u._Buffer_allocUnsafe(s):new u.Array(s):u.Buffer?u._Buffer_from(s):typeof Uint8Array>"u"?s:new Uint8Array(s)},"newBuffer"),u.Array=typeof Uint8Array<"u"?Uint8Array:Array,u.Long=u.global.dcodeIO&&u.global.dcodeIO.Long||u.global.Long||u.inquire("long"),u.key2Re=/^true|false|0|1$/,u.key32Re=/^-?(?:0|[1-9][0-9]*)$/,u.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,u.longToHash=n(function(s){return s?u.LongBits.from(s).toHash():u.LongBits.zeroHash},"longToHash"),u.longFromHash=n(function(s,a){var i=u.LongBits.fromHash(s);return u.Long?u.Long.fromBits(i.lo,i.hi,a):i.toNumber(Boolean(a))},"longFromHash");function m(g,s,a){for(var i=Object.keys(s),e=0;e<i.length;++e)(g[i[e]]===void 0||!a)&&(g[i[e]]=s[i[e]]);return g}n(m,"merge"),u.merge=m,u.lcFirst=n(function(s){return s.charAt(0).toLowerCase()+s.substring(1)},"lcFirst");function v(g){function s(a,i){if(!(this instanceof s))return new s(a,i);Object.defineProperty(this,"message",{get:function(){return a}}),Error.captureStackTrace?Error.captureStackTrace(this,s):Object.defineProperty(this,"stack",{value:new Error().stack||""}),i&&m(this,i)}return n(s,"CustomError"),s.prototype=Object.create(Error.prototype,{constructor:{value:s,writable:!0,enumerable:!1,configurable:!0},name:{get:n(function(){return g},"get"),set:void 0,enumerable:!1,configurable:!0},toString:{value:n(function(){return this.name+": "+this.message},"value"),writable:!0,enumerable:!1,configurable:!0}}),s}n(v,"newError"),u.newError=v,u.ProtocolError=v("ProtocolError"),u.oneOfGetter=n(function(s){for(var a={},i=0;i<s.length;++i)a[s[i]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;t>-1;--t)if(a[e[t]]===1&&this[e[t]]!==void 0&&this[e[t]]!==null)return e[t]}},"getOneOf"),u.oneOfSetter=n(function(s){return function(a){for(var i=0;i<s.length;++i)s[i]!==a&&delete this[s[i]]}},"setOneOf"),u.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},u._configure=function(){var g=u.Buffer;if(!g){u._Buffer_from=u._Buffer_allocUnsafe=null;return}u._Buffer_from=g.from!==Uint8Array.from&&g.from||n(function(a,i){return new g(a,i)},"Buffer_from"),u._Buffer_allocUnsafe=g.allocUnsafe||n(function(a){return new g(a)},"Buffer_allocUnsafe")}},7628345881:(H,l,c)=>{"use strict";H.exports=t;var u=c(6381418898),m,v=u.LongBits,g=u.base64,s=u.utf8;function a(S,b,_){this.fn=S,this.len=b,this.next=void 0,this.val=_}n(a,"Op");function i(){}n(i,"noop");function e(S){this.head=S.head,this.tail=S.tail,this.len=S.len,this.next=S.states}n(e,"State");function t(){this.len=0,this.head=new a(i,0,0),this.tail=this.head,this.states=null}n(t,"Writer");var r=n(function(){return u.Buffer?n(function(){return(t.create=n(function(){return new m},"create_buffer"))()},"create_buffer_setup"):n(function(){return new t},"create_array")},"create");t.create=r(),t.alloc=n(function(b){return new u.Array(b)},"alloc"),u.Array!==Array&&(t.alloc=u.pool(t.alloc,u.Array.prototype.subarray)),t.prototype._push=n(function(b,_,C){return this.tail=this.tail.next=new a(b,_,C),this.len+=_,this},"push");function o(S,b,_){b[_]=S&255}n(o,"writeByte");function f(S,b,_){for(;S>127;)b[_++]=S&127|128,S>>>=7;b[_]=S}n(f,"writeVarint32");function h(S,b){this.len=S,this.next=void 0,this.val=b}n(h,"VarintOp"),h.prototype=Object.create(a.prototype),h.prototype.fn=f,t.prototype.uint32=n(function(b){return this.len+=(this.tail=this.tail.next=new h((b=b>>>0)<128?1:b<16384?2:b<2097152?3:b<268435456?4:5,b)).len,this},"write_uint32"),t.prototype.int32=n(function(b){return b<0?this._push(p,10,v.fromNumber(b)):this.uint32(b)},"write_int32"),t.prototype.sint32=n(function(b){return this.uint32((b<<1^b>>31)>>>0)},"write_sint32");function p(S,b,_){for(;S.hi;)b[_++]=S.lo&127|128,S.lo=(S.lo>>>7|S.hi<<25)>>>0,S.hi>>>=7;for(;S.lo>127;)b[_++]=S.lo&127|128,S.lo=S.lo>>>7;b[_++]=S.lo}n(p,"writeVarint64"),t.prototype.uint64=n(function(b){var _=v.from(b);return this._push(p,_.length(),_)},"write_uint64"),t.prototype.int64=t.prototype.uint64,t.prototype.sint64=n(function(b){var _=v.from(b).zzEncode();return this._push(p,_.length(),_)},"write_sint64"),t.prototype.bool=n(function(b){return this._push(o,1,b?1:0)},"write_bool");function d(S,b,_){b[_]=S&255,b[_+1]=S>>>8&255,b[_+2]=S>>>16&255,b[_+3]=S>>>24}n(d,"writeFixed32"),t.prototype.fixed32=n(function(b){return this._push(d,4,b>>>0)},"write_fixed32"),t.prototype.sfixed32=t.prototype.fixed32,t.prototype.fixed64=n(function(b){var _=v.from(b);return this._push(d,4,_.lo)._push(d,4,_.hi)},"write_fixed64"),t.prototype.sfixed64=t.prototype.fixed64,t.prototype.float=n(function(b){return this._push(u.float.writeFloatLE,4,b)},"write_float"),t.prototype.double=n(function(b){return this._push(u.float.writeDoubleLE,8,b)},"write_double");var y=u.Array.prototype.set?n(function(b,_,C){_.set(b,C)},"writeBytes_set"):n(function(b,_,C){for(var w=0;w<b.length;++w)_[C+w]=b[w]},"writeBytes_for");t.prototype.bytes=n(function(b){var _=b.length>>>0;if(!_)return this._push(o,1,0);if(u.isString(b)){var C=t.alloc(_=g.length(b));g.decode(b,C,0),b=C}return this.uint32(_)._push(y,_,b)},"write_bytes"),t.prototype.string=n(function(b){var _=s.length(b);return _?this.uint32(_)._push(s.write,_,b):this._push(o,1,0)},"write_string"),t.prototype.fork=n(function(){return this.states=new e(this),this.head=this.tail=new a(i,0,0),this.len=0,this},"fork"),t.prototype.reset=n(function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new a(i,0,0),this.len=0),this},"reset"),t.prototype.ldelim=n(function(){var b=this.head,_=this.tail,C=this.len;return this.reset().uint32(C),C&&(this.tail.next=b.next,this.tail=_,this.len+=C),this},"ldelim"),t.prototype.finish=n(function(){for(var b=this.head.next,_=this.constructor.alloc(this.len),C=0;b;)b.fn(b.val,_,C),C+=b.len,b=b.next;return _},"finish"),t._configure=function(S){m=S,t.create=r(),m._configure()}},4314741704:(H,l,c)=>{"use strict";H.exports=v;var u=c(7628345881);(v.prototype=Object.create(u.prototype)).constructor=v;var m=c(6381418898);function v(){u.call(this)}n(v,"BufferWriter"),v._configure=function(){v.alloc=m._Buffer_allocUnsafe,v.writeBytesBuffer=m.Buffer&&m.Buffer.prototype instanceof Uint8Array&&m.Buffer.prototype.set.name==="set"?n(function(a,i,e){i.set(a,e)},"writeBytesBuffer_set"):n(function(a,i,e){if(a.copy)a.copy(i,e,0,a.length);else for(var t=0;t<a.length;)i[e++]=a[t++]},"writeBytesBuffer_copy")},v.prototype.bytes=n(function(a){m.isString(a)&&(a=m._Buffer_from(a,"base64"));var i=a.length>>>0;return this.uint32(i),i&&this._push(v.writeBytesBuffer,i,a),this},"write_bytes_buffer");function g(s,a,i){s.length<40?m.utf8.write(s,a,i):a.utf8Write?a.utf8Write(s,i):a.write(s,i)}n(g,"writeStringBuffer"),v.prototype.string=n(function(a){var i=m.Buffer.byteLength(a);return this.uint32(i),i&&this._push(g,i,a),this},"write_string_buffer"),v._configure()},8400004479:(H,l,c)=>{"use strict";c.r(l),c.d(l,{__assign:()=>v,__asyncDelegator:()=>b,__asyncGenerator:()=>S,__asyncValues:()=>_,__await:()=>y,__awaiter:()=>e,__classPrivateFieldGet:()=>O,__classPrivateFieldSet:()=>D,__createBinding:()=>r,__decorate:()=>s,__exportStar:()=>o,__extends:()=>m,__generator:()=>t,__importDefault:()=>R,__importStar:()=>w,__makeTemplateObject:()=>C,__metadata:()=>i,__param:()=>a,__read:()=>h,__rest:()=>g,__spread:()=>p,__spreadArrays:()=>d,__values:()=>f});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var u=n(function(I,M){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,N){k.__proto__=N}||function(k,N){for(var j in N)N.hasOwnProperty(j)&&(k[j]=N[j])},u(I,M)},"extendStatics");function m(I,M){u(I,M);function k(){this.constructor=I}n(k,"__"),I.prototype=M===null?Object.create(M):(k.prototype=M.prototype,new k)}n(m,"__extends");var v=n(function(){return v=Object.assign||n(function(M){for(var k,N=1,j=arguments.length;N<j;N++){k=arguments[N];for(var B in k)Object.prototype.hasOwnProperty.call(k,B)&&(M[B]=k[B])}return M},"__assign"),v.apply(this,arguments)},"__assign");function g(I,M){var k={};for(var N in I)Object.prototype.hasOwnProperty.call(I,N)&&M.indexOf(N)<0&&(k[N]=I[N]);if(I!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,N=Object.getOwnPropertySymbols(I);j<N.length;j++)M.indexOf(N[j])<0&&Object.prototype.propertyIsEnumerable.call(I,N[j])&&(k[N[j]]=I[N[j]]);return k}n(g,"__rest");function s(I,M,k,N){var j=arguments.length,B=j<3?M:N===null?N=Object.getOwnPropertyDescriptor(M,k):N,J;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(I,M,k,N);else for(var Q=I.length-1;Q>=0;Q--)(J=I[Q])&&(B=(j<3?J(B):j>3?J(M,k,B):J(M,k))||B);return j>3&&B&&Object.defineProperty(M,k,B),B}n(s,"__decorate");function a(I,M){return function(k,N){M(k,N,I)}}n(a,"__param");function i(I,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(I,M)}n(i,"__metadata");function e(I,M,k,N){function j(B){return B instanceof k?B:new k(function(J){J(B)})}return n(j,"adopt"),new(k||(k=Promise))(function(B,J){function Q(he){try{$(N.next(he))}catch(Ae){J(Ae)}}n(Q,"fulfilled");function oe(he){try{$(N.throw(he))}catch(Ae){J(Ae)}}n(oe,"rejected");function $(he){he.done?B(he.value):j(he.value).then(Q,oe)}n($,"step"),$((N=N.apply(I,M||[])).next())})}n(e,"__awaiter");function t(I,M){var k={label:0,sent:function(){if(B[0]&1)throw B[1];return B[1]},trys:[],ops:[]},N,j,B,J;return J={next:Q(0),throw:Q(1),return:Q(2)},typeof Symbol=="function"&&(J[Symbol.iterator]=function(){return this}),J;function Q($){return function(he){return oe([$,he])}}function oe($){if(N)throw new TypeError("Generator is already executing.");for(;k;)try{if(N=1,j&&(B=$[0]&2?j.return:$[0]?j.throw||((B=j.return)&&B.call(j),0):j.next)&&!(B=B.call(j,$[1])).done)return B;switch(j=0,B&&($=[$[0]&2,B.value]),$[0]){case 0:case 1:B=$;break;case 4:return k.label++,{value:$[1],done:!1};case 5:k.label++,j=$[1],$=[0];continue;case 7:$=k.ops.pop(),k.trys.pop();continue;default:if(B=k.trys,!(B=B.length>0&&B[B.length-1])&&($[0]===6||$[0]===2)){k=0;continue}if($[0]===3&&(!B||$[1]>B[0]&&$[1]<B[3])){k.label=$[1];break}if($[0]===6&&k.label<B[1]){k.label=B[1],B=$;break}if(B&&k.label<B[2]){k.label=B[2],k.ops.push($);break}B[2]&&k.ops.pop(),k.trys.pop();continue}$=M.call(I,k)}catch(he){$=[6,he],j=0}finally{N=B=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}}n(t,"__generator");function r(I,M,k,N){N===void 0&&(N=k),I[N]=M[k]}n(r,"__createBinding");function o(I,M){for(var k in I)k!=="default"&&!M.hasOwnProperty(k)&&(M[k]=I[k])}n(o,"__exportStar");function f(I){var M=typeof Symbol=="function"&&Symbol.iterator,k=M&&I[M],N=0;if(k)return k.call(I);if(I&&typeof I.length=="number")return{next:function(){return I&&N>=I.length&&(I=void 0),{value:I&&I[N++],done:!I}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}n(f,"__values");function h(I,M){var k=typeof Symbol=="function"&&I[Symbol.iterator];if(!k)return I;var N=k.call(I),j,B=[],J;try{for(;(M===void 0||M-- >0)&&!(j=N.next()).done;)B.push(j.value)}catch(Q){J={error:Q}}finally{try{j&&!j.done&&(k=N.return)&&k.call(N)}finally{if(J)throw J.error}}return B}n(h,"__read");function p(){for(var I=[],M=0;M<arguments.length;M++)I=I.concat(h(arguments[M]));return I}n(p,"__spread");function d(){for(var I=0,M=0,k=arguments.length;M<k;M++)I+=arguments[M].length;for(var N=Array(I),j=0,M=0;M<k;M++)for(var B=arguments[M],J=0,Q=B.length;J<Q;J++,j++)N[j]=B[J];return N}n(d,"__spreadArrays");function y(I){return this instanceof y?(this.v=I,this):new y(I)}n(y,"__await");function S(I,M,k){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N=k.apply(I,M||[]),j,B=[];return j={},J("next"),J("throw"),J("return"),j[Symbol.asyncIterator]=function(){return this},j;function J(Ee){N[Ee]&&(j[Ee]=function(Oe){return new Promise(function(be,De){B.push([Ee,Oe,be,De])>1||Q(Ee,Oe)})})}function Q(Ee,Oe){try{oe(N[Ee](Oe))}catch(be){Ae(B[0][3],be)}}function oe(Ee){Ee.value instanceof y?Promise.resolve(Ee.value.v).then($,he):Ae(B[0][2],Ee)}function $(Ee){Q("next",Ee)}function he(Ee){Q("throw",Ee)}function Ae(Ee,Oe){Ee(Oe),B.shift(),B.length&&Q(B[0][0],B[0][1])}}n(S,"__asyncGenerator");function b(I){var M,k;return M={},N("next"),N("throw",function(j){throw j}),N("return"),M[Symbol.iterator]=function(){return this},M;function N(j,B){M[j]=I[j]?function(J){return(k=!k)?{value:y(I[j](J)),done:j==="return"}:B?B(J):J}:B}}n(b,"__asyncDelegator");function _(I){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=I[Symbol.asyncIterator],k;return M?M.call(I):(I=typeof f=="function"?f(I):I[Symbol.iterator](),k={},N("next"),N("throw"),N("return"),k[Symbol.asyncIterator]=function(){return this},k);function N(B){k[B]=I[B]&&function(J){return new Promise(function(Q,oe){J=I[B](J),j(Q,oe,J.done,J.value)})}}function j(B,J,Q,oe){Promise.resolve(oe).then(function($){B({value:$,done:Q})},J)}}n(_,"__asyncValues");function C(I,M){return Object.defineProperty?Object.defineProperty(I,"raw",{value:M}):I.raw=M,I}n(C,"__makeTemplateObject");function w(I){if(I&&I.__esModule)return I;var M={};if(I!=null)for(var k in I)Object.hasOwnProperty.call(I,k)&&(M[k]=I[k]);return M.default=I,M}n(w,"__importStar");function R(I){return I&&I.__esModule?I:{default:I}}n(R,"__importDefault");function O(I,M){if(!M.has(I))throw new TypeError("attempted to get private field on non-instance");return M.get(I)}n(O,"__classPrivateFieldGet");function D(I,M,k){if(!M.has(I))throw new TypeError("attempted to set private field on non-instance");return M.set(I,k),k}n(D,"__classPrivateFieldSet")},888724265:function(H,l,c){var u;(function(m,v){"use strict";var g="1.0.38",s="",a="?",i="function",e="undefined",t="object",r="string",o="major",f="model",h="name",p="type",d="vendor",y="version",S="architecture",b="console",_="mobile",C="tablet",w="smarttv",R="wearable",O="embedded",D=500,I="Amazon",M="Apple",k="ASUS",N="BlackBerry",j="Browser",B="Chrome",J="Edge",Q="Firefox",oe="Google",$="Huawei",he="LG",Ae="Microsoft",Ee="Motorola",Oe="Opera",be="Samsung",De="Sharp",ut="Sony",St="Xiaomi",Rt="Zebra",Ze="Facebook",mt="Chromium OS",At="Mac OS",Vt=n(function(Hn,ui){var jn={};for(var ri in Hn)ui[ri]&&ui[ri].length%2===0?jn[ri]=ui[ri].concat(Hn[ri]):jn[ri]=Hn[ri];return jn},"extend"),dt=n(function(Hn){for(var ui={},jn=0;jn<Hn.length;jn++)ui[Hn[jn].toUpperCase()]=Hn[jn];return ui},"enumerize"),Cn=n(function(Hn,ui){return typeof Hn===r?gt(ui).indexOf(gt(Hn))!==-1:!1},"has"),gt=n(function(Hn){return Hn.toLowerCase()},"lowerize"),Ut=n(function(Hn){return typeof Hn===r?Hn.replace(/[^\d\.]/g,s).split(".")[0]:v},"majorize"),en=n(function(Hn,ui){if(typeof Hn===r)return Hn=Hn.replace(/^\s\s*/,s),typeof ui===e?Hn:Hn.substring(0,D)},"trim"),sn=n(function(Hn,ui){for(var jn=0,ri,ie,Mt,Ot,Ht,hn;jn<ui.length&&!Ht;){var tn=ui[jn],xe=ui[jn+1];for(ri=ie=0;ri<tn.length&&!Ht&&tn[ri];)if(Ht=tn[ri++].exec(Hn),Ht)for(Mt=0;Mt<xe.length;Mt++)hn=Ht[++ie],Ot=xe[Mt],typeof Ot===t&&Ot.length>0?Ot.length===2?typeof Ot[1]==i?this[Ot[0]]=Ot[1].call(this,hn):this[Ot[0]]=Ot[1]:Ot.length===3?typeof Ot[1]===i&&!(Ot[1].exec&&Ot[1].test)?this[Ot[0]]=hn?Ot[1].call(this,hn,Ot[2]):v:this[Ot[0]]=hn?hn.replace(Ot[1],Ot[2]):v:Ot.length===4&&(this[Ot[0]]=hn?Ot[3].call(this,hn.replace(Ot[1],Ot[2])):v):this[Ot]=hn||v;jn+=2}},"rgxMapper"),$t=n(function(Hn,ui){for(var jn in ui)if(typeof ui[jn]===t&&ui[jn].length>0){for(var ri=0;ri<ui[jn].length;ri++)if(Cn(ui[jn][ri],Hn))return jn===a?v:jn}else if(Cn(ui[jn],Hn))return jn===a?v:jn;return Hn},"strMapper"),Rn={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},di={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ii={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[y,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[y,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,y],[/opios[\/ ]+([\w\.]+)/i],[y,[h,Oe+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[y,[h,Oe+" GX"]],[/\bopr\/([\w\.]+)/i],[y,[h,Oe]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[y,[h,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,y],[/\bddg\/([\w\.]+)/i],[y,[h,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[y,[h,"UC"+j]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[y,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[y,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[y,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[y,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[y,[h,"Smart Lenovo "+j]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+j],y],[/\bfocus\/([\w\.]+)/i],[y,[h,Q+" Focus"]],[/\bopt\/([\w\.]+)/i],[y,[h,Oe+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[y,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[y,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[y,[h,Oe+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[y,[h,"MIUI "+j]],[/fxios\/([-\w\.]+)/i],[y,[h,Q]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 "+j]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 "+j],y],[/samsungbrowser\/([\w\.]+)/i],[y,[h,be+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],y],[/metasr[\/ ]?([\d\.]+)/i],[y,[h,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,"Sogou Mobile"],y],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[h,y],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,Ze],y],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,y],[/\bgsa\/([\w\.]+) .*safari\//i],[y,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[y,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[y,[h,B+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,B+" WebView"],y],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[y,[h,"Android "+j]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,y],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[y,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[y,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[y,$t,Rn]],[/(webkit|khtml)\/([\w\.]+)/i],[h,y],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],y],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[y,[h,Q+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[h,y],[/(cobalt)\/([\w\.]+)/i],[h,[y,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[S,"amd64"]],[/(ia32(?=;))/i],[[S,gt]],[/((?:i[346]|x)86)[;\)]/i],[[S,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[S,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[S,"armhf"]],[/windows (ce|mobile); ppc;/i],[[S,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[S,/ower/,s,gt]],[/(sun4\w)[;\)]/i],[[S,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[S,gt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[d,be],[p,C]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[d,be],[p,_]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[f,[d,M],[p,_]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[d,M],[p,C]],[/(macintosh);/i],[f,[d,M]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[d,De],[p,_]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[d,$],[p,C]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[d,$],[p,_]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[d,St],[p,_]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[d,St],[p,C]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[d,"OPPO"],[p,_]],[/\b(opd2\d{3}a?) bui/i],[f,[d,"OPPO"],[p,C]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[d,"Vivo"],[p,_]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[f,[d,"Realme"],[p,_]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[d,Ee],[p,_]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[d,Ee],[p,C]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[d,he],[p,C]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[d,he],[p,_]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[d,"Lenovo"],[p,C]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[d,"Nokia"],[p,_]],[/(pixel c)\b/i],[f,[d,oe],[p,C]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[d,oe],[p,_]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[d,ut],[p,_]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[d,ut],[p,C]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[d,"OnePlus"],[p,_]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[d,I],[p,C]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[d,I],[p,_]],[/(playbook);[-\w\),; ]+(rim)/i],[f,d,[p,C]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[d,N],[p,_]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[d,k],[p,C]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[d,k],[p,_]],[/(nexus 9)/i],[f,[d,"HTC"],[p,C]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[d,[f,/_/g," "],[p,_]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[d,"Acer"],[p,C]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[d,"Meizu"],[p,_]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[f,[d,"Ulefone"],[p,_]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,f,[p,_]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,f,[p,C]],[/(surface duo)/i],[f,[d,Ae],[p,C]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[d,"Fairphone"],[p,_]],[/(u304aa)/i],[f,[d,"AT&T"],[p,_]],[/\bsie-(\w*)/i],[f,[d,"Siemens"],[p,_]],[/\b(rct\w+) b/i],[f,[d,"RCA"],[p,C]],[/\b(venue[\d ]{2,7}) b/i],[f,[d,"Dell"],[p,C]],[/\b(q(?:mv|ta)\w+) b/i],[f,[d,"Verizon"],[p,C]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[d,"Barnes & Noble"],[p,C]],[/\b(tm\d{3}\w+) b/i],[f,[d,"NuVision"],[p,C]],[/\b(k88) b/i],[f,[d,"ZTE"],[p,C]],[/\b(nx\d{3}j) b/i],[f,[d,"ZTE"],[p,_]],[/\b(gen\d{3}) b.+49h/i],[f,[d,"Swiss"],[p,_]],[/\b(zur\d{3}) b/i],[f,[d,"Swiss"],[p,C]],[/\b((zeki)?tb.*\b) b/i],[f,[d,"Zeki"],[p,C]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],f,[p,C]],[/\b(ns-?\w{0,9}) b/i],[f,[d,"Insignia"],[p,C]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[d,"NextBook"],[p,C]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],f,[p,_]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],f,[p,_]],[/\b(ph-1) /i],[f,[d,"Essential"],[p,_]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[d,"Envizen"],[p,C]],[/\b(trio[-\w\. ]+) b/i],[f,[d,"MachSpeed"],[p,C]],[/\btu_(1491) b/i],[f,[d,"Rotor"],[p,C]],[/(shield[\w ]+) b/i],[f,[d,"Nvidia"],[p,C]],[/(sprint) (\w+)/i],[d,f,[p,_]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[d,Ae],[p,_]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[d,Rt],[p,C]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[d,Rt],[p,_]],[/smart-tv.+(samsung)/i],[d,[p,w]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[d,be],[p,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,he],[p,w]],[/(apple) ?tv/i],[d,[f,M+" TV"],[p,w]],[/crkey/i],[[f,B+"cast"],[d,oe],[p,w]],[/droid.+aft(\w+)( bui|\))/i],[f,[d,I],[p,w]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[d,De],[p,w]],[/(bravia[\w ]+)( bui|\))/i],[f,[d,ut],[p,w]],[/(mitv-\w{5}) bui/i],[f,[d,St],[p,w]],[/Hbbtv.*(technisat) (.*);/i],[d,f,[p,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[d,en],[f,en],[p,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,w]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,f,[p,b]],[/droid.+; (shield) bui/i],[f,[d,"Nvidia"],[p,b]],[/(playstation [345portablevi]+)/i],[f,[d,ut],[p,b]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[d,Ae],[p,b]],[/((pebble))app/i],[d,f,[p,R]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[f,[d,M],[p,R]],[/droid.+; (glass) \d/i],[f,[d,oe],[p,R]],[/droid.+; (wt63?0{2,3})\)/i],[f,[d,Rt],[p,R]],[/(quest( \d| pro)?)/i],[f,[d,Ze],[p,R]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[p,O]],[/(aeobc)\b/i],[f,[d,I],[p,O]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[f,[p,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[p,C]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,C]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,_]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[y,[h,J+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[y,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,y],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[y,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,y],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[h,[y,$t,di]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[y,$t,di],[h,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[y,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,At],[y,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[y,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,y],[/\(bb(10);/i],[y,[h,N]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[y,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[y,[h,Q+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[y,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[y,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[y,[h,B+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,mt],y],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,y],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],y],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,y]]},Kn=n(function(Hn,ui){if(typeof Hn===t&&(ui=Hn,Hn=v),!(this instanceof Kn))return new Kn(Hn,ui).getResult();var jn=typeof m!==e&&m.navigator?m.navigator:v,ri=Hn||(jn&&jn.userAgent?jn.userAgent:s),ie=jn&&jn.userAgentData?jn.userAgentData:v,Mt=ui?Vt(ii,ui):ii,Ot=jn&&jn.userAgent==ri;return this.getBrowser=function(){var Ht={};return Ht[h]=v,Ht[y]=v,sn.call(Ht,ri,Mt.browser),Ht[o]=Ut(Ht[y]),Ot&&jn&&jn.brave&&typeof jn.brave.isBrave==i&&(Ht[h]="Brave"),Ht},this.getCPU=function(){var Ht={};return Ht[S]=v,sn.call(Ht,ri,Mt.cpu),Ht},this.getDevice=function(){var Ht={};return Ht[d]=v,Ht[f]=v,Ht[p]=v,sn.call(Ht,ri,Mt.device),Ot&&!Ht[p]&&ie&&ie.mobile&&(Ht[p]=_),Ot&&Ht[f]=="Macintosh"&&jn&&typeof jn.standalone!==e&&jn.maxTouchPoints&&jn.maxTouchPoints>2&&(Ht[f]="iPad",Ht[p]=C),Ht},this.getEngine=function(){var Ht={};return Ht[h]=v,Ht[y]=v,sn.call(Ht,ri,Mt.engine),Ht},this.getOS=function(){var Ht={};return Ht[h]=v,Ht[y]=v,sn.call(Ht,ri,Mt.os),Ot&&!Ht[h]&&ie&&ie.platform&&ie.platform!="Unknown"&&(Ht[h]=ie.platform.replace(/chrome os/i,mt).replace(/macos/i,At)),Ht},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ri},this.setUA=function(Ht){return ri=typeof Ht===r&&Ht.length>D?en(Ht,D):Ht,this},this.setUA(ri),this},"UAParser");Kn.VERSION=g,Kn.BROWSER=dt([h,y,o]),Kn.CPU=dt([S]),Kn.DEVICE=dt([f,d,p,b,_,w,C,R,O]),Kn.ENGINE=Kn.OS=dt([h,y]),typeof l!==e?(e!=="object"&&H.exports&&(l=H.exports=Kn),l.UAParser=Kn):i==="function"&&c.amdO?(u=function(){return Kn}.call(l,c,l,H),u!==v&&(H.exports=u)):typeof m!==e&&(m.UAParser=Kn);var hi=typeof m!==e&&(m.jQuery||m.Zepto);if(hi&&!hi.ua){var Ln=new Kn;hi.ua=Ln.getResult(),hi.ua.get=function(){return Ln.getUA()},hi.ua.set=function(Hn){Ln.setUA(Hn);var ui=Ln.getResult();for(var jn in ui)hi.ua[jn]=ui[jn]}}})(typeof window=="object"?window:this)},7229287800:H=>{H.exports=JSON.parse(`{"name":"@aws-sdk/client-chime-sdk-messaging","description":"AWS SDK for JavaScript Chime Sdk Messaging Client for Node.js, Browser and React Native","version":"3.341.0","scripts":{"build":"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4","clean":"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo chime-sdk-messaging"},"main":"./dist-cjs/index.js","types":"./dist-types/index.d.ts","module":"./dist-es/index.js","sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.341.0","@aws-sdk/config-resolver":"3.341.0","@aws-sdk/credential-provider-node":"3.341.0","@aws-sdk/fetch-http-handler":"3.341.0","@aws-sdk/hash-node":"3.341.0","@aws-sdk/invalid-dependency":"3.341.0","@aws-sdk/middleware-content-length":"3.341.0","@aws-sdk/middleware-endpoint":"3.341.0","@aws-sdk/middleware-host-header":"3.341.0","@aws-sdk/middleware-logger":"3.341.0","@aws-sdk/middleware-recursion-detection":"3.341.0","@aws-sdk/middleware-retry":"3.341.0","@aws-sdk/middleware-serde":"3.341.0","@aws-sdk/middleware-signing":"3.341.0","@aws-sdk/middleware-stack":"3.341.0","@aws-sdk/middleware-user-agent":"3.341.0","@aws-sdk/node-config-provider":"3.341.0","@aws-sdk/node-http-handler":"3.341.0","@aws-sdk/smithy-client":"3.341.0","@aws-sdk/types":"3.341.0","@aws-sdk/url-parser":"3.341.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.341.0","@aws-sdk/util-defaults-mode-node":"3.341.0","@aws-sdk/util-endpoints":"3.341.0","@aws-sdk/util-retry":"3.341.0","@aws-sdk/util-user-agent-browser":"3.341.0","@aws-sdk/util-user-agent-node":"3.341.0","@aws-sdk/util-utf8":"3.310.0","@smithy/protocol-http":"^1.0.1","@smithy/types":"^1.0.0","tslib":"^2.5.0","uuid":"^8.3.2"},"devDependencies":{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31","@types/uuid":"^8.3.0","concurrently":"7.0.0","downlevel-dts":"0.10.1","rimraf":"3.0.2","typedoc":"0.23.23","typescript":"~4.9.5"},"engines":{"node":">=14.0.0"},"typesVersions":{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},"files":["dist-*/**"],"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","browser":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},"homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-chime-sdk-messaging","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-chime-sdk-messaging"}}`)},1209174152:H=>{H.exports=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"aws-global":{"description":"AWS Standard global region"},"ca-central-1":{"description":"Canada (Central)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"AWS China global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"AWS GovCloud (US) global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"c2s.ic.gov","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"AWS ISO (US) global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"sc2s.sgov.gov","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"AWS ISOB (US) global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}},{"id":"aws-iso-e","outputs":{"dnsSuffix":"cloud.adc-e.uk","dualStackDnsSuffix":"cloud.adc-e.uk","name":"aws-iso-e","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^eu\\\\-isoe\\\\-\\\\w+\\\\-\\\\d+$","regions":{}}],"version":"1.1"}')},6439564264:(H,l,c)=>{"use strict";c.d(l,{A:()=>g});var u=c(4116706745),m=c(7577999880);function v(s,a){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=void 0}n(v,"LodashWrapper"),v.prototype=(0,u.A)(m.A.prototype),v.prototype.constructor=v;const g=v},7577999880:(H,l,c)=>{"use strict";c.d(l,{A:()=>m});function u(){}n(u,"baseLodash");const m=u},3119888921:(H,l,c)=>{"use strict";c.d(l,{A:()=>m});function u(v,g){return v<g}n(u,"baseLt");const m=u},82774879:(H,l,c)=>{"use strict";c.d(l,{A:()=>a});var u=c(7269456539),m=c(14469648),v=Array.prototype,g=v.splice;function s(i,e){for(var t=i?e.length:0,r=t-1;t--;){var o=e[t];if(t==r||o!==f){var f=o;(0,m.A)(o)?g.call(i,o,1):(0,u.A)(i,o)}}return i}n(s,"basePullAt");const a=s},6258185230:(H,l,c)=>{"use strict";c.d(l,{A:()=>v});var u=c(1375914321);function m(g,s,a,i){for(var e=g.length,t=i?e:-1;(i?t--:++t<e)&&s(g[t],t,g););return a?(0,u.A)(g,i?0:t,i?t+1:e):(0,u.A)(g,i?t+1:0,i?e:t)}n(m,"baseWhile");const v=m},3046491484:(H,l,c)=>{"use strict";c.d(l,{A:()=>e});var u=c(3940990596),m=c(4059064744),v=c(522166923),g=c(6253409059),s=u.A.isFinite,a=Math.min;function i(t){var r=Math[t];return function(o,f){if(o=(0,v.A)(o),f=f==null?0:a((0,m.A)(f),292),f&&s(o)){var h=((0,g.A)(o)+"e").split("e"),p=r(h[0]+"e"+(+h[1]+f));return h=((0,g.A)(p)+"e").split("e"),+(h[0]+"e"+(+h[1]-f))}return r(o)}}n(i,"createRound");const e=i},9622574471:(H,l,c)=>{"use strict";c.d(l,{A:()=>Zo});var u=c(2236568457),m=c(2524318401),v=m.A?function(Xn,Dn){return m.A.set(Xn,Dn),Xn}:u.A;const g=v;var s=c(4116706745),a=c(5797466484);function i(Xn){return function(){var Dn=arguments;switch(Dn.length){case 0:return new Xn;case 1:return new Xn(Dn[0]);case 2:return new Xn(Dn[0],Dn[1]);case 3:return new Xn(Dn[0],Dn[1],Dn[2]);case 4:return new Xn(Dn[0],Dn[1],Dn[2],Dn[3]);case 5:return new Xn(Dn[0],Dn[1],Dn[2],Dn[3],Dn[4]);case 6:return new Xn(Dn[0],Dn[1],Dn[2],Dn[3],Dn[4],Dn[5]);case 7:return new Xn(Dn[0],Dn[1],Dn[2],Dn[3],Dn[4],Dn[5],Dn[6])}var Ni=(0,s.A)(Xn.prototype),pi=Xn.apply(Ni,Dn);return(0,a.A)(pi)?pi:Ni}}n(i,"createCtor");const e=i;var t=c(3940990596),r=1;function o(Xn,Dn,Ni){var pi=Dn&r,ir=e(Xn);function br(){var zr=this&&this!==t.A&&this instanceof br?ir:Xn;return zr.apply(pi?Ni:this,arguments)}return n(br,"wrapper"),br}n(o,"createBind");const f=o;var h=c(4629374672),p=Math.max;function d(Xn,Dn,Ni,pi){for(var ir=-1,br=Xn.length,zr=Ni.length,pr=-1,mr=Dn.length,Ur=p(br-zr,0),io=Array(mr+Ur),ur=!pi;++pr<mr;)io[pr]=Dn[pr];for(;++ir<zr;)(ur||ir<br)&&(io[Ni[ir]]=Xn[ir]);for(;Ur--;)io[pr++]=Xn[ir++];return io}n(d,"composeArgs");const y=d;var S=Math.max;function b(Xn,Dn,Ni,pi){for(var ir=-1,br=Xn.length,zr=-1,pr=Ni.length,mr=-1,Ur=Dn.length,io=S(br-pr,0),ur=Array(io+Ur),wo=!pi;++ir<io;)ur[ir]=Xn[ir];for(var $r=ir;++mr<Ur;)ur[$r+mr]=Dn[mr];for(;++zr<pr;)(wo||ir<br)&&(ur[$r+Ni[zr]]=Xn[ir++]);return ur}n(b,"composeArgsRight");const _=b;function C(Xn,Dn){for(var Ni=Xn.length,pi=0;Ni--;)Xn[Ni]===Dn&&++pi;return pi}n(C,"countHolders");const w=C;var R=c(934475406),O=c(3968459270),D=(0,O.A)(g);const I=D;var M=/\{\n\/\* \[wrapped with (.+)\] \*/,k=/,? & /;function N(Xn){var Dn=Xn.match(M);return Dn?Dn[1].split(k):[]}n(N,"getWrapDetails");const j=N;var B=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function J(Xn,Dn){var Ni=Dn.length;if(!Ni)return Xn;var pi=Ni-1;return Dn[pi]=(Ni>1?"& ":"")+Dn[pi],Dn=Dn.join(Ni>2?", ":" "),Xn.replace(B,`{
/* [wrapped with `+Dn+`] */
`)}n(J,"insertWrapDetails");const Q=J;var oe=c(5178179588),$=c(5614497032),he=c(7402177396),Ae=1,Ee=2,Oe=8,be=16,De=32,ut=64,St=128,Rt=256,Ze=512,mt=[["ary",St],["bind",Ae],["bindKey",Ee],["curry",Oe],["curryRight",be],["flip",Ze],["partial",De],["partialRight",ut],["rearg",Rt]];function At(Xn,Dn){return(0,$.A)(mt,function(Ni){var pi="_."+Ni[0];Dn&Ni[1]&&!(0,he.A)(Xn,pi)&&Xn.push(pi)}),Xn.sort()}n(At,"updateWrapDetails");const Vt=At;function dt(Xn,Dn,Ni){var pi=Dn+"";return(0,oe.A)(Xn,Q(pi,Vt(j(pi),Ni)))}n(dt,"setWrapToString");const Cn=dt;var gt=1,Ut=2,en=4,sn=8,$t=32,Rn=64;function di(Xn,Dn,Ni,pi,ir,br,zr,pr,mr,Ur){var io=Dn&sn,ur=io?zr:void 0,wo=io?void 0:zr,$r=io?br:void 0,Vo=io?void 0:br;Dn|=io?$t:Rn,Dn&=~(io?Rn:$t),Dn&en||(Dn&=~(gt|Ut));var V=[Xn,Dn,ir,$r,ur,Vo,wo,pr,mr,Ur],we=Ni.apply(void 0,V);return(0,R.A)(Xn)&&I(we,V),we.placeholder=pi,Cn(we,Xn,Dn)}n(di,"createRecurry");const ii=di;var Kn=c(8708460378),hi=c(4885105346),Ln=c(14469648),Hn=Math.min;function ui(Xn,Dn){for(var Ni=Xn.length,pi=Hn(Dn.length,Ni),ir=(0,hi.A)(Xn);pi--;){var br=Dn[pi];Xn[pi]=(0,Ln.A)(br,Ni)?ir[br]:void 0}return Xn}n(ui,"reorder");const jn=ui;var ri=c(8625772175),ie=1,Mt=2,Ot=8,Ht=16,hn=128,tn=512;function xe(Xn,Dn,Ni,pi,ir,br,zr,pr,mr,Ur){var io=Dn&hn,ur=Dn&ie,wo=Dn&Mt,$r=Dn&(Ot|Ht),Vo=Dn&tn,V=wo?void 0:e(Xn);function we(){for(var ct=arguments.length,Wt=Array(ct),On=ct;On--;)Wt[On]=arguments[On];if($r)var fi=(0,Kn.A)(we),Li=w(Wt,fi);if(pi&&(Wt=y(Wt,pi,ir,$r)),br&&(Wt=_(Wt,br,zr,$r)),ct-=Li,$r&&ct<Ur){var gi=(0,ri.A)(Wt,fi);return ii(Xn,Dn,xe,we.placeholder,Ni,Wt,gi,pr,mr,Ur-ct)}var Mi=ur?Ni:this,Oi=wo?Mi[Xn]:Xn;return ct=Wt.length,pr?Wt=jn(Wt,pr):Vo&&ct>1&&Wt.reverse(),io&&mr<ct&&(Wt.length=mr),this&&this!==t.A&&this instanceof we&&(Oi=V||e(Oi)),Oi.apply(Mi,Wt)}return n(we,"wrapper"),we}n(xe,"createHybrid");const Dt=xe;function Y(Xn,Dn,Ni){var pi=e(Xn);function ir(){for(var br=arguments.length,zr=Array(br),pr=br,mr=(0,Kn.A)(ir);pr--;)zr[pr]=arguments[pr];var Ur=br<3&&zr[0]!==mr&&zr[br-1]!==mr?[]:(0,ri.A)(zr,mr);if(br-=Ur.length,br<Ni)return ii(Xn,Dn,Dt,ir.placeholder,void 0,zr,Ur,void 0,void 0,Ni-br);var io=this&&this!==t.A&&this instanceof ir?pi:Xn;return(0,h.A)(io,this,zr)}return n(ir,"wrapper"),ir}n(Y,"createCurry");const fe=Y;var et=1;function nt(Xn,Dn,Ni,pi){var ir=Dn&et,br=e(Xn);function zr(){for(var pr=-1,mr=arguments.length,Ur=-1,io=pi.length,ur=Array(io+mr),wo=this&&this!==t.A&&this instanceof zr?br:Xn;++Ur<io;)ur[Ur]=pi[Ur];for(;mr--;)ur[Ur++]=arguments[++pr];return(0,h.A)(wo,ir?Ni:this,ur)}return n(zr,"wrapper"),zr}n(nt,"createPartial");const nn=nt;var kt=c(1114224892),Jt="__lodash_placeholder__",Ke=1,vt=2,x=4,Ye=8,it=128,ft=256,ge=Math.min;function Zn(Xn,Dn){var Ni=Xn[1],pi=Dn[1],ir=Ni|pi,br=ir<(Ke|vt|it),zr=pi==it&&Ni==Ye||pi==it&&Ni==ft&&Xn[7].length<=Dn[8]||pi==(it|ft)&&Dn[7].length<=Dn[8]&&Ni==Ye;if(!(br||zr))return Xn;pi&Ke&&(Xn[2]=Dn[2],ir|=Ni&Ke?0:x);var pr=Dn[3];if(pr){var mr=Xn[3];Xn[3]=mr?y(mr,pr,Dn[4]):pr,Xn[4]=mr?(0,ri.A)(Xn[3],Jt):Dn[4]}return pr=Dn[5],pr&&(mr=Xn[5],Xn[5]=mr?_(mr,pr,Dn[6]):pr,Xn[6]=mr?(0,ri.A)(Xn[5],Jt):Dn[6]),pr=Dn[7],pr&&(Xn[7]=pr),pi&it&&(Xn[8]=Xn[8]==null?Dn[8]:ge(Xn[8],Dn[8])),Xn[9]==null&&(Xn[9]=Dn[9]),Xn[0]=Dn[0],Xn[1]=ir,Xn}n(Zn,"mergeData");const Xt=Zn;var pn=c(4059064744),Bi="Expected a function",Gn=1,yo=2,no=8,Vi=16,or=32,ki=64,qi=Math.max;function Or(Xn,Dn,Ni,pi,ir,br,zr,pr){var mr=Dn&yo;if(!mr&&typeof Xn!="function")throw new TypeError(Bi);var Ur=pi?pi.length:0;if(Ur||(Dn&=~(or|ki),pi=ir=void 0),zr=zr===void 0?zr:qi((0,pn.A)(zr),0),pr=pr===void 0?pr:(0,pn.A)(pr),Ur-=ir?ir.length:0,Dn&ki){var io=pi,ur=ir;pi=ir=void 0}var wo=mr?void 0:(0,kt.A)(Xn),$r=[Xn,Dn,Ni,pi,ir,io,ur,br,zr,pr];if(wo&&Xt($r,wo),Xn=$r[0],Dn=$r[1],Ni=$r[2],pi=$r[3],ir=$r[4],pr=$r[9]=$r[9]===void 0?mr?0:Xn.length:qi($r[9]-Ur,0),!pr&&Dn&(no|Vi)&&(Dn&=~(no|Vi)),!Dn||Dn==Gn)var Vo=f(Xn,Dn,Ni);else Dn==no||Dn==Vi?Vo=fe(Xn,Dn,pr):(Dn==or||Dn==(Gn|or))&&!ir.length?Vo=nn(Xn,Dn,Ni,pi):Vo=Dt.apply(void 0,$r);var V=wo?g:I;return Cn(V(Vo,$r),Xn,Dn)}n(Or,"createWrap");const Zo=Or},1114224892:(H,l,c)=>{"use strict";c.d(l,{A:()=>g});var u=c(2524318401),m=c(7715417323),v=u.A?function(s){return u.A.get(s)}:m.A;const g=v},7667421386:(H,l,c)=>{"use strict";c.d(l,{A:()=>a});var u={};const m=u;var v=Object.prototype,g=v.hasOwnProperty;function s(i){for(var e=i.name+"",t=m[e],r=g.call(m,e)?t.length:0;r--;){var o=t[r],f=o.func;if(f==null||f==i)return o.name}return e}n(s,"getFuncName");const a=s},8708460378:(H,l,c)=>{"use strict";c.d(l,{A:()=>m});function u(v){var g=v;return g.placeholder}n(u,"getHolder");const m=u},934475406:(H,l,c)=>{"use strict";c.d(l,{A:()=>_});var u=c(4116706745),m=c(7577999880),v=4294967295;function g(C){this.__wrapped__=C,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=v,this.__views__=[]}n(g,"LazyWrapper"),g.prototype=(0,u.A)(m.A.prototype),g.prototype.constructor=g;const s=g;var a=c(1114224892),i=c(7667421386),e=c(6439564264),t=c(9746734072),r=c(1276945623),o=c(4885105346);function f(C){if(C instanceof s)return C.clone();var w=new e.A(C.__wrapped__,C.__chain__);return w.__actions__=(0,o.A)(C.__actions__),w.__index__=C.__index__,w.__values__=C.__values__,w}n(f,"wrapperClone");const h=f;var p=Object.prototype,d=p.hasOwnProperty;function y(C){if((0,r.A)(C)&&!(0,t.A)(C)&&!(C instanceof s)){if(C instanceof e.A)return C;if(d.call(C,"__wrapped__"))return h(C)}return new e.A(C)}n(y,"lodash"),y.prototype=m.A.prototype,y.prototype.constructor=y;const S=y;function b(C){var w=(0,i.A)(C),R=S[w];if(typeof R!="function"||!(w in s.prototype))return!1;if(C===R)return!0;var O=(0,a.A)(R);return!!O&&C===O[0]}n(b,"isLaziable");const _=b},2524318401:(H,l,c)=>{"use strict";c.d(l,{A:()=>v});var u=c(8672092338),m=u.A&&new u.A;const v=m},8625772175:(H,l,c)=>{"use strict";c.d(l,{A:()=>v});var u="__lodash_placeholder__";function m(g,s){for(var a=-1,i=g.length,e=0,t=[];++a<i;){var r=g[a];(r===s||r===u)&&(g[a]=u,t[e++]=a)}return t}n(m,"replaceHolders");const v=m},3961021150:(H,l,c)=>{"use strict";c.d(l,{A:()=>r});var u=c(3616922598),m=c(3896129026),v=c(9001690186),g=c(7648251195),s=c(8818493002),a=c(2604971659),i=Object.prototype,e=i.hasOwnProperty,t=(0,v.A)(function(o,f){if((0,s.A)(f)||(0,g.A)(f)){(0,m.A)(f,(0,a.A)(f),o);return}for(var h in f)e.call(f,h)&&(0,u.A)(o,h,f[h])});const r=t},489015593:(H,l,c)=>{"use strict";c.d(l,{A:()=>p});var u=c(5614497032),m=c(8033247945),v=c(9046884403),g=c(9622574471),s=c(8708460378),a=c(8625772175),i=1,e=32,t=(0,v.A)(function(d,y,S){var b=i;if(S.length){var _=(0,a.A)(S,(0,s.A)(t));b|=e}return(0,g.A)(d,b,y,S,_)});t.placeholder={};const r=t;var o=c(316474953),f=c(3055495996),h=(0,o.A)(function(d,y){return(0,u.A)(y,function(S){S=(0,f.A)(S),(0,m.A)(d,S,r(d[S],d))}),d});const p=h},8424846741:(H,l,c)=>{"use strict";c.d(l,{A:()=>v});var u=c(9746734072);function m(){if(!arguments.length)return[];var g=arguments[0];return(0,u.A)(g)?g:[g]}n(m,"castArray");const v=m},9420277174:(H,l,c)=>{"use strict";c.d(l,{A:()=>g});var u=c(9622574471),m=8;function v(s,a,i){a=i?void 0:a;var e=(0,u.A)(s,m,void 0,void 0,void 0,void 0,void 0,a);return e.placeholder=v.placeholder,e}n(v,"curry"),v.placeholder={};const g=v},1566461842:(H,l,c)=>{"use strict";c.d(l,{A:()=>t});var u=c(4629374672),m=c(9046884403),v=c(6295853301),g=c(5797466484);function s(r,o,f,h,p,d){return(0,g.A)(r)&&(0,g.A)(o)&&(d.set(o,r),(0,v.A)(r,o,void 0,s,d),d.delete(o)),r}n(s,"customDefaultsMerge");const a=s;var i=c(1687672245),e=(0,m.A)(function(r){return r.push(void 0,a),(0,u.A)(i.A,void 0,r)});const t=e},4360875129:(H,l,c)=>{"use strict";c.d(l,{A:()=>e});var u=c(6966908974),m=c(5684627082),v=c(8897847042),g=c(9046884403),s=c(4635518404),a=c(8786006583),i=(0,g.A)(function(t,r){var o=(0,a.A)(r);return(0,s.A)(o)&&(o=void 0),(0,s.A)(t)?(0,u.A)(t,(0,m.A)(r,1,s.A,!0),(0,v.A)(o,2)):[]});const e=i},2749086681:(H,l,c)=>{"use strict";c.d(l,{A:()=>g});var u=c(8897847042),m=c(6258185230);function v(s,a){return s&&s.length?(0,m.A)(s,(0,u.A)(a,3),!0,!0):[]}n(v,"dropRightWhile");const g=v},8825197919:(H,l,c)=>{"use strict";c.d(l,{A:()=>g});var u=c(8897847042),m=c(6258185230);function v(s,a){return s&&s.length?(0,m.A)(s,(0,u.A)(a,3),!0):[]}n(v,"dropWhile");const g=v},1041273904:(H,l,c)=>{"use strict";c.d(l,{A:()=>m});function u(v){for(var g=-1,s=v==null?0:v.length,a={};++g<s;){var i=v[g];a[i[0]]=i[1]}return a}n(u,"fromPairs");const m=u},1687672245:(H,l,c)=>{"use strict";c.d(l,{A:()=>g});var u=c(6295853301),m=c(9001690186),v=(0,m.A)(function(s,a,i,e){(0,u.A)(s,a,i,e)});const g=v},5729325965:(H,l,c)=>{"use strict";c.d(l,{A:()=>s});var u=c(3743429634),m=c(3119888921),v=c(2236568457);function g(a){return a&&a.length?(0,u.A)(a,v.A,m.A):void 0}n(g,"min");const s=g},4249070636:(H,l,c)=>{"use strict";c.d(l,{A:()=>s});var u=c(3743429634),m=c(8897847042),v=c(3119888921);function g(a,i){return a&&a.length?(0,u.A)(a,(0,m.A)(i,2),v.A):void 0}n(g,"minBy");const s=g},9101902095:(H,l,c)=>{"use strict";c.d(l,{A:()=>r});var u=c(3584844445),m=c(4629374672),v=c(8897847042),g=c(9046884403),s=c(5642817980),a=c(316474953);function i(o){return(0,a.A)(function(f){return f=(0,u.A)(f,(0,s.A)(v.A)),(0,g.A)(function(h){var p=this;return o(f,function(d){return(0,m.A)(d,p,h)})})})}n(i,"createOver");var t=i(u.A);const r=t},3367239067:(H,l,c)=>{"use strict";c.d(l,{A:()=>g});var u=c(8897847042),m=c(82774879);function v(s,a){var i=[];if(!(s&&s.length))return i;var e=-1,t=[],r=s.length;for(a=(0,u.A)(a,3);++e<r;){var o=s[e];a(o,e,s)&&(i.push(o),t.push(e))}return(0,m.A)(s,t),i}n(v,"remove");const g=v},1699044291:(H,l,c)=>{"use strict";c.d(l,{A:()=>g});var u=Array.prototype,m=u.reverse;function v(s){return s==null?s:m.call(s)}n(v,"reverse");const g=v},5154341017:(H,l,c)=>{"use strict";c.d(l,{A:()=>v});var u=c(3046491484),m=(0,u.A)("round");const v=m},9026461287:(H,l,c)=>{"use strict";c.d(l,{A:()=>g});var u=c(8897847042),m=c(6258185230);function v(s,a){return s&&s.length?(0,m.A)(s,(0,u.A)(a,3),!1,!0):[]}n(v,"takeRightWhile");const g=v},9867500491:(H,l,c)=>{"use strict";c.d(l,{A:()=>e});var u=c(7694407897),m=c(7049857535),v=c(4059064744),g=9007199254740991,s=4294967295,a=Math.min;function i(t,r){if(t=(0,v.A)(t),t<1||t>g)return[];var o=s,f=a(t,s);r=(0,m.A)(r),t-=s;for(var h=(0,u.A)(f,r);++o<t;)r(o);return h}n(i,"times");const e=i}}]);})();

//# sourceMappingURL=https://slack.com/source-maps/bv1-13/gantry-v2-vendors-client.9a579c5c5ff817fdb084.min.js.map